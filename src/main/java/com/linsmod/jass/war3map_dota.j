globals
integer array I
integer array O
integer array A
integer array B
integer array C
integer array D
integer array E
integer array F
integer array G
integer array H
integer array Z
integer array V
integer array W
integer array X
integer array Y
integer array J
integer array K
real array L
timer M=null
real N=0
integer array T
boolean array R
integer array P
integer array Q
integer array I0
boolean O0=false
boolean array A0
boolean B0=false
string array C0
boolean array D0
timer array E0
timer array F0
integer array G0
integer H0=0
integer Z0=0
integer array V0
integer array W0
boolean X0=false
boolean Y0=false
boolean J0=false
boolean K0=false
boolean L0=false
multiboard M0=null
unit N0=null
boolean array S0
integer T0=0
boolean R0=false
boolean P0=false
boolean Q0=false
location U0=null
location BI=null
location CI=null
location DI=null
location EI=null
boolean FI=false
boolean GI=false
boolean HI=false
boolean ZI=false
boolean VI=false
boolean WI=false
boolean XI=false
boolean YI=false
boolean JI=false
boolean KI=false
boolean LI=false
boolean NI=false
integer SI=0
integer TI=0
location RI=null
location PI=null
location QI=null
location UI=null
location I1=null
location O1=null
location A1=null
location B1=null
location C1=null
location D1=null
location E1=null
location F1=null
location G1=null
location H1=null
integer array Z1
integer array V1
integer array W1
integer array X1
integer Y1=0
integer array J1
integer array K1
unit array L1
integer M1=0
integer N1=0
player array S1
player array T1
integer array R1
integer array P1
integer array Q1
integer array U1
unit array IO
integer array OO
force AO=null
force BO=null
player array CO
player array DO
player EO=null
player FO=null
boolean GO=false
leaderboard array HO
integer ZO=0
integer VO=0
integer array WO
player XO=null
unit YO=null
integer JO=0
real KO=0
item array LO
item array NO
item array TO
item array PO
item array QO
item array UO
boolean I2=false
integer O2=0
location array A2
unit B2=null
group C2=null
boolean D2=false
boolean E2=false
boolean F2=false
boolean G2=false
boolean H2=false
boolean Z2=false
boolean V2=false
boolean W2=false
string X2=""
timer Y2=null
boolean J2=false
boolean K2=false
item L2=null
player M2=null
string array N2
boolean S2=false
boolean array T2
integer array R2
integer P2=0
force Q2=null
boolean U2=false
real I3=0
boolean O3=false
boolean A3=false
boolean B3=false
boolean C3=false
boolean array D3
string E3=""
boolean array F3
boolean array G3
boolean H3=false
boolean Z3=false
weathereffect V3=null
weathereffect W3=null
boolean X3=false
location Y3=null
real J3=0
string K3=""
string array L3
rect M3=null
rect N3=null
rect S3=null
rect T3=null
rect R3=null
rect P3=null
rect Q3=null
rect U3=null
rect I4=null
rect O4=null
rect A4=null
rect B4=null
rect C4=null
rect D4=null
rect E4=null
rect F4=null
rect G4=null
rect H4=null
rect Z4=null
rect V4=null
rect W4=null
rect X4=null
rect Y4=null
rect J4=null
rect K4=null
rect L4=null
rect M4=null
rect N4=null
rect S4=null
rect T4=null
rect R4=null
rect P4=null
rect Q4=null
rect U4=null
rect I5=null
rect O5=null
rect A5=null
rect B5=null
rect C5=null
rect D5=null
rect E5=null
rect F5=null
rect G5=null
rect H5=null
rect Z5=null
rect V5=null
rect W5=null
rect X5=null
rect Y5=null
rect J5=null
rect K5=null
rect L5=null
rect M5=null
rect N5=null
rect S5=null
rect T5=null
rect R5=null
rect P5=null
rect Q5=null
rect U5=null
rect I6=null
rect O6=null
rect A6=null
rect B6=null
rect C6=null
rect D6=null
rect E6=null
rect F6=null
rect G6=null
rect H6=null
rect Z6=null
rect V6=null
rect W6=null
rect X6=null
rect Y6=null
rect J6=null
rect K6=null
rect L6=null
rect M6=null
rect N6=null
rect S6=null
rect T6=null
rect R6=null
rect P6=null
rect Q6=null
rect U6=null
rect I7=null
rect O7=null
rect A7=null
rect B7=null
rect C7=null
rect D7=null
rect E7=null
rect F7=null
rect G7=null
rect H7=null
rect Z7=null
rect V7=null
rect W7=null
rect X7=null
rect Y7=null
rect J7=null
rect K7=null
rect L7=null
rect M7=null
rect N7=null
rect S7=null
rect T7=null
rect R7=null
rect P7=null
rect Q7=null
rect U7=null
rect I8=null
rect O8=null
rect A8=null
rect B8=null
rect C8=null
rect D8=null
rect E8=null
rect F8=null
rect G8=null
rect H8=null
rect Z8=null
rect V8=null
rect W8=null
rect X8=null
rect Y8=null
rect J8=null
rect K8=null
rect L8=null
rect M8=null
rect N8=null
rect S8=null
rect T8=null
rect R8=null
rect P8=null
rect Q8=null
rect U8=null
rect I9=null
rect O9=null
rect A9=null
rect B9=null
rect C9=null
rect D9=null
rect E9=null
rect F9=null
rect G9=null
rect H9=null
rect Z9=null
rect V9=null
rect W9=null
rect X9=null
rect Y9=null
rect J9=null
rect K9=null
rect L9=null
rect M9=null
rect N9=null
rect S9=null
rect T9=null
rect R9=null
rect P9=null
rect Q9=null
rect U9=null
rect IA=null
rect OA=null
rect BA=null
rect CA=null
rect DA=null
rect EA=null
rect FA=null
rect GA=null
rect HA=null
rect ZA=null
rect VA=null
rect WA=null
rect XA=null
rect YA=null
rect JA=null
rect KA=null
rect LA=null
rect MA=null
rect NA=null
rect SA=null
rect TA=null
rect RA=null
rect PA=null
rect QA=null
rect UA=null
rect IB=null
rect OB=null
rect AB=null
rect BB=null
rect CB=null
rect DB=null
rect EB=null
rect FB=null
rect GB=null
rect HB=null
rect ZB=null
rect VB=null
rect WB=null
rect XB=null
rect YB=null
rect JB=null
rect KB=null
rect LB=null
rect MB=null
rect SB=null
rect TB=null
rect RB=null
rect PB=null
rect QB=null
sound IC=null
sound OC=null
sound AC=null
sound BC=null
sound CC=null
sound DC=null
sound EC=null
sound FC=null
sound GC=null
sound HC=null
sound ZC=null
sound VC=null
sound WC=null
string XC="Sound\\Music\\mp3Music\\Human1.mp3"
string YC="Sound\\Music\\mp3Music\\Human2.mp3"
string JC="Sound\\Music\\mp3Music\\Human3.mp3"
sound KC=null
sound LC=null
sound MC=null
sound NC=null
sound TC=null
sound RC=null
sound PC=null
string QC="Sound\\Music\\mp3Music\\NightElf1.mp3"
string UC="Sound\\Music\\mp3Music\\NightElf2.mp3"
string OD="Sound\\Music\\mp3Music\\NightElf3.mp3"
sound AD=null
string BD="Sound\\Music\\mp3Music\\Orc1.mp3"
string DD="Sound\\Music\\mp3Music\\Orc2.mp3"
string ED="Sound\\Music\\mp3Music\\Orc3.mp3"
string FD="Sound\\Music\\mp3Music\\BloodElfTheme.mp3"
string GD="Sound\\Music\\mp3Music\\DarkAgents.mp3"
string HD="Sound\\Music\\mp3Music\\TragicConfrontation.mp3"
string ZD="Sound\\Music\\mp3Music\\SadMystery.mp3"
string VD="Sound\\Music\\mp3Music\\IllidansTheme.mp3"
sound WD=null
sound XD=null
sound YD=null
sound JD=null
sound KD=null
sound LD=null
sound MD=null
sound ND=null
sound TD=null
sound PD=null
sound QD=null
sound UD=null
string IE="Sound\\Music\\mp3Music\\Undead1.mp3"
string OE="Sound\\Music\\mp3Music\\Undead2.mp3"
string AE="Sound\\Music\\mp3Music\\Undead3.mp3"
sound BE=null
sound CE=null
sound DE=null
sound EE=null
sound FE=null
sound GE=null
sound HE=null
sound ZE=null
sound VE=null
sound WE=null
sound XE=null
sound YE=null
sound JE=null
sound KE=null
sound LE=null
sound ME=null
sound NE=null
sound SE=null
sound TE=null
sound RE=null
sound PE=null
sound QE=null
sound UE=null
sound IF=null
sound OF=null
sound AF=null
sound BF=null
sound CF=null
sound DF=null
string EF="Sound\\Music\\mp3Music\\Tension.mp3"
string FF="Sound\\Music\\mp3Music\\ArthasTheme.mp3"
string GF="Sound\\Music\\mp3Music\\NightElfDefeat.mp3"
string HF="Sound\\Music\\mp3Music\\NightElfVictory.mp3"
sound ZF=null
sound VF=null
sound WF=null
sound XF=null
sound YF=null
sound JF=null
sound KF=null
sound LF=null
sound MF=null
sound NF=null
sound SF=null
sound TF=null
sound RF=null
trigger PF=null
trigger QF=null
trigger UF=null
trigger IG=null
trigger OG=null
trigger AG=null
trigger BG=null
trigger CG=null
trigger DG=null
trigger EG=null
trigger FG=null
trigger GG=null
trigger HG=null
trigger ZG=null
trigger VG=null
trigger WG=null
trigger XG=null
trigger YG=null
trigger JG=null
trigger KG=null
trigger LG=null
trigger MG=null
trigger NG=null
trigger SG=null
trigger TG=null
trigger RG=null
trigger PG=null
trigger QG=null
trigger UG=null
trigger IH=null
trigger OH=null
trigger BH=null
trigger CH=null
trigger DH=null
trigger EH=null
trigger FH=null
trigger GH=null
trigger HH=null
trigger ZH=null
trigger VH=null
trigger WH=null
trigger XH=null
trigger YH=null
trigger JH=null
trigger KH=null
unit LH=null
unit MH=null
unit NH=null
unit TH=null
unit RH=null
unit PH=null
unit QH=null
unit UH=null
unit IZ=null
unit OZ=null
unit AZ=null
unit BZ=null
unit CZ=null
unit DZ=null
unit EZ=null
unit FZ=null
unit GZ=null
unit HZ=null
unit ZZ=null
unit VZ=null
unit WZ=null
unit XZ=null
unit YZ=null
unit JZ=null
unit KZ=null
unit LZ=null
unit MZ=null
unit NZ=null
unit SZ=null
unit TZ=null
unit RZ=null
unit PZ=null
unit QZ=null
unit UZ=null
unit IV=null
unit OV=null
unit AV=null
unit BV=null
unit CV=null
unit DV=null
unit EV=null
unit FV=null
unit GV=null
unit HV=null
unit ZV=null
unit VV=null
unit WV=null
unit XV=null
unit YV=null
unit JV=null
unit KV=null
unit LV=null
unit MV=null
unit NV=null
unit SV=null
unit TV=null
unit PV=null
unit QV=null
unit UV=null
unit IW=null
unit OW=null
unit AW=null
unit BW=null
unit CW=null
unit DW=null
unit EW=null
unit FW=null
unit GW=null
unit HW=null
unit ZW=null
unit VW=null
unit WW=null
unit XW=null
unit YW=null
unit JW=null
unit KW=null
unit LW=null
unit MW=null
unit SW=null
unit TW=null
unit RW=null
unit PW=null
unit QW=null
unit UW=null
unit IX=null
unit OX=null
unit AX=null
unit BX=null
unit CX=null
unit DX=null
unit EX=null
unit GX=null
unit HX=null
unit ZX=null
unit VX=null
unit WX=null
unit XX=null
unit YX=null
unit JX=null
unit KX=null
unit LX=null
unit MX=null
unit NX=null
unit SX=null
unit TX=null
unit RX=null
unit PX=null
unit QX=null
unit UX=null
unit IY=null
unit OY=null
unit AY=null
unit BY=null
unit CY=null
unit DY=null
unit EY=null
unit FY=null
unit GY=null
unit HY=null
hashtable ZY
string VY=""
unit array WY
unit array XY
unit array YY
integer JY=0
destructable array KY
destructable array LY
destructable array MY
integer NY=0
group array SY
boolean array TY
integer RY
integer PY
boolean QY=false
trigger array UY
real array IJ
integer OJ=0
boolean array AJ
real array BJ
integer array CJ
integer array DJ
integer EJ=0
string array FJ
integer array GJ
integer HJ=0
string ZJ
real VJ
integer WJ=0
sound XJ
unit YJ
real JJ
real KJ
real LJ
integer MJ
integer NJ
integer SJ
real TJ
real RJ
real PJ
real QJ
real UJ
real IK
unit OK
unit AK
unit BK
item CK
trigger DK
group EK
group FK
player GK
boolean HK
string ZK
image VK=null
unit WK=null
integer XK
boolean YK=true
trigger JK
trigger KK
region LK
integer MK=1
boolean NK=false
timer SK
boolean TK=false
integer RK=90
boolean PK=false
boolean QK=false
string UK="No Mode"
boolean IL=false
boolean OL=true
boolean AL=false
boolean BL=false
boolean CL=false
boolean DL=false
integer EL
boolean FL=false
integer array GL
boolean array HL
integer ZL=0
integer array VL
integer array WL
integer array YL
integer array JL
integer array KL
integer array LL
integer array ML
integer array SL
integer array TL
integer array RL
boolean array PL
boolean array QL
boolean array UL
boolean array IM
unit AM=null
unit BM=null
boolean FM=false
player GM=null
player HM=null
boolean array VM
integer WM
player XM
trigger YM=null
boolean JM=false
integer KM
integer SM
boolean TM=false
boolean RM=false
trigger QM
boolean UM=false
integer IN=1093742670
integer ON=1093686064
integer AN=1093742671
integer BN=1093742672
boolean CN=false
integer array DN
region EN
region FN
region GN
region HN
region ZN
constant real VN=150
integer array WN
integer XN=0
integer array YN
integer array JN
integer array KN
integer array LN
integer MN=0
gamecache NN
integer array SN
integer array TN
integer array RN
integer array PN
trigger QN
integer array UN
integer array IS
integer array OS
weathereffect BS
weathereffect CS
rect DS
boolean ES=false
constant playercolor FS=ConvertPlayerColor(0)
constant playercolor HS=ConvertPlayerColor(12)
real ZS=-7360
real VS=-6688
real WS=-6592
real XS=-6464
real YS=-7392
real JS=-6240
real KS=-7392
real LS=-6432
real MS=-6592
real SS=-6720
real TS=-6816
real PS=-5984
real QS=-6944
real US=-5920
real IT=-7072
real OT=-5920
real AT=-7200
real BT=-5920
real CT=-7328
real DT=-5984
real ET=-7328
real FT=-5984
real GT=-5632
real HT=-5952
real ZT=-6112
real VT=1504
real WT=-1504
real XT=-1824
real YT=4960
real JT=-6752
real KT=-6112
real LT=-1312
real MT=-3488
real ST=-3296
real TT=-544
real RT=-6688
real PT=-6496
real QT=-4832
real UT=-4576
real IR=-4832
real OR=-4512
real BR=-6752
real CR=-5920
real DR=-5984
real GR=-5664
real HR=-6240
real ZR=-6400
real WR=-4224
real XR=-4288
real YR=-4992
real JR=-3776
real KR=-6720
real LR=-5952
real SR=-4160
real RR=-4800
real PR=-4608
real QR=-3776
real UR=-6272
real IP=-7136
real OP=-4640
real BP=-6496
real DP=-5536
real EP=-5088
real FP=-5280
real GP=-5920
real ZP=-4640
real VP=-4832
real WP=-4384
real XP=-4128
real YP=-5024
real JP=-5216
real KP=-6816
real LP=-4192
real MP=-7456
real TP=-4192
real RP=-6176
real PP=-5664
real QP=-3872
real UP=-5664
real IQ=-3872
real OQ=-5440
real AQ=-4800
real BQ=-3840
real CQ=-5184
real DQ=-5440
real EQ=-4800
real FQ=-3840
real GQ=-5184
unit HQ
unit ZQ
unit VQ
unit WQ
unit XQ
unit YQ
unit JQ
unit KQ
unit LQ
unit MQ
unit NQ
unit SQ
unit TQ
unit RQ
unit PQ
unit QQ
unit UQ
unit I00
unit II0
unit I10
unit IO0
unit I20
unit I30
unit I40
unit I50
unit I60
unit I70
unit I80
unit I90
unit IA0
unit IB0
unit IC0
unit ID0
unit IE0
unit IF0
unit IG0
unit IH0
unit IZ0
unit IV0
unit IW0
unit IX0
unit IY0
unit IJ0
unit IK0
constant playercolor IL0=ConvertPlayerColor(6)
constant playercolor IM0=ConvertPlayerColor(12)
real IN0=6272
real IS0=5504
real IT0=6464
real IR0=5120
real IP0=5952
real IQ0=5568
real IU0=6080
real O00=5568
real OI0=6464
real O10=4736
real OO0=5696
real O20=5120
real O30=5568
real O40=5248
real O50=5568
real O60=5376
real O70=5696
real O80=5504
real O90=5568
real OA0=5696
real OB0=5568
real OC0=5696
real OD0=4992
real OE0=4544
real OF0=-4704
real OG0=5920
real OH0=1056
real OZ0=-160
real OV0=6048
real OW0=-2080
real OX0=32
real OY0=5856
real OJ0=2400
real OK0=1696
real OL0=6112
real OM0=-96
real ON0=3168
real OS0=5920
real OT0=3616
real OR0=3296
real OP0=6048
real OQ0=2784
real OU0=4640
real A00=4576
real AI0=5088
real A10=4192
real AO0=3776
real A20=5888
real A30=4096
real A40=3392
real A50=6208
real A60=3264
real A70=3520
real A80=5376
real A90=3776
real AA0=3840
real AB0=5696
real AC0=3264
real AD0=3168
real AE0=4000
real AF0=4192
real AG0=5536
real AH0=4128
real AZ0=4512
real AV0=4640
real AW0=3680
real AX0=4832
real AY0=3104
real AJ0=5408
real AK0=2592
real AL0=5408
real AM0=3296
real AN0=6112
real AS0=4000
real AT0=3040
real AR0=5088
real AP0=6304
real AQ0=3744
real AU0=6304
real B00=3744
real BI0=3520
real B10=4608
real BO0=4096
real B20=2624
real B30=4096
real B40=2624
real B50=4096
real B60=2624
unit B70
unit B80
unit B90
unit BA0
unit BB0
unit BC0
unit BD0
unit BE0
unit BF0
unit BG0
unit BH0
unit BZ0
unit BV0
unit BW0
unit BX0
unit BY0
unit BJ0
unit BK0
unit BL0
unit BM0
unit BN0
unit BS0
unit BT0
unit BR0
unit BP0
unit BQ0
unit BU0
unit C00
unit CI0
unit C10
unit CO0
unit C20
unit C30
unit C40
unit C50
unit C60
unit C70
unit C80
unit C90
unit CA0
unit CB0
unit CC0
unit CD0
unit CE0
unit CF0
unit CG0
unit CH0
unit CZ0
unit CV0
unit CW0
unit CX0
unit CY0
unit CJ0
unit CK0
unit array CL0
real array CM0
real array CN0
player CS0
player CT0
string array CR0
integer array CP0
integer array CQ0
integer array CU0
integer array D00
integer array DI0
integer D10
integer DO0
integer D20
integer D30
integer array D40
integer D50
integer array D60
integer D70
integer array D80
integer D90
integer array DA0
integer DB0
integer array DC0
integer DD0
string array DE0
integer array DF0
string array DG0
string array DH0
string array DZ0
string array DV0
string array DW0
unit DX0
unit DY0
unit DJ0
unit DK0
unit DL0
unit DM0
unit DN0
unit DS0
unit DT0
unit DR0
unit DP0
unit DQ0
integer array DU0
integer E00=0
boolean array EI0
integer E10=0
integer EO0
player E20
trigger E30
trigger E40
trigger E50
hashtable E60
timer array E70
integer array E80
real array E90
integer array EA0
integer array EB0
integer EC0=1
constant real ED0=15
player array EE0
unit array EF0
real array EG0
boolean array EH0
integer EZ0=0
unit array EV0
real array EW0
boolean array EX0
unit EY0
unit EJ0
integer EK0
integer EL0
integer EM0
integer EN0
integer array ES0
integer array ET0
integer ER0
integer EP0
unit EQ0=null
boolean EU0=true
integer F00=1
trigger FI0
integer F10=0
integer array FO0
integer array F20
integer array F30
integer array F40
string array F50
integer array F60
integer array F70
integer F80=0
integer F90
integer FA0
integer FB0
integer FC0
integer FD0
integer FE0
integer FF0
integer FG0
integer FH0
integer FZ0
integer FV0
integer FW0
integer FX0
integer FY0
integer FJ0
integer FK0
integer FL0
integer FM0
integer FN0
integer FS0
integer FT0
integer FR0
integer FP0
integer FQ0
integer FU0
integer G00
integer GI0
integer G10
integer GO0
integer G20
integer G30
integer G40
integer G50
integer G60
integer G70
integer G80
integer G90
integer GA0
integer GB0
integer GC0
integer GD0
integer GE0
integer GF0
integer GG0
integer GH0
integer GZ0
integer GV0
integer GW0
integer GX0
integer GY0
integer GJ0
integer GK0
integer GL0
integer GM0
integer GN0
integer GS0
integer GT0
integer GR0
integer GP0
integer GQ0
integer GU0
integer H00
integer HI0
integer H10
integer HO0
integer H20
integer H30
integer H40
integer H50
integer H60
integer H70
integer H80
integer H90
integer HA0
integer HB0
integer HC0
integer HD0
integer HE0
integer HF0
integer HG0
integer HH0
integer HZ0
integer HV0
integer HW0
integer HX0
integer HY0
integer HJ0
integer HK0
integer HL0
integer HM0
integer HN0
integer HS0
integer HT0
integer HR0
integer HP0
integer HQ0
integer HU0
integer Z00
integer ZI0
integer Z10
integer ZO0
integer Z20
integer Z30
integer Z40
integer Z50
integer Z60
integer Z70
integer Z80
integer Z90
integer ZA0
integer ZB0
integer ZC0
integer ZD0
integer ZE0
integer ZF0
integer ZG0
integer ZH0
integer ZZ0
integer ZV0
integer ZW0
integer ZX0
integer ZY0
integer ZJ0
integer ZK0
integer ZL0
integer ZM0
integer ZN0
integer ZS0
integer ZT0
integer ZR0
integer ZP0
integer ZQ0
integer ZU0
integer V00
integer VI0
integer V10
integer VO0
integer V20
integer V30
integer V40
integer V50
integer V60
integer V70
integer V80
integer V90
integer VA0
integer VB0
integer VC0
integer VD0
integer VE0
integer VF0
integer VG0
integer VH0
integer VZ0
integer VV0
integer VW0
integer VX0
integer VY0
integer VJ0
integer VK0
integer VL0
integer VM0
integer VN0
integer VS0
integer VT0
integer VR0
integer VP0
integer VQ0
integer VU0
integer W00
integer WI0
integer W10
integer WO0
integer W20
integer W30
integer W40
integer W50
integer W60
integer W70
integer W80
integer W90
integer WA0
integer WB0
integer WC0
integer WD0
integer WE0
integer WF0
integer WG0
integer WH0
integer WZ0
integer WV0
integer WW0
integer WX0
integer WY0
integer WJ0
integer WK0
integer WL0
integer WM0
integer WN0
integer WS0
integer WT0
integer WR0
integer WP0
integer WQ0
integer WU0
integer X00
integer XI0
integer X10
integer XO0
integer X20
integer X30
integer X40
integer X50
integer X60
integer X70
integer X80
integer X90
integer XA0
integer XB0
integer XC0
integer XD0
integer XE0
integer XF0
integer XG0
integer XH0
integer XZ0
integer XV0
trigger XW0
integer array XX0
integer array XY0
integer array XJ0
integer array XK0
integer array XL0
integer array XM0
integer XN0=0
integer XS0
integer XT0
integer XR0
integer XP0
integer XQ0
integer XU0
integer Y00
integer YI0
integer Y10
integer YO0
integer Y20
integer Y30
integer Y40
integer Y50
integer Y60
integer Y70
integer Y80
integer Y90
integer YA0
integer YB0
integer YC0
integer YD0
integer YE0
integer YF0
integer YG0
integer YH0
integer YZ0
integer YV0
integer YW0
integer YX0
integer YY0
integer YJ0
integer YK0
integer YL0
integer YM0
integer YN0
integer YS0
integer YT0
integer YR0
integer YP0
integer YQ0
integer YU0
integer J00
integer JI0
integer J10
integer JO0
integer J20
integer J30
integer J40
integer J50
integer J60
integer J70
integer array J80
integer array J90
integer array JA0
integer array JB0
integer array JC0
integer array JD0
integer array JE0
player JF0
unit JG0
unit JH0
integer JZ0
boolean JV0=false
unit JW0
trigger JX0
integer JY0=0
integer JJ0=0
integer JK0=0
integer JL0=0
integer JM0=0
integer JN0=0
integer JS0=0
integer JT0=0
boolean JR0=false
trigger JP0
trigger JQ0
real array JU0
item array K00
integer KI0=0
trigger K10
unit array KO0
unit K20=null
real array K30
integer array K40
constant real K50=15
constant real K60=4
constant real K70=15
constant real K80=4
constant real K90=37
real array KA0
real array KB0
player array KC0
real array KD0
real array KE0
real array KF0
integer KG0=-1
constant real KH0=25
constant real KZ0=525
region KV0
integer KW0=1093742918
integer KX0=1093742917
integer KY0=1093686067
integer KJ0=1093742916
integer KK0=1093742919
integer KL0=1093742920
integer KM0=1093742914
integer KN0=1093742913
integer KS0=1093686066
integer KT0=1093742905
integer KR0=1093742915
integer KP0=1093742904
integer KQ0=1093682777
unit KU0
unit L00
unit LI0
group L10
unit LO0
unit L20
player L30
boolean L40=false
boolean L50=false
boolean L60=false
real L70
boolean L80=false
boolean array L90
constant real LA0=8
constant real LB0=6
player LC0
constant real LD0=15
boolean LE0=false
boolean LF0=false
boolean LG0=false
boolean LH0=false
boolean LZ0=false
boolean LV0=false
boolean LW0=false
boolean LX0=false
boolean LY0=false
integer array LJ0
integer array LK0
integer LL0=0
integer LM0
integer LN0
integer LS0=0
integer LT0=0
string LR0="|c00ff0303"
string LP0="|c00ff0303"
string LQ0="|c000042ff"
string LU0="|c00646464"
string M00="|c00ffffff"
multiboard MI0
integer array M10
integer array MO0
player array M20
integer M30=0
string M40="|c00FF6600"
multiboard M50
trigger M60
real M70=0
real M80=0
real M90=0
real MA0=0
real MB0=0
real MC0=0
real MD0=0
real ME0=0
real MF0=0
real MG0=0
real MH0=0
real MZ0=0
real MV0=0
real MW0=0
real MX0=0
real MY0=0
real MJ0=0
real MK0=0
real ML0=0
real MM0=0
real MN0=0
real MS0=0
real MT0=0
real MR0=0
real MP0=0
real MQ0=0
real MU0=0
real N00=0
constant real NI0=90
boolean N10=false
boolean NO0=false
boolean N20=false
boolean N30=false
boolean N40=false
boolean N50=false
boolean N60=false
boolean N70=false
boolean N80=false
unit N90=null
unit NA0=null
group NB0
boolean NC0=true
boolean ND0=false
integer NE0=0
string array NF0
boolean NG0=false
integer NH0
player NZ0
integer NV0
integer NW0=1093683285
integer NX0=1093683288
trigger NY0
region NJ0
boolean NK0=false
boolean NL0=false
boolean NM0=false
boolean NN0=false
unit array NS0
group NT0
unit NR0
integer NP0
integer NQ0=0
integer array NU0
boolean array S00
boolean array SI0
boolean array S10
boolean SO0=true
boolean array S20
real S30=-200
boolean array S40
leaderboard array S50
boolean array S60
boolean S70=true
weathereffect S80
boolean array S90
boolean array SA0
boolean array SB0
boolean SC0=true
boolean array SD0
string array SE0
integer SF0=0
string SG0="Sound\\Music\\mp3Music\\PH1.mp3"
boolean array SH0
integer SZ0
integer SV0
integer SW0
string array SX0
boolean array SY0
integer SJ0=0
boolean SK0=true
boolean array SL0
constant real SM0=-6950
constant real SN0=6750
boolean SS0=false
trigger ST0
boolean SR0=false
integer array SP0
boolean SQ0
boolean SU0=false
boolean T00=false
integer array TI0
integer array T10
integer TO0
integer T20
integer array T30
integer array T40
integer T50=0
integer T60=0
integer array T70
integer array T80
integer T90=0
integer TA0=0
integer TB0=0
multiboard TC0
image TD0
image TE0
image TF0
image TG0
unit array TH0
integer array TZ0
boolean array TV0
unit array TW0
real array TX0
real array TY0
real array TJ0
real array TK0
real array TL0
real array TM0
real array TN0
real array TS0
real TT0=-7030
real TR0=6966
real TP0=-7000
real TQ0=6875
constant real TU0=400
constant real R00=75
constant real RI0=125
player R10=null
player RO0=null
integer R20
boolean R30=false
boolean R40=false
boolean array R50
real R60
real R70
real R80
real R90
unit array RA0
integer RB0=0
trigger RC0
unit array RD0
unit array RE0
boolean RF0=false
trigger RG0
integer array RH0
unit array RZ0
unit array RV0
integer RW0=0
unit array RX0
integer RY0
integer RJ0
integer array RK0
integer RL0
boolean array RM0
integer array RN0
integer array RS0
integer RT0=0
integer RR0=0
real array RP0
real array RQ0
real array RU0
real array P00
integer array PI0
boolean P10=true
image PO0
image P20
image P30
image P40
image P50
image P60
image P70
image P80
image P90
image PA0
image PB0
image PC0
image PD0
image PE0
image PF0
image PG0
constant real PH0=450
constant real PZ0=75
constant real PV0=140
boolean PW0=false
boolean PX0=false
integer array PY0
integer array PJ0
integer array PK0
integer array PL0
integer array PM0
integer array PN0
integer array PS0
integer PT0
integer PR0
integer PP0
string PQ0="|c008A2BE2Option 1: |r"
string PU0="|c008A2BE2Option 2: |r"
string Q00="|c008A2BE2Option 3: |r"
integer QI0
integer array Q10
boolean QO0=false
boolean Q20=false
leaderboard Q30
integer Q40
integer array Q50
boolean Q60=false
boolean Q70=false
leaderboard Q80
boolean Q90=false
boolean QA0=false
boolean QB0=false
boolean QC0=false
boolean QD0=true
boolean QE0=false
boolean QF0=false
boolean QG0=false
boolean QH0=false
boolean QZ0=false
boolean QV0=false
real QW0=1.0
boolean QX0=false
boolean QY0=false
boolean QJ0=false
camerasetup QK0=null
boolean QL0=false
unit QM0
unit QN0
unit QS0
unit QT0
unit QR0
unit QP0
real QQ0
real QU0
real U00
real UI0
real U10
real UO0
group U20
unit U30
integer U40
unit U50
unit U60
real U70
real U80
integer array U90
real UA0
unit UB0
integer UC0=0
integer UD0
real UE0
unit UF0
integer UG0
unit UH0
integer UZ0
unit UV0
real UW0
unit UX0
real UY0
integer UJ0
integer UK0
unit UL0
real UM0
unit array UN0
unit array US0
integer UT0
integer UR0
real UP0
real UQ0
unit UU0
unit array I0I
real III
real I1I
integer IOI
integer I2I
unit I3I
real I4I
real I5I
real I6I
unit I7I
unit array I8I
unit I9I
integer IAI
unit IBI
integer ICI
unit IDI
real IEI
real IFI
real IGI
integer IHI=0
real IZI
real IVI
integer IWI
real IXI
unit IYI
integer array IJI
integer array IKI
unit ILI
unit IMI
group INI
group ISI
group ITI
integer IRI=0
unit IPI
integer array IQI
integer array IUI
integer array O0I
integer array OII
integer array O1I
unit OOI
unit O2I
real O3I
real O4I
real O5I
unit O6I
real O7I
integer array O8I
unit O9I
unit OAI
unit OBI
real OCI
integer ODI
unit OEI
unit OFI
integer OGI
integer OHI
integer OZI
unit OVI
unit OWI
real OXI
real OYI
real OJI
real OKI
group OLI
unit OMI
real ONI
integer OSI
integer OTI
integer ORI
unit array OPI
boolean OQI=false
boolean OUI=false
trigger A0I
integer AII
player A1I
integer AOI
unit A2I
real A3I
unit A4I
unit A5I
real A6I
real A7I
integer A8I
unit A9I
unit AAI
unit ABI
group ACI
integer ADI
group AEI
unit AFI
real AGI
destructable AHI=null
unit AZI=null
real AVI=0
constant real AWI=26
constant real AXI=550
constant real AYI=500
real AJI
real AKI
group ALI
unit AMI
real ANI
integer ASI
integer ATI
unit ARI
integer API
unit AQI
integer AUI
boolean B0I=false
unit BII
integer array B1I
integer array BOI
integer array B2I
integer array B3I
unit B4I
unit B5I
integer B6I
real B7I
real B8I
unit B9I
unit BAI
boolean BBI=false
integer BCI
unit BDI
integer array BEI
group BFI
group BGI
unit BHI
integer BZI
integer BVI=1747990090
real BWI
real BXI
unit BYI
unit BJI
unit BKI
real BLI
real BMI
real BNI
integer BSI
real BTI
real BRI
unit BPI
unit BQI
integer BUI
group C0I
unit CII
unit C1I
integer COI
integer C2I
player C3I
integer C4I
unit array C5I
integer C6I
integer C7I
constant real C8I=55
group C9I
integer CAI
unit CBI
constant real CCI=7
integer array CDI
constant real CEI=1
constant real CFI=4
constant real CGI=4
real CHI
unit CZI
integer array CVI
trigger CWI
trigger CXI
integer CYI=0
boolean CJI=false
unit CKI
real CLI
real CMI
real CNI
unit CSI
unit CTI
unit CRI
group CPI
real CQI
unit CUI
unit D0I
unit DII
integer D1I
unit DOI
integer D2I
integer D3I=1093678422
unit D4I
constant real D5I=7
constant real D6I=300
unit D7I
real D8I
unit D9I
unit DAI
real DBI
integer array DCI
integer array DDI
group DEI
integer DFI
unit DGI
real DHI
integer array DZI
integer array DVI
real DWI
unit DXI
unit DYI
real DJI
integer DKI
unit array DLI
unit DMI
unit DNI
unit DSI
integer DTI
real DRI
group DPI=null
constant real DQI=3
unit DUI
unit E0I
unit EII
real E1I
group EOI
integer E2I
unit E3I
constant real E4I=6
constant real E5I=600
unit E6I
integer E7I
unit E8I
unit E9I
integer EAI
unit array EBI
boolean ECI=false
unit EDI
integer EEI
real array EFI
real array EGI
real array EHI
unit array EZI
integer array EVI
integer array EWI
integer EXI
unit EYI
integer EJI
unit EKI
unit ELI
group EMI
integer ENI
unit ESI
unit ETI
integer ERI
real EPI
group EQI
unit EUI
unit F0I
real FII
real F1I
real FOI
constant real F2I=1150
constant real F3I=20
constant real F4I=20
constant real F5I=20
integer F6I
unit F7I
group F8I
real F9I
unit FAI
unit FBI
real FCI
unit FDI
group FEI
constant real FFI=20
unit FGI
unit FHI
real FZI
real FVI
real FWI
real FXI
constant real FYI=300
unit FJI
unit FKI
integer FLI
real FMI
unit FNI
boolean FSI=false
unit FTI
unit FRI
real FPI
unit FQI
integer FUI
integer G0I
unit GII
group G1I
real GOI
integer G2I
region G3I
region G4I
unit G5I
unit G6I
integer G7I
group G8I
group G9I
unit GAI
unit GBI
unit GCI
integer GDI
real GEI
real GFI
real GGI
integer GHI
unit GZI
unit GVI
unit GWI
unit GXI
group GYI
real GJI
integer array GKI
integer GLI=0
integer GMI
timer GNI=null
real GTI=0.
real GRI=0.
force GQI=null
boolexpr GUI=null
endglobals
function HII takes real H1I returns nothing
local real HOI
local real st=TimerGetElapsed(GNI)
if st<=0 then
set GNI=CreateTimer()
call TimerStart(GNI,1000000,false,null)
endif
if(H1I>0)then
loop
set HOI=H1I-TimerGetElapsed(GNI)+st
exitwhen HOI<=0
if(HOI>bj_POLLED_WAIT_SKIP_THRESHOLD)then
call TriggerSleepAction(0.1*HOI)
else
call TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)
endif
endloop
endif
endfunction
function H2I takes location H3I,real H4I,real H5I returns location
return Location(GetLocationX(H3I)+H4I*Cos(H5I*bj_DEGTORAD),GetLocationY(H3I)+H4I*Sin(H5I*bj_DEGTORAD))
endfunction
function H6I takes nothing returns boolean
local real dx=GetDestructableX(GetFilterDestructable())-GTI
local real dy=GetDestructableY(GetFilterDestructable())-GRI
return(dx*dx+dy*dy<=bj_enumDestructableRadius)
endfunction
function H7I takes player H8I returns force
set GQI=CreateForce()
call ForceEnumEnemies(GQI,H8I,GUI)
return GQI
endfunction
function H9I takes itemtype HAI,integer HBI returns nothing
local group g
set bj_stockPickedItemType=HAI
set bj_stockPickedItemLevel=HBI
set g=CreateGroup()
call GroupEnumUnitsOfType(g,"marketplace",GUI)
call ForGroup(g,function UpdateEachStockBuildingEnum)
call DestroyGroup(g)
set g=null
endfunction
function HCI takes nothing returns nothing
local integer pickedItemId
local itemtype HDI
local integer HEI=0
local integer HFI=0
local integer HBI
set HBI=1
loop
if(bj_stockAllowedPermanent[HBI])then
set HFI=HFI+1
if(GetRandomInt(1,HFI)==1)then
set HDI=ITEM_TYPE_PERMANENT
set HEI=HBI
endif
endif
if(bj_stockAllowedCharged[HBI])then
set HFI=HFI+1
if(GetRandomInt(1,HFI)==1)then
set HDI=ITEM_TYPE_CHARGED
set HEI=HBI
endif
endif
if(bj_stockAllowedArtifact[HBI])then
set HFI=HFI+1
if(GetRandomInt(1,HFI)==1)then
set HDI=ITEM_TYPE_ARTIFACT
set HEI=HBI
endif
endif
set HBI=HBI+1
exitwhen HBI>10
endloop
if(HFI==0)then
set HDI=null
return
endif
call H9I(HDI,HEI)
set HDI=null
endfunction
function HGI takes nothing returns nothing
call HCI()
call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INTERVAL,true,function HCI)
endfunction
function HZI takes nothing returns boolean
return true
endfunction
function HMI takes nothing returns nothing
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,I3,VJ,ZJ)
endfunction
function HNI takes force HSI,real H1I,string HTI returns nothing
set ZJ=HTI
set VJ=H1I
call ForForce(HSI,function HMI)
endfunction
function HRI takes nothing returns boolean
return true
endfunction
function InitializeHashtable takes nothing returns nothing
set ZY=InitHashtable()
endfunction
function HLC_GetCommandString takes nothing returns string
return VY
endfunction
function HPI takes nothing returns nothing
local integer i
local integer j
local integer h
local integer v
local string HQI="abcdefghijklmnopqrstuvwxyz0123456789 -=,."
local integer array HUI
local boolean array Z0I
set Z0I[0]=true
set Z0I[50]=true
set Z0I[60]=true
set Z0I[70]=true
set Z0I[80]=true
set Z0I[90]=true
set Z0I[100]=true
set i=0
set j=0
loop
if Z0I[j]then
set j=j+1
endif
exitwhen j>=256
set HUI[j]=i
set i=i+1
set j=j+1
endloop
set i=0
loop
exitwhen i>=12
set h=R2I(100*GetPlayerHandicap(Player(i)))
if not Z0I[h]then
set h=HUI[h]
set v=h/6
set h=h-v*6
call SetPlayerHandicap(Player(i),1)
set VY=VY+SubString(HQI,v,v+1)
endif
set i=i+1
endloop
endfunction
function ZII takes multiboard Z1I,integer c,integer r,string ZOI returns nothing
local multiboarditem Z2I=null
set Z2I=MultiboardGetItem(Z1I,r-1,c-1)
call MultiboardSetItemValue(Z2I,ZOI)
call MultiboardReleaseItem(Z2I)
set Z2I=null
endfunction
function Z3I takes multiboard Z1I,integer c,integer r,string Z4I returns nothing
local multiboarditem Z2I=null
set Z2I=MultiboardGetItem(Z1I,r-1,c-1)
call MultiboardSetItemIcon(Z2I,Z4I)
call MultiboardReleaseItem(Z2I)
set Z2I=null
endfunction
function Z5I takes multiboard Z1I,integer c,integer r,boolean Z6I,boolean Z7I returns nothing
local multiboarditem Z2I=null
set Z2I=MultiboardGetItem(Z1I,r-1,c-1)
call MultiboardSetItemStyle(Z2I,Z6I,Z7I)
call MultiboardReleaseItem(Z2I)
set Z2I=null
endfunction
function Z8I takes multiboard Z1I,integer c,integer r,real Z9I,real ZAI,real ZBI,real ZCI returns nothing
local multiboarditem Z2I=null
set Z2I=MultiboardGetItem(Z1I,r-1,c-1)
call MultiboardSetItemValueColor(Z2I,PercentTo255(Z9I),PercentTo255(ZAI),PercentTo255(ZBI),PercentTo255(100.0-ZCI))
call MultiboardReleaseItem(Z2I)
set Z2I=null
endfunction
function ZDI takes multiboard Z1I,integer c,integer r,real ZEI returns nothing
local multiboarditem Z2I=null
set Z2I=MultiboardGetItem(Z1I,r-1,c-1)
call MultiboardSetItemWidth(Z2I,ZEI/100)
call MultiboardReleaseItem(Z2I)
set Z2I=null
endfunction
function TI_RequestBugReport takes nothing returns nothing
local integer i=0
if U2==false and NM0==false then
loop
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303An internal index has failed|r")
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303This might not be a serious glitch, but it is important for me to get it|r")
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303Please send me the replay for this game to IceFrog@gmail.com|r")
set i=i+1
exitwhen i==12
endloop
endif
endfunction
function ZFI takes integer i returns nothing
if i>16000 then
set YY[i-16000]=null
elseif i>8000 then
set XY[i-8000]=null
else
set WY[i]=null
endif
endfunction
function ZGI takes integer i returns unit
if i>16000 then
return YY[i-16000]
elseif i>8000 then
return XY[i-8000]
else
return WY[i]
endif
endfunction
function ZHI takes integer i returns destructable
if i>16000 then
return MY[i-16000]
elseif i>8000 then
return LY[i-8000]
else
return KY[i]
endif
return KY[i]
endfunction
function ZZI takes unit u returns integer
set JY=JY+1
if JY>16000 then
set YY[JY-16000]=u
elseif JY>8000 then
set XY[JY-8000]=u
else
set WY[JY]=u
endif
return JY
endfunction
function ZVI takes integer i returns nothing
if i>16000 then
set MY[i-16000]=null
elseif i>8000 then
set LY[i-8000]=null
else
set KY[i]=null
endif
endfunction
function ZWI takes destructable d returns integer
set NY=NY+1
if NY>24000 then
set MY[NY-16000]=d
elseif NY>8000 then
set LY[NY-8000]=d
else
set KY[NY]=d
endif
return NY
endfunction
function GetTime takes nothing returns real
return TimerGetElapsed(M)
endfunction
function ZXI takes unit u returns boolean
return GetUnitAbilityLevel(u,1110458953)>0 or GetUnitAbilityLevel(u,1112437619)>0
endfunction
function ZYI takes group g returns nothing
local integer i=GetHandleId(g)-RY
if i<0 or i>120 then
set QY=true
else
call GroupClear(g)
set TY[i]=false
set PY=i
endif
endfunction
function ZJI takes nothing returns group
local integer i=PY
loop
exitwhen i==PY-1
if TY[i]==false then
set PY=i+1
if PY==120 then
set PY=0
endif
set TY[i]=true
return SY[i]
endif
set i=i+1
if i==120 then
set i=0
endif
endloop
call HNI(Q2,5.00,"|c00ff0303CRITICAL ERROR: FOUND NO AVAILABLE GROUPS|r")
call HNI(Q2,5.00,"|c00ff0303Send this replay to IceFrog@gmail.com|r")
return CreateGroup()
endfunction
function ZKI takes nothing returns boolean
local integer ZLI=0
local integer i=0
loop
exitwhen i==120
if TY[i]==true then
set ZLI=ZLI+1
endif
set i=i+1
endloop
if ZLI>100 or QY then
call HNI(Q2,5.00,"|c00ff0303Please send me this replay ("+I2S(ZLI)+")")
endif
return false
endfunction
function ZMI takes nothing returns nothing
local integer i=0
set PY=0
set SY[i]=CreateGroup()
set TY[i]=false
set i=i+1
set RY=GetHandleId(SY[0])
loop
exitwhen i==120
set SY[i]=CreateGroup()
set TY[i]=false
set i=i+1
endloop
endfunction
function ZNI takes nothing returns nothing
local integer i=0
if U2==false and NM0==false then
loop
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303An internal checksum has failed|r")
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303This might not be a serious glitch, but it is important for me to get it|r")
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303Please send me the replay for this game to IceFrog@gmail.com|r")
set i=i+1
exitwhen i==12
endloop
endif
endfunction
function CleanTrigger_GetTime takes nothing returns real
return TimerGetElapsed(M)
endfunction
function ZSI takes trigger t returns nothing
call DisableTrigger(t)
set OJ=OJ+1
set UY[OJ]=t
set IJ[OJ]=(TimerGetElapsed(M))+60
if OJ>8000 then
call ZNI()
endif
endfunction
function ZTI takes integer i returns nothing
if i!=OJ then
set UY[i]=UY[OJ]
set IJ[i]=IJ[OJ]
endif
set UY[OJ]=null
set IJ[OJ]=0
set OJ=OJ-1
endfunction
function ZRI takes nothing returns boolean
local real ZPI=(TimerGetElapsed(M))
local integer i
set i=1
loop
exitwhen i>OJ
if IJ[i]<ZPI then
if UY[i]==null or IsTriggerEnabled(UY[i])==true then
call ZNI()
else
call DestroyTrigger(UY[i])
endif
call ZTI(i)
else
set i=i+1
endif
endloop
return false
endfunction
function ZUI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call SaveInteger(ZY,(GetHandleId(((LoadTriggerHandle(ZY,(V0I),(35)))))),(((LoadInteger(ZY,(V0I),(33))))),(2))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function VII takes trigger t,integer V1I,real H1I returns nothing
local trigger t2=CreateTrigger()
call TriggerAddCondition(t2,Condition(function ZUI))
call TriggerRegisterTimerEvent(t2,H1I,false)
call SaveInteger(ZY,(GetHandleId((t))),((V1I)),(1))
call SaveTriggerHandle(ZY,(GetHandleId(t2)),(35),(t))
call SaveInteger(ZY,(GetHandleId(t2)),(33),(V1I))
set t2=null
endfunction
function VOI takes unit u returns string
if u==null then
return GetObjectName(1848654164)
endif
return GetObjectName(DI0[GetUnitPointValue(u)])
endfunction
function V2I takes integer i returns string
if i==0 then
return GetObjectName(1848654164)
endif
return GetObjectName(DI0[i])
endfunction
function V3I takes unit u returns string
if u==null then
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
return DE0[GetUnitPointValue(u)]
endfunction
function V4I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call SaveInteger(ZY,(GetHandleId(((LoadUnitHandle(ZY,(V0I),(14)))))),(((LoadInteger(ZY,(V0I),(33))))),(2))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function V5I takes unit V6I,integer V1I,real H1I returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function V4I))
call TriggerRegisterTimerEvent(t,H1I,false)
call SaveInteger(ZY,(GetHandleId((V6I))),((V1I)),(1))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(V6I))
call SaveInteger(ZY,(GetHandleId(t)),(33),(V1I))
set t=null
endfunction
function V7I takes unit V8I returns integer
local integer x
local integer id=GetUnitTypeId(V8I)
set x=1
loop
exitwhen x>D50
if id==D40[x]then
return 2
endif
set x=x+1
endloop
set x=1
loop
exitwhen x>D70
if id==D60[x]then
return 3
endif
set x=x+1
endloop
set x=1
loop
exitwhen x>D90
if id==D80[x]then
return 1
endif
set x=x+1
endloop
if id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517 or id==1311781442 or id==1311781175 or id==1211119684 or id==1211119683 or id==1211119668 or id==1211119682 or id==1311781171 or id==1311781172 or id==1311781173 or id==1160786511 then
return 2
endif
if id==1311781192 or id==1311781204 or id==1311781194 or id==1211117637 or id==1211117639 or id==1211117638 or id==1211119433 or id==1160786229 or id==1211122513 then
return 3
endif
if id==1211119192 or id==1211119193 or id==1211119191 or id==1211122243 or id==1328558391 then
return 1
endif
return 0
endfunction
function V9I takes unit V8I returns integer
local integer VAI=V7I(V8I)
if VAI==1 then
return GetHeroInt(V8I,true)
endif
if VAI==2 then
return GetHeroAgi(V8I,true)
endif
if VAI==3 then
return GetHeroStr(V8I,true)
endif
return 0
endfunction
function VBI takes unit VCI returns boolean
return GetUnitState(VCI,UNIT_STATE_LIFE)<1 or AJ[GetPlayerId(GetOwningPlayer(VCI))]==true
endfunction
function VEI takes integer VFI,real VGI,integer VHI returns nothing
set EJ=EJ+1
set BJ[EJ]=VGI
set CJ[EJ]=VFI
set DJ[EJ]=VHI
endfunction
function VZI takes unit u returns real
local integer VFI=GetUnitTypeId(u)
local integer i=1
loop
exitwhen i>EJ
if CJ[i]==VFI or DJ[i]==VFI then
return BJ[i]
endif
set i=i+1
endloop
return 1.0
endfunction
function VVI takes integer VWI,string VXI returns nothing
set HJ=HJ+1
set FJ[HJ]=VXI
set GJ[HJ]=VWI
endfunction
function VYI takes unit u returns string
local integer VWI=GetUnitTypeId(u)
local integer i=1
loop
exitwhen i>HJ
if GJ[i]==VWI then
return FJ[i]
endif
set i=i+1
endloop
return"stand"
endfunction
function VJI takes unit u returns nothing
if GetUnitTypeId(u)==1311781193 then
call SetUnitAnimationByIndex(u,6)
else
call SetUnitAnimation(u,VYI(u))
endif
endfunction
function VKI takes player p returns integer
local integer i
set i=1
if p==CO[i]or p==DO[i]then
return i
endif
set i=2
if p==CO[i]or p==DO[i]then
return i
endif
set i=3
if p==CO[i]or p==DO[i]then
return i
endif
set i=4
if p==CO[i]or p==DO[i]then
return i
endif
set i=5
if p==CO[i]or p==DO[i]then
return i
endif
return 0
endfunction
function VLI takes player VMI returns boolean
if(VMI==CO[0])then
return true
endif
if(VMI==CO[1])then
return true
endif
if(VMI==CO[2])then
return true
endif
if(VMI==CO[3])then
return true
endif
if(VMI==CO[4])then
return true
endif
if(VMI==CO[5])then
return true
endif
return false
endfunction
function VNI takes player VMI returns boolean
if(VMI==DO[0])then
return true
endif
if(VMI==DO[1])then
return true
endif
if(VMI==DO[2])then
return true
endif
if(VMI==DO[3])then
return true
endif
if(VMI==DO[4])then
return true
endif
if(VMI==DO[5])then
return true
endif
return false
endfunction
function VSI takes player p returns boolean
return p==CO[1]or p==CO[2]or p==CO[3]or p==CO[4]or p==CO[5]or p==DO[1]or p==DO[2]or p==DO[3]or p==DO[4]or p==DO[5]
endfunction
function VTI takes player VRI returns boolean
if(GetPlayerSlotState(VRI)==PLAYER_SLOT_STATE_PLAYING)then
if(GetPlayerController(VRI)==MAP_CONTROL_USER)then
return true
endif
endif
return false
endfunction
function VPI takes player VRI returns boolean
if(GetPlayerSlotState(VRI)==PLAYER_SLOT_STATE_PLAYING or GetPlayerSlotState(VRI)==PLAYER_SLOT_STATE_LEFT)then
if(GetPlayerController(VRI)==MAP_CONTROL_USER)then
return true
endif
endif
return false
endfunction
function VQI takes player VRI returns boolean
if GetPlayerSlotState(VRI)==PLAYER_SLOT_STATE_LEFT then
if(GetPlayerController(VRI)==MAP_CONTROL_USER)then
return true
endif
endif
return false
endfunction
function VUI takes nothing returns nothing
if(VTI(GetEnumPlayer())==true)then
set bj_forceCountPlayers=bj_forceCountPlayers+1
endif
endfunction
function W0I takes force f returns integer
set bj_forceCountPlayers=0
call ForForce(f,function VUI)
return bj_forceCountPlayers
endfunction
function CountHumanPlayers takes nothing returns nothing
if GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_LEFT or GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING then
set bj_forceCountPlayers=bj_forceCountPlayers+1
endif
endfunction
function WII takes nothing returns nothing
if GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING then
if GetEnumPlayer()!=Player(13)and GetEnumPlayer()!=Player(14)then
set bj_forceCountPlayers=bj_forceCountPlayers+1
endif
endif
endfunction
function W1I takes force f returns integer
set bj_forceCountPlayers=0
call ForForce(f,function WII)
return bj_forceCountPlayers
endfunction
function WOI takes integer V6I,player VRI returns nothing
if YK then
call SetPlayerTechMaxAllowed(VRI,V6I,0)
set R[GetUnitPointValueByType(V6I)]=true
endif
endfunction
function W2I takes integer V6I returns nothing
call WOI(V6I,CO[1])
call WOI(V6I,CO[2])
call WOI(V6I,CO[3])
call WOI(V6I,CO[4])
call WOI(V6I,CO[5])
call WOI(V6I,DO[1])
call WOI(V6I,DO[2])
call WOI(V6I,DO[3])
call WOI(V6I,DO[4])
call WOI(V6I,DO[5])
endfunction
function W3I takes integer V6I returns nothing
if YK then
call SetPlayerTechMaxAllowed(CO[1],V6I,0)
call SetPlayerTechMaxAllowed(CO[2],V6I,0)
call SetPlayerTechMaxAllowed(CO[3],V6I,0)
call SetPlayerTechMaxAllowed(CO[4],V6I,0)
call SetPlayerTechMaxAllowed(CO[5],V6I,0)
call SetPlayerTechMaxAllowed(DO[1],V6I,0)
call SetPlayerTechMaxAllowed(DO[2],V6I,0)
call SetPlayerTechMaxAllowed(DO[3],V6I,0)
call SetPlayerTechMaxAllowed(DO[4],V6I,0)
call SetPlayerTechMaxAllowed(DO[5],V6I,0)
endif
endfunction
function W4I takes player VRI returns nothing
local integer W5I=D10
local integer W6I=DO0
if YK then
loop
exitwhen W5I>W6I
call SetPlayerTechMaxAllowed(VRI,D00[W5I],0)
set W5I=W5I+1
endloop
set W5I=D20
set W6I=D30
loop
exitwhen W5I>W6I
call SetPlayerTechMaxAllowed(VRI,D00[W5I],0)
set W5I=W5I+1
endloop
endif
endfunction
function W7I takes nothing returns nothing
call W4I(CO[1])
call W4I(CO[2])
call W4I(CO[3])
call W4I(CO[4])
call W4I(CO[5])
call W4I(DO[1])
call W4I(DO[2])
call W4I(DO[3])
call W4I(DO[4])
call W4I(DO[5])
endfunction
function W8I takes nothing returns nothing
local integer i
if YK then
set i=D20
loop
exitwhen i>D30
call SetPlayerTechMaxAllowed(CO[1],D00[i],0)
call SetPlayerTechMaxAllowed(CO[2],D00[i],0)
call SetPlayerTechMaxAllowed(CO[3],D00[i],0)
call SetPlayerTechMaxAllowed(CO[4],D00[i],0)
call SetPlayerTechMaxAllowed(CO[5],D00[i],0)
set i=i+1
endloop
set i=D10
loop
exitwhen i>DO0
call SetPlayerTechMaxAllowed(DO[1],D00[i],0)
call SetPlayerTechMaxAllowed(DO[2],D00[i],0)
call SetPlayerTechMaxAllowed(DO[3],D00[i],0)
call SetPlayerTechMaxAllowed(DO[4],D00[i],0)
call SetPlayerTechMaxAllowed(DO[5],D00[i],0)
set i=i+1
endloop
endif
endfunction
function IsEnemyCreepCond takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(YO))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and(GetOwningPlayer(GetFilterUnit())==CO[0])or(GetOwningPlayer(GetFilterUnit())==DO[0])
endfunction
function W9I takes nothing returns nothing
local integer W5I
local integer W6I
local integer WAI=0
set ZO=D10
set W5I=D10
set W6I=DO0
loop
exitwhen W5I>W6I
set WAI=WAI+1
set WO[WAI]=W5I
set W5I=W5I+1
endloop
set W5I=D20
set W6I=D30
loop
exitwhen W5I>W6I
set WAI=WAI+1
set WO[WAI]=W5I
set W5I=W5I+1
endloop
set VO=WAI
endfunction
function WBI takes nothing returns integer
local integer WCI=GetRandomInt(ZO,VO)
local integer WDI=WO[WCI]
set WDI=WO[WCI]
if(ZO==VO)then
set WO[WCI]=0
return WDI
endif
if(WCI==VO)then
set VO=VO-1
return WDI
endif
set WO[WCI]=WO[VO]
set VO=VO-1
return WDI
endfunction
function WEI takes unit VCI returns boolean
return GetUnitAbilityLevel(VCI,1110454612)>0 or GetUnitAbilityLevel(VCI,1112437609)>0 or GetUnitAbilityLevel(VCI,1110454616)>0 or GetUnitAbilityLevel(VCI,1112433775)>0 or GetUnitAbilityLevel(VCI,1110454861)>0 or GetUnitAbilityLevel(VCI,1114137953)>0 or GetUnitAbilityLevel(VCI,1110456150)>0 or GetUnitAbilityLevel(VCI,1110458969)>0 or GetUnitAbilityLevel(VCI,1110456399)>0 or GetUnitAbilityLevel(VCI,1110456149)>0 or GetUnitAbilityLevel(VCI,1110459468)>0 or GetUnitAbilityLevel(VCI,1110456406)>0 or GetUnitAbilityLevel(VCI,1110455089)>0
endfunction
function WFI takes string WGI returns integer
if WGI=="a"then
return 10
elseif WGI=="b"then
return 11
elseif WGI=="c"then
return 12
elseif WGI=="d"then
return 13
elseif WGI=="e"then
return 14
elseif WGI=="f"then
return 15
else
return S2I(WGI)
endif
endfunction
function WHI takes string WZI returns integer
return WFI(SubString(WZI,0,1))*16+WFI(SubString(WZI,1,2))
endfunction
function WVI takes integer WWI returns boolean
local integer i=1
loop
exitwhen i>P2
if WWI==R2[i]then
return false
endif
set i=i+1
endloop
return true
endfunction
function WXI takes unit WYI returns integer
local integer WJI=GetUnitTypeId(WYI)
if WJI==1697656914 or WJI==1966092365 then
return 1
elseif WJI==1697657137 or WJI==1966092356 then
return 2
elseif WJI==1697656915 or WJI==1966092366 then
return 3
elseif WJI==1697657145 or WJI==1966092372 then
return 4
endif
return 0
endfunction
function WKI takes player H8I,integer WLI returns nothing
local texttag t
if WLI>0 then
set t=CreateTextTag()
call SetPlayerState(H8I,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(H8I,PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetTextTagText(t,"+"+I2S(WLI),0.025)
call SetTextTagPosUnit(t,L1[GetPlayerId(H8I)],0)
call SetTextTagColor(t,255,220,0,255)
call SetTextTagVelocity(t,0,0.03)
if GetLocalPlayer()==H8I then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endif
endfunction
function WMI takes player H8I,integer WNI returns nothing
local integer x=1
if IsPlayerAlly(H8I,CO[0])then
loop
exitwhen x>5
if CO[x]!=H8I then
call WKI(CO[x],WNI)
endif
set x=x+1
endloop
endif
set x=1
if IsPlayerAlly(H8I,DO[0])then
loop
exitwhen x>5
if DO[x]!=H8I then
call WKI(DO[x],WNI)
endif
set x=x+1
endloop
endif
endfunction
function WSI takes unit VCI,integer WTI returns nothing
local integer WNI
local player p=GetOwningPlayer(VCI)
local integer WRI=0
local integer WPI
set WNI=160+40*WTI
if VLI(GetOwningPlayer(VCI))then
set WPI=IMaxBJ(W0I(AO),1)
else
set WPI=IMaxBJ(W0I(BO),1)
endif
if p==CO[0]or p==DO[0]then
set WRI=R2I(((400+50*WTI)+GetRandomInt(2,20))*0.70)
endif
if IsUnitAlly(GetDyingUnit(),p)then
if IsUnitAlly(VCI,CO[0])then
set p=DO[0]
else
set p=CO[0]
endif
set WNI=WNI/2+WRI/WPI
else
set WNI=WNI+WRI/WPI
endif
if p==CO[0]then
call WKI(CO[1],WNI)
call WKI(CO[2],WNI)
call WKI(CO[3],WNI)
call WKI(CO[4],WNI)
call WKI(CO[5],WNI)
elseif p==DO[0]then
call WKI(DO[1],WNI)
call WKI(DO[2],WNI)
call WKI(DO[3],WNI)
call WKI(DO[4],WNI)
call WKI(DO[5],WNI)
else
call WMI(GetOwningPlayer(VCI),WNI)
endif
endfunction
function WQI takes integer VFI returns boolean
local integer i=1
loop
exitwhen i>D90
if D80[i]==VFI then
return true
endif
set i=i+1
endloop
return false
endfunction
function WUI takes integer VFI returns boolean
local integer i=1
loop
exitwhen i>D50
if D40[i]==VFI then
return true
endif
set i=i+1
endloop
return false
endfunction
function X0I takes integer VFI returns boolean
local integer i=1
loop
exitwhen i>D70
if D60[i]==VFI then
return true
endif
set i=i+1
endloop
return false
endfunction
function XII takes player VRI returns nothing
local integer X1I
local integer XOI
local location X2I
local integer WCI
local boolean GotHero=false
set S0[GetPlayerId(VRI)]=true
if VLI(VRI)==true then
set X1I=D10
set XOI=DO0
set X2I=GetRectCenter(A4)
else
set X1I=D20
set XOI=D30
set X2I=GetRectCenter(T3)
endif
if K0 then
if(GetRandomInt(1,2)==1)then
set X1I=D10
set XOI=DO0
else
set X1I=D20
set XOI=D30
endif
endif
loop
set WCI=GetRandomInt(X1I,XOI)
exitwhen R[WCI]==false and WQI(D00[WCI])and D00[WCI]!=1211117643
endloop
if G2==false then
call W3I(D00[WCI])
set R[WCI]=true
endif
call CreateUnitAtLoc(VRI,D00[WCI],X2I,0)
call RemoveLocation(X2I)
endfunction
function X3I takes player VRI returns nothing
local integer X1I
local integer XOI
local location X2I
local integer WCI
local boolean GotHero=false
set S0[GetPlayerId(VRI)]=true
if VLI(VRI)==true then
set X1I=D10
set XOI=DO0
set X2I=GetRectCenter(A4)
else
set X1I=D20
set XOI=D30
set X2I=GetRectCenter(T3)
endif
if K0 then
if(GetRandomInt(1,2)==1)then
set X1I=D10
set XOI=DO0
else
set X1I=D20
set XOI=D30
endif
endif
loop
set WCI=GetRandomInt(X1I,XOI)
exitwhen R[WCI]==false and X0I(D00[WCI])
endloop
if G2==false then
call W3I(D00[WCI])
set R[WCI]=true
endif
call CreateUnitAtLoc(VRI,D00[WCI],X2I,0)
call RemoveLocation(X2I)
endfunction
function X4I takes player VRI returns nothing
local integer X1I
local integer XOI
local location X2I
local integer WCI
local boolean GotHero=false
set S0[GetPlayerId(VRI)]=true
if VLI(VRI)==true then
set X1I=D10
set XOI=DO0
set X2I=GetRectCenter(A4)
else
set X1I=D20
set XOI=D30
set X2I=GetRectCenter(T3)
endif
if K0 then
if(GetRandomInt(1,2)==1)then
set X1I=D10
set XOI=DO0
else
set X1I=D20
set XOI=D30
endif
endif
loop
set WCI=GetRandomInt(X1I,XOI)
exitwhen R[WCI]==false and WUI(D00[WCI])
endloop
if G2==false then
call W3I(D00[WCI])
set R[WCI]=true
endif
call CreateUnitAtLoc(VRI,D00[WCI],X2I,0)
call RemoveLocation(X2I)
endfunction
function X5I takes player VRI returns nothing
local integer X1I
local integer XOI
local location X2I
local integer WCI
local boolean GotHero=false
set S0[GetPlayerId(VRI)]=true
if VLI(VRI)==true then
set X1I=D10
set XOI=DO0
set X2I=GetRectCenter(A4)
else
set X1I=D20
set XOI=D30
set X2I=GetRectCenter(T3)
endif
if K0 then
if(GetRandomInt(1,2)==1)then
set X1I=D10
set XOI=DO0
else
set X1I=D20
set XOI=D30
endif
endif
loop
set WCI=GetRandomInt(X1I,XOI)
exitwhen R[WCI]==false
endloop
if G2==false then
call W3I(D00[WCI])
set R[WCI]=true
endif
call CreateUnitAtLoc(VRI,D00[WCI],X2I,0)
call RemoveLocation(X2I)
endfunction
function X6I takes boolean X7I,boolean X8I returns integer
local integer X1I
local integer XOI
if X7I and X8I then
if(GetRandomInt(1,2)==1)then
set X1I=D10
set XOI=DO0
else
set X1I=D20
set XOI=D30
endif
elseif X7I then
set X1I=D10
set XOI=DO0
else
set X1I=D20
set XOI=D30
endif
return GetRandomInt(X1I,XOI)
endfunction
function X9I takes unit VCI returns boolean
return GetUnitTypeId(VCI)==1848651849 or GetUnitTypeId(VCI)==1848652338 or GetUnitTypeId(VCI)==1848652337 or GetUnitTypeId(VCI)==1848658777 or GetUnitTypeId(VCI)==1848658778 or GetUnitTypeId(VCI)==1848659013 or GetUnitTypeId(VCI)==1848652339 or GetUnitTypeId(VCI)==1848652340 or GetUnitTypeId(VCI)==1848652341 or GetUnitTypeId(VCI)==1848658992 or GetUnitTypeId(VCI)==1848658993 or GetUnitTypeId(VCI)==1848651853 or GetUnitTypeId(VCI)==1848658006 or GetUnitTypeId(VCI)==1848659027
endfunction
function XAI takes unit VCI returns boolean
return GetUnitTypeId(VCI)==1697657160 or GetUnitTypeId(VCI)==1697657178 or GetUnitTypeId(VCI)==1697657426 or GetUnitTypeId(VCI)==1697657428 or GetUnitTypeId(VCI)==1697657427 or GetUnitTypeId(VCI)==1697657648
endfunction
function XBI takes unit VCI returns boolean
return X9I(VCI)or XAI(VCI)
endfunction
function XCI takes destructable d returns boolean
return GetDestructableTypeId(d)==1314157667 or GetDestructableTypeId(d)==1314157687 or GetDestructableTypeId(d)==1096053874 or GetDestructableTypeId(d)==1110454322 or GetDestructableTypeId(d)==1110454323 or GetDestructableTypeId(d)==1110454325
endfunction
function XDI takes unit u returns boolean
return GetUnitAbilityLevel(u,1093686070)>0 or GetUnitAbilityLevel(u,1093744441)>0 or GetUnitAbilityLevel(u,1094937961)>0 or GetUnitAbilityLevel(u,1093686101)>0 or GetUnitAbilityLevel(u,1110454580)>0 or GetUnitAbilityLevel(u,1093683251)>0 or((LoadInteger(ZY,(GetHandleId(((u)))),((4252))))==1)
endfunction
function XEI takes unit XFI returns boolean
return GetUnitAbilityLevel(XFI,1093678162)>0 and VSI(GetOwningPlayer(XFI))
endfunction
function XGI takes unit u returns boolean
return GetUnitTypeId(u)==1211117638 or GetUnitTypeId(u)==1211117637 or GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1328558391
endfunction
function XHI takes real d returns boolean
return 2<d and d<3000
endfunction
function XZI takes nothing returns nothing
local integer W5I=1
set XO=CO[1]
loop
exitwhen VTI(XO)or W5I>5
set W5I=W5I+1
set XO=CO[W5I]
endloop
if VTI(XO)==false then
set XO=DO[1]
set W5I=1
loop
exitwhen VTI(XO)or W5I>5
set W5I=W5I+1
set XO=DO[W5I]
endloop
endif
endfunction
function XVI takes unit V8I returns boolean
return IsUnitType(V8I,UNIT_TYPE_HERO)==true and IsUnitIllusion(V8I)==false and GetUnitTypeId(V8I)!=1211117645 and GetUnitTypeId(V8I)!=1211117657 and GetUnitTypeId(V8I)!=1211119431 and GetUnitTypeId(V8I)!=1211122232
endfunction
function XWI takes integer i returns integer
local integer x=0
loop
exitwhen x>D30
if DF0[x]==i then
return D00[x]
endif
set x=x+1
endloop
return-1
endfunction
function XXI takes integer VFI returns integer
local integer i=1
loop
exitwhen i>D30
if VFI==D00[i]then
return i
endif
set i=i+1
endloop
return 0
endfunction
function XYI takes unit V8I returns integer
local integer WTI=GetHeroLevel(V8I)
if WTI==1 then
return 100
elseif WTI==2 then
return 120
elseif WTI==3 then
return 160
elseif WTI==4 then
return 220
else
return-200+100*WTI
endif
return 0
endfunction
function XJI takes player p returns boolean
return D2 and(CS0==p or CT0==p)
endfunction
function XKI takes unit u returns boolean
return GetUnitAbilityLevel(u,1113815395)>0 or GetUnitAbilityLevel(u,1113815346)>0
endfunction
function XLI takes integer id returns boolean
return id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614
endfunction
function XMI takes unit u returns boolean
return GetUnitAbilityLevel(u,1112500344)>0 or GetUnitAbilityLevel(u,1110454344)>0
endfunction
function XNI takes unit XSI,unit XTI,integer XRI,real XPI returns nothing
if XRI==0 then
return
endif
if XRI==1 then
call UnitDamageTarget(XSI,XTI,XPI,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
elseif XRI==2 then
call UnitDamageTarget(XSI,XTI,XPI,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif XRI==3 then
call UnitDamageTarget(XSI,XTI,XPI,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif XRI==4 then
call UnitDamageTarget(XSI,XTI,XPI,true,true,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif XRI==5 then
call UnitDamageTarget(XSI,XTI,XPI,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
endfunction
function XQI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local integer XRI=(LoadInteger(ZY,(V0I),(36)))
local real XPI=(LoadReal(ZY,(V0I),(20)))
call XNI(XSI,XTI,XRI,XPI)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function Y0I takes unit XSI,unit XTI,integer XRI,real XPI,real H1I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveInteger(ZY,(V0I),(36),(XRI))
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function XQI))
set t=null
endfunction
function YII takes player H8I,string Y1I returns nothing
local sound YOI=CreateSound(Y1I,false,false,false,10,10,"DefaultEAXON")
if(GetLocalPlayer()==H8I)then
call StartSound(YOI)
endif
call KillSoundWhenDone(YOI)
endfunction
function Y2I takes player H8I,string Y1I returns nothing
call YII(CO[1],Y1I)
call YII(CO[2],Y1I)
call YII(CO[3],Y1I)
call YII(CO[4],Y1I)
call YII(CO[5],Y1I)
call YII(DO[1],Y1I)
call YII(DO[2],Y1I)
call YII(DO[3],Y1I)
call YII(DO[4],Y1I)
call YII(DO[5],Y1I)
endfunction
function Y3I takes player Y4I,string ZOI returns nothing
local sound Y5I=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)
if(GetLocalPlayer()==Y4I)then
if(ZOI!="")and(ZOI!=null)then
call ClearTextMessages()
call DisplayTimedTextToPlayer(Y4I,0.50,-1.00,2.00,"|cffffcc00"+ZOI+"|r")
endif
call StartSound(Y5I)
endif
call KillSoundWhenDone(Y5I)
endfunction
function Y6I takes player Y4I,string ZOI returns nothing
local sound Y5I=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)
if(GetLocalPlayer()==Y4I)then
if(ZOI!="")and(ZOI!=null)then
call DisplayTimedTextToPlayer(Y4I,0,0,2.00,"|cffffcc00"+ZOI+"|r")
endif
call StartSound(Y5I)
endif
call KillSoundWhenDone(Y5I)
endfunction
function Y7I takes player Y4I,string ZOI returns nothing
local sound Y5I=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)
if(GetLocalPlayer()==Y4I)then
if(ZOI!="")and(ZOI!=null)then
call DisplayTimedTextToPlayer(Y4I,0,0,5.00,"|cffffcc00"+ZOI+"|r")
endif
call StartSound(Y5I)
endif
call KillSoundWhenDone(Y5I)
endfunction
function Y8I takes unit Y9I returns nothing
call PauseUnit(Y9I,true)
call IssueImmediateOrder(Y9I,"stop")
call PauseUnit(Y9I,false)
endfunction
function YAI takes nothing returns boolean
if(GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00)then
return true
else
return false
endif
endfunction
function YBI takes string YCI,boolean YDI returns nothing
if YDI then
call ExecuteFunc(YCI)
endif
endfunction
function YEI takes real x returns real
local real YFI=GetRectMinX(bj_mapInitialPlayableArea)+50
if(x<YFI)then
return YFI
endif
set YFI=GetRectMaxX(bj_mapInitialPlayableArea)-50
if(x>YFI)then
return YFI
endif
return x
endfunction
function YGI takes real x returns real
local real YFI=GetRectMinX(bj_mapInitialPlayableArea)+75
if(x<YFI)then
return YFI
endif
set YFI=GetRectMaxX(bj_mapInitialPlayableArea)-75
if(x>YFI)then
return YFI
endif
return x
endfunction
function YHI takes real y returns real
local real YFI=GetRectMinY(bj_mapInitialPlayableArea)+50
if(y<YFI)then
return YFI
endif
set YFI=GetRectMaxY(bj_mapInitialPlayableArea)-50
if(y>YFI)then
return YFI
endif
return y
endfunction
function YZI takes real y returns real
local real YFI=GetRectMinY(bj_mapInitialPlayableArea)+75
if(y<YFI)then
return YFI
endif
set YFI=GetRectMaxY(bj_mapInitialPlayableArea)-75
if(y>YFI)then
return YFI
endif
return y
endfunction
function YVI takes integer YWI returns nothing
local unit u=CreateUnit(Player(15),1211117657,0,0,270)
call UnitAddAbility(u,YWI)
call UnitRemoveAbility(u,YWI)
call RemoveUnit(u)
set u=null
endfunction
function YXI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer YWI=(LoadInteger(ZY,(V0I),(37)))
call YVI(YWI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function YYI takes integer YWI,real YJI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveInteger(ZY,(V0I),(37),(YWI))
call TriggerRegisterTimerEvent(t,YJI,false)
call TriggerAddCondition(t,Condition(function YXI))
set t=null
endfunction
function Tree_Killer takes nothing returns nothing
call KillDestructable(GetEnumDestructable())
endfunction
function YKI takes unit V8I returns nothing
call SaveBoolean(ZY,(GetHandleId(V8I)),(38),(false))
call FlushChildHashtable(ZY,(GetHandleId(V8I)))
call RemoveUnit(V8I)
endfunction
function YLI takes unit VCI,integer YMI,integer YNI returns nothing
if GetUnitAbilityLevel(VCI,YMI)==0 then
call UnitAddAbility(VCI,YMI)
endif
call SetUnitAbilityLevel(VCI,YMI,YNI)
endfunction
function YSI takes integer a,integer b returns integer
if(a<b)then
return a
else
return b
endif
endfunction
function YTI takes integer a,integer b returns integer
if(a<b)then
return b
else
return a
endif
endfunction
function YRI takes integer H3I,integer a,integer b returns integer
return YTI(YSI(H3I,b),a)
endfunction
function YPI takes real a,real b returns real
if(a<b)then
return a
else
return b
endif
endfunction
function YQI takes real a,real b returns real
if(a<b)then
return b
else
return a
endif
endfunction
function YUI takes nothing returns nothing
local integer V0I=GetHandleId(GetExpiredTimer())
local unit VCI=(LoadUnitHandle(ZY,(V0I),(26)))
call SetUnitState(VCI,UNIT_STATE_LIFE,GetUnitState(VCI,UNIT_STATE_LIFE)+(LoadReal(ZY,(V0I),(20))))
endfunction
function J0I takes unit VCI,real XPI returns nothing
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
call SaveUnitHandle(ZY,(V0I),(26),(VCI))
call TimerStart(t,0,false,function YUI)
endfunction
function JII takes unit VCI,real XPI returns nothing
local real J1I=GetUnitState(VCI,UNIT_STATE_MAX_LIFE)
local real JOI=GetUnitState(VCI,UNIT_STATE_LIFE)
if(GetUnitState(VCI,UNIT_STATE_LIFE)>1)then
if XPI>(J1I-JOI)then
if XPI>=JOI then
call SetUnitState(VCI,UNIT_STATE_LIFE,J1I)
call J0I(VCI,XPI-(J1I-JOI))
else
call J0I(VCI,XPI)
endif
else
call SetUnitState(VCI,UNIT_STATE_LIFE,GetUnitState(VCI,UNIT_STATE_LIFE)+XPI)
endif
endif
endfunction
function J2I takes unit XSI,unit XTI,real J3I returns boolean
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
if((J4I-J6I)*(J4I-J6I)+(J5I-J7I)*(J5I-J7I))<J3I*J3I then
return true
else
return false
endif
return false
endfunction
function J8I takes unit XSI,unit XTI returns real
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
if XSI==null or XTI==null then
return I2R(9999999999)
else
return SquareRoot((J4I-J6I)*(J4I-J6I)+(J5I-J7I)*(J5I-J7I))
endif
return 1.0
endfunction
function J9I takes unit XSI,location XTI returns real
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=GetLocationX(XTI)
local real J7I=GetLocationY(XTI)
if XSI==null then
return I2R(9999999999)
else
return SquareRoot((J4I-J6I)*(J4I-J6I)+(J5I-J7I)*(J5I-J7I))
endif
return 1.0
endfunction
function JAI takes real x1,real y1,real x2,real y2 returns real
return SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))
endfunction
function JBI takes unit VCI returns nothing
call SetUnitState(VCI,UNIT_STATE_MANA,GetUnitState(VCI,UNIT_STATE_MAX_MANA))
endfunction
function JCI takes nothing returns nothing
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,I3,VJ,ZJ)
endfunction
function JDI takes force HSI,real H1I,string HTI returns nothing
set ZJ=HTI
set VJ=H1I
call ForForce(HSI,function JCI)
endfunction
function JEI takes nothing returns nothing
if PL[GetPlayerId(GetEnumPlayer())]then
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,I3,VJ,ZJ)
endif
endfunction
function JFI takes force HSI,real H1I,string HTI returns nothing
set ZJ=HTI
set VJ=H1I
call ForForce(HSI,function JEI)
endfunction
function JGI takes unit VCI,real JHI returns nothing
call SetUnitState(VCI,UNIT_STATE_LIFE,GetUnitState(VCI,UNIT_STATE_LIFE)+JHI)
endfunction
function JZI takes nothing returns nothing
call PauseAllUnitsBJ(true)
endfunction
function RepeatedPauseAll takes nothing returns nothing
local timer t=CreateTimer()
call TimerStart(t,1,true,function JZI)
endfunction
function JVI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI((t))
set t=null
return false
endfunction
function JWI takes string JXI,unit VCI,string JYI,real H1I returns nothing
local effect fx=AddSpecialEffectTarget(JXI,VCI,JYI)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveEffectHandle(ZY,(V0I),(32),(fx))
call TriggerRegisterUnitEvent(t,VCI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function JVI))
set fx=null
set t=null
endfunction
function JJI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI((t))
set t=null
return false
endfunction
function JKI takes string JXI,real x,real y,real H1I returns nothing
local effect fx=AddSpecialEffect(JXI,x,y)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveEffectHandle(ZY,(V0I),(32),(fx))
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function JJI))
set fx=null
set t=null
endfunction
function PulseEffectTarget_Child takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local string JXI=(LoadStr(ZY,(V0I),(39)))
local string JYI=(LoadStr(ZY,(V0I),(40)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
call JWI(JXI,XTI,JYI,2)
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>ZLI then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function JLI takes unit VCI,integer JMI returns item
local integer HWI=0
local item JNI
loop
exitwhen HWI==6
set JNI=UnitItemInSlot(VCI,HWI)
if JNI!=null and GetItemTypeId(JNI)==JMI then
return JNI
endif
set HWI=HWI+1
endloop
return null
endfunction
function JSI takes timer t returns nothing
call PauseTimer(t)
call FlushChildHashtable(ZY,(GetHandleId(t)))
call DestroyTimer(t)
endfunction
function JTI takes real x1,real y1,real x2,real y2 returns real
return SquareRoot((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))
endfunction
function JRI takes unit a,unit b returns real
return bj_RADTODEG*Atan2(GetUnitY(b)-GetUnitY(a),GetUnitX(b)-GetUnitX(a))
endfunction
function JPI takes real x1,real y1,real x2,real y2 returns real
return bj_RADTODEG*Atan2(y2-y1,x2-x1)
endfunction
function JQI takes nothing returns nothing
call DestroyLightning((LoadLightningHandle(ZY,(GetHandleId(GetExpiredTimer())),(41))))
endfunction
function JUI takes string K0I,real x1,real y1,real x2,real y2,real r,real g,real b,real a,real H1I returns nothing
local timer t=CreateTimer()
local lightning KII=AddLightning(K0I,true,x1,y1,x2,y2)
call SetLightningColor(KII,r,g,b,a)
call SaveLightningHandle(ZY,(GetHandleId(t)),(41),(KII))
call TimerStart(t,H1I,false,function JQI)
endfunction
function K1I takes string KOI,unit K2I,integer r,integer g,integer b returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,KOI,0.03)
call SetTextTagPosUnit(tt,K2I,0)
call SetTextTagColor(tt,r,g,b,255)
call SetTextTagPermanent(tt,true)
set tt=null
endfunction
function K3I takes string KOI,real H1I,unit K2I,real K4I,integer r,integer g,integer b,integer a returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,KOI,K4I)
call SetTextTagPosUnit(tt,K2I,64)
call SetTextTagColor(tt,r,g,b,a)
call SetTextTagVelocity(tt,0,0.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,H1I)
if IsUnitVisible(K2I,GetLocalPlayer())or XJI(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function K5I takes player p,string KOI,real H1I,unit K2I,real K4I,integer r,integer g,integer b,integer a returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,KOI,K4I)
call SetTextTagPosUnit(tt,K2I,64)
call SetTextTagColor(tt,r,g,b,a)
call SetTextTagVelocity(tt,0,0.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,H1I)
if IsPlayerAlly(GetLocalPlayer(),p)==true or XJI(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function K6I takes nothing returns boolean
return true
endfunction
function K7I takes trigger t,playerunitevent K8I returns nothing
local integer HWI=0
loop
call TriggerRegisterPlayerUnitEvent(t,Player(HWI),K8I,Condition(function K6I))
set HWI=HWI+1
exitwhen HWI==16
endloop
endfunction
function K9I takes trigger t,playerunitevent K8I returns nothing
local integer i=1
loop
exitwhen i>5
call TriggerRegisterPlayerUnitEvent(t,CO[i],K8I,Condition(function K6I))
call TriggerRegisterPlayerUnitEvent(t,DO[i],K8I,Condition(function K6I))
set i=i+1
endloop
endfunction
function KAI takes real x1,real y1,real x2,real y2 returns real
return SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))
endfunction
function KBI takes nothing returns nothing
if XCI(GetEnumDestructable())then
set WJ=WJ+1
call KillDestructable(GetEnumDestructable())
endif
endfunction
function KCI takes real x,real y,real d returns integer
local rect r=Rect(x-d,y-d,x+d,y+d)
set WJ=0
call EnumDestructablesInRect(r,Condition(function HRI),function KBI)
call RemoveRect(r)
set r=null
return WJ
endfunction
function KDI takes real x,real y returns boolean
if IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)then
return false
endif
return true
endfunction
function KEI takes sound KFI,real x,real y returns nothing
call SetSoundPosition(KFI,x,y,0)
call SetSoundVolume(KFI,127)
set bj_lastPlayedSound=KFI
if(KFI!=null)then
call StartSound(KFI)
endif
endfunction
function KGI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local fogmodifier KHI=(LoadFogModifierHandle(ZY,(V0I),(42)))
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set KHI=null
return false
endfunction
function KZI takes player p,real H1I,real x,real y,real r returns nothing
local trigger t=CreateTrigger()
local fogmodifier KHI=CreateFogModifierRadius(p,FOG_OF_WAR_VISIBLE,x,y,r,true,true)
call FogModifierStart(KHI)
call SaveFogModifierHandle(ZY,(GetHandleId(t)),(42),(KHI))
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function KGI))
set KHI=null
set t=null
endfunction
function GroupCount_Helper takes nothing returns nothing
set bj_groupCountUnits=bj_groupCountUnits+1
endfunction
function KVI takes nothing returns nothing
if(XCI(GetEnumDestructable())or GetDestructableTypeId(GetEnumDestructable())==1110454325)and GetDestructableLife(GetEnumDestructable())>0 then
set HK=true
endif
endfunction
function KWI takes real x,real y,real d returns boolean
local rect r=Rect(x-d,y-d,x+d,y+d)
set HK=false
call EnumDestructablesInRect(r,Condition(function HRI),function KVI)
call RemoveRect(r)
set r=null
return HK
endfunction
function KXI takes nothing returns nothing
call PauseUnit(GetEnumUnit(),true)
endfunction
function KYI takes nothing returns boolean
local group g=ZJI()
call GroupEnumUnitsInRange(g,0,0,16000,Condition(function K6I))
call ForGroup(g,function KXI)
call ZYI(g)
set g=null
return false
endfunction
function KJI takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function KYI))
call TriggerEvaluate(t)
set t=null
endfunction
function KKI takes unit V8I,integer KLI returns nothing
call UnitAddAbility(V8I,KLI)
call UnitMakeAbilityPermanent(V8I,true,KLI)
endfunction
function KMI takes unit u returns boolean
return GetUnitTypeId(u)<1 or IsUnitType(u,UNIT_TYPE_DEAD)==true
endfunction
function KNI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local integer KSI=(LoadInteger(ZY,(V0I),(43)))
local unit XSI=ZGI(KSI)
local real KTI=(LoadReal(ZY,(V0I),(44)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real x=GetUnitX(KRI)
local real y=GetUnitY(KRI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real KPI=KTI*0.03
local real KQI=JPI(x,y,J6I,J7I)
local real KUI=x+KPI*Cos(KQI*bj_DEGTORAD)
local real L0I=y+KPI*Sin(KQI*bj_DEGTORAD)
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
call SetUnitFacing(KRI,KQI)
if KMI(XTI)then
call KillUnit(KRI)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif KAI(J6I,J7I,KUI,L0I)<=KPI then
call KillUnit(KRI)
set OK=XSI
set AK=XTI
call ExecuteFunc((LoadStr(ZY,(V0I),(46))))
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set XSI=null
set KRI=null
return false
endfunction
function LII takes unit XSI,unit XTI,integer L1I,string LOI,real KTI returns trigger
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real L2I=GetUnitFacing(XSI)
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function KNI))
call SaveReal(ZY,(V0I),(44),((KTI)*1.0))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveStr(ZY,(V0I),(46),(LOI))
call SaveInteger(ZY,(V0I),(43),(ZZI(XSI)))
call SaveUnitHandle(ZY,(V0I),(45),(CreateUnit(GetOwningPlayer(XSI),L1I,J4I,J5I,L2I)))
set DK=t
set t=null
return DK
endfunction
function MoveProjectileToXY_Move takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real KTI=(LoadReal(ZY,(V0I),(44)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real x=GetUnitX(KRI)
local real y=GetUnitY(KRI)
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real KPI=KTI*0.03
local real KQI=JPI(x,y,J6I,J7I)
local real KUI=x+KPI*Cos(KQI*bj_DEGTORAD)
local real L0I=y+KPI*Sin(KQI*bj_DEGTORAD)
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
if KAI(J6I,J7I,KUI,L0I)<=KPI then
call KillUnit(KRI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set KRI=null
return false
endfunction
function DamageProjectile_Move takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real KTI=(LoadReal(ZY,(V0I),(44)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real x=GetUnitX(KRI)
local real y=GetUnitY(KRI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real KPI=KTI*0.03
local real KQI=JPI(x,y,J6I,J7I)
local real KUI=x+KPI*Cos(KQI*bj_DEGTORAD)
local real L0I=y+KPI*Sin(KQI*bj_DEGTORAD)
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
call SetUnitFacing(KRI,KQI)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call KillUnit(KRI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif KAI(J6I,J7I,KUI,L0I)<=KPI then
call XNI((LoadUnitHandle(ZY,(V0I),(2))),XTI,(LoadInteger(ZY,(V0I),(36))),(LoadReal(ZY,(V0I),(20))))
call KillUnit(KRI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
return false
endfunction
function DelayedLocust_Helper takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call UnitAddAbility((LoadUnitHandle(ZY,(V0I),(26))),1097625443)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function L3I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real L4I=(LoadReal(ZY,(V0I),(49)))
local real VGI=L4I-(L4I-VZI(V8I))*ZLI/40
if ZLI>40 or KMI(V8I)then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitScale(V8I,VGI,VGI,VGI)
endif
set t=null
set V8I=null
return false
endfunction
function L5I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real L6I=(LoadReal(ZY,(V0I),(50)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function L3I))
set V0I=GetHandleId(t)
call SaveReal(ZY,(V0I),(49),((L6I)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
set t=null
set V8I=null
return false
endfunction
function L7I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real L8I=((LoadReal(ZY,(V0I),(51)))-VZI(V8I))*ZLI/40
local real VGI=VZI(V8I)+L8I
if ZLI>40 or KMI(V8I)then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitScale(V8I,VGI,VGI,VGI)
endif
set t=null
set V8I=null
return false
endfunction
function L9I takes unit V8I,real H1I,real VGI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real LAI=VGI*VZI(V8I)
local real L6I=LAI
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(50),((L6I)*1.0))
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function L5I))
if H1I>3 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function L7I))
set V0I=GetHandleId(t)
call SaveReal(ZY,(V0I),(51),((LAI)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
else
call SetUnitScale(V8I,L6I,L6I,L6I)
endif
set t=null
endfunction
function LBI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer LCI=(LoadInteger(ZY,(V0I),(52)))
if V8I!=null then
call UnitRemoveAbility(V8I,LCI)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function LDI takes unit u,integer LCI,real H1I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KKI(u,LCI)
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function LBI))
call SaveUnitHandle(ZY,(V0I),(14),(u))
call SaveInteger(ZY,(V0I),(52),(LCI))
set t=null
endfunction
function LEI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=(LoadUnitHandle(ZY,(V0I),(53)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
call UnitShareVision(u,p,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set u=null
set p=null
return false
endfunction
function ShareUnitVisionTimed_Add takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=GetTriggerUnit()
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
call UnitShareVision(u,p,true)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function LEI))
call SavePlayerHandle(ZY,(V0I),(54),(p))
call SaveUnitHandle(ZY,(V0I),(53),(u))
set t=null
set u=null
set p=null
return false
endfunction
function LFI takes nothing returns nothing
set bj_groupCountUnits=bj_groupCountUnits+1
endfunction
function LGI takes group g returns integer
set bj_groupCountUnits=0
call ForGroup(g,function LFI)
return bj_groupCountUnits
endfunction
function LHI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local fogmodifier KHI=(LoadFogModifierHandle(ZY,(V0I),(42)))
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function LZI takes fogmodifier KHI,real H1I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call FogModifierStart(KHI)
call SaveFogModifierHandle(ZY,(V0I),(42),(KHI))
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function LHI))
set t=null
endfunction
function LVI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer LWI=(LoadInteger(ZY,(V0I),(55)))
local destructable d=ZHI(LWI)
if d!=null then
call RemoveDestructable(d)
endif
call ZVI(LWI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set d=null
set t=null
return false
endfunction
function LXI takes destructable d,real H1I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function LVI))
call SaveInteger(ZY,(V0I),(55),(ZWI(d)))
set t=null
endfunction
function LYI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer LCI=(LoadInteger(ZY,(V0I),(52)))
if V8I!=null and GetUnitAbilityLevel(V8I,LCI)>0 then
call UnitRemoveAbility(V8I,LCI)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function LJI takes unit u,integer LCI,real H1I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function LYI))
call SaveUnitHandle(ZY,(V0I),(14),(u))
call SaveInteger(ZY,(V0I),(52),(LCI))
set t=null
endfunction
function LKI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call SetUnitAnimation((LoadUnitHandle(ZY,(V0I),(53))),"stand")
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function LLI takes unit u,real H1I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(53),(u))
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function LKI))
set t=null
endfunction
function LMI takes real H1I,boolean LNI,real x,real y,real LSI,real LTI,real LRI,real LPI,real LQI returns nothing
local real LUI
local real M0I
local real MII
if(LTI<=0 or LQI<=0 or LPI<=0)then
return
endif
set M0I=2.0*H1I/LPI
set LUI=2.0*LTI/LQI
set MII=LSI/LTI
call TerrainDeformRipple(x,y,LTI,LRI,R2I(H1I*1000),1,LUI,M0I,MII,LNI)
endfunction
function M1I takes player H8I,unit VCI,integer WLI returns nothing
local texttag t=CreateTextTag()
call SetPlayerState(H8I,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(H8I,PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetTextTagText(t,"+"+I2S(WLI),0.025)
call SetTextTagPosUnit(t,VCI,0)
call SetTextTagColor(t,255,220,0,255)
call SetTextTagVelocity(t,0,0.03)
if GetLocalPlayer()==H8I then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endfunction
function MOI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call FlushChildHashtable(ZY,(GetHandleId((LoadUnitHandle(ZY,(V0I),(26))))))
call ShowUnit((LoadUnitHandle(ZY,(V0I),(26))),false)
call RemoveUnit((LoadUnitHandle(ZY,(V0I),(26))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
return false
endfunction
function M2I takes unit u,real d returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function MOI))
call SaveUnitHandle(ZY,(V0I),(26),(u))
set t=null
endfunction
function KillUnitTimed_Expire takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call FlushChildHashtable(ZY,(GetHandleId((LoadUnitHandle(ZY,(V0I),(26))))))
call ShowUnit((LoadUnitHandle(ZY,(V0I),(26))),false)
call KillUnit((LoadUnitHandle(ZY,(V0I),(26))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
return false
endfunction
function HideUnitTimed_Expire takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call FlushChildHashtable(ZY,(GetHandleId((LoadUnitHandle(ZY,(V0I),(26))))))
call ShowUnit((LoadUnitHandle(ZY,(V0I),(26))),false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
return false
endfunction
function M3I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call RemoveUnit((LoadUnitHandle(ZY,(V0I),(26))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
return false
endfunction
function M4I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call KillUnit((LoadUnitHandle(ZY,(V0I),(26))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
return false
endfunction
function M5I takes unit u,real d returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function M4I))
call SaveUnitHandle(ZY,(V0I),(26),(u))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,d+0.01,false)
call TriggerAddCondition(t,Condition(function M3I))
call SaveUnitHandle(ZY,(V0I),(26),(u))
set t=null
endfunction
function M6I takes sound KFI returns nothing
if KFI!=null and QL[GetPlayerId(GetLocalPlayer())]==false then
call StartSound(KFI)
endif
endfunction
function M7I takes sound KFI,player Y4I returns nothing
if GetLocalPlayer()==Y4I and QL[GetPlayerId(Y4I)]==false then
call StartSound(KFI)
endif
endfunction
function M8I takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==false
endfunction
function M9I takes nothing returns nothing
call M7I(XJ,GetOwningPlayer(GetEnumUnit()))
endfunction
function MAI takes unit XSI,sound KFI,real x,real y,real r returns nothing
local group g=ZJI()
set OK=XSI
set XJ=KFI
call GroupEnumUnitsInRange(g,x,y,r,Condition(function M8I))
call GroupRemoveUnit(g,XSI)
call ForGroup(g,function M9I)
call ZYI(g)
set g=null
endfunction
function MBI takes unit VCI,item MCI returns integer
local integer i=0
loop
exitwhen i>5
if UnitItemInSlot(VCI,i)==MCI then
return i
endif
set i=i+1
endloop
return-1
endfunction
function DelayedSetUnitPosition_Helper takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit VCI=(LoadUnitHandle(ZY,(V0I),(56)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
call SetUnitPosition(VCI,x,y)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set VCI=null
return false
endfunction
function MDI takes real n1,real n2 returns integer
if n1/n2-R2I(n1/n2)>=0.5 then
return R2I(n1/n2)+1
endif
return R2I(n1/n2)
endfunction
function MEI takes player p returns nothing
if GetLocalPlayer()==p then
call ClearTextMessages()
endif
endfunction
function MFI takes unit u,real d returns nothing
call SetUnitState(u,UNIT_STATE_LIFE,YQI(GetUnitState(u,UNIT_STATE_LIFE)-d,1))
endfunction
function MGI takes integer MHI returns nothing
local unit u=CreateUnit(Player(15),MHI,0,0,0)
call RemoveUnit(u)
set u=null
endfunction
function MZI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=(LoadUnitHandle(ZY,(V0I),(53)))
local real H1I=(LoadReal(ZY,(V0I),(57)))
local integer MVI=(LoadInteger(ZY,(V0I),(58)))
if GetTriggerEvalCount(t)/10>R2I(H1I)then
call SetUnitVertexColor(u,255,100,255,255)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif KMI(u)==false then
call SetUnitVertexColor(u,255,100,255,MVI)
endif
set t=null
set u=null
return false
endfunction
function MWI takes unit u,real H1I,integer MVI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function MZI))
call SaveUnitHandle(ZY,(V0I),(53),(u))
call SaveReal(ZY,(V0I),(57),((H1I)*1.0))
call SaveInteger(ZY,(V0I),(58),(MVI))
set t=null
endfunction
function MXI takes player MYI,integer MJI,unit MKI returns nothing
local texttag t=CreateTextTag()
local string s
call SetPlayerState(MYI,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(MYI,PLAYER_STATE_RESOURCE_GOLD)+MJI)
call SetTextTagText(t,"+"+I2S(MJI),0.025)
call SetTextTagPosUnit(t,MKI,0)
call SetTextTagColor(t,255,220,0,255)
call SetTextTagVelocity(t,0,0.03)
if GetLocalPlayer()==MYI then
call SetTextTagVisibility(t,true)
set s="UI\\Feedback\\GoldCredit\\GoldCredit.mdl"
else
call SetTextTagVisibility(t,false)
set s=""
endif
if GetUnitState(MKI,UNIT_STATE_LIFE)>0.5 then
call DestroyEffect(AddSpecialEffectTarget(s,MKI,"overhead"))
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endfunction
function MLI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer MMI=(LoadInteger(ZY,(V0I),(59)))
if UnitRemoveAbility(XTI,MMI)==true or GetUnitAbilityLevel(XTI,MMI)==0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function MNI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer MMI=(LoadInteger(ZY,(V0I),(59)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if UnitRemoveAbility(XTI,MMI)==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function MLI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(59),(MMI))
endif
set t=null
set XTI=null
return false
endfunction
function MSI takes unit XTI,integer MMI,integer WTI,real H1I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KKI(XTI,MMI)
call SetUnitAbilityLevel(XTI,MMI,WTI)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function MNI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(59),(MMI))
set t=null
endfunction
function MTI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer MMI=(LoadInteger(ZY,(V0I),(59)))
local integer MRI=(LoadInteger(ZY,(V0I),(59)))
call UnitRemoveAbility(XTI,MRI)
if UnitRemoveAbility(XTI,MMI)==true or GetUnitAbilityLevel(XTI,MMI)==0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function MPI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer MMI=(LoadInteger(ZY,(V0I),(59)))
local integer MRI=(LoadInteger(ZY,(V0I),(60)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,MRI)
if UnitRemoveAbility(XTI,MMI)==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function MTI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(59),(MMI))
call SaveInteger(ZY,(V0I),(60),(MRI))
endif
set t=null
set XTI=null
return false
endfunction
function MQI takes unit XTI,integer MMI,integer WTI,real H1I,integer MRI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KKI(XTI,MMI)
call SetUnitAbilityLevel(XTI,MMI,WTI)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function MPI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(59),(MMI))
call SaveInteger(ZY,(V0I),(60),(MRI))
set t=null
endfunction
function MUI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer N0I=(LoadInteger(ZY,(V0I),(61)))
local integer NII=(LoadInteger(ZY,(V0I),(62)))
local unit u1=ZGI(N0I)
local unit u2=ZGI(NII)
local real H1I=(LoadReal(ZY,(V0I),(57)))
local lightning KII=(LoadLightningHandle(ZY,(V0I),(41)))
if I2R(GetTriggerEvalCount(t))*0.025>H1I then
call DestroyLightning(KII)
call ZFI(N0I)
call ZFI(NII)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call MoveLightning(KII,true,GetUnitX(u1),GetUnitY(u1),GetUnitX(u2),GetUnitY(u2))
endif
set t=null
set u1=null
set u2=null
set KII=null
return false
endfunction
function N1I takes string K0I,unit u1,unit u2,real r,real g,real b,real a,real H1I returns nothing
local real x1=GetUnitX(u1)
local real y1=GetUnitY(u1)
local real x2=GetUnitX(u2)
local real y2=GetUnitY(u2)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local lightning KII=AddLightning(K0I,true,x1,y1,x2,y2)
call SetLightningColor(KII,r,g,b,a)
call SaveLightningHandle(ZY,(V0I),(41),(KII))
call SaveInteger(ZY,(V0I),(61),(ZZI(u1)))
call SaveInteger(ZY,(V0I),(62),(ZZI(u2)))
call SaveReal(ZY,(V0I),(57),((H1I)*1.0))
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function MUI))
set t=null
set KII=null
endfunction
function NOI takes string N2I returns nothing
local sound N3I=CreateSound(N2I,false,false,false,10,10,"")
call SetSoundVolume(N3I,0)
call StartSound(N3I)
call KillSoundWhenDone(N3I)
set N3I=null
endfunction
function N4I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local ubersplat N5I=(LoadUbersplatHandle(ZY,(V0I),(131)))
call DestroyUbersplat(N5I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set N5I=null
return false
endfunction
function N6I takes ubersplat N5I,real d returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUbersplatHandle(ZY,(V0I),(131),(N5I))
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function N4I))
set t=null
endfunction
function N7I takes nothing returns nothing
local real d=JAI(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),KJ,LJ)
if d<JJ then
set JJ=d
set YJ=GetEnumUnit()
endif
endfunction
function N8I takes group g,real x,real y returns unit
set JJ=999999
set YJ=null
set KJ=x
set LJ=y
call ForGroup(g,function N7I)
return YJ
endfunction
function N9I takes integer KLI returns nothing
local integer i=0
loop
exitwhen i>5
call SetPlayerAbilityAvailable(CO[i],KLI,false)
call SetPlayerAbilityAvailable(DO[i],KLI,false)
set i=i+1
endloop
endfunction
function NBI takes nothing returns nothing
set FN=CreateRegion()
call RegionAddRect(FN,H5)
set HN=CreateRegion()
call RegionAddRect(HN,Z5)
set EN=CreateRegion()
call RegionAddRect(EN,A6)
call RegionAddRect(EN,B6)
call RegionAddRect(EN,C6)
set GN=CreateRegion()
call RegionAddRect(GN,D6)
call RegionAddRect(GN,E6)
call RegionAddRect(GN,F6)
set ZN=CreateRegion()
call RegionAddRect(ZN,G6)
call RegionAddRect(ZN,H6)
call RegionAddRect(ZN,Z6)
call RegionAddRect(ZN,V6)
call RegionAddRect(ZN,W6)
call RegionAddRect(ZN,X6)
call RegionAddRect(ZN,Y6)
call RegionAddRect(ZN,J6)
call RegionAddRect(ZN,K6)
call RegionAddRect(ZN,L6)
call RegionAddRect(ZN,M6)
call RegionAddRect(ZN,N6)
call RegionAddRect(ZN,S6)
call RegionAddRect(ZN,T6)
call RegionAddRect(ZN,R6)
call RegionAddRect(ZN,P6)
call RegionAddRect(ZN,Q6)
call RegionAddRect(ZN,U6)
call RegionAddRect(ZN,I7)
call RegionAddRect(ZN,O7)
call RegionAddRect(ZN,A7)
call RegionAddRect(ZN,B7)
call RegionAddRect(ZN,C7)
call RegionAddRect(ZN,D7)
call RegionAddRect(ZN,E7)
call RegionAddRect(ZN,F7)
call RegionAddRect(ZN,G7)
call RegionAddRect(ZN,H7)
call RegionAddRect(ZN,Z7)
call RegionAddRect(ZN,V7)
call RegionAddRect(ZN,W7)
call RegionAddRect(ZN,X7)
call RegionAddRect(ZN,Y7)
call RegionAddRect(ZN,J7)
call RegionAddRect(ZN,K7)
call RegionAddRect(ZN,L7)
call RegionAddRect(ZN,M7)
call RegionAddRect(ZN,N7)
call RegionAddRect(ZN,S7)
call RegionAddRect(ZN,T7)
call RegionAddRect(ZN,R7)
call RegionAddRect(ZN,P7)
call RegionAddRect(ZN,Q7)
call RegionAddRect(ZN,U7)
call RegionAddRect(ZN,I8)
call RegionAddRect(ZN,O8)
call RegionAddRect(ZN,A8)
call RegionAddRect(ZN,B8)
call RegionAddRect(ZN,C8)
call RegionAddRect(ZN,D8)
call RegionAddRect(ZN,E8)
call RegionAddRect(ZN,F8)
call RegionAddRect(ZN,G8)
call RegionAddRect(ZN,H8)
call RegionAddRect(ZN,Z8)
call RegionAddRect(ZN,V8)
call RegionAddRect(ZN,W8)
call RegionAddRect(ZN,X8)
call RegionAddRect(ZN,Y8)
call RegionAddRect(ZN,J8)
call RegionAddRect(ZN,K8)
call RegionAddRect(ZN,L8)
call RegionAddRect(ZN,M8)
call RegionAddRect(ZN,N8)
call RegionAddRect(ZN,S8)
call RegionAddRect(ZN,T8)
call RegionAddRect(ZN,R8)
call RegionAddRect(ZN,P8)
call RegionAddRect(ZN,Q8)
call RegionAddRect(ZN,U8)
call RegionAddRect(ZN,I9)
call RegionAddRect(ZN,O9)
call RegionAddRect(ZN,A9)
call RegionAddRect(ZN,B9)
call RegionAddRect(ZN,C9)
call RegionAddRect(ZN,D9)
call RegionAddRect(ZN,E9)
call RegionAddRect(ZN,F9)
call RegionAddRect(ZN,G9)
call RegionAddRect(ZN,H9)
call RegionAddRect(ZN,Z9)
call RegionAddRect(ZN,V9)
call RegionAddRect(ZN,W9)
call RegionAddRect(ZN,X9)
call RegionAddRect(ZN,Y9)
call RegionAddRect(ZN,J9)
call RegionAddRect(ZN,K9)
call RegionAddRect(ZN,L9)
call RegionAddRect(ZN,M9)
call RegionAddRect(ZN,N9)
call RegionAddRect(ZN,S9)
call RegionAddRect(ZN,T9)
call RegionAddRect(ZN,R9)
call RegionAddRect(ZN,P9)
call RegionAddRect(ZN,Q9)
endfunction
function InitTrig_Regions takes nothing returns nothing
call NBI()
endfunction
function NCI takes unit NDI returns boolean
return GetUnitTypeId(NDI)==1848651828 or GetUnitTypeId(NDI)==1848652088 or GetUnitTypeId(NDI)==1848652099 or GetUnitTypeId(NDI)==1848652103
endfunction
function NEI takes player p returns nothing
local unit V8I=L1[GetPlayerId(p)]
local integer i=0
local item NFI
loop
exitwhen i>5
set NFI=UnitItemInSlot(V8I,i)
call SetItemDroppable(NFI,false)
set i=i+1
endloop
set V8I=null
set NFI=null
endfunction
function NGI takes player p returns nothing
local unit V8I=L1[GetPlayerId(p)]
local integer i=0
local item NFI
loop
exitwhen i>5
set NFI=UnitItemInSlot(V8I,i)
call SetItemDroppable(NFI,true)
set i=i+1
endloop
set V8I=null
set NFI=null
endfunction
function NHI takes unit u returns boolean
return GetUnitAbilityLevel(u,1097167980)>0 or GetUnitAbilityLevel(u,1113815395)>0 or GetUnitAbilityLevel(u,1113815346)>0 or GetUnitAbilityLevel(u,1110454606)>0
endfunction
function NZI takes unit u returns boolean
return(GetUnitAbilityLevel((u),(1110459185))>0)or(GetUnitAbilityLevel((u),(1111844210))>0)or(GetUnitAbilityLevel((u),(1113943655))>0)or(GetUnitAbilityLevel((u),(1113943649))>0)or(GetUnitAbilityLevel((u),(1110454583))>0)or(GetUnitAbilityLevel((u),(1110456120))>0)or(GetUnitAbilityLevel((u),(1110456390))>0)or(GetUnitAbilityLevel((u),(1110456389))>0)or(GetUnitAbilityLevel((u),(1110459730))>0)
endfunction
function NVI takes unit u returns boolean
return(GetUnitAbilityLevel((u),(1110454344))>0)or(GetUnitAbilityLevel((u),(1112500344))>0)or(GetUnitAbilityLevel((u),(1112560453))>0)or(GetUnitAbilityLevel((u),(1110456633))>0)or(GetUnitAbilityLevel((u),(1112757326))>0)or(GetUnitAbilityLevel((u),(1110459206))>0)or(GetUnitAbilityLevel((u),(1110458957))>0)or(GetUnitAbilityLevel((u),(1110455885))>0)or(GetUnitAbilityLevel((u),(1110456142))>0)or(GetUnitAbilityLevel((u),(1110456403))>0)or(GetUnitAbilityLevel((u),(1110454353))>0)or(GetUnitAbilityLevel((u),(1110455382))>0)or(GetUnitAbilityLevel((u),(1110456114))>0)or(GetUnitAbilityLevel((u),(1112891758))>0)or(GetUnitAbilityLevel((u),(1110456629))>0)or(GetUnitAbilityLevel((u),(1110455113))>0)or(GetUnitAbilityLevel((u),(1110458692))>0)or(GetUnitAbilityLevel((u),(1110458693))>0)or(GetUnitAbilityLevel((u),(1110458949))>0)or(GetUnitAbilityLevel((u),(1110458950))>0)or(GetUnitAbilityLevel((u),(1110454328))>0)or(GetUnitAbilityLevel((u),(1110455362))>0)or(GetUnitAbilityLevel((u),(1110454854))>0)or(GetUnitAbilityLevel((u),(1112896368))>0)or(GetUnitAbilityLevel((u),(1112896372))>0)or(GetUnitAbilityLevel((u),(1110459460))>0)or((LoadInteger(ZY,(GetHandleId((u))),((4293))))==1)==true or((LoadInteger(ZY,(GetHandleId((u))),((4303))))==1)or(GetUnitAbilityLevel((u),(1110459186))>0)or(GetUnitAbilityLevel((u),(1110455891))>0)or(GetUnitAbilityLevel((u),(1110454867))>0)or(GetUnitAbilityLevel((u),(1110456133))>0)
endfunction
function NWI takes unit u returns boolean
return NVI(u)or NZI(u)or IsUnitPaused(u)or XKI(u)
endfunction
function NXI takes integer NYI,integer NJI,boolean extraColor returns nothing
local integer x=0
loop
exitwhen x>15
call SetPlayerState(Player(x),PLAYER_STATE_RESOURCE_LUMBER,NYI)
call SetPlayerState(Player(x),PLAYER_STATE_RESOURCE_FOOD_USED,NJI)
set x=x+1
endloop
endfunction
function NKI takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1848652343 or id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614 or id==1966092599 or id==1966092601 or id==1966092600 or id==1966092609 or id==1966092610 or id==1966092611
endfunction
function NLI takes unit u,boolean b returns nothing
call SetUnitInvulnerable(u,b)
call SaveBoolean(ZY,(GetHandleId(u)),(509),(b))
endfunction
function NMI takes unit u returns boolean
return(LoadBoolean(ZY,(GetHandleId(u)),(509)))or GetUnitAbilityLevel(u,1098282348)>0
endfunction
function NNI takes real x,real y returns location
local real KUI
local real L0I
local integer i=0
loop
exitwhen i>40
set KUI=x+i*20
set L0I=y+i*20
if IsPointInRegion(ZN,KUI,L0I)==false then
return Location(KUI,L0I)
endif
set KUI=x+i*20
set L0I=y-i*20
if IsPointInRegion(ZN,KUI,L0I)==false then
return Location(KUI,L0I)
endif
set KUI=x-i*20
set L0I=y+i*20
if IsPointInRegion(ZN,KUI,L0I)==false then
return Location(KUI,L0I)
endif
set KUI=x-i*20
set L0I=y-i*20
if IsPointInRegion(ZN,KUI,L0I)==false then
return Location(KUI,L0I)
endif
set i=i+1
endloop
return Location(x,y)
endfunction
function NSI takes unit u returns boolean
return GetUnitAbilityLevel(u,1110455864)>0 or GetUnitAbilityLevel(u,1110456148)>0 or GetUnitAbilityLevel(u,1110456118)>0 or GetUnitAbilityLevel(u,1112504171)>0 or GetUnitAbilityLevel(u,1110455378)>0 or GetUnitAbilityLevel(u,1110458677)>0 or GetUnitAbilityLevel(u,1110454609)>0 or GetUnitAbilityLevel(u,1110454326)>0 or GetUnitAbilityLevel(u,1114205814)>0 or GetUnitAbilityLevel(u,1097886070)>0 or GetUnitAbilityLevel(u,1093677617)>0 or GetUnitAbilityLevel(u,1093684020)>0 or GetUnitAbilityLevel(u,1093687362)>0 or GetUnitAbilityLevel(u,1093687858)>0 or GetUnitAbilityLevel(u,1093748545)>0 or GetUnitAbilityLevel(u,1093748823)>0 or GetUnitAbilityLevel(u,1093748824)>0 or GetUnitAbilityLevel(u,1093677130)>0 or GetUnitAbilityLevel(u,1110456395)>0 or GetUnitAbilityLevel(u,1110456408)>0 or GetUnitAbilityLevel(u,1110455097)>0 or GetUnitAbilityLevel(u,1110454347)>0 or GetUnitAbilityLevel(u,1112041075)>0 or GetUnitAbilityLevel(u,1093743664)>0 or GetUnitAbilityLevel(u,1110454833)>0 or GetUnitAbilityLevel(u,1093687876)>0
endfunction
function NTI takes unit VCI returns boolean
local integer NRI=GetUnitTypeId(VCI)
return NRI==1848651828 or NRI==1848652103 or NRI==1848652099 or NRI==1848652088 or NRI==1697656907 or NRI==1697656905 or NRI==1697656908 or NRI==1697657162
endfunction
function GenericCondition_Basics takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false
endfunction
function NPI takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0
endfunction
function GenericCondition_BasicsAndVisible takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function GenericCondition_BasicsAndStructure takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false
endfunction
function GenericCondition_EnemyUnitsExNoImmuneNoInvisAndStructure takes nothing returns boolean
return XDI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function NQI takes nothing returns boolean
return XDI(GetFilterUnit())==false and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function GenericCondition_EnemyUnitsExNoImmuneNoInvisAndStructureWithAncient takes nothing returns boolean
return XDI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false)
endfunction
function GenericCondition_EnemyUnitsExNoInvisAndStructureWithAncient takes nothing returns boolean
return IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false)
endfunction
function NUI takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitTypeId(GetFilterUnit())==1700946284 or GetUnitTypeId(GetFilterUnit())==1970107511)
endfunction
function S0I takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function GenericCondition_EnemyUnitsVisible takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function GenericCondition_EnemyUnitsAndVisibleOrWW takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))or NSI(GetFilterUnit()))
endfunction
function SII takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)
endfunction
function S1I takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))
endfunction
function SOI takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function GenericCondition_EnemyUnitsExHeroesVision takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))
endfunction
function GenericCondition_EnemyUnitsExHeroes takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function GenericCondition_EnemyUnitsExHeroesNoDotaInvis takes nothing returns boolean
return((IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)and NSI(GetFilterUnit())==false
endfunction
function S3I takes nothing returns boolean
return((IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)and(NSI(GetFilterUnit())==false or IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))==true)
endfunction
function GenericCondition_EnemyUnitsExNoHeroes takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false
endfunction
function S4I takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0
endfunction
function S5I takes nothing returns boolean
return XDI(GetFilterUnit())==false and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function S6I takes nothing returns boolean
return XDI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function GenericCondition_EnemyUnitsExNoImmuneNoInvisWithAncient takes nothing returns boolean
return XDI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)
endfunction
function GenericCondition_EnemyUnitsExNoInvisWithAncient takes nothing returns boolean
return IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)
endfunction
function S7I takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)
endfunction
function GenericCondition_EnemyUnitsNoNeutrals takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and GetOwningPlayer(GetFilterUnit())!=EO
endfunction
function S8I takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function S9I takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false
endfunction
function SAI takes nothing returns boolean
return XDI(GetFilterUnit())==false and(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))
endfunction
function GenericCondition_EnemyUnitsAndStructureWithAncientsEx takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false)
endfunction
function SBI takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function SCI takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and VSI(GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)
endfunction
function SDI takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)
endfunction
function SEI takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function SFI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function SGI takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or GetOwningPlayer(GetFilterUnit())==CO[0]or GetOwningPlayer(GetFilterUnit())==DO[0])and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function SHI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function SZI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function SVI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function SWI takes nothing returns boolean
return XDI(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))
endfunction
function SXI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function SYI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function GenericCondition_EnemyHeroesExNoDotAInvis takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)or NSI(GetEnumUnit())
endfunction
function SJI takes nothing returns boolean
return XDI(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))
endfunction
function GenericCondition_AllUnits takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function SKI takes nothing returns boolean
return((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0
endfunction
function GenericCondition_AllNonNeutrals takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and GetOwningPlayer(GetFilterUnit())!=EO
endfunction
function SLI takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)
endfunction
function SMI takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function GenericCondition_AllHeroesNotSelf takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetTriggerUnit()!=GetFilterUnit()and IsUnitIllusion(GetFilterUnit())==false
endfunction
function GenericCondition_AllHeroesAndIllusions takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetFilterUnit())==true)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function GenericCondition_Hero takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function GenericCondition_EnemyUnitsExVisible takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))
endfunction
function SNI takes nothing returns boolean
return((IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK)))and NHI(GetFilterUnit())==false
endfunction
function GenericCondition_RegularUnits takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))
endfunction
function GenericCondition_RegularUnitsExVisible takes nothing returns boolean
return((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))
endfunction
function SSI takes nothing returns boolean
return XDI(GetFilterUnit())==false and((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))
endfunction
function STI takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==true and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(GetFilterUnit())!=1848657461
endfunction
function GenericCondition_FloatingHeroes takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1211117637 or GetUnitTypeId(GetFilterUnit())==1211117639 or GetUnitTypeId(GetFilterUnit())==1211117638 or GetUnitTypeId(GetFilterUnit())==1160786000 or GetUnitTypeId(GetFilterUnit())==1311780930 or GetUnitTypeId(GetFilterUnit())==1430468144 or GetUnitTypeId(GetFilterUnit())==1162032951 or GetUnitTypeId(GetFilterUnit())==1429221456 or GetUnitTypeId(GetFilterUnit())==1160786510 or GetUnitTypeId(GetFilterUnit())==1160786511 or GetUnitTypeId(GetFilterUnit())==1328558390 or GetUnitTypeId(GetFilterUnit())==1328558391 or GetUnitTypeId(GetFilterUnit())==1160786502
endfunction
function SRI takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(OK))==true and WXI(GetFilterUnit())>0
endfunction
function SPI takes real SQI returns integer
if SQI>=4.00 then
return 19
elseif SQI>=3.75 then
return 18
elseif SQI>=3.5 then
return 17
elseif SQI>=3.25 then
return 16
elseif SQI>=3 then
return 15
elseif SQI>=2.75 then
return 14
elseif SQI>=2.5 then
return 13
elseif SQI>=2.25 then
return 12
elseif SQI>=2 then
return 11
elseif SQI>=1.8 then
return 10
elseif SQI>=1.75 then
return 9
elseif SQI>=1.65 then
return 8
elseif SQI>=1.5 then
return 7
elseif SQI>=1.25 then
return 6
elseif SQI>=1.2 then
return 5
elseif SQI>=1 then
return 4
elseif SQI>=0.75 then
return 3
elseif SQI>=0.5 then
return 2
elseif SQI>=0.25 then
return 1
endif
return 1
endfunction
function SUI takes unit XSI,unit XTI,real SQI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local integer WTI=SPI(SQI)
call UnitAddAbility(T0I,1093687350)
call SetUnitAbilityLevel(T0I,1093687350,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
set T0I=null
endfunction
function TII takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer T1I=(LoadInteger(ZY,(V0I),(73)))
local unit V8I=ZGI(T1I)
local integer ZLI=GetTriggerEvalCount(t)
local real y=(ZLI-13)*(ZLI-13)
if ZLI<26 then
if XGI(V8I)==false then
call SetUnitFlyHeight(V8I,375-y,0)
endif
else
call PauseUnit(V8I,false)
if XGI(V8I)==false then
call SetUnitFlyHeight(V8I,GetUnitDefaultFlyHeight(V8I),0)
endif
call XNI((LoadUnitHandle(ZY,(V0I),(2))),V8I,1,(LoadReal(ZY,(V0I),(20))))
call SUI((LoadUnitHandle(ZY,(V0I),(2))),V8I,(LoadReal(ZY,(V0I),(57))))
call ZFI(T1I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
return false
endfunction
function TOI takes unit V8I,unit XSI,real H1I,real T2I,real T3I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call PauseUnit(V8I,true)
if XGI(V8I)==false then
call UnitAddAbility(V8I,1097691750)
call UnitRemoveAbility(V8I,1097691750)
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl",GetUnitX(V8I),GetUnitY(V8I)))
call SaveInteger(ZY,(V0I),(73),(ZZI(V8I)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(20),((T2I)*1.0))
call SaveReal(ZY,(V0I),(57),((H1I)*1.0))
call TriggerRegisterTimerEvent(t,0.02/0.52*T3I,true)
call TriggerAddCondition(t,Condition(function TII))
endfunction
function T4I takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EK)==false and XDI(GetEnumUnit())==false and((LoadInteger(ZY,(GetHandleId((GetEnumUnit()))),((4253))))==1)==false then
call GroupAddUnit(EK,GetEnumUnit())
call TOI(GetEnumUnit(),OK,RJ,TJ,PJ)
endif
endfunction
function T5I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real T2I=(LoadReal(ZY,(V0I),(20)))
local real H1I=(LoadReal(ZY,(V0I),(57)))
local real x1=(LoadReal(ZY,(V0I),(64)))
local real y1=(LoadReal(ZY,(V0I),(65)))
local real x2=(LoadReal(ZY,(V0I),(66)))
local real y2=(LoadReal(ZY,(V0I),(67)))
local real w=(LoadReal(ZY,(V0I),(68)))
local real T6I=(LoadReal(ZY,(V0I),(44)))
local real a=Atan2(y2-y1,x2-x1)
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
local group T7I=ZJI()
local real T8I=T6I*0.0625
local real T9I=(LoadReal(ZY,(V0I),(71)))
local real TAI=(LoadReal(ZY,(V0I),(72)))
local real TBI=(LoadReal(ZY,(V0I),(70)))
local real TCI=(LoadReal(ZY,(V0I),(63)))
if T8I>JAI(x1,y1,x2,y2)then
set x1=x2
set y1=y2
else
set x1=x1+T8I*Cos(a)
set y1=y1+T8I*Sin(a)
endif
set OK=XSI
set TJ=T2I
set RJ=H1I
set PJ=TCI
set EK=g
call GroupEnumUnitsInRange(T7I,x1,y1,w,Condition(function SOI))
call ForGroup(T7I,function T4I)
call ZYI(T7I)
if JAI(x1,y1,T9I,TAI)>=TBI then
call SaveReal(ZY,(V0I),(71),((x1)*1.0))
call SaveReal(ZY,(V0I),(72),((y1)*1.0))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl",x1,y1))
endif
call SaveReal(ZY,(V0I),(64),((x1)*1.0))
call SaveReal(ZY,(V0I),(65),((y1)*1.0))
if x1==x2 and y1==y2 then
if(LoadBoolean(ZY,(V0I),(69)))==true then
call ZYI(g)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set g=null
set T7I=null
set XSI=null
set t=null
return false
endfunction
function TDI takes unit XSI,unit TEI,real T2I,real H1I,real TCI,real x1,real y1,real x2,real y2,real w,group TFI,boolean TGI,real T6I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real J3I=JAI(x1,y1,x2,y2)
local integer THI=MDI(J3I,VN)
local real TBI=J3I/THI
local group g
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(20),((T2I)*1.0))
call SaveReal(ZY,(V0I),(57),((H1I)*1.0))
call SaveReal(ZY,(V0I),(63),((TCI)*1.0))
call SaveReal(ZY,(V0I),(64),((x1)*1.0))
call SaveReal(ZY,(V0I),(65),((y1)*1.0))
call SaveReal(ZY,(V0I),(66),((x2)*1.0))
call SaveReal(ZY,(V0I),(67),((y2)*1.0))
call SaveReal(ZY,(V0I),(68),((w)*1.0))
call SaveReal(ZY,(V0I),(44),((T6I)*1.0))
if TFI==null then
set g=ZJI()
if TEI!=null and IsUnitIllusion(TEI)==false then
call GroupAddUnit(g,TEI)
endif
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveBoolean(ZY,(V0I),(69),(TGI))
set g=null
else
call SaveGroupHandle(ZY,(V0I),(22),(TFI))
call SaveBoolean(ZY,(V0I),(69),(TGI))
endif
call SaveReal(ZY,(V0I),(70),((TBI)*1.0))
call SaveReal(ZY,(V0I),(71),((x1)*1.0))
call SaveReal(ZY,(V0I),(72),((y1)*1.0))
call TriggerRegisterTimerEvent(t,0.0625,true)
call TriggerAddCondition(t,Condition(function T5I))
set t=null
endfunction
function TZI takes unit XSI,integer WTI,integer TVI returns nothing
local integer i
if B1I[1]==0 then
return
endif
set i=1
loop
exitwhen i>10
call UnitRemoveAbility(XSI,B1I[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>10
call UnitRemoveAbility(XSI,BOI[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>10
call UnitRemoveAbility(XSI,B2I[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>10
call UnitRemoveAbility(XSI,B3I[i])
set i=i+1
endloop
call UnitRemoveAbility(XSI,1110458963)
if WTI==1 then
call UnitAddAbility(XSI,B1I[TVI])
elseif WTI==2 then
call UnitAddAbility(XSI,BOI[TVI])
elseif WTI==3 then
call UnitAddAbility(XSI,B2I[TVI])
elseif WTI==4 then
call UnitAddAbility(XSI,B3I[TVI])
endif
endfunction
function TWI takes integer TXI returns nothing
set XN=XN+1
set WN[XN]=TXI
endfunction
function TYI takes unit u returns nothing
local integer i=1
loop
exitwhen i>XN
call UnitRemoveAbility(u,WN[i])
set i=i+1
endloop
endfunction
function TKI takes integer KLI returns boolean
return KLI==1095331943 or KLI==1093677654 or KLI==1094938741 or KLI==1093744708 or KLI==1093750613 or KLI==1095328633 or KLI==1093751617
endfunction
function TLI takes unit XTI returns nothing
call UnitRemoveAbility(XTI,1093749313)
call UnitRemoveAbility(XTI,1110459204)
call UnitRemoveAbility(XTI,1093749828)
call UnitRemoveAbility(XTI,1097167980)
call TZI(XTI,0,0)
endfunction
function TMI takes nothing returns boolean
if TKI(GetSpellAbilityId())then
call TLI(GetSpellTargetUnit())
endif
return false
endfunction
function TSI takes integer TTI returns integer
if F70[TTI]==0 then
return TTI
else
return F70[TTI]
endif
endfunction
function TRI takes integer id returns boolean
return id==GT0 or id==GN0 or id==GM0 or id==GS0 or id==GL0
endfunction
function TPI takes unit VCI,integer JMI returns boolean
local integer HWI
local item JNI
set HWI=0
loop
exitwhen HWI>5
set JNI=UnitItemInSlot(VCI,HWI)
if JNI!=null and GetItemTypeId(JNI)==JMI then
set JNI=null
return true
endif
set HWI=HWI+1
endloop
set JNI=null
return false
endfunction
function TQI takes item MCI returns integer
local integer JMI
local integer i=1
if MCI==null then
return-2
endif
set JMI=GetItemTypeId(MCI)
loop
exitwhen i>F80
if FO0[i]==JMI or F20[i]==JMI or F40[i]==JMI then
return i
endif
set i=i+1
endloop
return-1
endfunction
function TUI takes item MCI returns integer
local integer JMI
local integer i=1
if MCI==null then
return-2
endif
set JMI=GetItemTypeId(MCI)
loop
exitwhen i>F80
if FO0[i]==JMI or F20[i]==JMI then
return i
endif
set i=i+1
endloop
return-1
endfunction
function R0I takes unit VCI returns integer
local integer RII
if VCI==null then
return-2
endif
set RII=GetUnitTypeId(VCI)
if RII==1211117620 then
return XU0
elseif RII==1430466872 then
return Y00
elseif RII==1432580716 then
return JO0
elseif RII==1211117640 then
return Y40
elseif RII==1430466609 then
return Y50
elseif RII==1332898670 then
return Y60
elseif RII==1215128178 then
return YA0
elseif RII==1214931305 then
return Y70
elseif RII==1433168227 then
return XQ0
elseif RII==1164666213 then
return XP0
elseif RII==1164799603 then
return XT0
elseif RII==1162032439 then
return Y80
elseif RII==1429221445 then
return YO0
elseif RII==1160785973 then
return Y10
elseif RII==1160786241 then
return Y90
elseif RII==1430467634 then
return YI0
elseif RII==1315988077 then
return YY0
elseif RII==1211117652 then
return YC0
elseif RII==1215723364 then
return YD0
elseif RII==1315070563 then
return YE0
elseif RII==1211117633 then
return YG0
elseif RII==1432646245 then
return YH0
elseif RII==1160786000 then
return YZ0
elseif RII==1429221451 then
return YV0
elseif RII==1211117649 then
return YW0
elseif RII==1211117653 then
return YX0
elseif RII==1429221446 then
return YJ0
elseif RII==1311786311 then
return YK0
elseif RII==1162032181 then
return YL0
elseif RII==1328558154 then
return YM0
elseif RII==1332963428 then
return YN0
elseif RII==1432642913 then
return YS0
elseif RII==1311781207 then
return YT0
elseif RII==1211117643 then
return YR0
elseif RII==1332766568 then
return YP0
elseif RII==1333027688 then
return YQ0
elseif RII==1211117650 then
return Y30
elseif RII==1211119433 then
return Y30
elseif RII==1311780930 then
return YU0
elseif RII==1160786243 then
return J00
elseif RII==1160785970 then
return JI0
elseif RII==1162032951 then
return J10
elseif RII==1429221456 then
return J20
elseif RII==1164799855 then
return J30
elseif RII==1211117646 then
return J40
elseif RII==1160786510 or RII==1160786511 then
return J50
elseif RII==1211117641 then
return J60
elseif RII==1211117636 then
return J70
endif
return XS0
endfunction
function R1I takes unit VCI returns integer
local integer RII
if VCI==null then
return-2
endif
set RII=GetUnitTypeId(VCI)
if RII==1211117620 then
return 1093686352
elseif RII==1430466872 then
return 1093686354
elseif RII==1432580716 then
return 0
elseif RII==1211117640 then
return 1093686358
elseif RII==1430466609 then
return 1093686360
elseif RII==1332898670 then
return 1093686362
elseif RII==1215128178 then
return 1093686577
elseif RII==1214931305 then
return 1093686579
elseif RII==1433168227 then
return 1093686581
elseif RII==1164666213 then
return 1093686583
elseif RII==1164799603 then
return 1093686585
elseif RII==1162032439 then
return 1093686594
elseif RII==1429221445 then
return 1093686596
elseif RII==1160785973 then
return 1093686598
elseif RII==1160786241 then
return 1093686600
elseif RII==1430467634 then
return 1093686602
elseif RII==1315988077 then
return 1093747269
elseif RII==1211117652 then
return 1093747257
elseif RII==1215723364 then
return 1093747265
elseif RII==1315070563 then
return 1093747266
elseif RII==1211117633 then
return 1093747541
elseif RII==1432646245 then
return 1093747271
elseif RII==1160786000 then
return 1093747274
elseif RII==1429221451 then
return 1093747267
elseif RII==1211117649 then
return 1093747273
elseif RII==1211117653 then
return 1093747268
elseif RII==1429221446 then
return 1093747545
elseif RII==1311786311 then
return 1093747762
elseif RII==1162032181 then
return 1093747761
elseif RII==1328558154 then
return 1093747546
elseif RII==1332963428 then
return 1093747760
elseif RII==1432642913 then
return 1093747763
elseif RII==1311781207 then
return 1093747764
elseif RII==1211117643 then
return 1093748529
elseif RII==1332766568 then
return 1093750100
elseif RII==1333027688 then
return 1093750320
elseif RII==1311780930 then
return 1093751123
elseif RII==1160786243 then
return 1093752148
elseif RII==1160785970 then
return 1093752149
elseif RII==1162032951 then
return 1093752369
elseif RII==1429221456 then
return 1093752409
elseif RII==1164799855 then
return 1093752644
elseif RII==1211117646 then
return 1093808467
elseif RII==1160786510 or RII==1160786511 then
return 1093808951
elseif RII==1211117641 then
return 1093809989
elseif RII==1211117636 then
return 1093810241
endif
return 0
endfunction
function ROI takes item NFI returns boolean
local integer i=1
loop
exitwhen i>KI0
if NFI==K00[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function R3I takes item MCI returns boolean
local integer TTI=TQI(MCI)
if TTI==XS0 or TTI==XT0 or TTI==XR0 or TTI==XP0 or TTI==XQ0 or TTI==XU0 or TTI==Y00 or TTI==YI0 or TTI==Y10 or TTI==YO0 or TTI==Y20 or TTI==Y40 or TTI==Y50 or TTI==Y60 or TTI==Y70 or TTI==Y80 or TTI==Y90 or TTI==YA0 or TTI==YC0 or TTI==YD0 or TTI==YE0 or TTI==YG0 or TTI==YH0 or TTI==YZ0 or TTI==YV0 or TTI==YW0 or TTI==YX0 or TTI==YJ0 or TTI==YK0 or TTI==YL0 or TTI==YM0 or TTI==YN0 or TTI==YS0 or TTI==YT0 or TTI==YR0 or TTI==YY0 or TTI==YP0 or TTI==YQ0 then
return true
elseif TTI==YU0 or TTI==J00 or TTI==JI0 or TTI==J10 or TTI==JO0 or TTI==J20 or TTI==J30 or TTI==J40 or TTI==J50 or TTI==J60 or TTI==J70 then
return true
endif
return false
endfunction
function R4I takes integer TTI returns boolean
return TTI==VZ0 or TTI==HB0 or TTI==H30 or TTI==H50 or TTI==H60 or TTI==H70 or TTI==H80 or TTI==H90 or TTI==H40 or TTI==HE0 or TTI==HF0
endfunction
function R5I takes integer TTI returns boolean
return TTI==WO0 or TTI==HO0 or TTI==ZO0 or TTI==Z20 or TTI==VX0 or TTI==ZX0 or TTI==HD0 or TTI==GR0 or TTI==VP0
endfunction
function R6I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer JMI=(LoadInteger(ZY,(V0I),(74)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local boolean R7I=(LoadBoolean(ZY,(V0I),(75)))
local integer R8I=(LoadInteger(ZY,(V0I),(76)))
local item R9I=CreateItem(JMI,x,y)
call SetItemPlayer(R9I,p,true)
call SetItemUserData(R9I,0)
if R7I then
call SetItemCharges(R9I,R8I)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set p=null
return false
endfunction
function RAI takes integer JMI,real x,real y,player p,boolean R7I,integer R8I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveInteger(ZY,(V0I),(74),(JMI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SavePlayerHandle(ZY,(V0I),(54),(p))
call SaveBoolean(ZY,(V0I),(75),(R7I))
call SaveInteger(ZY,(V0I),(76),(R8I))
call TriggerAddCondition(t,Condition(function R6I))
call TriggerRegisterTimerEvent(t,0,false)
set t=null
endfunction
function DisableItemTriggers takes nothing returns nothing
call DisableTrigger(JX0)
endfunction
function EnableItemTriggers takes nothing returns nothing
call EnableTrigger(JX0)
endfunction
function RBI takes item MCI returns nothing
call DisableTrigger(JX0)
call RemoveItem(MCI)
call EnableTrigger(JX0)
endfunction
function RCI takes unit VCI,integer JMI,item RDI returns item
local integer HWI
local item JNI
set HWI=0
loop
exitwhen HWI>5
set JNI=UnitItemInSlot(VCI,HWI)
if JNI!=null and JNI!=RDI and GetItemTypeId(JNI)==JMI then
set JNI=null
return UnitItemInSlot(VCI,HWI)
endif
set HWI=HWI+1
endloop
set JNI=null
return null
endfunction
function REI takes unit VCI,integer JMI returns item
local integer HWI
local item JNI
set HWI=0
loop
exitwhen HWI>5
set JNI=UnitItemInSlot(VCI,HWI)
if(JNI!=null)and(GetItemTypeId(JNI)==JMI)then
set JNI=null
return UnitItemInSlot(VCI,HWI)
endif
set HWI=HWI+1
endloop
set JNI=null
return null
endfunction
function RFI takes player p,unit VCI,integer TTI,item RDI returns item
local integer HWI
local item JNI
set HWI=0
loop
exitwhen HWI>5
set JNI=UnitItemInSlot(VCI,HWI)
if JNI!=null and JNI!=RDI and TQI(JNI)==TTI and(GetItemPlayer(JNI)==p or TTI==H70 or TTI==H80)then
set JNI=null
return UnitItemInSlot(VCI,HWI)
endif
set HWI=HWI+1
endloop
set JNI=null
return null
endfunction
function RGI takes player p,unit VCI,integer TTI returns item
local integer HWI
local item JNI
set HWI=0
loop
exitwhen HWI>5
set JNI=UnitItemInSlot(VCI,HWI)
if(JNI!=null)and(TQI(JNI)==TTI)and(GetItemPlayer(JNI)==p or TTI==H70 or TTI==H80)then
set JNI=null
return UnitItemInSlot(VCI,HWI)
endif
set HWI=HWI+1
endloop
set JNI=null
return null
endfunction
function RHI takes unit VCI,integer TTI returns item
local integer HWI
local item JNI
set HWI=0
loop
exitwhen HWI>5
set JNI=UnitItemInSlot(VCI,HWI)
if(JNI!=null)and(TQI(JNI)==TTI)then
set JNI=null
return UnitItemInSlot(VCI,HWI)
endif
set HWI=HWI+1
endloop
set JNI=null
return null
endfunction
function RZI takes unit VCI returns integer
local integer i=0
local integer n=0
local integer RVI=UnitInventorySize(VCI)-1
loop
exitwhen i>RVI
if UnitItemInSlot(VCI,i)==null then
set n=n+1
endif
set i=i+1
endloop
return n
endfunction
function RWI takes item MCI returns integer
local integer JMI
local integer i=1
if MCI==null then
return-2
endif
set JMI=GetItemTypeId(MCI)
loop
exitwhen i>F80
if FO0[i]==JMI or F20[i]==JMI then
return i
endif
set i=i+1
endloop
return-1
endfunction
function RXI takes item MCI returns integer
local integer JMI
local integer i=1
if MCI==null then
return-2
endif
set JMI=GetItemTypeId(MCI)
loop
exitwhen i>F80
if F40[i]==JMI then
return i
endif
set i=i+1
endloop
return-1
endfunction
function RYI takes item MCI returns integer
local integer JMI
local integer i=1
if MCI==null then
return-2
endif
set JMI=GetItemTypeId(MCI)
loop
exitwhen i>F80
if F40[i]==JMI then
return F20[i]
endif
set i=i+1
endloop
return-1
endfunction
function RJI takes unit VCI returns integer
local integer RII
local integer i=0
if VCI==null then
return-2
endif
set RII=GetUnitTypeId(VCI)
loop
exitwhen i>F80
if F30[i]==RII then
return i
endif
set i=i+1
endloop
return-1
endfunction
function RKI takes item RLI returns string
if RLI==null then
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
return F50[TQI(RLI)]
endfunction
function RMI takes item MCI returns boolean
return TQI(MCI)==VI0 or TQI(MCI)==V10 or TQI(MCI)==FL0 or TQI(MCI)==FM0
endfunction
function RNI takes integer TTI returns integer
if H60==TTI then
return 3
endif
if H70==TTI or H80==TTI or HC0==TTI or H40==TTI or HE0==TTI then
return 2
endif
return 1
endfunction
function RSI takes item MCI returns boolean
return GetItemType(MCI)==ITEM_TYPE_POWERUP or GetItemType(MCI)==ITEM_TYPE_PURCHASABLE or GetItemType(MCI)==ITEM_TYPE_MISCELLANEOUS
endfunction
function RTI takes unit V8I returns real
local real RRI
if VLI(GetOwningPlayer(V8I))then
set RRI=GetRectCenterX(A4)
else
set RRI=GetRectCenterX(T3)
endif
return RRI
endfunction
function RPI takes unit V8I returns real
local real RRI
if VLI(GetOwningPlayer(V8I))then
set RRI=GetRectCenterY(A4)
else
set RRI=GetRectCenterY(T3)
endif
return RRI
endfunction
function RQI takes unit V8I,integer RUI,integer P0I returns item
local real x=RTI(V8I)
local real y=RPI(V8I)
local item NFI=CreateItem(RUI,x,y)
local integer i=0
local boolean array PII
local item P1I
call DisableTrigger(JX0)
if RUI>0 then
loop
exitwhen i>(UnitInventorySize(V8I)-1)
if UnitItemInSlot(V8I,i)==null and i!=P0I then
set P1I=CreateItem(1227895373,x,y)
call UnitAddItem(V8I,P1I)
set PII[i]=true
else
set PII[i]=false
endif
if i==P0I then
call EnableTrigger(JX0)
call UnitAddItem(V8I,NFI)
call DisableTrigger(JX0)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if PII[i]==true then
call RemoveItem(UnitItemInSlot(V8I,i))
endif
set i=i+1
endloop
endif
call EnableTrigger(JX0)
set CK=NFI
set NFI=null
set P1I=null
return CK
endfunction
function POI takes integer VWI,integer r,integer g,integer b returns nothing
set MN=MN+1
set YN[MN]=r
set JN[MN]=g
set KN[MN]=b
set LN[MN]=VWI
endfunction
function P2I takes unit u returns nothing
local integer id=GetUnitTypeId(u)
local integer i=1
local integer a=255
local boolean P3I=false
if id==1165451634 then
set a=R2I(2.55*(100-18+20*GetUnitAbilityLevel(u,1093677904)))
endif
loop
exitwhen i>MN or P3I
if LN[i]==id then
set P3I=true
call SetUnitVertexColor(u,YN[i],JN[i],KN[i],a)
endif
set i=i+1
endloop
if P3I==false then
call SetUnitVertexColor(u,255,255,255,255)
endif
endfunction
function P4I takes unit u returns nothing
local integer id=GetUnitTypeId(u)
local integer i=1
local boolean P3I=false
loop
exitwhen i>MN or P3I
if LN[i]==id then
set P3I=true
call SetUnitVertexColor(u,YN[i],JN[i],KN[i],0)
endif
set i=i+1
endloop
if P3I==false then
call SetUnitVertexColor(u,255,255,255,0)
endif
endfunction
function P5I takes player p,string P6I,integer JHI returns nothing
local string id=I2S(GetPlayerId(p))
call StoreInteger(NN,id,P6I,JHI)
if VTI(XO)==false then
call XZI()
endif
if GetLocalPlayer()==XO then
call SyncStoredInteger(NN,id,P6I)
endif
endfunction
function P7I takes string P8I,integer JHI returns nothing
call StoreInteger(NN,"Data",P8I,JHI)
if VTI(XO)==false then
call XZI()
endif
if GetLocalPlayer()==XO then
call SyncStoredInteger(NN,"Data",P8I)
endif
endfunction
function P9I takes nothing returns nothing
call FlushGameCache(InitGameCache("dr.x"))
set NN=InitGameCache("dr.x")
endfunction
function InitTrig_Traffic_Functions takes nothing returns nothing
call P9I()
endfunction
function PAI takes string s,string PBI,string PCI returns string
local string PDI=""
local integer i=0
local integer PEI=StringLength(s)
local string PFI
local integer PGI=StringLength(PBI)
local boolean P3I=false
loop
exitwhen i+1>PEI
set PFI=SubString(s,i,i+PGI)
if PFI!=PBI or P3I then
set PDI=PDI+SubString(s,i,i+1)
set i=i+1
else
set PDI=PDI+PCI
set i=i+PGI
set P3I=true
endif
endloop
return PDI
endfunction
function PHI takes player PZI,player PVI returns string
local string s=GetObjectName(1848656696)
set s=PAI(s,"$dead",C0[GetPlayerId(PZI)]+(CR0[GetPlayerId((PZI))])+"|r")
set s=PAI(s,"$killer",C0[GetPlayerId(PVI)]+(CR0[GetPlayerId((PVI))])+"|r")
return s
endfunction
function PWI takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer RVI
if d<1 then
call UnitRemoveAbility(u,SN[0])
call UnitRemoveAbility(u,SN[1])
call UnitRemoveAbility(u,SN[2])
call UnitRemoveAbility(u,SN[3])
call UnitRemoveAbility(u,SN[4])
call UnitRemoveAbility(u,SN[5])
call UnitRemoveAbility(u,SN[6])
call UnitRemoveAbility(u,SN[7])
call UnitRemoveAbility(u,SN[8])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set RVI=8
set i=0
loop
exitwhen i>RVI
if b[i]==1 then
call UnitAddAbility(u,SN[i])
else
call UnitRemoveAbility(u,SN[i])
endif
set i=i+1
endloop
endfunction
function PYI takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer RVI
if d<1 then
call UnitRemoveAbility(u,TN[0])
call UnitRemoveAbility(u,TN[1])
call UnitRemoveAbility(u,TN[2])
call UnitRemoveAbility(u,TN[3])
call UnitRemoveAbility(u,TN[4])
call UnitRemoveAbility(u,TN[5])
call UnitRemoveAbility(u,TN[6])
call UnitRemoveAbility(u,TN[7])
call UnitRemoveAbility(u,TN[8])
call UnitRemoveAbility(u,TN[9])
call UnitRemoveAbility(u,TN[10])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set RVI=10
set i=0
loop
exitwhen i>RVI
if b[i]==1 then
call UnitAddAbility(u,TN[i])
else
call UnitRemoveAbility(u,TN[i])
endif
set i=i+1
endloop
endfunction
function PKI takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer RVI
if d<1 then
call UnitRemoveAbility(u,RN[0])
call UnitRemoveAbility(u,RN[1])
call UnitRemoveAbility(u,RN[2])
call UnitRemoveAbility(u,RN[3])
call UnitRemoveAbility(u,RN[4])
call UnitRemoveAbility(u,RN[5])
call UnitRemoveAbility(u,RN[6])
call UnitRemoveAbility(u,RN[7])
call UnitRemoveAbility(u,RN[8])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set RVI=8
set i=0
loop
exitwhen i>RVI
if b[i]==1 then
call UnitAddAbility(u,RN[i])
else
call UnitRemoveAbility(u,RN[i])
endif
set i=i+1
endloop
endfunction
function PMI takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer RVI
if d<1 then
call UnitRemoveAbility(u,PN[0])
call UnitRemoveAbility(u,PN[1])
call UnitRemoveAbility(u,PN[2])
call UnitRemoveAbility(u,PN[3])
call UnitRemoveAbility(u,PN[4])
call UnitRemoveAbility(u,PN[5])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set RVI=i
set i=0
loop
exitwhen i>RVI
if b[i]==1 then
call UnitAddAbility(u,PN[i])
else
call UnitRemoveAbility(u,PN[i])
endif
set i=i+1
endloop
endfunction
function PSI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local integer i=(LoadInteger(ZY,(V0I),(77)))
local string c="|c006699CC"
if GetObjectName(1848657992)=="Language: English"and(DG0[(i)]!="")then
if GetTriggerEvalCount(t)==1 then
elseif GetTriggerEvalCount(t)==2 then
call DisplayTimedTextToPlayer(p,0,0,15,"Tip 1: "+c+DG0[i]+"|r")
call M7I(YE,p)
elseif GetTriggerEvalCount(t)==3 then
call DisplayTimedTextToPlayer(p,0,0,15,"Tip 2: "+c+DH0[i]+"|r")
call M7I(YE,p)
elseif GetTriggerEvalCount(t)==4 then
call DisplayTimedTextToPlayer(p,0,0,15,"Tip 3: "+c+DZ0[i]+"|r")
call M7I(YE,p)
elseif GetTriggerEvalCount(t)==5 then
call DisplayTimedTextToPlayer(p,0,0,15,"Tip 4: "+c+DV0[i]+"|r")
call M7I(YE,p)
elseif GetTriggerEvalCount(t)==6 then
call DisplayTimedTextToPlayer(p,0,0,15,"Tip 5: "+c+DW0[i]+"|r")
call M7I(YE,p)
endif
endif
if GetTriggerEvalCount(t)==5 then
call ZSI(t)
call FlushChildHashtable(ZY,(V0I))
endif
return false
endfunction
function PTI takes player p,integer i returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,10,false)
call TriggerRegisterTimerEvent(t,15,false)
call TriggerRegisterTimerEvent(t,300,true)
call TriggerAddCondition(t,Condition(function PSI))
call SavePlayerHandle(ZY,(V0I),(54),(p))
call SaveInteger(ZY,(V0I),(77),(i))
set t=null
endfunction
function PRI takes unit XSI returns integer
local integer WJI=GetUnitTypeId(XSI)
local integer PPI=1865429328
if WJI==1432646245 then
set PPI=1865429326
elseif WJI==1164799855 or WJI==1211117641 or WJI==1211119409 or WJI==1160785973 then
set PPI=1865429327
endif
return PPI
endfunction
function PQI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
endif
set t=null
set XSI=null
set T0I=null
return false
endfunction
function PUI takes unit XSI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),PRI(XSI),GetUnitX(XSI),GetUnitY(XSI),0)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function PQI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
set t=null
endfunction
function Q0I takes integer RII returns boolean
local integer i=0
loop
exitwhen i>59
if RII==UN[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function QII takes integer WTI returns integer
local real Q1I=TimerGetElapsed(M)-N
local real NYI=(R2I(Q1I)/60)-(1/2)
local real QOI=100+WTI*WTI*1.5+NYI*15
local integer HWI
set HWI=R2I(QOI/50)
set HWI=IMinBJ(HWI,59)
set HWI=IMaxBJ(HWI,0)
return HWI
endfunction
function Q2I takes player p returns nothing
local integer id=GetPlayerId(p)
local unit Q3I=CL0[id]
local unit V8I=L1[id]
local integer WTI=GetHeroLevel(V8I)
local integer i=0
loop
exitwhen i>59
call RemoveUnitFromStock(Q3I,UN[i])
set i=i+1
endloop
if X0==true then
return
endif
if N80==false then
return
endif
call AddUnitToStock(Q3I,UN[QII(WTI)],1,1)
set IS[id]=UN[QII(WTI)]
set V8I=null
set Q3I=null
endfunction
function Q4I takes player p returns nothing
local integer id=GetPlayerId(p)
local unit Q3I=CL0[id]
local unit V8I=L1[id]
local integer WTI=GetHeroLevel(V8I)
local integer i=0
if X0==true then
return
endif
if N80==false then
return
endif
if IS[id]==1747993652 then
return
endif
if IS[id]!=0 then
call RemoveUnitFromStock(Q3I,IS[id])
endif
call AddUnitToStock(Q3I,UN[QII(WTI)],1,1)
set IS[id]=UN[QII(WTI)]
set V8I=null
set Q3I=null
endfunction
function Q5I takes nothing returns boolean
if X0==true then
return false
endif
call Q4I(CO[1])
call Q4I(CO[2])
call Q4I(CO[3])
call Q4I(CO[4])
call Q4I(CO[5])
call Q4I(DO[1])
call Q4I(DO[2])
call Q4I(DO[3])
call Q4I(DO[4])
call Q4I(DO[5])
return false
endfunction
function Q6I takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer id=(LoadInteger(ZY,(V0I),(34)))
local unit Q3I=CL0[id]
local unit V8I=L1[id]
local integer WTI=GetHeroLevel(V8I)
local integer i=0
call UnitRemoveAbility(Q3I,1093808213)
call AddUnitToStock(Q3I,UN[QII(WTI)],1,1)
set IS[id]=UN[QII(WTI)]
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function Q7I takes player p returns nothing
local integer id=GetPlayerId(p)
local unit Q3I=CL0[id]
local unit V8I=L1[id]
local integer WTI=GetHeroLevel(V8I)
local integer i=0
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call PUI(V8I)
loop
exitwhen i>59
call RemoveUnitFromStock(Q3I,UN[i])
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function Q6I))
call TriggerRegisterTimerEvent(t,240,false)
call SaveInteger(ZY,(V0I),(34),(id))
set IS[id]=1747993652
call UnitAddAbility(Q3I,1093808213)
call IssueImmediateOrder(Q3I,"fanofknives")
set V8I=null
set Q3I=null
set t=null
endfunction
function Q9I takes nothing returns nothing
set ZY=InitHashtable()
set M=CreateTimer()
set DS=Rect(-7040,-7680,7040,7168)
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.00)
call SuspendTimeOfDay(false)
call SetTimeOfDayScale(0.5)
call SetSkyModel("Environment\\Sky\\FoggedSky\\FoggedSky.mdl")
call SetCreepCampFilterState(true)
set E3="Normal Mode"
call TimerStart(M,99999.00,false,null)
set W3=AddWeatherEffect(bj_mapInitialPlayableArea,1380018290)
set V3=AddWeatherEffect(bj_mapInitialPlayableArea,1397645939)
set BS=AddWeatherEffect(bj_mapInitialPlayableArea,1280470369)
set CS=AddWeatherEffect(bj_mapInitialPlayableArea,1464822903)
set CO[0]=Player(0)
set CO[1]=Player(1)
set CO[2]=Player(2)
set CO[3]=Player(3)
set CO[4]=Player(4)
set CO[5]=Player(5)
set DO[0]=Player(6)
set DO[1]=Player(7)
set DO[2]=Player(8)
set DO[3]=Player(9)
set DO[4]=Player(10)
set DO[5]=Player(11)
set EO=Player(12)
set FO=Player(15)
call SetUnitPathing(PH,false)
call SetUnitPathing(QH,false)
call SetUnitPathing(BZ,false)
call SetUnitPathing(RH,false)
call SetUnitPathing(NH,false)
call NLI(NH,true)
call NLI(RH,true)
call NLI(BZ,true)
call NLI(QH,true)
call NLI(PH,true)
set U0=GetUnitLoc(NH)
set BI=GetUnitLoc(PH)
set CI=GetUnitLoc(BZ)
set DI=GetUnitLoc(RH)
set EI=GetUnitLoc(QH)
set O2=1093678663
set A2[1]=BI
set A2[2]=DI
set A2[3]=CI
set A2[4]=EI
set A2[5]=U0
set RI=GetRectCenter(N3)
set PI=GetRectCenter(S3)
set QI=GetRectCenter(M3)
set UI=GetRectCenter(I4)
set O1=GetRectCenter(O4)
set I1=GetRectCenter(U3)
set A1=GetRectCenter(D4)
set C1=GetRectCenter(C4)
set B1=GetRectCenter(B4)
set D1=GetRectCenter(Q3)
set F1=GetRectCenter(P3)
set E1=GetRectCenter(R3)
set G1=GetRectCenter(H4)
set H1=GetRectCenter(E4)
set K2=true
endfunction
function InitTrig_Map takes nothing returns nothing
call Q9I()
endfunction
function QAI takes nothing returns nothing
set ZS=GetUnitX(NZ)
set VS=GetUnitY(NZ)
set WS=GetUnitX(PZ)
set XS=GetUnitY(PZ)
set YS=GetUnitX(TZ)
set JS=GetUnitY(TZ)
set KS=GetUnitX(SZ)
set LS=GetUnitY(SZ)
set MS=GetUnitX(AW)
set SS=GetUnitY(AW)
set TS=GetUnitX(AZ)
set PS=GetUnitY(AZ)
set QS=GetUnitX(IZ)
set US=GetUnitY(IZ)
set IT=GetUnitX(TH)
set OT=GetUnitY(TH)
set AT=GetUnitX(CZ)
set BT=GetUnitY(CZ)
set CT=GetUnitX(QZ)
set DT=GetUnitY(QZ)
set CT=GetUnitX(QZ)
set DT=GetUnitY(QZ)
set ET=GetUnitX(BY)
set FT=GetUnitY(BY)
set GT=GetUnitX(LH)
set HT=GetUnitY(LH)
set ZT=GetUnitX(AV)
set VT=GetUnitY(AV)
set WT=GetUnitX(OV)
set XT=GetUnitY(OV)
set YT=GetUnitX(UZ)
set JT=GetUnitY(UZ)
set KT=GetUnitX(BV)
set LT=GetUnitY(BV)
set MT=GetUnitX(DZ)
set ST=GetUnitY(DZ)
set TT=GetUnitX(IV)
set RT=GetUnitY(IV)
set PT=GetUnitX(DV)
set QT=GetUnitY(DV)
set UT=GetUnitX(CV)
set IR=GetUnitY(CV)
set OR=GetUnitX(WV)
set BR=GetUnitY(WV)
set CR=GetUnitX(FV)
set DR=GetUnitY(FV)
set GR=GetUnitX(EV)
set HR=GetUnitY(EV)
set ZR=GetUnitX(GV)
set WR=GetUnitY(GV)
set XR=GetUnitX(VV)
set YR=GetUnitY(VV)
set JR=GetUnitX(ZV)
set KR=GetUnitY(ZV)
set LR=GetUnitX(HV)
set SR=GetUnitY(HV)
set RR=GetUnitX(YV)
set PR=GetUnitY(YV)
set QR=GetUnitX(XV)
set UR=GetUnitY(XV)
set IP=GetUnitX(LV)
set OP=GetUnitY(LV)
set BP=GetUnitX(KV)
set DP=GetUnitY(KV)
set EP=GetUnitX(MV)
set FP=GetUnitY(MV)
set GP=GetUnitX(NV)
set ZP=GetUnitY(NV)
set VP=GetUnitX(SV)
set WP=GetUnitY(SV)
set XP=GetUnitX(JV)
set YP=GetUnitY(JV)
set JP=GetUnitX(PV)
set KP=GetUnitY(PV)
set LP=GetUnitX(QV)
set MP=GetUnitY(QV)
set TP=GetUnitX(TV)
set RP=GetUnitY(TV)
set PP=GetUnitX(UV)
set QP=GetUnitY(UV)
set UP=GetUnitX(IW)
set IQ=GetUnitY(IW)
set OQ=GetUnitX(RZ)
set AQ=GetUnitY(RZ)
set BQ=GetUnitX(OW)
set CQ=GetUnitY(OW)
set DQ=GetUnitX(CW)
set EQ=GetUnitY(CW)
set FQ=GetUnitX(BW)
set GQ=GetUnitY(BW)
call RemoveUnit(DV)
call RemoveUnit(HV)
call RemoveUnit(GV)
call RemoveUnit(CV)
call RemoveUnit(YV)
call RemoveUnit(VV)
call RemoveUnit(WV)
call RemoveUnit(XV)
call RemoveUnit(ZV)
call RemoveUnit(RZ)
call RemoveUnit(OW)
call RemoveUnit(LH)
call RemoveUnit(FV)
call RemoveUnit(EV)
call RemoveUnit(LV)
call RemoveUnit(KV)
call RemoveUnit(MV)
call RemoveUnit(NV)
call RemoveUnit(SV)
call RemoveUnit(JV)
call RemoveUnit(PV)
call RemoveUnit(QV)
call RemoveUnit(TV)
call RemoveUnit(UV)
call RemoveUnit(IW)
call RemoveUnit(QZ)
call RemoveUnit(BY)
call RemoveUnit(CZ)
call RemoveUnit(TH)
call RemoveUnit(IZ)
call RemoveUnit(AZ)
call RemoveUnit(TZ)
call RemoveUnit(SZ)
call RemoveUnit(NZ)
call RemoveUnit(PZ)
call RemoveUnit(AW)
call RemoveUnit(AV)
call RemoveUnit(OV)
call RemoveUnit(UZ)
call RemoveUnit(BV)
call RemoveUnit(DZ)
call RemoveUnit(IV)
call RemoveUnit(CW)
call RemoveUnit(BW)
set HQ=CreateUnit(CO[0],1852206952,ZS,VS,270)
set ZQ=CreateUnit(FO,1749236021,WS,XS,270)
set VQ=CreateUnit(FO,1848652107,YS,JS,270)
set WQ=CreateUnit(FO,1849897784,KS,LS,270)
set XQ=CreateUnit(FO,1697657397,MS,SS,270)
set YQ=CreateUnit(FO,1848651862,TS,PS,270)
set JQ=CreateUnit(FO,1848651863,QS,US,270)
set KQ=CreateUnit(FO,1848651826,IT,OT,270)
set LQ=CreateUnit(FO,1848651864,AT,BT,270)
set MQ=CreateUnit(FO,1848651833,CT,DT,270)
set NQ=CreateUnit(FO,1848657989,ET,FT,270)
set SQ=CreateUnit(CO[0],1702129516,GT,HT,270)
set TQ=CreateUnit(CO[0],1697656914,ZT,VT,90)
set RQ=CreateUnit(CO[0],1697656914,WT,XT,45)
set PQ=CreateUnit(CO[0],1697656914,YT,JT,0)
set QQ=CreateUnit(CO[0],1697657137,KT,LT,90)
set UQ=CreateUnit(CO[0],1697657137,MT,ST,45)
set I00=CreateUnit(CO[0],1697657137,TT,RT,0)
set II0=CreateUnit(CO[0],1697656915,PT,QT,90)
set I10=CreateUnit(CO[0],1697656915,UT,IR,45)
set IO0=CreateUnit(CO[0],1697656915,OR,BR,0)
set I20=CreateUnit(CO[0],1697657145,CR,DR,45)
set I30=CreateUnit(CO[0],1697657145,GR,HR,45)
set I40=CreateUnit(CO[0],1700884333,ZR,WR,90)
set I50=CreateUnit(CO[0],1700884333,XR,YR,45)
set I60=CreateUnit(CO[0],1700884333,JR,KR,0)
set I70=CreateUnit(CO[0],1700884325,LR,SR,90)
set I80=CreateUnit(CO[0],1700884325,RR,PR,45)
set I90=CreateUnit(CO[0],1700884325,QR,UR,0)
set IA0=CreateUnit(CO[0],1701670775,IP,OP,270)
set IB0=CreateUnit(CO[0],1701670775,BP,DP,270)
set IC0=CreateUnit(CO[0],1701670775,EP,FP,270)
set ID0=CreateUnit(CO[0],1701670775,GP,ZP,270)
set IE0=CreateUnit(CO[0],1701670775,VP,WP,270)
set IF0=CreateUnit(CO[0],1701670775,XP,YP,270)
set IG0=CreateUnit(CO[0],1701670775,JP,KP,270)
set IH0=CreateUnit(CO[0],1701670775,LP,MP,270)
set IZ0=CreateUnit(CO[0],1701670775,TP,RP,270)
set IV0=CreateUnit(CO[0],1701670775,PP,QP,270)
set IW0=CreateUnit(CO[0],1701670775,UP,IQ,270)
set IX0=CreateUnit(CO[0],1700884343,OQ,AQ,270)
set IY0=CreateUnit(CO[0],1700884343,BQ,CQ,270)
set IJ0=CreateUnit(CO[0],1701080930,DQ,EQ,270)
set IK0=CreateUnit(CO[0],1701080930,FQ,GQ,270)
call SetPlayerAbilityAvailable(FO,1098018609,false)
call SetUnitColor(ZQ,FS)
call SetUnitColor(XQ,FS)
call SetUnitColor(WQ,HS)
call SetUnitColor(VQ,HS)
call SetUnitColor(YQ,HS)
call SetUnitColor(JQ,HS)
call SetUnitColor(KQ,HS)
call SetUnitColor(LQ,HS)
call SetUnitColor(MQ,HS)
call NLI(TQ,true)
call NLI(RQ,true)
call NLI(PQ,true)
call NLI(QQ,true)
call NLI(UQ,true)
call NLI(I00,true)
call NLI(II0,true)
call NLI(I10,true)
call NLI(IO0,true)
call NLI(I20,true)
call NLI(I30,true)
call NLI(SQ,true)
call NLI(I40,true)
call NLI(I50,true)
call NLI(I60,true)
call NLI(I70,true)
call NLI(I80,true)
call NLI(I90,true)
call NLI(IX0,true)
call NLI(IY0,true)
call NLI(IJ0,true)
call NLI(IK0,true)
call NLI(IA0,true)
call NLI(IB0,true)
call NLI(IC0,true)
call NLI(ID0,true)
call NLI(IE0,true)
call NLI(IF0,true)
call NLI(IG0,true)
call NLI(IH0,true)
call NLI(IZ0,true)
call NLI(IV0,true)
call NLI(IW0,true)
endfunction
function InitTrig_Sent_Buildings takes nothing returns nothing
call QAI()
endfunction
function QBI takes nothing returns nothing
set IN0=GetUnitX(IX)
set IS0=GetUnitY(IX)
set IT0=GetUnitX(LW)
set IR0=GetUnitY(LW)
set IP0=GetUnitX(MW)
set IQ0=GetUnitY(MW)
set IU0=GetUnitX(SW)
set O00=GetUnitY(SW)
set OI0=GetUnitX(JW)
set O10=GetUnitY(JW)
set OO0=GetUnitX(XW)
set O20=GetUnitY(XW)
set O30=GetUnitX(WW)
set O40=GetUnitY(WW)
set O50=GetUnitX(VW)
set O60=GetUnitY(VW)
set O70=GetUnitX(YW)
set O80=GetUnitY(YW)
set O90=GetUnitX(KW)
set OA0=GetUnitY(KW)
set OB0=GetUnitX(GZ)
set OC0=GetUnitY(GZ)
set OD0=GetUnitX(HX)
set OE0=GetUnitY(HX)
set OF0=GetUnitX(OZ)
set OG0=GetUnitY(OZ)
set OH0=GetUnitX(VX)
set OZ0=GetUnitY(VX)
set OV0=GetUnitX(FZ)
set OW0=GetUnitY(FZ)
set OX0=GetUnitX(XZ)
set OY0=GetUnitY(XZ)
set OJ0=GetUnitX(WX)
set OK0=GetUnitY(WX)
set OL0=GetUnitX(EZ)
set OM0=GetUnitY(EZ)
set ON0=GetUnitX(ZW)
set OS0=GetUnitY(ZW)
set OT0=GetUnitX(XX)
set OR0=GetUnitY(XX)
set OP0=GetUnitX(IY)
set OQ0=GetUnitY(IY)
set OU0=GetUnitX(YX)
set A00=GetUnitY(YX)
set AI0=GetUnitX(DX)
set A10=GetUnitY(DX)
set AO0=GetUnitX(HW)
set A20=GetUnitY(HW)
set A30=GetUnitX(CX)
set A40=GetUnitY(CX)
set A50=GetUnitX(UX)
set A60=GetUnitY(UX)
set A70=GetUnitX(GW)
set A80=GetUnitY(GW)
set A90=GetUnitX(ZX)
set AA0=GetUnitY(ZX)
set AB0=GetUnitX(QX)
set AC0=GetUnitY(QX)
set AD0=GetUnitX(NX)
set AE0=GetUnitY(NX)
set AF0=GetUnitX(KX)
set AG0=GetUnitY(KX)
set AH0=GetUnitX(RX)
set AZ0=GetUnitY(RX)
set AV0=GetUnitX(FW)
set AW0=GetUnitY(FW)
set AX0=GetUnitX(TX)
set AY0=GetUnitY(TX)
set AJ0=GetUnitX(JX)
set AK0=GetUnitY(JX)
set AL0=GetUnitX(LX)
set AM0=GetUnitY(LX)
set AN0=GetUnitX(SX)
set AS0=GetUnitY(SX)
set AT0=GetUnitX(OY)
set AR0=GetUnitY(OY)
set AP0=GetUnitX(DW)
set AQ0=GetUnitY(DW)
set AU0=GetUnitX(EX)
set B00=GetUnitY(EX)
set BI0=GetUnitX(EW)
set B10=GetUnitY(EW)
set BO0=GetUnitX(PX)
set B20=GetUnitY(PX)
set B30=GetUnitX(MX)
set B40=GetUnitY(MX)
set B50=GetUnitX(GX)
set B60=GetUnitY(GX)
call RemoveUnit(NX)
call RemoveUnit(KX)
call RemoveUnit(RX)
call RemoveUnit(FW)
call RemoveUnit(TX)
call RemoveUnit(JX)
call RemoveUnit(LX)
call RemoveUnit(SX)
call RemoveUnit(OY)
call RemoveUnit(DW)
call RemoveUnit(EX)
call RemoveUnit(OZ)
call RemoveUnit(XZ)
call RemoveUnit(ZW)
call RemoveUnit(VX)
call RemoveUnit(WX)
call RemoveUnit(XX)
call RemoveUnit(FZ)
call RemoveUnit(EZ)
call RemoveUnit(IY)
call RemoveUnit(YX)
call RemoveUnit(DX)
call RemoveUnit(HW)
call RemoveUnit(CX)
call RemoveUnit(UX)
call RemoveUnit(GW)
call RemoveUnit(ZX)
call RemoveUnit(QX)
call RemoveUnit(EW)
call RemoveUnit(PX)
call RemoveUnit(MX)
call RemoveUnit(GX)
call RemoveUnit(HX)
call RemoveUnit(XW)
call RemoveUnit(WW)
call RemoveUnit(VW)
call RemoveUnit(YW)
call RemoveUnit(KW)
call RemoveUnit(GZ)
call RemoveUnit(SW)
call RemoveUnit(MW)
call RemoveUnit(IX)
call RemoveUnit(LW)
call RemoveUnit(JW)
set B70=CreateUnit(DO[0],1852073580,IN0,IS0,270)
set B80=CreateUnit(FO,1849897781,IT0,IR0,270)
set B90=CreateUnit(FO,1848652107,IP0,IQ0,270)
set BA0=CreateUnit(FO,1849897784,IU0,O00,270)
set BB0=CreateUnit(FO,1966092369,OI0,O10,270)
set BC0=CreateUnit(FO,1848651862,OO0,O20,0)
set BD0=CreateUnit(FO,1848651863,O30,O40,0)
set BE0=CreateUnit(FO,1848651826,O50,O60,0)
set BF0=CreateUnit(FO,1848651864,O70,O80,0)
set BG0=CreateUnit(FO,1848651833,O90,OA0,0)
set BH0=CreateUnit(FO,1848657989,OB0,OC0,0)
set BZ0=CreateUnit(DO[0],1970172012,OD0,OE0,220)
set BV0=CreateUnit(DO[0],1966092365,OF0,OG0,270)
set BW0=CreateUnit(DO[0],1966092365,OH0,OZ0,270)
set BX0=CreateUnit(DO[0],1966092365,OV0,OW0,270)
set BY0=CreateUnit(DO[0],1966092356,OX0,OY0,270)
set BJ0=CreateUnit(DO[0],1966092356,OJ0,OK0,270)
set BK0=CreateUnit(DO[0],1966092356,OL0,OM0,270)
set BL0=CreateUnit(DO[0],1966092366,ON0,OS0,270)
set BM0=CreateUnit(DO[0],1966092366,OT0,OR0,270)
set BN0=CreateUnit(DO[0],1966092366,OP0,OQ0,270)
set BS0=CreateUnit(DO[0],1966092372,OU0,A00,270)
set BT0=CreateUnit(DO[0],1966092372,AI0,A10,270)
set BR0=CreateUnit(DO[0],1970496880,AO0,A20,270)
set BP0=CreateUnit(DO[0],1970496880,A30,A40,270)
set BQ0=CreateUnit(DO[0],1970496880,A50,A60,270)
set BU0=CreateUnit(DO[0],1970564964,A70,A80,270)
set C00=CreateUnit(DO[0],1970564964,A90,AA0,270)
set CI0=CreateUnit(DO[0],1970564964,AB0,AC0,270)
set C10=CreateUnit(DO[0],1970956647,AD0,AE0,270)
set CO0=CreateUnit(DO[0],1970956647,AF0,AG0,270)
set C20=CreateUnit(DO[0],1970956647,AH0,AZ0,270)
set C30=CreateUnit(DO[0],1970956647,AV0,AW0,270)
set C40=CreateUnit(DO[0],1970956647,AX0,AY0,270)
set C50=CreateUnit(DO[0],1970956647,AJ0,AK0,270)
set C60=CreateUnit(DO[0],1970956647,AL0,AM0,270)
set C70=CreateUnit(DO[0],1970956647,AN0,AS0,270)
set C80=CreateUnit(DO[0],1970956647,AT0,AR0,270)
set C90=CreateUnit(DO[0],1970956647,AP0,AQ0,270)
set CA0=CreateUnit(DO[0],1970956647,AU0,B00,270)
set CB0=CreateUnit(DO[0],1970495856,BI0,B10,270)
set CC0=CreateUnit(DO[0],1970495856,BO0,B20,270)
set CD0=CreateUnit(DO[0],1969385326,B30,B40,270)
set CE0=CreateUnit(DO[0],1969385326,B50,B60,270)
call SetUnitColor(B80,IL0)
call SetUnitColor(BA0,IM0)
call SetUnitColor(B90,IM0)
call SetUnitColor(BC0,IM0)
call SetUnitColor(BD0,IM0)
call SetUnitColor(BE0,IM0)
call SetUnitColor(BF0,IM0)
call SetUnitColor(BG0,IM0)
call NLI(BV0,true)
call NLI(BW0,true)
call NLI(BX0,true)
call NLI(BY0,true)
call NLI(BJ0,true)
call NLI(BK0,true)
call NLI(BL0,true)
call NLI(BM0,true)
call NLI(BN0,true)
call NLI(BS0,true)
call NLI(BT0,true)
call NLI(BZ0,true)
call NLI(BR0,true)
call NLI(BP0,true)
call NLI(BQ0,true)
call NLI(BU0,true)
call NLI(C00,true)
call NLI(CI0,true)
call NLI(CB0,true)
call NLI(CC0,true)
call NLI(CD0,true)
call NLI(CE0,true)
call NLI(C10,true)
call NLI(CO0,true)
call NLI(C20,true)
call NLI(C30,true)
call NLI(C40,true)
call NLI(C50,true)
call NLI(C60,true)
call NLI(C70,true)
call NLI(C80,true)
call NLI(C90,true)
call NLI(CA0,true)
endfunction
function InitTrig_Scourge_Buildings takes nothing returns nothing
call QBI()
endfunction
function QCI takes nothing returns nothing
local real QDI=GetUnitX(YZ)
local real QEI=GetUnitY(YZ)
local real QFI=GetUnitX(MZ)
local real QGI=GetUnitY(MZ)
local real QHI=GetUnitX(LZ)
local real QZI=GetUnitY(LZ)
local real QVI=GetUnitX(JZ)
local real QWI=GetUnitY(JZ)
local real QXI=GetUnitX(KZ)
local real QYI=GetUnitY(KZ)
local real QJI=GetUnitX(RW)
local real QKI=GetUnitY(RW)
local real QLI=GetUnitX(TW)
local real QMI=GetUnitY(TW)
local real QNI=GetUnitX(UW)
local real QSI=GetUnitY(UW)
local real QTI=GetUnitX(PW)
local real QRI=GetUnitY(PW)
local real QPI=GetUnitX(QW)
local real QQI=GetUnitY(QW)
local integer QUI=25
call RemoveUnit(YZ)
call RemoveUnit(MZ)
call RemoveUnit(LZ)
call RemoveUnit(JZ)
call RemoveUnit(KZ)
call RemoveUnit(RW)
call RemoveUnit(TW)
call RemoveUnit(UW)
call RemoveUnit(PW)
call RemoveUnit(QW)
set CF0=CreateUnit(Player(1),1852010352,QDI,QEI,270)
call UnitAddAbility(CF0,1093743665)
call ClearSelectionForPlayer(Player(1))
call SelectUnitAddForPlayer(CF0,Player(1))
if GetLocalPlayer()==Player(1)then
call SetUnitVertexColor(CF0,255,255,255,255)
else
call SetUnitVertexColor(CF0,255,255,255,QUI)
endif
set CG0=CreateUnit(Player(2),1852010352,QFI,QGI,270)
call UnitAddAbility(CG0,1093743665)
call ClearSelectionForPlayer(Player(2))
call SelectUnitAddForPlayer(CG0,Player(2))
if GetLocalPlayer()==Player(2)then
call SetUnitVertexColor(CG0,255,255,255,255)
else
call SetUnitVertexColor(CG0,255,255,255,QUI)
endif
set CH0=CreateUnit(Player(3),1852010352,QHI,QZI,270)
call UnitAddAbility(CH0,1093743665)
call ClearSelectionForPlayer(Player(3))
call SelectUnitAddForPlayer(CH0,Player(3))
if GetLocalPlayer()==Player(3)then
call SetUnitVertexColor(CH0,255,255,255,255)
else
call SetUnitVertexColor(CH0,255,255,255,QUI)
endif
set CZ0=CreateUnit(Player(4),1852010352,QVI,QWI,270)
call UnitAddAbility(CZ0,1093743665)
call ClearSelectionForPlayer(Player(4))
call SelectUnitAddForPlayer(CZ0,Player(4))
if GetLocalPlayer()==Player(4)then
call SetUnitVertexColor(CZ0,255,255,255,255)
else
call SetUnitVertexColor(CZ0,255,255,255,QUI)
endif
set CV0=CreateUnit(Player(5),1852010352,QXI,QYI,270)
call UnitAddAbility(CV0,1093743665)
call ClearSelectionForPlayer(Player(5))
call SelectUnitAddForPlayer(CV0,Player(5))
if GetLocalPlayer()==Player(5)then
call SetUnitVertexColor(CV0,255,255,255,255)
else
call SetUnitVertexColor(CV0,255,255,255,QUI)
endif
set CW0=CreateUnit(Player(7),1852010352,QJI,QKI,270)
call UnitAddAbility(CW0,1093752649)
call ClearSelectionForPlayer(Player(7))
call SelectUnitAddForPlayer(CW0,Player(7))
if GetLocalPlayer()==Player(7)then
call SetUnitVertexColor(CW0,255,255,255,255)
else
call SetUnitVertexColor(CW0,255,255,255,QUI)
endif
set CX0=CreateUnit(Player(8),1852010352,QLI,QMI,270)
call UnitAddAbility(CX0,1093752649)
call ClearSelectionForPlayer(Player(8))
call SelectUnitAddForPlayer(CX0,Player(8))
if GetLocalPlayer()==Player(8)then
call SetUnitVertexColor(CX0,255,255,255,255)
else
call SetUnitVertexColor(CX0,255,255,255,QUI)
endif
set CY0=CreateUnit(Player(9),1852010352,QNI,QSI,270)
call UnitAddAbility(CY0,1093752649)
call ClearSelectionForPlayer(Player(9))
call SelectUnitAddForPlayer(CY0,Player(9))
if GetLocalPlayer()==Player(9)then
call SetUnitVertexColor(CY0,255,255,255,255)
else
call SetUnitVertexColor(CY0,255,255,255,QUI)
endif
set CJ0=CreateUnit(Player(10),1852010352,QTI,QRI,270)
call UnitAddAbility(CJ0,1093752649)
call ClearSelectionForPlayer(Player(10))
call SelectUnitAddForPlayer(CJ0,Player(10))
if GetLocalPlayer()==Player(10)then
call SetUnitVertexColor(CJ0,255,255,255,255)
else
call SetUnitVertexColor(CJ0,255,255,255,QUI)
endif
set CK0=CreateUnit(Player(11),1852010352,QPI,QQI,270)
call UnitAddAbility(CK0,1093752649)
call ClearSelectionForPlayer(Player(11))
call SelectUnitAddForPlayer(CK0,Player(11))
if GetLocalPlayer()==Player(11)then
call SetUnitVertexColor(CK0,255,255,255,255)
else
call SetUnitVertexColor(CK0,255,255,255,QUI)
endif
set CL0[1]=CF0
set CL0[2]=CG0
set CL0[3]=CH0
set CL0[4]=CZ0
set CL0[5]=CV0
set CL0[7]=CW0
set CL0[8]=CX0
set CL0[9]=CY0
set CL0[10]=CJ0
set CL0[11]=CK0
set CM0[1]=GetUnitX(CF0)
set CM0[2]=GetUnitX(CG0)
set CM0[3]=GetUnitX(CH0)
set CM0[4]=GetUnitX(CZ0)
set CM0[5]=GetUnitX(CV0)
set CM0[7]=GetUnitX(CW0)
set CM0[8]=GetUnitX(CX0)
set CM0[9]=GetUnitX(CY0)
set CM0[10]=GetUnitX(CJ0)
set CM0[11]=GetUnitX(CK0)
set CN0[1]=GetUnitY(CF0)
set CN0[2]=GetUnitY(CG0)
set CN0[3]=GetUnitY(CH0)
set CN0[4]=GetUnitY(CZ0)
set CN0[5]=GetUnitY(CV0)
set CN0[7]=GetUnitY(CW0)
set CN0[8]=GetUnitY(CX0)
set CN0[9]=GetUnitY(CY0)
set CN0[10]=GetUnitY(CJ0)
set CN0[11]=GetUnitY(CK0)
endfunction
function InitTrig_Circle_of_Power takes nothing returns nothing
call QCI()
endfunction
function U0I takes nothing returns nothing
set CP0[GetPlayerId(CO[1])]=0
set CQ0[GetPlayerId(CO[1])]=66
set CU0[GetPlayerId(CO[1])]=255
set CP0[GetPlayerId(CO[2])]=48
set CQ0[GetPlayerId(CO[2])]=230
set CU0[GetPlayerId(CO[2])]=185
set CP0[GetPlayerId(CO[3])]=50
set CQ0[GetPlayerId(CO[3])]=0
set CU0[GetPlayerId(CO[3])]=129
set CP0[GetPlayerId(CO[4])]=255
set CQ0[GetPlayerId(CO[4])]=252
set CU0[GetPlayerId(CO[4])]=1
set CP0[GetPlayerId(CO[5])]=255
set CQ0[GetPlayerId(CO[5])]=50
set CU0[GetPlayerId(CO[5])]=0
set CP0[GetPlayerId(DO[1])]=220
set CQ0[GetPlayerId(DO[1])]=50
set CU0[GetPlayerId(DO[1])]=50
set CP0[GetPlayerId(DO[2])]=50
set CQ0[GetPlayerId(DO[2])]=50
set CU0[GetPlayerId(DO[2])]=50
set CP0[GetPlayerId(DO[3])]=75
set CQ0[GetPlayerId(DO[3])]=150
set CU0[GetPlayerId(DO[3])]=190
set CP0[GetPlayerId(DO[4])]=16
set CQ0[GetPlayerId(DO[4])]=60
set CU0[GetPlayerId(DO[4])]=18
set CP0[GetPlayerId(DO[5])]=68
set CQ0[GetPlayerId(DO[5])]=42
set CU0[GetPlayerId(DO[5])]=4
endfunction
function UII takes nothing returns nothing
local integer W5I
local integer W6I
local integer i
set C0[GetPlayerId(CO[0])]="|c00ff0303"
set C0[GetPlayerId(CO[1])]="|c000042ff"
set C0[GetPlayerId(CO[2])]="|c001ce6b9"
set C0[GetPlayerId(CO[3])]="|c00540081"
set C0[GetPlayerId(CO[4])]="|c00fffc01"
set C0[GetPlayerId(CO[5])]="|c00ff8000"
set C0[GetPlayerId(DO[0])]="|c0020c000"
set C0[GetPlayerId(DO[1])]="|c00e55bb0"
set C0[GetPlayerId(DO[2])]="|c00959697"
set C0[GetPlayerId(DO[3])]="|c007ebff1"
set C0[GetPlayerId(DO[4])]="|c00106246"
set C0[GetPlayerId(DO[5])]="|c004e2a04"
call SetPlayerColor(CO[0],PLAYER_COLOR_RED)
call SetPlayerColor(CO[1],PLAYER_COLOR_BLUE)
call SetPlayerColor(CO[2],PLAYER_COLOR_CYAN)
call SetPlayerColor(CO[3],PLAYER_COLOR_PURPLE)
call SetPlayerColor(CO[4],PLAYER_COLOR_YELLOW)
call SetPlayerColor(CO[5],PLAYER_COLOR_ORANGE)
call SetPlayerColor(DO[0],PLAYER_COLOR_GREEN)
call SetPlayerColor(DO[1],PLAYER_COLOR_PINK)
call SetPlayerColor(DO[2],PLAYER_COLOR_LIGHT_GRAY)
call SetPlayerColor(DO[3],PLAYER_COLOR_LIGHT_BLUE)
call SetPlayerColor(DO[4],PLAYER_COLOR_AQUA)
call SetPlayerColor(DO[5],PLAYER_COLOR_BROWN)
set W5I=1
set W6I=5
loop
if GetPlayerSlotState(CO[W5I])==PLAYER_SLOT_STATE_EMPTY then
call SetPlayerName(CO[W5I],GetObjectName(1848656968)+" "+I2S(W5I))
endif
if GetPlayerSlotState(DO[W5I])==PLAYER_SLOT_STATE_EMPTY then
call SetPlayerName(DO[W5I],GetObjectName(1848656968)+" "+I2S(5+W5I))
endif
set W5I=W5I+1
exitwhen W5I>W6I
endloop
endfunction
function U1I takes nothing returns nothing
local integer i
local integer QUI=125
call SetUnitOwner(CF0,CO[1],false)
call SetUnitOwner(CG0,CO[2],false)
call SetUnitOwner(CH0,CO[3],false)
call SetUnitOwner(CZ0,CO[4],false)
call SetUnitOwner(CV0,CO[5],false)
call SetUnitOwner(CW0,DO[1],false)
call SetUnitOwner(CX0,DO[2],false)
call SetUnitOwner(CY0,DO[3],false)
call SetUnitOwner(CJ0,DO[4],false)
call SetUnitOwner(CK0,DO[5],false)
set CL0[GetPlayerId(CO[1])]=CF0
set CL0[GetPlayerId(CO[2])]=CG0
set CL0[GetPlayerId(CO[3])]=CH0
set CL0[GetPlayerId(CO[4])]=CZ0
set CL0[GetPlayerId(CO[5])]=CV0
set CL0[GetPlayerId(DO[1])]=CW0
set CL0[GetPlayerId(DO[2])]=CX0
set CL0[GetPlayerId(DO[3])]=CY0
set CL0[GetPlayerId(DO[4])]=CJ0
set CL0[GetPlayerId(DO[5])]=CK0
set i=1
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=2
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=3
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=4
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=5
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=7
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=8
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=9
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=10
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set i=11
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,255)
else
call SetUnitVertexColor(CL0[GetPlayerId(Player(i))],255,255,255,QUI)
endif
set CM0[GetPlayerId(CO[1])]=GetUnitX(CL0[GetPlayerId(CO[1])])
set CM0[GetPlayerId(CO[2])]=GetUnitX(CL0[GetPlayerId(CO[2])])
set CM0[GetPlayerId(CO[3])]=GetUnitX(CL0[GetPlayerId(CO[3])])
set CM0[GetPlayerId(CO[4])]=GetUnitX(CL0[GetPlayerId(CO[4])])
set CM0[GetPlayerId(CO[5])]=GetUnitX(CL0[GetPlayerId(CO[5])])
set CM0[GetPlayerId(DO[1])]=GetUnitX(CL0[GetPlayerId(DO[1])])
set CM0[GetPlayerId(DO[2])]=GetUnitX(CL0[GetPlayerId(DO[2])])
set CM0[GetPlayerId(DO[3])]=GetUnitX(CL0[GetPlayerId(DO[3])])
set CM0[GetPlayerId(DO[4])]=GetUnitX(CL0[GetPlayerId(DO[4])])
set CM0[GetPlayerId(DO[5])]=GetUnitX(CL0[GetPlayerId(DO[5])])
set CN0[GetPlayerId(CO[1])]=GetUnitY(CL0[GetPlayerId(CO[1])])
set CN0[GetPlayerId(CO[2])]=GetUnitY(CL0[GetPlayerId(CO[2])])
set CN0[GetPlayerId(CO[3])]=GetUnitY(CL0[GetPlayerId(CO[3])])
set CN0[GetPlayerId(CO[4])]=GetUnitY(CL0[GetPlayerId(CO[4])])
set CN0[GetPlayerId(CO[5])]=GetUnitY(CL0[GetPlayerId(CO[5])])
set CN0[GetPlayerId(DO[1])]=GetUnitY(CL0[GetPlayerId(DO[1])])
set CN0[GetPlayerId(DO[2])]=GetUnitY(CL0[GetPlayerId(DO[2])])
set CN0[GetPlayerId(DO[3])]=GetUnitY(CL0[GetPlayerId(DO[3])])
set CN0[GetPlayerId(DO[4])]=GetUnitY(CL0[GetPlayerId(DO[4])])
set CN0[GetPlayerId(DO[5])]=GetUnitY(CL0[GetPlayerId(DO[5])])
endfunction
function UOI takes unit Y9I returns boolean
local integer ID=GetUnitTypeId(Y9I)
if ID==1848651862 or ID==1848651863 or ID==1848651826 or ID==1848651864 or ID==1849897784 or ID==1848652107 or ID==1848651833 then
return true
endif
return false
endfunction
function U2I takes nothing returns nothing
if(GetOwningPlayer(GetEnumUnit())==Player(0))then
call SetUnitOwner(GetEnumUnit(),CO[0],false)
if UOI(GetEnumUnit())==false then
call SetUnitColor(GetEnumUnit(),ConvertPlayerColor(0))
endif
else
call SetUnitOwner(GetEnumUnit(),DO[0],false)
if UOI(GetEnumUnit())==false then
call SetUnitColor(GetEnumUnit(),ConvertPlayerColor(6))
endif
endif
endfunction
function U3I takes nothing returns nothing
local group U4I=ZJI()
call GroupEnumUnitsOfPlayer(U4I,Player(0),Condition(function HRI))
call ForGroup(U4I,function U2I)
call GroupClear(U4I)
call GroupEnumUnitsOfPlayer(U4I,Player(6),Condition(function HRI))
call ForGroup(U4I,function U2I)
call ZYI(U4I)
endfunction
function U5I takes player p returns nothing
local integer i=0
local string U6I=GetPlayerName(p)
local integer PEI=StringLength(U6I)
local integer U7I=PEI
loop
exitwhen i==PEI
if SubString(U6I,i,i+1)=="("and SubString(U6I,i-1,i)==" "then
set U7I=i-1
call SetPlayerName(p,SubString(U6I,0,U7I))
set i=PEI
else
set i=i+1
endif
endloop
endfunction
function U8I takes nothing returns nothing
local integer U9I
local integer UAI
local integer W5I
local integer W6I
local integer x=0
local integer y=0
local integer i
local trigger t
local location UBI=GetRectCenter(S4)
local location UCI=GetRectCenter(T4)
if GetPlayerState(CO[0],PLAYER_STATE_OBSERVER)!=0 or GetPlayerState(DO[0],PLAYER_STATE_OBSERVER)!=0 then
set D2=true
set CO[0]=Player(13)
set DO[0]=Player(14)
set CS0=Player(0)
set CT0=Player(6)
call SetAllyColorFilterState(0)
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),DO[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),DO[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call ForceAddPlayer(AO,CO[0])
call ForceAddPlayer(AO,CO[1])
call ForceAddPlayer(AO,CO[2])
call ForceAddPlayer(AO,CO[3])
call ForceAddPlayer(AO,CO[4])
call ForceAddPlayer(AO,CO[5])
call ForceAddPlayer(BO,DO[0])
call ForceAddPlayer(BO,DO[1])
call ForceAddPlayer(BO,DO[2])
call ForceAddPlayer(BO,DO[3])
call ForceAddPlayer(BO,DO[4])
call ForceAddPlayer(BO,DO[5])
call ForceAddPlayer(Q2,CO[1])
call ForceAddPlayer(Q2,CO[2])
call ForceAddPlayer(Q2,CO[3])
call ForceAddPlayer(Q2,CO[4])
call ForceAddPlayer(Q2,CO[5])
call ForceAddPlayer(Q2,DO[1])
call ForceAddPlayer(Q2,DO[2])
call ForceAddPlayer(Q2,DO[3])
call ForceAddPlayer(Q2,DO[4])
call ForceAddPlayer(Q2,DO[5])
if D2 then
call ForceAddPlayer(Q2,Player(0))
call ForceAddPlayer(Q2,Player(6))
endif
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
if(x!=y)then
call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(0),true)
call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(1),true)
call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(2),true)
call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(3),true)
call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(4),true)
call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(5),true)
call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(DO[x],DO[y],ConvertAllianceType(0),true)
call SetPlayerAlliance(DO[x],DO[y],ConvertAllianceType(1),true)
call SetPlayerAlliance(DO[x],DO[y],ConvertAllianceType(2),true)
call SetPlayerAlliance(DO[x],DO[y],ConvertAllianceType(3),true)
call SetPlayerAlliance(DO[x],DO[y],ConvertAllianceType(4),true)
call SetPlayerAlliance(DO[x],DO[y],ConvertAllianceType(5),true)
call SetPlayerAlliance(DO[x],DO[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(DO[x],DO[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(CO[x],DO[y],ConvertAllianceType(0),false)
call SetPlayerAlliance(CO[x],DO[y],ConvertAllianceType(1),false)
call SetPlayerAlliance(CO[x],DO[y],ConvertAllianceType(2),false)
call SetPlayerAlliance(CO[x],DO[y],ConvertAllianceType(3),false)
call SetPlayerAlliance(CO[x],DO[y],ConvertAllianceType(4),false)
call SetPlayerAlliance(CO[x],DO[y],ConvertAllianceType(5),false)
call SetPlayerAlliance(CO[x],DO[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(CO[x],DO[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(DO[x],CO[y],ConvertAllianceType(0),false)
call SetPlayerAlliance(DO[x],CO[y],ConvertAllianceType(1),false)
call SetPlayerAlliance(DO[x],CO[y],ConvertAllianceType(2),false)
call SetPlayerAlliance(DO[x],CO[y],ConvertAllianceType(3),false)
call SetPlayerAlliance(DO[x],CO[y],ConvertAllianceType(4),false)
call SetPlayerAlliance(DO[x],CO[y],ConvertAllianceType(5),false)
call SetPlayerAlliance(DO[x],CO[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(DO[x],CO[y],ConvertAllianceType(7),false)
endif
set y=y+1
endloop
set y=0
set x=x+1
endloop
call SetPlayerTeam(CO[0],0)
call SetPlayerTeam(CO[1],0)
call SetPlayerTeam(CO[2],0)
call SetPlayerTeam(CO[3],0)
call SetPlayerTeam(CO[4],0)
call SetPlayerTeam(CO[5],0)
call SetPlayerTeam(DO[0],1)
call SetPlayerTeam(DO[1],1)
call SetPlayerTeam(DO[2],1)
call SetPlayerTeam(DO[3],1)
call SetPlayerTeam(DO[4],1)
call SetPlayerTeam(DO[5],1)
call SetPlayerName(CO[0],GetObjectName(1848652622))
call SetPlayerName(DO[0],GetObjectName(1848652623))
call SetPlayerName(EO,GetObjectName(1848657208))
call U1I()
if(CO[0]!=Player(0)or DO[0]!=Player(6))then
call U3I()
endif
call UII()
set UAI=W1I(AO)
set U9I=W1I(BO)
set W5I=1
set W6I=5
loop
exitwhen W5I>W6I
if(VTI(CO[W5I]))then
call SetPlayerState(CO[W5I],PLAYER_STATE_RESOURCE_GOLD,(4265/UAI))
call SetPlayerState(CO[W5I],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(VTI(DO[W5I]))then
call SetPlayerState(DO[W5I],PLAYER_STATE_RESOURCE_GOLD,(4265/U9I))
call SetPlayerState(DO[W5I],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set W5I=W5I+1
endloop
call SetPlayerHandicapXP(CO[1],1)
call SetPlayerHandicapXP(CO[2],1)
call SetPlayerHandicapXP(CO[3],1)
call SetPlayerHandicapXP(CO[4],1)
call SetPlayerHandicapXP(CO[5],1)
call SetPlayerHandicapXP(DO[1],1)
call SetPlayerHandicapXP(DO[2],1)
call SetPlayerHandicapXP(DO[3],1)
call SetPlayerHandicapXP(DO[4],1)
call SetPlayerHandicapXP(DO[5],1)
call SetPlayerState(CO[0],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(CO[1],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(CO[2],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(CO[3],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(CO[4],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(CO[5],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(DO[0],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(DO[1],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(DO[2],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(DO[3],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(DO[4],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(DO[5],PLAYER_STATE_GIVES_BOUNTY,1)
call XZI()
call U0I()
call U5I(CO[1])
call U5I(CO[2])
call U5I(CO[3])
call U5I(CO[4])
call U5I(CO[5])
call U5I(DO[1])
call U5I(DO[2])
call U5I(DO[3])
call U5I(DO[4])
call U5I(DO[5])
set x=1
loop
exitwhen x>5
if VTI(CO[x])then
call CreateUnitAtLoc(CO[x],1848651843,UBI,bj_UNIT_FACING)
endif
if VTI(DO[x])then
call CreateUnitAtLoc(DO[x],1848651843,UCI,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set i=0
loop
set CR0[i]=GetPlayerName(Player(i))
set i=i+1
exitwhen i==16
endloop
set UBI=null
set UCI=null
endfunction
function InitTrig_Player takes nothing returns nothing
call U8I()
endfunction
function UDI takes nothing returns nothing
local integer i=1
set D10=1
set D00[1]=1215723364
set DF0[1]=1747989338
set DI0[1]=1848654165
set DE0[1]="ReplaceableTextures\\CommandButtons\\BTNAvengingWatcher.blp"
call VVI(D00[1],"stand 4")
call VEI(D00[1],1.35,DF0[1])
set DG0[i]="Cheap items such as Bracers, Bottle and Magic Stick help give Vengeful Spirit what she needs to use Magic Missile and Swap safely and frequently."
set DH0[i]="By getting Magic Missile first, Vengeful Spirit should take advantage of this powerful stun by moving around the map instead of simply farming in a lane."
set DZ0[i]="It sometimes a good idea to save the Command Aura for later in the game when it will give your team more damage."
set DV0[i]="Wave of Terror is used to provide sight, giving you vision over an area or providing an opportunity to use Swap."
set DW0[i]="Swap will allow you to isolate a key hero on their team, sometimes your sacrifice is needed to win the battle and maybe even the game."
set i=i+1
set D00[2]=1215128178
set DF0[2]=1747989552
set DI0[2]=1848654145
set DE0[2]="ReplaceableTextures\\CommandButtons\\BTNAvatar.blp"
call VVI(D00[2],"attack slam alternate")
call VEI(D00[2],1.3,DF0[2])
set DG0[i]="When using Arc lightning, try to kill creeps and harass your opponent at the same time"
set DH0[i]="When ganking, you can use Lightning Bolt to ensure you will not lose sight of the target quickly."
set DZ0[i]="Lightning Bolt has a mini-stun that can be used against channeling spells and teleporting heroes."
set DV0[i]="Static Field is extremely powerful throughout the game: Use your spells as frequently as possible during fights."
set DW0[i]="Both Lightning Bolt and Wrath of the Thundergod reveal invisible units. Wrath will not damage invisible units."
set i=i+1
set D00[3]=1164799855
set DF0[3]=1747989553
set DI0[3]=1848654137
set DE0[3]="ReplaceableTextures\\CommandButtons\\BTNDryad.blp"
call VVI(D00[3],"stand 4")
call VEI(D00[3],1,DF0[3])
set DG0[i]="Enchant can be used on neutral creeps, meaning Enchantress can fight and use neutral creeps to engage enemy heroes effectively."
set DH0[i]="Nature's Attendants heals in an area AOE, so make sure you're far from creeps if you only want to heal yourself."
set DZ0[i]="Untouchable is great against physical attacks, but it does not help you survive huge burst damage nukes."
set DV0[i]="Impetus deals negligible damage at short range; switch to normal attacks if your target gets close to save mana."
set DW0[i]="Impetus deals pure damage, making it a great tool against heroes with a lot of resistance because it is not reduced."
set i=i+1
set D00[4]=1328558160
set DF0[4]=1747989554
set DI0[4]=1848654136
set DE0[4]="ReplaceableTextures\\CommandButtons\\BTNSeaElemental.blp"
call VVI(D00[4],"stand 2")
call VEI(D00[4],1,DF0[4])
set DG0[i]="Waveform is extremely powerful: Used for damage, chasing, escaping, it even allows you to dodge some spells by casting it at the right time."
set DH0[i]="Morph allows you to manipulate your Agility and Strength. Using the Strength Morph ('F') can act as a heal to help you survive between spells."
set DZ0[i]="Use Morph Replicate to take the location of your Replicated unit, making it great for a quick escape or simply as a free teleport."
set DV0[i]="Replicate is usually cast on the strongest ally or enemy to a fight. Certain hero passives or items will retain their effects, so Replicate those heroes."
set DW0[i]="Eye of Skadi and Linken's Sphere are two examples of Statistic-increasing items which give Morphling a lot of versatility and the ability to cast spells often."
set i=i+1
set D00[5]=1214931305
set DF0[5]=1747989555
set DI0[5]=1848654167
set DE0[5]="ReplaceableTextures\\CommandButtons\\BTNJaina.blp"
call VVI(D00[5],"stand victory")
call VEI(D00[5],1,DF0[5])
set DG0[i]="CM is a fragile support hero: Items like Bracers and Phase Boots will help her survive and deal with her low movement speed and armor."
set DH0[i]="A few points of Brilliance Aura early on provides your team with massive amounts of extra mana."
set DZ0[i]="Enemies hit by Frostbite can still cast spells, so don't take them lightly. "
set DV0[i]="Frostbite on non-hero units will last 10 seconds. This can be useful for killing neutral creeps that are level 5 or lower as well."
set DW0[i]="There are two items that can help you with the perfect Freezing Field: Placement with Kelen's Dagger and the spell immunity of Black King Bar."
set i=i+1
set D00[6]=1211117617
set DF0[6]=1747989556
set DI0[6]=1848654134
set DE0[6]="ReplaceableTextures\\CommandButtons\\BTNFelGuardBlue.tga"
call VVI(D00[6],"spell")
call VEI(D00[6],1,DF0[6])
set DG0[i]="Storm Bolt is a skill Sven should usually get early because of its damage and stun. "
set DH0[i]="Take advantage of Storm Bolt's area of effect by hitting additional enemy creeps and heroes whenever possible. "
set DZ0[i]="Try to be near your allies when you cast Warcry."
set DV0[i]="Only items that increase Strength will give you additional damage from effect of God's Strength."
set DW0[i]="Casting God's Strength before engaging in fights or casting Storm Bolt will allow you to get additional attacks on your opponent."
set i=i+1
set D00[7]=1212363833
set DF0[7]=1747989557
set DI0[7]=1848654160
set DE0[7]="ReplaceableTextures\\CommandButtons\\BTNSeaWitch.blp"
call VVI(D00[7],"spell")
call VEI(D00[7],1,DF0[7])
set DG0[i]="Opponents can attack and cast spells while Ensnared. However, it will work on magic immune units and reveal invisible heroes until the duration expires."
set DH0[i]="Mirror Image can be used defensively to avoid certain spells and dispel debuffs or channeling spells."
set DZ0[i]="Items that provide attribute bonuses improve your Image's power."
set DV0[i]="Enemies caught by Song of the Siren are invulnerable while asleep. Save your attacks and spells for after the spell expires."
set DW0[i]="Use Song of the Siren to isolate a magic immune or Cycloned hero (since they will not be affected), or to demolish buildings while enemies are asleep."
set i=i+1
set D00[8]=1333027688
set DF0[8]=1747989558
set DI0[8]=1848654148
set DE0[8]="ReplaceableTextures\\CommandButtons\\BTNTauren.blp"
call VVI(D00[8],"attack slam")
call VEI(D00[8],1.1,DF0[8])
set DG0[i]="Although he's a strength hero, Earthshaker (ES) actually plays more like a caster. Damage items are not very useful, but mana items can be nice."
set DH0[i]="A good cast of Fissure can isolate an opponent and cut off their escape. Practice often to achieve devastating results."
set DZ0[i]="Kelen's Dagger is an incredible item on ES, it allows you to quickly position yourself for the perfect Fissure or Echoslam."
set DV0[i]="The timing of your spells is important, by spacing them out properly you can keep a group of heroes disabled for several seconds."
set DW0[i]="Due to Raigor's ability to split up an enemy team and keep them stunned, he is great for initiating fights."
set i=i+1
set D00[9]=1212365106
set DF0[9]=1747989559
set DI0[9]=1848654168
set DE0[9]="ReplaceableTextures\\CommandButtons\\BTNSatyrTrickster.blp"
call VVI(D00[9],"stand 4")
call VEI(D00[9],1,DF0[9])
set DG0[i]="Getting at least one level of Blink Strike and Smoke Screen help you survive to level 6 when you can learn Permanent Invisibility."
set DH0[i]="Attacking or using your spells makes you visible: Consider the fade time of Permanent Invisibility before placing yourself at risk."
set DZ0[i]="Try to position Smoke Screen slightly behind enemies so that they spend more time in the cloud if they retreat."
set DV0[i]="Wraith Bands and later a Yasha or a Diffusal Blade will provide Rikimaru with cheap damage and chasing power for dispatching fragile heroes quickly."
set DW0[i]="Be careful of items that render you visible, such as Dust of Appearance, Sentry Wards or a Gem of True Sight."
set i=i+1
set D00[10]=1311781199
set DF0[10]=1747989560
set DI0[10]=1848654169
set DE0[10]="ReplaceableTextures\\CommandButtons\\BTNDruidOfTheClaw.blp"
call VVI(D00[10],"spell slam")
call VEI(D00[10],1,DF0[10])
call VEI(1848652083,1.1,DF0[10])
call VEI(1848652084,1.2,DF0[10])
call VEI(1848652085,1.3,DF0[10])
call VEI(1848651828,1,DF0[10])
call VEI(1848652088,1.1,DF0[10])
call VEI(1848652099,1.2,DF0[10])
call VEI(1848652103,1.3,DF0[10])
set DG0[i]="Spirit Bear is great to have in the lane and allowing Syllabear to fight neutral creeps because of its high HP and damage. "
set DH0[i]="Leveling Spirit Bear also gets various bonuses that make it very powerful for fighting heroes and towers so it is usually the first thing to max out."
set DZ0[i]="Your Spirit Bear might be able to handle a lot of damage, but if it dies you will also take damage (100 X its level). If you die, it dies as well."
set DV0[i]="Give items to your bear instead of Syllabear since it is usually engaging the enemy for you. Remember that stat-increasing items do not benefit the bear."
set DW0[i]="True Form gives Syllabear massive HP in his melee form, and Rabid and Battle Cry give both him and his Bear huge damage temporarily."
set i=i+1
set D00[11]=1211117620
set DF0[11]=1747989561
set DI0[11]=1848654170
set DE0[11]="ReplaceableTextures\\CommandButtons\\BTNSorceress.blp"
call VVI(D00[11],"stand victory")
call VEI(D00[11],1.2,DF0[11])
set DG0[i]="Light Strike Array is usually a good skill to get at level 1 because it provides you with a stun."
set DH0[i]="Target the ground in their direction instead of clicking on enemies to maximize Dragon Slave's long range."
set DZ0[i]="Cheap items will help Lina do her job: Bracers, Bottle, Phase Boots. A Point booster provides a nice HP/mana bonus for its cost."
set DV0[i]="Fiery Soul can help you maneuver better during a fight."
set DW0[i]="Try to stun as many heroes as possible during team fights"
set i=i+1
set D00[12]=1315070563
set DF0[12]=1747989569
set DI0[12]=1848656181
set DE0[12]="ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp"
call VVI(D00[12],"stand victory")
call VEI(D00[12],1,DF0[12])
set DG0[i]="Blade Fury is your most important skill early game for getting hero kills and avoiding magic damage."
set DH0[i]="Avoid follow-command (right-clicking) heroes with Blade Fury and instead click the ground near the opponent."
set DZ0[i]="Isolate enemy heroes before using Omnislash to prevent Juggernaut from attacking multiple targets and doing less damage."
set DV0[i]="Increasing your attack speed will give you 'extra attacks' during Omnislash, which are treated like a normal attack (in terms of damage and orb effects)."
set DW0[i]="Protect the 1-HP Healing Ward in battles and it can prolong and save the lives of your entire team."
set i=i+1
set D00[13]=1311781185
set DF0[13]=1747989570
set DI0[13]=1848654135
set DE0[13]="ReplaceableTextures\\CommandButtons\\BTNSpellBreaker.blp"
call VVI(D00[13],"stand ready")
call VEI(D00[13],1,DF0[13])
set DG0[i]="Glaives of Wisdom is useful to get early because it is useful for killing creeps and harassing your opponent manually ('W' and then the target)."
set DH0[i]="Curse of the Silent will cause an enemy to lose HP/mana if they do not choose to use their spells, or cannot use their spells (disabled, silenced, cooldown)."
set DZ0[i]="Last Word will prevent enemies from using multiple spells on you and your team at the same time provided you get close enough."
set DV0[i]="Global Silence can be used for initiating on enemies or saving allies early on. Try to pay attention to your teammates and enemies, even those not nearby."
set DW0[i]="Global Silence will also give your allies the opportunity in team battles to use their spells without repercussions - making it a powerful control spell."
set i=i+1
set D00[14]=1214344551
set DF0[14]=1747989571
set DI0[14]=1848654150
set DE0[14]="ReplaceableTextures\\CommandButtons\\BTNTreant.blp"
call VVI(D00[14],"stand 3")
call VEI(D00[14],0.72,DF0[14])
set DG0[i]="Thanks to his high base damage and survivability, Rooftrellen can usually obtain high-tier damage or caster items depending on the needs of the team."
set DH0[i]="Living armor adds significant defensive bonuses to an allied unit. It can even be cast on buildings to make them more resilient and provide regeneration."
set DZ0[i]="Nature's Guise is more than an escape tool, it can be used offensively as well. Use it to position allies and yourself near trees before surprising the enemy."
set DV0[i]="Use Eyes in the Forest whenever you can to gain vision of key locations such as the rune spots, neutral creep camps and Roshan."
set DW0[i]="Enemies under the effect of Overgrowth can still use spells and items, so make sure your team acts quickly while enemies remain immobilized."
set i=i+1
set D00[15]=1328558389
set DF0[15]=1747990352
set DI0[15]=1848657731
set DE0[15]="ReplaceableTextures\\CommandButtons\\BTNHeroTaurenChieftain.blp"
call VVI(D00[15],"stand victory")
call VEI(D00[15],1.1,DF0[15])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[16]=1214409837
set DF0[16]=1747989573
set DI0[16]=1848654151
set DE0[16]="ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.blp"
call VVI(D00[16],"stand victory")
call VEI(D00[16],1.2,DF0[16])
call VEI(1211119192,1.5,DF0[16])
call VEI(1211119193,1.5,DF0[16])
call VEI(1211119191,1.5,DF0[16])
set DG0[i]="Chakra Magic is an amazing support skill that you should cast on allies as often as possible if they have powerful spells."
set DH0[i]="Illuminate can be useful for earning gold or clearing creeps quickly, but channeling the blast can leave you vulnerable. "
set DZ0[i]="Mana Leak gives you the offensive: An enemy that moves loses his resources to cast spells, but if he does not, you can punish him with spells and attacks."
set DV0[i]="When in your Spirit Form, use Blinding Light to push enemies aside, and Recall for saving or calling on the assistance of an ally."
set DW0[i]="Keeper of the Light usually needs to stay back in fights and make use of the long range of his spells as a support hero when pushing and defending."
set i=i+1
set D00[17]=1215657064
set DF0[17]=1747989574
set DI0[17]=1848654166
set DE0[17]="ReplaceableTextures\\CommandButtons\\BTNFurbolgTracker.blp"
call VVI(D00[17],"attack spell")
call VEI(D00[17],1.2,DF0[17])
set DG0[i]="Get Fury Swipes and Overpower early. Fury Swipes is a very powerful orb effect on Ursa, replacing it with another is not advised."
set DH0[i]="Ursa is a very effective hero to fight neutral creeps with: Vladimir's Offering is a recommended item choice."
set DZ0[i]="Thanks to Enrage, Ursa usually purchases items that increase HP or Strength over Agility and Damage items."
set DV0[i]="It is a good idea to fight the two ancient camps when you need a quick boost in experience and gold. They are marked red in your minimap."
set DW0[i]="Certain items like Kelen's Dagger and Lothar's Edge will help both close the distance on enemies and take them by surprise."
set i=i+1
set D00[18]=1215130471
set DF0[18]=1747989575
set DI0[18]=1848656177
set DE0[18]="ReplaceableTextures\\CommandButtons\\BTNOgreMagi.blp"
call VVI(D00[18],"sleep")
call VEI(D00[18],1.4,DF0[18])
set DG0[i]="Buying a few Clarity Potions, Ring of Basilius or Bottle in the beginning of the game will help you cast a few more spells."
set DH0[i]="Fireblast provides a disable, Ignite provides a slow. Both deal damage, usually making them good skills early."
set DZ0[i]="Ogre Magi has a lot of survivability but he does need the ability to use his spells: An Arcane Ring might be the only item you will need all game."
set DV0[i]="Use Bloodlust to help teammates chase and escape enemies and on the hero capable of dealing the most damage before major battles."
set DW0[i]="Focus heroes that need to be shut down quickly with Fireblast: Hopefully they are repeatedly damaged and disabled by the effect of Multicast."
set i=i+1
set D00[19]=1316252014
set DF0[19]=1747989576
set DI0[19]=1848656193
set DE0[19]="ReplaceableTextures\\CommandButtons\\BTNHeroTinker.blp"
call VVI(D00[19],"stand 2")
call VEI(D00[19],1,DF0[19])
set DG0[i]="Laser and Missile give Tinker massive burst damage, so it is usually a good idea to get these two skills before Rearm, your ultimate."
set DH0[i]="Laser is not reduced by magic resistance or armor; you deal the number in the description exactly."
set DZ0[i]="You can use the active effects of items indefinitely with Rearm, which makes Boots of Travel a very powerful item for Tinker."
set DV0[i]="March of the Machines can be very useful for killing creeps quickly, its large area of effect makes it useful for pushing and team fights."
set DW0[i]="Level 1 of Rearm is generally enough until much later when you have the mana pool to support levels 2 and 3."
set i=i+1
set D00[20]=1164799603
set DF0[20]=1747989577
set DI0[20]=1848656180
set DE0[20]="ReplaceableTextures\\CommandButtons\\BTNFurion.blp"
call VVI(D00[20],"spell")
call VEI(D00[20],1.2,DF0[20])
set DG0[i]="Get Force of Nature early if you plan on leaving the lane to kill neutral creeps. Start with a Ring of Basilius to provide you with mana and armor."
set DH0[i]="Invest points in Teleportation, it gives you the mobility to be anywhere in the map: Cancel the spell if you change your mind by clicking 'S'."
set DZ0[i]="Sprout can be extremely useful offensively and defensively so get at least one point in it. Higher levels increase the duration but also the mana cost."
set DV0[i]="Teleportation shows allies and enemies where you intend to go, so if you want to surprise enemies, teleport where they cannot see."
set DW0[i]="Wrath of Nature is a great farming tool but also a powerful nuke on enemy heroes: Hit other units nearby to deal more damage to the intended target."
set i=i+1
set D00[21]=1332179560
set DF0[21]=1747989578
set DI0[21]=1848656179
set DE0[21]="ReplaceableTextures\\CommandButtons\\BTNHellScream.blp"
call VVI(D00[21],"stand victory")
call VEI(D00[21],1,DF0[21])
set DG0[i]="Get Spirit Lance and Doppelwalk first because Juxtapose is better when your illusions have more health and damage."
set DH0[i]="Beware of the high mana costs of your spells early game, especially for Doppelwalk, which can be an escape mechanism."
set DZ0[i]="Keep your opponents guessing by controlling your illusions created by Doppelwalk and Juxtapose."
set DV0[i]="Your illusions are amazing for pushing later on. Focus creeps and heroes first because illusions will not create new ones when attacking buildings."
set DW0[i]="Diffusal Blade and Manta Style are good choices of because they make his images much stronger by adding Agility directly."
set i=i+1
set D00[22]=1432580716
set DF0[22]=1747989579
set DI0[22]=1848656183
set DE0[22]="ReplaceableTextures\\CommandButtons\\BTNMountainGiant.blp"
call VVI(D00[22],"spell")
call VEI(D00[22],0.5,DF0[22])
set DG0[i]="Buy items that give you at least 3 Intelligence or 39 mana in the beginning of the game so that you can use both of your spells at level 2."
set DH0[i]="Avalanche and Toss should be the two spells you level first because they make you a force to be reckoned with early game."
set DZ0[i]="You can sometimes kill a hero outright by casting Avalanche on him, and then Tossing him on the Avalanche area of effect before the animation ends."
set DV0[i]="To ensure that you Toss your desired target, isolate him by making him the only one in the area of effect. Kelen's Dagger can help you with placement."
set DW0[i]="Tiny deals most of his damage through Avalanche and Toss, so the reduced attack speed from Grow is less important than the bonuses given."
set i=i+1
set D00[23]=1211117643
set DF0[23]=1747989580
set DI0[23]=1848656185
set DE0[23]="ReplaceableTextures\\CommandButtons\\BTNGoblinSapper.blp"
call VVI(D00[23],"stand 2")
call VEI(D00[23],1,DF0[23])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[24]=1211117633
set DF0[24]=1747989581
set DI0[24]=1848656194
set DE0[24]="ReplaceableTextures\\CommandButtons\\BTNHeroFarseer.blp"
call VVI(D00[24],"spell chain lightning")
call VEI(D00[24],1,DF0[24])
set DG0[i]="Chen can take control of high level neutral creeps with Holy Persuasion, making him extremely powerful at low levels even without items."
set DH0[i]="Neutrals with special abilities usually are more useful, try to find out what has a disable or slow as this will be much better for attacking heroes with."
set DZ0[i]="When preparing to attack from the forest, start with Penitence to slow enemies. Engage enemies from the side or from behind to catch them off guard."
set DV0[i]="Chen excels as a support hero, items that contribute to teammates such as Mekansm usually benefit the team more than damage items."
set DW0[i]="Hand of God is really useful early on for helping allies across the map. Later, it can be used to assist with pushing or defending."
set i=i+1
set D00[25]=1160785973
set DF0[25]=1747989582
set DI0[25]=1848656453
set DE0[25]="ReplaceableTextures\\CommandButtons\\BTNHuntress.blp"
call VVI(D00[25],"spell")
call VEI(D00[25],1,DF0[25])
set DG0[i]="The level of Lucent Beam determines the damage of Eclipse, making it the most important spell to get first. "
set DH0[i]="Moon Glaives can be useful early if you plan to kill neutral creeps. Lifesteal items like Helm of the Dominator can help you survive against neutral creeps."
set DZ0[i]="Try to cast Eclipse on enemy heroes when other units are not present to maximize the damage dealt to a single target. "
set DV0[i]="Later on with some attack speed, Lunar Blessing and Moon Glaives provide you with both massive damage and pushing power."
set DW0[i]="You should also consider items that allow you to land Eclipse successfully and increase your carry potential in battles, such as a Black King Bar."
set i=i+1
set D00[26]=1433631084
set DF0[26]=1747989583
set DI0[26]=1848656452
set DE0[26]="ReplaceableTextures\\CommandButtons\\BTNRifleman.blp"
call VVI(D00[26],"spell")
call VEI(D00[26],1.1,DF0[26])
set DG0[i]="Headshot will provide you with bonus damage and a short stun, making it useful for killing creeps and harassing with his incredible attack animation."
set DH0[i]="Sniper usually needs to find a combination of damage, attack speed and survivability that allow him to deal significant damage but survive to do so."
set DZ0[i]="Sniper is very fragile so he needs to maintain his range. Getting Take Aim and/or Shrapnel can help provide means of staying out of harm's way."
set DV0[i]="Shrapenl can also be used for slowing opponents, pushing or defending against large waves of creeps."
set DW0[i]="Try to use Assassinate to heavily damage an enemy before the fight even begins to give your team an advantage."
set i=i+1
set D00[27]=1311781174
set DF0[27]=1747989584
set DI0[27]=1848656184
set DE0[27]="ReplaceableTextures\\CommandButtons\\BTNForestTroll.blp"
call VVI(D00[27],"stand 3")
call VEI(D00[27],1.25,DF0[27])
call VEI(1311781442,1.25,DF0[27])
call VEI(1311781175,1.25,DF0[27])
set DG0[i]="Berserker's Rage gives Troll the option of melee combat, which gives him many powerful offensive bonuses at the cost of losing his ranged ability."
set DH0[i]="roll Warlord generally does not have to worry about attack speed thanks to his set of skills, go for damage or survivability items instead."
set DZ0[i]="Blind will prevent your opponents from landing all their attacks, making it harder from them to harass you or kill your creeps for gold."
set DV0[i]="Play defensively and fight neutral creeps too. Switch to melee form and it will allow you to have an easier time."
set DW0[i]="In team battles, it is vital that you cast Blind on the enemy hero that deals the most damage as this will greatly reduce their damage output."
set i=i+1
set D00[28]=1332898670
set DF0[28]=1747989815
set DI0[28]=1848654132
set DE0[28]="ReplaceableTextures\\CommandButtons\\BTNShadowHunter.blp"
call VVI(D00[28],"stand victory")
call VEI(D00[28],1,DF0[28])
set DG0[i]="At least one level of Shackles is advised early on for immobilizing opponents. Remember that it is channeling so it can be interrupted or broken by yourself."
set DH0[i]="Rhasta needs survivability and the mana to use his spells: Bracers, Null Talismans, Point Booster are examples of items that will help out a lot."
set DZ0[i]="Forked Lightning is your primary nuke and finisher due to its range and ability to hit multiple targets, so it more effective to get it earlier than later."
set DV0[i]="Use Shackles and Voodoo on enemy heroes when casting Mass Serpent Ward. You can even surround an enemy completely with the right timing."
set DW0[i]="Mass Serpent Wards can clear creeps quickly and deal a lot of damage over time to buildings, making them really useful for pushing and defending."
set i=i+1
set D00[29]=1328558406
set DF0[29]=1747993417
set DI0[29]=1848658771
set DE0[29]="ReplaceableTextures\\CommandButtons\\BTNWispHero.blp"
call VVI(D00[29],"stand 3")
call VEI(D00[29],1.30,DF0[29])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[30]=1315988077
set DF0[30]=1747989811
set DI0[30]=1848656207
set DE0[30]="ReplaceableTextures\\CommandButtons\\BTNPandarenBrewmaster.blp"
call VVI(D00[30],"stand ready")
call VEI(D00[30],1,DF0[30])
set DG0[i]="Thunder Clap is a great skill early game but you may need to invest in regeneration items such as a Bottle, Magic Stick, Ring of Basilius or Void Stone."
set DH0[i]="Drunken Haze works not only as a slow, but the miss chance reduces the damage severely for enemy heroes."
set DZ0[i]="Primal Split is not only for escaping: Once you master your three Pandas, Earth, Storm and Fire, you can use them offensively as well."
set DV0[i]="In Primal Split form, Mangix has two useful disables that can be used against enemies: Storm's Cyclone and Earth's Hurl Boulder."
set DW0[i]="Mangix usually initiates for the team, so survivability items are helpful, investing in a Kelen's Dagger to help land Thunder Clap is often a good idea."
set i=i+1
set D00[31]=1211117616
set DF0[31]=1747989592
set DI0[31]=1848656206
set DE0[31]="ReplaceableTextures\\CommandButtons\\BTNCentaurKhan.blp"
call VVI(D00[31],"stand 3")
call VEI(D00[31],1.75,DF0[31])
set DG0[i]="Return should be leveled if Centaur plans to fight neutral creeps, otherwise Double Edge is more useful in the lane."
set DH0[i]="Thanks to a high strength gain and the bonus strength from your ultimate, Centaur is a great at heading into battle first and receiving damage."
set DZ0[i]="A Hood of Defiance can prove to be just as useful as a Vanguard depending on whether the other team has a lot of magical spells."
set DV0[i]="Avoid putting yourself at risk after using Double Edge. You can use it to commit suicide if you are about to die to deny opponents experience and gold."
set DW0[i]="Kelen's Dagger is a great way of initiating on opponents and dealing with his slow casting animation of Stomp."
set i=i+1
set D00[32]=1315007329
set DF0[32]=1747989810
set DI0[32]=1848656205
set DE0[32]="ReplaceableTextures\\CommandButtons\\BTNakama.blp"
call VVI(D00[32],"stand var4")
call VEI(D00[32],1.2,DF0[32])
set DG0[i]="Shuriken Toss, Wind Walk and Track are much more useful than Jinada early on."
set DH0[i]="You're going to need mana regen: Bottle, Ring Of Basillius and Void Stone are examples of good options. "
set DZ0[i]="Use Wind Walk cautiously: If you wait until the cooldown is complete before breaking out of invisibility, you can cast it again immediately afterward."
set DV0[i]="Shuriken Toss and Wind Walk deal a lot of damage quickly: Search the map often for low HP heroes to hunt. "
set DW0[i]="Use Track on a nearby enemy hero to allow you and your allies to outrun them. Also cast it on nearly dead heroes for bonus gold."
set i=i+1
set D00[33]=1215063922
set DF0[33]=1747989590
set DI0[33]=1848656209
set DE0[33]="ReplaceableTextures\\CommandButtons\\BTNTheCaptain.blp"
call VVI(D00[33],"stand victory")
call VEI(D00[33],1.35,DF0[33])
call VEI(1211117638,1,DF0[33])
call VEI(1211117639,1,DF0[33])
call VEI(1211117637,1,DF0[33])
call POI(1211117639,255,255,200)
call POI(1211117638,255,255,200)
call POI(1211117639,255,200,200)
set DG0[i]="Breath Fire is a strong nuke and farming ability. However, against difficult opponents, Dragon's Blood is very useful."
set DH0[i]="Dragon Tail is the longest duration level 1 stun in the game. One point is usually sufficient until later on."
set DZ0[i]="Thanks to the defensive bonuses on Dragon's Blood, he can often focus on other damage items instead of increasing armor and regeneration."
set DV0[i]="Level 1 of Elder Dragon Form has a special passive called Corrosive Attack, which deals significant damage over time against towers."
set DW0[i]="The ranged splash damage and slow of his Level 3 ultimate makes him extremely powerful; getting to level 16 is very important for DK."
set i=i+1
set D00[34]=1164207469
set DF0[34]=1747989588
set DI0[34]=1848656210
set DE0[34]="ReplaceableTextures\\CommandButtons\\BTNHeroDemonHunter.blp"
call VVI(D00[34],"stand channel")
call VEI(D00[34],1,DF0[34])
set DG0[i]="Blink is very versatile, allowing you to chase, escape and even avoid certain spells. It is definitely worth at least one point in the beginning."
set DH0[i]="You can also use Mana Break to prevent enemy heroes from casting spells on you, but be careful since it forces you to get in melee range to attack."
set DZ0[i]="Spell Shield might be useful for reducing magic damage, but it does not prevent you from being disabled or status effects (slow, poison, etc.)."
set DV0[i]="Offensive items without orb effects such as a Battlefury, Monkey King Bar or Butterfly are usually desired over items that would override your Mana Break."
set DW0[i]="Sometimes survivability is just as important as damage, items such as Linken's Sphere or Manta Style offer a good mix of both offense and defense."
set i=i+1
set D00[35]=1315074670
set DF0[35]=1747989813
set DI0[35]=1848656204
set DE0[35]="ReplaceableTextures\\CommandButtons\\BTNBansheeRanger.tga"
call VVI(D00[35],"spell")
call VEI(D00[35],1,DF0[35])
set DG0[i]="Frost Arrows make Drow an excellent chaser early game and allow her to harass opponents safely by manually casting them (clicking 'R' and the target)."
set DH0[i]="An early level of Silence is great for preventing opponents from using multiple spells on you or your allies."
set DZ0[i]="Trueshot Aura and Marksmanship provide Traxex with plenty of damage even with just a few Wraith Bands and Power Treads."
set DV0[i]="Lothar's Edge provides damage and an escape mechanism, the latter of which can help Traxex survive."
set DW0[i]="Stay out of danger in major battles, only close in on your enemies when you are chasing and finishing off heroes near the end."
set i=i+1
set D00[36]=1214345830
set DF0[36]=1747989594
set DI0[36]=1848656211
set DE0[36]="ReplaceableTextures\\CommandButtons\\BTNArthas.blp"
call VVI(D00[36],"stand victory")
call VEI(D00[36],1.1,DF0[36])
set DG0[i]="Omniknight is a powerful support hero, items that provide mana such as Arcane Ring help make sure that you can use all your spells."
set DH0[i]="Purification can be used offensively and defensively: The unit you cast it on will deal damage around it, making it a powerful heal and nuke."
set DZ0[i]="Degen Aura is a very strong passive slow that is useful both to chase down enemy heroes and help you and your allies escape as well."
set DV0[i]="Repel is used to remove buffs from allies and enemies, and to prevent heroes with spells from being interrupted or damage dealers from being disabled."
set DW0[i]="Guardian Angel makes a team nearly impervious to physical damage and provides 25/sec HP regeneration, use this time wisely to survive or attack."
set i=i+1
set D00[37]=1211117636
set DF0[37]=1747989587
set DI0[37]=1848656203
set DE0[37]="ReplaceableTextures\\CommandButtons\\BTNBeastMaster.blp"
call VVI(D00[37],"spell slam")
call VEI(D00[37],1,DF0[37])
set DG0[i]="Endurance Aura is usually more useful later in the game when your team is fighting together, so get your other skills first."
set DH0[i]="Call of the Wild is very powerful: The boar gives damage and slow, while the hawk can provide vision over runes, neutral creeps and other key locations."
set DZ0[i]="Wild Axes are more useful early game and against heroes with less armor. Destroy trees with Wild Axes to surprise your opponents and for escaping."
set DV0[i]="Try casting Wild Axes behind the target to compensate for their movement. You can also manipulate their return path by moving Rexxar."
set DW0[i]="Find opportunities to use Roar whenever it is available. It is useful on heroes who have an escape mechanism or are immune to magic."
set i=i+1
set D00[38]=1160786000
set DF0[38]=1747989586
set DI0[38]=1848656202
set DE0[38]="ReplaceableTextures\\CommandButtons\\BTNChimaera.blp"
call VVI(D00[38],"stand 3")
call VEI(D00[38],1,DF0[38])
set DG0[i]="Dual Breath and Ice Path help to make Jakiro a strong offensive and defensive support hero. "
set DH0[i]="Jakiro can cast his spells immediately by clicking the nearby ground in the desired direction, sometimes this is more effective than clicking on the target."
set DZ0[i]="A level of Liquid Fire early on can be useful for deterring physical attacks "
set DV0[i]="Macropyre is a slow but powerful spell, combine it with other spells (yours or a teammate) to make sure the opponent is standing in the area of effect."
set DW0[i]="It is often a good idea to purchase useful support items like Mekansm or Shiva's Guard, two items that also increase his low armor significantly."
set i=i+1
set D00[39]=1311781193
set DF0[39]=1747989812
set DI0[39]=1848656201
set DE0[39]="ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp"
call VVI(D00[39],"stand 2")
call VEI(D00[39],1,DF0[39])
call VEI(1311781194,1,DF0[39])
call VEI(1311781192,1,DF0[39])
call VEI(1311781204,1,DF0[39])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[40]=1311781206
set DF0[40]=1747989591
set DI0[40]=1848656200
set DE0[40]="ReplaceableTextures\\CommandButtons\\BTNPriestessOfTheMoon.blp"
call VVI(D00[40],"stand ready")
call VEI(D00[40],1,DF0[40])
set DG0[i]="PotM can be extremely efficient and gank with just a few Wraith Bands, Boots of Speed and a Bottle."
set DH0[i]="Getting one level of Leap is usually sufficient early on until Starfall and Elune's Arrow are fully leveled."
set DZ0[i]="Land your Elune's Arrow by coordinating with allies and predicting enemy movements. You can even hit invisible or faraway targets with practice."
set DV0[i]="Starfall hits a second time for half damage to one random enemy within 200 range, get close if you can to deal bonus damage"
set DW0[i]="Moonlight Shadow can be used to initiate or escape but sometimes it can be learned later when PotM can use it without compromising her mana pool."
set i=i+1
set D00[41]=1211117651
set DF0[41]=1747989585
set DI0[41]=1848656212
set DE0[41]="ReplaceableTextures\\CommandButtons\\BTNStorm.blp"
call VVI(D00[41],"spell")
call VEI(D00[41],1,DF0[41])
set DG0[i]="Do not get Overload at level 1 since you do not have any spells to activate its effect with."
set DH0[i]="Choosing which ability to max first can be difficult, but generally at least one point in all three skills is a good idea."
set DZ0[i]="You have to wait 1 second after casting Static Remnant before it begins detecting nearby units for its explosion effect."
set DV0[i]="In addition to chasing and escaping, Lightning Ball can be used to dodge many spells with the right timing."
set DW0[i]="An item like Bloodstone is useful on Storm Spirit because the percentage-based mana cost of Lightning Ball makes regeneration an important asset."
set i=i+1
set D00[42]=1211117649
set DF0[42]=1747989593
set DI0[42]=1848656199
set DE0[42]="ReplaceableTextures\\CommandButtons\\BTNHeadHunterBerserker.blp"
call VVI(D00[42],"stand alternate 3")
call VEI(D00[42],1.15,DF0[42])
set DG0[i]="A level of Burning Spears early on is great for harassing enemy heroes. Use it manually by clicking 'R' then the desired target to avoid drawing focus fire."
set DH0[i]="Berserker's Blood makes you stronger as you take damage. The bonuses stop when you have 51% HP, so there is little point in taking additional damage."
set DZ0[i]="Life Break deals damage based on the remaining health of the target, making it strongest at the beginning of a fight. "
set DV0[i]="Inner Vitality heals more when you have less than 40% of your life, but avoid making the mistake of casting it too late in battles."
set DW0[i]="Survivability while in low health is important for Huskar: Consider items such as Armlet of Mordiggan, Black King Bar, or Heart of Tarrasque."
set i=i+1
set D00[43]=1160786265
set DF0[43]=1747989816
set DI0[43]=1848656198
set DE0[43]="ReplaceableTextures\\CommandButtons\\BTNAssassin.blp"
call VVI(D00[43],"stand victory")
call VEI(D00[43],1.2,DF0[43])
set DG0[i]="Refraction is a great way of surviving in a lane, just be careful not to get hit by creeps too much."
set DH0[i]="Meld starts cooling down when you click the spell, so you can hit him twice with it if you can predict your enemy's movements."
set DZ0[i]="Traps can be used for vision, most effectively in cramped areas like the end of ramps or at the rune powerup spots."
set DV0[i]="You can farm extremely fast by positioning yourself so that the Psi Blades splash on multiple creeps at once."
set DW0[i]="Placing a trap or two before engaging a fight can be a good idea, to cut off possible escape and/or chase routes."
set i=i+1
set D00[44]=1311780930
set DF0[44]=1747989808
set DI0[44]=1848656197
set DE0[44]="ReplaceableTextures\\CommandButtons\\BTNFaerieDragon.blp"
call VVI(D00[44],"attack spell")
call VEI(D00[44],1.1,DF0[44])
set DG0[i]="Illusory Orb and Jaunt are used to travel short distances quickly, but if you wait too long to Jaunt, you will lose the opportunity."
set DH0[i]="Puck is very fragile early game, some Bracers or Null Talismans and a level of Phase Shift can help you survive."
set DZ0[i]="Using Phase Shift manually instead of Autocast will prevent stray attacks from triggering it on Autocast. In general you will have better control of its use."
set DV0[i]="Waning Rift deals damage and silences, but forces you to be close enough. Use Illusory Orb or Dream Coil to help you land the spell on enemies."
set DW0[i]="Puck is a great initiator in fights who offers control of the battle with his spells, allowing allies to join the battle and use their spells or attacks safely."
set i=i+1
set D00[45]=1211117652
set DF0[45]=1747989809
set DI0[45]=1848656213
set DE0[45]="ReplaceableTextures\\CommandButtons\\BTNClockWerkGoblin.blp"
call VVI(D00[45],"Birth")
call VEI(D00[45],1.5,DF0[45])
set DG0[i]="You can use Rocket Flare for harassing and killing creeps early on. With the right timing, you can even fire at enemies across the map."
set DH0[i]="Power Cogs can be used to trap an enemy, push them away while draining mana, or as an escape mechanism since Rattletrap destroys Cogs in only 1 hit."
set DZ0[i]="Battery Assault adds a lot of damage and the stuns help you with chasing, use it when no other units are nearby for best results."
set DV0[i]="Hookshot's long range and high speed lets you reach enemies from out of sight. Follow up with your other spells quickly so your target cannot escape."
set DW0[i]="Rocket Flare also gives vision where it lands, making it very useful for scouting areas such as rune spots, neutral creeps, the enemy base."
set i=i+1
set D00[46]=1211119187
set DF0[46]=1747990100
set DI0[46]=1848657221
set DE0[46]="ReplaceableTextures\\CommandButtons\\BTNProudmoore.blp"
call VVI(D00[46],"stand victory")
call VEI(D00[46],1.1,DF0[46])
set DG0[i]="Tidebringer is extremely useful early game: Use the bonus damage for killing creeps and the cleave effect to harass opponents at the same time."
set DH0[i]="The bubble animation from Torrent can only be seen by your team so try to use this to your advantage."
set DZ0[i]="An ally's assistance or X Marks the Spot is a great way of making sure Torrent and Ghost Ship hit your opponent."
set DV0[i]="Escaping enemy heroes is easy by casting X Marks the Spot on them. It also prevents them from getting away."
set DW0[i]="The Ghost Ship will crash 1000 range from where you stand when you cast it. Keep your distance when you use it."
set i=i+1
set D00[47]=1311786311
set DF0[47]=1747990337
set DI0[47]=1848657224
set DE0[47]="ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"
call VVI(D00[47],"stand victory")
call VEI(D00[47],1.2,DF0[47])
set DG0[i]="Powershot deals significant damage, making it ideal to max first. Be sure not to fire through creeps if you want to deal maximum damage to your target."
set DH0[i]="An early level of Windrunner can provide you with a quick getaway and chasing tool."
set DZ0[i]="Shackleshot can either be used on your intended target to bind him to a nearby unit, or to bind the designated target located BEHIND the unit that you fired it at."
set DV0[i]="Focus Fire is also a powerful spell to use on buildings and Roshan."
set DW0[i]="As long as you do not attack another target, the effect of Focus Fire will stay on. Use your spells and active items to help you fire at your target."
set i=i+1
set D00[48]=1160786510
set DF0[48]=1747993411
set DI0[48]=1848658766
set DE0[48]="ReplaceableTextures\\CommandButtons\\BTNFlyingMachine.blp"
call VVI(D00[48],"stand 3")
call VEI(D00[48],1.10,DF0[48])
call VEI(1160786511,1.10,DF0[48])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[49]=1160786506
set DF0[49]=1747993412
set DI0[49]=1848658770
set DE0[49]="ReplaceableTextures\\CommandButtons\\BTNThrall.blp"
call VVI(D00[49],"stand 3")
call VEI(D00[49],1.10,DF0[49])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[50]=1160786505
set DF0[50]=1747993401
set DI0[50]=1848658763
set DE0[50]="ReplaceableTextures\\CommandButtons\\BTNTuskaarBrown.blp"
call VVI(D00[50],"stand 3")
call VEI(D00[50],1.00,DF0[50])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[51]=1160786502
set DF0[51]=1747993400
set DI0[51]=1848658765
set DE0[51]="ReplaceableTextures\\CommandButtons\\BTNPhoenix.blp"
call VVI(D00[51],"stand 3")
call VEI(D00[51],1.05,DF0[51])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[52]=1211117624
set DF0[52]=1747989589
set DI0[52]=1848656195
set DE0[52]="ReplaceableTextures\\CommandButtons\\BTNRazorback.blp"
call VVI(D00[52],"stand")
call VEI(D00[52],1.65,DF0[52])
set DG0[i]="Rigwarl is a known for punishing heroes that attack him and surviving for long times but he still needs armor, regeneration and hit points."
set DH0[i]="Quill spray doesn't initially deal much damage, but the stacking effect makes it very powerful over time in battles."
set DZ0[i]="Sometimes one level of Goo can be enough to slow down an enemy hero early game."
set DV0[i]="Rigwarl needs a fair amount of mana early-game, Ring of Basilius, Magic Stick or Bottle can boost his early offensive power immensely."
set DW0[i]="You can mitigate a lot of damage if you turn your hero at the right times thanks to your passive Bristleback. Play mind games on your opponent."
set i=i+1
set D00[53]=1160786520
set DF0[53]=1747993428
set DI0[53]=1848659019
set DE0[53]="ReplaceableTextures\\CommandButtons\\BTNMedivh.blp"
call VVI(D00[53],"stand 3")
call VEI(D00[53],1.15,DF0[53])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set DO0=53
set i=54
set D20=54
set D00[54]=1162032439
set DF0[54]=1747989828
set DI0[54]=1848656432
set DE0[54]="ReplaceableTextures\\CommandButtons\\BTNHydralisk.blp"
call VVI(D00[54],"attack")
call VEI(D00[54],1.0,DF0[54])
call POI(D00[54],150,200,255)
set DG0[i]="Venomous Gale is a spell that hits multiple opponents and slows them, making it very useful for getting early kills."
set DH0[i]="At least one level of Poison Sting is recommended early game for its slow effect."
set DZ0[i]="Bottle and Magic Stick will help deal with his low HP/mana, while Phase Boots are a cheap way to improve his chasing capabilities."
set DV0[i]="Wards are very useful for pushing a lane and killing neutral and enemy creeps, but you can also use it to provide vision."
set DW0[i]="Poison Nova deals a lot of damage but you have to combine it with other spells and attacks because it does not deal fatal damage (stops at 1 HP)."
set i=i+1
set D00[55]=1430466865
set DF0[55]=1747989829
set DI0[55]=1848656178
set DE0[55]="ReplaceableTextures\\CommandButtons\\BTNBlueMagnataur.tga"
call VVI(D00[55],"stand channel")
call VEI(D00[55],1,DF0[55])
call POI(D00[55],150,150,100)
set DG0[i]="Bottle and Perseverance help with early regeneration,. while purchasing Kelen's Dagger later will help you to land Reverse Polarity."
set DH0[i]="A few Attribute Bonus points can help you cast more spells. Save Mighty Swing for later levels when you have more damage."
set DZ0[i]="By targeting the ground where you want to fire Shockwave, you can hit both creeps and opponents and make use of its long range."
set DV0[i]="Magnus should cast Empower on himself and other allies with high damage before initiating team battles with his ultimate."
set DW0[i]="The cleave of Battlefury stacks directly with Mighty Swing, making it a good damage item especially if you already have a Perseverance."
set i=i+1
set D00[56]=1430468144
set DF0[56]=1747989830
set DI0[56]=1848656433
set DE0[56]="ReplaceableTextures\\CommandButtons\\BTNSpiritWyvern.blp"
call VVI(D00[56],"stand victory")
call VEI(D00[56],1,DF0[56])
call POI(D00[56],150,150,150)
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[57]=1429221441
set DF0[57]=1747989831
set DI0[57]=1848656434
set DE0[57]="ReplaceableTextures\\CommandButtons\\BTNChaosWarlord.blp"
call VVI(D00[57],"stand victory")
call VEI(D00[57],1.05,DF0[57])
set DG0[i]="Chaos Bolt and Blink Strike are active abilities that are more useful in the lane and for killing opponents than Critical Strike."
set DH0[i]="Chaos Bolt is a disable that switches between average and extremely powerful, the sooner you have max out this spell, the better."
set DZ0[i]="His high natural movement speed (325 - the highest in the game) and Blink Strike make him very difficult for opponents to outrun or chase him."
set DV0[i]="If you Blink Strike and then use Chaos Bolt, you can spend more time hitting opponents and less time waiting for his slow casting animation. "
set DW0[i]="Make Nessaj and Phantasm stronger by buying Strength items like Armlet of Mordiggan (when activated) and Heart of Tarrasque."
set i=i+1
set D00[58]=1429221432
set DF0[58]=1747989832
set DI0[58]=1848656435
set DE0[58]="ReplaceableTextures\\CommandButtons\\BTNKiljaedin.blp"
call VVI(D00[58],"spell")
call VEI(D00[58],1.2,DF0[58])
call VEI(1160786229,1,DF0[58])
call POI(D00[58],255,75,255)
set DG0[i]="If you want to neutral creeps, start with Summon Wolves and a Ring of Basilius, which can be used to make Vladmir's Offering later."
set DH0[i]="Spirit Wolves gain invisibility at level 4, making them difficult to kill and easy to harass heroes with in the lane."
set DZ0[i]="Feral Heart make you and your wolves stronger overall, while Howl is an offensive spell used before engaging the enemy."
set DV0[i]="Shapeshift makes you incredibly powerful and gives you max movement speed. Avoid being blocked by your wolves when chasing."
set DW0[i]="A Black King Bar will prevent enemies from disabling you, making you very fearsome and almost unstoppable when attacking heroes."
set i=i+1
set D00[59]=1429221430
set DF0[59]=1747989833
set DI0[59]=1848656436
set DE0[59]="ReplaceableTextures\\CommandButtons\\BTNSpiderBlack.blp"
call VVI(D00[59],"walk")
call VEI(D00[59],1.36,DF0[59])
set DG0[i]="At least one level in Spin Web early game will increase your survivability greatly. Remember that attacking/using spells will cause you to break invisibility."
set DH0[i]="Spawn Spiderlings is both a nuke and pushing spell, so getting items like a Ring of Basilius will provide you with both mana and armor for pushing."
set DZ0[i]="Incapacitating Bite makes it very difficult for enemies to get away from you, great for chasing and slowing opponents temporarily for your allies."
set DV0[i]="Try to space out your webs with least 2 seconds of walking distance so that you can benefit from its bonuses on as much ground as possible."
set DW0[i]="With the damage and lifesteal from Insatiable Hunger, sometimes it is best to get items that will prevent you from being disabled, such as a Black King Bar."
set i=i+1
set D00[60]=1165451634
set DF0[60]=1747989834
set DI0[60]=1848656437
set DE0[60]="ReplaceableTextures\\CommandButtons\\BTNHeroWarden.blp"
call VVI(D00[60],"spell slam")
call VEI(D00[60],1,DF0[60])
set DG0[i]="Stifling Dagger is used for creep-killing and slowing opponents; prevent enemies from escaping by using it with Blink Strike."
set DH0[i]="Try to Blink Strike to a nearby allied or enemy unit to make a quick escape when caught in a defensive situation. "
set DZ0[i]="Be cautious when entering battles with Blink Strike, you could be caught outnumbered or disabled without your escape mechanism."
set DV0[i]="Blur can sometimes allow you to surprise opponents if they aren't paying attention."
set DW0[i]="Items like Battlefury are useful, but getting a Black King Bar or a Satanic afterward will help you survive long enough to deal damage."
set i=i+1
set D00[61]=1211117654
set DF0[61]=1747989835
set DI0[61]=1848656438
set DE0[61]="ReplaceableTextures\\CommandButtons\\BTNNagaSeaWitch.blp"
call VVI(D00[61],"stand ready")
call VEI(D00[61],1,DF0[61])
call VEI(1211119684,1,DF0[61])
call VEI(1211119683,1,DF0[61])
call VEI(1211119668,1,DF0[61])
call VEI(1211119682,1,DF0[61])
set DG0[i]="Mystic Snake is a smart choice to have early game: Its damage and mana drain makes it great for harassing and offsetting its own mana cost."
set DH0[i]="Mana Shield will increase your survivability drastically. Use it wisely or it can also leave you with no mana for your other spells."
set DZ0[i]="Using Split Shot allows you to attack multiple units, but the extra arrows from Split Shot do not gain the properties of orb effects."
set DV0[i]="Stone Gaze is an ultimate that is used to slow opponents and remove their buffs, making it easy to escape or attack the purged enemies."
set DW0[i]="Items that increase statistics and regeneration like Linkens Sphere will always be a good choice because of Mana Shield."
set i=i+1
set D00[62]=1432646245
set DF0[62]=1747989836
set DI0[62]=1848656439
set DE0[62]="ReplaceableTextures\\CommandButtons\\BTNTichondrius.blp"
call VVI(D00[62],"spell slam")
call VEI(D00[62],1,DF0[62])
set DG0[i]="Night Stalker may be passive during the day, but at night his spells make him much more powerful and great for hunting heroes down."
set DH0[i]="Void is your primary source of damage early game and can be used to interrupt spells and teleports with its mini-stun."
set DZ0[i]="While Hunter in the Night does nothing during the day, get it so that during nighttime it will give you massive movement and attack speed."
set DV0[i]="Use Crippling Fear when you are hunting heroes so that they cannot disable or slow you while you are chasing them."
set DW0[i]="Since Darkness will pause time when activated, casting it at night whenever it is on cooldown will extend the total nighttime."
set i=i+1
set D00[63]=1313026096
set DF0[63]=1747989837
set DI0[63]=1848656688
set DE0[63]="ReplaceableTextures\\CommandButtons\\BTNSkeletonArcher.blp"
call VVI(D00[63],"stand victory")
call VEI(D00[63],1.8,DF0[63])
call POI(D00[63],100,125,100)
set DG0[i]="Skeleton King is a hero who is known for his ability to reincarnate if focused upon and dealing a lot of damage if he is ignored by opponents. "
set DH0[i]="Hellfire Blast is a great spell for the early laning phase and a few levels of Attribute Bonus can give you stat points for additional stuns."
set DZ0[i]="Critical Strike is generally preferred over Vampiric Aura because its lifesteal is not very effective earlier when Leoric needs more damage."
set DV0[i]="Make sure you have enough mana for Hellfire Blasts and especially Reincarnation. Buying a Magic Stick and/or a Bottle can pay off nicely."
set DW0[i]="Get cheaper damage items like Armlet of Mordiggan and Desolator. A Black King Bar will allow you to dish out damage without being disabled."
set i=i+1
set D00[64]=1430467634
set DF0[64]=1747989838
set DI0[64]=1848656470
set DE0[64]="ReplaceableTextures\\CommandButtons\\BTNDoomGuard.blp"
call VVI(D00[64],"stand victory")
call VEI(D00[64],1.1,DF0[64])
set DG0[i]="Lucifer can obtain gold very quickly thanks to Devour, so getting regeneration items like Perseverance will help him to cast spells and survive in the lane."
set DH0[i]="Devour deals 20 damage per second, so consume creeps with low HP remaining so you can finish digesting the enemy quickly."
set DZ0[i]="Use the command -ma to find your opponents' level for potential LVL? Death targets. Its mini-stun will also interrupt channeling spells and teleports."
set DV0[i]="Doom is usually used in conjunction with LVL? Death for killing enemy heroes; you can also use it on heroes to silence their spells."
set DW0[i]="When chasing or escaping with Scorched Earth, cast it in front of you so that you will experience the movement speed bonuses for a longer period of time."
set i=i+1
set D00[65]=1429221424
set DF0[65]=1747989839
set DI0[65]=1848656469
set DE0[65]="ReplaceableTextures\\CommandButtons\\BTNHeroCryptLord.tga"
call VVI(D00[65],"spell throw")
call VEI(D00[65],0.8,DF0[65])
set DG0[i]="Effective use of Impale and Mana Burn early game requires you to purchase some Null Talismans or Bracers and Bottle."
set DH0[i]="Mana Burn is a devastating spell to have in the lane, force opponents to play defensively by preventing them from casting spells."
set DZ0[i]="Unlike other Agility heroes, Anub'arak is a caster. Getting items like Dagon can be more useful than purchasing damage items."
set DV0[i]="Vendetta is a good initiating spell for surprising opponents. Cast it far away so that they cannot hear its sound effect upon activation."
set DW0[i]="Be careful when using Vendetta against multiple opponents and going near towers where they can see you while you are invisible."
set i=i+1
set D00[66]=1430468913
set DF0[66]=1747989840
set DI0[66]=1848656689
set DE0[66]="ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.tga"
call VVI(D00[66],"spell")
call VEI(D00[66],1,DF0[66])
call POI(D00[66],175,75,200)
set DG0[i]="Slithereen Crush requires good positioning, so do your best to stand next to the hero you are trying to stun."
set DH0[i]="Sprint is a great spell for both chasing and escaping but be careful when using it because you will take bonus damage."
set DZ0[i]="In addition to lowering armor, Amplify Damage provides vision of enemies, even heroes that have the ability to become invisible."
set DV0[i]="Bash is usually more effective later in the game when you have more items like Armlet of Mordiggan."
set DW0[i]="Slardar's role in battles is to initiate with Slithereen Crush and focus an enemy with Bash and Amplify Damage. Pick off escapees with Sprint."
set i=i+1
set D00[67]=1430466609
set DF0[67]=1747989841
set DI0[67]=1848656690
set DE0[67]="ReplaceableTextures\\CommandButtons\\BTNBlueDemoness.tga"
call VVI(D00[67],"spell slam")
call VEI(D00[67],1.3,DF0[67])
set DG0[i]="Blink provides you with an escape mechanism and spell dodge but on higher levels it becomes a powerful chasing tool as well."
set DH0[i]="Scream of Pain is used for killing creeps and harassing opponents, making it more useful than Shadow Strike early game."
set DZ0[i]="Try to hit as many targets as possible with Sonic Wave by targeting the ground instead of on an enemy hero directly."
set DV0[i]="Shadow Strike does decent damage but its primary use is for the slow it provides for chasing and outrunning opponents."
set DW0[i]="Her spell reliance, mobility and survivability allows her to buy expensive Intelligence items such as a Guinsoo's Scythe of Vyse."
set i=i+1
set D00[68]=1160785972
set DF0[68]=1747989842
set DI0[68]=1848656471
set DE0[68]="ReplaceableTextures\\CommandButtons\\BTNSkeletonMage.blp"
call VVI(D00[68],"stand victory")
call VEI(D00[68],1,DF0[68])
set DG0[i]="Searing Arrows provide damage for last hitting creeps and harassing enemy heroes by using it manually by clicking 'R' followed by the designated target."
set DH0[i]="Wind Walk is commonly used for chasing and escaping but the invisibility and movement speed can help you avoid specific spells with the right timing."
set DZ0[i]="Cast Death Pact on enemy or neutral creeps instead of allied units whenever possible because it will give you the gold for killing the unit."
set DV0[i]="Regeneration items like Orchid Malevolence or a Linkens Sphere will allow liberal use of his abilities in battle and help him against spellcasters and nukers."
set DW0[i]="Strafe is usually gotten later, but combined with Searing Arrows, Clinkz can deal a lot of damage quickly, powerful against enemy heroes and buildings."
set i=i+1
set D00[69]=1162032181
set DF0[69]=1747989843
set DI0[69]=1848656467
set DE0[69]="ReplaceableTextures\\CommandButtons\\BTNFacelessOne.blp"
call VVI(D00[69],"spell slam")
call VEI(D00[69],1.3,DF0[69])
call POI(D00[69],0,255,150)
set DG0[i]="Time Walk is your escaping and chasing skill, but it will allow you to avoid spells and damage since you are invulnerable during the animation."
set DH0[i]="Get Backtrack early game if you need to play defensively, while Time Lock will allow you to be a little more aggressive."
set DZ0[i]="Since Darkterror is so fragile, enter battles by using Time Walk and then cast Chronosphere to prevent yourself from being disabled or killed otherwise."
set DV0[i]="Chronosphere affects all units that are not controlled by you, including both allies and enemies. Avoid hitting teammates or it could cost them their lives."
set DW0[i]="Items such as Power Treads and Butterfly will give both damage and attack speed, which is useful if Void wants to repetitively stun with Time Lock."
set i=i+1
set D00[70]=1162032951
set DF0[70]=1747989844
set DI0[70]=1848656466
set DE0[70]="ReplaceableTextures\\CommandButtons\\BTNNetherDragon.blp"
call VVI(D00[70],"spell slam")
call VEI(D00[70],1.2,DF0[70])
call POI(D00[70],75,255,25)
set DG0[i]="Poison Attack allows you to harass an opponent and permanently chase them thanks to a 0 cooldown starting at level 3."
set DH0[i]="Prevent creeps and towers from attacking you by casting Poison Attack manually by clicking 'C' and then the designated target."
set DZ0[i]="Neurotoxin will add bonus damage, useful early for getting the last hit on creeps and also for dealing damage to heroes as well."
set DV0[i]="Early HP and movement speed items like Phase Boots or a Point/Vitality Booster can really make a difference."
set DW0[i]="Sometimes it is wise to invest in a Lothar's Edge or Kelen's Dagger to provide you with the ability to get in and out of combat safely."
set i=i+1
set D00[71]=1160785970
set DF0[71]=1747989845
set DI0[71]=1848656473
set DE0[71]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"
call VVI(D00[71],"spell")
call VEI(D00[71],1,DF0[71])
set DG0[i]="Use your attack range to help gauge how far opponents need to be for Plasma Field to deal the most damage."
set DH0[i]="Unstable Current will slow opponents who cast spells on you and could be useful to help prevent yourself from being killed."
set DZ0[i]="Static Link is powerful if you can stay within the range of opponents - getting Unstable Current can sometimes help with that."
set DV0[i]="Storm Seeker strikes the target with the lowest health, so use it after creeps have died or when chasing a solitary target."
set DW0[i]="Consider increasing your HP along with damage when purchasing items."
set i=i+1
set D00[72]=1429221443
set DF0[72]=1747989846
set DI0[72]=1848656465
set DE0[72]="ReplaceableTextures\\CommandButtons\\BTNGhoul.blp"
call VVI(D00[72],"victory")
call VEI(D00[72],1.5,DF0[72])
call POI(D00[72],100,100,100)
set DG0[i]="Open Wounds is a powerful slow that nearly stops enemies in their tracks; it also lets you and your allies heal for attacking that unit.Open Wounds is a powerful slow that nearly stops enemies in their tracks; it also lets you and your allies heal for attacking that unit."
set DH0[i]="Feast deals percentage-based damage, which is useful against heroes with high HP and lets Naix fight neutral creeps with ease."
set DZ0[i]="Rage can be used to avoid spells and to prevent opponents from disabling you while you are attacking them or trying to escape from them."
set DV0[i]="Infest can be used for escaping, surprising your opponents, to neutral, or to just gain significant health quickly when necessary."
set DW0[i]="Thanks to your physical damage and ability to steal life, Armlet of Mordiggan or Desolator are both solid choices for high-tier items."
set i=i+1
set D00[73]=1211117640
set DF0[73]=1747989847
set DI0[73]=1848656468
set DE0[73]="ReplaceableTextures\\CommandButtons\\BTNPugna.BLP"
call VVI(D00[73],"stand ready")
call VEI(D00[73],1,DF0[73])
set DG0[i]="Nether Blast gives you an incredible skill for killing creeps, harassing heroes and pushing. Use it to score the killing blow to a tower."
set DH0[i]="Decrepify can be used on opponents either to increase spell damage from you and your allies or to prevent them from attacking."
set DZ0[i]="Nether Ward will drain mana and punish opponents for using spells. Just remember to cast it where opponents cannot destroy it easily."
set DV0[i]="Aghanim's Scepter, Linkens Sphere and Bloodstone are examples of items that offer survivability while improving his spellcasting abilities."
set DW0[i]="Life Drain deals a lot of damage unless opponents disable you or run away. With an Aghanim's Scepter, its cooldown becomes 0."
set i=i+1
set D00[74]=1332109682
set DF0[74]=1747989848
set DI0[74]=1848656464
set DE0[74]="ReplaceableTextures\\CommandButtons\\BTNSeaGiantGreen.blp"
call VVI(D00[74],"attack slam")
call VEI(D00[74],1,DF0[74])
set DG0[i]="Be sure to attack enemies slowed by Gush, the armor reduction means that your hits will deal more damage than normal."
set DH0[i]="Anchor Smash is an offensive damage spell that lets you hurt multiple units, good for killing neutral creeps and useful in team battles."
set DZ0[i]="Kraken Shell gives you some protection against physical damage as well as a debuff removal against certain spells."
set DV0[i]="In fights, Tidehunter should be in the middle of the action drawing focus fire and dealing damage because of his skill set and high survivability."
set DW0[i]="Ravage has a large area of effect but Kelen's Dagger will allow you to initiate without being disabled and use it in an optimal spot."
set i=i+1
set D00[75]=1332963428
set DF0[75]=1747989849
set DI0[75]=1848656463
set DE0[75]="ReplaceableTextures\\CommandButtons\\BTNVoidWalker.blp"
call VVI(D00[75],"spell")
call VEI(D00[75],1.5,DF0[75])
call POI(D00[75],150,0,150)
set DG0[i]="High costs and cooldowns give Atropos limited ability use: Cast spells intelligently and get items like Null Talismans and/or Magic Stick for your mana pool."
set DH0[i]="Brain Sap is a powerful nuke and heal and deals exact unreduced damage so get it early and always try to use it on enemy heroes when using the spell."
set DZ0[i]="Use Nightmare to help teammates to aim their spells and remove an opponent from battles temporarily while you fight their allies."
set DV0[i]="Enfeeble is usually a skill to get after Brain Sap and Nightmare to use on enemy heroes with high damage to reduce their damage capabilities severely."
set DW0[i]="Fiend's Grip will work on Magic Immune units such as those under the active effect of Black King Bar, holding them in place but dealing no damage."
set i=i+1
set D00[76]=1429221445
set DF0[76]=1747989850
set DI0[76]=1848656440
set DE0[76]="ReplaceableTextures\\CommandButtons\\BTNGhostOfKelThuzad.blp"
call VVI(D00[76],"stand victory")
call VEI(D00[76],1.3,DF0[76])
set DG0[i]="Death Pulse lets you kill creeps and harass heroes simultaneously, great for pushing and healing allied units because of its low cooldown."
set DH0[i]="Sadist will provide you with some early regeneration for killing creeps, while Heartstopper Aura becomes effective as the game goes on."
set DZ0[i]="Reaper's Scythe is known for its ability to kill heroes outright, allowing you to bring down even high-HP Strength heroes with ease."
set DV0[i]="Your ultimate can also be used to stun opponents in certain situations, such as interrupting channeling spells and teleports."
set DW0[i]="Items like Bloodstone or Heart of Tarrasque allow you to survive long enough in team battles to make your spells more effective."
set i=i+1
set D00[77]=1429221446
set DF0[77]=1747990064
set DI0[77]=1848656693
set DE0[77]="ReplaceableTextures\\CommandButtons\\BTNAbomination.blp"
call VVI(D00[77],"stand 3")
call VEI(D00[77],1.1,DF0[77])
set DG0[i]="Pudge can known for his ability to isolate enemies with Meat Hook and using Rot and Dismember afterward, killing them outright. "
set DH0[i]="Early regeneration and movement speed items such as Bottle and Phase Boots help provide Pudge with the means to cast spells and chase his opponents."
set DZ0[i]="Use Meat Hook from a location where you are not obstructed by any allied or enemy units other than your target to ensure a better chance of landing it."
set DV0[i]="A Hood of Defiance will improve your magic resistance to reduce damage from using Rot and getting hit by spells; The massive regeneration is also good."
set DW0[i]="Use your spells defensively: Rot can be used to commit suicide if necessary and Meat Hook can be used to rescue an ally from one or more enemies."
set i=i+1
set D00[78]=1328558154
set DF0[78]=1747990065
set DI0[78]=1848656691
set DE0[78]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"
call VVI(D00[78],"stand ready")
call VEI(D00[78],1.2,DF0[78])
set DG0[i]="Empowering Haste is a smart skill to level first, it gives Barathrum movement speed and significant damage for killing creeps and heroes."
set DH0[i]="A level of Greater Bash early game can be useful as an extra disable, since the 17% chance is the same for all levels.A level of Greater Bash early game can be useful as an extra disable, since the 17% chance is the same for all levels."
set DZ0[i]="Get Strength Power Treads because the attack and movement speed benefits your other skills and the boost in HP helps you survive."
set DV0[i]="Charge of Darkness gives Barathrum spell immunity after 12 seconds and provides vision of the target for you and your allies."
set DW0[i]="Nether Strike puts you from the opposite side of where you were facing, push opponents backwards and into your allies."
set i=i+1
set D00[79]=1432510828
set DF0[79]=1747990066
set DI0[79]=1848656472
set DE0[79]="ReplaceableTextures\\CommandButtons\\BTNNerubianQueen.blp"
call VVI(D00[79],"attack")
call VEI(D00[79],1.0,DF0[79])
call POI(D00[79],255,200,200)
set DG0[i]="Take care of Weaver's HP/damage problems with Bracers or Wraith Bands and get regeneration so he can use his spells freely."
set DH0[i]="An early level of Watchers can be used to provide vision over the rune powerups. Patrol them to increase their area of detection."
set DZ0[i]="Shukuchi is used for harassing and chasing opponents offensively, and escaping and avoiding certain projectile spells defensively."
set DV0[i]="If your Geminate Attack is not working, make sure that you input an attack command ('A' or right-click) and are not simply auto-attacking."
set DW0[i]="Use Time Lapse after taking a lot of recent damage to heal yourself, allowing you to pull off some dangerous moves like diving into towers."
set i=i+1
set D00[80]=1315334514
set DF0[80]=1747990067
set DI0[80]=1848656462
set DE0[80]="ReplaceableTextures\\CommandButtons\\BTNShade.blp"
call VVI(D00[80],"stand channel")
call VEI(D00[80],1.15,DF0[80])
call POI(D00[80],0,0,0)
set DG0[i]="Necromastery is important because of its massive damage gain and because your ultimate deals damage based on the number of souls."
set DH0[i]="Shadow Raze gives you three powerful nuke spells that should be maxed out first. Gauge the distance correctly and hit multiple times."
set DZ0[i]="Requiem of Souls deals more damage the closer you are: Placement items like Lothar's Edge and Kelen's Dagger can help you land it."
set DV0[i]="After maxing your other two spells, Presence of the Dark Lord will be useful by then, good for pushing and dealing more physical damage."
set DW0[i]="If you die, remember to fill up on souls again before major fights when you respawn or you will be much less effective in battles."
set i=i+1
set D00[81]=1429221451
set DF0[81]=1747990068
set DI0[81]=1848656692
set DE0[81]="ReplaceableTextures\\CommandButtons\\BTNArachnathidGreen.blp"
call VVI(D00[81],"attack 3")
call VEI(D00[81],1,DF0[81])
set DG0[i]="Burrowstrike is both versatile and powerful: It deals damage, stuns and provides you with a useful escape or chasing mechanism."
set DH0[i]="Using Sandstorm at the right time will dodge certain projectile spells and can protect you temporarily if it is necessary."
set DZ0[i]="Getting Kelen's Dagger will give him increased mobility and reach, and also the ability to Blink into battle right after channeling Epicenter."
set DV0[i]="While you cannot move while Epicenter is channeling, once the pulses begin you can freely move around (mostly to chase your opponent)."
set DW0[i]="Caustic Finale might be an orb effect but it is extremely useful for killing multiple units quickly for fighting neutrals, pushing and defending."
set i=i+1
set D00[82]=1332766568
set DF0[82]=1747990069
set DI0[82]=1848656461
set DE0[82]="ReplaceableTextures\\CommandButtons\\BTNChaosGrom.blp"
call VVI(D00[82],"stand victory")
call VEI(D00[82],1,DF0[82])
set DG0[i]="Counter Helix gives Axe the flexibility to both lane and jungle. A Stout Shield will help reduce the damage from taking attacks in order to activate Helix."
set DH0[i]="A Vanguard or a Hood of Defiance offers survivability and regeneration, which are usually more useful to Axe than increasing his attack speed or damage."
set DZ0[i]="Berserker's Call is used to initiate fights and draw focus fire. Using it when there are more enemy units increases the chance of activating Counter Helix."
set DV0[i]="Monitor your opponent's HP for the perfect Culling Blade opportunity to finish them off. However, if your enemy has too much HP, it will hardly do anything."
set DW0[i]="Kelen's Dagger and/or Phase Boots can help you enter the fight first and get close enough for a Berserker's Call."
set i=i+1
set D00[83]=1215722344
set DF0[83]=1747990070
set DI0[83]=1848656474
set DE0[83]="ReplaceableTextures\\CommandButtons\\BTNShaman.blp"
call VVI(D00[83],"stand victory")
call VEI(D00[83],1.25,DF0[83])
call POI(D00[83],250,150,150)
set DG0[i]="Getting Blood Bath will allow you to take a few hits as you are killing creeps because you will recover your health immediately afterwards."
set DH0[i]="An early level of Bloodrage can be useful for silencing enemies temporarily and for dealing a little bit of damage."
set DZ0[i]="Phase Boots and HP can be just as useful as damage items because they increase his survivability for chasing enemies and other longer battles."
set DV0[i]="Use Rupture when your enemy has to either run away or to prevent them from moving, such as when an ally is about to use a powerful spell."
set DW0[i]="Both allies and enemies gain the massive damage increase and are silenced from Bloodrage, which can be disastrous if used incorrectly."
set i=i+1
set D00[84]=1432642913
set DF0[84]=1747990071
set DI0[84]=1848656460
set DE0[84]="ReplaceableTextures\\CommandButtons\\BTNHeroDeathKnight.blp"
call VVI(D00[84],"stand ready")
call VEI(D00[84],1,DF0[84])
set DG0[i]="Abbadon's spells can save allies while dealing damage, so support and regeneration items like Vladmir's Offering can be more useful than damage items."
set DH0[i]="Death Coil can be used both as a nuke and a heal, just remember that it deals damage to you unless you are using Aphotic Shield or Borrowed Time."
set DZ0[i]="Aphotic Shield prevents damage but can also be used to remove certain debuffs, such as removing the stun duration effect on an ally."
set DV0[i]="Frostmourne is usually gotten later but it is very useful for chasing and helping your allies outrun your opponents."
set DW0[i]="Borrowed Time can be cast manually as well. If you know you are going to receive a lot of damage sometimes it can be wiser to use it then."
set i=i+1
set D00[85]=1160786242
set DF0[85]=1747990072
set DI0[85]=1848656441
set DE0[85]="ReplaceableTextures\\CommandButtons\\BTNvengeanceincarnate.blp"
call VVI(D00[85],"stand ready")
call VEI(D00[85],0.8,DF0[85])
set DG0[i]="Spectral Dagger is your utility spell. You can use it for chasing people down, scouting dangerous areas and escaping. "
set DH0[i]="You also walk through units, trees, even cliffs while you are walking on Spectral Dagger's black path, making it very handy when used properly."
set DZ0[i]="Desolate is great for dealing target to isolated targets but Dispersion helps you to survive in the lane: Chose whatever combination suits you best."
set DV0[i]="Haunt lets you jump into a fight directly from anywhere in the map; just make sure that you pay attention to the actions of your team."
set DW0[i]="Getting HP will allow you to withstand and dish out more Dispersion damage, which is extremely powerful in team fights."
set i=i+1
set D00[86]=1160786241
set DF0[86]=1747990073
set DI0[86]=1848656459
set DE0[86]="ReplaceableTextures\\CommandButtons\\BTNWitchDoctor.blp"
call VVI(D00[86],"stand victory")
call VEI(D00[86],1.25,DF0[86])
set DG0[i]="Paralyzing Cask is your initiating spell for your other skills and can effectively keep two nearby units stun-locked at higher levels."
set DH0[i]="Maledict drastically reduces the damage needed to kill opponents and is an important spell to land in every fight."
set DZ0[i]="An early level of Voodoo Restoration can provide a relatively cheap heal if you are forced to play defensively."
set DV0[i]="Damaging your opponent immediately after using Maledict is wise because it will deal more bonus damage overall at the 3 ticks."
set DW0[i]="Death Ward is a powerful channeling spell if not interrupted. A Black King Bar will help to prevent enemies from disabling you."
set i=i+1
set D00[87]=1429221456
set DF0[87]=1747990081
set DI0[87]=1848656449
set DE0[87]="ReplaceableTextures\\CommandButtons\\BTNDestroyer.blp"
call VVI(D00[87],"stand alternate 2")
call VEI(D00[87],0.85,DF0[87])
set DG0[i]="Getting Intelligence and mana items is extremely important for Harbringer as the power of Arcane Orb and Sanity's Eclipse rely on this."
set DH0[i]="Use Astral Imprisonment to control your opponents' mana, for escaping/chasing, or on yourself and allies to avoid spells."
set DZ0[i]="Cast Arcane Orb manually early on because you will have a greater chance of activating Essence Aura to use it endlessly."
set DV0[i]="Guinsoo's Scythe of Vyse is a great choice because it offers Intelligence, balanced stats and provides Harbringer with a powerful disable."
set DW0[i]="Use Sanity's Eclipse early in fights so that you drain casters with high Intelligence of their mana and cripple their ability to cast spells."
set i=i+1
set D00[88]=1160786243
set DF0[88]=1747990083
set DI0[88]=1848656450
set DE0[88]="ReplaceableTextures\\CommandButtons\\BTNGuldan.blp"
call VVI(D00[88],"spell")
call VEI(D00[88],1.5,DF0[88])
set DG0[i]="Shadow Word is either a heal or damage over time, definitely the most powerful early game spell to have."
set DH0[i]="The affordable Mekansm is a good support item for Warlock, who is not a hero who is reliant on gold and items to be effective."
set DZ0[i]="Rain of Chaos creates a powerful Infernal that can take on heroes and is also great for killing creeps and pushing buildings."
set DV0[i]="Fatal Bonds can deal huge damage if you and your teammates have other area of effect (AoE) spells that would hurt multiple linked units."
set DW0[i]="The stun when using Rain of Chaos along with its huge casting range (1200) is great for interrupting spells and initiating battles."
set i=i+1
set D00[89]=1211117641
set DF0[89]=1747990084
set DI0[89]=1848656458
set DE0[89]="ReplaceableTextures\\CommandButtons\\BTNKoboldGeomancer.blp"
call VVI(D00[89],"spell")
call VEI(D00[89],1.4,DF0[89])
call VEI(1211117642,1.4,DF0[89])
set DG0[i]="Vladmir's Offering and/or Mekansm provides valuable auras and useful heals that can help support your team and keep your Meepos alive."
set DH0[i]="Poof is both a teleport and damage spell and is great against neutrals. Poof to yourself to deal double the damage (from departure and arrival).Poof is both a teleport and damage spell and is great against neutrals. Poof to yourself to deal double the damage (from departure and arrival)."
set DZ0[i]="Geomancer is an advanced hero: Be sure to monitor their individual health because if one dies, they all will."
set DV0[i]="Strength Power Treads are suggested since clones will receive all of the Strength from footwear along with a 2.5 bonus (12.5 total)."
set DW0[i]="Time Earthbind with each of your clones. With 4 Meepos and Level 4 Earthbind, you can almost permanently immobilize them."
set i=i+1
set D00[90]=1311781207
set DF0[90]=1747990085
set DI0[90]=1848656457
set DE0[90]="ReplaceableTextures\\CommandButtons\\BTNDarkTrollShadowPriest.blp"
call VVI(D00[90],"spell")
call VEI(D00[90],1.2,DF0[90])
set DG0[i]="An early level of both Shadow Wave and Shallow Grave provides a lot of support before getting Poison Touch to level 3 for its added stun."
set DH0[i]="Try to use Shadow Wave to heal and damage opponents at the same time. Surround an enemy with multiple allied units for more damage."
set DZ0[i]="In addition to slowing and damaging opponents, Poison Touch will allow you to interrupt channeling spells and teleports"
set DV0[i]="Dazzle generally does not need many items and can sometimes focus on increasing his spell use with regeneration and support items like Mekansm."
set DW0[i]="Weave is a powerful spell, try to hit both allies and enemies with it, and it can also be used to provide vision before major battles occur."
set i=i+1
set D00[91]=1311780946
set DF0[91]=1747990086
set DI0[91]=1848656451
set DE0[91]="ReplaceableTextures\\CommandButtons\\BTNPitLord.blp"
call VVI(D00[91],"stand channel")
call VEI(D00[91],0.95,DF0[91])
set DG0[i]="Firestorm will be your main ability for killing creeps but it can deal a lot of damage to heroes if you combine it with disables or slows."
set DH0[i]="The Pit of Malice is a useful disable that lasts for 10 seconds so it will both ensnare opponents and deter opponents from entering the circle."
set DZ0[i]="Expulsion is usually used after some creeps have died so the spell lasts longer and will deal damage and mini-stun enemies."
set DV0[i]="Pit Lord is played more as a caster, increase his team presence and spell use by obtaining expensive Intelligence items like Shiva's Guard."
set DW0[i]="Dark Rift is a great spell for transporting multiple allies to surprise opponents, and more importantly to defend and attack the base."
set i=i+1
set D00[92]=1211117650
set DF0[92]=1747990087
set DI0[92]=1848656456
set DE0[92]="ReplaceableTextures\\CommandButtons\\BTNZombie.blp"
call VVI(D00[92],"stand")
call VEI(D00[92],2,DF0[92])
call VEI(1211119433,1.3,DF0[92])
set DG0[i]="Decay is used to deal damage and make opponents more vulnerable, while increasing the survivability of Dirge temporarily."
set DH0[i]="Make sure Dirge is a presence who can cast his spells in fights by buying regeneration items like Vladmir's Offering and Void Stone."
set DZ0[i]="Soul Rip is a powerful heal or nuke but remember that it will have almost no effect without nearby units. Cast it in crowds."
set DV0[i]="Use Tombstone when engaging the enemy because the zombies have a slowing capability and may also help block your opponents."
set DW0[i]="Tombstone Zombies become extremely powerful when your opponents have low health and attack and move much faster."
set i=i+1
set D00[93]=1211117646
set DF0[93]=1747990088
set DI0[93]=1848656455
set DE0[93]="ReplaceableTextures\\CommandButtons\\BTNDranaiMage.blp"
call VVI(D00[93],"spell")
call VEI(D00[93],1.15,DF0[93])
set DG0[i]="Ion shell is great for killing creeps and dealing damage to heroes, but it will not damage an enemy target if you cast it on them directly."
set DH0[i]="A level of Surge early game can help you and allies escape and chase enemies, and works nicely to help you close in on opponents with Ion Shell."
set DZ0[i]="Vacuum is an extremely powerful skill that can be used for initiating and combining with other spells. It can also interrupt channeling and teleport spells."
set DV0[i]="Make sure they are standing closer to the edge of your targeting circle when casting Vacuum to pull your opponents further."
set DW0[i]="Use Wall of Replica where multiple heroes will touch it; try using it with Vacuum. Get your allies to run through the wall too."
set i=i+1
set D00[94]=1211117653
set DF0[94]=1747990082
set DI0[94]=1848656454
set DE0[94]="ReplaceableTextures\\CommandButtons\\BTNHeroBloodElfPrince.blp"
call VVI(D00[94],"spell")
call VEI(D00[94],1.25,DF0[94])
set DG0[i]="Having at least one level in Quas, Wex and Exort will give you a larger repertoire of spells. Type -invokelist to obtain a full list of combinations."
set DH0[i]="Ghost Walk (QQW) can be used to get yourself out of a tight situation, and also for slowing opponents so that your allies can chase/escape."
set DZ0[i]="Sunstrike (EEE) is a global-ranged nuke that deals damage based on the level of Exort. When using it, you have to factor in the 1.7 casting time."
set DV0[i]="Forge Spirit (EEQ) and Cold Snap (QQQ) can be effective for pushing towers and against heroes with low armor. "
set DW0[i]="EMP (WWW) and Tornado (WWQ) can completely drain off heroes with low mana pools and have a impressive casting range."
set i=i+1
set D00[95]=1433105516
set DF0[95]=1747989572
set DI0[95]=1848656182
set DE0[95]="ReplaceableTextures\\CommandButtons\\BTNSpell_Shadow_SummonVoidWalker.blp"
call VVI(D00[95],"stand")
call VEI(D00[95],1.5,DF0[95])
set DG0[i]="Conversion allows Enigma to neutral creep effectively. Target the highest level creep possible and move your low HP Eidolons out of the way to save them."
set DH0[i]="In the lane, Conversion can be used on allied creeps to deny your opponents of experience and gold, and for making sure you last hit enemy creeps."
set DZ0[i]="The multiple stuns on higher levels of Malefice make it useful for preventing an opponent from channeling spells or help you chase/escape them."
set DV0[i]="Use Midnight Pulse in conjunction with Black Hole to deal massive damage to enemies. Just make sure that you cast it before Black Hole."
set DW0[i]="Kelen's Dagger is great for Black Hole placement, and a Black King Bar will prevent most spells from stopping the channeling effect of the spell."
set i=i+1
set D00[96]=1328558390
set DF0[96]=1747990354
set DI0[96]=1848657721
set DE0[96]="ReplaceableTextures\\CommandButtons\\BTNTrollBatRider.blp"
call VVI(D00[96],"stand")
call VEI(D00[96],1.2,DF0[96])
call VEI(1328558391,1.2,DF0[96])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[97]=1311787088
set DF0[97]=1747993136
set DI0[97]=1848658002
set DE0[97]="ReplaceableTextures\\CommandButtons\\BTNIcyGhost.blp"
call VVI(D00[97],"stand")
call VEI(D00[97],1.17,DF0[97])
call VEI(1311787088,1.2,DF0[97])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[98]=1211119409
set DF0[98]=1747990322
set DI0[98]=1848657222
set DE0[98]="ReplaceableTextures\\CommandButtons\\BTNMurgulShadowCaster.blp"
call VVI(D00[98],"stand 3")
call VEI(D00[98],1.25,DF0[98])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[99]=1164277353
set DF0[99]=1747989814
set DI0[99]=1848656214
set DE0[99]="ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp"
call VVI(D00[99],"spell channel")
call VEI(D00[99],1,DF0[99])
call VEI(1164277357,1,DF0[99])
call VEI(1160786518,1,DF0[99])
call VEI(1160786519,1,DF0[99])
call VEI(1160786517,1,DF0[99])
set DG0[i]="Get Soul Steal if you need healing in the lane."
set DH0[i]="Purchase statistic-increasing items like Wraith Bands and later items like Sange and Yasha to benefit both Terrorblade and his images."
set DZ0[i]="It might be difficult to escape due to the trail you leave behind when walking, you may have to use an image to act as a block or decoy."
set DV0[i]="Sunder can turn fights around when you have low health but be careful of disables and high damage spells when trying to swap."
set DW0[i]="Creating ranged images in Metamorphosis will allow you to deal damage safely in fights as well as push down buildings very quickly."
set i=i+1
set D00[100]=1164666213
set DF0[100]=1747989817
set DI0[100]=1848656215
set DE0[100]="ReplaceableTextures\\CommandButtons\\BTNKeeperGhostBlue.blp"
call VVI(D00[100],"stand victory")
call VEI(D00[100],1,DF0[100])
set DG0[i]="Split Earth is a very useful disable while Lightning Storm is taken because of its low cooldown. Both are powerful spells that hit multiple targets."
set DH0[i]="By using Lightning Storm to finish low-health creeps with nearby opponents, you can get gold and harass enemy heroes at the same time."
set DZ0[i]="Diabolic Edict is one of the most powerful spells for destroying buildings. Eliminate the creeps first so that you only have one target."
set DV0[i]="Turn off Pulse Nova when you have finished using it because the spell will continue until you have exhausted your entire mana pool."
set DW0[i]="Items like Bloodstone or Aghanim's Scepter will allow Leshrac to use his spells more liberally and survive in the midst of battle."
set i=i+1
set D00[101]=1160786504
set DF0[101]=1747993410
set DI0[101]=1848658764
set DE0[101]="ReplaceableTextures\\CommandButtons\\BTNEredarWarlockPurple.blp"
call VVI(D00[101],"stand 3")
call VEI(D00[101],1.25,DF0[101])
set DG0[i]=""
set DH0[i]=""
set DZ0[i]=""
set DV0[i]=""
set DW0[i]=""
set i=i+1
set D00[102]=1433168227
set DF0[102]=1747989825
set DI0[102]=1848656216
set DE0[102]="ReplaceableTextures\\CommandButtons\\BTNLichVersion2.blp"
call VVI(D00[102],"stand channel")
call VEI(D00[102],1.3,DF0[51])
set DG0[i]="Dark Ritual is useful for denying allied creeps and provides you with mana to use spells without buying regeneration items."
set DH0[i]="Frost Nova is a very powerful spell that allows you to be aggressive. Attack the enemy a few extra times while they are slowed."
set DZ0[i]="Chain Frost is most effective when used against 2-3 nearby targets (ideally heroes), but will not bounce when used on a lone unit."
set DV0[i]="Frost Armor should be cast on multiple teammates when you have the mana for it later on; it works nicely against melee units."
set DW0[i]="The first target of your Chain Frost can interrupt channeling and teleport spells if absolutely necessary."
set i=i+1
set D00[103]=1430468406
set DF0[103]=1747989826
set DI0[103]=1848656217
set DE0[103]="ReplaceableTextures\\CommandButtons\\BTNBanshee.blp"
call VVI(D00[103],"spell wail")
call VEI(D00[103],1.35,DF0[103])
set DG0[i]="Carrion Swarm is your primary nuke and first skill to max. Make use of its range by casting it on the ground instead of on a unit directly."
set DH0[i]="An early level of Silence can help prevent you and your allies from being attacked by multiple spells."
set DZ0[i]="The ghosts of Exorcism will attack whatever you attack, so if you want to direct all attention to a single unit simply focus them and stay nearby."
set DV0[i]="Exorcism also makes Krobelus extremely effective for quickly destroying enemy buildings, so be sure to push the enemy base when you can"
set DW0[i]="The effect of Exorcism stops if you die in combat: Invest in items that improve your survivability, such as a Bloodstone or a Heart of Tarrasque."
set i=i+1
set D00[104]=1430466872
set DF0[104]=1747989827
set DI0[104]=1848656218
set DE0[104]="ReplaceableTextures\\CommandButtons\\BTNLion.BLP"
call VVI(D00[104],"spell callstorm")
call VEI(D00[104],1.3,DF0[104])
call POI(D00[104],50,100,255)
set DG0[i]="With plenty of damage and disables, Lion is quite a force to be reckoned with cheap utility items such as Bottle and Phase Boots."
set DH0[i]="Impale gives Lion the ability to disable multiple targets and deals decent damage, so it is definitely the most versatile of his three skills for the early game."
set DZ0[i]="Mana Drain only works on units with mana: Using Mana Drain on enemy heroes will reduce their spell use while replenishing mana."
set DV0[i]="Avoid wasting Finger of Death on low-health enemy heroes when a few extra attacks or using another spell like Impale will deal enough damage."
set DW0[i]="Wait until the duration of your first disable wears off before using another one for maximum disable time when using Impale and Voodoo."
set i=i+1
set D30=104
set D40[1]=1315074670
set D40[2]=1164207469
set D40[3]=1311781174
set D40[4]=1315070563
set D40[5]=1315007329
set D40[6]=1328558160
set D40[7]=1433631084
set D40[8]=1160785973
set D40[9]=1311781199
set D40[10]=1212365106
set D40[11]=1215723364
set D40[12]=1212363833
set D40[13]=1215657064
set D40[14]=1332179560
set D40[15]=1429221430
set D40[16]=1162032439
set D40[17]=1164277353
set D40[18]=1432510828
set D40[19]=1160785972
set D40[20]=1162032951
set D40[21]=1215722344
set D40[22]=1315334514
set D40[23]=1160785970
set D40[24]=1162032181
set D40[25]=1165451634
set D40[26]=1429221424
set D40[27]=1211117654
set D40[28]=1160786242
set D40[29]=1311781206
set D40[30]=1211117641
set D40[31]=1160786265
set D40[32]=1211119409
set D40[33]=1160786510
set D50=33
set D60[1]=1315988077
set D60[2]=1215063922
set D60[3]=1214345830
set D60[4]=1211117616
set D60[5]=1211117617
set D60[6]=1214344551
set D60[7]=1211117624
set D60[8]=1432580716
set D60[9]=1333027688
set D60[10]=1313026096
set D60[11]=1432646245
set D60[12]=1430466865
set D60[13]=1332109682
set D60[14]=1429221446
set D60[15]=1429221451
set D60[16]=1328558154
set D60[17]=1432642913
set D60[18]=1332766568
set D60[19]=1429221441
set D60[20]=1429221443
set D60[21]=1430468913
set D60[22]=1430467634
set D60[23]=1429221432
set D60[24]=1211117636
set D60[25]=1311781193
set D60[26]=1211117649
set D60[27]=1311780946
set D60[28]=1211117652
set D60[29]=1211119187
set D60[30]=1211117650
set D60[31]=1328558389
set D60[32]=1160786505
set D60[33]=1160786502
set D60[34]=1328558406
set D70=34
set D80[1]=1332898670
set D80[2]=1164799855
set D80[3]=1164799603
set D80[4]=1211117620
set D80[5]=1214931305
set D80[6]=1433105516
set D80[7]=1215128178
set D80[8]=1211117643
set D80[9]=1316252014
set D80[10]=1215130471
set D80[11]=1214409837
set D80[12]=1311781185
set D80[13]=1211117633
set D80[14]=1433168227
set D80[15]=1164666213
set D80[16]=1430468406
set D80[17]=1430466872
set D80[18]=1430466609
set D80[19]=1430468144
set D80[20]=1211117640
set D80[21]=1332963428
set D80[22]=1429221445
set D80[23]=1160786241
set D80[24]=1429221456
set D80[25]=1160786000
set D80[26]=1160786243
set D80[27]=1311781207
set D80[28]=1211117646
set D80[29]=1311786311
set D80[30]=1211117651
set D80[31]=1311780930
set D80[32]=1211117653
set D80[33]=1328558390
set D80[34]=D00[97]
set D80[35]=1160786504
set D80[36]=1160786506
set D80[37]=1160786520
set D90=37
set DA0[1]=1332898670
set DA0[2]=1164799855
set DA0[3]=1164799603
set DA0[4]=1211117620
set DA0[5]=1214931305
set DA0[6]=1433105516
set DA0[7]=1215128178
set DA0[8]=1211117643
set DA0[9]=1316252014
set DA0[10]=1315074670
set DA0[11]=1214409837
set DA0[12]=1311781185
set DA0[13]=1211117633
set DA0[14]=1433168227
set DA0[15]=1164666213
set DA0[16]=1430468406
set DA0[17]=1430466872
set DA0[18]=1430466609
set DA0[19]=1430468144
set DA0[20]=1211117640
set DA0[21]=1332963428
set DA0[22]=1429221445
set DA0[23]=1160786241
set DA0[24]=1429221456
set DA0[25]=1160786000
set DA0[26]=1160786243
set DA0[27]=1311781207
set DA0[28]=1311786311
set DA0[29]=1211117651
set DA0[30]=1311780930
set DA0[31]=1211117653
set DA0[32]=1311781174
set DA0[33]=1328558160
set DA0[34]=1433631084
set DA0[35]=1160785973
set DA0[36]=1311781199
set DA0[37]=1160786265
set DA0[38]=1215723364
set DA0[39]=1162032439
set DA0[40]=1432510828
set DA0[41]=1160785972
set DA0[42]=1162032951
set DA0[43]=1315334514
set DA0[44]=1160785970
set DA0[45]=1211117654
set DA0[46]=1311781206
set DA0[47]=1211117649
set DA0[48]=1328558390
set DA0[49]=D00[97]
set DA0[50]=1328558406
set DA0[51]=1160786504
set DA0[52]=1160786510
set DA0[53]=1160786506
set DA0[54]=1160786502
set DA0[55]=1160786520
set DB0=55
set DC0[1]=1215130471
set DC0[2]=1211117646
set DC0[3]=1164207469
set DC0[4]=1315070563
set DC0[5]=1315007329
set DC0[6]=1212363833
set DC0[7]=1215657064
set DC0[8]=1332179560
set DC0[9]=1429221430
set DC0[10]=1164277353
set DC0[11]=1215722344
set DC0[12]=1162032181
set DC0[13]=1165451634
set DC0[14]=1429221424
set DC0[15]=1160786242
set DC0[16]=1211117641
set DC0[17]=1212365106
set DC0[18]=1315988077
set DC0[19]=1215063922
set DC0[20]=1214345830
set DC0[21]=1211117616
set DC0[22]=1211117617
set DC0[23]=1214344551
set DC0[24]=1211117624
set DC0[25]=1432580716
set DC0[26]=1333027688
set DC0[27]=1313026096
set DC0[28]=1432646245
set DC0[29]=1430466865
set DC0[30]=1332109682
set DC0[31]=1429221446
set DC0[32]=1429221451
set DC0[33]=1328558154
set DC0[34]=1432642913
set DC0[35]=1332766568
set DC0[36]=1429221441
set DC0[37]=1429221443
set DC0[38]=1430468913
set DC0[39]=1430467634
set DC0[40]=1429221432
set DC0[41]=1211117636
set DC0[42]=1311781193
set DC0[43]=1311780946
set DC0[44]=1211117652
set DC0[45]=1211119187
set DC0[46]=1211117650
set DC0[47]=1328558389
set DC0[48]=1211119409
set DC0[49]=1160786505
set DD0=49
call W9I()
endfunction
function InitTrig_Hero takes nothing returns nothing
call UDI()
endfunction
function UEI takes nothing returns nothing
call VVI(1702061422,"stand 4")
call VVI(1697656918,"stand 4")
call VVI(1701081721,"spell")
call VVI(1697656919,"spell")
call VVI(1969711215,"stand victory")
call VVI(1966092337,"stand victory")
call VVI(1970169187,"stand channel")
call VVI(1966092338,"stand channel")
call VEI(1848651853,0.4,1848651853)
call VEI(1697657426,0.5,1697657426)
call VEI(1697657428,1.2,1697657428)
call VEI(1697657427,0.5,1697657427)
call VEI(1697657648,0.5,1697657648)
call VEI(1848659027,1,1848659027)
endfunction
function InitTrig_Unit takes nothing returns nothing
call UEI()
endfunction
function UFI takes nothing returns nothing
local trigger t=CreateTrigger()
local player VRI=Player(15)
local real UGI=GetUnitX(BX)
local real UHI=GetUnitY(BX)
local real UZI=GetUnitX(VZ)
local real UVI=GetUnitY(VZ)
local real UWI=GetUnitX(OX)
local real UXI=GetUnitY(OX)
local real UYI=GetUnitX(FY)
local real UJI=GetUnitY(FY)
local real UKI=GetUnitX(ZZ)
local real ULI=GetUnitY(ZZ)
local real UMI=GetUnitX(WZ)
local real UNI=GetUnitY(WZ)
local real USI=GetUnitX(MH)
local real UTI=GetUnitY(MH)
local real URI=GetUnitX(HY)
local real UPI=GetUnitY(HY)
local real UQI=GetUnitX(UH)
local real UUI=GetUnitY(UH)
local real I01=GetUnitX(AX)
local real II1=GetUnitY(AX)
local real I11=GetUnitX(AY)
local real IO1=GetUnitY(AY)
local real I21=GetUnitX(GY)
local real I31=GetUnitY(GY)
call RemoveUnit(BX)
call RemoveUnit(WZ)
call RemoveUnit(VZ)
call RemoveUnit(ZZ)
call RemoveUnit(OX)
call RemoveUnit(MH)
call RemoveUnit(UH)
call RemoveUnit(AX)
call RemoveUnit(AY)
call RemoveUnit(FY)
call RemoveUnit(HY)
call RemoveUnit(GY)
set DX0=CreateUnit(VRI,1848651832,UKI,ULI,270)
set DY0=CreateUnit(VRI,1848657738,UMI,UNI,270)
set DJ0=CreateUnit(VRI,1848652100,USI,UTI,270)
set DK0=CreateUnit(VRI,1848659016,URI,UPI,270)
set DL0=CreateUnit(VRI,1848652110,UGI,UHI,270)
set DM0=CreateUnit(VRI,1848651831,UZI,UVI,270)
set DN0=CreateUnit(VRI,1848651829,UWI,UXI,270)
set DS0=CreateUnit(VRI,1848659017,UYI,UJI,270)
set DT0=CreateUnit(VRI,1848652098,UQI,UUI,270)
set DR0=CreateUnit(VRI,1848652112,I01,II1,270)
set DP0=CreateUnit(VRI,1848657739,I11,IO1,270)
set DQ0=CreateUnit(VRI,1848659018,I21,I31,270)
call SetUnitColor(DX0,ConvertPlayerColor(1))
call SetUnitColor(DY0,ConvertPlayerColor(1))
call SetUnitColor(DJ0,ConvertPlayerColor(9))
call SetUnitColor(DK0,ConvertPlayerColor(9))
call SetUnitColor(DL0,ConvertPlayerColor(6))
call SetUnitColor(DM0,ConvertPlayerColor(6))
call SetUnitColor(DN0,ConvertPlayerColor(10))
call SetUnitColor(DS0,ConvertPlayerColor(10))
call SetUnitColor(DT0,ConvertPlayerColor(0))
call SetUnitColor(DR0,ConvertPlayerColor(0))
call SetUnitColor(DP0,ConvertPlayerColor(11))
call SetUnitColor(DQ0,ConvertPlayerColor(11))
set t=null
endfunction
function InitTrig_Tavern takes nothing returns nothing
call UFI()
endfunction
function I41 takes integer id returns boolean
return id==1093808454 or id==1093808455 or id==1093808456 or id==1093751609 or id==1093809217 or id==1093809218 or id==1093751609 or id==1093678667 or id==1093752391 or id==1093810257 or id==1093752646 or id==1093686328 or id==1093686327 or id==1093808206 or id==1093753394 or id==1093753395 or id==1093808181 or id==1093743681 or id==1093809721 or id==1093808458 or id==1093810008 or id==1093810265 or id==1093809221 or id==1093753416 or id==1093752655 or id==1093748305 or id==1093686341
endfunction
function I81 takes nothing returns nothing
call CreateQuestBJ(0,"TRIGSTR_50004","TRIGSTR_50005","ReplaceableTextures\\CommandButtons\\BTNSpy.blp")
call CreateQuestBJ(0,"TRIGSTR_50006","TRIGSTR_50007","ReplaceableTextures\\CommandButtons\\BTNTome.blp")
call CreateQuestBJ(0,"TRIGSTR_50008","TRIGSTR_50009","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(2,"TRIGSTR_50010","TRIGSTR_50011","ReplaceableTextures\\CommandButtons\\BTNScrollOfHaste.blp")
call CreateQuestBJ(2,"TRIGSTR_50012","TRIGSTR_50013","ReplaceableTextures\\CommandButtons\\BTNBansheeMaster.blp")
call CreateQuestBJ(2,"TRIGSTR_50014","TRIGSTR_50015","ReplaceableTextures\\CommandButtons\\BTNCarrionScarabs.blp")
endfunction
function IA1 takes nothing returns boolean
local string s
if IsUnitIllusion(GetTriggerUnit())==false and GetUnitTypeId(GetTriggerUnit())!=1211117642 then
set s=GetUnitName(GetTriggerUnit())+" "+GetObjectName(1848657986)+" "+GetObjectName(GetLearnedSkill())+" ("+GetObjectName(1848657987)+" "+I2S(GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill()))+")"
call DisplayTimedTextToPlayer(CS0,0,0,3,s)
call DisplayTimedTextToPlayer(CT0,0,0,3,s)
endif
return false
endfunction
function IB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function IA1))
set t=null
endfunction
function IC1 takes nothing returns nothing
call JDI(bj_FORCE_ALL_PLAYERS,25.00,(CR0[GetPlayerId((GetTriggerPlayer()))])+"|c00ff0303 "+GetObjectName(1848652356)+"|r")
endfunction
function ID1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player IE1=(LoadPlayerHandle(ZY,(V0I),(78)))
local integer W5I=1
local integer IF1
local integer WLI=GetPlayerState(IE1,PLAYER_STATE_RESOURCE_GOLD)
if S10[GetPlayerId(IE1)]==false and FL==true then
if GetTriggerEvalCount(t)==4 then
if IsPlayerAlly(GetLocalPlayer(),IE1)==true then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,GetObjectName(1848658483))
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,GetObjectName(1848658503))
endif
endif
return false
endif
if WLI>20 then
call SetPlayerState(IE1,PLAYER_STATE_RESOURCE_GOLD,0)
set E80[GetPlayerId(IE1)]=0
if VLI(IE1)then
set IF1=W0I(AO)
else
set IF1=W0I(BO)
endif
if VLI(IE1)then
loop
exitwhen W5I>5
if VTI(CO[W5I])then
call SetPlayerState(CO[W5I],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[W5I],PLAYER_STATE_RESOURCE_GOLD)+WLI/IF1)
endif
set W5I=W5I+1
endloop
else
loop
exitwhen W5I>5
if VTI(DO[W5I])then
call SetPlayerState(DO[W5I],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(DO[W5I],PLAYER_STATE_RESOURCE_GOLD)+WLI/IF1)
endif
set W5I=W5I+1
endloop
endif
endif
return false
endfunction
function IG1 takes player IE1 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SavePlayerHandle(ZY,(V0I),(78),(IE1))
call TriggerRegisterTimerEvent(t,2,true)
call TriggerAddCondition(t,Condition(function ID1))
set t=null
endfunction
function IH1 takes player p returns nothing
local multiboarditem Z2I=MultiboardGetItem(M0,LK0[GetPlayerId(p)],LJ0[GetPlayerId(p)])
call MultiboardSetItemValue(Z2I,"|c00333333"+(CR0[GetPlayerId((p))])+"|r")
call MultiboardReleaseItem(Z2I)
endfunction
function IZ1 takes nothing returns nothing
local integer UAI=W0I(AO)
local integer U9I=W0I(BO)
local integer W5I
local integer W6I
local string Q1I
local string DI0
local unit V8I=L1[GetPlayerId(GetTriggerPlayer())]
if V8I==null then
set DI0=GetObjectName(1848657239)
else
set DI0=GetUnitName(V8I)
endif
if(Z0<10)then
set Q1I=I2S(H0)+":0"+I2S(Z0)
else
set Q1I=I2S(H0)+":"+I2S(Z0)
endif
if U2==false then
set L3[GetPlayerId(GetTriggerPlayer())]="|c00555555"+Q1I+"|r"
call JDI(bj_FORCE_ALL_PLAYERS,25.00,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+" ("+DI0+")|r|c00ff0303 "+GetObjectName(1848652356)+"|r")
if(VLI(GetTriggerPlayer())==true)then
set W5I=1
set W6I=5
loop
exitwhen W5I>W6I
if(CO[W5I]!=GetTriggerPlayer())then
if(VTI(CO[W5I])==true)then
call SetPlayerAllianceStateBJ(GetTriggerPlayer(),CO[W5I],4)
endif
endif
set W5I=W5I+1
endloop
else
set W5I=1
set W6I=5
loop
exitwhen W5I>W6I
if(DO[W5I]!=GetTriggerPlayer())then
if(VTI(DO[W5I])==true)then
call SetPlayerAllianceStateBJ(GetTriggerPlayer(),DO[W5I],4)
endif
endif
set W5I=W5I+1
endloop
endif
if VLI(GetTriggerPlayer())or VNI(GetTriggerPlayer())then
set E10=E10+1
endif
call P7I("C"+"K"+I2S(A[GetPlayerId(GetTriggerPlayer())])+"D"+I2S(B[GetPlayerId(GetTriggerPlayer())])+"N"+I2S((LoadInteger(ZY,(400+GetPlayerId(GetTriggerPlayer())),(79)))),GetPlayerId(GetTriggerPlayer()))
set NZ0=GetTriggerPlayer()
call ExecuteFunc("IV1")
if FL then
call NEI(GetTriggerPlayer())
endif
set EI0[GetPlayerId(GetTriggerPlayer())]=true
call IH1(GetTriggerPlayer())
call IG1(GetTriggerPlayer())
if E10==2 and D2==false and CL==true then
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"|c006699CC"+GetObjectName(1848657495)+"|r")
endif
if E10==3 then
set NG0=true
call ExecuteFunc("IW1")
set NG0=false
endif
else
set L3[GetPlayerId(GetTriggerPlayer())]="|c00555555End|r"
call ExecuteFunc("IX1")
endif
endfunction
function IJ1 takes unit V8I returns nothing
if GetUnitTypeId(V8I)!=1211117642 and GetUnitTypeId(V8I)!=1211117641 then
if GetOwningPlayer(V8I)==GetLocalPlayer()then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1," ")
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1,"|c006699CC"+GetObjectName(1848657746))
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1," ")
endif
call M7I(XE,GetOwningPlayer(V8I))
endif
call SetUnitInvulnerable(V8I,false)
call UnitRemoveAbility(V8I,1093681498)
call UnitRemoveAbility(V8I,1093679434)
call UnitRemoveAbility(V8I,1093684052)
call UnitRemoveAbility(V8I,1093684823)
call UnitRemoveAbility(V8I,1093684821)
call UnitRemoveAbility(V8I,1093685079)
call UnitRemoveAbility(V8I,1093685078)
call UnitRemoveAbility(V8I,1093685080)
call UnitRemoveAbility(V8I,1093685081)
call UnitRemoveAbility(V8I,1093685296)
call UnitRemoveAbility(V8I,1093744459)
call UnitRemoveAbility(V8I,1093685334)
call UnitRemoveAbility(V8I,1093685583)
call UnitRemoveAbility(V8I,1093685827)
call UnitRemoveAbility(V8I,1093685830)
call UnitRemoveAbility(V8I,IN)
call UnitRemoveAbility(V8I,ON)
call UnitRemoveAbility(V8I,AN)
call UnitRemoveAbility(V8I,BN)
call UnitRemoveAbility(V8I,1093684821)
call UnitRemoveAbility(V8I,1093684823)
call UnitRemoveAbility(V8I,KQ0)
call UnitRemoveAbility(V8I,1093683509)
call UnitRemoveAbility(V8I,1093681977)
call UnitRemoveAbility(V8I,1093683528)
call UnitRemoveAbility(V8I,1110455863)
call UnitRemoveAbility(V8I,1110456396)
call UnitRemoveAbility(V8I,1093686098)
call UnitRemoveAbility(V8I,1093687119)
call UnitRemoveAbility(V8I,1093687122)
call UnitRemoveAbility(V8I,1093747534)
call UnitRemoveAbility(V8I,1093686856)
call UnitRemoveAbility(V8I,1093686858)
call UnitRemoveAbility(V8I,1093742649)
call UnitRemoveAbility(V8I,1093686871)
call UnitRemoveAbility(V8I,1093687373)
call UnitRemoveAbility(V8I,1093742927)
call UnitRemoveAbility(V8I,1093742930)
call UnitRemoveAbility(V8I,1093743671)
call UnitRemoveAbility(V8I,1093743672)
call UnitRemoveAbility(V8I,1093742933)
call UnitRemoveAbility(V8I,1093743673)
call UnitRemoveAbility(V8I,1093743153)
call UnitRemoveAbility(V8I,1093743158)
call UnitRemoveAbility(V8I,1093744441)
call UnitRemoveAbility(V8I,1097167980)
call UnitRemoveAbility(V8I,DN[0])
call UnitRemoveAbility(V8I,DN[1])
call UnitRemoveAbility(V8I,DN[2])
call UnitRemoveAbility(V8I,DN[3])
call UnitRemoveAbility(V8I,DN[4])
call UnitRemoveAbility(V8I,DN[5])
call UnitRemoveAbility(V8I,1093748533)
call UnitRemoveAbility(V8I,1093748531)
call UnitRemoveAbility(V8I,1093748534)
call UnitRemoveAbility(V8I,1093748532)
call SaveBoolean(ZY,(GetHandleId(V8I)),(80),(false))
call SetUnitPathing(V8I,true)
call PauseUnit(V8I,false)
call SetUnitFlyHeight(V8I,GetUnitDefaultFlyHeight(V8I),0)
call SetUnitScale(V8I,VZI(V8I)*QW0,VZI(V8I)*QW0,VZI(V8I)*QW0)
call UnitRemoveAbility(V8I,1093747521)
call UnitRemoveAbility(V8I,1093747513)
call UnitRemoveAbility(V8I,1093747522)
call UnitRemoveAbility(V8I,1093747523)
call UnitRemoveAbility(V8I,1093748545)
call UnitRemoveAbility(V8I,1093752627)
call UnitRemoveAbility(V8I,1110459471)
call UnitRemoveAbility(V8I,1093752136)
call UnitRemoveAbility(V8I,1093752137)
call UnitRemoveAbility(V8I,1093753396)
call UnitRemoveAbility(V8I,1093753409)
call UnitRemoveAbility(V8I,1093753410)
call UnitRemoveAbility(V8I,1093753401)
call UnitRemoveAbility(V8I,1110459478)
call UnitRemoveAbility(V8I,1093809718)
call UnitRemoveAbility(V8I,1093809717)
call UnitRemoveAbility(V8I,1093809228)
call UnitRemoveAbility(V8I,1110459716)
call UnitRemoveAbility(V8I,1093808975)
call UnitRemoveAbility(V8I,1110459705)
call PMI(V8I,0)
if GetUnitTypeId(V8I)==1160786510 or GetUnitTypeId(V8I)==1160786511 then
call UnitRemoveAbility(V8I,1093808951)
call UnitAddAbility(V8I,1093808706)
call UnitRemoveAbility(V8I,1093808706)
if REI(V8I,F20[J50])!=null then
call UnitAddAbility(V8I,1093808951)
endif
endif
call UnitRemoveAbility(V8I,1093808966)
endfunction
function IL1 takes nothing returns boolean
if GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),E20,ALLIANCE_SHARED_CONTROL)==true and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false then
set EO0=EO0+1
endif
return false
endfunction
function IM1 takes unit u,player p,real x,real y,boolean IN1 returns nothing
local group g=ZJI()
set EO0=0
set E20=p
call GroupEnumUnitsSelected(g,p,Condition(function IL1))
if EO0==0 and GetLocalPlayer()==p then
if IN1==false then
call ClearSelection()
call SelectUnit(u,true)
endif
call PanCameraToTimed(x,y,0)
endif
set EO0=0
call ZYI(g)
set g=null
endfunction
function IS1 takes unit MKI returns boolean
return GetUnitTypeId(MKI)==1211117641 or GetUnitTypeId(MKI)==1211117642
endfunction
function IT1 takes unit IR1 returns nothing
local integer IP1
if REI(IR1,F20[VX0])!=null and GetUnitTypeId(IR1)!=1211117642 then
set IP1=R2I(GetItemCharges(REI(IR1,F20[VX0]))*0.67)
if GetItemCharges(REI(IR1,F20[VX0]))==1 then
set IP1=0
endif
call SetItemCharges(REI(IR1,F20[VX0]),IP1)
call AddHeroXP(IR1,GetHeroXP(KO0[GetPlayerId(GetOwningPlayer(IR1))]),true)
call RemoveUnit(KO0[GetPlayerId(GetOwningPlayer(IR1))])
endif
endfunction
function IQ1 takes unit IU1 returns nothing
local integer V0I=GetHandleId(GetOwningPlayer(IU1))
local unit O01=(LoadUnitHandle(ZY,(V0I),(699)))
local unit OI1=(LoadUnitHandle(ZY,(V0I),(700)))
local unit O11=(LoadUnitHandle(ZY,(V0I),(701)))
local unit OO1=(LoadUnitHandle(ZY,(V0I),(702)))
local unit O21=(LoadUnitHandle(ZY,(V0I),(703)))
local unit O31
set O31=O01
if O31!=null then
call RemoveUnit(O31)
endif
set O31=OI1
if O31!=null then
call RemoveUnit(O31)
endif
set O31=O11
if O31!=null then
call RemoveUnit(O31)
endif
set O31=OO1
if O31!=null then
call RemoveUnit(O31)
endif
set O31=O21
if O31!=null then
call RemoveUnit(O31)
endif
endfunction
function O41 takes nothing returns boolean
call ZSI(GetTriggeringTrigger())
set LE0=false
return false
endfunction
function O51 takes unit O61 returns nothing
local integer V0I=GetHandleId(GetOwningPlayer(O61))
local unit O01=(LoadUnitHandle(ZY,(V0I),(699)))
local unit OI1=(LoadUnitHandle(ZY,(V0I),(700)))
local unit O11=(LoadUnitHandle(ZY,(V0I),(701)))
local unit OO1=(LoadUnitHandle(ZY,(V0I),(702)))
local unit O21=(LoadUnitHandle(ZY,(V0I),(703)))
local unit O31
local real x=GetUnitX(O01)
local real y=GetUnitY(O01)
local trigger t
if LE0==false then
if VLI(GetOwningPlayer(O01))then
set x=GetRectCenterX(A4)
set y=GetRectCenterY(A4)
else
set x=GetRectCenterX(T3)
set y=GetRectCenterY(T3)
endif
else
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function O41))
endif
set O31=O01
if O31!=null and O61!=O31 then
call ReviveHero(O31,x,y,false)
call SetUnitX(O31,x)
call SetUnitY(O31,y)
call IJ1(O31)
call SetUnitPathing(O31,true)
if JV0 then
call SetUnitState(O31,UNIT_STATE_MANA,10000)
endif
endif
set O31=OI1
if O31!=null and O61!=O31 then
call ReviveHero(O31,x,y,false)
call SetUnitX(O31,x)
call SetUnitY(O31,y)
call IJ1(O31)
call SetUnitPathing(O31,true)
if JV0 then
call SetUnitState(O31,UNIT_STATE_MANA,10000)
endif
endif
set O31=O11
if O31!=null and O61!=O31 then
call ReviveHero(O31,x,y,false)
call SetUnitX(O31,x)
call SetUnitY(O31,y)
call IJ1(O31)
call SetUnitPathing(O31,true)
if JV0 then
call SetUnitState(O31,UNIT_STATE_MANA,10000)
endif
endif
set O31=OO1
if O31!=null and O61!=O31 then
call ReviveHero(O31,x,y,false)
call SetUnitX(O31,x)
call SetUnitY(O31,y)
call IJ1(O31)
call SetUnitPathing(O31,true)
if JV0 then
call SetUnitState(O31,UNIT_STATE_MANA,10000)
endif
endif
set O31=O21
if O31!=null and O61!=O31 then
call ReviveHero(O31,x,y,false)
call SetUnitX(O31,x)
call SetUnitY(O31,y)
call IJ1(O31)
call SetUnitPathing(O31,true)
if JV0 then
call SetUnitState(O31,UNIT_STATE_MANA,10000)
endif
endif
endfunction
function O71 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local player VRI=GetOwningPlayer(Y9I)
local real x
local real y
local integer IP1
set AJ[GetPlayerId(GetOwningPlayer((Y9I)))]=false
if VLI(GetOwningPlayer(Y9I))then
set x=GetRectCenterX(A4)
set y=GetRectCenterY(A4)
else
set x=GetRectCenterX(T3)
set y=GetRectCenterY(T3)
endif
call TimerStart(F0[GetPlayerId(VRI)],0.0,false,null)
if IS1(Y9I)then
call O51(Y9I)
else
call IM1(Y9I,VRI,x,y,false)
endif
call SetUnitX(Y9I,x)
call SetUnitY(Y9I,y)
call IJ1(Y9I)
call SetUnitPathing(Y9I,true)
if REI(Y9I,F20[VX0])!=null and GetUnitTypeId(Y9I)!=1211117642 then
set IP1=(R2I(((GetItemCharges(REI(Y9I,F20[VX0]))*0.67)*1.0)))
if GetItemCharges(REI(Y9I,F20[VX0]))==1 then
set IP1=0
endif
call SetItemCharges(REI(Y9I,F20[VX0]),IP1)
call AddHeroXP(Y9I,GetHeroXP(KO0[GetPlayerId(GetOwningPlayer(Y9I))]),true)
call RemoveUnit(KO0[GetPlayerId(GetOwningPlayer(Y9I))])
endif
endfunction
function O91 takes unit V8I returns nothing
local integer OA1=GetUnitPointValue(V8I)
local unit OB1
if(OA1==34)then
call ExecuteFunc("OC1")
call ExecuteFunc("OD1")
call ExecuteFunc("OE1")
elseif(OA1==37)then
call ExecuteFunc("OF1")
call ExecuteFunc("OG1")
call ExecuteFunc("OH1")
call ExecuteFunc("OZ1")
elseif(OA1==38)then
call ExecuteFunc("OV1")
call ExecuteFunc("OW1")
call ExecuteFunc("OX1")
call ExecuteFunc("OY1")
elseif(OA1==32)then
call ExecuteFunc("OJ1")
call ExecuteFunc("OK1")
call ExecuteFunc("OL1")
elseif(OA1==52)then
call ExecuteFunc("OM1")
call ExecuteFunc("ON1")
call ExecuteFunc("OS1")
call ExecuteFunc("OT1")
elseif(OA1==31)then
call ExecuteFunc("OR1")
call ExecuteFunc("OP1")
elseif(OA1==24)then
call ExecuteFunc("OQ1")
call ExecuteFunc("OU1")
call ExecuteFunc("A01")
call ExecuteFunc("AI1")
elseif(OA1==5)then
call ExecuteFunc("A11")
call ExecuteFunc("AO1")
elseif(OA1==8)then
call ExecuteFunc("A21")
call ExecuteFunc("A31")
call ExecuteFunc("A41")
call ExecuteFunc("A51")
call ExecuteFunc("A61")
elseif(OA1==3)then
call ExecuteFunc("A71")
call ExecuteFunc("A81")
call ExecuteFunc("A91")
call ExecuteFunc("AA1")
elseif(OA1==95)then
call ExecuteFunc("AB1")
call ExecuteFunc("AC1")
call ExecuteFunc("AD1")
call ExecuteFunc("AE1")
elseif(OA1==20)then
call ExecuteFunc("AF1")
call ExecuteFunc("AG1")
call ExecuteFunc("AH1")
call ExecuteFunc("AZ1")
elseif(OA1==12)then
call ExecuteFunc("AV1")
call ExecuteFunc("AW1")
call ExecuteFunc("AX1")
elseif(OA1==16)then
call ExecuteFunc("AY1")
call ExecuteFunc("AJ1")
call ExecuteFunc("AK1")
call ExecuteFunc("AL1")
call ExecuteFunc("AM1")
call ExecuteFunc("AN1")
elseif(OA1==25)then
call ExecuteFunc("AS1")
call ExecuteFunc("AT1")
elseif(OA1==4)then
call ExecuteFunc("AR1")
call ExecuteFunc("AP1")
call ExecuteFunc("AQ1")
call ExecuteFunc("AU1")
call ExecuteFunc("B01")
call SetUnitPathing(V8I,false)
call DisableTrigger(JX0)
set ND0=true
set OB1=CreateUnit(GetOwningPlayer(V8I),GetUnitTypeId(V8I),GetUnitX(V8I),GetUnitY(V8I),GetUnitFacing(V8I))
call SaveBoolean(ZY,(GetHandleId(OB1)),(85),(true))
set L1[GetPlayerId(GetOwningPlayer(V8I))]=OB1
call SetUnitPathing(OB1,false)
call SetUnitPosition(OB1,GetUnitX(V8I),GetUnitY(V8I))
if X0 then
call SetHeroXP(OB1,GetHeroXP(V8I),false)
call UnitAddItem(OB1,UnitItemInSlot(V8I,0))
call UnitAddItem(OB1,UnitItemInSlot(V8I,1))
call UnitAddItem(OB1,UnitItemInSlot(V8I,2))
call UnitAddItem(OB1,UnitItemInSlot(V8I,3))
call UnitAddItem(OB1,UnitItemInSlot(V8I,4))
call UnitAddItem(OB1,UnitItemInSlot(V8I,5))
endif
call YKI(V8I)
call EnableTrigger(JX0)
call SetUnitPathing(OB1,true)
call ClearSelectionForPlayer(GetOwningPlayer(OB1))
call SelectUnitAddForPlayer(OB1,GetOwningPlayer(OB1))
elseif(OA1==7)then
call ExecuteFunc("BI1")
call ExecuteFunc("B11")
call ExecuteFunc("BO1")
elseif(OA1==18)then
call ExecuteFunc("B21")
call ExecuteFunc("B31")
elseif(OA1==36)then
call ExecuteFunc("B41")
elseif(OA1==21)then
call ExecuteFunc("B51")
call ExecuteFunc("B61")
call ExecuteFunc("B71")
call ExecuteFunc("B81")
elseif(OA1==14)then
call ExecuteFunc("B91")
call ExecuteFunc("BA1")
call ExecuteFunc("BB1")
call ExecuteFunc("BC1")
call ExecuteFunc("BD1")
elseif(OA1==13)then
call ExecuteFunc("BE1")
call ExecuteFunc("BF1")
call ExecuteFunc("GS")
call ExecuteFunc("BG1")
elseif(OA1==26)then
call ExecuteFunc("BH1")
call ExecuteFunc("BZ1")
call ExecuteFunc("BV1")
elseif(OA1==9)then
call ExecuteFunc("II")
call ExecuteFunc("BW1")
call ExecuteFunc("BX1")
call ExecuteFunc("BY1")
elseif(OA1==10)then
call ExecuteFunc("BJ1")
call ExecuteFunc("BK1")
call ExecuteFunc("BL1")
call ExecuteFunc("BM1")
call ExecuteFunc("BN1")
call ExecuteFunc("BS1")
call ExecuteFunc("BT1")
call ExecuteFunc("BR1")
elseif(OA1==23)then
call ExecuteFunc("BP1")
call ExecuteFunc("BQ1")
call ExecuteFunc("BU1")
call ExecuteFunc("C01")
elseif(OA1==19)then
call ExecuteFunc("CI1")
call ExecuteFunc("C11")
call ExecuteFunc("CO1")
elseif(OA1==22)then
call ExecuteFunc("C21")
call ExecuteFunc("C31")
call ExecuteFunc("C41")
call ExecuteFunc("C51")
elseif(OA1==17)then
call ExecuteFunc("C61")
call ExecuteFunc("C71")
elseif(OA1==1)then
call ExecuteFunc("C81")
call ExecuteFunc("C91")
call ExecuteFunc("CA1")
elseif(OA1==2)then
call ExecuteFunc("CB1")
call ExecuteFunc("CC1")
call ExecuteFunc("CD1")
call ExecuteFunc("CE1")
elseif(OA1==27)then
call ExecuteFunc("CF1")
call ExecuteFunc("CG1")
call ExecuteFunc("CH1")
call ExecuteFunc("CZ1")
call ExecuteFunc("CV1")
elseif(OA1==82)then
call ExecuteFunc("CW1")
call ExecuteFunc("CX1")
call ExecuteFunc("CY1")
call ExecuteFunc("CJ1")
elseif(OA1==75)then
call ExecuteFunc("CK1")
call ExecuteFunc("CL1")
call ExecuteFunc("CM1")
elseif(OA1==83)then
call ExecuteFunc("CN1")
call ExecuteFunc("CS1")
call ExecuteFunc("CT1")
call ExecuteFunc("CR1")
elseif(OA1==59)then
call ExecuteFunc("CP1")
call ExecuteFunc("CQ1")
call ExecuteFunc("CU1")
call ExecuteFunc("D01")
elseif(OA1==57)then
call ExecuteFunc("DI1")
call ExecuteFunc("D11")
elseif(OA1==69)then
call ExecuteFunc("DO1")
call ExecuteFunc("D21")
call ExecuteFunc("D31")
call ExecuteFunc("D41")
call ExecuteFunc("D51")
elseif(OA1==100)then
call ExecuteFunc("D61")
call ExecuteFunc("D71")
call ExecuteFunc("D81")
elseif(OA1==102)then
call ExecuteFunc("D91")
elseif(OA1==64)then
call ExecuteFunc("DA1")
call ExecuteFunc("DB1")
call ExecuteFunc("DC1")
elseif(OA1==55)then
call ExecuteFunc("DD1")
call ExecuteFunc("DE1")
call ExecuteFunc("DF1")
elseif(OA1==61)then
call ExecuteFunc("DG1")
call ExecuteFunc("DH1")
call ExecuteFunc("DZ1")
elseif(OA1==76)then
call ExecuteFunc("DV1")
call ExecuteFunc("DW1")
call ExecuteFunc("DX1")
call ExecuteFunc("DY1")
elseif(OA1==80)then
call ExecuteFunc("DJ1")
call ExecuteFunc("DK1")
call ExecuteFunc("DL1")
call ExecuteFunc("DM1")
call ExecuteFunc("NL")
elseif(OA1==62)then
call ExecuteFunc("DN1")
call ExecuteFunc("DS1")
call ExecuteFunc("DT1")
elseif(OA1==60)then
call ExecuteFunc("DR1")
call ExecuteFunc("DP1")
call ExecuteFunc("DQ1")
elseif(OA1==77)then
call ExecuteFunc("DU1")
call ExecuteFunc("E01")
call ExecuteFunc("EI1")
call ExecuteFunc("E11")
elseif(OA1==73)then
call ExecuteFunc("NW")
elseif(OA1==81)then
call ExecuteFunc("EO1")
call ExecuteFunc("E21")
call ExecuteFunc("E31")
elseif(OA1==66)then
call ExecuteFunc("E41")
elseif(OA1==78)then
call ExecuteFunc("E51")
call ExecuteFunc("E61")
call ExecuteFunc("E71")
call ExecuteFunc("E81")
elseif(OA1==99)then
call ExecuteFunc("E91")
call ExecuteFunc("EA1")
call ExecuteFunc("EB1")
call ExecuteFunc("EC1")
elseif(OA1==74)then
call ExecuteFunc("ED1")
call ExecuteFunc("EE1")
call ExecuteFunc("EF1")
call ExecuteFunc("EG1")
elseif(OA1==54)then
call ExecuteFunc("EH1")
call ExecuteFunc("EZ1")
elseif(OA1==70)then
call ExecuteFunc("EV1")
call ExecuteFunc("EW1")
call ExecuteFunc("EX1")
elseif(OA1==56)then
call ExecuteFunc("EY1")
call ExecuteFunc("EJ1")
call ExecuteFunc("EK1")
call ExecuteFunc("EL1")
elseif(OA1==79)then
call ExecuteFunc("EM1")
call ExecuteFunc("EN1")
call ExecuteFunc("ES1")
call ExecuteFunc("ET1")
elseif(OA1==68)then
call ExecuteFunc("ER1")
call ExecuteFunc("EP1")
elseif(OA1==84)then
call ExecuteFunc("EQ1")
call ExecuteFunc("EU1")
call ExecuteFunc("F01")
call ExecuteFunc("FI1")
elseif(OA1==85)then
call ExecuteFunc("F11")
call ExecuteFunc("FO1")
call ExecuteFunc("F21")
call ExecuteFunc("F31")
call ExecuteFunc("F41")
elseif(OA1==86)then
call ExecuteFunc("F51")
call ExecuteFunc("F61")
call ExecuteFunc("F71")
call ExecuteFunc("F81")
elseif(OA1==87)then
call ExecuteFunc("F91")
call ExecuteFunc("FA1")
call ExecuteFunc("FB1")
call ExecuteFunc("FC1")
elseif(OA1==33)then
call ExecuteFunc("FD1")
call ExecuteFunc("FE1")
elseif(OA1==39)then
call ExecuteFunc("FF1")
call ExecuteFunc("FG1")
call ExecuteFunc("FH1")
elseif(OA1==88)then
call ExecuteFunc("FZ1")
call ExecuteFunc("FV1")
call ExecuteFunc("FW1")
call ExecuteFunc("FX1")
elseif(OA1==40)then
call ExecuteFunc("FY1")
call ExecuteFunc("FJ1")
call ExecuteFunc("FK1")
call ExecuteFunc("FL1")
elseif OA1==89 then
call ExecuteFunc("FM1")
call ExecuteFunc("FN1")
elseif OA1==90 then
call ExecuteFunc("FS1")
call ExecuteFunc("FT1")
call ExecuteFunc("FR1")
call ExecuteFunc("FP1")
elseif OA1==71 then
call ExecuteFunc("FQ1")
call ExecuteFunc("FU1")
call ExecuteFunc("G01")
call ExecuteFunc("GI1")
elseif OA1==93 then
call ExecuteFunc("G11")
call ExecuteFunc("GO1")
call ExecuteFunc("G21")
call ExecuteFunc("G31")
elseif OA1==42 then
call ExecuteFunc("G41")
call ExecuteFunc("G51")
call ExecuteFunc("G61")
call ExecuteFunc("G71")
elseif OA1==91 then
call ExecuteFunc("G81")
call ExecuteFunc("G91")
call ExecuteFunc("GA1")
call ExecuteFunc("GB1")
call ExecuteFunc("GC1")
call ExecuteFunc("GD1")
elseif OA1==92 then
call ExecuteFunc("GE1")
call ExecuteFunc("GF1")
call ExecuteFunc("GG1")
call ExecuteFunc("GH1")
elseif OA1==41 then
call ExecuteFunc("GZ1")
call ExecuteFunc("GV1")
call ExecuteFunc("GW1")
call ExecuteFunc("GX1")
call ExecuteFunc("GY1")
elseif OA1==43 then
call ExecuteFunc("GJ1")
call ExecuteFunc("GK1")
call ExecuteFunc("GL1")
call ExecuteFunc("GM1")
elseif OA1==44 then
call ExecuteFunc("GN1")
call ExecuteFunc("GS1")
call ExecuteFunc("GT1")
call ExecuteFunc("GR1")
elseif OA1==72 then
call ExecuteFunc("GP1")
call ExecuteFunc("GQ1")
call ExecuteFunc("GU1")
call ExecuteFunc("H01")
elseif OA1==94 then
call ExecuteFunc("HI1")
elseif OA1==6 then
call ExecuteFunc("H11")
call ExecuteFunc("HO1")
call ExecuteFunc("H21")
elseif OA1==104 then
call ExecuteFunc("H31")
call ExecuteFunc("H41")
elseif OA1==65 then
call ExecuteFunc("H51")
call ExecuteFunc("H61")
call ExecuteFunc("H71")
elseif OA1==58 then
call ExecuteFunc("H81")
call ExecuteFunc("H91")
call ExecuteFunc("HA1")
elseif OA1==63 then
call ExecuteFunc("HB1")
call ExecuteFunc("HC1")
elseif OA1==45 then
call ExecuteFunc("HD1")
call ExecuteFunc("HE1")
call ExecuteFunc("HF1")
call ExecuteFunc("HG1")
elseif OA1==46 then
call ExecuteFunc("HH1")
call ExecuteFunc("HZ1")
call ExecuteFunc("HV1")
call ExecuteFunc("HW1")
elseif OA1==47 then
call ExecuteFunc("HX1")
call ExecuteFunc("HY1")
call ExecuteFunc("HJ1")
call ExecuteFunc("HK1")
elseif OA1==11 then
call ExecuteFunc("HL1")
call ExecuteFunc("HM1")
elseif OA1==96 then
call ExecuteFunc("HN1")
call ExecuteFunc("HS1")
call ExecuteFunc("HT1")
call ExecuteFunc("HR1")
elseif OA1==15 then
call ExecuteFunc("HP1")
call ExecuteFunc("HQ1")
call ExecuteFunc("HU1")
call ExecuteFunc("Z01")
elseif OA1==97 then
call ExecuteFunc("ZI1")
call ExecuteFunc("Z11")
call ExecuteFunc("ZO1")
call ExecuteFunc("Z21")
call ExecuteFunc("Z31")
elseif OA1==98 then
call ExecuteFunc("Z41")
call ExecuteFunc("Z51")
call ExecuteFunc("Z61")
call ExecuteFunc("Z71")
call ExecuteFunc("Z81")
elseif OA1==67 then
call ExecuteFunc("Z91")
elseif OA1==28 then
call ExecuteFunc("ZA1")
elseif OA1==51 then
call ExecuteFunc("ZB1")
call ExecuteFunc("ZC1")
call ExecuteFunc("ZD1")
call ExecuteFunc("ZE1")
call ExecuteFunc("ZF1")
call ExecuteFunc("ZG1")
elseif OA1==100 then
elseif OA1==101 then
call ExecuteFunc("ZH1")
call ExecuteFunc("ZZ1")
call ExecuteFunc("ZV1")
call ExecuteFunc("ZW1")
elseif OA1==48 then
call ExecuteFunc("ZX1")
call ExecuteFunc("ZY1")
call ExecuteFunc("ZJ1")
call ExecuteFunc("ZK1")
elseif OA1==49 then
call ExecuteFunc("ZL1")
call ExecuteFunc("ZM1")
call ExecuteFunc("ZN1")
call ExecuteFunc("ZS1")
elseif OA1==29 then
call ExecuteFunc("ZT1")
call ExecuteFunc("ZR1")
call ExecuteFunc("ZP1")
call ExecuteFunc("ZQ1")
elseif OA1==50 then
call ExecuteFunc("ZU1")
call ExecuteFunc("V01")
call ExecuteFunc("VI1")
call ExecuteFunc("V11")
elseif OA1==30 then
call ExecuteFunc("VO1")
elseif OA1==53 then
call ExecuteFunc("V21")
call ExecuteFunc("V31")
call ExecuteFunc("V41")
call ExecuteFunc("V51")
elseif OA1==103 then
call ExecuteFunc("V61")
endif
endfunction
function V71 takes player H8I,string HTI returns nothing
if IsPlayerInForce(GetLocalPlayer(),H7I(H8I))then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,I3,40,C0[GetPlayerId(H8I)]+(CR0[GetPlayerId((H8I))])+"|r "+HTI)
endif
endfunction
function Main_AllHasHero takes nothing returns boolean
return L1[GetPlayerId(CO[1])]!=null and L1[GetPlayerId(CO[2])]!=null and L1[GetPlayerId(CO[3])]!=null and L1[GetPlayerId(CO[4])]!=null and L1[GetPlayerId(CO[5])]!=null and L1[GetPlayerId(DO[1])]!=null and L1[GetPlayerId(DO[2])]!=null and L1[GetPlayerId(DO[3])]!=null and L1[GetPlayerId(DO[4])]!=null and L1[GetPlayerId(DO[5])]!=null
endfunction
function V81 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
set UM=true
call ZSI(t)
call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_MASKED,SM0,SN0,700,false,false))
call DestroyFogModifier(CreateFogModifierRadius(DO[0],FOG_OF_WAR_MASKED,SM0,SN0,700,false,false))
set t=null
return false
endfunction
function V91 takes unit u returns boolean
return GetUnitTypeId(u)!=1211117645 and GetUnitTypeId(u)!=1211119431 and GetUnitTypeId(u)!=1211117657 and GetUnitTypeId(u)!=1211117642 and GetUnitTypeId(u)!=1211122232
endfunction
function VA1 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetTriggerUnit())==false and HaveSavedBoolean(ZY,GetHandleId(GetTriggerUnit()),85)==false and V91(GetTriggerUnit())
endfunction
function VB1 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1848651843
endfunction
function VC1 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function VD1 takes player VRI returns nothing
local group U4I=ZJI()
local boolexpr VE1=Condition(function VB1)
call GroupEnumUnitsOfPlayer(U4I,VRI,VE1)
call ForGroup(U4I,function VC1)
call ZYI(U4I)
endfunction
function VF1 takes nothing returns nothing
call VD1(CO[1])
call VD1(CO[2])
call VD1(CO[3])
call VD1(CO[4])
call VD1(CO[5])
call VD1(DO[1])
call VD1(DO[2])
call VD1(DO[3])
call VD1(DO[4])
call VD1(DO[5])
endfunction
function VG1 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1852010352
endfunction
function VH1 takes nothing returns nothing
if PW0 then
call UnitRemoveAbility(CL0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743686)
call UnitRemoveAbility(CL0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743685)
call UnitRemoveAbility(CL0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743688)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093683508)==0 then
call UnitAddAbility(GetEnumUnit(),1093683508)
endif
endfunction
function VZ1 takes player p returns nothing
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,p,Condition(function VG1))
call ForGroup(g,function VH1)
call ZYI(g)
set g=null
endfunction
function DelayedHeroTech_Helper takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer VWI=(LoadInteger(ZY,(V0I),(86)))
call W2I(VWI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function VV1 takes unit V8I,player p returns string
local string s=GetObjectName(1848656962)
set s=PAI(s,"$hero",GetUnitName(V8I))
set s=PAI(s,"$p",(CR0[GetPlayerId((p))]))
return s
endfunction
function VW1 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local player VRI=GetOwningPlayer(Y9I)
local real x
local real y
local region r=CreateRegion()
local player VX1=VRI
local item NFI
local unit V8I=Y9I
local trigger t
if X0==false then
call Q4I(GetOwningPlayer(Y9I))
endif
if GetObjectName(1848657992)=="Language: English"and(DG0[(GetUnitPointValue(Y9I))]!="")then
call DisplayTimedTextToPlayer(VRI,0,0,4,"A |c006699CC-tips|r command is available if you would like some pointers for this hero")
endif
if SL0[GetPlayerId(VRI)]==true then
call PTI(VRI,GetUnitPointValue(Y9I))
endif
if UM==false and(L1[GetPlayerId(CO[1])]!=null and L1[GetPlayerId(CO[2])]!=null and L1[GetPlayerId(CO[3])]!=null and L1[GetPlayerId(CO[4])]!=null and L1[GetPlayerId(CO[5])]!=null and L1[GetPlayerId(DO[1])]!=null and L1[GetPlayerId(DO[2])]!=null and L1[GetPlayerId(DO[3])]!=null and L1[GetPlayerId(DO[4])]!=null and L1[GetPlayerId(DO[5])]!=null)then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,7,false)
call TriggerAddCondition(t,Condition(function V81))
set t=null
endif
set AJ[GetPlayerId(GetOwningPlayer((Y9I)))]=false
call RegionAddRect(r,PA)
if C3 and H3==false then
set F3[GetPlayerId(VRI)]=true
set VRI=(LoadPlayerHandle(ZY,(2000),(550+GetPlayerId(VRI))))
call SetUnitOwner(Y9I,VRI,true)
endif
if VLI(GetOwningPlayer(Y9I))then
if IsUnitInRegion(r,Y9I)then
set x=GetRandomReal(GetRectMinX(A4),GetRectMaxX(A4))
set y=GetRandomReal(GetRectMinY(A4),GetRectMaxY(A4))
else
set x=GetUnitX(Y9I)
set y=GetUnitY(Y9I)
endif
else
if IsUnitInRegion(r,Y9I)then
set x=GetRandomReal(GetRectMinX(T3),GetRectMaxX(T3))
set y=GetRandomReal(GetRectMinY(T3),GetRectMaxY(T3))
else
set x=GetUnitX(Y9I)
set y=GetUnitY(Y9I)
endif
endif
set D3[GetPlayerId(VRI)]=true
if(not C3 or H3)then
if R30==false and TM==false then
call PanCameraToTimedForPlayer(VRI,x,y,0)
endif
call ClearSelectionForPlayer(VRI)
call SelectUnitAddForPlayer(Y9I,VRI)
endif
call SetUnitX(Y9I,x)
call SetUnitY(Y9I,y)
set L1[GetPlayerId(VRI)]=Y9I
call P5I(VRI,"9",GetUnitTypeId(Y9I))
if C3 and H3==false then
call W4I(VX1)
else
call W4I(VRI)
endif
call SaveBoolean(ZY,(GetHandleId(Y9I)),(85),(true))
if not G2 then
set R[GetUnitPointValue(Y9I)]=true
call W2I(GetUnitTypeId(Y9I))
endif
if X0 then
if VLI(VRI)then
set R1[0]=R1[0]+1
else
set R1[1]=R1[1]+1
endif
set OO[GetPlayerId(VRI)]=OO[GetPlayerId(VRI)]+1
if OO[GetPlayerId(GetOwningPlayer(Y9I))]>1 and Y9I!=IO[GetPlayerId(GetOwningPlayer(Y9I))]then
call IT1(IO[GetPlayerId(GetOwningPlayer(Y9I))])
call DisableTrigger(JX0)
call SetHeroXP(Y9I,GetHeroXP(IO[GetPlayerId(GetOwningPlayer(Y9I))]),false)
call UnitAddItem(Y9I,UnitItemInSlot(IO[GetPlayerId(GetOwningPlayer(Y9I))],0))
call UnitAddItem(Y9I,UnitItemInSlot(IO[GetPlayerId(GetOwningPlayer(Y9I))],1))
call UnitAddItem(Y9I,UnitItemInSlot(IO[GetPlayerId(GetOwningPlayer(Y9I))],2))
call UnitAddItem(Y9I,UnitItemInSlot(IO[GetPlayerId(GetOwningPlayer(Y9I))],3))
call UnitAddItem(Y9I,UnitItemInSlot(IO[GetPlayerId(GetOwningPlayer(Y9I))],4))
call UnitAddItem(Y9I,UnitItemInSlot(IO[GetPlayerId(GetOwningPlayer(Y9I))],5))
call EnableTrigger(JX0)
if IS1(IO[GetPlayerId(GetOwningPlayer(Y9I))])then
call IQ1(IO[GetPlayerId(GetOwningPlayer(Y9I))])
else
call YKI(IO[GetPlayerId(GetOwningPlayer(Y9I))])
endif
endif
endif
if C3 then
if TimerGetElapsed(M)>60 then
call V71(VRI,GetObjectName(1848652357)+" "+GetUnitName(Y9I))
elseif S0[GetPlayerId(VX1)]==true then
call V71(VRI,VV1(Y9I,VX1))
else
call SetPlayerState(VX1,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(VX1,PLAYER_STATE_RESOURCE_GOLD)+250)
call V71(VRI,GetObjectName(1848656945)+" "+GetUnitName(Y9I)+" "+GetObjectName(1848656944)+" "+(CR0[GetPlayerId((VX1))]))
endif
elseif J2==false or VRI==XO then
if(D0[GetPlayerId(GetOwningPlayer(Y9I))]==true and J2==false)then
call V71(VRI,GetObjectName(1848656949)+" "+GetUnitName(Y9I)+".")
elseif((S0[GetPlayerId(VRI)]==true and X0==false)or Y0 or J0 or S2)then
call V71(VRI,GetObjectName(1848656947)+" "+GetUnitName(Y9I)+".")
else
call V71(VRI,GetObjectName(1848656946)+" "+GetUnitName(Y9I)+".")
endif
endif
if YK then
if C3 then
call VD1(VX1)
else
call VD1(VRI)
endif
endif
if(R30 or TM)and YK then
call VD1(VRI)
endif
call VZ1(VRI)
if(GetUnitTypeId(Y9I)==1160785973)then
call DisplayTimedTextToPlayer(VRI,0,I3,60.00," ")
call DisplayTimedTextToPlayer(VRI,0,I3,60.00,"|c00ff0303"+GetObjectName(1848653384)+GetObjectName(1848656706)+" "+GetObjectName(1848653381)+"|r")
elseif GetUnitTypeId(Y9I)==1328558154 or GetUnitTypeId(Y9I)==1311781174 or GetUnitTypeId(Y9I)==1430468913 or GetUnitTypeId(Y9I)==1162032181 then
call DisplayTimedTextToPlayer(VRI,0,I3,10.00," ")
call DisplayTimedTextToPlayer(VRI,0,I3,10.00,"|c00ff0303"+GetObjectName(1848657715)+"|r")
endif
if(GetUnitTypeId(Y9I)==1160786242)then
call DisplayTimedTextToPlayer(VRI,0,I3,30.00," ")
call DisplayTimedTextToPlayer(VRI,0,I3,30.00,"|c00ff0303"+GetObjectName(1848653392)+" "+GetObjectName(1848653397)+"|r")
endif
if(S0[GetPlayerId(VRI)]==false)then
if(K2)then
call SetPlayerState(VRI,PLAYER_STATE_RESOURCE_GOLD,175+GetPlayerState(VRI,PLAYER_STATE_RESOURCE_GOLD))
endif
endif
if HaveSavedBoolean(ZY,600+GetUnitPointValue(Y9I),87)==false then
call SaveBoolean(ZY,(600+GetUnitPointValue(Y9I)),(87),(true))
call O91(Y9I)
endif
set OK=Y9I
call ExecuteFunc("VY1")
if SA0[GetPlayerId(GetLocalPlayer())]==false then
call SetPlayerName(VRI,(CR0[GetPlayerId((VRI))])+" ("+VOI(L1[GetPlayerId(VRI)])+")")
endif
call RemoveRegion(r)
endfunction
function VK1 takes nothing returns boolean
return IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==true
endfunction
function VL1 takes nothing returns nothing
local unit V8I=GetSoldUnit()
local player VRI=GetOwningPlayer(V8I)
call W4I(VRI)
endfunction
function VN1 takes nothing returns boolean
local integer WLI=1
if R0 then
set WLI=2
endif
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD)+WLI)
return false
endfunction
function VT1 takes nothing returns nothing
local integer J1I=R2I(TimerGetElapsed(M)-N)
local integer NYI=J1I/60-1/2
local integer NJI=ModuloInteger(J1I,60)
if PK then
call NXI(NYI,NJI,false)
elseif TK==false then
set J1I=R2I(16-TimerGetElapsed(M))
set NYI=J1I/60-1/2
set NJI=ModuloInteger(J1I,60)
call NXI(NYI,NJI,true)
endif
endfunction
function VP1 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and(LoadInteger(E60,(GetSpellAbilityId()),(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))))>0 then
call TimerStart(E70[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))],(LoadInteger(E60,(GetSpellAbilityId()),(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())))),false,null)
endif
if GetSpellAbilityId()==1093677655 then
call TimerStart(E70[GetPlayerId((GetOwningPlayer(GetTriggerUnit())))],0,false,null)
endif
return false
endfunction
function VQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VP1))
set i=0
loop
exitwhen(i>13)
set E70[i]=CreateTimer()
set i=i+1
endloop
set E60=InitHashtable()
call SaveInteger(E60,(1093742923),(1),(90))
call SaveInteger(E60,(1093742923),(2),(80))
call SaveInteger(E60,(1093742923),(3),(70))
call SaveInteger(E60,(1093685042),(1),(80))
call SaveInteger(E60,(1093685042),(2),(75))
call SaveInteger(E60,(1093685042),(3),(70))
call SaveInteger(E60,(1093810233),(1),(45))
call SaveInteger(E60,(1093810233),(2),(45))
call SaveInteger(E60,(1093810233),(3),(45))
call SaveInteger(E60,(1093682248),(1),(150))
call SaveInteger(E60,(1093682248),(2),(130))
call SaveInteger(E60,(1093682248),(3),(110))
call SaveInteger(E60,(1093750594),(1),(150))
call SaveInteger(E60,(1093750594),(2),(130))
call SaveInteger(E60,(1093750594),(3),(110))
call SaveInteger(E60,(1093682514),(1),(150))
call SaveInteger(E60,(1093682514),(2),(150))
call SaveInteger(E60,(1093682514),(3),(150))
call SaveInteger(E60,(1093684561),(1),(180))
call SaveInteger(E60,(1093684561),(2),(160))
call SaveInteger(E60,(1093684561),(3),(140))
call SaveInteger(E60,(1093747254),(1),(160))
call SaveInteger(E60,(1093747254),(2),(140))
call SaveInteger(E60,(1093747254),(3),(120))
call SaveInteger(E60,(1093752648),(1),(80))
call SaveInteger(E60,(1093752648),(2),(80))
call SaveInteger(E60,(1093752648),(3),(80))
call SaveInteger(E60,(1093746993),(1),(100))
call SaveInteger(E60,(1093746993),(2),(100))
call SaveInteger(E60,(1093746993),(3),(100))
call SaveInteger(E60,(1093678938),(1),(115))
call SaveInteger(E60,(1093678938),(2),(105))
call SaveInteger(E60,(1093678938),(3),(95))
call SaveInteger(E60,(1095656306),(1),(45))
call SaveInteger(E60,(1095656306),(2),(45))
call SaveInteger(E60,(1095656306),(3),(45))
call SaveInteger(E60,(1093687864),(1),(70))
call SaveInteger(E60,(1093687864),(2),(55))
call SaveInteger(E60,(1093687864),(3),(40))
call SaveInteger(E60,(1093747542),(1),(15))
call SaveInteger(E60,(1093747542),(2),(15))
call SaveInteger(E60,(1093747542),(3),(15))
call SaveInteger(E60,(1093677895),(1),(115))
call SaveInteger(E60,(1093677895),(2),(115))
call SaveInteger(E60,(1093677895),(3),(115))
call SaveInteger(E60,(1093810508),(1),(120))
call SaveInteger(E60,(1093810508),(2),(110))
call SaveInteger(E60,(1093810508),(3),(100))
call SaveInteger(E60,(1093685586),(1),(45))
call SaveInteger(E60,(1093685586),(2),(30))
call SaveInteger(E60,(1093685586),(3),(15))
call SaveInteger(E60,(1093747251),(1),(24))
call SaveInteger(E60,(1093747251),(2),(16))
call SaveInteger(E60,(1093747251),(3),(8))
call SaveInteger(E60,(1093678674),(1),(140))
call SaveInteger(E60,(1093678674),(2),(120))
call SaveInteger(E60,(1093678674),(3),(100))
call SaveInteger(E60,(1093747252),(1),(120))
call SaveInteger(E60,(1093747252),(2),(100))
call SaveInteger(E60,(1093747252),(3),(80))
call SaveInteger(E60,(1093682996),(1),(75))
call SaveInteger(E60,(1093682996),(2),(75))
call SaveInteger(E60,(1093682996),(3),(75))
call SaveInteger(E60,(1093747768),(1),(20))
call SaveInteger(E60,(1093747768),(2),(20))
call SaveInteger(E60,(1093747768),(3),(20))
call SaveInteger(E60,(1093810505),(1),(150))
call SaveInteger(E60,(1093810505),(2),(150))
call SaveInteger(E60,(1093810505),(3),(150))
call SaveInteger(E60,(1093682482),(1),(75))
call SaveInteger(E60,(1093682482),(2),(65))
call SaveInteger(E60,(1093682482),(3),(55))
call SaveInteger(E60,(1093750098),(1),(10))
call SaveInteger(E60,(1093750098),(2),(10))
call SaveInteger(E60,(1093750098),(3),(10))
call SaveInteger(E60,(1093677903),(1),(140))
call SaveInteger(E60,(1093677903),(2),(140))
call SaveInteger(E60,(1093677903),(3),(140))
call SaveInteger(E60,(1093685847),(1),(20))
call SaveInteger(E60,(1093685847),(2),(20))
call SaveInteger(E60,(1093685847),(3),(20))
call SaveInteger(E60,(1093684565),(1),(110))
call SaveInteger(E60,(1093684565),(2),(110))
call SaveInteger(E60,(1093684565),(3),(110))
call SaveInteger(E60,(1093681458),(1),(110))
call SaveInteger(E60,(1093681458),(2),(110))
call SaveInteger(E60,(1093681458),(3),(110))
call SaveInteger(E60,(1093686103),(1),(100))
call SaveInteger(E60,(1093686103),(2),(100))
call SaveInteger(E60,(1093686103),(3),(100))
call SaveInteger(E60,(1093679411),(1),(100))
call SaveInteger(E60,(1093679411),(2),(70))
call SaveInteger(E60,(1093679411),(3),(40))
call SaveInteger(E60,(1093677899),(1),(180))
call SaveInteger(E60,(1093677899),(2),(150))
call SaveInteger(E60,(1093677899),(3),(120))
call SaveInteger(E60,(1093747248),(1),(180))
call SaveInteger(E60,(1093747248),(2),(150))
call SaveInteger(E60,(1093747248),(3),(120))
call SaveInteger(E60,(1093685808),(1),(130))
call SaveInteger(E60,(1093685808),(2),(130))
call SaveInteger(E60,(1093685808),(3),(130))
call SaveInteger(E60,(1093682764),(1),(30))
call SaveInteger(E60,(1093682764),(2),(30))
call SaveInteger(E60,(1093682764),(3),(30))
call SaveInteger(E60,(1093747544),(1),(30))
call SaveInteger(E60,(1093747544),(2),(30))
call SaveInteger(E60,(1093747544),(3),(30))
call SaveInteger(E60,(1093677876),(1),(10))
call SaveInteger(E60,(1093677876),(2),(10))
call SaveInteger(E60,(1093677876),(3),(10))
call SaveInteger(E60,(1093743946),(1),(90))
call SaveInteger(E60,(1093743946),(2),(90))
call SaveInteger(E60,(1093743946),(3),(90))
call SaveInteger(E60,(1093682483),(1),(70))
call SaveInteger(E60,(1093682483),(2),(70))
call SaveInteger(E60,(1093682483),(3),(70))
call SaveInteger(E60,(1093678160),(1),(20))
call SaveInteger(E60,(1093678160),(2),(15))
call SaveInteger(E60,(1093678160),(3),(10))
call SaveInteger(E60,(1093684529),(1),(130))
call SaveInteger(E60,(1093684529),(2),(120))
call SaveInteger(E60,(1093684529),(3),(110))
call SaveInteger(E60,(1093747032),(1),(110))
call SaveInteger(E60,(1093747032),(2),(100))
call SaveInteger(E60,(1093747032),(3),(90))
call SaveInteger(E60,(1093678388),(1),(160))
call SaveInteger(E60,(1093678388),(2),(150))
call SaveInteger(E60,(1093678388),(3),(140))
call SaveInteger(E60,(1093677141),(1),(160))
call SaveInteger(E60,(1093677141),(2),(150))
call SaveInteger(E60,(1093677141),(3),(140))
call SaveInteger(E60,(1093683000),(1),(80))
call SaveInteger(E60,(1093683000),(2),(80))
call SaveInteger(E60,(1093683000),(3),(80))
call SaveInteger(E60,(1093678933),(1),(180))
call SaveInteger(E60,(1093678933),(2),(120))
call SaveInteger(E60,(1093678933),(3),(60))
call SaveInteger(E60,(1093684053),(1),(180))
call SaveInteger(E60,(1093684053),(2),(160))
call SaveInteger(E60,(1093684053),(3),(140))
call SaveInteger(E60,(1093748042),(1),(20))
call SaveInteger(E60,(1093748042),(2),(20))
call SaveInteger(E60,(1093748042),(3),(20))
call SaveInteger(E60,(1093681716),(1),(10))
call SaveInteger(E60,(1093681716),(2),(7))
call SaveInteger(E60,(1093681716),(3),(5))
call SaveInteger(E60,(1093749070),(1),(25))
call SaveInteger(E60,(1093749070),(2),(25))
call SaveInteger(E60,(1093749070),(3),(25))
call SaveInteger(E60,(1093683761),(1),(120))
call SaveInteger(E60,(1093683761),(2),(110))
call SaveInteger(E60,(1093683761),(3),(100))
call SaveInteger(E60,(1093747767),(1),(60))
call SaveInteger(E60,(1093747767),(2),(60))
call SaveInteger(E60,(1093747767),(3),(60))
call SaveInteger(E60,(1093750089),(1),(45))
call SaveInteger(E60,(1093750089),(2),(45))
call SaveInteger(E60,(1093750089),(3),(45))
call SaveInteger(E60,(1093747023),(1),(80))
call SaveInteger(E60,(1093747023),(2),(70))
call SaveInteger(E60,(1093747023),(3),(60))
call SaveInteger(E60,(1093752150),(1),(80))
call SaveInteger(E60,(1093752150),(2),(70))
call SaveInteger(E60,(1093752150),(3),(60))
call SaveInteger(E60,(1093750341),(1),(180))
call SaveInteger(E60,(1093750341),(2),(160))
call SaveInteger(E60,(1093750341),(3),(140))
call SaveInteger(E60,(1093747028),(1),(100))
call SaveInteger(E60,(1093747028),(2),(100))
call SaveInteger(E60,(1093747028),(3),(100))
call SaveInteger(E60,(1093685840),(1),(11))
call SaveInteger(E60,(1093685840),(2),(9))
call SaveInteger(E60,(1093685840),(3),(7))
call SaveInteger(E60,(1093684291),(1),(25))
call SaveInteger(E60,(1093684291),(2),(25))
call SaveInteger(E60,(1093684291),(3),(25))
call SaveInteger(E60,(1093683534),(1),(45))
call SaveInteger(E60,(1093683534),(2),(45))
call SaveInteger(E60,(1093683534),(3),(45))
call SaveInteger(E60,(1093747031),(1),(10))
call SaveInteger(E60,(1093747031),(2),(10))
call SaveInteger(E60,(1093747031),(3),(10))
call SaveInteger(E60,(1093684296),(1),(70))
call SaveInteger(E60,(1093684296),(2),(70))
call SaveInteger(E60,(1093684296),(3),(70))
call SaveInteger(E60,(1093678161),(1),(45))
call SaveInteger(E60,(1093678161),(2),(45))
call SaveInteger(E60,(1093678161),(3),(45))
call SaveInteger(E60,(1093687121),(1),(45))
call SaveInteger(E60,(1093687121),(2),(45))
call SaveInteger(E60,(1093687121),(3),(45))
call SaveInteger(E60,(1093679445),(1),(90))
call SaveInteger(E60,(1093679445),(2),(75))
call SaveInteger(E60,(1093679445),(3),(60))
call SaveInteger(E60,(1093682004),(1),(60))
call SaveInteger(E60,(1093682004),(2),(50))
call SaveInteger(E60,(1093682004),(3),(40))
call SaveInteger(E60,(1093810506),(1),(120))
call SaveInteger(E60,(1093810506),(2),(110))
call SaveInteger(E60,(1093810506),(3),(100))
call SaveInteger(E60,(1093678929),(1),(160))
call SaveInteger(E60,(1093678929),(2),(110))
call SaveInteger(E60,(1093678929),(3),(60))
call SaveInteger(E60,(1093683257),(1),(120))
call SaveInteger(E60,(1093683257),(2),(120))
call SaveInteger(E60,(1093683257),(3),(120))
call SaveInteger(E60,(1093677363),(1),(140))
call SaveInteger(E60,(1093677363),(2),(120))
call SaveInteger(E60,(1093677363),(3),(100))
call SaveInteger(E60,(1093681462),(1),(140))
call SaveInteger(E60,(1093681462),(2),(120))
call SaveInteger(E60,(1093681462),(3),(60))
call SaveInteger(E60,(1093679152),(1),(80))
call SaveInteger(E60,(1093679152),(2),(50))
call SaveInteger(E60,(1093679152),(3),(30))
call SaveInteger(E60,(1093677906),(1),(150))
call SaveInteger(E60,(1093677906),(2),(120))
call SaveInteger(E60,(1093677906),(3),(90))
call SaveInteger(E60,(1093681494),(1),(150))
call SaveInteger(E60,(1093681494),(2),(120))
call SaveInteger(E60,(1093681494),(3),(90))
call SaveInteger(E60,(1093686072),(1),(85))
call SaveInteger(E60,(1093686072),(2),(85))
call SaveInteger(E60,(1093686072),(3),(85))
call SaveInteger(E60,(1093751120),(1),(85))
call SaveInteger(E60,(1093751120),(2),(85))
call SaveInteger(E60,(1093751120),(3),(85))
call SaveInteger(E60,(1093684308),(1),(120))
call SaveInteger(E60,(1093684308),(2),(120))
call SaveInteger(E60,(1093684308),(3),(120))
call SaveInteger(E60,(1093747539),(1),(30))
call SaveInteger(E60,(1093747539),(2),(30))
call SaveInteger(E60,(1093747539),(3),(30))
call SaveInteger(E60,(1093742932),(1),(80))
call SaveInteger(E60,(1093742932),(2),(70))
call SaveInteger(E60,(1093742932),(3),(60))
call SaveInteger(E60,(1093752632),(1),(90))
call SaveInteger(E60,(1093752632),(2),(60))
call SaveInteger(E60,(1093752632),(3),(60))
call SaveInteger(E60,(1093752633),(1),(90))
call SaveInteger(E60,(1093752633),(2),(60))
call SaveInteger(E60,(1093752633),(3),(60))
call SaveInteger(E60,(1093810503),(1),(120))
call SaveInteger(E60,(1093810503),(2),(120))
call SaveInteger(E60,(1093810503),(3),(120))
call SaveInteger(E60,(1093810504),(1),(120))
call SaveInteger(E60,(1093810504),(2),(120))
call SaveInteger(E60,(1093810504),(3),(120))
call SaveInteger(E60,(1093684275),(1),(160))
call SaveInteger(E60,(1093684275),(2),(160))
call SaveInteger(E60,(1093684275),(3),(160))
call SaveInteger(E60,(1093677392),(1),(120))
call SaveInteger(E60,(1093677392),(2),(90))
call SaveInteger(E60,(1093677392),(3),(55))
call SaveInteger(E60,(1093679450),(1),(120))
call SaveInteger(E60,(1093679450),(2),(90))
call SaveInteger(E60,(1093679450),(3),(55))
call SaveInteger(E60,(1093743184),(1),(60))
call SaveInteger(E60,(1093743184),(2),(60))
call SaveInteger(E60,(1093743184),(3),(60))
call SaveInteger(E60,(1093747766),(1),(15))
call SaveInteger(E60,(1093747766),(2),(15))
call SaveInteger(E60,(1093747766),(3),(15))
call SaveInteger(E60,(1093744975),(1),(90))
call SaveInteger(E60,(1093744975),(2),(70))
call SaveInteger(E60,(1093744975),(3),(50))
call SaveInteger(E60,(1093681483),(1),(10))
call SaveInteger(E60,(1093681483),(2),(10))
call SaveInteger(E60,(1093681483),(3),(10))
call SaveInteger(E60,(1093748313),(1),(10))
call SaveInteger(E60,(1093748313),(2),(10))
call SaveInteger(E60,(1093748313),(3),(10))
call SaveInteger(E60,(1093686854),(1),(22))
call SaveInteger(E60,(1093686854),(2),(17))
call SaveInteger(E60,(1093686854),(3),(12))
call SaveInteger(E60,(1093686854),(4),(5))
call SaveInteger(E60,(1093747253),(1),(16))
call SaveInteger(E60,(1093747253),(2),(8))
call SaveInteger(E60,(1093747253),(3),(4))
call SaveInteger(E60,(1093747253),(4),(2))
call SaveInteger(E60,(1093678923),(1),(6))
call SaveInteger(E60,(1093678923),(2),(6))
call SaveInteger(E60,(1093678923),(3),(6))
call SaveInteger(E60,(1093742673),(1),(40))
call SaveInteger(E60,(1093742673),(2),(40))
call SaveInteger(E60,(1093742673),(3),(40))
call SaveInteger(E60,(1093747778),(1),(40))
call SaveInteger(E60,(1093747778),(2),(40))
call SaveInteger(E60,(1093747778),(3),(40))
call SaveInteger(E60,(1093677128),(1),(110))
call SaveInteger(E60,(1093677128),(2),(110))
call SaveInteger(E60,(1093677128),(3),(110))
call SaveInteger(E60,(1093681457),(1),(110))
call SaveInteger(E60,(1093681457),(2),(110))
call SaveInteger(E60,(1093681457),(3),(110))
call SaveInteger(E60,(1093685045),(1),(60))
call SaveInteger(E60,(1093685045),(2),(60))
call SaveInteger(E60,(1093685045),(3),(60))
call SaveInteger(E60,(1093747249),(1),(60))
call SaveInteger(E60,(1093747249),(2),(60))
call SaveInteger(E60,(1093747249),(3),(60))
call SaveInteger(E60,(1093684820),(1),(90))
call SaveInteger(E60,(1093684820),(2),(90))
call SaveInteger(E60,(1093684820),(3),(90))
call SaveInteger(E60,(1093684824),(1),(90))
call SaveInteger(E60,(1093684824),(2),(90))
call SaveInteger(E60,(1093684824),(3),(90))
call SaveInteger(E60,(1093677649),(1),(100))
call SaveInteger(E60,(1093677649),(2),(100))
call SaveInteger(E60,(1093677649),(3),(100))
call SaveInteger(E60,(1093747769),(1),(100))
call SaveInteger(E60,(1093747769),(2),(100))
call SaveInteger(E60,(1093747769),(3),(100))
call SaveInteger(E60,(1093685579),(1),(100))
call SaveInteger(E60,(1093685579),(2),(100))
call SaveInteger(E60,(1093685579),(3),(100))
call SaveInteger(E60,(1093678899),(1),(100))
call SaveInteger(E60,(1093678899),(2),(100))
call SaveInteger(E60,(1093678899),(3),(100))
call SaveInteger(E60,(1093677898),(1),(100))
call SaveInteger(E60,(1093677898),(2),(100))
call SaveInteger(E60,(1093677898),(3),(100))
call SaveInteger(E60,(1093678154),(1),(100))
call SaveInteger(E60,(1093678154),(2),(100))
call SaveInteger(E60,(1093678154),(3),(100))
call SaveInteger(E60,(1093678157),(1),(100))
call SaveInteger(E60,(1093678157),(2),(100))
call SaveInteger(E60,(1093678157),(3),(100))
call SaveInteger(E60,(1093678158),(1),(100))
call SaveInteger(E60,(1093678158),(2),(100))
call SaveInteger(E60,(1093678158),(3),(100))
call SaveInteger(E60,(1093679413),(1),(150))
call SaveInteger(E60,(1093679413),(2),(90))
call SaveInteger(E60,(1093679413),(3),(55))
call SaveInteger(E60,(1093679447),(1),(150))
call SaveInteger(E60,(1093679447),(2),(90))
call SaveInteger(E60,(1093679447),(3),(50))
call SaveInteger(E60,(1093747288),(1),(200))
call SaveInteger(E60,(1093747288),(2),(190))
call SaveInteger(E60,(1093747288),(3),(180))
call SaveInteger(E60,(1093678420),(1),(145))
call SaveInteger(E60,(1093678420),(2),(115))
call SaveInteger(E60,(1093678420),(3),(60))
call SaveInteger(E60,(1093679176),(1),(145))
call SaveInteger(E60,(1093679176),(2),(115))
call SaveInteger(E60,(1093679176),(3),(60))
call SaveInteger(E60,(1093678647),(1),(100))
call SaveInteger(E60,(1093678647),(2),(85))
call SaveInteger(E60,(1093678647),(3),(70))
call SaveInteger(E60,(1093679184),(1),(70))
call SaveInteger(E60,(1093679184),(2),(70))
call SaveInteger(E60,(1093679184),(3),(70))
call SaveInteger(E60,(1093681987),(1),(22))
call SaveInteger(E60,(1093681987),(2),(22))
call SaveInteger(E60,(1093681987),(3),(22))
call SaveInteger(E60,(1093685067),(1),(160))
call SaveInteger(E60,(1093685067),(2),(160))
call SaveInteger(E60,(1093685067),(3),(160))
call SaveInteger(E60,(1093752407),(1),(160))
call SaveInteger(E60,(1093752407),(2),(160))
call SaveInteger(E60,(1093752407),(3),(160))
call SaveInteger(E60,(1093810258),(1),(135))
call SaveInteger(E60,(1093810258),(2),(135))
call SaveInteger(E60,(1093810258),(3),(135))
call SaveInteger(E60,(1093810259),(1),(100))
call SaveInteger(E60,(1093810259),(2),(70))
call SaveInteger(E60,(1093810259),(3),(40))
call SaveInteger(E60,(1395667000),(1),(165))
call SaveInteger(E60,(1395667000),(2),(165))
call SaveInteger(E60,(1395667000),(3),(165))
call SaveInteger(E60,(1395667029),(1),(165))
call SaveInteger(E60,(1395667029),(2),(165))
call SaveInteger(E60,(1395667029),(3),(165))
call SaveInteger(E60,(1093751874),(1),(90))
call SaveInteger(E60,(1093751874),(2),(75))
call SaveInteger(E60,(1093751874),(3),(60))
call SaveInteger(E60,(1093752118),(1),(85))
call SaveInteger(E60,(1093752118),(2),(85))
call SaveInteger(E60,(1093752118),(3),(85))
call SaveInteger(E60,(1093751861),(1),(55))
call SaveInteger(E60,(1093751861),(2),(50))
call SaveInteger(E60,(1093751861),(3),(45))
call SaveInteger(E60,(1093808949),(1),(55))
call SaveInteger(E60,(1093808949),(2),(50))
call SaveInteger(E60,(1093808949),(3),(45))
call SaveInteger(E60,(1093751617),(1),(50))
call SaveInteger(E60,(1093751617),(2),(50))
call SaveInteger(E60,(1093751617),(3),(50))
call SaveInteger(E60,(1093751371),(1),(110))
call SaveInteger(E60,(1093751371),(2),(110))
call SaveInteger(E60,(1093751371),(3),(110))
call SaveInteger(E60,(1093753169),(1),(30))
call SaveInteger(E60,(1093753169),(2),(24))
call SaveInteger(E60,(1093753169),(3),(18))
call SaveInteger(E60,(1093809992),(1),(20))
call SaveInteger(E60,(1093809992),(2),(18))
call SaveInteger(E60,(1093809992),(3),(16))
endfunction
function VU1 takes nothing returns boolean
local player p
local integer i
local integer id
local integer W01
set i=1
loop
exitwhen i>5
set p=CO[i]
set id=GetPlayerId(p)
set W01=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
if W01<E80[id]then
set E80[id]=W01
endif
set p=DO[i]
set id=GetPlayerId(p)
set W01=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
if W01<E80[id]then
set E80[id]=W01
endif
set i=i+1
endloop
return false
endfunction
function WO1 takes integer XSI,integer XTI returns boolean
local integer i=EC0-1
local real W21=0
local real ZPI=(TimerGetElapsed(M))
local integer ZLI=0
loop
exitwhen i==EC0 or W21>ED0 or ZLI>200
if i==0 then
set i=8000-1
endif
set ZLI=ZLI+1
set W21=ZPI-E90[i]
if EA0[i]==XSI and EB0[i]==XTI and W21<ED0 then
set EA0[i]=0
set EB0[i]=0
return true
endif
set i=i-1
endloop
return false
endfunction
function W31 takes integer XSI,integer XTI returns boolean
local integer i=EC0-1
local real W21=0
local real ZPI=(TimerGetElapsed(M))
local integer ZLI=0
loop
exitwhen i==EC0 or W21>ED0 or ZLI>200
if i==0 then
set i=8000-1
endif
set ZLI=ZLI+1
set W21=ZPI-E90[i]
if EA0[i]==XSI and EB0[i]==XTI and W21<ED0 then
return true
endif
set i=i-1
endloop
return false
endfunction
function W41 takes nothing returns nothing
local integer XSI=GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
local integer XTI=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local real XPI=GetEventDamage()
set E90[EC0]=(TimerGetElapsed(M))
set EA0[EC0]=XSI
set EB0[EC0]=XTI
set EC0=EC0+1
if EC0==8000 then
set EC0=1
endif
endfunction
function W51 takes unit MKI,unit W61 returns string
local integer i=1
local integer W71=GetPlayerId(GetOwningPlayer(MKI))
local integer W81=GetPlayerId(GetOwningPlayer(W61))
local integer LWI
local string W91=" "+GetObjectName(1848658521)+" "
local boolean WA1=false
loop
exitwhen i>5
if VLI(GetOwningPlayer(W61))then
set LWI=GetPlayerId(CO[i])
else
set LWI=GetPlayerId(DO[i])
endif
if W81!=LWI and WO1(LWI,W71)then
set D[LWI]=D[LWI]+1
call P7I("Assist"+I2S(LWI),W71)
if WA1 then
set W91=W91+"/"+C0[LWI]+(CR0[GetPlayerId((Player(LWI)))])+"|r"
else
set W91=W91+C0[LWI]+(CR0[GetPlayerId((Player(LWI)))])+"|r"
endif
set WA1=true
endif
set i=i+1
endloop
if WA1 then
return W91
endif
return" "
endfunction
function WB1 takes unit MKI,unit W61 returns string
local integer i=1
local integer W71=GetPlayerId(GetOwningPlayer(MKI))
local integer W81=GetPlayerId(GetOwningPlayer(W61))
local integer LWI
local string W91=""
local boolean WA1=false
loop
exitwhen i>5
if VLI(GetOwningPlayer(W61))then
set LWI=GetPlayerId(CO[i])
else
set LWI=GetPlayerId(DO[i])
endif
if W81!=LWI and W31(LWI,W71)then
if WA1 then
set W91=W91+"/"+C0[LWI]+(CR0[GetPlayerId((Player(LWI)))])+"|r"
else
set W91=W91+C0[LWI]+(CR0[GetPlayerId((Player(LWI)))])+"|r"
endif
set WA1=true
endif
set i=i+1
endloop
if WA1 then
return W91
endif
return" "
endfunction
function WC1 takes unit MKI,unit W61 returns integer
local integer i=1
local integer W71=GetPlayerId(GetOwningPlayer(MKI))
local integer W81=GetPlayerId(GetOwningPlayer(W61))
local integer LWI
local integer ZLI=0
loop
exitwhen i>5
if VLI(GetOwningPlayer(W61))then
set LWI=GetPlayerId(CO[i])
else
set LWI=GetPlayerId(DO[i])
endif
if W81!=LWI and W31(LWI,W71)then
set ZLI=ZLI+1
endif
set i=i+1
endloop
return ZLI
endfunction
function WD1 takes unit MKI,unit W61 returns boolean
local integer i=1
local integer W71=GetPlayerId(GetOwningPlayer(MKI))
local integer W81=GetPlayerId(GetOwningPlayer(W61))
local integer LWI
local string W91=" Assists: "
local boolean WA1=false
local integer x=1
set EE0[1]=null
set EE0[2]=null
set EE0[3]=null
set EE0[4]=null
set EE0[5]=null
loop
exitwhen i>5
if VLI(GetOwningPlayer(W61))then
set LWI=GetPlayerId(CO[i])
else
set LWI=GetPlayerId(DO[i])
endif
if W81!=LWI and W31(LWI,W71)then
set EE0[x]=Player(LWI)
set x=x+1
set WA1=true
endif
set i=i+1
endloop
return WA1
endfunction
function WE1 takes unit MKI,unit W61,real WLI returns nothing
local integer i=1
local integer ZLI=0
call WD1(MKI,W61)
loop
exitwhen i>5
if EE0[i]!=null then
set ZLI=ZLI+1
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5
if EE0[i]!=null then
set E80[GetPlayerId(EE0[i])]=E80[GetPlayerId(EE0[i])]+R2I(WLI/ZLI)
call MXI(EE0[i],R2I(WLI/ZLI),L1[GetPlayerId(EE0[i])])
endif
set i=i+1
endloop
endfunction
function WF1 takes nothing returns nothing
endfunction
function WG1 takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
if GetOwningPlayer(GetTriggerUnit())==EO then
set C[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=C[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
elseif(id==1969711215)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1970169187)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1702061422)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1701081721)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092337)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092338)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697656918)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697656919)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1700946284)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697657398)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1970107511)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092370)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
endif
call WF1()
endfunction
function WZ1 takes integer i returns nothing
local integer x=1
local integer y=1
set EF0[i]=null
set EG0[i]=0
set EH0[i]=false
loop
exitwhen y>EZ0
if EG0[y]!=0 then
set EV0[x]=EF0[y]
set EW0[x]=EG0[y]
set EX0[x]=EH0[y]
set EF0[y]=null
set EG0[y]=0
set EH0[y]=false
set x=x+1
endif
set y=y+1
endloop
set EZ0=x-1
set x=1
loop
exitwhen x>EZ0
set EF0[x]=EV0[x]
set EG0[x]=EW0[x]
set EH0[x]=EX0[x]
set x=x+1
endloop
endfunction
function WV1 takes unit MKI returns boolean
return GetUnitTypeId(MKI)==1211117641 or GetUnitTypeId(MKI)==1211117642
endfunction
function WW1 takes unit MKI returns boolean
local integer V0I=GetHandleId(GetOwningPlayer(MKI))
local unit O01=(LoadUnitHandle(ZY,(V0I),(699)))
local unit OI1=(LoadUnitHandle(ZY,(V0I),(700)))
local unit O11=(LoadUnitHandle(ZY,(V0I),(701)))
local unit OO1=(LoadUnitHandle(ZY,(V0I),(702)))
local unit O21=(LoadUnitHandle(ZY,(V0I),(703)))
if GetUnitAbilityLevel(O01,1093685078)!=0 or GetUnitAbilityLevel(OI1,1093685078)!=0 or GetUnitAbilityLevel(O11,1093685078)!=0 or GetUnitAbilityLevel(OO1,1093685078)!=0 or GetUnitAbilityLevel(O21,1093685078)!=0 then
return true
endif
return false
endfunction
function WX1 takes unit MKI returns boolean
local integer i=0
local integer V0I=GetHandleId(GetOwningPlayer(MKI))
local unit IU1=(LoadUnitHandle(ZY,(V0I),(699)))
loop
exitwhen i>5
if GetItemTypeId(UnitItemInSlot(IU1,i))==F20[ZX0]and GetItemCharges(UnitItemInSlot(IU1,i))>0 then
return true
endif
set i=i+1
endloop
return false
endfunction
function WY1 takes unit MKI,location WJ1 returns nothing
local integer V0I=GetHandleId(GetOwningPlayer(MKI))
local unit O01=(LoadUnitHandle(ZY,(V0I),(699)))
local unit OI1=(LoadUnitHandle(ZY,(V0I),(700)))
local unit O11=(LoadUnitHandle(ZY,(V0I),(701)))
local unit OO1=(LoadUnitHandle(ZY,(V0I),(702)))
local unit O21=(LoadUnitHandle(ZY,(V0I),(703)))
if O01!=null then
call ReviveHeroLoc(O01,WJ1,true)
call IJ1(O01)
endif
if OI1!=null then
call ReviveHeroLoc(OI1,WJ1,true)
call IJ1(OI1)
endif
if O11!=null then
call ReviveHeroLoc(O11,WJ1,true)
call IJ1(O11)
endif
if OO1!=null then
call ReviveHeroLoc(OO1,WJ1,true)
call IJ1(OO1)
endif
if O21!=null then
call ReviveHeroLoc(O21,WJ1,true)
call IJ1(O21)
endif
endfunction
function CustomHeroRevive_GetTime takes nothing returns real
return TimerGetElapsed(M)
endfunction
function WK1 takes unit V8I,real Q1I,boolean WL1 returns nothing
set EZ0=EZ0+1
set EF0[EZ0]=V8I
set EG0[EZ0]=(TimerGetElapsed(M))+Q1I
set EH0[EZ0]=WL1
endfunction
function WM1 takes integer i returns nothing
local unit MKI=EF0[i]
local boolean WL1=EH0[i]
local player WN1=GetOwningPlayer(MKI)
local location WJ1
if VNI(WN1)then
set WJ1=GetRectCenter(T3)
else
set WJ1=GetRectCenter(A4)
endif
if U2==false and KMI(MKI)then
call IM1(MKI,WN1,GetLocationX(WJ1),GetLocationY(WJ1),true)
if WV1(MKI)==false or GetUnitAbilityLevel(MKI,1093684567)==0 then
call ReviveHeroLoc(MKI,WJ1,true)
else
call WY1(MKI,WJ1)
endif
if WL1 then
call SetUnitState(MKI,UNIT_STATE_MANA,GetUnitState(MKI,UNIT_STATE_MAX_MANA))
endif
endif
call RemoveLocation(WJ1)
call WZ1(i)
set MKI=null
set WN1=null
set WJ1=null
endfunction
function WS1 takes nothing returns boolean
local real ZPI=(TimerGetElapsed(M))
local integer i
set i=1
loop
exitwhen i>EZ0
if EG0[i]<ZPI and EG0[i]!=0 then
call WM1(i)
endif
if EG0[i]!=0 and KMI(EF0[i])==false then
call WZ1(i)
endif
set i=i+1
endloop
return false
endfunction
function WR1 takes unit WP1,unit WQ1 returns nothing
if J8I(WP1,WQ1)>1200 or(KMI(WP1)and GetUnitTypeId(WP1)==1211117643)then
call AddHeroXP(WP1,XYI(WQ1),true)
endif
endfunction
function WU1 takes nothing returns boolean
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false then
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(EY0))and REI(GetFilterUnit(),F20[VX0])!=null then
call SetItemCharges(REI(GetFilterUnit(),F20[VX0]),GetItemCharges(REI(GetFilterUnit(),F20[VX0]))+1)
endif
endif
return false
endfunction
function X01 takes nothing returns boolean
local item i
local integer R8I
if EK0==0 and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(EJ0))then
if REI(GetFilterUnit(),F20[WO0])!=null then
set EK0=EK0+1
set R8I=GetItemCharges(REI(GetFilterUnit(),F20[WO0]))
if R8I==0 then
set R8I=2
else
set R8I=R8I+1
endif
call SetItemCharges(REI(GetFilterUnit(),F20[WO0]),R8I)
endif
endif
return false
endfunction
function AncientJangoo_FindNearbyHeroes takes nothing returns boolean
local item i
local integer R8I
if EL0==0 and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(EJ0))then
if REI(GetFilterUnit(),F20[HO0])!=null then
set EL0=EL0+1
set R8I=GetItemCharges(REI(GetFilterUnit(),F20[HO0]))
set R8I=IMinBJ(R8I+1,5)
call SetItemCharges(REI(GetFilterUnit(),F20[HO0]),R8I)
endif
endif
return false
endfunction
function XI1 takes unit u returns nothing
local group g=ZJI()
set EY0=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1625,Condition(function WU1))
call ZYI(g)
set g=null
endfunction
function X11 takes unit u returns nothing
local group g=ZJI()
set EK0=0
set EJ0=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1425,Condition(function X01))
call ZYI(g)
set EK0=0
set g=null
endfunction
function XO1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer X21=(LoadInteger(ZY,(V0I),(88)))
local integer i=1
local player p
local string ZOI
loop
exitwhen i>5
if X21==0 then
set p=CO[i]
set ZOI=C0[GetPlayerId(CO[0])]+GetObjectName(1848652622)+"|r "+GetObjectName(1848652624)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848652625)+"|r"
else
set p=DO[i]
set ZOI=C0[GetPlayerId(DO[0])]+GetObjectName(1848652623)+"|r "+GetObjectName(1848652624)+" "+C0[GetPlayerId(DO[0])]+GetObjectName(1848652625)+"|r"
endif
call DisplayTimedTextToPlayer(p,0,0,10,ZOI)
call M7I(WD,p)
set i=i+1
endloop
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function X31 takes integer X21 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function XO1))
call SaveInteger(ZY,(V0I),(88),(X21))
set t=null
endfunction
function X41 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer X51=(LoadInteger(ZY,(V0I),(89)))
local string ZOI=(LoadStr(ZY,(V0I),(90)))
if X51==1 then
call M6I(EC)
elseif X51==2 then
call M6I(UD)
elseif X51==3 then
call M6I(JE)
elseif X51==4 then
call M6I(KE)
endif
call JDI(Q2,10.00,ZOI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function X61 takes string ZOI,integer X51 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function X41))
call SaveStr(ZY,(V0I),(90),(ZOI))
call SaveInteger(ZY,(V0I),(89),(X51))
set t=null
endfunction
function X71 takes player MYI,integer MJI returns nothing
local integer W5I=1
local integer IF1
if VLI(MYI)then
set IF1=W0I(AO)
else
set IF1=W0I(BO)
endif
if VLI(MYI)then
loop
exitwhen W5I>5
if VTI(CO[W5I])then
set E80[GetPlayerId(CO[W5I])]=E80[GetPlayerId(CO[W5I])]+MJI/IF1
call MXI(CO[W5I],MJI/IF1,L1[GetPlayerId(CO[W5I])])
endif
set W5I=W5I+1
endloop
else
loop
exitwhen W5I>5
if VTI(DO[W5I])then
set E80[GetPlayerId(DO[W5I])]=E80[GetPlayerId(DO[W5I])]+MJI/IF1
call MXI(DO[W5I],MJI/IF1,L1[GetPlayerId(DO[W5I])])
endif
set W5I=W5I+1
endloop
endif
endfunction
function X81 takes unit MKI,integer X91 returns nothing
local player WN1=GetOwningPlayer(MKI)
call SetPlayerState(WN1,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(WN1,PLAYER_STATE_RESOURCE_GOLD)-X91)
endfunction
function XA1 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1865429043 then
call KillUnit(GetFilterUnit())
return true
endif
return false
endfunction
function XB1 takes nothing returns nothing
local boolexpr VE1=Condition(function XA1)
local group U4I=ZJI()
call GroupEnumUnitsInRect(U4I,bj_mapInitialPlayableArea,VE1)
call ZYI(U4I)
endfunction
function XC1 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
if GetUnitTypeId(GetTriggerUnit())==1211117642 and WX1(GetTriggerUnit())then
return false
endif
return true
endif
return false
endfunction
function XD1 takes player WN1,player MYI returns boolean
return GetKillingUnit()==null or(VLI(WN1)and VLI(MYI))or(VNI(WN1)and VNI(MYI))
endfunction
function XE1 takes nothing returns nothing
if(GetUnitTypeId((GetEnumUnit()))==1211117642)==false then
set ER0=ER0+1
if GetOwningPlayer(GetKillingUnit())!=GetOwningPlayer(GetEnumUnit())then
set EP0=EP0+1
endif
endif
endfunction
function XF1 takes nothing returns nothing
if(GetUnitTypeId((GetEnumUnit()))==1211117642)==false then
call AddHeroXP(GetEnumUnit(),EN0,true)
set ES0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=ES0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+EN0
if GetOwningPlayer(GetKillingUnit())!=GetOwningPlayer(GetEnumUnit())then
set ET0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=ET0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+EM0
set E80[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=E80[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+EM0
call MXI(GetOwningPlayer(GetEnumUnit()),EM0,GetEnumUnit())
endif
endif
endfunction
function XG1 takes nothing returns boolean
local integer WTI
local integer XH1=0
local integer XZ1=0
local group g
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetTriggerUnit())==false and(GetUnitTypeId((GetTriggerUnit()))==1211117642)==false then
set WTI=GetHeroLevel(GetTriggerUnit())
set EN0=0
set EM0=0
set g=ZJI()
set ER0=0
set EP0=0
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1025,Condition(function SVI))
call ForGroup(g,function XE1)
if ER0==1 then
set XH1=20*WTI+120
elseif ER0==2 then
set XH1=15*WTI+90
elseif ER0==3 then
set XH1=7*WTI+30
elseif ER0==4 then
set XH1=6*WTI+15
elseif ER0==5 then
set XH1=5*WTI+10
endif
if EP0==1 then
set XZ1=9*WTI+95
elseif EP0==2 then
set XZ1=8*WTI+20
elseif EP0==3 then
set XZ1=6*WTI
elseif EP0==4 then
set XZ1=6*WTI
elseif EP0==5 then
set XZ1=6*WTI
endif
if R0 then
endif
set EN0=XH1
set EM0=XZ1
call ForGroup(g,function XF1)
call ZYI(g)
set g=null
endif
return false
endfunction
function XV1 takes nothing returns nothing
local boolean XW1=false
local unit MKI=GetDyingUnit()
local unit W61=GetKillingUnit()
local player MYI=GetOwningPlayer(W61)
local player WN1=GetOwningPlayer(MKI)
local location WJ1
local integer MJI=0
local integer X91=0
local boolean XX1=false
local string XY1=""
local string XJ1=""
local string XK1=""
local string MidText
local integer x
local string XL1
local string XM1
local string XN1
local string XS1
local boolean WL1=false
local real XT1=1
local real XR1=1
local real XP1=1
local real XQ1=1
local real XU1=0
local trigger t
local integer Y01
local integer YI1=WC1(MKI,W61)
local integer id
local integer Y11=GetPlayerState(WN1,PLAYER_STATE_RESOURCE_GOLD)
local integer YO1=Y11-E80[GetPlayerId(WN1)]
call XG1()
if W61==null and GetUnitTypeId(MKI)==1315988077 then
set W61=GZI
set MYI=GetOwningPlayer(W61)
endif
if W61!=null then
set id=GetUnitTypeId(W61)
call WR1(L1[GetPlayerId(GetOwningPlayer(W61))],MKI)
endif
if XD1(WN1,MYI)==false and YI1==1 and VSI(MYI)==false and MYI!=EO then
call WD1(MKI,W61)
set MYI=EE0[1]
set W61=L1[GetPlayerId(MYI)]
endif
if VLI(GetOwningPlayer(MKI))then
if GetOwningPlayer(MKI)!=CO[1]then
endif
if GetOwningPlayer(MKI)!=CO[2]then
endif
if GetOwningPlayer(MKI)!=CO[3]then
endif
if GetOwningPlayer(MKI)!=CO[4]then
endif
if GetOwningPlayer(MKI)!=CO[5]then
endif
else
if GetOwningPlayer(MKI)!=DO[1]then
endif
if GetOwningPlayer(MKI)!=DO[2]then
endif
if GetOwningPlayer(MKI)!=DO[3]then
endif
if GetOwningPlayer(MKI)!=DO[4]then
endif
if GetOwningPlayer(MKI)!=DO[5]then
endif
endif
set AJ[GetPlayerId(GetOwningPlayer((MKI)))]=true
if GetUnitAbilityLevel(MKI,1093685078)!=0 or(WV1(MKI)and WW1(MKI))then
set WL1=true
call UnitRemoveAbility(MKI,1093685078)
set YO=MKI
set B2=W61
if IsUnitType(W61,UNIT_TYPE_STRUCTURE)==false then
endif
endif
if MYI==null then
set MYI=WN1
endif
if L0 and GetUnitTypeId(MKI)!=1211117642 then
set L2=UnitRemoveItemFromSlot(MKI,GetRandomInt(0,5))
if GetItemTypeId(L2)==1227894859 then
call CreateItem(1227894855,GetItemX(L2),GetItemY(L2))
call RemoveItem(L2)
endif
endif
if VLI(WN1)then
if VLI(MYI)then
set XW1=true
if(MYI==WN1)then
call JDI(Q2,10.00,(C0[GetPlayerId(WN1)]+(CR0[GetPlayerId((WN1))])+"|r "+GetObjectName(1848652626)))
else
call JDI(Q2,10.00,PHI(WN1,MYI))
endif
elseif VNI(MYI)then
set XX1=true
set O[GetPlayerId(CO[0])]=O[GetPlayerId(CO[0])]+1
set I[GetPlayerId(DO[0])]=I[GetPlayerId(DO[0])]+1
set I0[2]=I0[2]+1
set I0[1]=0
if MYI!=DO[0]then
set I[GetPlayerId(MYI)]=I[GetPlayerId(MYI)]+1
set P[GetPlayerId(MYI)]=P[GetPlayerId(MYI)]+1
endif
endif
endif
if VNI(WN1)then
if VNI(MYI)then
set XW1=true
if(MYI==WN1)then
call JDI(Q2,10.00,(C0[GetPlayerId(WN1)]+(CR0[GetPlayerId((WN1))])+"|r "+GetObjectName(1848652626)))
else
call JDI(Q2,10.00,PHI(WN1,MYI))
endif
elseif VLI(MYI)then
set XX1=true
set O[GetPlayerId(DO[0])]=O[GetPlayerId(DO[0])]+1
set I[GetPlayerId(CO[0])]=I[GetPlayerId(CO[0])]+1
set I0[1]=I0[1]+1
set I0[2]=0
if MYI!=CO[0]then
set I[GetPlayerId(MYI)]=I[GetPlayerId(MYI)]+1
set P[GetPlayerId(MYI)]=P[GetPlayerId(MYI)]+1
endif
endif
endif
if MYI==EO then
set XX1=false
if GetUnitTypeId(W61)==1848651852 then
call JDI(Q2,10.00,(C0[GetPlayerId(WN1)]+(CR0[GetPlayerId((WN1))])+"|r "+GetObjectName(1848652628)))
else
call JDI(Q2,10.00,(C0[GetPlayerId(WN1)]+(CR0[GetPlayerId((WN1))])+"|r "+GetObjectName(1848652629)))
endif
set XW1=true
endif
if CN then
call KEI(HC,GetUnitX(MKI),GetUnitY(MKI))
endif
call P7I("Hero"+I2S(GetPlayerId(WN1)),GetPlayerId(MYI))
set x=P[GetPlayerId(WN1)]
if x>2 and XW1==false then
if x==3 then
set MJI=50
set XY1="|c0000ff40"+GetObjectName(1848652876)+"|r"
elseif x==4 then
set MJI=100
set XY1="|c00400080"+GetObjectName(1848652878)+"|r"
elseif x==5 then
set MJI=150
set XY1="|c00ff0080"+GetObjectName(1848652877)+"|r"
elseif x==6 then
set MJI=200
set XY1="|c00ff8000"+GetObjectName(1848652874)+"|r"
elseif x==7 then
set MJI=250
set XY1="|c00808000"+GetObjectName(1848652873)+"|r"
elseif x==8 then
set MJI=300
set XY1="|c00ff80ff"+GetObjectName(1848652630)+"|r"
elseif x==9 then
set MJI=350
set XY1="|c00ff0000"+GetObjectName(1848652631)+"|r"
else
set MJI=400
set XY1="|c00ff8000"+GetObjectName(1848652632)+"|r"
endif
endif
set x=P[GetPlayerId(MYI)]
if x>H[GetPlayerId(MYI)]then
set H[GetPlayerId(MYI)]=x
endif
if x>2 and XW1==false then
if x==3 then
call M6I(MC)
set XJ1=" "+GetObjectName(1848652875)+" |c0000ff40"+GetObjectName(1848652876)+"|r"+GetObjectName(1848652857)
elseif x==4 then
call M6I(DC)
set XJ1=" "+GetObjectName(1848652872)+" |c00400080"+GetObjectName(1848652878)+"|r"+GetObjectName(1848652857)
elseif x==5 then
call M6I(TC)
set XJ1=" "+GetObjectName(1848652871)+" |c00ff0080"+GetObjectName(1848652877)+"|r"+GetObjectName(1848652857)
elseif x==6 then
call M6I(BE)
set XJ1=" "+GetObjectName(1848652872)+" |c00ff8000"+GetObjectName(1848652874)+"|r"+GetObjectName(1848652865)
elseif x==7 then
call M6I(EE)
set XJ1=" "+GetObjectName(1848652872)+" |c00808000"+GetObjectName(1848652873)+"|r"+GetObjectName(1848652865)
elseif x==8 then
call M6I(PC)
set XJ1=" "+GetObjectName(1848652871)+" |c00ff80ff"+GetObjectName(1848652630)+"|r"+GetObjectName(1848652865)
elseif x==9 then
call M6I(ZC)
set XJ1=" "+GetObjectName(1848652872)+" |c00ff0000"+GetObjectName(1848652631)+"|r"+GetObjectName(1848652866)
else
call M6I(WC)
set XJ1=" "+GetObjectName(1848652872)+" |c00ff8000"+GetObjectName(1848652632)+"|r. "+GetObjectName(1848652870)+GetObjectName(1848652866)
endif
endif
if XW1==false then
set MJI=MJI+100+GetHeroLevel(MKI)*5+100
set XL1=C0[GetPlayerId(WN1)]+(CR0[GetPlayerId((WN1))])+"|r"
set XM1=C0[GetPlayerId(MYI)]+(CR0[GetPlayerId((MYI))])+"|r"
set XS1="|c00FFDC00"+I2S(MJI)+"|r"
if MYI==CO[0]or MYI==DO[0]then
if YI1==0 then
if MYI==CO[0]then
set XN1=XM1+" "+GetObjectName(1848652850)+" "+XL1+GetObjectName(1848652851)+GetObjectName(1848652857)+" "+XS1+" "+GetObjectName(1848652852)+"."
call X71(MYI,MJI)
elseif MYI==DO[0]then
set XN1=XM1+" "+GetObjectName(1848652850)+" "+XL1+GetObjectName(1848652851)+GetObjectName(1848652857)+" "+XS1+" "+GetObjectName(1848652852)+"."
call X71(MYI,MJI)
endif
elseif YI1>1 then
set XN1=XM1+" "+GetObjectName(1848652850)+" "+XL1+GetObjectName(1848652851)+GetObjectName(1848652857)+" "+XS1+" "+GetObjectName(1848652852)+"."
call WE1(MKI,W61,MJI)
endif
elseif XY1==""and XJ1==""then
set XN1=XM1+" "+GetObjectName(1848652850)+" "+XL1+GetObjectName(1848652851)+" "+GetObjectName(1848652867)+" "+XS1+" "+GetObjectName(1848652853)+GetObjectName(1848652857)
elseif XY1==""and XJ1!=""then
set XN1=XM1+" "+GetObjectName(1848652850)+" "+XL1+GetObjectName(1848652851)+" "+GetObjectName(1848652867)+" "+XS1+" "+GetObjectName(1848652853)+GetObjectName(1848652857)
elseif XY1!=""and XJ1==""then
set XN1=XM1+" "+GetObjectName(1848652856)+" "+XL1+GetObjectName(1848652855)+" "+XY1+" "+GetObjectName(1848652854)+" "+XS1+" "+GetObjectName(1848652853)+GetObjectName(1848652857)
elseif XY1!=""and XJ1!=""then
set XN1=XM1+" "+GetObjectName(1848652856)+" "+XL1+GetObjectName(1848652855)+" "+XY1+" "+GetObjectName(1848652854)+" "+XS1+" "+GetObjectName(1848652853)+GetObjectName(1848652857)
endif
if XX1 then
set XK1=W51(MKI,W61)
endif
call JDI(Q2,10,XN1+XK1)
if XJ1!=""then
call JDI(Q2,10,XM1+XJ1)
endif
set E80[GetPlayerId(MYI)]=E80[GetPlayerId(MYI)]+MJI
call MXI(MYI,MJI,MKI)
set Y[GetPlayerId(MYI)]=Y[GetPlayerId(MYI)]+MJI
if I0[1]>4 then
call X31(0)
endif
if I0[2]>4 then
call X31(1)
endif
endif
set X91=GetHeroLevel(MKI)*30
if REI(MKI,F20[VX0])!=null then
if GetItemCharges(REI(MKI,F20[VX0]))>0 then
set XU1=-1*(3*GetItemCharges(REI(MKI,F20[VX0])))
set X91=IMaxBJ(R2I(X91-25*GetItemCharges(REI(MKI,F20[VX0]))),0)
endif
endif
if X91>YO1 then
set X91=YO1
endif
call XI1(MKI)
call X11(MKI)
if WL1==false then
set G[GetPlayerId(WN1)]=G[GetPlayerId(WN1)]+X91
call X81(MKI,X91)
endif
call SaveInteger(ZY,(400+GetPlayerId(MYI)),(450+GetPlayerId(WN1)),((LoadInteger(ZY,(400+GetPlayerId(MYI)),(450+GetPlayerId(WN1))))+1))
call SaveInteger(ZY,(400+GetPlayerId(WN1)),(500+GetPlayerId(MYI)),((LoadInteger(ZY,(400+GetPlayerId(WN1)),(500+GetPlayerId(MYI))))+1))
call StartTimerBJ(E0[GetPlayerId(MYI)],false,18)
if XW1==false and MYI!=CO[0]and MYI!=DO[0]and MYI!=EO then
set Q[GetPlayerId(MYI)]=Q[GetPlayerId(MYI)]+1
if Q[GetPlayerId(MYI)]==2 then
set Z[GetPlayerId(MYI)]=Z[GetPlayerId(MYI)]+1
call X61(C0[GetPlayerId(MYI)]+(CR0[GetPlayerId((MYI))])+"|r "+GetObjectName(1848652868)+" |c000000ff"+GetObjectName(1848652883)+"|r"+GetObjectName(1848652857),1)
endif
if Q[GetPlayerId(MYI)]==3 then
set V[GetPlayerId(MYI)]=V[GetPlayerId(MYI)]+1
call X61(C0[GetPlayerId(MYI)]+(CR0[GetPlayerId((MYI))])+"|r "+GetObjectName(1848652868)+" |c0000ff40"+GetObjectName(1848652869)+"|r"+GetObjectName(1848652866),2)
endif
if Q[GetPlayerId(MYI)]==4 then
set V[GetPlayerId(MYI)]=V[GetPlayerId(MYI)]+1
call X61(C0[GetPlayerId(MYI)]+(CR0[GetPlayerId((MYI))])+"|r "+GetObjectName(1848652868)+" |c0000FFFF"+GetObjectName(1848657994)+"|r"+GetObjectName(1848652866),3)
endif
if Q[GetPlayerId(MYI)]>4 then
set V[GetPlayerId(MYI)]=V[GetPlayerId(MYI)]+1
call X61(C0[GetPlayerId(MYI)]+(CR0[GetPlayerId((MYI))])+"|r "+GetObjectName(1848652875)+" |c0000AAFF"+GetObjectName(1848657995)+"|r"+GetObjectName(1848652866),4)
endif
endif
if(XW1==false)then
set P[GetPlayerId(WN1)]=0
endif
set P[0]=0
set P[6]=0
set O[GetPlayerId(WN1)]=O[GetPlayerId(WN1)]+1
if WL1 then
set XT1=0.4
endif
if XW1==true and GetUnitTypeId(MKI)==1211117643 then
set XQ1=0.5
endif
set Y01=R2I(GetHeroLevel(MKI)*4*XT1*XR1*XP1*XQ1)+R2I(XU1)
if QY0==true then
set Y01=R2I(Y01*0.5)
endif
if DL then
set W[GetPlayerId(WN1)]=0
call TimerStart(F0[GetPlayerId(WN1)],1.00,false,null)
else
set W[GetPlayerId(WN1)]=W[GetPlayerId(WN1)]+Y01
call TimerStart(F0[GetPlayerId(WN1)],Y01,false,null)
endif
call TriggerExecute(RG)
if X0==false then
call WK1(MKI,Y01,WL1)
else
if(VLI(WN1))then
set W0[0]=W0[0]+1
endif
if VNI(WN1)then
set W0[1]=W0[1]+1
endif
set IO[GetPlayerId(WN1)]=MKI
if GetUnitTypeId(MKI)==1211117642 then
set IO[GetPlayerId(WN1)]=(LoadUnitHandle(ZY,(GetHandleId(GetOwningPlayer(MKI))),(699)))
endif
if W0[0]==EL then
call TriggerExecute(KK)
endif
if W0[1]==EL then
call TriggerExecute(JK)
endif
if(GetUnitTypeId(MKI)==1429221430)then
call ExecuteFunc("XB1")
elseif GetUnitTypeId(MKI)==1429221432 or GetUnitTypeId(MKI)==1160786229 then
set WK=MKI
call ExecuteFunc("Y21")
elseif GetUnitTypeId(MKI)==1432580716 then
set WK=MKI
call ExecuteFunc("Y31")
endif
endif
endfunction
function Y51 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local player MYI=GetOwningPlayer(GetKillingUnit())
local player WN1=GetOwningPlayer(GetTriggerUnit())
local string ZOI
local integer YI1=WC1(GetTriggerUnit(),GetKillingUnit())
if MYI==CO[0]or MYI==DO[0]then
call WE1(GetTriggerUnit(),GetKillingUnit(),200)
set ZOI=WB1(GetTriggerUnit(),GetKillingUnit())+" "+GetObjectName(1848652887)+" |c00ff0303"+GetObjectName(1848652889)+GetObjectName(1848652857)+"|r "
if YI1>1 then
set ZOI=ZOI+"(+200 "+GetObjectName(1848652852)+")"
else
set ZOI=ZOI+"(+200 "+GetObjectName(1848652853)+")"
endif
else
set ZOI=C0[GetPlayerId(MYI)]+(CR0[GetPlayerId((MYI))])+"|r "+GetObjectName(1848652887)+" |c00ff0303"+GetObjectName(1848652889)+GetObjectName(1848652857)+"|r "
set ZOI=ZOI+"(+200 "+GetObjectName(1848652853)+")"
call MXI(MYI,200,L1[GetPlayerId(MYI)])
set E80[GetPlayerId(MYI)]=E80[GetPlayerId(MYI)]+200
endif
call JDI(Q2,10,ZOI)
call M6I(FC)
call ZSI(t)
set t=null
endfunction
function Y61 takes nothing returns boolean
if GetOwningPlayer(GetKillingUnit())!=EO and GetKillingUnit()!=null and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsPlayerEnemy(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit()))==true then
if GetOwningPlayer(GetKillingUnit())==CO[0]or GetOwningPlayer(GetKillingUnit())==DO[0]then
if WC1(GetTriggerUnit(),GetKillingUnit())>0 then
call Y51()
endif
else
call Y51()
endif
endif
return false
endfunction
function Y81 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u
local region r
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set u=(LoadUnitHandle(ZY,(V0I),(53)))
set r=CreateRegion()
call RegionAddRect(r,QA)
call RegionAddRect(r,UA)
call RegionAddRect(r,QB)
if IsUnitInRegion(r,u)==false then
if(LoadBoolean(ZY,(V0I),(91)))==true then
call SaveBoolean(ZY,(V0I),(91),(false))
else
call SetUnitX(u,GetRectCenterX(Q4))
call SetUnitY(u,GetRectCenterY(Q4))
call SaveBoolean(ZY,(V0I),(91),(true))
endif
endif
call RemoveRegion(r)
set u=null
set r=null
endif
set t=null
return false
endfunction
function Y91 takes unit u returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,10,true)
call TriggerAddCondition(t,Condition(function Y81))
call SaveUnitHandle(ZY,(V0I),(53),(u))
call SaveBoolean(ZY,(V0I),(91),(true))
set t=null
endfunction
function YA1 takes nothing returns boolean
local item NFI
local integer ZLI=GetTriggerEvalCount(GetTriggeringTrigger())
if ZLI==600 then
call ZSI(GetTriggeringTrigger())
endif
if ZLI==420 or ZLI==540 then
if EQ0!=null then
set NFI=REI(EQ0,F20[ZX0])
if NFI!=null then
if ZLI==420 then
if VLI(GetOwningPlayer(EQ0))then
call JDI(AO,15,GetObjectName(1848657209)+" |c00ff0303"+GetObjectName(1848657207)+"|r")
else
call JDI(BO,15,GetObjectName(1848657209)+" |c00ff0303"+GetObjectName(1848657207)+"|r")
endif
else
if VLI(GetOwningPlayer(EQ0))then
call JDI(AO,15,GetObjectName(1848657209)+" |c00ff0303"+GetObjectName(1848656984)+"|r")
else
call JDI(BO,15,GetObjectName(1848657209)+" |c00ff0303"+GetObjectName(1848656984)+"|r")
endif
endif
endif
endif
endif
set NFI=null
return false
endfunction
function YB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function YA1))
call TriggerEvaluate(t)
set t=null
endfunction
function YC1 takes nothing returns boolean
set F00=GetTriggerEvalCount(GetTriggeringTrigger())
if N0!=null and GetUnitState(N0,UNIT_STATE_LIFE)>1 then
call SetPlayerTechResearched(GetOwningPlayer(N0),1378889798,F00)
if GetUnitAbilityLevel(N0,1093743666)==0 then
call UnitAddAbility(N0,1093743666)
endif
call SetUnitAbilityLevel(N0,1093743666,F00+1)
endif
return false
endfunction
function YD1 takes nothing returns nothing
local integer i=1
local unit V8I
set EQ0=null
loop
exitwhen i>5
set V8I=L1[GetPlayerId(CO[i])]
if V8I!=null and REI(V8I,F20[ZX0])!=null then
call DisableTrigger(JX0)
call P7I("AegisOff",GetPlayerId(GetOwningPlayer(V8I)))
call RemoveItem(REI(V8I,F20[ZX0]))
call EnableTrigger(JX0)
endif
set V8I=L1[GetPlayerId(DO[i])]
if V8I!=null and REI(V8I,F20[ZX0])!=null then
call DisableTrigger(JX0)
call P7I("AegisOff",GetPlayerId(GetOwningPlayer(V8I)))
call RemoveItem(REI(V8I,F20[ZX0]))
call EnableTrigger(JX0)
endif
set i=i+1
endloop
set V8I=null
endfunction
function YE1 takes string YF1,string YG1 returns string
local string s=GetObjectName(1848656705)
set s=PAI(s,"$team",YF1)
set s=PAI(s,"$team",YG1)
return s
endfunction
function YH1 takes nothing returns boolean
return GetUnitTypeId(GetDyingUnit())==1848651852
endfunction
function IsHero takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function YZ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local location YV1
local real VGI
if GetTriggerEvalCount(t)==600 or NL0 then
set NL0=false
set YV1=GetRectCenter(Q4)
call YD1()
set F10=F10+1
set N0=CreateUnitAtLoc(Player(12),1848651852,YV1,bj_UNIT_FACING)
call SetUnitAcquireRange(N0,150)
call Y91(N0)
call UnitAddAbility(N0,1093743666)
call SetPlayerTechResearched(GetOwningPlayer(N0),1378889798,F00)
call SetUnitAbilityLevel(N0,1093743666,F00+1)
call RemoveLocation(YV1)
if F10>1 then
call UnitRemoveAbility(N0,1093684018)
call UnitAddAbility(N0,1093685558)
call UnitAddItem(N0,CreateItem(F20[HB0],0,0))
endif
call UnitAddItem(N0,CreateItem(F20[ZX0],0,0))
call ZSI(t)
endif
set t=null
return false
endfunction
function YW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function YZ1))
set NL0=false
call YB1()
set EU0=false
if(VLI(GetOwningPlayer(GetKillingUnit())))then
call P7I("Roshan",0)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,YE1("|c00ff0000"+GetObjectName(1848653365)+"|r",GetObjectName(1848653365)))
call AdjustPlayerStateBJ(200,CO[1],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,CO[2],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,CO[3],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,CO[4],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,CO[5],PLAYER_STATE_RESOURCE_GOLD)
endif
if(VNI(GetOwningPlayer(GetKillingUnit())))then
call P7I("Roshan",1)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,YE1("|c00004000"+GetObjectName(1848653379)+"|r",GetObjectName(1848653379)))
call AdjustPlayerStateBJ(200,DO[1],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,DO[2],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,DO[3],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,DO[4],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,DO[5],PLAYER_STATE_RESOURCE_GOLD)
endif
set t=null
endfunction
function YY1 takes nothing returns nothing
local texttag t=CreateTextTag()
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(GetKillingUnit())
call SetTextTagText(t,"$",0.027)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,CP0[GetPlayerId(p)],CQ0[GetPlayerId(p)],CU0[GetPlayerId(p)],15)
call SetTextTagVelocity(t,0,0.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,1.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
if GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0 then
call SetTextTagVisibility(t,true)
endif
set t=null
set u=null
set p=null
endfunction
function YJ1 takes unit u,player p returns nothing
local texttag t=CreateTextTag()
call SetTextTagText(t,"!",0.03)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,CP0[GetPlayerId(p)],CQ0[GetPlayerId(p)],CU0[GetPlayerId(p)],15)
call SetTextTagVelocity(t,0,0.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,1.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
if S60[GetPlayerId(GetLocalPlayer())]==true or(D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0))then
call SetTextTagVisibility(t,true)
endif
set t=null
endfunction
function YK1 takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_MELEE_ATTACKER)==true then
call AddHeroXP(GetEnumUnit(),SJ/MJ,true)
else
call AddHeroXP(GetEnumUnit(),NJ/MJ,true)
endif
endfunction
function YL1 takes nothing returns nothing
local group g=ZJI()
local integer YM1
local integer YN1=18
local integer YS1=YN1*2
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1000,Condition(function SVI))
set YM1=LGI(g)
set MJ=YM1
set NJ=YN1
set SJ=YS1
call ForGroup(g,function YK1)
call ZYI(g)
call YJ1(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))
set g=null
endfunction
function YT1 takes nothing returns boolean
if IsUnitAlly(GetKillingUnit(),GetOwningPlayer(GetTriggerUnit()))==true then
call YL1()
else
if D2 and VSI(GetOwningPlayer(GetKillingUnit()))then
call YY1()
endif
endif
return false
endfunction
function YP1 takes player PZI,player PVI returns string
local string s=GetObjectName(1848656208)
set s=PAI(s,"$dead",(CR0[GetPlayerId((PZI))]))
set s=PAI(s,"$killer",C0[GetPlayerId(PVI)]+(CR0[GetPlayerId((PVI))])+"|r")
return s
endfunction
function YQ1 takes nothing returns nothing
if XBI(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false then
call P7I("Courier"+I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit()))),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call JDI(Q2,10.00,YP1(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())))
call PingMinimapEx(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),6,255,0,0,false)
endif
endfunction
function YU1 takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
if id==1697656914 or id==1697657137 or id==1697656915 or id==1697657145 or id==1966092365 or id==1966092356 or id==1966092366 or id==1966092372 then
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set X[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=X[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
call JDI(Q2,10,C0[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetKillingUnit())))])+"|r "+GetObjectName(1848652880)+".")
else
call JDI(Q2,10,C0[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetKillingUnit())))])+"|r "+GetObjectName(1848657230)+".")
endif
endif
endfunction
function J11 takes integer i returns boolean
return i==1227894838 or i==1227894840 or i==1227894858 or i==1227894859 or i==1227894839
endfunction
function JO1 takes nothing returns nothing
if GetWidgetLife(GetEnumItem())>0 and J11(GetItemTypeId(GetEnumItem()))then
set CK=GetEnumItem()
endif
endfunction
function J21 takes nothing returns boolean
local boolean J31=false
local boolean J41=false
local real x
local real y
local real x1
local real y1
local real x2
local real y2
local integer J51
if GetRandomInt(1,2)==1 then
set x=GetLocationX(G1)
set y=GetLocationY(G1)
else
set x=GetLocationX(H1)
set y=GetLocationY(H1)
endif
set x1=GetLocationX(G1)
set y1=GetLocationY(G1)
set x2=GetLocationX(H1)
set y2=GetLocationY(H1)
set CK=null
call EnumItemsInRect(H4,Condition(function HRI),function JO1)
if CK==null then
set J31=true
endif
set CK=null
call EnumItemsInRect(E4,Condition(function HRI),function JO1)
if CK==null then
set J41=true
endif
if AL==false or GetTriggerEvalCount(GetTriggeringTrigger())<20 then
if J31 and J41 then
set J51=GetRandomInt(1,5)
if J51==1 then
call CreateItem(1227894839,x,y)
elseif J51==2 then
call CreateItem(1227894838,x,y)
elseif J51==3 then
call CreateItem(1227894859,x,y)
elseif J51==4 then
call CreateItem(1227894840,x,y)
elseif J51==5 then
call CreateItem(1227894858,x,y)
endif
endif
else
if J31 then
set J51=GetRandomInt(1,5)
if J51==1 then
call CreateItem(1227894839,x1,y1)
elseif J51==2 then
call CreateItem(1227894838,x1,y1)
elseif J51==3 then
call CreateItem(1227894859,x1,y1)
elseif J51==4 then
call CreateItem(1227894840,x1,y1)
elseif J51==5 then
call CreateItem(1227894858,x1,y1)
endif
endif
if J41 then
set J51=GetRandomInt(1,5)
if J51==1 then
call CreateItem(1227894839,x2,y2)
elseif J51==2 then
call CreateItem(1227894838,x2,y2)
elseif J51==3 then
call CreateItem(1227894859,x2,y2)
elseif J51==4 then
call CreateItem(1227894840,x2,y2)
elseif J51==5 then
call CreateItem(1227894858,x2,y2)
endif
endif
endif
return false
endfunction
function J71 takes nothing returns nothing
set XN0=XN0+1
set XX0[XN0]=G60
set XY0[XN0]=GZ0
set XM0[XN0]=HG0
set XN0=XN0+1
set XX0[XN0]=G80
set XY0[XN0]=FT0
set XJ0[XN0]=W70
set XM0[XN0]=HH0
set XN0=XN0+1
set XX0[XN0]=FV0
set XY0[XN0]=FT0
set XJ0[XN0]=W80
set XM0[XN0]=HZ0
set XN0=XN0+1
set XX0[XN0]=G70
set XY0[XN0]=GC0
set XM0[XN0]=HV0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=W90
set XM0[XN0]=HX0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=FD0
set XJ0[XN0]=FC0
set XM0[XN0]=HY0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=FF0
set XJ0[XN0]=FC0
set XM0[XN0]=HJ0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=G90
set XJ0[XN0]=FC0
set XM0[XN0]=HK0
set XN0=XN0+1
set XX0[XN0]=FC0
set XY0[XN0]=WB0
set XM0[XN0]=HL0
set XN0=XN0+1
set XX0[XN0]=G50
set XY0[XN0]=G90
set XJ0[XN0]=GC0
set XM0[XN0]=HN0
set XN0=XN0+1
set XX0[XN0]=FE0
set XY0[XN0]=FK0
set XJ0[XN0]=WC0
set XM0[XN0]=HS0
set XN0=XN0+1
set XX0[XN0]=FE0
set XY0[XN0]=GB0
set XJ0[XN0]=WD0
set XM0[XN0]=HT0
set XN0=XN0+1
set XX0[XN0]=FE0
set XY0[XN0]=FQ0
set XJ0[XN0]=WE0
set XM0[XN0]=HR0
set XN0=XN0+1
set XX0[XN0]=FG0
set XY0[XN0]=FD0
set XJ0[XN0]=WF0
set XM0[XN0]=HP0
set XN0=XN0+1
set XX0[XN0]=GO0
set XY0[XN0]=FF0
set XJ0[XN0]=WG0
set XM0[XN0]=HQ0
set XN0=XN0+1
set XX0[XN0]=GV0
set XY0[XN0]=FF0
set XJ0[XN0]=WH0
set XM0[XN0]=HU0
set XN0=XN0+1
set XX0[XN0]=FZ0
set XY0[XN0]=FV0
set XJ0[XN0]=G90
set XM0[XN0]=ZI0
set XN0=XN0+1
set XX0[XN0]=GI0
set XY0[XN0]=FC0
set XJ0[XN0]=WZ0
set XM0[XN0]=Z10
set XN0=XN0+1
set XX0[XN0]=FG0
set XY0[XN0]=FG0
set XJ0[XN0]=G90
set XK0[XN0]=WV0
set XM0[XN0]=ZO0
set XN0=XN0+1
set XX0[XN0]=ZO0
set XY0[XN0]=WV0
set XM0[XN0]=Z20
set XN0=XN0+1
set XX0[XN0]=Z30
set XY0[XN0]=WV0
set XM0[XN0]=Z20
set XN0=XN0+1
set XX0[XN0]=FN0
set XY0[XN0]=FU0
set XM0[XN0]=Z50
set XN0=XN0+1
set XX0[XN0]=FU0
set XY0[XN0]=WW0
set XM0[XN0]=Z70
set XN0=XN0+1
set XX0[XN0]=GC0
set XY0[XN0]=GD0
set XJ0[XN0]=GZ0
set XK0[XN0]=WX0
set XM0[XN0]=Z80
set XN0=XN0+1
set XX0[XN0]=G40
set XY0[XN0]=FJ0
set XJ0[XN0]=GH0
set XM0[XN0]=Z90
set XN0=XN0+1
set XX0[XN0]=HH0
set XY0[XN0]=HZ0
set XJ0[XN0]=WY0
set XM0[XN0]=ZA0
set XN0=XN0+1
set XX0[XN0]=HQ0
set XY0[XN0]=HP0
set XM0[XN0]=ZB0
set XN0=XN0+1
set XX0[XN0]=GI0
set XY0[XN0]=GI0
set XJ0[XN0]=WK0
set XM0[XN0]=ZC0
set XN0=XN0+1
set XX0[XN0]=HG0
set XY0[XN0]=FZ0
set XJ0[XN0]=FW0
set XM0[XN0]=ZD0
set XN0=XN0+1
set XX0[XN0]=FH0
set XY0[XN0]=FZ0
set XJ0[XN0]=WL0
set XM0[XN0]=ZE0
set XN0=XN0+1
set XX0[XN0]=GI0
set XY0[XN0]=GO0
set XJ0[XN0]=WM0
set XM0[XN0]=ZF0
set XN0=XN0+1
set XX0[XN0]=HP0
set XY0[XN0]=GG0
set XJ0[XN0]=WN0
set XM0[XN0]=ZJ0
set XN0=XN0+1
set XX0[XN0]=G50
set XY0[XN0]=FW0
set XJ0[XN0]=WS0
set XM0[XN0]=ZK0
set XN0=XN0+1
set XX0[XN0]=GD0
set XY0[XN0]=HR0
set XJ0[XN0]=WT0
set XM0[XN0]=ZL0
set XN0=XN0+1
set XX0[XN0]=ZL0
set XY0[XN0]=WT0
set XM0[XN0]=ZM0
set XN0=XN0+1
set XX0[XN0]=ZM0
set XY0[XN0]=WT0
set XM0[XN0]=ZN0
set XN0=XN0+1
set XX0[XN0]=ZN0
set XY0[XN0]=WT0
set XM0[XN0]=ZS0
set XN0=XN0+1
set XX0[XN0]=ZS0
set XY0[XN0]=WT0
set XM0[XN0]=ZT0
set XN0=XN0+1
set XX0[XN0]=GD0
set XY0[XN0]=FF0
set XJ0[XN0]=WR0
set XM0[XN0]=ZR0
set XN0=XN0+1
set XX0[XN0]=ZR0
set XY0[XN0]=WR0
set XM0[XN0]=ZP0
set XN0=XN0+1
set XX0[XN0]=ZP0
set XY0[XN0]=WR0
set XM0[XN0]=ZQ0
set XN0=XN0+1
set XX0[XN0]=GG0
set XY0[XN0]=HG0
set XK0[XN0]=WP0
set XM0[XN0]=ZU0
set XN0=XN0+1
set XX0[XN0]=FX0
set XY0[XN0]=GA0
set XM0[XN0]=VI0
set XN0=XN0+1
set XX0[XN0]=ZE0
set XY0[XN0]=FX0
set XJ0[XN0]=WQ0
set XM0[XN0]=VO0
set XN0=XN0+1
set XX0[XN0]=FX0
set XY0[XN0]=GV0
set XJ0[XN0]=GV0
set XM0[XN0]=V20
set XN0=XN0+1
set XX0[XN0]=GA0
set XY0[XN0]=WU0
set XM0[XN0]=V40
set XN0=XN0+1
set XX0[XN0]=G00
set XY0[XN0]=GH0
set XJ0[XN0]=X00
set XM0[XN0]=V60
set XN0=XN0+1
set XX0[XN0]=G00
set XY0[XN0]=Z50
set XJ0[XN0]=XI0
set XM0[XN0]=V80
set XN0=XN0+1
set XX0[XN0]=G00
set XY0[XN0]=Z60
set XJ0[XN0]=XI0
set XM0[XN0]=V80
set XN0=XN0+1
set XX0[XN0]=GG0
set XY0[XN0]=GG0
set XJ0[XN0]=G40
set XK0[XN0]=F90
set XM0[XN0]=V90
set XN0=XN0+1
set XX0[XN0]=GG0
set XY0[XN0]=GG0
set XJ0[XN0]=G40
set XK0[XN0]=FA0
set XM0[XN0]=V90
set XN0=XN0+1
set XX0[XN0]=FY0
set XY0[XN0]=G50
set XJ0[XN0]=GU0
set XM0[XN0]=VB0
set XN0=XN0+1
set XX0[XN0]=GC0
set XY0[XN0]=FV0
set XJ0[XN0]=XZ0
set XM0[XN0]=W50
set XN0=XN0+1
set XX0[XN0]=G40
set XY0[XN0]=GO0
set XJ0[XN0]=FG0
set XK0[XN0]=GD0
set XM0[XN0]=XS0
set XN0=XN0+1
set XX0[XN0]=HG0
set XY0[XN0]=HN0
set XJ0[XN0]=X20
set XM0[XN0]=VC0
set XN0=XN0+1
set XX0[XN0]=GG0
set XY0[XN0]=G10
set XJ0[XN0]=GZ0
set XM0[XN0]=VD0
set XN0=XN0+1
set XX0[XN0]=GH0
set XY0[XN0]=G60
set XJ0[XN0]=GE0
set XM0[XN0]=VE0
set XN0=XN0+1
set XX0[XN0]=GH0
set XY0[XN0]=G60
set XJ0[XN0]=GF0
set XM0[XN0]=VE0
set XN0=XN0+1
set XX0[XN0]=FJ0
set XY0[XN0]=G70
set XJ0[XN0]=X30
set XM0[XN0]=VG0
set XN0=XN0+1
set XX0[XN0]=FS0
set XY0[XN0]=Z10
set XJ0[XN0]=XD0
set XM0[XN0]=VH0
set XN0=XN0+1
set XX0[XN0]=HA0
set XJ0[XN0]=X40
set XM0[XN0]=VZ0
set XN0=XN0+1
set XX0[XN0]=G80
set XY0[XN0]=HV0
set XJ0[XN0]=FU0
set XK0[XN0]=X50
set XM0[XN0]=VV0
set XN0=XN0+1
set XX0[XN0]=G80
set XY0[XN0]=HW0
set XJ0[XN0]=FU0
set XK0[XN0]=X50
set XM0[XN0]=VV0
set XN0=XN0+1
set XX0[XN0]=FS0
set XY0[XN0]=G30
set XJ0[XN0]=FV0
set XK0[XN0]=X60
set XM0[XN0]=VW0
set XN0=XN0+1
set XX0[XN0]=Z90
set XY0[XN0]=HG0
set XM0[XN0]=VX0
set XN0=XN0+1
set XX0[XN0]=G80
set XY0[XN0]=G80
set XJ0[XN0]=G60
set XK0[XN0]=G20
set XM0[XN0]=VY0
set XN0=XN0+1
set XX0[XN0]=FC0
set XY0[XN0]=FN0
set XJ0[XN0]=FH0
set XK0[XN0]=X70
set XM0[XN0]=VM0
set XN0=XN0+1
set XX0[XN0]=G10
set XY0[XN0]=G30
set XJ0[XN0]=X80
set XM0[XN0]=VN0
set XN0=XN0+1
set XX0[XN0]=HN0
set XY0[XN0]=HN0
set XJ0[XN0]=HN0
set XM0[XN0]=VT0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=FH0
set XJ0[XN0]=FH0
set XM0[XN0]=VR0
set XN0=XN0+1
set XX0[XN0]=GR0
set XY0[XN0]=FT0
set XJ0[XN0]=FT0
set XK0[XN0]=FT0
set XL0[XN0]=X90
set XM0[XN0]=VP0
set XN0=XN0+1
set XX0[XN0]=G50
set XY0[XN0]=GD0
set XJ0[XN0]=XA0
set XM0[XN0]=VQ0
set XN0=XN0+1
set XX0[XN0]=VY0
set XY0[XN0]=HH0
set XJ0[XN0]=XB0
set XM0[XN0]=VU0
set XN0=XN0+1
set XX0[XN0]=GE0
set XY0[XN0]=GB0
set XJ0[XN0]=GB0
set XM0[XN0]=W00
set XN0=XN0+1
set XX0[XN0]=GF0
set XY0[XN0]=GB0
set XJ0[XN0]=GB0
set XM0[XN0]=W00
set XN0=XN0+1
set XX0[XN0]=GC0
set XY0[XN0]=FK0
set XJ0[XN0]=FK0
set XK0[XN0]=XE0
set XM0[XN0]=WO0
set XN0=XN0+1
set XX0[XN0]=GC0
set XY0[XN0]=G80
set XJ0[XN0]=XF0
set XM0[XN0]=W30
set XN0=XN0+1
set XX0[XN0]=FY0
set XY0[XN0]=W10
set XM0[XN0]=H00
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=FJ0
set XM0[XN0]=W40
set XN0=XN0+1
set XX0[XN0]=G90
set XY0[XN0]=HS0
set XJ0[XN0]=XH0
set XM0[XN0]=HO0
set XN0=XN0+1
set XX0[XN0]=HO0
set XY0[XN0]=XH0
set XM0[XN0]=HO0
set XN0=XN0+1
set XX0[XN0]=H20
set XY0[XN0]=XH0
set XM0[XN0]=HO0
set XN0=XN0+1
set XX0[XN0]=FN0
set XY0[XN0]=G90
set XJ0[XN0]=G90
set XK0[XN0]=XV0
set XM0[XN0]=W60
endfunction
function InitTrig_Recipe_Definitions takes nothing returns nothing
call J71()
endfunction
function J81 takes nothing returns nothing
set F80=F80+1
set FO0[F80]=1227899226
set F20[F80]=1227895089
set F30[F80]=0
set F40[F80]=1227900249
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XT0=F80
set F80=F80+1
set FO0[F80]=1227894854
set F20[F80]=1227894852
set F30[F80]=0
set F40[F80]=1227900250
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XR0=F80
set F80=F80+1
set FO0[F80]=1227895096
set F20[F80]=1227894841
set F30[F80]=0
set F40[F80]=1227900464
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XP0=F80
set F80=F80+1
set FO0[F80]=1227895097
set F20[F80]=1227894837
set F30[F80]=0
set F40[F80]=1227900470
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XQ0=F80
set F80=F80+1
set FO0[F80]=1227895105
set F20[F80]=1227894855
set F30[F80]=0
set F40[F80]=1227900465
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XU0=F80
set F80=F80+1
set FO0[F80]=1227895106
set F20[F80]=1227894836
set F30[F80]=0
set F40[F80]=1227900466
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y00=F80
set F80=F80+1
set FO0[F80]=1227895112
set F20[F80]=1227894835
set F30[F80]=0
set F40[F80]=1227900467
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YI0=F80
set F80=F80+1
set FO0[F80]=1227895113
set F20[F80]=1227894834
set F30[F80]=0
set F40[F80]=1227900469
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y10=F80
set F80=F80+1
set FO0[F80]=1227895371
set F20[F80]=1227894833
set F30[F80]=0
set F40[F80]=1227900468
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YO0=F80
set F80=F80+1
set FO0[F80]=1227895372
set F20[F80]=1227894857
set F30[F80]=0
set F40[F80]=1227900485
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y20=F80
set F80=F80+1
set FO0[F80]=1227899442
set F20[F80]=1227894856
set F30[F80]=0
set F40[F80]=1227900473
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y40=F80
set F80=F80+1
set FO0[F80]=1227899443
set F20[F80]=1227894864
set F30[F80]=0
set F40[F80]=1227900481
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y50=F80
set F80=F80+1
set FO0[F80]=1227899444
set F20[F80]=1227894869
set F30[F80]=0
set F40[F80]=1227900471
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y60=F80
set F80=F80+1
set FO0[F80]=1227899447
set F20[F80]=1227894832
set F30[F80]=0
set F40[F80]=1227900484
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y70=F80
set F80=F80+1
set FO0[F80]=1227899446
set F20[F80]=1227895094
set F30[F80]=0
set F40[F80]=1227900483
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y80=F80
set F80=F80+1
set FO0[F80]=1227899445
set F20[F80]=1227895095
set F30[F80]=0
set F40[F80]=1227900482
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y90=F80
set F80=F80+1
set FO0[F80]=1227899449
set F20[F80]=1227894863
set F30[F80]=0
set F40[F80]=1227900472
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YA0=F80
set F80=F80+1
set FO0[F80]=1227901493
set F20[F80]=1227901268
set F30[F80]=0
set F40[F80]=1227901258
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YB0=F80
set F80=F80+1
set FO0[F80]=1227901270
set F20[F80]=1227901269
set F30[F80]=0
set F40[F80]=1227901241
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YC0=F80
set F80=F80+1
set FO0[F80]=1227901271
set F20[F80]=1227901267
set F30[F80]=0
set F40[F80]=1227901257
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YD0=F80
set F80=F80+1
set FO0[F80]=1227901272
set F20[F80]=1227901266
set F30[F80]=0
set F40[F80]=1227901249
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YE0=F80
set F80=F80+1
set FO0[F80]=1227901273
set F20[F80]=1227901265
set F30[F80]=0
set F40[F80]=1227901256
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YF0=F80
set F80=F80+1
set FO0[F80]=1227901274
set F20[F80]=1227901259
set F30[F80]=0
set F40[F80]=1227901255
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YG0=F80
set F80=F80+1
set FO0[F80]=1227901488
set F20[F80]=1227901260
set F30[F80]=0
set F40[F80]=1227901254
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YH0=F80
set F80=F80+1
set FO0[F80]=1227901489
set F20[F80]=1227901261
set F30[F80]=0
set F40[F80]=1227901253
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YZ0=F80
set F80=F80+1
set FO0[F80]=1227901490
set F20[F80]=1227901264
set F30[F80]=0
set F40[F80]=1227901252
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YV0=F80
set F80=F80+1
set FO0[F80]=1227901491
set F20[F80]=1227901263
set F30[F80]=0
set F40[F80]=1227901251
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YW0=F80
set F80=F80+1
set FO0[F80]=1227901492
set F20[F80]=1227901262
set F30[F80]=0
set F40[F80]=1227901250
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YX0=F80
set F80=F80+1
set FO0[F80]=1227901238
set F20[F80]=1227901239
set F30[F80]=0
set F40[F80]=1227901240
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YY0=F80
set F80=F80+1
set FO0[F80]=1227901530
set F20[F80]=1227901523
set F30[F80]=0
set F40[F80]=1227901522
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YJ0=F80
set F80=F80+1
set FO0[F80]=1227901744
set F20[F80]=1227901524
set F30[F80]=0
set F40[F80]=1227901516
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YK0=F80
set F80=F80+1
set FO0[F80]=1227901745
set F20[F80]=1227901525
set F30[F80]=0
set F40[F80]=1227901517
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YL0=F80
set F80=F80+1
set FO0[F80]=1227901746
set F20[F80]=1227901527
set F30[F80]=0
set F40[F80]=1227901518
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YM0=F80
set F80=F80+1
set FO0[F80]=1227901747
set F20[F80]=1227901526
set F30[F80]=0
set F40[F80]=1227901521
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YN0=F80
set F80=F80+1
set FO0[F80]=1227901748
set F20[F80]=1227901529
set F30[F80]=0
set F40[F80]=1227901520
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YS0=F80
set F80=F80+1
set FO0[F80]=1227901749
set F20[F80]=1227901528
set F30[F80]=0
set F40[F80]=1227901519
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YT0=F80
set F80=F80+1
set FO0[F80]=1227901769
set F20[F80]=1227901768
set F30[F80]=0
set F40[F80]=1227901770
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YR0=F80
set F80=F80+1
set FO0[F80]=1227902004
set F20[F80]=1227902005
set F30[F80]=0
set F40[F80]=1227902008
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y30=F80
set F80=F80+1
set FO0[F80]=1227902003
set F20[F80]=1227902000
set F30[F80]=0
set F40[F80]=1227902009
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YP0=F80
set F80=F80+1
set FO0[F80]=1227902002
set F20[F80]=1227902007
set F30[F80]=0
set F40[F80]=1227902017
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YQ0=F80
set F80=F80+1
set FO0[F80]=1227902037
set F20[F80]=1227902038
set F30[F80]=0
set F40[F80]=1227902039
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YU0=F80
set F80=F80+1
set FO0[F80]=1227902257
set F20[F80]=1227902256
set F30[F80]=0
set F40[F80]=1227902258
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J00=F80
set F80=F80+1
set FO0[F80]=1227902261
set F20[F80]=1227902260
set F30[F80]=0
set F40[F80]=1227902259
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set JI0=F80
set F80=F80+1
set FO0[F80]=1227902262
set F20[F80]=1227902263
set F30[F80]=0
set F40[F80]=1227902264
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J10=F80
set F80=F80+1
set FO0[F80]=1227902278
set F20[F80]=1227902279
set F30[F80]=0
set F40[F80]=1227902280
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set JO0=F80
set F80=F80+1
set FO0[F80]=1227902285
set F20[F80]=1227902284
set F30[F80]=0
set F40[F80]=1227902286
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J20=F80
set F80=F80+1
set FO0[F80]=1227902287
set F20[F80]=1227902288
set F30[F80]=0
set F40[F80]=1227902289
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J30=F80
set F80=F80+1
set FO0[F80]=1227902545
set F20[F80]=1227902546
set F30[F80]=0
set F40[F80]=1227902547
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J40=F80
set F80=F80+1
set FO0[F80]=1227902548
set F20[F80]=1227902549
set F30[F80]=0
set F40[F80]=1227902550
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J50=F80
set F80=F80+1
set FO0[F80]=1227902551
set F20[F80]=1227902552
set F30[F80]=0
set F40[F80]=1227902553
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J60=F80
set F80=F80+1
set FO0[F80]=1227902554
set F20[F80]=1227902768
set F30[F80]=0
set F40[F80]=1227902769
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J70=F80
endfunction
function InitTrig_Aghanims_Scepter_Definitions takes nothing returns nothing
call J81()
endfunction
function J91 takes unit XSI returns nothing
local real x
local real y
if VLI(GetOwningPlayer(XSI))then
set x=GetRectCenterX(A4)
set y=GetRectCenterY(A4)
else
set x=GetRectCenterX(T3)
set y=GetRectCenterY(T3)
endif
call IssuePointOrder(XSI,"move",x,y)
endfunction
function JA1 takes nothing returns nothing
local item NFI=GetEnumItem()
if GetWidgetLife(NFI)>0 and GetItemPlayer(NFI)==JF0 and JZ0==0 then
set JZ0=JZ0+1
call UnitAddItem(JG0,NFI)
endif
set NFI=null
endfunction
function JB1 takes nothing returns nothing
local item NFI=GetEnumItem()
if GetWidgetLife(NFI)>0 and GetItemPlayer(NFI)==JF0 then
call UnitAddItem(JH0,NFI)
endif
set NFI=null
endfunction
function JC1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit JD1=(LoadUnitHandle(ZY,(V0I),(92)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local rect r=Rect(x-300,y-300,x+300,y+300)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set JF0=p
set JG0=XSI
set JH0=JD1
call EnumItemsInRect(r,Condition(function HRI),function JB1)
else
if GetTriggerEvalCount(t)>9 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set JF0=p
set JG0=XSI
set JH0=JD1
call EnumItemsInRect(r,Condition(function HRI),function JB1)
else
set JF0=p
set JG0=XSI
set JZ0=0
call EnumItemsInRect(r,Condition(function HRI),function JA1)
endif
endif
call RemoveRect(r)
set t=null
set XSI=null
set JD1=null
set r=null
return false
endfunction
function JE1 takes unit JD1,unit XSI returns nothing
local player p=GetOwningPlayer(XSI)
local integer i
local item NFI
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real x=GetUnitX(JD1)
local real y=GetUnitY(JD1)
local integer TTI
if IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)then
set x=GetUnitX(XSI)
set y=GetUnitY(XSI)
endif
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,0.01,true)
call TriggerAddCondition(t,Condition(function JC1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(92),(JD1))
call SavePlayerHandle(ZY,(V0I),(54),(p))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
set i=0
loop
exitwhen i>5
set NFI=UnitItemInSlot(JD1,i)
set TTI=TQI(NFI)
if NFI!=null and GetItemPlayer(NFI)==p and ROI(NFI)==false and(TTI!=GL0 and TTI!=GM0 and TTI!=GN0 and TTI!=GS0 and TTI!=GT0)then
call UnitRemoveItem(JD1,NFI)
call SetItemPosition(NFI,x,y)
endif
set i=i+1
endloop
set t=null
set NFI=null
endfunction
function JF1 takes unit NDI returns boolean
local integer JG1=GetUnitCurrentOrder(NDI)
return(JG1==0)or(JG1==851973)or(JG1==851975)or(JG1==851987)or(JG1==851993)
endfunction
function JH1 takes trigger t returns nothing
local integer V0I=GetHandleId(t)
local unit JD1=(LoadUnitHandle(ZY,(V0I),(92)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(2)))
local real x
local real y
local real JZ1
local real JV1
local real JW1
local real JX1
local real JY1
local real J3I
local real JJ1
local real JK1=GetUnitX(V8I)
local real JL1=GetUnitY(V8I)
if(JF1(V8I)==false)then
set x=GetUnitX(V8I)
set y=GetUnitY(V8I)
set JX1=(LoadReal(ZY,(V0I),(677)))
set JY1=(LoadReal(ZY,(V0I),(678)))
call SaveReal(ZY,(V0I),(677),((x)*1.0))
call SaveReal(ZY,(V0I),(678),((y)*1.0))
set JW1=Atan2(y-JY1,x-JX1)
set JZ1=SquareRoot((x-JX1)*(x-JX1)+(y-JY1)*(y-JY1))/0.2
set JV1=GetUnitMoveSpeed(JD1)
set J3I=JAI(GetUnitX(V8I),GetUnitY(V8I),GetUnitX(JD1),GetUnitY(JD1))
set JJ1=RAbsBJ(JW1*bj_RADTODEG-GetUnitFacing(JD1))
if(J3I<JV1-JZ1 and JV1>JZ1)or(J3I<RMaxBJ(JV1,JZ1)and JJ1>=90)then
else
set JK1=x+JZ1*Cos(JW1)
set JL1=y+JZ1*Sin(JW1)
endif
endif
call SaveInteger(ZY,(V0I),(679),(1))
call IssuePointOrder(JD1,"move",JK1,JL1)
set JD1=null
set V8I=null
set t=null
endfunction
function JM1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit JD1=(LoadUnitHandle(ZY,(V0I),(92)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x
local real y
local integer i
local player p=GetOwningPlayer(XSI)
local item NFI
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if GetTriggerUnit()==XSI then
call J91(JD1)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
if(LoadInteger(ZY,(V0I),(679)))==1 then
call SaveInteger(ZY,(V0I),(679),(0))
elseif GetIssuedOrderId()!=852100 and GetIssuedOrderId()!=852090 then
call ZSI(t)
endif
else
if J8I(JD1,XSI)<150 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call JE1(JD1,XSI)
call J91(JD1)
else
call JH1(t)
endif
endif
set t=null
set JD1=null
set XSI=null
set NFI=null
return false
endfunction
function JN1 takes unit V8I,boolean JS1 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit JD1=GetSellingUnit()
local integer JT1=(LoadInteger(ZY,(GetHandleId(JD1)),(8000)))
if V8I!=null then
if V8I!=(LoadUnitHandle(ZY,(GetHandleId(JD1)),(8002+JT1)))and JS1 then
set JT1=JT1+1
call SaveInteger(ZY,(GetHandleId(JD1)),(8000),(JT1))
call SaveUnitHandle(ZY,(GetHandleId(JD1)),(8002+JT1),(V8I))
endif
call SaveReal(ZY,(V0I),(677),((GetUnitX(V8I))*1.0))
call SaveReal(ZY,(V0I),(678),((GetUnitY(V8I))*1.0))
call IssueTargetOrder(JD1,"move",V8I)
call TriggerRegisterUnitEvent(t,JD1,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,JD1,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,JD1,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,JD1,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerAddCondition(t,Condition(function JM1))
call SaveUnitHandle(ZY,(V0I),(2),(V8I))
call SaveUnitHandle(ZY,(V0I),(92),(JD1))
endif
set t=null
set JD1=null
endfunction
function JR1 takes nothing returns nothing
local item NFI=GetEnumItem()
local unit u=K20
local player p=GetOwningPlayer(u)
local integer id=GetPlayerId(p)
if GetWidgetLife(NFI)>0 and GetItemPlayer(NFI)==p then
call SetItemPosition(NFI,CM0[id],CN0[id])
call UnitAddItem(JW0,NFI)
endif
set NFI=null
set u=null
set p=null
endfunction
function JP1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=(LoadUnitHandle(ZY,(V0I),(53)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
set K20=u
set JW0=XSI
if VLI(GetOwningPlayer(K20))then
call EnumItemsInRect(H5,Condition(function HRI),function JR1)
else
call EnumItemsInRect(Z5,Condition(function HRI),function JR1)
endif
if GetTriggerEvalCount(t)==3 then
call KillUnit(u)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set u=null
return false
endfunction
function JQ1 takes unit V8I returns nothing
local unit u=GetSoldUnit()
local integer i=0
local item NFI
local integer id=GetPlayerId(GetOwningPlayer(u))
local region r=CreateRegion()
local trigger t
local integer V0I
local unit XSI=GetSellingUnit()
if VLI(GetOwningPlayer(u))then
call RegionAddRect(r,H5)
else
call RegionAddRect(r,Z5)
endif
if IsUnitInRegion(r,XSI)then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function JP1))
call SaveUnitHandle(ZY,(V0I),(53),(u))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
loop
exitwhen i>5
set NFI=UnitItemInSlot(XSI,i)
if TRI(TQI(NFI))==false and TQI(NFI)!=ZX0 and ROI(NFI)==false then
call UnitRemoveItemFromSlot(XSI,i)
if IsUnitInRegion(r,XSI)and IsPlayerAlly(GetItemPlayer(NFI),GetOwningPlayer(XSI))==true then
set id=GetPlayerId(GetItemPlayer(NFI))
call SetItemPosition(NFI,CM0[id],CN0[id])
endif
endif
set i=i+1
endloop
endif
call RemoveRegion(r)
set u=null
set r=null
endfunction
function JU1 takes unit u returns string
local string s=GetObjectName(1848657487)
set s=PAI(s,"$hero",C0[GetPlayerId(GetOwningPlayer(u))]+GetUnitName(u)+"|r")
return s
endfunction
function K01 takes unit XSI returns boolean
if GetOwningPlayer(XSI)!=GetLocalPlayer()then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,JU1(L1[GetPlayerId(GetOwningPlayer(XSI))]))
endif
return false
endfunction
function KI1 takes nothing returns nothing
if GetUnitTypeId(GetSoldUnit())==1747990581 then
if L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null and KMI(L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])==false then
call JN1(L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],true)
endif
call KillUnit(GetSoldUnit())
elseif GetUnitTypeId(GetSoldUnit())==1747993174 then
if L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
call JQ1(L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])
endif
call KillUnit(GetSoldUnit())
elseif GetUnitTypeId(GetSoldUnit())==1747993669 then
if L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
call JN1((LoadUnitHandle(ZY,(GetHandleId(GetSellingUnit())),(8002+(LoadInteger(ZY,(GetHandleId(GetSellingUnit())),(8000)))-1))),false)
endif
call KillUnit(GetSoldUnit())
elseif Q0I(GetUnitTypeId(GetSoldUnit()))then
if L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
if KMI(L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])==true and GetOwningPlayer(GetSoldUnit())==GetOwningPlayer(GetSellingUnit())and((LoadInteger(ZY,(GetHandleId((L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]))),((4304))))==1)==false then
call K01(L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])
set JV0=true
call ReviveHero(L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),true)
set JV0=false
call SetUnitState(L1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],UNIT_STATE_MANA,10000)
set E80[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]=IMaxBJ(0,E80[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]-OS[QII(GetHeroLevel(L1[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])
call Q7I(GetOwningPlayer(GetSoldUnit()))
else
call SetPlayerState(GetOwningPlayer(GetSoldUnit()),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(GetSoldUnit()),PLAYER_STATE_RESOURCE_GOLD)+OS[QII(GetHeroLevel(L1[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])
endif
endif
call KillUnit(GetSoldUnit())
endif
endfunction
function KO1 takes player H8I,unit VCI,integer K21,integer i0,integer i1,integer i2,integer i3,integer i4,integer i5 returns nothing
local item NFI
call DisableTrigger(JP0)
if i0>0 then
set NFI=UnitItemInSlot(VCI,0)
call RBI(NFI)
endif
if i1>0 then
set NFI=UnitItemInSlot(VCI,1)
call RBI(NFI)
endif
if i2>0 then
set NFI=UnitItemInSlot(VCI,2)
call RBI(NFI)
endif
if i3>0 then
set NFI=UnitItemInSlot(VCI,3)
call RBI(NFI)
endif
if i4>0 then
set NFI=UnitItemInSlot(VCI,4)
call RBI(NFI)
endif
if i5>0 then
set NFI=UnitItemInSlot(VCI,5)
call RBI(NFI)
endif
set NFI=UnitAddItemById(VCI,F20[K21])
call SetItemPlayer(NFI,H8I,true)
call SetItemUserData(NFI,0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",VCI,"origin"))
if TQI(NFI)==VX0 then
call SetItemCharges(NFI,5)
endif
call EnableTrigger(JP0)
if IsPlayerAlly(GetLocalPlayer(),H8I)==true then
if K21==ZA0 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(H8I)]+(CR0[GetPlayerId((H8I))])+"|r |c00ffff00"+GetObjectName(1848659032)+"|r")
elseif K21==VI0 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(H8I)]+(CR0[GetPlayerId((H8I))])+"|r |c00ffff00"+GetObjectName(1848659033)+"|r")
endif
endif
set NFI=null
endfunction
function K31 takes player p,unit VCI,integer TTI returns boolean
local integer i
local integer x
local integer y
local integer array K41
local boolean array K51
local integer array K61
local boolean array K71
local boolean array P3I
local integer array RRI
local player H8I
local integer K81=1
local integer k
local player array K91
local integer m
local item KA1
local item KB1
local item KC1
local item KD1
local item KE1
local item KF1
local player KG1
local player KH1
local player KZ1
local player KV1
local player KW1
local player KX1
local integer KY1
local integer KJ1
local integer KK1
local integer KL1
local integer KM1
local integer KN1
local integer KS1
local integer KT1
local integer KR1
local integer KP1
local integer KQ1
local integer KU1
local boolean L01=false
local boolean LI1=true
set KA1=UnitItemInSlot(VCI,0)
set KB1=UnitItemInSlot(VCI,1)
set KC1=UnitItemInSlot(VCI,2)
set KD1=UnitItemInSlot(VCI,3)
set KE1=UnitItemInSlot(VCI,4)
set KF1=UnitItemInSlot(VCI,5)
set KG1=GetItemPlayer(KA1)
set KH1=GetItemPlayer(KB1)
set KZ1=GetItemPlayer(KC1)
set KV1=GetItemPlayer(KD1)
set KW1=GetItemPlayer(KE1)
set KX1=GetItemPlayer(KF1)
set KY1=GetItemUserData(KA1)
set KJ1=GetItemUserData(KB1)
set KK1=GetItemUserData(KC1)
set KL1=GetItemUserData(KD1)
set KM1=GetItemUserData(KE1)
set KN1=GetItemUserData(KF1)
set KS1=TQI(KA1)
set KT1=TQI(KB1)
set KR1=TQI(KC1)
set KP1=TQI(KD1)
set KQ1=TQI(KE1)
set KU1=TQI(KF1)
if(GetPlayerSlotState((p))==PLAYER_SLOT_STATE_LEFT)then
set K81=5
set L01=true
endif
set K91[1]=p
if L01 then
set k=2
set m=1
loop
exitwhen k>K81
if VLI(p)then
if p!=CO[m]then
set K91[k]=CO[m]
set k=k+1
endif
else
if p!=DO[m]then
set K91[k]=DO[m]
set k=k+1
endif
endif
set m=m+1
endloop
endif
set k=1
loop
exitwhen k>K81
set H8I=K91[k]
set i=0
if KA1!=null and KY1==1 and(KG1==H8I or BL or(GetPlayerSlotState((KG1))==PLAYER_SLOT_STATE_LEFT)==true)then
set K41[i+1]=KS1
else
set K41[i+1]=0
endif
set i=1
if KB1!=null and KJ1==1 and(KH1==H8I or BL or(GetPlayerSlotState((KH1))==PLAYER_SLOT_STATE_LEFT)==true)then
set K41[i+1]=KT1
else
set K41[i+1]=0
endif
set i=2
if KC1!=null and KK1==1 and(KZ1==H8I or BL or(GetPlayerSlotState((KZ1))==PLAYER_SLOT_STATE_LEFT)==true)then
set K41[i+1]=KR1
else
set K41[i+1]=0
endif
set i=3
if KD1!=null and KL1==1 and(KV1==H8I or BL or(GetPlayerSlotState((KV1))==PLAYER_SLOT_STATE_LEFT)==true)then
set K41[i+1]=KP1
else
set K41[i+1]=0
endif
set i=4
if KE1!=null and KM1==1 and(KW1==H8I or BL or(GetPlayerSlotState((KW1))==PLAYER_SLOT_STATE_LEFT)==true)then
set K41[i+1]=KQ1
else
set K41[i+1]=0
endif
set i=5
if KF1!=null and KN1==1 and(KX1==H8I or BL or(GetPlayerSlotState((KX1))==PLAYER_SLOT_STATE_LEFT)==true)then
set K41[i+1]=KU1
else
set K41[i+1]=0
endif
set K41[0]=TTI
set i=1
loop
exitwhen i>(XN0)
set K61[0]=XX0[i]
set K61[1]=XY0[i]
set K61[2]=XJ0[i]
set K61[3]=XK0[i]
set K61[4]=XL0[i]
if LI1 then
set K71[0]=true
set K71[1]=true
set K71[2]=true
set K71[3]=true
set K71[4]=true
set K71[5]=true
set K71[6]=true
set K51[0]=true
set K51[1]=true
set K51[2]=true
set K51[3]=true
set K51[4]=true
set K51[5]=true
set K51[6]=true
set RRI[0]=0
set RRI[1]=0
set RRI[2]=0
set RRI[3]=0
set RRI[4]=0
set RRI[5]=0
set RRI[6]=0
set LI1=false
endif
set P3I[0]=false
set P3I[1]=false
set P3I[2]=false
set P3I[3]=false
set P3I[4]=false
set x=0
loop
exitwhen x==5
if K61[x]==0 then
set P3I[x]=true
else
set y=0
loop
exitwhen y==7
if K41[y]==K61[x]and K51[y]and K71[x]then
set K51[y]=false
set K71[x]=false
set P3I[x]=true
set RRI[y]=1
set y=7
set LI1=true
else
set y=y+1
endif
endloop
endif
if P3I[x]==true then
set x=x+1
else
set x=5
endif
endloop
if P3I[0]and P3I[1]and P3I[2]and P3I[3]and P3I[4]then
call KO1(H8I,VCI,XM0[i],RRI[1],RRI[2],RRI[3],RRI[4],RRI[5],RRI[6])
set i=XN0+2
else
set i=i+1
endif
endloop
set HK=RRI[0]==1
if i==(XN0+2)then
set KA1=null
set KB1=null
set KC1=null
set KD1=null
set KE1=null
set KF1=null
return true
endif
set k=k+1
endloop
set KA1=null
set KB1=null
set KC1=null
set KD1=null
set KE1=null
set KF1=null
return false
endfunction
function L11 takes player H8I,unit VCI,integer TTI returns boolean
local integer i=1
local boolean RRI
set HK=false
set RRI=K31(H8I,VCI,TTI)
return RRI
endfunction
function LO1 takes nothing returns boolean
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(OK))==true and GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0 and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(OK),ALLIANCE_SHARED_CONTROL)and GetOwningPlayer(OK)!=GetOwningPlayer(GetFilterUnit())and IsUnitIllusion(GetFilterUnit())==false and KMI(GetFilterUnit())==false then
if XBI(GetFilterUnit())==true then
set MJ=MJ+1
set AK=GetFilterUnit()
endif
endif
return false
endfunction
function L21 takes nothing returns boolean
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(OK))==true and GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0 and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!=1852010352 and IsUnitIllusion(GetFilterUnit())==false and KMI(GetFilterUnit())==false then
if GetOwningPlayer(OK)==GetOwningPlayer(GetFilterUnit())then
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
if GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 then
set AK=GetFilterUnit()
endif
elseif IsUnitType(AK,UNIT_TYPE_HERO)==false then
set AK=GetFilterUnit()
endif
endif
endif
return false
endfunction
function L31 takes unit VCI,integer L41 returns unit
local group g=ZJI()
set OK=VCI
set AK=null
call GroupEnumUnitsInRange(g,GetUnitX(BK),GetUnitY(BK),1300+L41,Condition(function L21))
if AK==null then
set MJ=0
call ZYI(g)
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(BK),GetUnitY(BK),1100+L41,Condition(function LO1))
if MJ>1 then
set AK=null
endif
endif
call ZYI(g)
set g=null
return AK
endfunction
function L51 takes player H8I,unit VCI,unit L61,integer TTI,real x,real y,integer R8I,integer L71 returns nothing
local unit L81
local item R9I
set BK=L61
if GetUnitPointValue(VCI)==200 then
set L81=L31(VCI,0)
if L81==null then
set L81=L31(VCI,300)
endif
else
set L81=VCI
endif
if L81==null or L11(H8I,L81,TSI(TTI))==false or HK==false then
if R5I(TSI(TTI))then
if RZI(L81)==0 or L81==null then
call RAI(FO0[TTI],x,y,H8I,true,R8I)
else
set R9I=UnitAddItemById(L81,F20[TTI])
call SetItemCharges(R9I,R8I)
call SetItemPlayer(R9I,H8I,true)
call SetItemUserData(R9I,L71)
endif
elseif R4I(TSI(TTI))then
if L81==null or(RZI(L81)==0 and REI(L81,F20[TTI])==null)then
call RAI(FO0[TTI],x,y,H8I,true,RNI(TTI))
else
set R9I=CreateItem(FO0[TTI],x,y)
call SetItemPlayer(R9I,H8I,true)
call SetItemUserData(R9I,L71)
call SetItemCharges(R9I,RNI(TTI))
call UnitAddItem(L81,R9I)
endif
else
if RZI(L81)==0 or L81==null then
call RAI(FO0[TTI],x,y,H8I,false,0)
else
set R9I=UnitAddItemById(L81,F20[TTI])
call SetItemPlayer(R9I,H8I,true)
call SetItemUserData(R9I,0)
endif
endif
else
if IsUnitType(L81,UNIT_TYPE_HERO)==true then
if L71==0 then
call P7I("PUI_"+I2S(GetPlayerId(GetOwningPlayer(L81))),F20[TSI(TTI)])
endif
endif
endif
set L81=null
set R9I=null
endfunction
function L91 takes player p,integer TTI returns nothing
local integer i=GetPlayerId(p)
if TTI==H30 then
set E[i]=E[i]+1
elseif TTI==H50 then
set E[i]=E[i]+1
elseif TTI==H60 then
set E[i]=E[i]+3
elseif TTI==H70 then
set E[i]=E[i]+2
set F[i]=F[i]+2
elseif TTI==H80 then
set E[i]=E[i]+2
set F[i]=F[i]+2
elseif TTI==H90 then
set E[i]=E[i]+1
elseif TTI==HD0 then
set E[i]=E[i]+2
elseif TTI==H40 then
set E[i]=E[i]+2
elseif TTI==HE0 then
set E[i]=E[i]+2
endif
endfunction
function LA1 takes unit LB1,unit LC1 returns boolean
local integer TTI
if(LB1==BB0 or LB1==B80)and IsUnitAlly(LC1,DO[0])then
return false
elseif(LB1==XQ or LB1==ZQ)and IsUnitAlly(LC1,CO[0])then
return false
endif
set TTI=RJI(LC1)
if TTI==H70 or TTI==FL0 or TTI==HF0 then
return true
endif
return false
endfunction
function LD1 takes unit L61,unit LE1 returns real
if L61==ZQ or L61==VQ or L61==WQ or L61==XQ or L61==YQ or L61==JQ or L61==KQ or L61==LQ or L61==MQ or L61==NQ then
return CM0[GetPlayerId(GetOwningPlayer(LE1))]
elseif L61==B80 or L61==B90 or L61==BA0 or L61==BB0 or L61==BC0 or L61==BD0 or L61==BE0 or L61==BF0 or L61==BG0 or L61==BH0 then
return CM0[GetPlayerId(GetOwningPlayer(LE1))]
elseif L61==CY or L61==HZ then
return-7133.0
elseif L61==DY or L61==EY then
return 7207.0
endif
return GetUnitX(LE1)
endfunction
function LF1 takes unit L61,unit LE1 returns real
if L61==ZQ or L61==VQ or L61==WQ or L61==XQ or L61==YQ or L61==JQ or L61==KQ or L61==LQ or L61==MQ or L61==NQ then
return CN0[GetPlayerId(GetOwningPlayer(LE1))]
elseif L61==B80 or L61==B90 or L61==BA0 or L61==BB0 or L61==BC0 or L61==BD0 or L61==BE0 or L61==BF0 or L61==BG0 or L61==BH0 then
return CN0[GetPlayerId(GetOwningPlayer(LE1))]
elseif L61==CY or L61==HZ then
return 4317.0
elseif L61==DY or L61==EY then
return-4243.0
endif
return GetUnitY(LE1)
endfunction
function LG1 takes unit L61,unit LE1 returns real
if L61==ZQ or L61==VQ or L61==WQ or L61==XQ or L61==YQ or L61==JQ or L61==KQ or L61==LQ or L61==MQ or L61==NQ then
return GetRectCenterX(A4)
elseif L61==B80 or L61==B90 or L61==BA0 or L61==BB0 or L61==BC0 or L61==BD0 or L61==BE0 or L61==BF0 or L61==BG0 or L61==BH0 then
return GetRectCenterX(T3)
endif
return GetUnitX(LE1)
endfunction
function LH1 takes unit L61,unit LE1 returns real
if L61==ZQ or L61==VQ or L61==WQ or L61==XQ or L61==YQ or L61==JQ or L61==KQ or L61==LQ or L61==MQ or L61==NQ then
return GetRectCenterY(A4)
elseif L61==B80 or L61==B90 or L61==BA0 or L61==BB0 or L61==BC0 or L61==BD0 or L61==BE0 or L61==BF0 or L61==BG0 or L61==BH0 then
return GetRectCenterY(T3)
endif
return GetUnitY(LE1)
endfunction
function UnitItem_Delayed_Expire takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local unit u=(LoadUnitHandle(ZY,(V0I),(53)))
local unit s=(LoadUnitHandle(ZY,(V0I),(94)))
local integer TTI=(LoadInteger(ZY,(V0I),(93)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local integer R8I=(LoadInteger(ZY,(V0I),(76)))
call L51(p,u,s,TSI(TTI),x,y,R8I,0)
call ShowUnit(u,false)
call UnitApplyTimedLife(u,1112820806,2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set p=null
set u=null
return false
endfunction
function LZ1 takes nothing returns nothing
local unit u=GetSoldUnit()
local player p=GetOwningPlayer(u)
local integer TTI=RJI(u)
local real x
local real y
if LA1(GetSellingUnit(),u)then
call Y3I(p,GetObjectName(1848652359))
if IsUnitAlly(u,CO[0])then
set p=DO[0]
else
set p=CO[0]
endif
set x=LG1(GetSellingUnit(),u)
set y=LH1(GetSellingUnit(),u)
call RAI(FO0[RJI(u)],x,y,p,true,RNI(RJI(u)))
else
call L91(p,TSI(TTI))
if F20[TTI]==0 then
call Y3I(p,GetObjectName(1848652360))
else
set x=LD1(GetSellingUnit(),u)
set y=LF1(GetSellingUnit(),u)
if TTI==HD0 then
call L51(p,u,GetSellingUnit(),TSI(TTI),x,y,2,0)
else
call L51(p,u,GetSellingUnit(),TSI(TTI),x,y,0,0)
endif
endif
endif
call UnitAddAbility(u,1097625443)
call ShowUnit(u,false)
call UnitApplyTimedLife(u,1112820806,2)
set u=null
set p=null
endfunction
function LV1 takes nothing returns boolean
if ES==false then
if GetUnitPointValue(GetSoldUnit())>=200 then
call LZ1()
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(GetSoldUnit()))or(D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0))then
if GetUnitTypeId(GetSoldUnit())==1747989062 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658005)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989329 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658759)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747990326 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658767)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989059 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658768)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989060 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658769)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747993153 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658772)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747988807 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848659010)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747993651 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848659024)+"|r")
endif
endif
else
call KI1()
endif
else
endif
return false
endfunction
function LX1 takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1164277353 or id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517
endfunction
function LY1 takes unit V8I,item NFI returns nothing
local unit u=V8I
local integer RII=GetUnitTypeId(u)
local integer TTI=TUI(NFI)
if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==true or IsUnitType(u,UNIT_TYPE_HERO)==false then
if TTI==VA0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[V90])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GQ0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[GP0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GF0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[GE0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==WI0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[W00])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==VF0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[VE0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==FA0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[F90])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==ZJ0 then
if LX1(u)==false then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[ZY0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
elseif TTI==ZY0 then
if LX1(u)==true then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[ZJ0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
elseif TTI==H10 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[HI0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
else
if TTI==V90 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[VA0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GP0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[GQ0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GE0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[GF0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==W00 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[WI0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==VE0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[VF0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==F90 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[FA0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==ZY0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[ZJ0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==HI0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[H10])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
endif
set u=null
endfunction
function LJ1 takes unit V8I,item NFI returns nothing
local unit u=V8I
local integer RII=GetUnitTypeId(u)
local integer TTI=TUI(NFI)
if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false or IsUnitType(u,UNIT_TYPE_HERO)==false then
if TTI==VA0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[V90])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GQ0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[GP0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GF0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[GE0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==WI0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[W00])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==VF0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[VE0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==FA0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[F90])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==ZJ0 then
if LX1(u)==false then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[ZY0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
elseif TTI==H10 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[HI0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
else
if TTI==V90 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[VA0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GP0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[GQ0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GE0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[GF0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==W00 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[WI0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==VE0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[VF0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==F90 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[FA0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==ZY0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[ZJ0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==HI0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=UnitAddItemById(u,F20[H10])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
endif
set u=null
endfunction
function LK1 takes unit V8I returns nothing
local integer i=0
local item NFI
call DisableTrigger(JX0)
loop
exitwhen i>5
set NFI=UnitItemInSlot(V8I,i)
if NFI!=null then
call LJ1(V8I,NFI)
endif
set i=i+1
endloop
call EnableTrigger(JX0)
set NFI=null
endfunction
function LL1 takes unit V8I,item NFI returns boolean
local unit u=V8I
local integer RII=GetUnitTypeId(u)
local integer TTI=TQI(NFI)
local real x
local real y
local boolean LM1=true
set x=GetUnitX(u)
set y=GetUnitY(u)
if TTI==GW0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
call YII(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[GK0])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
if TTI==ZO0 and GetItemCharges(NFI)==0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[Z30])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
if TTI==HO0 and GetItemCharges(NFI)==0 then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[H20])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
call DisableTrigger(JX0)
if(TTI==HJ0 or TTI==HY0 or TTI==HK0)and(RCI(u,F20[HJ0],NFI)!=null or RCI(u,F20[HY0],NFI)!=null or RCI(u,F20[HK0],NFI)!=null)then
call Y3I(GetOwningPlayer(u),GetObjectName(1848652364))
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=CreateItem(FO0[TTI],x,y)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
if(TTI==GP0)and(RCI(u,F20[GP0],NFI)!=null or RCI(u,F20[GQ0],NFI)!=null)then
call Y3I(GetOwningPlayer(u),GetObjectName(1848657996))
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=CreateItem(FO0[TTI],x,y)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
set LM1=false
endif
if LM1 and(TTI==GQ0)and(RCI(u,F20[GP0],NFI)!=null or RCI(u,F20[GQ0],NFI)!=null)then
call Y3I(GetOwningPlayer(u),GetObjectName(1848657996))
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=CreateItem(FO0[TTI],x,y)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
set LM1=false
endif
if(TTI==VK0 or TTI==VJ0 or TTI==VM0 or TTI==VL0)and(RCI(u,F20[VK0],NFI)!=null or RCI(u,F20[VJ0],NFI)!=null or RCI(u,F20[VM0],NFI)!=null or RCI(u,F20[VL0],NFI)!=null)then
call Y3I(GetOwningPlayer(u),GetObjectName(1848652355))
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=CreateItem(FO0[TTI],x,y)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
if(TTI==VI0 and IsPlayerEnemy(GetItemPlayer(NFI),GetOwningPlayer(u)))then
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=UnitAddItemById(u,F20[V10])
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
if(TTI==ZX0)and(XAI(u)or NCI(u))then
if XAI(u)then
call Y3I(GetOwningPlayer(u),GetObjectName(1848652363))
endif
set GK=GetItemPlayer(NFI)
set MJ=GetItemCharges(NFI)
call RemoveItem(NFI)
if TTI==ZX0 then
set CK=CreateItem(FO0[TTI],GetRectCenterX(Q4),GetRectCenterY(Q4))
endif
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
if TTI==ZX0 then
call SetItemCharges(CK,MJ)
endif
endif
if TTI==FR0 and(RII==1215723364 or RII==1429221446)then
call Y3I(GetOwningPlayer(u),GetObjectName(1848652362))
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=CreateItem(FO0[TTI],x,y)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
if LM1 and(TTI==GP0 or TTI==GQ0)and(RII==1211119187)then
call Y3I(GetOwningPlayer(u),GetObjectName(1848652362))
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set CK=CreateItem(FO0[TTI],x,y)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
set LM1=false
endif
if(TTI==ZF0 or TTI==ZG0 or TTI==ZH0 or TTI==ZZ0 or TTI==ZV0 or TTI==ZW0)and RII==1429221443 then
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,I3,10,"|c00ff0303"+GetObjectName(1848652368)+"|r")
endif
call EnableTrigger(JX0)
if LM1 then
call LY1(V8I,NFI)
endif
set u=null
set NFI=null
return false
endfunction
function LN1 takes integer TTI returns boolean
return TTI==Z60 or TTI==VL0 or TTI==VM0 or TTI==VS0 or TTI==Z50 or TTI==VJ0 or TTI==VK0 or TTI==VN0 or TTI==FL0 or TTI==FM0 or TTI==HL0 or TTI==HM0
endfunction
function LS1 takes integer TTI returns boolean
return TTI==FL0 or TTI==FM0
endfunction
function LT1 takes unit V8I,item NFI returns boolean
local integer RUI=0
local item MCI=NFI
local integer TTI=RWI(MCI)
local integer LR1=0
local boolean RRI=false
local integer LP1=RXI(MCI)
local boolean LQ1=false
if IsUnitType(V8I,UNIT_TYPE_HERO)==true then
if TTI==Z60 then
set LR1=Z50
endif
if TTI==HM0 then
set LR1=HL0
endif
if TTI==VL0 then
set LR1=VJ0
endif
if TTI==VM0 then
set LR1=VK0
endif
if TTI==VS0 then
set LR1=VN0
endif
if TTI==FM0 then
set LR1=FL0
endif
if LP1==FM0 then
set LR1=FL0
set LQ1=true
endif
if LR1!=0 then
set GK=GetItemPlayer(MCI)
call RBI(MCI)
if LQ1 then
set CK=UnitAddItemById(V8I,F40[LR1])
else
set CK=UnitAddItemById(V8I,F20[LR1])
endif
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
set RRI=true
endif
else
if TTI==Z50 then
set LR1=Z60
endif
if TTI==HL0 then
set LR1=HM0
endif
if TTI==VJ0 then
set LR1=VL0
endif
if TTI==VK0 then
set LR1=VM0
endif
if TTI==VN0 then
set LR1=VS0
endif
if TTI==FL0 then
set LR1=FM0
endif
if LP1==FL0 then
set LR1=FM0
set LQ1=true
endif
if LR1!=0 then
set GK=GetItemPlayer(MCI)
call RBI(MCI)
if LQ1 then
set CK=UnitAddItemById(V8I,F40[LR1])
else
set CK=UnitAddItemById(V8I,F20[LR1])
endif
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
set RRI=true
endif
endif
set MCI=null
return RRI
endfunction
function LU1 takes unit V8I,item NFI returns boolean
if LN1(RWI(NFI))or LS1(RXI(NFI))then
return LT1(V8I,NFI)
endif
return false
endfunction
function M01 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit NDI=(LoadUnitHandle(ZY,(V0I),(26)))
local integer MI1=(LoadInteger(ZY,(V0I),(97)))
local integer TTI=(LoadInteger(ZY,(V0I),(93)))
local boolean M11=(LoadBoolean(ZY,(V0I),(95)))
local item NFI
local player p=GetOwningPlayer(NDI)
local player MO1
local integer R8I
local boolean R7I=false
local item R9I
local integer M21
local integer M31
local integer newCharges
local item M41
local integer targetCount
local item M51
local boolean M61=false
call DisableTrigger(JP0)
if M11 then
set M51=null
set MO1=(LoadPlayerHandle(ZY,(V0I),(54)))
set R8I=(LoadInteger(ZY,(V0I),(76)))
else
set NFI=(LoadItemHandle(ZY,(V0I),(96)))
set M51=NFI
set MO1=GetItemPlayer(NFI)
set R8I=GetItemCharges(NFI)
endif
if M11==false and NFI==null then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call EnableTrigger(JP0)
set t=null
set NDI=null
set p=null
return false
endif
if MI1==1 then
if p!=MO1 and GetUnitTypeId(NDI)==1852010352 then
if R4I(TSI(TTI))or R5I(TSI(TTI))then
set R7I=true
endif
if IsPlayerEnemy(p,MO1)then
call RAI(FO0[TTI],CM0[GetPlayerId(p)],CN0[GetPlayerId(p)],MO1,R7I,R8I)
else
call RAI(FO0[TTI],CM0[GetPlayerId(MO1)],CN0[GetPlayerId(MO1)],MO1,R7I,R8I)
endif
call Y3I(p,GetObjectName(1848656978))
if M11==false then
set M61=true
call RBI(NFI)
endif
elseif BL==false and M11==false and GetItemType(NFI)==ITEM_TYPE_CAMPAIGN and RYI(NFI)!=0 and(p==MO1 or(GetPlayerSlotState((MO1))==PLAYER_SLOT_STATE_LEFT))then
if R5I(TTI)then
set R7I=true
else
set R7I=false
endif
if(GetPlayerSlotState((MO1))==PLAYER_SLOT_STATE_LEFT)and TRI(TTI)then
else
call RBI(NFI)
set M61=true
set R9I=UnitAddItemById(NDI,F20[TTI])
set M51=R9I
call SetItemPlayer(R9I,MO1,false)
call SetItemUserData(R9I,0)
if R7I then
call SetItemCharges(R9I,R8I)
endif
endif
elseif BL==false and M11==false and GetItemType(NFI)==ITEM_TYPE_PERMANENT and p!=MO1 and F40[TQI(NFI)]!=0 and(GetPlayerSlotState((MO1))==PLAYER_SLOT_STATE_LEFT)==false then
if R5I(TTI)then
set R7I=true
else
set R7I=false
endif
call RBI(NFI)
set M61=true
set R9I=UnitAddItemById(NDI,F40[TTI])
set M51=R9I
call SetItemPlayer(R9I,MO1,false)
call SetItemUserData(R9I,0)
if R7I then
call SetItemCharges(R9I,R8I)
endif
elseif M11==false and GetItemType(NFI)==ITEM_TYPE_PERMANENT and R3I(NFI)and IsUnitType(NDI,UNIT_TYPE_HERO)==true then
set M21=R0I(NDI)
set M31=R1I(NDI)
if M31!=0 then
call UnitAddAbility(NDI,M31)
call UnitMakeAbilityPermanent(NDI,true,M31)
call SetPlayerAbilityAvailable(p,M31,false)
if GetUnitTypeId(NDI)==1211117653 then
set OK=NDI
call ExecuteFunc("M71")
endif
endif
if TTI!=M21 then
call RBI(NFI)
set R9I=UnitAddItemById(NDI,F20[M21])
set M51=R9I
call SetItemPlayer(R9I,MO1,false)
call SetItemUserData(R9I,1)
endif
elseif M11==false and GetItemType(NFI)==ITEM_TYPE_ARTIFACT then
call DisableTrigger(JX0)
set M41=RFI(MO1,NDI,TTI,NFI)
if M41==null then
else
call SetItemCharges(M41,R8I+GetItemCharges(M41))
call RBI(NFI)
set M51=null
endif
call EnableTrigger(JX0)
elseif M11 and R4I(TSI(TTI))then
call DisableTrigger(JX0)
if RZI(NDI)==0 and RGI(MO1,NDI,TTI)==null then
call Y3I(p,GetObjectName(1848652367))
call RAI(FO0[(TTI)],(((LoadReal(ZY,(V0I),(6))))*1.0),(((LoadReal(ZY,(V0I),(7))))*1.0),(MO1),(true),(R8I))
else
set M41=RGI(MO1,NDI,TTI)
if M41==null then
call DisableTrigger(JX0)
set R9I=UnitAddItemById(NDI,F20[TTI])
set M51=R9I
call SetItemPlayer(R9I,MO1,false)
call SetItemUserData(R9I,1)
call SetItemCharges(R9I,R8I)
else
call SetItemCharges(M41,R8I+GetItemCharges(M41))
endif
endif
call EnableTrigger(JX0)
elseif M11==true then
call L51(MO1,NDI,null,TTI,(LoadReal(ZY,(V0I),(6))),(LoadReal(ZY,(V0I),(7))),R8I,1)
elseif M11==false and(GetItemType(NFI)==ITEM_TYPE_PERMANENT or GetItemType(NFI)==ITEM_TYPE_CAMPAIGN)then
call SetItemUserData(NFI,1)
set M61=L11(MO1,NDI,0)
endif
if M61==false and M51!=null and RSI(M51)==false then
set M61=LU1(NDI,M51)
endif
if M61==false and M51!=null and RSI(M51)==false then
call LL1(NDI,M51)
endif
else
if GetWidgetLife(NFI)>0 then
set M21=R0I(NDI)
set M31=R1I(NDI)
if REI(NDI,F20[M21])==null and GetUnitAbilityLevel(NDI,M31)>0 then
call UnitRemoveAbility(NDI,M31)
endif
if IsItemOwned(NFI)==false then
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TTI)then
set R7I=true
endif
call RAI(FO0[TTI],GetItemX(NFI),GetItemY(NFI),MO1,R7I,R8I)
call RBI(NFI)
endif
endif
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call EnableTrigger(JP0)
set t=null
set NFI=null
set NDI=null
set p=null
set MO1=null
set R9I=null
set M41=null
set M51=null
return false
endfunction
function M81 takes nothing returns boolean
call EnableTrigger(JX0)
call ZSI(GetTriggeringTrigger())
return false
endfunction
function DelayTrigger takes nothing returns nothing
local trigger t=CreateTrigger()
call DisableTrigger(JX0)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function M81))
set t=null
endfunction
function M91 takes nothing returns boolean
local item NFI
local integer MI1
local unit NDI=GetTriggerUnit()
local trigger t
local integer V0I
local integer M21
local integer M31
local integer id
set id=GetPlayerId(GetOwningPlayer(NDI))
if(IsUnitType(NDI,UNIT_TYPE_HERO)==true or NCI(NDI))and IsUnitIllusion(NDI)==false then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
if GetItemTypeId(GetManipulatedItem())==F20[GV0]then
set JJ0=JJ0+1
set J80[id]=J80[id]+1
elseif GetItemTypeId(GetManipulatedItem())==F20[FR0]then
set JK0=JK0+1
set J90[id]=J90[id]+1
elseif GetItemTypeId(GetManipulatedItem())==F20[VX0]then
set JL0=JL0+1
set JA0[id]=JA0[id]+1
elseif GetItemTypeId(GetManipulatedItem())==F20[HU0]then
set JM0=JM0+1
set JB0[id]=JB0[id]+1
elseif GetItemTypeId(GetManipulatedItem())==F20[V60]then
set JN0=JN0+1
set K40[id]=K40[id]+1
elseif GetItemTypeId(GetManipulatedItem())==F20[ZU0]then
set JY0=JY0+1
set JC0[id]=JC0[id]+1
call UnitAddItemById(NDI,1227901005)
elseif GetItemTypeId(GetManipulatedItem())==F20[ZB0]then
set JS0=JS0+1
set JD0[id]=JD0[id]+1
elseif GetItemTypeId(GetManipulatedItem())==F20[HQ0]then
set JT0=JT0+1
set JE0[id]=JE0[id]+1
endif
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM then
if GetItemTypeId(GetManipulatedItem())==F20[GV0]then
set J80[id]=J80[id]-1
set JJ0=JJ0-1
elseif GetItemTypeId(GetManipulatedItem())==F20[FR0]then
set J90[id]=J90[id]-1
set JK0=JK0-1
elseif GetItemTypeId(GetManipulatedItem())==F20[VX0]then
set JA0[id]=JA0[id]-1
set JL0=JL0-1
elseif GetItemTypeId(GetManipulatedItem())==F20[HU0]then
set JM0=JM0-1
set JB0[id]=JB0[id]-1
if JB0[id]<1 or RCI(NDI,F20[HU0],GetManipulatedItem())==null then
call UnitRemoveAbility(NDI,1093744436)
endif
elseif GetItemTypeId(GetManipulatedItem())==F20[V60]then
set K40[id]=K40[id]-1
set JN0=JN0-1
elseif GetItemTypeId(GetManipulatedItem())==F20[ZU0]or GetItemTypeId(GetManipulatedItem())==F40[ZU0]then
set JY0=IMaxBJ(JY0-1,0)
set JC0[id]=IMaxBJ(JC0[id]-1,0)
call UnitRemoveAbility(NDI,1110458953)
endif
endif
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM then
set NFI=GetSoldItem()
call SetItemUserData(NFI,-2)
set M21=R0I(NDI)
set M31=R1I(NDI)
if RCI(NDI,F20[M21],NFI)==null and GetUnitAbilityLevel(NDI,M31)>0 then
call UnitRemoveAbility(NDI,M31)
endif
elseif GetItemTypeId(GetManipulatedItem())!=1227894853 and GetItemTypeId(GetManipulatedItem())!=1227895373 then
set NFI=GetManipulatedItem()
if IsUnitIllusion(NDI)or GetItemUserData(NFI)==-2 then
set NFI=null
set NDI=null
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
set MI1=1
else
set MI1=2
endif
if(MI1==1 or(MI1==2 and RSI(NFI)==false and GetWidgetLife(NFI)>0))and GetUnitTypeId(NDI)!=1211117642 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function M01))
call SaveUnitHandle(ZY,(V0I),(26),(NDI))
call SaveInteger(ZY,(V0I),(97),(MI1))
call SaveInteger(ZY,(V0I),(93),(TQI(NFI)))
if RSI(NFI)then
call SaveBoolean(ZY,(V0I),(95),(true))
call SavePlayerHandle(ZY,(V0I),(54),(GetItemPlayer(NFI)))
call SaveInteger(ZY,(V0I),(76),(GetItemCharges(NFI)))
call SaveReal(ZY,(V0I),(6),((GetItemX(NFI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetItemY(NFI))*1.0))
else
call SaveBoolean(ZY,(V0I),(95),(false))
call SaveItemHandle(ZY,(V0I),(96),(NFI))
call SetItemUserData(NFI,0)
endif
else
endif
endif
set NFI=null
set NDI=null
set t=null
return false
endfunction
function MB1 takes nothing returns boolean
if GetSpellAbilityId()==1093751369 or GetSpellAbilityId()==1093681733 then
if KMI(GetTriggerUnit())==false then
call LK1(GetTriggerUnit())
endif
endif
return false
endfunction
function RestrictedItems_UpdateMeleeRange_All2 takes nothing returns nothing
call LK1(OK)
endfunction
function MD1 takes unit V8I,integer ME1,boolean MF1 returns nothing
local string MG1
local string s
local player p=GetOwningPlayer(V8I)
local real d=2
local string MH1="Use"
if MF1 then
set MH1="Store"
endif
if ME1==1227894838 then
set MG1="|c00ff0000"+GetObjectName(1848658513)+"|r"
call P7I("Rune"+MH1+"1",GetPlayerId(p))
elseif ME1==1227894840 then
set MG1="|c0000ff00"+GetObjectName(1848658510)+"|r"
call P7I("Rune"+MH1+"2",GetPlayerId(p))
elseif ME1==1227894859 then
set MG1="|c000000ff"+GetObjectName(1848658739)+"|r"
call P7I("Rune"+MH1+"3",GetPlayerId(p))
elseif ME1==1227894839 then
set MG1="|c00afaf00"+GetObjectName(1848658738)+"|r"
call P7I("Rune"+MH1+"4",GetPlayerId(p))
elseif ME1==1227894858 then
set MG1="|c00652DC1"+GetObjectName(1848658740)+"|r"
call P7I("Rune"+MH1+"5",GetPlayerId(p))
endif
if MF1 then
set s=C0[GetPlayerId(p)]+GetUnitName(V8I)+"|r "+GetObjectName(1848657749)+"|r "+MG1+" "+GetObjectName(1848657751)
set d=1
else
if JR0 then
set s=C0[GetPlayerId(p)]+GetUnitName(V8I)+"|r "+GetObjectName(1848657750)+"|r "+MG1+" "+GetObjectName(1848657751)
else
set s=C0[GetPlayerId(p)]+GetUnitName(V8I)+"|r "+GetObjectName(1848657748)+"|r "+MG1+" "+GetObjectName(1848657751)
endif
endif
if(IsPlayerAlly(GetLocalPlayer(),p)and GetLocalPlayer()!=p)or XJI(GetLocalPlayer())then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,d,s)
endif
endfunction
function MZ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if GetUnitAbilityLevel(V8I,1110454611)==0 then
call UnitRemoveAbility(V8I,1110454611)
call UnitRemoveAbility(V8I,1110455361)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetUnitState(V8I,UNIT_STATE_LIFE)==GetUnitState(V8I,UNIT_STATE_MAX_LIFE)and GetUnitState(V8I,UNIT_STATE_MANA)==GetUnitState(V8I,UNIT_STATE_MAX_MANA)then
call UnitRemoveAbility(V8I,1110454611)
call UnitRemoveAbility(V8I,1110455361)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
return false
endfunction
function MV1 takes unit V8I,item NFI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function MZ1))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
set t=null
endfunction
function MW1 takes unit V8I,item NFI returns nothing
local unit u=V8I
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local unit T0I=CreateUnit(GetOwningPlayer(u),1697656901,x,y,0)
call UnitAddAbility(T0I,1093683026)
call IssueTargetOrderById(T0I,852274,u)
call IssueTargetOrderById(T0I,852274,u)
set u=null
set T0I=null
endfunction
function MX1 takes unit V8I,item NFI returns nothing
if GetItemTypeId(NFI)==1227894839 or GetItemTypeId(NFI)==1227894838 or GetItemTypeId(NFI)==1227894840 or GetItemTypeId(NFI)==1227894859 or GetItemTypeId(NFI)==1227894858 then
call MD1(V8I,GetItemTypeId(NFI),false)
endif
if GetItemTypeId(NFI)==1227894839 then
call MW1(V8I,NFI)
elseif GetItemTypeId(NFI)==1227894858 then
if GetUnitAbilityLevel(V8I,1110456665)>0 then
call UnitRemoveAbility(V8I,1110456665)
call UnitRemoveAbility(V8I,1110454609)
call DisableTrigger(GetTriggeringTrigger())
call UnitAddItemById(V8I,1227894858)
call EnableTrigger(GetTriggeringTrigger())
endif
elseif GetItemTypeId(NFI)==1227894840 then
call MV1(V8I,NFI)
endif
endfunction
function MY1 takes unit V8I,item NFI returns nothing
local integer KLI
local integer WTI
call UnitRemoveAbility(V8I,1093810003)
call UnitRemoveAbility(V8I,1093810001)
call UnitRemoveAbility(V8I,1093810002)
call UnitRemoveAbility(V8I,1093810004)
if GetUnitAbilityLevel(V8I,1093810246)>0 then
call UnitRemoveAbility(V8I,1093810246)
call UnitAddAbility(V8I,1093810246)
endif
if GetUnitTypeId(V8I)==1164207469 then
set KLI=1093684057
elseif GetUnitTypeId(V8I)==1429221446 then
set KLI=1093678660
elseif GetUnitTypeId(V8I)==1162032951 then
set KLI=1093684557
elseif GetUnitTypeId(V8I)==1332179560 then
set KLI=1093687627
else
set V8I=null
return
endif
set WTI=GetUnitAbilityLevel(V8I,KLI)
if WTI>0 then
call UnitRemoveAbility(V8I,KLI)
call UnitAddAbility(V8I,KLI)
call SetUnitAbilityLevel(V8I,KLI,WTI)
endif
endfunction
function MJ1 takes item NFI,unit XSI,boolean MK1 returns nothing
local integer TTI=TQI(NFI)
local integer V0I=GetHandleId(XSI)
local string s=""
if(TTI==FL0 and RCI(XSI,FL0,NFI)==null)or(TTI==FM0 and RCI(XSI,FM0,NFI)==null)then
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(XSI))==true or XJI(GetLocalPlayer())then
set s="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl"
endif
if MK1 then
if RZI(XSI)>0 or GetItemType(NFI)==ITEM_TYPE_PERMANENT or GetItemType(NFI)==ITEM_TYPE_CAMPAIGN then
if GetUnitAbilityLevel(XSI,1093809729)==0 and GetUnitAbilityLevel(XSI,1093809730)==0 then
if s=="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl" then
call KKI(XSI,1093809729)
else
call KKI(XSI,1093809730)
endif
endif
endif
else
if not(GetUnitAbilityLevel(XSI,1093809729)==0 and GetUnitAbilityLevel(XSI,1093809730)==0)then
call UnitRemoveAbility(XSI,1093809730)
call UnitRemoveAbility(XSI,1093809729)
call RemoveSavedHandle(ZY,(V0I),(670))
endif
endif
endif
endfunction
function ML1 takes nothing returns boolean
local unit V8I=GetTriggerUnit()
local item NFI=GetManipulatedItem()
local integer id=GetItemTypeId(NFI)
if NFI==null or IsUnitIllusion(V8I)==true or IsUnitType(V8I,UNIT_TYPE_HERO)==false or GetUnitTypeId(V8I)==1211117642 or GetItemTypeId(NFI)==1227894853 or GetItemTypeId(NFI)==1227895373 then
set V8I=null
set NFI=null
return false
endif
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM and GetItemType(NFI)!=ITEM_TYPE_PURCHASABLE)or GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM then
call MJ1(NFI,V8I,false)
call P7I("DRI_"+I2S(GetPlayerId(GetOwningPlayer(V8I))),F20[TSI(TQI(NFI))])
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
call MJ1(NFI,V8I,true)
call P7I("PUI_"+I2S(GetPlayerId(GetOwningPlayer(V8I))),F20[TSI(TQI(NFI))])
endif
set V8I=null
set NFI=null
return false
endfunction
function MN1 takes nothing returns boolean
local integer i
if KI0>0 and JU0[1]<1 then
set i=2
loop
exitwhen i>KI0
set JU0[i-1]=JU0[i]
set K00[i-1]=K00[i]
set i=i+1
endloop
set KI0=KI0-1
endif
set i=1
loop
exitwhen i>KI0
if JU0[i]>=1 then
set JU0[i]=JU0[i]-1
if JU0[i]<1 then
call SetItemDroppable(K00[i],true)
endif
endif
set i=i+1
endloop
return false
endfunction
function MS1 takes item NFI returns nothing
set KI0=KI0+1
set K00[KI0]=NFI
set JU0[KI0]=(F60[(RWI(NFI))])
call SetItemDroppable(NFI,false)
endfunction
function MT1 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())!=1697656901 and(F60[(RWI(GetManipulatedItem()))])>0 then
call MS1(GetManipulatedItem())
endif
return false
endfunction
function MR1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=(LoadUnitHandle(ZY,(V0I),(26)))
local integer MP1=(LoadInteger(ZY,(V0I),(98)))
local item NFI=UnitItemInSlot(u,MP1)
if NFI!=null and TRI(TQI(NFI))==false and GetWidgetLife(NFI)>0 and ROI(NFI)==false then
call SetItemDroppable(NFI,true)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set NFI=null
return false
endfunction
function MQ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=(LoadUnitHandle(ZY,(V0I),(26)))
local integer MP1=(LoadInteger(ZY,(V0I),(98)))
local item NFI=UnitItemInSlot(u,MP1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if(u!=null and GetUnitTypeId(u)>1 and IsUnitType(u,UNIT_TYPE_DEAD)==false)and(NFI!=null and GetWidgetLife(NFI)>0)then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SetItemDroppable(NFI,false)
call SaveInteger(ZY,(V0I),(98),(MP1))
call SaveUnitHandle(ZY,(V0I),(26),(u))
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(t,Condition(function MR1))
endif
set NFI=null
set u=null
set t=null
return false
endfunction
function MU1 takes nothing returns nothing
local integer MP1
local unit u=GetTriggerUnit()
local trigger t
local integer V0I
local item NFI
if GetIssuedOrderId()==852008 then
set MP1=0
elseif GetIssuedOrderId()==852009 then
set MP1=1
elseif GetIssuedOrderId()==852010 then
set MP1=2
elseif GetIssuedOrderId()==852011 then
set MP1=3
elseif GetIssuedOrderId()==852012 then
set MP1=4
elseif GetIssuedOrderId()==852013 then
set MP1=5
endif
set NFI=UnitItemInSlot(u,MP1)
if NFI!=null and GetWidgetLife(NFI)>0 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveInteger(ZY,(V0I),(98),(MP1))
call SaveUnitHandle(ZY,(V0I),(26),(u))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function MQ1))
endif
set NFI=null
set u=null
set t=null
endfunction
function ItemCooldown_CheckOrderID takes nothing returns boolean
if GetIssuedOrderId()==852008 or GetIssuedOrderId()==852009 or GetIssuedOrderId()==852010 or GetIssuedOrderId()==852011 or GetIssuedOrderId()==852012 or GetIssuedOrderId()==852013 then
call MU1()
endif
return false
endfunction
function NI1 takes nothing returns nothing
local unit u=GetTriggerUnit()
local item NFI
local integer i=0
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer TTI
local item R9I
call DisableTrigger(JX0)
loop
exitwhen i>5
set NFI=UnitItemInSlot(u,i)
set TTI=TQI(NFI)
if TTI==HG0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[G60],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[GZ0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==HV0 or TTI==HW0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[G70],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[GC0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==VN0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[G30],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[G10],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[X80],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==VS0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[G30],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[G10],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[X80],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==VH0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[FS0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[Z10],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[XD0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==W40 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[FB0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[FJ0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==Z50 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[FN0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[FU0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==Z60 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[FN0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[FU0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==ZY0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[HP0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[GG0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[WN0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==ZJ0 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[HP0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[GG0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[WN0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
elseif TTI==H00 then
set GK=GetItemPlayer(NFI)
call RemoveItem(NFI)
set R9I=CreateItem(FO0[FY0],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
set R9I=CreateItem(FO0[W10],x,y)
call SetItemPlayer(R9I,GK,false)
call SetItemUserData(R9I,1)
endif
set i=i+1
endloop
call EnableTrigger(JX0)
set u=null
set NFI=null
set R9I=null
endfunction
function N11 takes nothing returns boolean
if GetSpellAbilityId()==1093684021 or GetSpellAbilityId()==1093751366 then
call NI1()
endif
return false
endfunction
function N21 takes integer TTI returns boolean
return TTI!=VI0 and TTI!=VX0 and TTI!=FL0 and TTI!=ZX0
endfunction
function N31 takes nothing returns nothing
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
call SetItemPawnable(GetManipulatedItem(),false)
else
call SetItemPawnable(GetManipulatedItem(),true)
endif
endfunction
function N41 takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and N21(RWI(GetManipulatedItem()))and XBI(GetTriggerUnit())then
call N31()
endif
return false
endfunction
function N61 takes nothing returns nothing
local integer x=1
local player p
loop
exitwhen x>16
if REI(L1[x],F20[VX0])!=null then
call RemoveUnit(KO0[GetPlayerId(GetOwningPlayer(L1[x]))])
endif
set x=x+1
endloop
endfunction
function Bloodstone_ItemCondition takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==F20[VX0]and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function N71 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetTriggerUnit())!=1211117642 and REI(GetTriggerUnit(),F20[VX0])!=null
endfunction
function N81 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1
endfunction
function N91 takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+KO)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BloodstoneHealTarget.mdx",GetEnumUnit(),"origin"))
endfunction
function Bloodstone_RegisterUnit takes nothing returns nothing
call V5I(GetEnumUnit(),4254,40)
endfunction
function NA1 takes nothing returns nothing
local group g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1700,Condition(function N81))
set KO=400+30*GetItemCharges(REI(GetTriggerUnit(),F20[VX0]))
call ForGroup(g,function N91)
call ZYI(g)
set g=null
endfunction
function NB1 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1211117645,GetUnitX(V8I),GetUnitY(V8I),GetUnitFacing(V8I))
set KO0[GetPlayerId(GetOwningPlayer(V8I))]=T0I
call NA1()
endfunction
function ND1 takes unit u returns nothing
local integer NE1=GetItemCharges(REI(u,F20[VX0]))
if NE1>0 then
call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+NE1)
endif
endfunction
function NF1 takes nothing returns boolean
local integer i=1
local unit V8I
local integer id
if JL0>0 then
loop
exitwhen i>5
set id=GetPlayerId(CO[i])
set V8I=L1[id]
if JA0[id]>0 and V8I!=null and GetUnitTypeId(V8I)>1 and IsUnitType(V8I,UNIT_TYPE_DEAD)==false then
call ND1(V8I)
endif
set id=GetPlayerId(DO[i])
set V8I=L1[id]
if JA0[id]>0 and V8I!=null and GetUnitTypeId(V8I)>1 and IsUnitType(V8I,UNIT_TYPE_DEAD)==false then
call ND1(V8I)
endif
set i=i+1
endloop
endif
set V8I=null
return false
endfunction
function NH1 takes nothing returns nothing
local unit NZ1=GetSummonedUnit()
local unit XSI=GetSummoningUnit()
local string fx=""
if IsPlayerEnemy(GetLocalPlayer(),GetOwningPlayer(XSI))and XJI(GetLocalPlayer())==false then
set fx="war3mapImported\\WardMark_T2.mdx"
endif
call AddSpecialEffectTarget(fx,NZ1,"origin")
set NZ1=null
set XSI=null
endfunction
function NV1 takes nothing returns boolean
return true
endfunction
function NW1 takes unit V8I,unit NZ1 returns nothing
local integer NX1
local item NY1
if GetUnitTypeId(GetSummonedUnit())==1865429044 then
set NX1=F20[H70]
else
set NX1=F20[H80]
endif
call DisableTrigger(JX0)
set NY1=REI(V8I,NX1)
if NY1==null then
set GK=GetOwningPlayer(V8I)
set CK=CreateItem(NX1,0,0)
call UnitAddItem(V8I,CK)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
else
call SetItemCharges(NY1,GetItemCharges(NY1)+1)
endif
call EnableTrigger(JX0)
endfunction
function NJ1 takes nothing returns nothing
local unit NZ1=GetSummonedUnit()
local unit V8I=GetSummoningUnit()
if GetUnitTypeId(GetSummonedUnit())==1865429044 or GetUnitTypeId(GetSummonedUnit())==1868921189 then
if IsUnitInRegion(NJ0,NZ1)then
call NW1(V8I,NZ1)
call RemoveUnit(NZ1)
elseif XBI(V8I)then
call NW1(V8I,NZ1)
call Y3I(GetOwningPlayer(NZ1),"Couriers cannot place wards")
call RemoveUnit(NZ1)
else
call NH1()
endif
elseif GetUnitTypeId(NZ1)==1869836340 or GetUnitTypeId(NZ1)==1865429048 or GetUnitTypeId(NZ1)==1865429049 or GetUnitTypeId(NZ1)==1865429315 or GetUnitTypeId(NZ1)==1865429316 or GetUnitTypeId(NZ1)==1865429317 then
call SelectUnitAddForPlayer(NZ1,GetOwningPlayer(NZ1))
elseif GetUnitTypeId(NZ1)==1865429040 or GetUnitTypeId(NZ1)==1865429041 or GetUnitTypeId(NZ1)==1865429057 or GetUnitTypeId(NZ1)==1865429080 then
call SelectUnitAddForPlayer(NZ1,GetOwningPlayer(NZ1))
endif
endfunction
function NL1 takes nothing returns nothing
local unit u=GetEnumUnit()
local integer i=0
local player p=GetOwningPlayer(GetTriggerUnit())
local item NFI
local integer id=GetPlayerId(p)
loop
exitwhen i>5
set NFI=UnitItemInSlot(u,i)
if NFI!=null and GetItemPlayer(NFI)==p then
call UnitRemoveItem(u,NFI)
call SetItemPosition(NFI,CM0[id],CN0[id])
endif
set i=i+1
endloop
set u=null
set NFI=null
endfunction
function NM1 takes nothing returns nothing
local item NFI=GetEnumItem()
local unit u=K20
local player p=GetOwningPlayer(u)
local integer id=GetPlayerId(p)
if GetWidgetLife(NFI)>0 and GetItemPlayer(NFI)==p then
call SetItemPosition(NFI,CM0[id],CN0[id])
call UnitAddItem(CL0[id],NFI)
endif
set NFI=null
set u=null
set p=null
endfunction
function NN1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=(LoadUnitHandle(ZY,(V0I),(53)))
set K20=u
if VLI(GetOwningPlayer(K20))then
call EnumItemsInRect(H5,Condition(function HRI),function NM1)
else
call EnumItemsInRect(Z5,Condition(function HRI),function NM1)
endif
if GetTriggerEvalCount(t)==2 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set u=null
return false
endfunction
function NS1 takes nothing returns boolean
return XBI(GetFilterUnit())
endfunction
function NT1 takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer i=0
local group g=ZJI()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1300,Condition(function NS1))
call ForGroup(g,function NL1)
call ZYI(g)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function NN1))
call SaveUnitHandle(ZY,(V0I),(53),(u))
set u=null
set g=null
endfunction
function NR1 takes nothing returns nothing
if GetSpellAbilityId()==1093743684 then
call NT1()
endif
endfunction
function NP1 takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer i=0
local item NFI
local integer id=GetPlayerId(GetOwningPlayer(u))
local region r=CreateRegion()
if VLI(GetOwningPlayer(u))then
call RegionAddRect(r,H5)
else
call RegionAddRect(r,Z5)
endif
loop
exitwhen i>5
set NFI=UnitItemInSlot(u,i)
if TRI(TQI(NFI))==false and TQI(NFI)!=ZX0 and ROI(NFI)==false then
call UnitRemoveItemFromSlot(u,i)
if(GetUnitTypeId(u)==1852010352 or IsUnitInRegion(r,u))and IsPlayerAlly(GetItemPlayer(NFI),GetOwningPlayer(u))==true then
set id=GetPlayerId(GetItemPlayer(NFI))
call SetItemPosition(NFI,CM0[id],CN0[id])
endif
endif
set i=i+1
endloop
call RemoveRegion(r)
set u=null
set r=null
endfunction
function NQ1 takes nothing returns nothing
if GetSpellAbilityId()==1093743416 or GetSpellAbilityId()==1093743683 then
call NP1()
endif
endfunction
function NU1 takes unit V8I returns nothing
local integer i=0
local item S01
local integer TTI
local boolean SI1=false
local real YJI=4
if IsUnitType(V8I,UNIT_TYPE_MELEE_ATTACKER)==false then
set YJI=6
endif
if K30[GetPlayerId(GetOwningPlayer(V8I))]+YJI>(TimerGetElapsed(M))then
set SI1=true
endif
loop
exitwhen i>5
set S01=UnitItemInSlot(V8I,i)
set TTI=RWI(S01)
if TTI==V60 and SI1==true then
call DisableTrigger(JX0)
set GK=GetItemPlayer(S01)
call RemoveItem(S01)
set CK=RQI(V8I,F20[V70],i)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call EnableTrigger(JX0)
endif
if TTI==V70 and SI1==false then
call DisableTrigger(JX0)
set GK=GetItemPlayer(S01)
call RemoveItem(S01)
set CK=RQI(V8I,F20[V60],i)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call EnableTrigger(JX0)
endif
set i=i+1
endloop
set V8I=null
set S01=null
endfunction
function S11 takes nothing returns nothing
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and(VSI(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())==1848651852)then
if L90[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
set K30[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=(TimerGetElapsed(M))
endif
endif
endfunction
function SO1 takes unit V8I returns nothing
local integer i=0
local item S21
local integer TTI
local boolean S31=false
if K30[GetPlayerId(GetOwningPlayer(V8I))]+3>(TimerGetElapsed(M))then
set S31=true
endif
loop
exitwhen i>5
set S21=UnitItemInSlot(V8I,i)
set TTI=RWI(S21)
if TTI==FR0 and S31==true then
call DisableTrigger(JX0)
set GK=GetItemPlayer(S21)
call RemoveItem(S21)
set CK=RQI(V8I,F20[FP0],i)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call EnableTrigger(JX0)
endif
if TTI==FP0 and S31==false then
call DisableTrigger(JX0)
set GK=GetItemPlayer(S21)
call RemoveItem(S21)
set CK=RQI(V8I,F20[FR0],i)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call EnableTrigger(JX0)
endif
set i=i+1
endloop
set V8I=null
set S21=null
endfunction
function S41 takes nothing returns boolean
local integer i=1
local unit V8I
local integer id
if JK0>0 or JN0>0 then
loop
exitwhen i>5
set id=GetPlayerId(CO[i])
set V8I=L1[id]
if J90[id]>0 and V8I!=null and GetUnitTypeId(V8I)>1 and IsUnitType(V8I,UNIT_TYPE_DEAD)==false then
call SO1(V8I)
endif
if K40[id]>0 and V8I!=null and GetUnitTypeId(V8I)>1 and IsUnitType(V8I,UNIT_TYPE_DEAD)==false then
call NU1(V8I)
endif
set id=GetPlayerId(DO[i])
set V8I=L1[id]
if J90[id]>0 and V8I!=null and GetUnitTypeId(V8I)>1 and IsUnitType(V8I,UNIT_TYPE_DEAD)==false then
call SO1(V8I)
endif
if K40[id]>0 and V8I!=null and GetUnitTypeId(V8I)>1 and IsUnitType(V8I,UNIT_TYPE_DEAD)==false then
call NU1(V8I)
endif
set i=i+1
endloop
endif
set V8I=null
return false
endfunction
function S61 takes nothing returns nothing
local unit V8I=GetFilterUnit()
local integer i=0
local item NFI
local integer TTI
loop
exitwhen i>5
set NFI=UnitItemInSlot(V8I,i)
set TTI=TQI(NFI)
if(TTI==GX0 or TTI==GY0 or TTI==GJ0)and GetItemUserData(NFI)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",V8I,"overhead"))
call YII(GetOwningPlayer(V8I),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=RQI(V8I,F20[GK0],i)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
set i=i+1
endloop
set V8I=null
set NFI=null
endfunction
function S71 takes nothing returns boolean
if UnitInventorySize(GetFilterUnit())>0 and VLI(GetOwningPlayer(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==false and KMI(GetFilterUnit())==false then
call S61()
endif
return false
endfunction
function S81 takes nothing returns boolean
if UnitInventorySize(GetFilterUnit())>0 and VNI(GetOwningPlayer(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==false and KMI(GetFilterUnit())==false then
call S61()
endif
return false
endfunction
function S91 takes nothing returns boolean
local group g=ZJI()
call GroupEnumUnitsInRange(g,ZS,VS,750,Condition(function S71))
call ZYI(g)
set g=ZJI()
call GroupEnumUnitsInRange(g,IN0,IS0,750,Condition(function S81))
call ZYI(g)
set g=null
return false
endfunction
function SB1 takes unit SC1 returns boolean
local unit SD1=L1[GetPlayerId(GetOwningPlayer(SC1))]
if((GetUnitX(SD1)-GetUnitX(SC1))*(GetUnitX(SD1)-GetUnitX(SC1))+(GetUnitY(SD1)-GetUnitY(SC1))*(GetUnitY(SD1)-GetUnitY(SC1))>=855625)then
return true
endif
return false
endfunction
function SE1 takes nothing returns nothing
local unit SF1=GetAttacker()
local integer SG1=UnitInventorySize(SF1)
local integer x=0
local item i
loop
exitwhen x>SG1
set i=UnitItemInSlot(SF1,x)
if RWI(i)==GV0 and GetRandomReal(0,1)<=0.2 and NSI(SF1)==false then
if NCI(SF1)then
if SB1(SF1)==false then
if GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
call XNI(SF1,GetTriggerUnit(),2,40)
endif
endif
else
if GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
call XNI(SF1,GetTriggerUnit(),2,40)
endif
endif
endif
set x=x+1
endloop
set i=null
set SF1=null
endfunction
function SZ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real SV1=(LoadReal(ZY,(GetHandleId(XSI)),(692)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or SV1<(TimerGetElapsed(M))then
call UnitRemoveAbility(XSI,1093809717)
call UnitRemoveAbility(XSI,1110456398)
call UnitRemoveAbility(XSI,1093809731)
call SaveReal(ZY,(GetHandleId(XSI)),(692),((0)*1.0))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function SW1 takes unit XSI returns nothing
local trigger t
local integer V0I
local real SV1=(LoadReal(ZY,(GetHandleId(XSI)),(692)))
call SaveReal(ZY,(GetHandleId(XSI)),(692),(((TimerGetElapsed(M))+K60)*1.0))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,K60+0.01,false)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerAddCondition(t,Condition(function SZ1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call KKI(XSI,1093809717)
call KKI(XSI,1093809731)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809717,false)
set t=null
endfunction
function SX1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if GetEventDamageSource()==XSI and GetEventDamage()>0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if NKI(XTI)==false then
call SW1(XTI)
endif
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function SY1 takes nothing returns nothing
local unit XSI=GetAttacker()
local unit XTI=GetTriggerUnit()
local trigger t
local integer V0I
if((LoadInteger(ZY,(GetHandleId((XSI))),((4309))))==1)==false then
call V5I(XSI,4309,0.2)
if GetRandomReal(0,100)<K50 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function SX1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
endif
endif
set XSI=null
set XTI=null
endfunction
function SJ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real SV1=(LoadReal(ZY,(GetHandleId(XSI)),(693)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or SV1<(TimerGetElapsed(M))then
call UnitRemoveAbility(XSI,1093809718)
call UnitRemoveAbility(XSI,1110454857)
call UnitRemoveAbility(XSI,1093809731)
call SaveReal(ZY,(GetHandleId(XSI)),(693),((0)*1.0))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function SK1 takes unit XSI returns nothing
local trigger t
local integer V0I
local real SV1=(LoadReal(ZY,(GetHandleId(XSI)),(693)))
call SaveReal(ZY,(GetHandleId(XSI)),(693),(((TimerGetElapsed(M))+K80)*1.0))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,K80+0.01,false)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerAddCondition(t,Condition(function SJ1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call KKI(XSI,1093809718)
call KKI(XSI,1093809731)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809718,false)
set t=null
endfunction
function SL1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if GetEventDamageSource()==XSI and GetEventDamage()>0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if NKI(XTI)==false then
call SK1(XTI)
endif
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function SM1 takes nothing returns nothing
local unit XSI=GetAttacker()
local unit XTI=GetTriggerUnit()
local trigger t
local integer V0I
if((LoadInteger(ZY,(GetHandleId((XSI))),((4309))))==1)==false then
call V5I(XSI,4309,0.2)
if GetRandomReal(0,100)<K70 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function SL1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
endif
endif
set XSI=null
set XTI=null
endfunction
function SN1 takes nothing returns nothing
local unit SF1=GetAttacker()
local integer SS1=25
local integer id=GetPlayerId(GetOwningPlayer(GetAttacker()))
local integer V0I=GetHandleId(SF1)
local real ZPI=(TimerGetElapsed(M))
local real ST1=(LoadReal(ZY,(V0I),(101)))
local boolean SR1=(LoadBoolean(ZY,(V0I),(99)))
local boolean SP1=(LoadBoolean(ZY,(V0I),(100)))
local boolean SQ1=ZPI<ST1
local boolean SU1=false
if IsUnitType(SF1,UNIT_TYPE_MELEE_ATTACKER)==false then
set SS1=10
endif
if GetRandomInt(0,100)<SS1 then
set SU1=true
endif
if GetUnitAbilityLevel(SF1,1093683786)>0 or GetUnitAbilityLevel(SF1,1093679153)>0 or GetUnitAbilityLevel(SF1,1093682997)>0 or GetUnitAbilityLevel(SF1,1093679429)>0 then
call UnitRemoveAbility(SF1,1093744436)
set SF1=null
return
endif
if SR1 and SQ1==false and SP1==false then
call SaveReal(ZY,(V0I),(101),((ZPI+2)*1.0))
if SU1==false then
call SaveBoolean(ZY,(V0I),(100),(true))
endif
elseif SQ1 or SP1 then
call UnitRemoveAbility(SF1,1093744436)
call SaveBoolean(ZY,(V0I),(99),(false))
call SaveBoolean(ZY,(V0I),(100),(false))
endif
if SU1 then
call UnitAddAbility(SF1,1093744436)
call SaveBoolean(ZY,(V0I),(99),(true))
endif
set SF1=null
endfunction
function TI1 takes unit u returns unit
if IsUnitType(u,UNIT_TYPE_HERO)or GetUnitAbilityLevel(u,1093678162)==0 then
return u
else
return L1[GetPlayerId(GetOwningPlayer(u))]
endif
endfunction
function T11 takes nothing returns boolean
if IsUnitType(GetKillingUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))==false then
if GetUnitTypeId(GetTriggerUnit())==1848651850 then
call XNI(GetDyingUnit(),TI1(GetKillingUnit()),3,400)
elseif GetUnitTypeId(GetTriggerUnit())==1848651841 then
call XNI(GetDyingUnit(),TI1(GetKillingUnit()),3,500)
elseif GetUnitTypeId(GetTriggerUnit())==1848651830 then
call XNI(GetDyingUnit(),TI1(GetKillingUnit()),3,600)
endif
endif
return false
endfunction
function T21 takes nothing returns boolean
local unit V8I=GetTriggerUnit()
local integer WTI=1
if RCI(V8I,F20[FB0],GetManipulatedItem())!=null then
set WTI=2
endif
if RCI(V8I,F20[VR0],GetManipulatedItem())!=null then
set WTI=3
endif
if RCI(V8I,F20[HY0],GetManipulatedItem())!=null or RCI(V8I,F20[HJ0],GetManipulatedItem())!=null or RCI(V8I,F20[HK0],GetManipulatedItem())!=null then
set WTI=4
endif
if RCI(V8I,F20[W40],GetManipulatedItem())!=null then
set WTI=5
endif
if RCI(V8I,F20[HX0],GetManipulatedItem())!=null then
set WTI=6
endif
if RCI(V8I,F20[Z80],GetManipulatedItem())!=null then
call UnitAddAbility(V8I,1093686832)
call SetUnitAbilityLevel(V8I,1093686832,WTI)
call UnitMakeAbilityPermanent(V8I,true,1093686832)
else
call UnitRemoveAbility(V8I,1093686832)
endif
set V8I=null
return false
endfunction
function T31 takes nothing returns boolean
local unit V8I=GetTriggerUnit()
local integer WTI=1
if REI(V8I,F20[FB0])!=null then
set WTI=2
endif
if REI(V8I,F20[VR0])!=null then
set WTI=3
endif
if REI(V8I,F20[HY0])!=null or REI(V8I,F20[HJ0])!=null or REI(V8I,F20[HK0])!=null then
set WTI=4
endif
if REI(V8I,F20[W40])!=null then
set WTI=5
endif
if REI(V8I,F20[HX0])!=null then
set WTI=6
endif
if REI(V8I,F20[Z80])!=null then
call UnitAddAbility(V8I,1093686832)
call SetUnitAbilityLevel(V8I,1093686832,WTI)
call UnitMakeAbilityPermanent(V8I,true,1093686832)
endif
set V8I=null
return false
endfunction
function T51 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM then
if RWI(GetManipulatedItem())==VK0 then
call UnitRemoveAbility(V8I,1093682520)
endif
if RWI(GetManipulatedItem())==V80 then
call UnitRemoveAbility(V8I,1093747287)
endif
if RWI(GetManipulatedItem())==VJ0 then
call UnitRemoveAbility(V8I,1093682520)
call UnitRemoveAbility(V8I,1093686339)
call UnitRemoveAbility(V8I,1093686603)
endif
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
if RWI(GetManipulatedItem())==VK0 then
call UnitAddAbility(V8I,1093682520)
call UnitMakeAbilityPermanent(V8I,true,1093682520)
endif
if RWI(GetManipulatedItem())==V80 then
call UnitAddAbility(V8I,1093747287)
call UnitMakeAbilityPermanent(V8I,true,1093747287)
endif
if RWI(GetManipulatedItem())==VJ0 then
call UnitAddAbility(V8I,1093682520)
call UnitMakeAbilityPermanent(V8I,true,1093682520)
call UnitAddAbility(V8I,1093686339)
call UnitMakeAbilityPermanent(V8I,true,1093686339)
call UnitAddAbility(V8I,1093686603)
call UnitMakeAbilityPermanent(V8I,true,1093686603)
endif
endif
set V8I=null
endfunction
function T61 takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(RWI(GetManipulatedItem())==VJ0 or RWI(GetManipulatedItem())==VK0 or RWI(GetManipulatedItem())==V80)then
call T51()
endif
return false
endfunction
function T81 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local item NFI=(LoadItemHandle(ZY,(V0I),(96)))
if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==NFI then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM then
if((LoadInteger(ZY,(GetHandleId((V8I))),((4310))))==1)==false then
call SetUnitState(V8I,UNIT_STATE_LIFE,YQI(GetUnitState(V8I,UNIT_STATE_LIFE)-K90,1))
endif
endif
set t=null
set V8I=null
set NFI=null
return false
endfunction
function T91 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function T81))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveItemHandle(ZY,(V0I),(96),(GetManipulatedItem()))
set t=null
set V8I=null
endfunction
function TA1 takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and RWI(GetManipulatedItem())==VJ0 then
call T91()
endif
return false
endfunction
function TC1 takes unit u returns boolean
local item TD1=CreateItem(1227901771,GetUnitX(u),GetUnitY(u))
local boolean RRI=UnitAddItem(u,TD1)
if RRI==false then
call RemoveItem(TD1)
endif
return RRI
endfunction
function TE1 takes unit V8I,item NFI,integer P0I returns item
local real x=RTI(V8I)
local real y=RPI(V8I)
local integer i=0
local boolean array PII
local item P1I
loop
exitwhen i>(UnitInventorySize(V8I)-1)
if UnitItemInSlot(V8I,i)==null and i!=P0I then
set P1I=CreateItem(1227895373,x,y)
call UnitAddItem(V8I,P1I)
set PII[i]=true
else
set PII[i]=false
endif
if i==P0I then
call UnitAddItem(V8I,NFI)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if PII[i]==true then
call RemoveItem(UnitItemInSlot(V8I,i))
endif
set i=i+1
endloop
set CK=NFI
set P1I=null
return CK
endfunction
function TF1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer i=0
local item TG1
local integer TTI
local unit T0I
local item TH1
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SaveBoolean(ZY,(GetHandleId(V8I)),(102),(false))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif TC1(V8I)==false then
call TriggerRegisterTimerEvent(t,5.5,false)
else
call SaveBoolean(ZY,(GetHandleId(V8I)),(102),(false))
call DisableTrigger(JX0)
if JC0[GetPlayerId(GetOwningPlayer(V8I))]>0 then
call SetItemVisible(UnitAddItemById(V8I,1227901005),false)
endif
loop
exitwhen i>5
set TG1=UnitItemInSlot(V8I,i)
set TTI=RWI(TG1)
if TTI==V00 then
set GK=GetItemPlayer(TG1)
call RemoveItem(TG1)
set T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
call UnitAddAbility(T0I,1095331446)
set TH1=UnitAddItemById(T0I,F20[ZU0])
call UnitUseItem(T0I,TH1)
set CK=TE1(V8I,TH1,i)
call SetItemPlayer(TH1,GK,false)
call SetItemUserData(TH1,1)
call UnitRemoveAbility(T0I,1095331446)
set T0I=null
set TH1=null
endif
set TG1=null
set i=i+1
endloop
call EnableTrigger(JX0)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
return false
endfunction
function TZ1 takes unit V8I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer i=0
local item TG1
local integer TTI
local unit T0I
local item TH1
call DisableTrigger(JX0)
call SaveBoolean(ZY,(GetHandleId(V8I)),(102),(true))
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TF1))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
loop
exitwhen i>5
set TG1=UnitItemInSlot(V8I,i)
set TTI=RWI(TG1)
if TTI==ZU0 or TTI==V00 then
set GK=GetItemPlayer(TG1)
call RemoveItem(TG1)
set T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
call UnitAddAbility(T0I,1095331446)
set TH1=UnitAddItemById(T0I,F20[V00])
call UnitUseItem(T0I,TH1)
set CK=TE1(V8I,TH1,i)
call SetItemPlayer(TH1,GK,false)
call SetItemUserData(TH1,1)
call UnitRemoveAbility(T0I,1095331446)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",V8I,"origin"))
set T0I=null
set TH1=null
endif
set TG1=null
set i=i+1
endloop
call EnableTrigger(JX0)
set t=null
endfunction
function TV1 takes nothing returns boolean
local integer i=1
local unit V8I
local integer id
if U2 then
return false
endif
if JY0>0 then
loop
exitwhen i>5
set id=GetPlayerId(CO[i])
set V8I=L1[id]
if JC0[id]>0 and V8I!=null and GetUnitTypeId(V8I)>1 and IsUnitType(V8I,UNIT_TYPE_DEAD)==false and(LoadBoolean(ZY,(GetHandleId(V8I)),(102)))==false and ZXI(V8I)==false and(LoadBoolean(ZY,(GetHandleId(V8I)),(129)))==false then
call TZ1(V8I)
endif
set id=GetPlayerId(DO[i])
set V8I=L1[id]
if JC0[id]>0 and V8I!=null and GetUnitTypeId(V8I)>1 and IsUnitType(V8I,UNIT_TYPE_DEAD)==false and(LoadBoolean(ZY,(GetHandleId(V8I)),(102)))==false and ZXI(V8I)==false and(LoadBoolean(ZY,(GetHandleId(V8I)),(129)))==false then
call TZ1(V8I)
endif
set i=i+1
endloop
endif
set V8I=null
return false
endfunction
function TX1 takes integer RUI returns integer
if RUI==1227894838 then
return GN0
elseif RUI==1227894840 then
return GS0
elseif RUI==1227894858 then
return GL0
elseif RUI==1227894859 then
return GM0
elseif RUI==1227894839 then
return GT0
endif
return-1
endfunction
function TY1 takes nothing returns boolean
if GetSpellAbilityId()==1093683254 then
call SaveUnitHandle(ZY,(GetHandleId(GetTriggerUnit())),(103),(null))
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(104),(0))
if(REI(GetTriggerUnit(),F20[GX0])!=null or REI(GetTriggerUnit(),F40[GX0])!=null)and(GetUnitTypeId(GetSpellTargetUnit())==1852206952 or GetUnitTypeId(GetSpellTargetUnit())==1852073580)then
call SaveUnitHandle(ZY,(GetHandleId(GetTriggerUnit())),(103),(GetSpellTargetUnit()))
elseif J11(GetItemTypeId(GetSpellTargetItem()))then
call MD1(GetTriggerUnit(),GetItemTypeId(GetSpellTargetItem()),true)
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(104),(GetItemTypeId(GetSpellTargetItem())))
call RBI(GetSpellTargetItem())
endif
endif
return false
endfunction
function TJ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=(LoadUnitHandle(ZY,(V0I),(26)))
local integer MP1=(LoadInteger(ZY,(V0I),(98)))
local item NFI=UnitItemInSlot(u,MP1)
local integer TK1=(LoadInteger(ZY,(V0I),(105)))
local item TH1
local integer P0I
if NFI!=null and TRI(TQI(NFI))and GetHandleId(NFI)==TK1 and KMI(u)==false and KMI(u)==false then
set TH1=CreateItem((LoadInteger(ZY,(GetHandleId(NFI)),(GetHandleId(u)))),GetUnitX(u),GetUnitY(u))
call FlushChildHashtable(ZY,(GetHandleId(NFI)))
set P0I=MBI(u,NFI)
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=RQI(u,F20[GK0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitAddItem(u,TH1)
endif
set t=null
set u=null
set NFI=null
set TH1=null
return false
endfunction
function TL1 takes unit u,item TH1 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer MP1=MBI(u,TH1)
call SaveInteger(ZY,(V0I),(98),(MP1))
call SaveInteger(ZY,(V0I),(105),(GetHandleId(TH1)))
call SaveUnitHandle(ZY,(V0I),(26),(u))
call TriggerRegisterTimerEvent(t,120,true)
call TriggerAddCondition(t,Condition(function TJ1))
set t=null
endfunction
function TM1 takes nothing returns nothing
local unit u=GetTriggerUnit()
local item NFI=GetManipulatedItem()
local integer TTI=TQI(NFI)
local unit TN1
local integer TS1
local boolean TargetFrog
local integer P0I
local item TH1
local integer TT1
if TTI==GX0 then
set P0I=MBI(u,NFI)
set TN1=(LoadUnitHandle(ZY,(GetHandleId(u)),(103)))
set TS1=(LoadInteger(ZY,(GetHandleId(u)),(104)))
if GetUnitTypeId(TN1)==1852206952 or GetUnitTypeId(TN1)==1852073580 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
call YII(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=RQI(u,F20[GK0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif J11(TS1)then
set TT1=TX1(TS1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
set GK=GetItemPlayer(NFI)
call RBI(NFI)
call DisableTrigger(JX0)
if GetOwningPlayer(u)==GK then
set CK=RQI(u,F20[TT1],P0I)
else
set CK=RQI(u,F40[TT1],P0I)
endif
call EnableTrigger(JX0)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
set TH1=UnitItemInSlot(u,P0I)
call SaveInteger(ZY,(GetHandleId(TH1)),(GetHandleId(u)),(TS1))
call TL1(u,TH1)
endif
elseif TTI==GK0 then
set P0I=MBI(u,NFI)
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=RQI(u,F20[GJ0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GJ0 then
set P0I=MBI(u,NFI)
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=RQI(u,F20[GY0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==GY0 then
set P0I=MBI(u,NFI)
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=RQI(u,F20[GX0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,0)
elseif TRI(TTI)then
if(LoadInteger(ZY,(GetHandleId(NFI)),(GetHandleId(u))))>0 then
set JR0=true
set P0I=MBI(u,NFI)
set TH1=CreateItem((LoadInteger(ZY,(GetHandleId(NFI)),(GetHandleId(u)))),GetUnitX(u),GetUnitY(u))
call FlushChildHashtable(ZY,(GetHandleId(NFI)))
set GK=GetItemPlayer(NFI)
call RBI(NFI)
set CK=RQI(u,F20[GK0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call UnitAddItem(u,TH1)
set JR0=false
endif
endif
set u=null
set NFI=null
set TN1=null
set TH1=null
endfunction
function TR1 takes nothing returns boolean
if GetIssuedOrderId()==851971 then
if GetOrderTargetItem()!=null and J11(GetItemTypeId(GetOrderTargetItem()))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659029))
endif
endif
return false
endfunction
function TP1 takes unit TQ1 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,TQ1,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function TR1))
set t=null
endfunction
function TU1 takes player p returns integer
local integer r=GetRandomInt(1,6)
if VLI(p)then
if r==1 then
return 1848651849
elseif r==2 then
return 1848652338
elseif r==3 then
return 1848652337
elseif r==4 then
return 1848658777
elseif r==5 then
return 1848658778
else
return 1848659013
endif
else
if r==1 then
return 1848652339
elseif r==2 then
return 1848652340
elseif r==3 then
return 1848652341
elseif r==4 then
return 1848658992
else
return 1848658993
endif
endif
return 0
endfunction
function R01 takes player p returns integer
if GetRandomInt(1,3)==1 then
return 1697657426
elseif VLI(p)then
return 1697657160
else
return 1697657178
endif
return 0
endfunction
function RI1 takes nothing returns nothing
local unit R11=CreateUnit(GetOwningPlayer(GetTriggerUnit()),TU1(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local real a=GetUnitFacing(GetTriggerUnit())
call SetUnitPosition(R11,x+25*Cos(a*bj_DEGTORAD),y+25*Sin(a*bj_DEGTORAD))
if IM[GetPlayerId(GetOwningPlayer(R11))]==false then
call UnitRemoveType(R11,UNIT_TYPE_PEON)
else
call UnitAddType(R11,UNIT_TYPE_PEON)
endif
endfunction
function RO1 takes nothing returns nothing
local unit R11=CreateUnit(GetOwningPlayer(GetTriggerUnit()),R01(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
if IM[GetPlayerId(GetOwningPlayer(R11))]==false then
call UnitRemoveType(R11,UNIT_TYPE_PEON)
else
call UnitAddType(R11,UNIT_TYPE_PEON)
endif
call TP1(R11)
endfunction
function R21 takes nothing returns boolean
if GetSpellAbilityId()==1093681718 then
call RI1()
endif
if GetSpellAbilityId()==1093683796 then
call RO1()
endif
return false
endfunction
function R31 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit R11=(LoadUnitHandle(ZY,(V0I),(124)))
local integer R41=(LoadInteger(ZY,(V0I),(125)))
local integer R51=(LoadInteger(ZY,(V0I),(106)))
local integer R61=(LoadInteger(ZY,(V0I),(107)))
local integer R71=(LoadInteger(ZY,(V0I),(108)))
local integer R81=(LoadInteger(ZY,(V0I),(109)))
local integer R91=(LoadInteger(ZY,(V0I),(110)))
local integer RA1=(LoadInteger(ZY,(V0I),(111)))
local player p0=(LoadPlayerHandle(ZY,(V0I),(118)))
local player p1=(LoadPlayerHandle(ZY,(V0I),(119)))
local player p2=(LoadPlayerHandle(ZY,(V0I),(120)))
local player p3=(LoadPlayerHandle(ZY,(V0I),(121)))
local player p4=(LoadPlayerHandle(ZY,(V0I),(122)))
local player p5=(LoadPlayerHandle(ZY,(V0I),(123)))
local integer RB1=(LoadInteger(ZY,(V0I),(112)))
local integer RC1=(LoadInteger(ZY,(V0I),(113)))
local integer RD1=(LoadInteger(ZY,(V0I),(114)))
local integer RE1=(LoadInteger(ZY,(V0I),(115)))
local integer RF1=(LoadInteger(ZY,(V0I),(116)))
local integer RG1=(LoadInteger(ZY,(V0I),(117)))
call DisableTrigger(JX0)
if GetTriggerEvalCount(t)==1 then
call UnitAddAbility(R11,R41)
if IM[GetPlayerId(GetOwningPlayer(R11))]==false then
call UnitRemoveType(R11,UNIT_TYPE_PEON)
else
call UnitAddType(R11,UNIT_TYPE_PEON)
endif
else
if R51>0 then
set CK=CreateItem(R51,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p0,false)
call SetItemUserData(CK,1)
endif
if RB1>0 then
call SetItemCharges(CK,RB1)
endif
if R61>0 then
set CK=CreateItem(R61,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p1,false)
call SetItemUserData(CK,1)
endif
if RC1>0 then
call SetItemCharges(CK,RC1)
endif
if R71>0 then
set CK=CreateItem(R71,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p2,false)
call SetItemUserData(CK,1)
endif
if RD1>0 then
call SetItemCharges(CK,RD1)
endif
if R81>0 then
set CK=CreateItem(R81,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p3,false)
call SetItemUserData(CK,1)
endif
if RE1>0 then
call SetItemCharges(CK,RE1)
endif
if R91>0 then
set CK=CreateItem(R91,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p4,false)
call SetItemUserData(CK,1)
endif
if RF1>0 then
call SetItemCharges(CK,RF1)
endif
if RA1>0 then
set CK=CreateItem(RA1,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p5,false)
call SetItemUserData(CK,1)
endif
if RG1>0 then
call SetItemCharges(CK,RG1)
endif
if IM[GetPlayerId(GetOwningPlayer(R11))]==false then
call UnitRemoveType(R11,UNIT_TYPE_PEON)
else
call UnitAddType(R11,UNIT_TYPE_PEON)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
call EnableTrigger(JX0)
set t=null
set R11=null
set p0=null
set p1=null
set p2=null
set p3=null
set p4=null
set p5=null
return false
endfunction
function RH1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit RZ1=(LoadUnitHandle(ZY,(V0I),(2)))
local integer RV1=GetUnitTypeId(RZ1)
local real x=GetUnitX(RZ1)
local real y=GetUnitY(RZ1)
local item RW1
local item RX1
local item RY1
local item RJ1
local item RK1
local item RL1
local player p0
local player p1
local player p2
local player p3
local player p4
local player p5
local integer R51
local integer R61
local integer R71
local integer R81
local integer R91
local integer RA1
local integer RB1=-1
local integer RC1=-1
local integer RD1=-1
local integer RE1=-1
local integer RF1=-1
local integer RG1=-1
local integer R41
local item NFI
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if RZ1==null or KMI(RZ1)then
return false
endif
set t=CreateTrigger()
set V0I=GetHandleId(t)
set RW1=UnitItemInSlot(RZ1,0)
set RX1=UnitItemInSlot(RZ1,1)
set RY1=UnitItemInSlot(RZ1,2)
set RJ1=UnitItemInSlot(RZ1,3)
set RK1=UnitItemInSlot(RZ1,4)
set RL1=UnitItemInSlot(RZ1,5)
set R51=GetItemTypeId(RW1)
set R61=GetItemTypeId(RX1)
set R71=GetItemTypeId(RY1)
set R81=GetItemTypeId(RJ1)
set R91=GetItemTypeId(RK1)
set RA1=GetItemTypeId(RL1)
set p0=GetItemPlayer(RW1)
set p1=GetItemPlayer(RX1)
set p2=GetItemPlayer(RY1)
set p3=GetItemPlayer(RJ1)
set p4=GetItemPlayer(RK1)
set p5=GetItemPlayer(RL1)
set NFI=RW1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RB1=GetItemCharges(NFI)
endif
set NFI=RX1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RC1=GetItemCharges(NFI)
endif
set NFI=RY1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RD1=GetItemCharges(NFI)
endif
set NFI=RJ1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RE1=GetItemCharges(NFI)
endif
set NFI=RK1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RF1=GetItemCharges(NFI)
endif
set NFI=RL1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RG1=GetItemCharges(NFI)
endif
call RBI(RW1)
call RBI(RX1)
call RBI(RY1)
call RBI(RJ1)
call RBI(RK1)
call RBI(RL1)
if RV1==1848651849 then
set R41=1395667001
elseif RV1==1848652338 then
set R41=1395667030
elseif RV1==1848652337 then
set R41=1395667011
elseif RV1==1848652339 then
set R41=1395667013
elseif RV1==1848652340 then
set R41=1395667010
elseif RV1==1848652341 then
set R41=1395667014
elseif RV1==1848658777 then
set R41=1395667031
elseif RV1==1848658778 then
set R41=1395667033
elseif RV1==1848658992 then
set R41=1395667032
elseif RV1==1848658993 then
set R41=1395667012
elseif RV1==1848659013 then
set R41=1395667253
endif
if GetRandomInt(1,10)==1 then
set R41=1395667015
endif
if GetRandomInt(1,10)<3 then
set R41=1395667254
endif
if RV1==1848651853 then
set R41=1395667020
elseif RV1==1848659027 then
set R41=1395667020
elseif RV1==1848658006 then
set R41=1395667014
endif
if RV1==1697657160 then
set R41=1395667250
elseif RV1==1697657178 then
set R41=1395667248
elseif RV1==1697657426 then
set R41=1395667252
elseif RV1==1697657428 then
set R41=1395667249
elseif RV1==1697657427 then
set R41=1395667255
elseif RV1==1697657648 then
set R41=1395667251
endif
call SavePlayerHandle(ZY,(V0I),(118),(p0))
call SavePlayerHandle(ZY,(V0I),(119),(p1))
call SavePlayerHandle(ZY,(V0I),(120),(p2))
call SavePlayerHandle(ZY,(V0I),(121),(p3))
call SavePlayerHandle(ZY,(V0I),(122),(p4))
call SavePlayerHandle(ZY,(V0I),(123),(p5))
call SaveInteger(ZY,(V0I),(106),(R51))
call SaveInteger(ZY,(V0I),(107),(R61))
call SaveInteger(ZY,(V0I),(108),(R71))
call SaveInteger(ZY,(V0I),(109),(R81))
call SaveInteger(ZY,(V0I),(110),(R91))
call SaveInteger(ZY,(V0I),(111),(RA1))
call SaveInteger(ZY,(V0I),(112),(RB1))
call SaveInteger(ZY,(V0I),(113),(RC1))
call SaveInteger(ZY,(V0I),(114),(RD1))
call SaveInteger(ZY,(V0I),(115),(RE1))
call SaveInteger(ZY,(V0I),(116),(RF1))
call SaveInteger(ZY,(V0I),(117),(RG1))
call SaveUnitHandle(ZY,(V0I),(124),(RZ1))
call SaveInteger(ZY,(V0I),(125),(R41))
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function R31))
set t=null
set RZ1=null
set RW1=null
set RX1=null
set RY1=null
set RJ1=null
set RK1=null
set RL1=null
set p0=null
set p1=null
set p2=null
set p3=null
set p4=null
set p5=null
return false
endfunction
function RM1 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.05,false)
call TriggerAddCondition(t,Condition(function RH1))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
set t=null
endfunction
function RN1 takes nothing returns boolean
if GetSpellAbilityId()==1093685076 then
call RM1()
endif
return false
endfunction
function RS1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit R11=(LoadUnitHandle(ZY,(V0I),(124)))
local integer R41=(LoadInteger(ZY,(V0I),(125)))
local integer R51=(LoadInteger(ZY,(V0I),(106)))
local integer R61=(LoadInteger(ZY,(V0I),(107)))
local integer R71=(LoadInteger(ZY,(V0I),(108)))
local integer R81=(LoadInteger(ZY,(V0I),(109)))
local integer R91=(LoadInteger(ZY,(V0I),(110)))
local integer RA1=(LoadInteger(ZY,(V0I),(111)))
local player p0=(LoadPlayerHandle(ZY,(V0I),(118)))
local player p1=(LoadPlayerHandle(ZY,(V0I),(119)))
local player p2=(LoadPlayerHandle(ZY,(V0I),(120)))
local player p3=(LoadPlayerHandle(ZY,(V0I),(121)))
local player p4=(LoadPlayerHandle(ZY,(V0I),(122)))
local player p5=(LoadPlayerHandle(ZY,(V0I),(123)))
local integer RB1=(LoadInteger(ZY,(V0I),(112)))
local integer RC1=(LoadInteger(ZY,(V0I),(113)))
local integer RD1=(LoadInteger(ZY,(V0I),(114)))
local integer RE1=(LoadInteger(ZY,(V0I),(115)))
local integer RF1=(LoadInteger(ZY,(V0I),(116)))
local integer RG1=(LoadInteger(ZY,(V0I),(117)))
call DisableTrigger(JX0)
if GetTriggerEvalCount(t)==1 then
call UnitAddAbility(R11,R41)
if IM[GetPlayerId(GetOwningPlayer(R11))]==false then
call UnitRemoveType(R11,UNIT_TYPE_PEON)
else
call UnitAddType(R11,UNIT_TYPE_PEON)
endif
else
if R51>0 then
set CK=CreateItem(R51,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p0,false)
call SetItemUserData(CK,1)
endif
if RB1>0 then
call SetItemCharges(CK,RB1)
endif
if R61>0 then
set CK=CreateItem(R61,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p1,false)
call SetItemUserData(CK,1)
endif
if RC1>0 then
call SetItemCharges(CK,RC1)
endif
if R71>0 then
set CK=CreateItem(R71,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p2,false)
call SetItemUserData(CK,1)
endif
if RD1>0 then
call SetItemCharges(CK,RD1)
endif
if R81>0 then
set CK=CreateItem(R81,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p3,false)
call SetItemUserData(CK,1)
endif
if RE1>0 then
call SetItemCharges(CK,RE1)
endif
if R91>0 then
set CK=CreateItem(R91,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p4,false)
call SetItemUserData(CK,1)
endif
if RF1>0 then
call SetItemCharges(CK,RF1)
endif
if RA1>0 then
set CK=CreateItem(RA1,GetUnitX(R11),GetUnitY(R11))
call UnitAddItem(R11,CK)
call SetItemPlayer(CK,p5,false)
call SetItemUserData(CK,1)
endif
if RG1>0 then
call SetItemCharges(CK,RG1)
endif
if IM[GetPlayerId(GetOwningPlayer(R11))]==false then
call UnitRemoveType(R11,UNIT_TYPE_PEON)
else
call UnitAddType(R11,UNIT_TYPE_PEON)
endif
call SetUnitFlyHeight(R11,240,0)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
call EnableTrigger(JX0)
set t=null
set R11=null
set p0=null
set p1=null
set p2=null
set p3=null
set p4=null
set p5=null
return false
endfunction
function RT1 takes unit RZ1 returns nothing
local integer RV1=GetUnitTypeId(RZ1)
local real x=GetUnitX(RZ1)
local real y=GetUnitY(RZ1)
local item RW1
local item RX1
local item RY1
local item RJ1
local item RK1
local item RL1
local player p0
local player p1
local player p2
local player p3
local player p4
local player p5
local integer R51
local integer R61
local integer R71
local integer R81
local integer R91
local integer RA1
local integer RB1=-1
local integer RC1=-1
local integer RD1=-1
local integer RE1=-1
local integer RF1=-1
local integer RG1=-1
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer R41
local item NFI
local integer i
local item RR1
set i=0
loop
exitwhen i>5
set RR1=UnitItemInSlot(RZ1,i)
if TQI(RR1)==FL0 then
call UnitRemoveItem(RZ1,RR1)
endif
set i=i+1
endloop
set RW1=UnitItemInSlot(RZ1,0)
set RX1=UnitItemInSlot(RZ1,1)
set RY1=UnitItemInSlot(RZ1,2)
set RJ1=UnitItemInSlot(RZ1,3)
set RK1=UnitItemInSlot(RZ1,4)
set RL1=UnitItemInSlot(RZ1,5)
set R51=GetItemTypeId(RW1)
set R61=GetItemTypeId(RX1)
set R71=GetItemTypeId(RY1)
set R81=GetItemTypeId(RJ1)
set R91=GetItemTypeId(RK1)
set RA1=GetItemTypeId(RL1)
set p0=GetItemPlayer(RW1)
set p1=GetItemPlayer(RX1)
set p2=GetItemPlayer(RY1)
set p3=GetItemPlayer(RJ1)
set p4=GetItemPlayer(RK1)
set p5=GetItemPlayer(RL1)
set NFI=RW1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RB1=GetItemCharges(NFI)
endif
set NFI=RX1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RC1=GetItemCharges(NFI)
endif
set NFI=RY1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RD1=GetItemCharges(NFI)
endif
set NFI=RJ1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RE1=GetItemCharges(NFI)
endif
set NFI=RK1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RF1=GetItemCharges(NFI)
endif
set NFI=RL1
if GetItemType(NFI)==ITEM_TYPE_ARTIFACT or R5I(TQI(NFI))then
set RG1=GetItemCharges(NFI)
endif
call RBI(RW1)
call RBI(RX1)
call RBI(RY1)
call RBI(RJ1)
call RBI(RK1)
call RBI(RL1)
if VLI(GetOwningPlayer(RZ1))then
set R41=1395667017
else
set R41=1395667018
endif
if GetRandomInt(1,3)==1 then
set R41=1395667034
endif
call SavePlayerHandle(ZY,(V0I),(118),(p0))
call SavePlayerHandle(ZY,(V0I),(119),(p1))
call SavePlayerHandle(ZY,(V0I),(120),(p2))
call SavePlayerHandle(ZY,(V0I),(121),(p3))
call SavePlayerHandle(ZY,(V0I),(122),(p4))
call SavePlayerHandle(ZY,(V0I),(123),(p5))
call SaveInteger(ZY,(V0I),(106),(R51))
call SaveInteger(ZY,(V0I),(107),(R61))
call SaveInteger(ZY,(V0I),(108),(R71))
call SaveInteger(ZY,(V0I),(109),(R81))
call SaveInteger(ZY,(V0I),(110),(R91))
call SaveInteger(ZY,(V0I),(111),(RA1))
call SaveInteger(ZY,(V0I),(112),(RB1))
call SaveInteger(ZY,(V0I),(113),(RC1))
call SaveInteger(ZY,(V0I),(114),(RD1))
call SaveInteger(ZY,(V0I),(115),(RE1))
call SaveInteger(ZY,(V0I),(116),(RF1))
call SaveInteger(ZY,(V0I),(117),(RG1))
call SaveUnitHandle(ZY,(V0I),(124),(RZ1))
call SaveInteger(ZY,(V0I),(125),(R41))
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function RS1))
set t=null
set RZ1=null
set RW1=null
set RX1=null
set RY1=null
set RJ1=null
set RK1=null
set RL1=null
set p0=null
set p1=null
set p2=null
set p3=null
set p4=null
set p5=null
endfunction
function RP1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local item RQ1=JLI(XSI,F20[X40])
if RQ1==null then
set RQ1=JLI(XSI,F40[X40])
endif
if RQ1!=null then
call RemoveItem(RQ1)
call RT1(XSI)
else
call Y3I(GetOwningPlayer(XSI),GetObjectName(1848652369))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function RU1 takes unit XSI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TP1(XSI)
call TriggerRegisterTimerEvent(t,0.05,false)
call TriggerAddCondition(t,Condition(function RP1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
endfunction
function P01 takes nothing returns boolean
if GetSpellAbilityId()==1093683012 then
call RU1(GetTriggerUnit())
endif
return false
endfunction
function PI1 takes nothing returns boolean
local unit V8I=GetTriggerUnit()
local item NFI=GetManipulatedItem()
local integer id=GetItemTypeId(NFI)
if(id==F20[H90]or id==F20[HX0])and IsUnitType(V8I,UNIT_TYPE_HERO)==true then
set KA0[GetPlayerId(GetOwningPlayer(V8I))]=GetItemX(NFI)
set KB0[GetPlayerId(GetOwningPlayer(V8I))]=GetItemY(NFI)
endif
call MX1(V8I,NFI)
call MY1(V8I,NFI)
if(GetItemTypeId(NFI)==F20[VJ0]or GetItemTypeId(NFI)==F20[VK0])and XBI(V8I)then
call UnitRemoveItem(V8I,NFI)
elseif GetItemTypeId(NFI)==F20[ZX0]and GetUnitTypeId(V8I)!=1848651852 and EU0==false then
set EQ0=V8I
set EU0=true
call P7I("AegisOn",GetPlayerId(GetOwningPlayer(V8I)))
call JDI(bj_FORCE_ALL_PLAYERS,10.00,C0[GetPlayerId(GetOwningPlayer(V8I))]+GetUnitName(V8I)+"|r "+GetObjectName(1848657233))
elseif GetItemTypeId(NFI)==F20[X40]and X9I(V8I)then
call RU1(V8I)
elseif GetItemTypeId(NFI)==F20[J30]and GetUnitTypeId(V8I)==1164799855 then
call SetPlayerTechResearched(GetOwningPlayer(V8I),1378889802,1)
elseif GetItemTypeId(NFI)==F20[J60]and GetUnitTypeId(V8I)==1211117641 then
set OK=V8I
call ExecuteFunc("P11")
endif
set V8I=null
set NFI=null
return false
endfunction
function P21 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1097163124 then
call SaveInteger(ZY,(V0I),(34),(16))
endif
elseif KMI(XSI)or GetTriggerEventId()==EVENT_UNIT_DEATH or ZLI==0 then
call UnitRemoveAbility(XSI,1093685334)
call UnitRemoveAbility(XSI,1110456140)
call SaveInteger(ZY,(GetHandleId((XSI))),((4255)),(2))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitState(XSI,UNIT_STATE_LIFE,GetUnitState(XSI,UNIT_STATE_LIFE)+115/16)
call SaveInteger(ZY,(V0I),(34),(ZLI-1))
endif
return false
endfunction
function P31 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveInteger(ZY,(GetHandleId((XSI))),((4255)),(1))
call KKI(XSI,1093685334)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(34),(16))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P21))
call TriggerEvaluate(t)
set XSI=null
set t=null
endfunction
function P41 takes nothing returns nothing
if GetSpellAbilityId()==1097163124 and((LoadInteger(ZY,(GetHandleId((GetTriggerUnit()))),((4255))))==1)==false then
call P31()
endif
endfunction
function P51 takes integer id,real x,real y returns nothing
if IsPointInRegion(KV0,x,y)==false then
set KG0=KG0+1
set KC0[KG0]=Player(id)
set KD0[KG0]=x
set KE0[KG0]=y
set KF0[KG0]=(TimerGetElapsed(M))
endif
endfunction
function P61 takes integer id,real x,real y returns integer
local real Q1I=(TimerGetElapsed(M))
local integer i=0
local integer ZLI=0
if IsPointInRegion(KV0,x,y)==true then
return ZLI
endif
loop
exitwhen i>KG0
if(Q1I<KF0[i]+KH0)and(JAI(x,y,KD0[i],KE0[i])<KZ0*2+50)and IsPlayerAlly(Player(id),KC0[i])==true then
set ZLI=ZLI+1
endif
set i=i+1
endloop
return ZLI
endfunction
function P71 takes integer HWI returns integer
if HWI==GetPlayerId(CO[1])then
return 1747993161
elseif HWI==GetPlayerId(CO[2])then
return 1747993163
elseif HWI==GetPlayerId(CO[3])then
return 1747993159
elseif HWI==GetPlayerId(CO[4])then
return 1747993158
elseif HWI==GetPlayerId(CO[5])then
return 1747993164
elseif HWI==GetPlayerId(DO[1])then
return 1747993160
elseif HWI==GetPlayerId(DO[2])then
return 1747993162
elseif HWI==GetPlayerId(DO[3])then
return 1747993165
elseif HWI==GetPlayerId(DO[4])then
return 1747992885
elseif HWI==GetPlayerId(DO[5])then
return 1747993166
endif
return 1747993166
endfunction
function P81 takes integer HWI returns integer
return 1747992920
endfunction
function P91 takes integer HWI returns string
if HWI==GetPlayerId(CO[1])then
return"war3mapImported\\TeleportTarget_Blue.mdx"
elseif HWI==GetPlayerId(CO[2])then
return"war3mapImported\\TeleportTarget_Teal.mdx"
elseif HWI==GetPlayerId(CO[3])then
return"war3mapImported\\TeleportTarget_Purple.mdx"
elseif HWI==GetPlayerId(CO[4])then
return"war3mapImported\\TeleportTarget_Yellow.mdx"
elseif HWI==GetPlayerId(CO[5])then
return"war3mapImported\\TeleportTarget_Orange.mdx"
elseif HWI==GetPlayerId(DO[1])then
return"war3mapImported\\TeleportTarget_Pink.mdx"
elseif HWI==GetPlayerId(DO[2])then
return"war3mapImported\\TeleportTarget_Gray.mdx"
elseif HWI==GetPlayerId(DO[3])then
return"war3mapImported\\TeleportTarget_LightBlue.mdx"
elseif HWI==GetPlayerId(DO[4])then
return"war3mapImported\\TeleportTarget_DarkGreen.mdx"
elseif HWI==GetPlayerId(DO[5])then
return"war3mapImported\\TeleportTarget_Brown.mdx"
endif
return"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl"
endfunction
function PA1 takes integer HWI returns string
return"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl"
endfunction
function PB1 takes nothing returns boolean
local real d
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(AK))==true and GetUnitTypeId(GetFilterUnit())!=1966092371 and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetUnitTypeId(GetFilterUnit())!=1701670775 and GetUnitTypeId(GetFilterUnit())!=1970956647 and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false then
set d=JAI(RJ,PJ,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<TJ then
set TJ=d
set OK=GetFilterUnit()
endif
endif
return false
endfunction
function PC1 takes unit VCI,real x,real y returns unit
local group g=ZJI()
set OK=null
set AK=VCI
set TJ=99999
set RJ=x
set PJ=y
call GroupEnumUnitsInRange(g,x,y,99999,Condition(function PB1))
call ZYI(g)
set g=null
return OK
endfunction
function PD1 takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1848657480 or id==1848657462 or id==1848657481 or id==1848657482
endfunction
function PE1 takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1966092370 or id==1970107511 or id==1697657398 or id==1700946284
endfunction
function PF1 takes nothing returns boolean
local real d
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or PE1(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1852206952 or GetUnitTypeId(GetFilterUnit())==1852073580 or PD1(GetFilterUnit()))and KMI(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(AK))==true and GetOwningPlayer(GetFilterUnit())!=FO and IsUnitIllusion(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_FLYING)==false and GetUnitTypeId(GetFilterUnit())!=1848657461 then
set d=JAI(RJ,PJ,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<TJ then
set TJ=d
set OK=GetFilterUnit()
endif
endif
return false
endfunction
function PG1 takes unit VCI,real x,real y returns unit
local group g=ZJI()
set OK=null
set AK=VCI
set TJ=99999
set RJ=x
set PJ=y
call GroupEnumUnitsInRange(g,x,y,99999,Condition(function PF1))
call ZYI(g)
set g=null
return OK
endfunction
function PH1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local unit PZ1=(LoadUnitHandle(ZY,(V0I),(448)))
local unit PV1=(LoadUnitHandle(ZY,(V0I),(447)))
local ubersplat N5I=(LoadUbersplatHandle(ZY,(V0I),(131)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local real SQI=(LoadReal(ZY,(V0I),(57)))
local real Q1I=(LoadReal(ZY,(V0I),(442)))
local integer id=GetPlayerId(GetOwningPlayer(V8I))
local boolean PW1=false
local integer i=0
local integer R8I
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetSpellAbilityId()==1093751349 then
set PW1=true
endif
else
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
if ZLI==1 then
if SQI>3 then
call SetUnitAnimationByIndex(PZ1,1)
call SetUnitAnimationByIndex(PV1,1)
endif
elseif ZLI==2 then
set PW1=true
else
endif
endif
if PW1 then
call SaveInteger(ZY,(GetHandleId((V8I))),((4256)),(2))
call KillUnit(PZ1)
call KillUnit(PV1)
call DestroyUbersplat(N5I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if ZLI==2 then
call DestroyEffect(AddSpecialEffect(PA1(id),GetUnitX(V8I),GetUnitY(V8I)))
call DestroyEffect(AddSpecialEffect(P91(id),x,y))
call SetUnitX(V8I,x)
call SetUnitY(V8I,y)
call PauseUnit(V8I,true)
call PauseUnit(V8I,false)
call KCI(x,y,240)
endif
endif
set t=null
set V8I=null
set PZ1=null
set PV1=null
set N5I=null
return false
endfunction
function PX1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local unit PZ1=(LoadUnitHandle(ZY,(V0I),(448)))
local unit PV1=(LoadUnitHandle(ZY,(V0I),(447)))
local ubersplat N5I=(LoadUbersplatHandle(ZY,(V0I),(131)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local real SQI=(LoadReal(ZY,(V0I),(57)))
local real Q1I=(LoadReal(ZY,(V0I),(442)))
local integer id=GetPlayerId(GetOwningPlayer(V8I))
local boolean PW1=false
local integer i=0
local integer R8I
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetSpellAbilityId()==1093808945 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call SaveInteger(ZY,(GetHandleId((V8I))),((4256)),(2))
call KillUnit(PZ1)
call KillUnit(PV1)
call DestroyUbersplat(N5I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveType(XTI,UNIT_TYPE_PEON)
endif
elseif GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call UnitRemoveType(XTI,UNIT_TYPE_PEON)
call SaveInteger(ZY,(GetHandleId((V8I))),((4256)),(2))
call KillUnit(PZ1)
call KillUnit(PV1)
call DestroyUbersplat(N5I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(V8I),GetUnitY(V8I)))
call SaveInteger(ZY,(GetHandleId((V8I))),((4256)),(2))
call KillUnit(PZ1)
call KillUnit(PV1)
call DestroyUbersplat(N5I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveType(XTI,UNIT_TYPE_PEON)
call SetUnitX(V8I,GetUnitX(XTI)-1)
call SetUnitY(V8I,GetUnitY(XTI)-1)
call PauseUnit(V8I,true)
call PauseUnit(V8I,false)
call KCI(x,y,240)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(V8I),GetUnitY(V8I)))
endif
set t=null
set V8I=null
set PZ1=null
set PV1=null
set N5I=null
set XTI=null
return false
endfunction
function PY1 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local location l
local real x
local real y
local real a
local trigger t
local integer V0I
local unit PZ1
local unit PV1
local ubersplat N5I
local integer id=GetPlayerId(GetOwningPlayer(V8I))
local integer ZLI
local real PJ1
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveInteger(ZY,(GetHandleId((V8I))),((4256)),(1))
if XTI==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
if x==KA0[id]and y==KB0[id]then
if VLI(GetOwningPlayer(V8I))then
set x=GetUnitX(HQ)
set y=GetUnitY(HQ)
else
set x=GetUnitX(B70)
set y=GetUnitY(B70)
endif
endif
set XTI=PC1(V8I,x,y)
call RemoveLocation(l)
else
set x=GetUnitX(XTI)
set y=GetUnitY(XTI)
endif
if JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))>KZ0 then
set a=Atan2(y-GetUnitY(XTI),x-GetUnitX(XTI))
set x=GetUnitX(XTI)+KZ0*Cos(a)
set y=GetUnitY(XTI)+KZ0*Sin(a)
elseif JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))<50 then
set a=Atan2(y-GetUnitY(XTI),x-GetUnitX(XTI))
set x=GetUnitX(XTI)+120*Cos(a)
set y=GetUnitY(XTI)+120*Sin(a)
endif
if IsPointInRegion(ZN,x,y)==true then
set a=Atan2(y-GetUnitY(XTI),x-GetUnitX(XTI))
set x=GetUnitX(XTI)+200*Cos(a)
set y=GetUnitY(XTI)+200*Sin(a)
endif
set x=YEI(x)
set y=YHI(y)
if(IsUnitAlly(V8I,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(V8I))or(D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0))then
call PingMinimapEx(x,y,3,255,255,255,false)
endif
set PV1=CreateUnit(GetOwningPlayer(V8I),P71(id),x,y,0)
set PZ1=CreateUnit(GetOwningPlayer(V8I),P81(id),GetUnitX(V8I),GetUnitY(V8I),0)
set N5I=CreateUbersplat(GetUnitX(V8I),GetUnitY(V8I),"SCTP",255,255,255,255,false,false)
if IsUnitVisible(V8I,GetLocalPlayer())==true then
call SetUbersplatRenderAlways(N5I,true)
else
call SetUbersplatRenderAlways(N5I,false)
endif
set ZLI=P61(GetPlayerId(GetOwningPlayer(V8I)),x,y)
if ZLI>0 then
set ZLI=ZLI+1
endif
set PJ1=3+ZLI
call P51(GetPlayerId(GetOwningPlayer(V8I)),x,y)
if ZLI>0 then
call SetUnitAnimationByIndex(PZ1,2)
call SetUnitAnimationByIndex(PV1,2)
endif
call TriggerRegisterTimerEvent(t,PJ1-3,false)
call TriggerRegisterTimerEvent(t,PJ1,false)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function PH1))
call KZI(GetOwningPlayer(V8I),PJ1,x,y,200)
call SaveUnitHandle(ZY,(V0I),(447),(PV1))
call SaveUnitHandle(ZY,(V0I),(448),(PZ1))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M)))*1.0))
call SaveReal(ZY,(V0I),(57),((PJ1)*1.0))
call SaveUbersplatHandle(ZY,(V0I),(131),(N5I))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(34),(0))
call MAI(V8I,VF,x,y,2400)
set V8I=null
set XTI=null
set PZ1=null
set PV1=null
set l=null
set t=null
set N5I=null
endfunction
function PK1 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local location l
local real x
local real y
local real a
local trigger t
local integer V0I
local unit PZ1
local unit PV1
local ubersplat N5I
local integer id=GetPlayerId(GetOwningPlayer(V8I))
local integer ZLI
local real PJ1
set t=CreateTrigger()
set V0I=GetHandleId(t)
if XTI==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
if x==KA0[id]and y==KB0[id]then
if VLI(GetOwningPlayer(V8I))then
set x=GetUnitX(HQ)
set y=GetUnitY(HQ)
else
set x=GetUnitX(B70)
set y=GetUnitY(B70)
endif
endif
set XTI=PG1(V8I,x,y)
call RemoveLocation(l)
endif
set x=GetUnitX(XTI)
set y=GetUnitY(XTI)
if(IsUnitAlly(V8I,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(V8I))or(D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0))then
call PingMinimapEx(x,y,3,255,255,255,false)
endif
set N5I=CreateUbersplat(GetUnitX(V8I),GetUnitY(V8I),"SCTP",255,255,255,255,false,false)
if IsUnitVisible(V8I,GetLocalPlayer())==true then
call SetUbersplatRenderAlways(N5I,true)
else
call SetUbersplatRenderAlways(N5I,false)
endif
set PJ1=3
call UnitAddType(XTI,UNIT_TYPE_PEON)
call TriggerRegisterTimerEvent(t,PJ1,false)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function PX1))
call KZI(GetOwningPlayer(V8I),PJ1,x,y,200)
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M)))*1.0))
call SaveReal(ZY,(V0I),(57),((PJ1)*1.0))
call SaveUbersplatHandle(ZY,(V0I),(131),(N5I))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(34),(0))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",V8I,"origin")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",V8I,"origin")))
call SaveEffectHandle(ZY,(V0I),(177),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",XTI,"origin")))
call MAI(V8I,VF,x,y,2400)
set V8I=null
set XTI=null
set PZ1=null
set PV1=null
set l=null
set t=null
set N5I=null
endfunction
function PL1 takes nothing returns nothing
if GetSpellAbilityId()==1093751349 and XBI(GetTriggerUnit())==false then
call PY1()
endif
if GetSpellAbilityId()==1093808945 then
call PK1()
endif
endfunction
function PM1 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function PN1 takes nothing returns boolean
local integer i=GetUnitTypeId(GetFilterUnit())
return i==1848651848 or i==1848651847 or i==1848651851 or i==1848651850 or i==1848651841 or i==1848651830
endfunction
function PS1 takes nothing returns nothing
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function PN1))
call ForGroup(g,function PM1)
call ZYI(g)
set g=null
endfunction
function PT1 takes nothing returns nothing
if GetSpellAbilityId()==1093683266 or GetSpellAbilityId()==1093682227 or GetSpellAbilityId()==1093682246 then
call PS1()
endif
endfunction
function PR1 takes nothing returns nothing
if GetSpellAbilityId()==1093748304 then
call JWI("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl",GetTriggerUnit(),"origin",3.5)
call MSI(GetTriggerUnit(),1093747534,1,3.5)
endif
endfunction
function PP1 takes nothing returns nothing
if GetSpellAbilityId()==1094935400 then
call UnitApplyTimedLife(GetSpellTargetUnit(),1112820806,1200)
call UnitAddAbility(GetSpellTargetUnit(),1097167976)
call UnitAddAbility(GetSpellTargetUnit(),1094939243)
call JBI(GetSpellTargetUnit())
endif
endfunction
function PQ1 takes integer i returns integer
if i==KW0 then
return KM0
endif
if i==KX0 then
return KN0
endif
if i==KY0 then
return KS0
endif
if i==KJ0 then
return KT0
endif
if i==KK0 then
return KR0
endif
if i==KL0 then
return KP0
endif
return 0
endfunction
function PU1 takes integer i returns integer
if i==KW0 then
return 10
endif
if i==KX0 then
return 9
endif
if i==KY0 then
return 8
endif
if i==KJ0 then
return 7
endif
if i==KK0 then
return 6
endif
if i==KL0 then
return 5
endif
return 0
endfunction
function Q01 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if KMI(V8I)==false and V8I!=null then
call SetUnitScale(V8I,VZI(V8I)*QW0,VZI(V8I)*QW0,VZI(V8I)*QW0)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function QI1 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
local trigger t=CreateTrigger()
local real SQI=PU1(GetSpellAbilityId())
call LDI(V8I,KQ0,SQI)
call UnitMakeAbilityPermanent(V8I,true,KQ0)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),KQ0,false)
call UnitAddAbility(T0I,PQ1(GetSpellAbilityId()))
call IssueTargetOrder(T0I,"antimagicshell",V8I)
call TZI(V8I,0,0)
if XBI(V8I)then
call L9I(V8I,SQI,3)
else
call L9I(V8I,SQI,1.4)
endif
call TriggerRegisterTimerEvent(t,SQI+7,false)
call TriggerAddCondition(t,Condition(function Q01))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(V8I))
set t=null
set V8I=null
set T0I=null
endfunction
function Q11 takes nothing returns nothing
if PQ1(GetSpellAbilityId())>0 then
call QI1()
endif
endfunction
function QO1 takes nothing returns nothing
if((LoadInteger(ZY,(GetHandleId((GetEnumUnit()))),((4258))))==1)==true then
call Y3I(GetOwningPlayer(GetEnumUnit()),GetObjectName(1848652365)+" "+GetUnitName(GetEnumUnit())+" "+GetObjectName(1848652371))
else
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
call V5I(GetEnumUnit(),4258,25)
endif
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+250)
endif
endfunction
function Q21 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local group g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),775,Condition(function SDI))
call ForGroup(g,function QO1)
call ZYI(g)
set XSI=null
set g=null
endfunction
function Q31 takes nothing returns nothing
if GetSpellAbilityId()==1093681995 then
call Q21()
endif
endfunction
function Q41 takes nothing returns nothing
if((LoadInteger(ZY,(GetHandleId((GetEnumUnit()))),((4278))))==1)==true then
call Y3I(GetOwningPlayer(GetEnumUnit()),GetObjectName(1848652365))
else
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
call V5I(GetEnumUnit(),4278,50)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1110458964)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110458965)==0 then
call IssueTargetOrder(KU0,"antimagicshell",GetEnumUnit())
endif
endif
endfunction
function Q51 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local group g=ZJI()
set KU0=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call UnitAddAbility(KU0,1093748054)
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),525,Condition(function SGI))
call ForGroup(g,function Q41)
call ZYI(g)
set XSI=null
set g=null
endfunction
function Q61 takes nothing returns nothing
if GetSpellAbilityId()==1093748055 then
call Q51()
endif
endfunction
function Q71 takes nothing returns nothing
if GetSpellAbilityId()==1093677655 then
call UnitResetCooldown(GetTriggerUnit())
endif
endfunction
function Q81 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local real XPI=(LoadReal(ZY,(V0I),(20)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or GetUnitAbilityLevel(GetTriggerUnit(),1110455089)==0 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call XNI(XSI,XTI,1,XPI)
if XPI>0 then
call K3I("+"+I2S(R2I(XPI)),1,XTI,0.023,255,0,0,216)
endif
elseif GetEventDamage()>1 then
call SaveReal(ZY,(V0I),(20),((XPI+GetEventDamage()*0.25)*1.0))
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function Q91 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Silence\\SilenceTarget.mdl",XTI,"overhead")))
call SaveReal(ZY,(V0I),(20),((0)*1.0))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerAddCondition(t,Condition(function Q81))
set t=null
return false
endfunction
function QA1 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function Q91))
call SaveUnitHandle(ZY,(V0I),(17),(GetSpellTargetUnit()))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
set t=null
endfunction
function QB1 takes nothing returns nothing
if GetSpellAbilityId()==1093682756 and ZXI(GetSpellTargetUnit())==false then
call QA1()
endif
endfunction
function QC1 takes unit u,real d returns boolean
if IsUnitType(u,UNIT_TYPE_HERO)or GetUnitAbilityLevel(u,1093678162)>0 then
return d>5
endif
return true
endfunction
function QD1 takes unit u returns unit
local group g
if GetUnitAbilityLevel(u,1093678162)==0 then
return u
endif
set OK=LI0
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function SOI))
set L00=FirstOfGroup(g)
call ZYI(g)
return L00
endfunction
function QE1 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I
local unit XSI
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set XSI=(LoadUnitHandle(ZY,(V0I),(2)))
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call UnitAddAbility(T0I,1093684022)
set LI0=XSI
if IssueTargetOrder(T0I,"forkedlightning",QD1(GetEventDamageSource()))then
call V5I(GetTriggerUnit(),4257,1)
endif
endif
set t=null
set T0I=null
set XSI=null
endfunction
function QF1 takes nothing returns boolean
if(GetTriggerEventId()==EVENT_UNIT_DAMAGED and QC1(GetEventDamageSource(),GetEventDamage())and GetRandomInt(1,100)<21 and((LoadInteger(ZY,(GetHandleId((GetTriggerUnit()))),((4257))))==1)==false)or GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call QE1()
endif
return false
endfunction
function QG1 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
if XTI==null then
set XTI=XSI
endif
call V5I(XTI,4279,20)
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function QF1))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",XTI,"origin")))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
set XTI=null
endfunction
function QH1 takes nothing returns nothing
if GetSpellAbilityId()==1093683788 and((LoadInteger(ZY,(GetHandleId((GetSpellTargetUnit()))),((4279))))==1)==false then
call QG1()
endif
endfunction
function QZ1 takes nothing returns nothing
local unit QV1=GetTriggerUnit()
local item RQ1=JLI(QV1,F20[X40])
if RQ1==null then
set RQ1=JLI(QV1,F40[X40])
endif
if RQ1!=null then
call RBI(RQ1)
call UnitRemoveAbility(QV1,1093686866)
call UnitAddAbility(QV1,1093686869)
call SetUnitState(QV1,UNIT_STATE_MANA,400)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",QV1,"origin"))
else
call Y3I(GetOwningPlayer(QV1),GetObjectName(1848652369))
endif
set QV1=null
endfunction
function QW1 takes nothing returns nothing
if GetSpellAbilityId()==1093686866 then
call QZ1()
endif
endfunction
function QX1 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local group QY1=L10
local unit XSI=LO0
if IsUnitInGroup(XTI,QY1)==false then
call GroupAddUnit(QY1,XTI)
call IssueTargetOrder(L20,"slow",XTI)
call XNI(XSI,XTI,1,200)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",XTI,"origin"))
endif
set XTI=null
set QY1=null
set XSI=null
endfunction
function QJ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local real d
local real x
local real x0=GetUnitX(XSI)
local real y
local real y0=GetUnitY(XSI)
local group g=ZJI()
local integer ZLI=GetTriggerEvalCount(t)
local integer i
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
set L10=QY1
set LO0=XSI
set L20=(LoadUnitHandle(ZY,(V0I),(132)))
if GetTriggerEvalCount(t)>33 then
call KillUnit(T0I)
call ZYI(QY1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set d=ZLI*18
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/36*bj_DEGTORAD)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,150,Condition(function S1I))
call ForGroup(g,function QX1)
set i=i+1
endloop
endif
call ZYI(g)
set t=null
set T0I=null
set QY1=null
set XSI=null
set g=null
return false
endfunction
function QK1 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local group QY1=ZJI()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1747990833,x,y,0)
local unit QL1=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
call UnitAddAbility(QL1,1093686320)
call SaveGroupHandle(ZY,(V0I),(133),(QY1))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(132),(QL1))
call SaveUnitHandle(ZY,(V0I),(2),(V8I))
call TriggerRegisterTimerEvent(t,0.06,true)
call TriggerAddCondition(t,Condition(function QJ1))
set t=null
set QY1=null
set T0I=null
set QL1=null
set V8I=null
endfunction
function QM1 takes nothing returns nothing
if GetSpellAbilityId()==1093686329 then
call QK1()
endif
endfunction
function QN1 takes nothing returns nothing
local integer i=0
local integer R8I=0
local boolean QS1=false
if GetSpellAbilityId()==1093683801 then
loop
exitwhen i>5
if RWI(UnitItemInSlot(GetTriggerUnit(),i))==GR0 or RWI(UnitItemInSlot(GetTriggerUnit(),i))==VP0 then
set R8I=GetItemCharges(UnitItemInSlot(GetTriggerUnit(),i))
if R8I>0 then
call SetItemCharges(UnitItemInSlot(GetTriggerUnit(),i),0)
if QS1==false then
set QS1=true
call SetUnitState(GetTriggerUnit(),UNIT_STATE_MANA,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+15*R8I)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+15*R8I)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",GetTriggerUnit(),"origin"))
endif
endif
return
endif
set i=i+1
endloop
endif
endfunction
function QT1 takes integer id returns boolean
local integer i=1
loop
exitwhen i>E00
if id==DU0[i]then
return false
endif
set i=i+1
endloop
return true
endfunction
function QR1 takes unit QP1,unit XSI returns nothing
if IsUnitVisible(QP1,GetOwningPlayer(XSI))==false and GetRandomInt(1,100)<10 then
call PlaySoundOnUnitBJ(QE,100,XSI)
endif
endfunction
function QQ1 takes nothing returns nothing
local unit V8I=GetEnumUnit()
local integer i=0
loop
exitwhen i>5
if IsUnitVisible(GetTriggerUnit(),GetOwningPlayer(GetEnumUnit()))==true then
if RWI(UnitItemInSlot(V8I,i))==GR0 or RWI(UnitItemInSlot(V8I,i))==VP0 then
if RWI(UnitItemInSlot(V8I,i))==VP0 then
if GetItemCharges(UnitItemInSlot(V8I,i))==15 then
call QR1(GetTriggerUnit(),V8I)
endif
call SetItemCharges(UnitItemInSlot(V8I,i),YSI(GetItemCharges(UnitItemInSlot(V8I,i))+1,15))
else
if GetItemCharges(UnitItemInSlot(V8I,i))==10 then
call QR1(GetTriggerUnit(),V8I)
endif
call SetItemCharges(UnitItemInSlot(V8I,i),YSI(GetItemCharges(UnitItemInSlot(V8I,i))+1,10))
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",V8I,"chest"))
set i=5
endif
endif
set i=i+1
endloop
set V8I=null
endfunction
function QU1 takes nothing returns nothing
local group g=ZJI()
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
call GroupEnumUnitsInRange(g,x,y,1225,Condition(function SVI))
call ForGroup(g,function QQ1)
call ZYI(g)
set g=null
set XSI=null
endfunction
function UI1 takes nothing returns nothing
if QT1(GetSpellAbilityId())==true and WVI(GetSpellAbilityId())==true and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 and I41(GetSpellAbilityId())==false then
call QU1()
endif
endfunction
function U11 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit UO1=(LoadUnitHandle(ZY,(V0I),(134)))
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call UnitRemoveAbility(UO1,1093744466)
call UnitRemoveAbility(UO1,1093809222)
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set UO1=null
return false
endfunction
function U21 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0.5 and IsUnitAlly(GetFilterUnit(),L30)==true and GetOwningPlayer(GetFilterUnit())!=FO and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetUnitTypeId(GetFilterUnit())!=1848657482 and GetUnitTypeId(GetFilterUnit())!=1848657481 and GetUnitTypeId(GetFilterUnit())!=1848657462 and GetUnitTypeId(GetFilterUnit())!=1848657480
endfunction
function U31 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit UO1=GetEnumUnit()
local string s
call UnitAddAbility(UO1,1093744466)
call UnitAddAbility(UO1,1093809222)
if VLI(L30)then
set s="effects\\GlyphSent.mdx"
else
set s="effects\\GlyphScourge.mdx"
endif
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget(s,UO1,"origin")))
call SaveUnitHandle(ZY,(V0I),(134),(UO1))
call TriggerRegisterUnitEvent(t,UO1,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function U11))
set t=null
set UO1=null
endfunction
function U41 takes unit U51,player p returns nothing
local integer i
if VLI(p)then
set i=1
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
set i=2
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
set i=3
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
set i=4
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
set i=5
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
else
set i=7
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
set i=8
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
set i=9
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
set i=10
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
set i=11
if U51!=CL0[i]then
call IssueImmediateOrder(CL0[i],"coldarrows")
endif
endif
endfunction
function U61 takes nothing returns nothing
local group g
local unit U51=GetTriggerUnit()
local player p=GetOwningPlayer(U51)
if(VLI(p)and L40==false)or(VLI(p)==false and L50==false)then
set g=ZJI()
set L30=p
call GroupEnumUnitsInRange(g,0,0,12000,Condition(function U21))
call ForGroup(g,function U31)
call ZYI(g)
if VLI(p)then
set L40=true
call U41(U51,p)
set L40=false
else
set L50=true
call U41(U51,p)
set L50=false
endif
endif
set g=null
set U51=null
set p=null
endfunction
function U71 takes nothing returns nothing
if GetSpellAbilityId()==1093743665 or GetSpellAbilityId()==1093752649 then
call U61()
endif
endfunction
function U81 takes nothing returns nothing
if GetSpellAbilityId()==1093743191 and GetUnitAbilityLevel(GetTriggerUnit(),1114665832)>0 then
call UnitRemoveAbility(GetTriggerUnit(),1114665832)
endif
endfunction
function U91 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if XHI(GetEventDamage())and IsUnitAlly(GetEventDamageSource(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false and L60==false then
if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)or GetUnitAbilityLevel(GetEventDamageSource(),1093678162)==0 then
call DisableTrigger(t)
set L60=true
call XNI(GetTriggerUnit(),GetEventDamageSource(),3,GetEventDamage())
set L60=false
call EnableTrigger(t)
else
call DisableTrigger(t)
set L60=true
call XNI(GetTriggerUnit(),L1[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],3,GetEventDamage())
set L60=false
call EnableTrigger(t)
endif
endif
endif
set t=null
return false
endfunction
function UA1 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function U91))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpikeBarrier\\SpikeBarrier.mdl",XSI,"chest")))
set t=null
set XSI=null
endfunction
function UB1 takes nothing returns nothing
if GetSpellAbilityId()==1093743959 then
call UA1()
endif
endfunction
function UC1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real d=(LoadReal(ZY,(V0I),(138)))
local real x=YEI(GetUnitX(XTI)+d/10*Cos(a*bj_DEGTORAD))
local real y=YHI(GetUnitY(XTI)+d/10*Sin(a*bj_DEGTORAD))
if GetTriggerEvalCount(t)==11 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
if((LoadInteger(ZY,(GetHandleId((XTI))),((4306))))==1)==false then
call KCI(x,y,150)
call SetUnitX(XTI,x)
call SetUnitY(XTI,y)
endif
endif
set XTI=null
set t=null
return false
endfunction
function UD1 takes nothing returns nothing
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real x
local real y
local real d
local real a
local integer i=-1
local boolean UE1=false
if GetSpellTargetItem()!=null then
set XTI=GetTriggerUnit()
endif
call V5I(XTI,4414,3)
set a=GetUnitFacing(XTI)
loop
exitwhen UE1 or i==23
set i=i+1
set x=YEI(GetUnitX(XTI)+(600-i*25)*Cos(a*bj_DEGTORAD))
set y=YHI(GetUnitY(XTI)+(600-i*25)*Sin(a*bj_DEGTORAD))
if(IsPointInRegion(ZN,((x)*1.0),((y)*1.0)))==false then
set UE1=true
endif
endloop
set d=JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UC1))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveReal(ZY,(V0I),(138),((d)*1.0))
set XTI=null
set t=null
endfunction
function UF1 takes nothing returns nothing
if GetSpellAbilityId()==1093744973 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true or(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))==false then
call UD1()
endif
endif
endfunction
function UG1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEvalCount(t)>30 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(XSI,1093751107)
call UnitRemoveAbility(XSI,1110459225)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set XSI=null
set t=null
return false
endfunction
function UH1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEvalCount(t)>30 or GetTriggerEventId()==EVENT_UNIT_DEATH or((LoadInteger(ZY,(GetHandleId((XSI))),((4256))))==1)then
call UnitRemoveAbility(XSI,1097167980)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set XSI=null
set t=null
return false
endfunction
function UZ1 takes unit u returns nothing
local unit XSI=u
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call UnitAddAbility(XSI,1097167980)
call UnitMakeAbilityPermanent(XSI,true,1097167980)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1097167980,false)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UH1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
set t=null
endfunction
function EtherBlast_AddToEnemies takes nothing returns nothing
call UZ1(GetEnumUnit())
endfunction
function EtherBlast_DamageEnemies takes nothing returns nothing
call XNI(GetTriggerUnit(),GetEnumUnit(),1,L70)
endfunction
function UV1 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=OK
local unit XTI=AK
local real XPI=(LoadReal(ZY,(V0I),(20)))
local trigger t
if XSI!=XTI then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093751107,false)
call UnitAddAbility(XTI,1093751107)
call UnitMakeAbilityPermanent(XTI,true,1093751107)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UG1))
call SaveUnitHandle(ZY,(V0I),(2),(XTI))
call UZ1(XTI)
call K3I("+"+I2S(R2I(XPI)),2,XTI,0.027,3,216,120,216)
call XNI(XSI,XTI,1,XPI)
endif
call UZ1(XSI)
set XSI=null
set XTI=null
endfunction
function UW1 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t2=LII(XSI,XTI,1747993171,"UV1",1000)
local integer UX1=GetHandleId(t2)
call SaveReal(ZY,(UX1),(20),((GetHeroAgi(XSI,true)*2.0+75)*1.0))
set XSI=null
set XTI=null
set t2=null
endfunction
function UY1 takes nothing returns nothing
if GetSpellAbilityId()==1093751108 and(GetSpellTargetUnit()==GetTriggerUnit()or ZXI(GetSpellTargetUnit())==false)then
call UW1()
endif
endfunction
function UJ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEvalCount(t)>40 or GetTriggerEventId()==EVENT_UNIT_DEATH or XDI(XSI)or((LoadInteger(ZY,(GetHandleId((XSI))),((4256))))==1)then
call UnitRemoveAbility(XSI,1097167980)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set XSI=null
set t=null
return false
endfunction
function UK1 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t
local integer V0I
if XBI(XSI)==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call UnitAddAbility(XSI,1097167980)
call UnitMakeAbilityPermanent(XSI,true,1097167980)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1097167980,false)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UJ1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
endif
set XSI=null
set t=null
endfunction
function UL1 takes nothing returns nothing
if GetSpellAbilityId()==1093747011 and XDI(GetTriggerUnit())==false then
call UK1()
endif
endfunction
function UM1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real UN1=(LoadReal(ZY,(V0I),(529)))
local real US1=(LoadReal(ZY,(V0I),(530)))
local real UT1=GetUnitState(XSI,UNIT_STATE_MANA)
local real UR1=GetUnitState(XSI,UNIT_STATE_MAX_MANA)
local real UP1=(LoadReal(ZY,(V0I),(668)))
local real UQ1=GetUnitStatePercent(XSI,UNIT_STATE_MANA,UNIT_STATE_MAX_MANA)
local real UU1=(UP1-UQ1)/100
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEvalCount(t)==20*10 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if UN1<150 then
call SetUnitState(XSI,UNIT_STATE_MANA,UT1-(150-UN1-US1))
endif
else
if UU1>0 then
set UN1=UN1+UU1*UR1
if US1>0 then
if UU1*UR1>US1 then
call SetUnitState(XSI,UNIT_STATE_MANA,UT1+US1)
set US1=0
else
if US1>(UR1-UT1)then
set US1=US1-(UR1-UT1)
call SetUnitState(XSI,UNIT_STATE_MANA,UR1)
else
set US1=US1-UU1*UR1
call SetUnitState(XSI,UNIT_STATE_MANA,UT1+UU1*UR1)
endif
endif
endif
endif
set UP1=UQ1
call SaveReal(ZY,(V0I),(668),((UP1)*1.0))
call SaveReal(ZY,(V0I),(529),((UN1)*1.0))
call SaveReal(ZY,(V0I),(530),((US1)*1.0))
endif
set t=null
set XSI=null
return false
endfunction
function I0O takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real IIO=GetUnitState(XSI,UNIT_STATE_LIFE)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real UT1=GetUnitState(XSI,UNIT_STATE_MANA)
if IIO>151 then
call SetUnitState(XSI,UNIT_STATE_LIFE,IIO-150)
else
call SetUnitState(XSI,UNIT_STATE_LIFE,1)
endif
call JWI("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",XSI,"origin",2)
call SetUnitState(XSI,UNIT_STATE_MANA,UT1+150)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UM1))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(242),((GetUnitState(XSI,UNIT_STATE_MANA))*1.0))
call SaveReal(ZY,(V0I),(529),((0)*1.0))
call SaveReal(ZY,(V0I),(668),((GetUnitStatePercent(XSI,UNIT_STATE_MANA,UNIT_STATE_MAX_MANA))*1.0))
if(UT1+150)>GetUnitState(XSI,UNIT_STATE_MAX_MANA)then
call SaveReal(ZY,(V0I),(530),(((UT1+150)-GetUnitState(XSI,UNIT_STATE_MAX_MANA))*1.0))
endif
set XSI=null
endfunction
function I1O takes nothing returns nothing
if GetSpellAbilityId()==1093751096 then
call I0O()
endif
endfunction
function IOO takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x
local real y
if VLI(GetOwningPlayer(XSI))then
set x=GetRectCenterX(A4)
set y=GetRectCenterY(A4)
else
set x=GetRectCenterX(T3)
set y=GetRectCenterY(T3)
endif
call IssuePointOrder(XSI,"move",x,y)
set XSI=null
endfunction
function I2O takes nothing returns nothing
if GetSpellAbilityId()==1093747027 then
call IOO()
endif
endfunction
function I3O takes nothing returns nothing
local unit V8I=GetTriggerUnit()
call SaveBoolean(ZY,(GetHandleId(V8I)),(129),(true))
set V8I=null
endfunction
function I4O takes nothing returns nothing
if(GetSpellAbilityId()==1093681720 or GetSpellAbilityId()==1093752645)and ZXI(GetTriggerUnit())==true then
call I3O()
endif
endfunction
function I5O takes integer id returns boolean
return id==1969711215 or id==1970169187 or id==1702061422 or id==1701081721 or id==1966092337 or id==1966092338 or id==1697656918 or id==1697656919 or id==1700946284 or id==1697657398 or id==1970107511 or id==1966092370
endfunction
function I6O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>8 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if GetUnitState(XTI,UNIT_STATE_LIFE)>(150.0/8.0+0.5)then
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)-150.0/8.0)
else
set L90[GetPlayerId(GetOwningPlayer(XTI))]=true
call XNI(XSI,XTI,1,50)
set L90[GetPlayerId(GetOwningPlayer(XTI))]=false
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function I7O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and(I5O(GetUnitTypeId(GetEventDamageSource()))==false and(GetOwningPlayer(GetEventDamageSource())!=EO or GetUnitTypeId(GetEventDamageSource())==1848651852)and GetEventDamage()>0)or L80==true)then
call UnitRemoveAbility(XTI,1110459207)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function I8O takes nothing returns nothing
local trigger t
local integer V0I
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I
local integer i=0
local boolean P3I=false
local boolean UE1=false
local integer R8I
if XTI==null then
set XTI=GetTriggerUnit()
endif
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
loop
exitwhen i>5 or UE1
if RWI(UnitItemInSlot(XSI,i))==WO0 then
set R8I=GetItemCharges(UnitItemInSlot(XSI,i))
if R8I>0 then
set P3I=true
set R8I=R8I-1
else
set UE1=true
set P3I=false
endif
endif
set i=i+1
endloop
if P3I==true then
set t=CreateTrigger()
set V0I=GetHandleId(t)
if IsUnitAlly(XTI,GetOwningPlayer(XSI))==true then
call UnitAddAbility(T0I,1093750093)
call IssueTargetOrderById(T0I,852609,XTI)
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call TriggerRegisterTimerEvent(t,LA0,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function I7O))
else
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\Urn_Enemy.mdx",XTI,"overhead")))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function I6O))
endif
endif
set XSI=null
set T0I=null
set XTI=null
set t=null
endfunction
function I9O takes nothing returns nothing
if GetSpellAbilityId()==1093750095 and(IsPlayerAlly(GetOwningPlayer(GetSpellTargetUnit()),GetOwningPlayer(GetTriggerUnit()))==true or ZXI(GetSpellTargetUnit())==false)then
call I8O()
endif
endfunction
function IAO takes nothing returns nothing
local integer i=0
loop
exitwhen i>16
set L90[i]=false
set i=i+1
endloop
endfunction
function IBO takes nothing returns nothing
if NKI(GetEnumUnit())==false then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093753432,false)
call MQI(GetEnumUnit(),1093753432,1,LB0,1110459480)
endif
endfunction
function ICO takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer i=0
local boolean P3I=false
local boolean UE1=false
local integer R8I
local group g
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),925,Condition(function SCI))
call ForGroup(g,function IBO)
call ZYI(g)
set g=null
set XSI=null
endfunction
function IDO takes nothing returns nothing
if GetSpellAbilityId()==1093753431 then
call ICO()
endif
endfunction
function IEO takes unit u returns boolean
local integer VWI=GetUnitTypeId(u)
return VWI==1211122232 or VWI==1848657482 or VWI==1848657481 or VWI==1848657462 or VWI==1848657480 or VWI==1966092371
endfunction
function IFO takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),LC0)and KMI(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true)and IEO(GetFilterUnit())==false
endfunction
function IGO takes unit XSI returns boolean
local group g=ZJI()
local boolean P3I
set LC0=GetOwningPlayer(XSI)
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),975,Condition(function IFO))
set P3I=FirstOfGroup(g)!=null
call ZYI(g)
return P3I
endfunction
function IHO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group g
local integer ZLI
local boolean IZO
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetAttacker()==XSI then
call UnitRemoveAbility(XSI,1093808204)
call UnitRemoveAbility(XSI,1093808211)
call UnitRemoveAbility(XSI,1110459698)
call UnitRemoveAbility(XSI,1110456665)
if((LoadInteger(ZY,(GetHandleId((XSI))),((4302))))==1)==false then
call UnitSetUsesAltIcon(XSI,false)
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
set IZO=(LoadBoolean(ZY,(V0I),(671)))
set ZLI=(LoadInteger(ZY,(V0I),(34)))
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
set g=ZJI()
set LC0=GetOwningPlayer(XSI)
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),975,Condition(function IFO))
if GetUnitAbilityLevel(XSI,1110456665)>0 then
call SaveBoolean(ZY,(V0I),(671),(true))
elseif IZO then
call SaveBoolean(ZY,(V0I),(671),(false))
call UnitRemoveAbility(XSI,1093808204)
call KKI(XSI,1093808204)
endif
if ZLI>400 or FirstOfGroup(g)!=null then
call UnitRemoveAbility(XSI,1093808204)
call UnitRemoveAbility(XSI,1093808211)
call UnitRemoveAbility(XSI,1110459698)
call UnitRemoveAbility(XSI,1110456665)
if((LoadInteger(ZY,(GetHandleId((XSI))),((4302))))==1)==false then
call UnitSetUsesAltIcon(XSI,false)
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
call ZYI(g)
endif
set t=null
set XSI=null
set g=null
return false
endfunction
function IVO takes nothing returns nothing
local unit XSI=GetEnumUnit()
local trigger t
local integer V0I
if VSI(GetOwningPlayer(XSI))and IGO(XSI)==false then
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(XSI))==false and XJI(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(XSI,true)
endif
call KKI(XSI,1093808204)
call KKI(XSI,1093808211)
call UnitMakeAbilityPermanent(XSI,true,1093808204)
call UnitMakeAbilityPermanent(XSI,true,1093808211)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808211,false)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveInteger(ZY,(V0I),(34),(0))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveBoolean(ZY,(V0I),(671),(false))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\SmokeOfDeceit.mdx",XSI,"chest")))
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function IHO))
set t=null
endif
set XSI=null
endfunction
function IWO takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local group g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),1225,Condition(function SBI))
call ForGroup(g,function IVO)
call ZYI(g)
set XSI=null
set g=null
endfunction
function IXO takes nothing returns nothing
if GetSpellAbilityId()==1093808182 then
call IWO()
endif
endfunction
function InitTrig_Smoke_of_Deceit takes nothing returns nothing
call SetAltMinimapIcon("war3mapImported\\black.blp")
endfunction
function IYO takes nothing returns nothing
if NKI(GetEnumUnit())==false then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810246,false)
call MQI(GetEnumUnit(),1093810246,1,LD0,1110459729)
endif
endfunction
function IJO takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local group g=ZJI()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call GroupEnumUnitsInRange(g,x,y,525,Condition(function S0I))
call ForGroup(g,function IYO)
call ZYI(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\DarkLightningNova.mdx",x,y))
set XSI=null
set g=null
endfunction
function IKO takes nothing returns nothing
if GetSpellAbilityId()==1093810244 then
call IJO()
endif
endfunction
function ILO takes unit XSI,integer WJI,real x,real y returns nothing
local unit IMO=CreateUnit(GetOwningPlayer(XSI),WJI,x,y,0)
call UnitApplyTimedLife(IMO,1112820806,15)
set IMO=null
endfunction
function INO takes nothing returns nothing
local unit IMO
local real x
local real y
if GetSpellAbilityId()==1093753420 then
set x=GetDestructableX(GetSpellTargetDestructable())
set y=GetDestructableY(GetSpellTargetDestructable())
call ILO(GetTriggerUnit(),1848659021,x,y)
elseif GetSpellAbilityId()==1093753421 then
set x=GetDestructableX(GetSpellTargetDestructable())
set y=GetDestructableY(GetSpellTargetDestructable())
call ILO(GetTriggerUnit(),1848659022,x,y)
endif
set IMO=null
endfunction
function ISO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call UnitRemoveAbility(XSI,1093753418)
call UnitRemoveAbility(XTI,1093753418)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function ITO takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,7,false)
call TriggerAddCondition(t,Condition(function ISO))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call SaveUnitHandle(ZY,(V0I),(17),(GetSpellTargetUnit()))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetSpellTargetUnit(),"chest")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetTriggerUnit(),"chest")))
call UnitAddAbility(GetTriggerUnit(),1093753418)
call UnitAddAbility(GetSpellTargetUnit(),1093753418)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093753418)
call UnitMakeAbilityPermanent(GetSpellTargetUnit(),true,1093753418)
set t=null
endfunction
function IRO takes nothing returns nothing
if GetSpellAbilityId()==1093753417 and ZXI(GetSpellTargetUnit())==false then
call ITO()
endif
endfunction
function IPO takes nothing returns nothing
local unit VCI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I
if GetSpellTargetUnit()==null then
if GetSpellAbilityId()==1095331948 then
set T0I=CreateUnit(GetOwningPlayer(VCI),1697656901,GetUnitX(VCI),GetUnitY(VCI),0)
call UnitAddAbility(T0I,1093752641)
call IssueTargetOrderById(T0I,852609,VCI)
set T0I=null
elseif GetSpellAbilityId()==1095331954 then
set T0I=CreateUnit(GetOwningPlayer(VCI),1697656901,GetUnitX(VCI),GetUnitY(VCI),0)
call UnitAddAbility(T0I,1095331954)
call IssueTargetOrderById(T0I,852609,VCI)
set T0I=null
endif
endif
set VCI=null
set XTI=null
endfunction
function IQO takes nothing returns nothing
if GetSpellAbilityId()==1095331948 or GetSpellAbilityId()==1095331954 then
call IPO()
endif
endfunction
function IUO takes integer WTI returns integer
if WTI==1 then
return 25
elseif WTI==2 then
return 41
elseif WTI==3 then
return 62
elseif WTI==4 then
return 88
elseif WTI==5 then
return 119
elseif WTI==6 then
return 155
endif
return 25
endfunction
function O0O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(34)))
if(GetTriggerEventId()==EVENT_UNIT_DEATH and GetKillingUnit()==XSI)or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetUnitAbilityLevel(XTI,1110459731)>0)then
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl",GetUnitX(XTI),GetUnitY(XTI)))
call AddHeroXP(XSI,R2I(IUO(WTI)*2.5),true)
call M1I(GetOwningPlayer(XSI),XTI,190)
set E80[GetPlayerId(GetOwningPlayer(XSI))]=E80[GetPlayerId(GetOwningPlayer(XSI))]+190
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(XTI)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function OIO takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitLevel(XTI)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(34),(WTI))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function O0O))
set t=null
set XSI=null
set XTI=null
endfunction
function O1O takes nothing returns nothing
if GetSpellAbilityId()==1093810265 then
call OIO()
endif
endfunction
function OOO takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)+135)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl",GetEnumUnit(),"origin"))
endfunction
function O2O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group g=ZJI()
set OK=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),25+600,Condition(function SEI))
call ForGroup(g,function OOO)
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set g=null
set XSI=null
set t=null
return false
endfunction
function O3O takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local group g
local trigger t
if GetSpellAbilityId()==1093684023 then
if GetUnitTypeId(XSI)!=1211117642 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function O2O))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
set t=null
elseif GetUnitTypeId(XSI)==1211117642 then
call SetUnitState(XSI,UNIT_STATE_MANA,GetUnitState(XSI,UNIT_STATE_MANA)+25)
endif
endif
set XSI=null
endfunction
function O4O takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I
if GetSpellAbilityId()==1093751863 and(ZXI(GetSpellTargetUnit())==false or IsPlayerAlly(GetOwningPlayer(XSI),GetOwningPlayer(XTI))==true)then
if GetSpellTargetItem()!=null then
set XTI=GetTriggerUnit()
endif
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call UnitAddAbility(T0I,1095328633)
call IssueTargetOrder(T0I,"cyclone",XTI)
endif
set XSI=null
set XTI=null
set T0I=null
endfunction
function O5O takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1697656901 then
return false
endif
call TY1()
call R21()
call RN1()
call P41()
call PL1()
call PT1()
call PP1()
call Q11()
call Q31()
call PR1()
call Q71()
call QB1()
call QH1()
call QM1()
call QW1()
call UI1()
call QN1()
call NQ1()
call NR1()
call U71()
call U81()
call UB1()
call UF1()
call UL1()
call I2O()
call P01()
call Q61()
call I4O()
call I9O()
call I1O()
call UY1()
call O4O()
call O3O()
call O1O()
call IQO()
call IRO()
call INO()
call IDO()
call IXO()
call IKO()
return false
endfunction
function O7O takes unit V8I returns nothing
call SetUnitState(V8I,UNIT_STATE_LIFE,GetUnitState(V8I,UNIT_STATE_MAX_LIFE))
call SetUnitState(V8I,UNIT_STATE_MANA,GetUnitState(V8I,UNIT_STATE_MAX_MANA))
endfunction
function O8O takes unit V8I,real x,real y returns nothing
local integer V0I=GetHandleId(GetOwningPlayer(V8I))
local unit OI1=(LoadUnitHandle(ZY,(V0I),(700)))
local unit O11=(LoadUnitHandle(ZY,(V0I),(701)))
local unit OO1=(LoadUnitHandle(ZY,(V0I),(702)))
local unit O21=(LoadUnitHandle(ZY,(V0I),(703)))
set LE0=true
if OI1!=null then
call ReviveHero(OI1,x,y,true)
call O7O(OI1)
call IJ1(OI1)
call SetUnitX(OI1,x)
call SetUnitY(OI1,y)
endif
if O11!=null then
call ReviveHero(O11,x,y,true)
call O7O(O11)
call IJ1(O11)
call SetUnitX(O11,x)
call SetUnitY(O11,y)
endif
if OO1!=null then
call ReviveHero(OO1,x,y,true)
call O7O(OO1)
call IJ1(OO1)
call SetUnitX(OO1,x)
call SetUnitY(OO1,y)
endif
if O21!=null then
call ReviveHero(O21,x,y,true)
call O7O(O21)
call IJ1(O21)
call SetUnitX(O21,x)
call SetUnitY(O21,y)
endif
set OI1=null
set O11=null
set OO1=null
set O21=null
endfunction
function O9O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
call O7O(V8I)
call IJ1(V8I)
call ClearSelectionForPlayer(GetOwningPlayer(V8I))
call SelectUnitAddForPlayer(V8I,GetOwningPlayer(V8I))
if GetUnitTypeId(V8I)==1211117641 then
call O8O(V8I,GetUnitX(V8I),GetUnitY(V8I))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function OAO takes unit V8I,real x,real y returns nothing
local integer V0I=GetHandleId(GetOwningPlayer(V8I))
local unit OI1=(LoadUnitHandle(ZY,(V0I),(700)))
local unit O11=(LoadUnitHandle(ZY,(V0I),(701)))
local unit OO1=(LoadUnitHandle(ZY,(V0I),(702)))
local unit O21=(LoadUnitHandle(ZY,(V0I),(703)))
call DisableTrigger(UF)
if OI1!=null then
call SetUnitX(OI1,x)
call SetUnitY(OI1,y)
call KillUnit(OI1)
endif
if O11!=null then
call SetUnitX(O11,x)
call SetUnitY(O11,y)
call KillUnit(O11)
endif
if OO1!=null then
call SetUnitX(OO1,x)
call SetUnitY(OO1,y)
call KillUnit(OO1)
endif
if O21!=null then
call SetUnitX(O21,x)
call SetUnitY(O21,y)
call KillUnit(O21)
endif
call EnableTrigger(UF)
set OI1=null
set O11=null
set OO1=null
endfunction
function OBO takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local real x
local real y
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call P7I("AegisOff",GetPlayerId(GetOwningPlayer(V8I)))
if GetUnitTypeId(V8I)==1211117641 then
call OAO(V8I,GetUnitX(V8I),GetUnitY(V8I))
endif
set EQ0=null
call TriggerRegisterTimerEvent(t,5,false)
call TriggerAddCondition(t,Condition(function O9O))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call V5I(V8I,4304,5)
set t=null
set V8I=null
endfunction
function OCO takes nothing returns nothing
if RWI(GetManipulatedItem())==ZX0 then
call OBO()
endif
endfunction
function ODO takes nothing returns nothing
local unit VCI=GetTriggerUnit()
local item MCI=GetManipulatedItem()
local integer TTI=RWI(MCI)
local integer P0I
call DisableTrigger(JX0)
if GetUnitTypeId(VCI)!=1211117642 then
if TTI==HY0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
call DisableTrigger(JX0)
set CK=RQI(VCI,F20[HJ0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==HJ0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
call DisableTrigger(JX0)
set CK=RQI(VCI,F20[HK0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==HK0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
call DisableTrigger(JX0)
set CK=RQI(VCI,F20[HY0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
endif
call EnableTrigger(JX0)
set VCI=null
set MCI=null
endfunction
function OEO takes nothing returns nothing
local unit VCI=GetTriggerUnit()
local item MCI=GetManipulatedItem()
local integer TTI=RWI(MCI)
local integer P0I
call DisableTrigger(JX0)
if TTI==HV0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[HW0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==HW0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[HV0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
if TTI==V20 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[V30],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==V30 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[V20],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
call EnableTrigger(JX0)
set VCI=null
set MCI=null
endfunction
function OFO takes nothing returns nothing
local unit VCI=GetTriggerUnit()
local item MCI=GetManipulatedItem()
local integer TTI=RWI(MCI)
local integer P0I
call DisableTrigger(JX0)
if TTI==V40 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[V50],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==V50 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[V40],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
call EnableTrigger(JX0)
set VCI=null
set MCI=null
endfunction
function OGO takes nothing returns nothing
local unit VCI=GetTriggerUnit()
local item MCI=GetManipulatedItem()
local integer TTI=RWI(MCI)
local integer P0I
call DisableTrigger(JX0)
if TTI==ZO0 and GetItemCharges(MCI)==0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[Z30],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==Z20 and GetItemCharges(MCI)==0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[Z40],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
elseif TTI==HO0 and GetItemCharges(MCI)==0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[H20],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
endif
call EnableTrigger(JX0)
set VCI=null
set MCI=null
endfunction
function OHO takes nothing returns nothing
local unit VCI=GetTriggerUnit()
local item MCI=GetManipulatedItem()
local integer TTI=RWI(MCI)
local integer P0I
call DisableTrigger(JX0)
if TTI==ZF0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[ZG0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call MS1(CK)
elseif TTI==ZG0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[ZH0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call MS1(CK)
elseif TTI==ZH0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[ZZ0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call MS1(CK)
elseif TTI==ZZ0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[ZV0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call MS1(CK)
elseif TTI==ZV0 then
set P0I=MBI(VCI,MCI)
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(MCI)
set CK=RQI(VCI,F20[ZW0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call MS1(CK)
endif
call EnableTrigger(JX0)
set VCI=null
set MCI=null
endfunction
function OZO takes nothing returns boolean
local integer P0I
local real OVO
call DisableTrigger(JX0)
if RWI(GetManipulatedItem())==VK0 then
set OVO=GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)
set P0I=MBI(GetTriggerUnit(),GetManipulatedItem())
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(GetManipulatedItem())
set CK=RQI(GetTriggerUnit(),F20[VJ0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,YQI(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-OVO,1))
call V5I(GetTriggerUnit(),4298,0.04)
endif
if RWI(GetManipulatedItem())==VJ0 then
set OVO=GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)
set P0I=MBI(GetTriggerUnit(),GetManipulatedItem())
set GK=GetItemPlayer(GetManipulatedItem())
call RemoveItem(GetManipulatedItem())
set CK=RQI(GetTriggerUnit(),F20[VK0],P0I)
call SetItemPlayer(CK,GK,false)
call SetItemUserData(CK,1)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,YQI(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-OVO,1))
endif
call EnableTrigger(JX0)
return false
endfunction
function PerseveranceDisassemble takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local player p=GetItemPlayer(GetManipulatedItem())
local item R9I
call DisableTrigger(JX0)
call RemoveItem(GetManipulatedItem())
set R9I=UnitAddItemById(V8I,F20[G60])
call SetItemPlayer(R9I,p,false)
call SetItemUserData(R9I,1)
set R9I=UnitAddItemById(V8I,F20[GZ0])
call SetItemPlayer(R9I,p,false)
call SetItemUserData(R9I,1)
call EnableTrigger(JX0)
set V8I=null
set p=null
set R9I=null
endfunction
function OWO takes nothing returns nothing
if GetItemTypeId(GetManipulatedItem())==F20[HG0]then
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848657713))
endif
endfunction
function OXO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if TC1(XSI)then
call UnitAddItemById(XSI,1227901005)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SaveBoolean(ZY,(GetHandleId(XSI)),(129),(false))
set t=null
set XSI=null
return false
endfunction
function OYO takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local item MCI=GetManipulatedItem()
local integer TTI=RWI(MCI)
local trigger t
if(TTI==ZY0 or TTI==ZJ0)and(LoadBoolean(ZY,(GetHandleId(XSI)),(129)))==true then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.41,false)
call TriggerAddCondition(t,Condition(function OXO))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
set t=null
endif
set XSI=null
set MCI=null
endfunction
function OJO takes nothing returns boolean
local real x
local real y
local real a
call OEO()
call OFO()
call ODO()
call TM1()
call OCO()
call OZO()
call OWO()
call OHO()
call OGO()
call OYO()
return false
endfunction
function OLO takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())==EO
endfunction
function OMO takes nothing returns nothing
call SaveInteger(ZY,(400+GetPlayerId(GetOwningPlayer(GetKillingUnit()))),(79),((LoadInteger(ZY,(400+GetPlayerId(GetOwningPlayer(GetKillingUnit()))),(79)))+1))
endfunction
function OSO takes nothing returns nothing
local location YV1=GetRectCenter(Q4)
set N0=CreateUnitAtLoc(Player(12),1848651852,YV1,bj_UNIT_FACING)
call SetUnitAcquireRange(N0,150)
call Y91(N0)
call RemoveLocation(YV1)
call UnitAddItem(N0,CreateItem(F20[ZX0],0,0))
call UnitAddAbility(N0,1093743666)
set YV1=GetRectCenter(Z4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(V4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(W4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(X4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(Y4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(J4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(K4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(L4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(M4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(N4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(W5)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(Y5)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
endfunction
function InitTrig_Spawn_Roshan takes nothing returns nothing
call OSO()
endfunction
function OTO takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==CO[0]then
call IssuePointOrderLoc(GetTriggerUnit(),"attack",U0)
elseif GetOwningPlayer(GetTriggerUnit())==DO[0]then
call IssuePointOrderLoc(GetTriggerUnit(),"attack",BI)
endif
return false
endfunction
function OPO takes nothing returns nothing
set TI=TI+1
endfunction
function OUO takes nothing returns nothing
set SI=SI+1
endfunction
function AIO takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==CO[0]then
call IssuePointOrderLoc(GetTriggerUnit(),"attack",CI)
endif
return false
endfunction
function A2O takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==DO[0]then
call IssuePointOrderLoc(GetTriggerUnit(),"attack",CI)
endif
return false
endfunction
function A4O takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==CO[0]then
call IssuePointOrderLoc(GetTriggerUnit(),"attack",DI)
endif
return false
endfunction
function A6O takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==DO[0]then
call IssuePointOrderLoc(GetTriggerUnit(),"attack",DI)
endif
return false
endfunction
function A8O takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==CO[0]then
call IssuePointOrderLoc(GetTriggerUnit(),"attack",EI)
endif
return false
endfunction
function AAO takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==DO[0]then
call IssuePointOrderLoc(GetTriggerUnit(),"attack",EI)
endif
return false
endfunction
function ACO takes nothing returns nothing
local integer i=1
local integer id
loop
exitwhen i>5
set id=GetPlayerId(CO[i])
call P7I("CSK"+I2S(id),A[id])
call P7I("CSD"+I2S(id),B[id])
call P7I("NK"+I2S(id),(LoadInteger(ZY,(400+id),(79))))
set id=GetPlayerId(DO[i])
call P7I("CSK"+I2S(id),A[id])
call P7I("CSD"+I2S(id),B[id])
call P7I("NK"+I2S(id),(LoadInteger(ZY,(400+id),(79))))
set i=i+1
endloop
endfunction
function ADO takes boolean AEO returns nothing
local unit u
local string AFO="stand work alternate"
local string AGO="stand work"
local string AHO="stand alternate"
local string AZO="stand"
set u=I40
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AFO)
else
call SetUnitAnimation(u,AHO)
endif
endif
set u=I50
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AFO)
else
call SetUnitAnimation(u,AHO)
endif
endif
set u=I60
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AFO)
else
call SetUnitAnimation(u,AHO)
endif
endif
set u=I70
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AFO)
else
call SetUnitAnimation(u,AHO)
endif
endif
set u=I80
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AFO)
else
call SetUnitAnimation(u,AHO)
endif
endif
set u=I90
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AFO)
else
call SetUnitAnimation(u,AHO)
endif
endif
set u=BR0
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AGO)
else
call SetUnitAnimation(u,AZO)
endif
endif
set u=BP0
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AGO)
else
call SetUnitAnimation(u,AZO)
endif
endif
set u=BQ0
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AGO)
else
call SetUnitAnimation(u,AZO)
endif
endif
set u=BU0
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AGO)
else
call SetUnitAnimation(u,AZO)
endif
endif
set u=C00
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AGO)
else
call SetUnitAnimation(u,AZO)
endif
endif
set u=CI0
if KMI(u)==false then
if AEO then
call SetUnitAnimation(u,AGO)
else
call SetUnitAnimation(u,AZO)
endif
endif
endfunction
function AVO takes nothing returns boolean
call ADO(true)
return false
endfunction
function Trig_Spawn_Conditions takes nothing returns boolean
return true
if(QO0)then
return Q20
endif
if(Q60)then
return Q70
endif
if(F2)then
return E2
endif
if R30 then
return R40
endif
if(S2)then
return O3
endif
if(K0)then
return SR0
endif
if(PW0)then
return PX0
endif
if(RM)then
return T00
endif
return O0
endfunction
function AWO takes group AXO,integer AYO returns nothing
local unit u
loop
set u=FirstOfGroup(AXO)
exitwhen(u==null)
call GroupRemoveUnit(AXO,u)
call SetUnitAbilityLevel(u,O2,AYO)
endloop
endfunction
function AJO takes nothing returns nothing
local boolean AKO=ModuloInteger(GetTriggerExecCount(BG),7)==0
if NK0 then
return
endif
call ADO(false)
if AKO then
call ACO()
endif
if GetTriggerExecCount(BG)==1 and QC0==false then
call UnitResetCooldown(CL0[1])
call UnitResetCooldown(CL0[2])
call UnitResetCooldown(CL0[3])
call UnitResetCooldown(CL0[4])
call UnitResetCooldown(CL0[5])
call UnitResetCooldown(CL0[7])
call UnitResetCooldown(CL0[8])
call UnitResetCooldown(CL0[9])
call UnitResetCooldown(CL0[10])
call UnitResetCooldown(CL0[11])
call NLI(TQ,false)
call NLI(RQ,false)
call NLI(PQ,false)
call NLI(BV0,false)
call NLI(BW0,false)
call NLI(BX0,false)
elseif GetTriggerExecCount(BG)==1 and QC0==true then
call NLI(RQ,false)
call NLI(BW0,false)
endif
if GetTriggerExecCount(BG)==1 then
call EnableTrigger(E40)
endif
if QC0==false and QH0==false then
if(ZI)then
call CreateNUnitsAtLoc(SI,1969711215,DO[0],PI,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(SI,1966092337,DO[0],PI,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,2)
endif
if QG0==false then
if(VI)then
call CreateNUnitsAtLoc(SI,1969711215,DO[0],RI,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(SI,1966092337,DO[0],RI,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,3)
endif
if QC0==false and QE0==false then
if(WI)then
call CreateNUnitsAtLoc(SI,1969711215,DO[0],QI,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(SI,1966092337,DO[0],QI,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,4)
endif
if QC0==false and QH0==false then
if(FI)then
call CreateNUnitsAtLoc(TI,1970169187,DO[0],O1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1966092338,DO[0],O1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,2)
endif
if QG0==false then
if(GI)then
call CreateNUnitsAtLoc(TI,1970169187,DO[0],UI,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1966092338,DO[0],UI,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,3)
endif
if QC0==false and QE0==false then
if(HI)then
call CreateNUnitsAtLoc(TI,1970169187,DO[0],I1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1966092338,DO[0],I1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,4)
endif
if AKO==true then
if QC0==false and QH0==false then
if(FI)then
call CreateNUnitsAtLoc(TI,1970107511,DO[0],O1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1966092370,DO[0],O1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,2)
endif
if QG0==false then
if(GI)then
call CreateNUnitsAtLoc(TI,1970107511,DO[0],UI,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1966092370,DO[0],UI,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,3)
endif
if QC0==false and QE0==false then
if(HI)then
call CreateNUnitsAtLoc(TI,1970107511,DO[0],I1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1966092370,DO[0],I1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,4)
endif
endif
if QC0==false and QH0==false then
if(KI)then
call CreateNUnitsAtLoc(SI,1702061422,CO[0],C1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(SI,1697656918,CO[0],C1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,2)
endif
if QG0==false then
if(LI)then
call CreateNUnitsAtLoc(SI,1702061422,CO[0],A1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(SI,1697656918,CO[0],A1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,3)
endif
if QC0==false and QE0==false then
if(NI)then
call CreateNUnitsAtLoc(SI,1702061422,CO[0],B1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(SI,1697656918,CO[0],B1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,4)
endif
if QC0==false and QH0==false then
if(XI)then
call CreateNUnitsAtLoc(TI,1701081721,CO[0],F1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1697656919,CO[0],F1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,2)
endif
if QG0==false then
if(YI)then
call CreateNUnitsAtLoc(TI,1701081721,CO[0],D1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1697656919,CO[0],D1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,3)
endif
if QC0==false and QE0==false then
if(JI)then
call CreateNUnitsAtLoc(TI,1701081721,CO[0],E1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1697656919,CO[0],E1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,4)
endif
if AKO==true then
if QC0==false and QH0==false then
if(JI)then
call CreateNUnitsAtLoc(TI,1700946284,CO[0],F1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1697657398,CO[0],F1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,2)
endif
if QG0==false then
if(YI)then
call CreateNUnitsAtLoc(TI,1700946284,CO[0],D1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1697657398,CO[0],D1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,3)
endif
if QC0==false and QE0==false then
if(JI)then
call CreateNUnitsAtLoc(TI,1700946284,CO[0],E1,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(TI,1697657398,CO[0],E1,bj_UNIT_FACING)
endif
call AWO(bj_lastCreatedGroup,4)
endif
endif
endfunction
function AMO takes nothing returns nothing
set FI=false
call DisableTrigger(CG)
call P7I("Rax"+I2S(0)+I2S(0)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function ASO takes nothing returns nothing
set GI=false
call DisableTrigger(DG)
call P7I("Rax"+I2S(0)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function ARO takes nothing returns nothing
set HI=false
call DisableTrigger(EG)
call P7I("Rax"+I2S(0)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function AQO takes nothing returns nothing
set ZI=false
call DisableTrigger(FG)
call P7I("Rax"+I2S(0)+I2S(0)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function B0O takes nothing returns nothing
set VI=false
call DisableTrigger(GG)
call P7I("Rax"+I2S(0)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function B1O takes nothing returns nothing
set WI=false
call DisableTrigger(HG)
call P7I("Rax"+I2S(0)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function B2O takes nothing returns nothing
set XI=false
call DisableTrigger(ZG)
call P7I("Rax"+I2S(1)+I2S(0)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function B4O takes nothing returns nothing
set YI=false
call DisableTrigger(VG)
call P7I("Rax"+I2S(1)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function B6O takes nothing returns nothing
set JI=false
call DisableTrigger(WG)
call P7I("Rax"+I2S(1)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function B8O takes nothing returns nothing
set KI=false
call DisableTrigger(XG)
call P7I("Rax"+I2S(1)+I2S(0)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function BAO takes nothing returns nothing
set LI=false
call DisableTrigger(YG)
call P7I("Rax"+I2S(1)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function BCO takes nothing returns nothing
set NI=false
call DisableTrigger(JG)
call P7I("Rax"+I2S(1)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function BEO takes nothing returns boolean
local real BFO=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
if BFO<0.75 and LY0==false then
set LY0=true
call P7I("Tree",75)
endif
if BFO<0.50 and LX0==false then
set LX0=true
call P7I("Tree",50)
endif
if BFO<0.25 and LW0==false then
set LW0=true
call P7I("Tree",25)
endif
if BFO<0.10 and LV0==false then
set LV0=true
call P7I("Tree",10)
endif
return false
endfunction
function BGO takes nothing returns boolean
local real BFO=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
if BFO<0.75 and LZ0==false then
set LZ0=true
call P7I("Throne",75)
endif
if BFO<0.50 and LH0==false then
set LH0=true
call P7I("Throne",50)
endif
if BFO<0.25 and LG0==false then
set LG0=true
call P7I("Throne",25)
endif
if BFO<0.10 and LF0==false then
set LF0=true
call P7I("Throne",10)
endif
return false
endfunction
function BZO takes nothing returns boolean
if(KI or LI or NI or XI or YI or JI)then
return false
endif
return true
endfunction
function BVO takes nothing returns nothing
call JDI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848652879)+" "+GetObjectName(1848656695))
call SetPlayerTechResearchedSwap(1378889796,(GetPlayerTechCountSimple(1378889796,CO[0])+30),CO[0])
call SetPlayerTechResearchedSwap(1378889795,(GetPlayerTechCountSimple(1378889795,CO[0])+30),CO[0])
call DisableTrigger(KG)
endfunction
function BXO takes nothing returns boolean
if(ZI or VI or WI or FI or GI or HI)then
return false
endif
return true
endfunction
function BYO takes nothing returns nothing
call JDI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848652888)+" "+GetObjectName(1848656697))
call SetPlayerTechResearchedSwap(1378889785,(GetPlayerTechCountSimple(1378889785,DO[0])+30),DO[0])
call SetPlayerTechResearchedSwap(1378889794,(GetPlayerTechCountSimple(1378889794,DO[0])+30),DO[0])
call DisableTrigger(LG)
endfunction
function BKO takes nothing returns nothing
call SetPlayerTechResearchedSwap(1378889783,(GetPlayerTechCountSimple(1378889783,CO[0])+1),CO[0])
call SetPlayerTechResearchedSwap(1378889795,(GetPlayerTechCountSimple(1378889795,CO[0])+1),CO[0])
call SetPlayerTechResearchedSwap(1378889784,(GetPlayerTechCountSimple(1378889784,CO[0])+1),CO[0])
call SetPlayerTechResearchedSwap(1378889796,(GetPlayerTechCountSimple(1378889796,CO[0])+1),CO[0])
call SetPlayerTechResearchedSwap(1378889785,(GetPlayerTechCountSimple(1378889785,DO[0])+1),DO[0])
call SetPlayerTechResearchedSwap(1378889779,(GetPlayerTechCountSimple(1378889779,DO[0])+1),DO[0])
call SetPlayerTechResearchedSwap(1378889793,(GetPlayerTechCountSimple(1378889793,DO[0])+1),DO[0])
call SetPlayerTechResearchedSwap(1378889794,(GetPlayerTechCountSimple(1378889794,DO[0])+1),DO[0])
endfunction
function BMO takes nothing returns nothing
local location YV1=GetRectCenter(J5)
call RemoveUnit(CreateUnitAtLoc(EO,1851941999,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1851942003,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852273524,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1848652342,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852270450,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1851941995,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1851946861,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852794733,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852796263,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852207203,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852207221,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1853060200,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1853060204,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1853055348,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1853320295,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852534636,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852534626,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852534644,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852010091,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852007790,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852272243,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852208226,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852207976,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852270641,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852860012,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852798821,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852798818,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852666477,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852666482,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852666476,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852077170,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1852077175,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1848659011,YV1,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(EO,1848659012,YV1,bj_UNIT_FACING))
call RemoveLocation(YV1)
endfunction
function BSO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1848658007,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1848658008,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1848658007,x,y,0),x,y)
endfunction
function BTO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852466993,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852466993,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852467041,x,y,0),x,y)
endfunction
function BRO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1851941999,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1851941999,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1851942003,x,y,0),x,y)
endfunction
function BPO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1851941995,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1851941995,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1851946861,x,y,0),x,y)
endfunction
function BQO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852273524,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852273524,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852270450,x,y,0),x,y)
endfunction
function AncientLizards_AI takes nothing returns boolean
call ZSI(GetTriggeringTrigger())
call IssueTargetOrder(GetTriggerUnit(),"unholyfrenzy",GetTriggerUnit())
return false
endfunction
function BUO takes real x,real y returns nothing
local unit u
set u=CreateUnit(EO,1848659011,x,y,0)
call SetUnitPosition(u,x,y)
call SetUnitPosition(CreateUnit(EO,1848659012,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1848659012,x,y,0),x,y)
set u=null
endfunction
function C0O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852794733,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852794733,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852796263,x,y,0),x,y)
endfunction
function CIO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852207203,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852207221,x,y,0),x,y)
endfunction
function C1O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1853060200,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1853055348,x,y,0),x,y)
endfunction
function COO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1853055348,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1853055348,x,y,0),x,y)
endfunction
function C2O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1853320295,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1853320295,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1848651859,x,y,0),x,y)
endfunction
function C3O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1848652342,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1848652342,x,y,0),x,y)
endfunction
function C4O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852534636,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852534644,x,y,0),x,y)
endfunction
function C5O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852207976,x,y,0),x,y)
endfunction
function C6O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852007790,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852010091,x,y,0),x,y)
endfunction
function C7O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852272243,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852272243,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852272243,x,y,0),x,y)
endfunction
function C8O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852534636,x,y,0),x,y)
endfunction
function C9O takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852270641,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852860012,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852860012,x,y,0),x,y)
endfunction
function CAO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852798821,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852798818,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852798818,x,y,0),x,y)
endfunction
function CBO takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(EO,1852077170,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852077170,x,y,0),x,y)
call SetUnitPosition(CreateUnit(EO,1852077175,x,y,0),x,y)
endfunction
function CCO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call CIO(x,y)
elseif HWI==2 then
call C1O(x,y)
elseif HWI==3 then
call CAO(x,y)
elseif HWI==4 then
call CBO(x,y)
elseif HWI==5 then
call C6O(x,y)
endif
endfunction
function CDO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call CIO(x,y)
elseif HWI==2 then
call C1O(x,y)
elseif HWI==3 then
call CAO(x,y)
elseif HWI==4 then
call CBO(x,y)
elseif HWI==5 then
call C6O(x,y)
endif
endfunction
function CEO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call CIO(x,y)
elseif HWI==2 then
call C1O(x,y)
elseif HWI==3 then
call CAO(x,y)
elseif HWI==4 then
call CBO(x,y)
elseif HWI==5 then
call C6O(x,y)
endif
endfunction
function CFO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call CIO(x,y)
elseif HWI==2 then
call C1O(x,y)
elseif HWI==3 then
call CAO(x,y)
elseif HWI==4 then
call CBO(x,y)
elseif HWI==5 then
call C6O(x,y)
endif
endfunction
function CGO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call C3O(x,y)
elseif HWI==2 then
call C0O(x,y)
elseif HWI==3 then
call COO(x,y)
elseif HWI==4 then
call C2O(x,y)
elseif HWI==5 then
call C6O(x,y)
endif
endfunction
function CHO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call C3O(x,y)
elseif HWI==2 then
call C0O(x,y)
elseif HWI==3 then
call COO(x,y)
elseif HWI==4 then
call C2O(x,y)
elseif HWI==5 then
call C6O(x,y)
endif
endfunction
function CZO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call C3O(x,y)
elseif HWI==2 then
call C0O(x,y)
elseif HWI==3 then
call COO(x,y)
elseif HWI==4 then
call C2O(x,y)
elseif HWI==5 then
call C6O(x,y)
endif
endfunction
function CVO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call C3O(x,y)
elseif HWI==2 then
call C0O(x,y)
elseif HWI==3 then
call COO(x,y)
elseif HWI==4 then
call C2O(x,y)
elseif HWI==5 then
call C6O(x,y)
endif
endfunction
function CWO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,6)
if HWI==1 then
call C9O(x,y)
elseif HWI==2 then
call C8O(x,y)
elseif HWI==3 then
call C7O(x,y)
elseif HWI==4 then
call C4O(x,y)
elseif HWI==5 then
call C5O(x,y)
elseif HWI==6 then
call BSO(x,y)
endif
endfunction
function CXO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,6)
if HWI==1 then
call C9O(x,y)
elseif HWI==2 then
call C8O(x,y)
elseif HWI==3 then
call C7O(x,y)
elseif HWI==4 then
call C4O(x,y)
elseif HWI==5 then
call C5O(x,y)
elseif HWI==6 then
call BSO(x,y)
endif
endfunction
function CYO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call BTO(x,y)
elseif HWI==2 then
call BRO(x,y)
elseif HWI==3 then
call BPO(x,y)
elseif HWI==4 then
call BQO(x,y)
elseif HWI==5 then
call BUO(x,y)
endif
endfunction
function CJO takes real x,real y returns nothing
local integer HWI=GetRandomInt(1,5)
if HWI==1 then
call BTO(x,y)
elseif HWI==2 then
call BRO(x,y)
elseif HWI==3 then
call BPO(x,y)
elseif HWI==4 then
call BQO(x,y)
elseif HWI==5 then
call BUO(x,y)
endif
endfunction
function CKO takes nothing returns nothing
if GetUnitAbilityLevel(GetEnumUnit(),1093685300)!=0 then
call GroupRemoveUnit(C2,GetEnumUnit())
endif
if GetUnitTypeId(GetEnumUnit())==1865429043 then
call GroupRemoveUnit(C2,GetEnumUnit())
endif
if KMI(GetEnumUnit())==true then
call GroupRemoveUnit(C2,GetEnumUnit())
endif
endfunction
function CLO takes group g returns boolean
set C2=g
call ForGroup(g,function CKO)
return FirstOfGroup(g)==null
endfunction
function CMO takes nothing returns boolean
local group g
local rect r1
local rect r2
if QD0==false then
return false
endif
set r1=U4
set r2=Z4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CYO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=I5
set r2=V4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CJO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=O5
set r2=W4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CCO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=A5
set r2=X4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CEO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=B5
set r2=Y4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CHO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=C5
set r2=J4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CGO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=D5
set r2=K4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CZO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=F5
set r2=L4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CVO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=E5
set r2=M4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CFO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=G5
set r2=N4
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CWO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=V5
set r2=W5
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CXO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=X5
set r2=Y5
set g=ZJI()
call GroupEnumUnitsInRect(g,r1,Condition(function HRI))
if CLO(g)then
call CDO(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZYI(g)
set r1=null
set r2=null
set g=null
return false
endfunction
function CSO takes nothing returns nothing
local integer WCI=GetRandomInt(1,9)
local location l
if QC0 then
set WCI=GetRandomInt(1,3)
if WCI==1 then
set WCI=2
endif
if WCI==2 then
set WCI=5
endif
if WCI==3 then
set WCI=8
endif
endif
if(WCI==1)then
set l=GetRectCenter(RA)
call CreateNUnitsAtLoc(1,1848651827,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653105))
call AWO(bj_lastCreatedGroup,4)
endif
if(WCI==2)then
set l=GetRectCenter(TA)
call CreateNUnitsAtLoc(1,1848651827,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653106))
call AWO(bj_lastCreatedGroup,2)
endif
if(WCI==3)then
set l=GetRectCenter(SA)
call CreateNUnitsAtLoc(1,1848651827,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653107))
call AWO(bj_lastCreatedGroup,3)
endif
if(WCI==4)then
set l=GetRectCenter(RA)
call CreateNUnitsAtLoc(1,1848651845,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653112))
call AWO(bj_lastCreatedGroup,4)
endif
if(WCI==5)then
set l=GetRectCenter(TA)
call CreateNUnitsAtLoc(1,1848651845,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848652890))
call AWO(bj_lastCreatedGroup,2)
endif
if(WCI==6)then
set l=GetRectCenter(SA)
call CreateNUnitsAtLoc(1,1848651845,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653111))
call AWO(bj_lastCreatedGroup,3)
endif
if(WCI==7)and QC0==false then
set l=GetRectCenter(RA)
call CreateNUnitsAtLoc(1,1848651844,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653110))
call AWO(bj_lastCreatedGroup,4)
endif
if(WCI==8)and QC0==false then
set l=GetRectCenter(TA)
call CreateNUnitsAtLoc(1,1848651844,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848652884))
call AWO(bj_lastCreatedGroup,2)
endif
if(WCI==9)then
set l=GetRectCenter(SA)
call CreateNUnitsAtLoc(1,1848651844,CO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653123))
call AWO(bj_lastCreatedGroup,3)
endif
if(WCI==1)then
set l=GetRectCenter(MA)
call CreateNUnitsAtLoc(1,1848651827,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656708))
call AWO(bj_lastCreatedGroup,4)
endif
if(WCI==2)then
set l=GetRectCenter(LA)
call CreateNUnitsAtLoc(1,1848651827,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656709))
call AWO(bj_lastCreatedGroup,2)
endif
if(WCI==3)then
set l=GetRectCenter(NA)
call CreateNUnitsAtLoc(1,1848651827,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656707))
call AWO(bj_lastCreatedGroup,3)
endif
if(WCI==4)then
set l=GetRectCenter(MA)
call CreateNUnitsAtLoc(1,1848651845,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656711))
call AWO(bj_lastCreatedGroup,4)
endif
if(WCI==5)then
set l=GetRectCenter(LA)
call CreateNUnitsAtLoc(1,1848651845,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656712))
call AWO(bj_lastCreatedGroup,2)
endif
if(WCI==6)then
set l=GetRectCenter(NA)
call CreateNUnitsAtLoc(1,1848651845,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656710))
call AWO(bj_lastCreatedGroup,3)
endif
if(WCI==7)then
set l=GetRectCenter(MA)
call CreateNUnitsAtLoc(1,1848651844,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656714))
call AWO(bj_lastCreatedGroup,4)
endif
if(WCI==8)then
set l=GetRectCenter(LA)
call CreateNUnitsAtLoc(1,1848651844,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656715))
call AWO(bj_lastCreatedGroup,2)
endif
if(WCI==9)then
set l=GetRectCenter(NA)
call CreateNUnitsAtLoc(1,1848651844,DO[0],l,bj_UNIT_FACING)
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656713))
call AWO(bj_lastCreatedGroup,3)
endif
endfunction
function CRO takes nothing returns nothing
local integer W5I
local integer W6I
local integer CPO
local integer CQO
local integer i
local player p
set LL0=LL0+1
set LS0=0
set LT0=0
set i=0
loop
exitwhen i>5
set p=CO[i]
if VPI(p)then
set LS0=LS0+1
endif
set p=DO[i]
if VPI(p)then
set LT0=LT0+1
endif
set i=i+1
endloop
if JM==false then
set M1=LS0
set N1=LT0
endif
set W5I=1
set W6I=5
set CPO=1
loop
exitwhen W5I>W6I
set p=CO[W5I]
if VPI(p)then
set S1[CPO]=p
set CPO=CPO+1
endif
set W5I=W5I+1
endloop
set W5I=1
set W6I=5
set CPO=1
loop
exitwhen W5I>W6I
set p=DO[W5I]
if VPI(p)then
set T1[CPO]=p
set CPO=CPO+1
endif
set W5I=W5I+1
endloop
if LL0==1 then
set M0=CreateMultiboardBJ(7+6,3+LT0+LS0," ")
call MultiboardMinimize(M0,true)
endif
call ZII(M0,2,1,"CD")
call ZII(M0,3,1,"|c00838B8BL|r")
call ZII(M0,4,1,LR0+"K|r")
call ZII(M0,5,1,LQ0+"D|r")
call ZII(M0,6,1,LU0+"A|r")
call ZII(M0,1,2,GetObjectName(1848656971))
call ZII(M0,4,2,LR0+"0|r")
call ZII(M0,5,2,LQ0+"0|r")
call ZII(M0,1,3+LS0,GetObjectName(1848656975))
call ZII(M0,4,3+LS0,LR0+"0|r")
call ZII(M0,5,3+LS0,LQ0+"0|r")
call Z8I(M0,1,2,(WHI(SubString(C0[GetPlayerId((CO[0]))],4,6)))/255.0*100,(WHI(SubString(C0[GetPlayerId((CO[0]))],6,8)))/255.0*100,(WHI(SubString(C0[GetPlayerId((CO[0]))],8,10)))/255.0*100,0)
call Z8I(M0,1,3+LS0,(WHI(SubString(C0[GetPlayerId((DO[0]))],4,6)))/255.0*100,(WHI(SubString(C0[GetPlayerId((DO[0]))],6,8)))/255.0*100,(WHI(SubString(C0[GetPlayerId((DO[0]))],8,10)))/255.0*100,0)
set W5I=1
set W6I=3+LT0+LS0
loop
exitwhen W5I>W6I
call ZDI(M0,1,W5I,10.8)
call ZDI(M0,2,W5I,2)
call ZDI(M0,3,W5I,2)
call ZDI(M0,4,W5I,1.3)
call ZDI(M0,5,W5I,1.3)
call ZDI(M0,6,W5I,1.3)
call ZDI(M0,7,W5I,2.5)
call ZDI(M0,8,W5I,0.01)
call ZDI(M0,9,W5I,0.01)
call ZDI(M0,10,W5I,0.01)
call ZDI(M0,11,W5I,0.01)
call ZDI(M0,12,W5I,0.01)
call ZDI(M0,13,W5I,0.01)
set W5I=W5I+1
endloop
set W5I=1
set W6I=7+6
loop
exitwhen W5I>W6I
set CPO=1
set CQO=3+LT0+LS0
loop
exitwhen CPO>CQO
call Z5I(M0,W5I,CPO,true,false)
set CPO=CPO+1
endloop
set W5I=W5I+1
endloop
set W5I=1
set W6I=LS0
loop
exitwhen W5I>W6I
call Z5I(M0,1,W5I+2,true,true)
call Z8I(M0,7,W5I+2,255,204,0,0)
set LJ0[GetPlayerId(S1[W5I])]=1-1
set LK0[GetPlayerId(S1[W5I])]=W5I+2-1
call ZII(M0,1,W5I+2,(CR0[GetPlayerId((S1[W5I]))]))
if VTI(S1[W5I])then
call Z8I(M0,1,W5I+2,(WHI(SubString(C0[GetPlayerId((S1[W5I]))],4,6)))/255.0*100,(WHI(SubString(C0[GetPlayerId((S1[W5I]))],6,8)))/255.0*100,(WHI(SubString(C0[GetPlayerId((S1[W5I]))],8,10)))/255.0*100,0)
call Z8I(M0,2,W5I+2,(WHI(SubString(C0[GetPlayerId((S1[W5I]))],4,6)))/255.0*100,(WHI(SubString(C0[GetPlayerId((S1[W5I]))],6,8)))/255.0*100,(WHI(SubString(C0[GetPlayerId((S1[W5I]))],8,10)))/255.0*100,0)
else
call ZII(M0,1,W5I+2,"|c00333333"+(CR0[GetPlayerId((S1[W5I]))])+"|r")
endif
call ZII(M0,4,(W5I+2),LR0+"0|r")
call ZII(M0,5,(W5I+2),LQ0+"0|r")
call ZII(M0,6,(W5I+2),LU0+"0|r")
set W5I=W5I+1
endloop
set W5I=1
set W6I=LT0
loop
exitwhen W5I>W6I
call Z5I(M0,1,W5I+3+LS0,true,true)
call Z8I(M0,7,W5I+3+LS0,255,204,0,0)
set LJ0[GetPlayerId(T1[W5I])]=1-1
set LK0[GetPlayerId(T1[W5I])]=W5I+3+LS0-1
call ZII(M0,1,W5I+3+LS0,(CR0[GetPlayerId((T1[W5I]))]))
if VTI(T1[W5I])then
call Z8I(M0,1,W5I+3+LS0,(WHI(SubString(C0[GetPlayerId((T1[W5I]))],4,6)))/255.0*100,(WHI(SubString(C0[GetPlayerId((T1[W5I]))],6,8)))/255.0*100,(WHI(SubString(C0[GetPlayerId((T1[W5I]))],8,10)))/255.0*100,0)
call Z8I(M0,2,W5I+3+LS0,(WHI(SubString(C0[GetPlayerId((T1[W5I]))],4,6)))/255.0*100,(WHI(SubString(C0[GetPlayerId((T1[W5I]))],6,8)))/255.0*100,(WHI(SubString(C0[GetPlayerId((T1[W5I]))],8,10)))/255.0*100,0)
else
call ZII(M0,1,W5I+3+LS0,"|c00333333"+(CR0[GetPlayerId((T1[W5I]))])+"|r")
endif
call ZII(M0,4,(W5I+3+LS0),LR0+"0|r")
call ZII(M0,5,(W5I+3+LS0),LQ0+"0|r")
call ZII(M0,6,(W5I+3+LS0),LU0+"0|r")
set W5I=W5I+1
endloop
set LM0=1
set LN0=3+LT0+LS0-2
if D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0)and LL0==1 then
call MultiboardDisplay(M0,false)
endif
call Z5I(M0,7,1,false,true)
call Z3I(M0,7,1,"UI\\Feedback\\Resources\\ResourceGold.blp")
call WF1()
if LL0>1 then
call TriggerExecute(RG)
endif
endfunction
function CUO takes nothing returns nothing
local integer W5I
local integer W6I
call ZII(M0,4,2,LR0+I2S(I[GetPlayerId(CO[0])])+"|r")
call ZII(M0,5,2,LQ0+I2S(O[GetPlayerId(CO[0])])+"|r")
call ZII(M0,4,3+LS0,LR0+I2S(I[GetPlayerId(DO[0])])+"|r")
call ZII(M0,5,3+LS0,LQ0+I2S(O[GetPlayerId(DO[0])])+"|r")
set W5I=1
set W6I=LS0
loop
exitwhen W5I>W6I
call ZII(M0,4,(W5I+2),LR0+I2S(I[GetPlayerId(S1[W5I])])+"|r")
call ZII(M0,5,(W5I+2),LQ0+I2S(O[GetPlayerId(S1[W5I])])+"|r")
call ZII(M0,6,(W5I+2),LU0+I2S(D[GetPlayerId(S1[W5I])])+"|r")
set W5I=W5I+1
endloop
set W5I=1
set W6I=LT0
loop
exitwhen W5I>W6I
call ZII(M0,4,(W5I+3+LS0),LR0+I2S(I[GetPlayerId(T1[W5I])])+"|r")
call ZII(M0,5,(W5I+3+LS0),LQ0+I2S(O[GetPlayerId(T1[W5I])])+"|r")
call ZII(M0,6,(W5I+3+LS0),LU0+I2S(D[GetPlayerId(T1[W5I])])+"|r")
set W5I=W5I+1
endloop
endfunction
function DIO takes nothing returns boolean
if(GetUnitTypeId(GetTriggerUnit())==1697656914)then
return true
endif
if(GetUnitTypeId(GetTriggerUnit())==1697657137)then
return true
endif
if(GetUnitTypeId(GetTriggerUnit())==1697656915)then
return true
endif
if(GetUnitTypeId(GetTriggerUnit())==1697657145)then
return true
endif
return false
endfunction
function D1O takes nothing returns nothing
set G0[1]=(G0[1]+1)
endfunction
function D2O takes nothing returns boolean
if(GetUnitTypeId(GetTriggerUnit())==1966092365)then
return true
endif
if(GetUnitTypeId(GetTriggerUnit())==1966092356)then
return true
endif
if(GetUnitTypeId(GetTriggerUnit())==1966092366)then
return true
endif
if(GetUnitTypeId(GetTriggerUnit())==1966092372)then
return true
endif
return false
endfunction
function D3O takes nothing returns nothing
set G0[2]=(G0[2]+1)
endfunction
function D5O takes integer a returns integer
local integer i=0
local integer x=0
local string s=I2S(a)
loop
exitwhen i>StringLength(s)
if SubString(s,i,i+1)=="1"then
set x=x+1
endif
set i=i+1
endloop
return x
endfunction
function D6O takes player VRI,integer D7O returns string
if IsPlayerAlly(GetLocalPlayer(),VRI)==true then
return RKI(UnitItemInSlot(L1[GetPlayerId(VRI)],D7O-1))
else
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
endfunction
function D8O takes nothing returns nothing
local integer W5I
local integer W6I
local string Q1I
local real J1I
local string s1=" "
local integer r
local integer i
local integer array time_1a
local string array color_1a
local integer index_1a=0
local integer array time_1b
local string array color_1b
local integer index_1b=0
local integer x=0
local integer id
local string D9O
local string DAO
local string DBO
local string DCO
local string DDO
local string s2=" "
local string s
local real DEO
local string spacer
local integer DFO=0
local string DGO=""
local string DHO=""
local integer DZO=0
local integer DVO=0
local string DWO=""
if M0==null then
return
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(F0[GetPlayerId(CO[i])]))
if r>0 then
set DFO=DFO+D5O(r)
if DZO==0 then
if r<10 then
set DGO=C0[GetPlayerId(CO[i])]+"0"+I2S(r)+" |r"
else
set DGO=C0[GetPlayerId(CO[i])]+I2S(r)+" |r"
endif
else
if r<10 then
set DGO=DGO+M00+"| |r"+C0[GetPlayerId(CO[i])]+"0"+I2S(r)+" |r"
else
set DGO=DGO+M00+"| |r"+C0[GetPlayerId(CO[i])]+I2S(r)+" |r"
endif
endif
set DZO=DZO+1
endif
set i=i+1
endloop
if DZO>0 then
if IsPlayerAlly(GetLocalPlayer(),CO[0])==true then
set DGO=M00+"["+GetObjectName(1848658515)+" |r"+DGO+M00+"]|r"
else
set DGO=LP0+"["+GetObjectName(1848658514)+" |r"+DGO+LP0+"]|r"
endif
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(F0[GetPlayerId(DO[i])]))
if r>0 then
set DFO=DFO+D5O(r)
if DVO==0 then
if r<10 then
set DHO=C0[GetPlayerId(DO[i])]+"0"+I2S(r)+" |r"
else
set DHO=C0[GetPlayerId(DO[i])]+I2S(r)+" |r"
endif
else
if r<10 then
set DHO=DHO+M00+"| |r"+C0[GetPlayerId(DO[i])]+"0"+I2S(r)+" |r"
else
set DHO=DHO+M00+"| |r"+C0[GetPlayerId(DO[i])]+I2S(r)+" |r"
endif
endif
set DVO=DVO+1
endif
set i=i+1
endloop
if DVO>0 then
if IsPlayerAlly(GetLocalPlayer(),DO[0])==true then
set DHO=M00+"["+GetObjectName(1848658515)+" |r"+DHO+M00+"]|r"
else
set DHO=LP0+"["+GetObjectName(1848658514)+" |r"+DHO+LP0+"]|r"
endif
endif
if M0!=null then
set id=GetPlayerId(GetLocalPlayer())
if id>=0 and id<16 then
if UL[x]then
set D9O=I2S(I[id])
set DAO=I2S(O[id])
set DBO=I2S(D[id])
set DCO=I2S(A[id])
set DDO=I2S(B[id])
set s2=" |c00838B8B("+D9O+"/"+DAO+"/"+DBO+" - "+DCO+"/"+DDO+" - |r|c00FFDC00"+I2S(E80[id])+"|r |c00838B8B)|r"
endif
endif
endif
if DVO==0 and DZO==0 then
call MultiboardSetTitleText(M0,s2)
else
if IsPlayerAlly(GetLocalPlayer(),CO[0])==true then
call MultiboardSetTitleText(M0,DHO+" "+DGO+" "+s2)
else
call MultiboardSetTitleText(M0,DGO+" "+DHO+" "+s2)
endif
endif
if(D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0))==false then
call MultiboardDisplay(M0,true)
endif
if SH0[GetPlayerId(GetLocalPlayer())]==false then
call SetWaterBaseColor(0,0,255,255)
endif
set W5I=1
set W6I=LS0
loop
exitwhen W5I>W6I
call Z3I(M0,1,W5I+2,V3I(L1[GetPlayerId(S1[W5I])]))
call ZII(M0,3,W5I+2,"|c00838B8B"+I2S(GetHeroLevel(L1[GetPlayerId(S1[W5I])]))+"|r")
if SB0[GetPlayerId(GetLocalPlayer())]then
call ZDI(M0,7,1,3)
call ZDI(M0,8,1,2.8)
call ZDI(M0,9,1,0.8)
call ZDI(M0,10,1,0.8)
call ZDI(M0,11,1,0.8)
call ZDI(M0,12,1,0.8)
call ZDI(M0,13,1,0.1)
call ZDI(M0,7,W5I+2,3)
call ZDI(M0,8,W5I+2,1.1)
call ZDI(M0,9,W5I+2,1.1)
call ZDI(M0,10,W5I+2,1.1)
call ZDI(M0,11,W5I+2,1.1)
call ZDI(M0,12,W5I+2,1.1)
call ZDI(M0,13,W5I+2,0.1)
call Z5I(M0,8,W5I+2,false,true)
call Z5I(M0,9,W5I+2,false,true)
call Z5I(M0,10,W5I+2,false,true)
call Z5I(M0,11,W5I+2,false,true)
call Z5I(M0,12,W5I+2,false,true)
call Z5I(M0,13,W5I+2,false,true)
call ZII(M0,8,1,"Items")
else
call ZDI(M0,7,1,2)
call ZDI(M0,8,1,0.1)
call ZDI(M0,9,1,0.1)
call ZDI(M0,10,1,0.1)
call ZDI(M0,11,1,0.1)
call ZDI(M0,12,1,0.1)
call ZDI(M0,13,1,0.1)
call ZDI(M0,7,W5I+2,2.5)
call ZDI(M0,8,W5I+2,0.1)
call ZDI(M0,9,W5I+2,0.1)
call ZDI(M0,10,W5I+2,0.1)
call ZDI(M0,11,W5I+2,0.1)
call ZDI(M0,12,W5I+2,0.1)
call ZDI(M0,13,W5I+2,0.1)
call Z5I(M0,8,W5I+2,false,false)
call Z5I(M0,9,W5I+2,false,false)
call Z5I(M0,10,W5I+2,false,false)
call Z5I(M0,11,W5I+2,false,false)
call Z5I(M0,12,W5I+2,false,false)
call Z5I(M0,13,W5I+2,false,false)
call ZII(M0,8,1," ")
endif
call Z3I(M0,8,W5I+2,D6O(S1[W5I],1))
call Z3I(M0,9,W5I+2,D6O(S1[W5I],2))
call Z3I(M0,10,W5I+2,D6O(S1[W5I],3))
call Z3I(M0,11,W5I+2,D6O(S1[W5I],4))
call Z3I(M0,12,W5I+2,D6O(S1[W5I],5))
call Z3I(M0,13,W5I+2,D6O(S1[W5I],6))
if(VBI(L1[GetPlayerId(S1[W5I])])and L1[GetPlayerId(S1[W5I])]!=null and TimerGetRemaining(F0[GetPlayerId(S1[W5I])])>0)then
if IsPlayerAlly(GetLocalPlayer(),S1[W5I])then
set DWO=M00+" ("+(I2S(R2I(TimerGetRemaining(F0[GetPlayerId(S1[W5I])]))))+")|r"
else
set DWO=LP0+" ("+(I2S(R2I(TimerGetRemaining(F0[GetPlayerId(S1[W5I])]))))+")|r"
endif
else
set DWO="  "
endif
if EI0[GetPlayerId(S1[W5I])]then
call ZII(M0,1,W5I+2,"|c00333333"+(CR0[GetPlayerId((S1[W5I]))])+"|r"+DWO)
else
call ZII(M0,1,W5I+2,(CR0[GetPlayerId((S1[W5I]))])+DWO)
endif
set DEO=(TimerGetRemaining(E70[GetPlayerId((S1[W5I]))]))
if DEO>0 then
set s=I2S(R2I(DEO))
else
set s=" "
endif
if IsPlayerAlly(GetLocalPlayer(),S1[W5I])==false then
call ZII(M0,7,W5I+2," ")
set s=" "
else
call ZII(M0,7,W5I+2,"|cffffcc00"+I2S(R2I(GetPlayerState(S1[W5I],PLAYER_STATE_RESOURCE_GOLD)))+"|r")
endif
call ZII(M0,2,W5I+2,s)
set W5I=W5I+1
endloop
set W5I=1
set W6I=LT0
loop
exitwhen W5I>W6I
call Z3I(M0,1,W5I+3+LS0,V3I(L1[GetPlayerId(T1[W5I])]))
call ZII(M0,3,W5I+3+LS0,"|c00838B8B"+I2S(GetHeroLevel(L1[GetPlayerId(T1[W5I])]))+"|r")
if SB0[GetPlayerId(GetLocalPlayer())]then
call ZDI(M0,7,1,3)
call ZDI(M0,8,1,2.8)
call ZDI(M0,9,1,0.8)
call ZDI(M0,10,1,0.8)
call ZDI(M0,11,1,0.8)
call ZDI(M0,12,1,0.8)
call ZDI(M0,13,1,0.1)
call ZDI(M0,7,W5I+3+LS0,3)
call ZDI(M0,8,W5I+3+LS0,1.1)
call ZDI(M0,9,W5I+3+LS0,1.1)
call ZDI(M0,10,W5I+3+LS0,1.1)
call ZDI(M0,11,W5I+3+LS0,1.1)
call ZDI(M0,12,W5I+3+LS0,1.1)
call ZDI(M0,13,W5I+3+LS0,0.1)
call Z5I(M0,8,W5I+3+LS0,false,true)
call Z5I(M0,9,W5I+3+LS0,false,true)
call Z5I(M0,10,W5I+3+LS0,false,true)
call Z5I(M0,11,W5I+3+LS0,false,true)
call Z5I(M0,12,W5I+3+LS0,false,true)
call Z5I(M0,13,W5I+3+LS0,false,true)
call ZII(M0,8,1,"Items")
else
call ZDI(M0,7,1,2)
call ZDI(M0,8,1,0.1)
call ZDI(M0,9,1,0.1)
call ZDI(M0,10,1,0.1)
call ZDI(M0,11,1,0.1)
call ZDI(M0,12,1,0.1)
call ZDI(M0,13,1,0.1)
call ZDI(M0,7,W5I+3+LS0,2.5)
call ZDI(M0,8,W5I+3+LS0,0.1)
call ZDI(M0,9,W5I+3+LS0,0.1)
call ZDI(M0,10,W5I+3+LS0,0.1)
call ZDI(M0,11,W5I+3+LS0,0.1)
call ZDI(M0,12,W5I+3+LS0,0.1)
call ZDI(M0,13,W5I+3+LS0,0.1)
call Z5I(M0,8,W5I+3+LS0,false,false)
call Z5I(M0,9,W5I+3+LS0,false,false)
call Z5I(M0,10,W5I+3+LS0,false,false)
call Z5I(M0,11,W5I+3+LS0,false,false)
call Z5I(M0,12,W5I+3+LS0,false,false)
call Z5I(M0,13,W5I+3+LS0,false,false)
call ZII(M0,8,1," ")
endif
call Z3I(M0,8,W5I+3+LS0,D6O(T1[W5I],1))
call Z3I(M0,9,W5I+3+LS0,D6O(T1[W5I],2))
call Z3I(M0,10,W5I+3+LS0,D6O(T1[W5I],3))
call Z3I(M0,11,W5I+3+LS0,D6O(T1[W5I],4))
call Z3I(M0,12,W5I+3+LS0,D6O(T1[W5I],5))
call Z3I(M0,13,W5I+3+LS0,D6O(T1[W5I],6))
if(VBI(L1[GetPlayerId(T1[W5I])])and L1[GetPlayerId(T1[W5I])]!=null and TimerGetRemaining(F0[GetPlayerId(T1[W5I])])>0)then
if IsPlayerAlly(GetLocalPlayer(),T1[W5I])then
set DWO=M00+" ("+(I2S(R2I(TimerGetRemaining(F0[GetPlayerId(T1[W5I])]))))+")|r"
else
set DWO=LP0+" ("+(I2S(R2I(TimerGetRemaining(F0[GetPlayerId(T1[W5I])]))))+")|r"
endif
else
set DWO="  "
endif
if EI0[GetPlayerId(T1[W5I])]then
call ZII(M0,1,W5I+3+LS0,"|c00333333"+(CR0[GetPlayerId((T1[W5I]))])+"|r"+DWO)
else
call ZII(M0,1,W5I+3+LS0,(CR0[GetPlayerId((T1[W5I]))])+DWO)
endif
set DEO=(TimerGetRemaining(E70[GetPlayerId((T1[W5I]))]))
if DEO>0 then
set s=I2S(R2I(DEO))
else
set s=" "
endif
if IsPlayerAlly(GetLocalPlayer(),T1[W5I])==false then
call ZII(M0,7,W5I+3+LS0," ")
set s=" "
else
call ZII(M0,7,W5I+3+LS0,"|cffffcc00"+I2S(R2I(GetPlayerState(T1[W5I],PLAYER_STATE_RESOURCE_GOLD)))+"|r")
endif
call ZII(M0,2,W5I+3+LS0,s)
set W5I=W5I+1
endloop
endfunction
function Trig_CS_Board_Actions takes nothing returns nothing
set HO[GetPlayerId(CO[1])]=CreateLeaderboard()
set HO[GetPlayerId(CO[2])]=CreateLeaderboard()
set HO[GetPlayerId(CO[3])]=CreateLeaderboard()
set HO[GetPlayerId(CO[4])]=CreateLeaderboard()
set HO[GetPlayerId(CO[5])]=CreateLeaderboard()
set HO[GetPlayerId(DO[1])]=CreateLeaderboard()
set HO[GetPlayerId(DO[2])]=CreateLeaderboard()
set HO[GetPlayerId(DO[3])]=CreateLeaderboard()
set HO[GetPlayerId(DO[4])]=CreateLeaderboard()
set HO[GetPlayerId(DO[5])]=CreateLeaderboard()
call PlayerSetLeaderboard(CO[1],HO[GetPlayerId(CO[1])])
call PlayerSetLeaderboard(CO[2],HO[GetPlayerId(CO[2])])
call PlayerSetLeaderboard(CO[3],HO[GetPlayerId(CO[3])])
call PlayerSetLeaderboard(CO[4],HO[GetPlayerId(CO[4])])
call PlayerSetLeaderboard(CO[5],HO[GetPlayerId(CO[5])])
call PlayerSetLeaderboard(DO[1],HO[GetPlayerId(DO[1])])
call PlayerSetLeaderboard(DO[2],HO[GetPlayerId(DO[2])])
call PlayerSetLeaderboard(DO[3],HO[GetPlayerId(DO[3])])
call PlayerSetLeaderboard(DO[4],HO[GetPlayerId(DO[4])])
call PlayerSetLeaderboard(DO[5],HO[GetPlayerId(DO[5])])
call LeaderboardDisplay(HO[GetPlayerId(CO[1])],false)
call LeaderboardDisplay(HO[GetPlayerId(CO[2])],false)
call LeaderboardDisplay(HO[GetPlayerId(CO[3])],false)
call LeaderboardDisplay(HO[GetPlayerId(CO[4])],false)
call LeaderboardDisplay(HO[GetPlayerId(CO[5])],false)
call LeaderboardDisplay(HO[GetPlayerId(DO[1])],false)
call LeaderboardDisplay(HO[GetPlayerId(DO[2])],false)
call LeaderboardDisplay(HO[GetPlayerId(DO[3])],false)
call LeaderboardDisplay(HO[GetPlayerId(DO[4])],false)
call LeaderboardDisplay(HO[GetPlayerId(DO[5])],false)
call LeaderboardSetLabelBJ(HO[GetPlayerId(CO[1])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(CO[2])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(CO[3])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(CO[4])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(CO[5])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(DO[1])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(DO[2])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(DO[3])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(DO[4])],"Creep Kills: 0 Denies: 0")
call LeaderboardSetLabelBJ(HO[GetPlayerId(DO[5])],"Creep Kills: 0 Denies: 0")
endfunction
function EndScore_GameMode takes nothing returns string
return UK
endfunction
function EndScore_GetWinner takes nothing returns string
return K3
endfunction
function DJO takes player VRI returns string
return C0[GetPlayerId(VRI)]+(CR0[GetPlayerId((VRI))])+"|r"
endfunction
function DKO takes player VRI returns string
local string DLO=I2S(ET0[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function DNO takes player VRI returns string
local string DLO=I2S(ES0[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function IX1 takes nothing returns nothing
local integer i=1
local multiboarditem Z2I
loop
exitwhen i>M30
if(L3[GetPlayerId((M20[i]))])!="Here"then
set Z2I=MultiboardGetItem(MI0,M10[i],MO0[i])
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c00555555"+(L3[GetPlayerId((M20[i]))])+"|r")
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
endif
set i=i+1
endloop
endfunction
function DSO takes player VRI returns string
local string DLO=I2S(GetPlayerState(VRI,PLAYER_STATE_RESOURCE_GOLD))
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function DTO takes player VRI returns string
local string DLO=I2S(E[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function DRO takes player VRI returns string
local string DLO=I2S(GetUnitLevel(L1[GetPlayerId(VRI)]))
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function DPO takes player VRI returns string
local string DLO=I2S(F[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function DQO takes player VRI returns string
local string DLO=I2S(Y[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function DUO takes player VRI returns string
local string DLO=I2S(G[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function E0O takes player VRI returns string
local string DLO=I2S(D[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function EIO takes player VRI returns string
local string DLO=I2S(I[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function E1O takes player VRI returns string
local string DLO=I2S(O[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function EOO takes player VRI returns string
local string DLO=I2S(A[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function E2O takes player VRI returns string
local string DLO=I2S(B[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function E3O takes player VRI returns string
local string DLO=I2S((LoadInteger(ZY,(400+GetPlayerId(VRI)),(79))))
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function E4O takes player VRI returns string
local string DLO=I2S(Z[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function E5O takes player VRI returns string
local string DLO=I2S(V[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function E6O takes player VRI returns string
local string DLO=I2S(H[GetPlayerId(VRI)])
local string DMO=DLO
if VRI==GetLocalPlayer()then
set DMO=M40+DLO+"|r"
endif
return DMO
endfunction
function E7O takes player VRI returns string
local string E8O
local string E9O
local string DMO
local integer k=J[GetPlayerId(VRI)]
local integer d=X[GetPlayerId(VRI)]
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
set E8O=I2S(k)
set E9O=I2S(d)
set DMO=E8O+"/"+E9O
if VRI==GetLocalPlayer()then
set DMO=M40+E8O+"|r/"+M40+E9O+"|r"
endif
return DMO
endfunction
function EAO takes player VRI returns string
local integer EBO=W[GetPlayerId(VRI)]
local string Q1I
local integer NYI
local integer NJI
set NYI=(EBO/60)-(1/2)
set NJI=ModuloInteger(EBO,60)
if(NJI<10)then
set Q1I=I2S(NYI)+":0"+I2S(NJI)
else
set Q1I=I2S(NYI)+":"+I2S(NJI)
endif
if VRI==GetLocalPlayer()then
set Q1I=M40+Q1I+"|r"
endif
return Q1I
endfunction
function ECO takes player XSI,player XTI returns string
local string E8O
local string E9O
local string DMO
local integer k=(LoadInteger(ZY,(400+GetPlayerId(XSI)),(450+GetPlayerId(XTI))))
local integer d=(LoadInteger(ZY,(400+GetPlayerId(XSI)),(500+GetPlayerId(XTI))))
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
set E8O=I2S(k)
set E9O=I2S(d)
set DMO=E8O+"/"+E9O
if XSI==GetLocalPlayer()then
set DMO=M40+E8O+"|r/"+M40+E9O+"|r"
endif
return DMO
endfunction
function EndScore_AllKD takes nothing returns string
return"|c00ff0303"+I2S(I[GetPlayerId(CO[0])])+"|r/|c0020c000"+I2S(O[GetPlayerId(CO[0])])+"|r"
endfunction
function EDO takes nothing returns nothing
local integer EEO=LS0
local integer EFO=LT0
local player array EGO
local player array EHO
local integer EZO
local integer EVO
local integer EWO=21+YTI(EEO,EFO)+1
local integer EXO=1+(EEO+EFO)*2
local multiboarditem Z2I
local integer i
local integer x
local integer curRow1
local integer curRow2
local string e="|r"
local string c0="|cff99ccff"
local integer EYO
local integer EJO
call DisableTrigger(UG)
call DestroyMultiboard(M0)
if EEO>0 and EFO>0 then
set EWO=EWO+2
endif
set MI0=CreateMultiboard()
call MultiboardSetItemsWidth(MI0,0)
call MultiboardSetRowCount(MI0,EWO)
call MultiboardSetColumnCount(MI0,EXO)
call MultiboardSetTitleText(MI0,GetObjectName(1848657203)+" "+" - "+(UK))
call MultiboardMinimize(MI0,true)
call MultiboardSetItemsStyle(MI0,false,false)
call MultiboardDisplay(MI0,true)
call MultiboardMinimize(MI0,false)
call MultiboardSetTitleText(MI0,GetObjectName(1848657203)+" "+" - "+(UK)+" - "+("|c00ff0303"+I2S(I[GetPlayerId(CO[0])])+"|r/|c0020c000"+I2S(O[GetPlayerId(CO[0])])+"|r"))
set x=1
set i=1
loop
exitwhen i>5
if VTI(CO[i])or GetPlayerSlotState(CO[i])==PLAYER_SLOT_STATE_LEFT then
set EGO[x]=CO[i]
set x=x+1
endif
set i=i+1
endloop
set x=1
set i=1
loop
exitwhen i>5
if VTI(DO[i])or GetPlayerSlotState(DO[i])==PLAYER_SLOT_STATE_LEFT then
set EHO[x]=DO[i]
set x=x+1
endif
set i=i+1
endloop
set i=0
set EVO=0
loop
exitwhen i>EWO
set Z2I=MultiboardGetItem(MI0,i,EVO)
call MultiboardSetItemWidth(Z2I,0.075)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=0
set EVO=0
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I," ")
call MultiboardReleaseItem(Z2I)
set EVO=0
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,false)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DJO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DJO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=EZO+1
set EVO=0
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,false)
call MultiboardReleaseItem(Z2I)
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemValue(Z2I,DRO(EGO[i]))
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemValue(Z2I,DRO(EHO[i]))
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=EZO+1
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657218)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(1)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(2)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(1)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(2)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=EZO+1
set EVO=0
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+" "+e)
call MultiboardReleaseItem(Z2I)
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(3)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(4)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(3)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(4)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=EZO+1
set EVO=0
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+" "+e)
call MultiboardReleaseItem(Z2I)
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(5)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(6)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(5)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(6)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657202)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DSO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DSO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657201)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,EIO(EGO[i])+"/"+E1O(EGO[i])+"/"+E0O(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,EIO(EHO[i])+"/"+E1O(EHO[i])+"/"+E0O(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656986)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,EOO(EGO[i])+"/"+E2O(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,EOO(EHO[i])+"/"+E2O(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848658517)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DKO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DKO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848658758)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DNO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DNO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657200)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DPO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DPO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656980)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E7O(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E7O(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656985)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E3O(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E3O(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656981)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DQO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DQO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656982)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,EAO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,EAO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656983)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DUO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DUO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656974)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DTO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DTO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656952)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E4O(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E4O(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656969)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E5O(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E5O(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656973)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E6O(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,E6O(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
if EEO>0 and EFO>0 then
set EVO=0
set EYO=EZO
set EJO=EVO
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656972)+e)
call MultiboardReleaseItem(Z2I)
set EZO=EYO
set x=1
loop
exitwhen x>EEO
set EVO=0
set EZO=EYO
set i=1
loop
exitwhen i>EFO
set EVO=x+(x-1)
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EGO[x]))])))
call MultiboardSetItemWidth(Z2I,0.01)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EHO[i]))])))
call MultiboardSetItemValue(Z2I," "+ECO(EGO[x],EHO[i]))
call MultiboardSetItemWidth(Z2I,0.059)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set x=x+1
endloop
set x=EEO+1
loop
exitwhen x>(EFO+EEO)
set EVO=0
set EZO=EYO
set i=1
loop
exitwhen i>EEO
set EVO=x+(x-1)
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EHO[x-EEO]))])))
call MultiboardSetItemWidth(Z2I,0.01)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EGO[i]))])))
call MultiboardSetItemValue(Z2I," "+ECO(EHO[x-EEO],EGO[i]))
call MultiboardSetItemWidth(Z2I,0.059)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set x=x+1
endloop
endif
set EZO=EZO+1
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656730)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(L3[GetPlayerId((EGO[i]))]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set M30=M30+1
set M10[M30]=EZO
set MO0[M30]=EVO
set M20[M30]=EGO[i]
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(L3[GetPlayerId((EHO[i]))]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set M30=M30+1
set M10[M30]=EZO
set MO0[M30]=EVO
set M20[M30]=EHO[i]
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(MI0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656953)+e)
call MultiboardReleaseItem(Z2I)
set Z2I=MultiboardGetItem(MI0,EZO,EVO+1)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(K3))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
call MultiboardMinimize(MI0,true)
call MultiboardMinimize(MI0,false)
endfunction
function ObsBoard_GameMode takes nothing returns string
return UK
endfunction
function ELO takes player VRI returns string
return C0[GetPlayerId(VRI)]+(CR0[GetPlayerId((VRI))])+"|r"
endfunction
function EMO takes player VRI returns string
local integer k=J[GetPlayerId(VRI)]
local integer d=X[GetPlayerId(VRI)]
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
return I2S(k)+"/"+I2S(d)
endfunction
function ENO takes player VRI returns string
local integer EBO=W[GetPlayerId(VRI)]
local string Q1I
local integer NYI
local integer NJI
set NYI=(EBO/60)-(1/2)
set NJI=ModuloInteger(EBO,60)
if(NJI<10)then
set Q1I=I2S(NYI)+":0"+I2S(NJI)
else
set Q1I=I2S(NYI)+":"+I2S(NJI)
endif
return Q1I
endfunction
function ESO takes player XSI,player XTI returns string
local integer k=(LoadInteger(ZY,(400+GetPlayerId(XSI)),(450+GetPlayerId(XTI))))
local integer d=(LoadInteger(ZY,(400+GetPlayerId(XSI)),(500+GetPlayerId(XTI))))
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
return I2S(k)+"/"+I2S(d)
endfunction
function ETO takes player XSI returns string
local string ERO
if KMI(L1[GetPlayerId(XSI)])then
set ERO=I2S(R2I(TimerGetRemaining(F0[GetPlayerId(XSI)])))
else
set ERO=" "
endif
return ERO
endfunction
function EPO takes player XSI returns string
local real r=(TimerGetRemaining(E70[GetPlayerId((XSI))]))
local string ERO
if r>0 then
set ERO=I2S(R2I(r))
else
set ERO=" "
endif
return ERO
endfunction
function EQO takes integer EUO,integer F0O returns nothing
set M50=CreateMultiboard()
call MultiboardSetItemsWidth(M50,0)
call MultiboardSetRowCount(M50,EUO)
call MultiboardSetColumnCount(M50,F0O)
call MultiboardSetTitleText(M50,GetObjectName(1848657203)+" "+" - "+(UK))
call MultiboardMinimize(M50,true)
call MultiboardSetItemsStyle(M50,false,false)
if GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0 then
call MultiboardDisplay(M50,true)
endif
endfunction
function ObsBoard_AllKD takes nothing returns string
return"|c00ff0303"+I2S(I[GetPlayerId(CO[0])])+"|r/|c0020c000"+I2S(O[GetPlayerId(CO[0])])+"|r"
endfunction
function FIO takes nothing returns nothing
local integer EEO=M1
local integer EFO=N1
local player array EGO
local player array EHO
local integer EZO
local integer EVO
local integer EWO=1+21+YTI(EEO,EFO)
local integer EXO=1+(EEO+EFO)*2
local multiboarditem Z2I
local integer i
local integer x
local integer curRow1
local integer curRow2
local string e="|r"
local string c0="|cff99ccff"
local integer EYO
local integer EJO
local integer F1O=131
local integer FOO=139
local integer F2O=139
local integer F3O=255
local integer DFO=0
local string DGO=""
local string DHO=""
local integer DZO=0
local integer DVO=0
local integer r
if EEO>0 and EFO>0 then
set EWO=EWO+2
endif
if GetTriggerExecCount(GetTriggeringTrigger())==1 then
call EQO(EWO,EXO)
endif
if D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0)then
call MultiboardDisplay(M50,true)
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(F0[GetPlayerId(CO[i])]))
if r>0 then
set DFO=DFO+D5O(r)
if DZO==0 then
if r<10 then
set DGO=C0[GetPlayerId(CO[i])]+"0"+I2S(r)+" |r"
else
set DGO=C0[GetPlayerId(CO[i])]+I2S(r)+" |r"
endif
else
if r<10 then
set DGO=DGO+M00+"| |r"+C0[GetPlayerId(CO[i])]+"0"+I2S(r)+" |r"
else
set DGO=DGO+M00+"| |r"+C0[GetPlayerId(CO[i])]+I2S(r)+" |r"
endif
endif
set DZO=DZO+1
endif
set i=i+1
endloop
if DZO>0 then
set DGO=M00+"[Sentinel: |r"+DGO+M00+"]|r"
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(F0[GetPlayerId(DO[i])]))
if r>0 then
set DFO=DFO+D5O(r)
if DVO==0 then
if r<10 then
set DHO=C0[GetPlayerId(DO[i])]+"0"+I2S(r)+" |r"
else
set DHO=C0[GetPlayerId(DO[i])]+I2S(r)+" |r"
endif
else
if r<10 then
set DHO=DHO+M00+"| |r"+C0[GetPlayerId(DO[i])]+"0"+I2S(r)+" |r"
else
set DHO=DHO+M00+"| |r"+C0[GetPlayerId(DO[i])]+I2S(r)+" |r"
endif
endif
set DVO=DVO+1
endif
set i=i+1
endloop
if DVO>0 then
set DHO=M00+"[Scourge: |r"+DHO+M00+"]|r"
endif
call MultiboardSetTitleText(M50,DGO+" "+DHO+" "+GetObjectName(1848657203)+" "+" - "+(UK)+" - "+("|c00ff0303"+I2S(I[GetPlayerId(CO[0])])+"|r/|c0020c000"+I2S(O[GetPlayerId(CO[0])])+"|r"))
set x=1
set i=1
loop
exitwhen i>5
if VTI(CO[i])or GetPlayerSlotState(CO[i])==PLAYER_SLOT_STATE_LEFT then
set EGO[x]=CO[i]
set x=x+1
endif
set i=i+1
endloop
set x=1
set i=1
loop
exitwhen i>5
if VTI(DO[i])or GetPlayerSlotState(DO[i])==PLAYER_SLOT_STATE_LEFT then
set EHO[x]=DO[i]
set x=x+1
endif
set i=i+1
endloop
set i=0
set EVO=0
loop
exitwhen i>EWO
set Z2I=MultiboardGetItem(M50,i,EVO)
call MultiboardSetItemWidth(Z2I,0.075)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=0
set EVO=0
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I," ")
call MultiboardReleaseItem(Z2I)
set EVO=0
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,false)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,ELO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,ELO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=EZO+1
set EVO=0
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,false)
call MultiboardReleaseItem(Z2I)
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemValue(Z2I,"("+(I2S(GetUnitLevel(L1[GetPlayerId((EGO[i]))])))+")")
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemValue(Z2I,"("+(I2S(GetUnitLevel(L1[GetPlayerId((EHO[i]))])))+")")
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=EZO+1
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657218)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(1)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(2)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(1)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(2)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=EZO+1
set EVO=0
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+" "+e)
call MultiboardReleaseItem(Z2I)
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(3)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(4)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(3)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(4)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EZO=EZO+1
set EVO=0
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+" "+e)
call MultiboardReleaseItem(Z2I)
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(5)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EGO[i]))],(6)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(5)-1))))
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(RKI(UnitItemInSlot(L1[GetPlayerId((EHO[i]))],(6)-1))))
call MultiboardSetItemWidth(Z2I,0.054)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657202)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(GetPlayerState((EGO[i]),PLAYER_STATE_RESOURCE_GOLD))))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(GetPlayerState((EHO[i]),PLAYER_STATE_RESOURCE_GOLD))))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848659028)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(OS[QII(GetHeroLevel(L1[GetPlayerId((EGO[i]))]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(OS[QII(GetHeroLevel(L1[GetPlayerId((EHO[i]))]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656986)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(A[GetPlayerId((EGO[i]))]))+"/"+(I2S(B[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(A[GetPlayerId((EHO[i]))]))+"/"+(I2S(B[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657201)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(I[GetPlayerId((EGO[i]))]))+"/"+(I2S(O[GetPlayerId((EGO[i]))]))+"/"+(I2S(D[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(I[GetPlayerId((EHO[i]))]))+"/"+(I2S(O[GetPlayerId((EHO[i]))]))+"/"+(I2S(D[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848658517)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DKO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DKO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848658758)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DNO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,DNO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657200)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(F[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(F[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656980)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,EMO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,EMO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656985)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S((LoadInteger(ZY,(400+GetPlayerId((EGO[i]))),(79))))))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S((LoadInteger(ZY,(400+GetPlayerId((EHO[i]))),(79))))))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656981)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(Y[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(Y[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656982)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,ENO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,ENO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656983)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(G[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(G[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656974)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(E[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(E[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656952)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(Z[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(Z[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656969)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(V[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(V[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656973)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(H[GetPlayerId((EGO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,(I2S(H[GetPlayerId((EHO[i]))])))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
if EEO>0 and EFO>0 then
set EVO=0
set EYO=EZO
set EJO=EVO
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848656972)+e)
call MultiboardReleaseItem(Z2I)
set EZO=EYO
set x=1
loop
exitwhen x>EEO
set EVO=0
set EZO=EYO
set i=1
loop
exitwhen i>EFO
set EVO=x+(x-1)
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EGO[x]))])))
call MultiboardSetItemWidth(Z2I,0.01)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EHO[i]))])))
call MultiboardSetItemValue(Z2I," "+ESO(EGO[x],EHO[i]))
call MultiboardSetItemWidth(Z2I,0.059)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set x=x+1
endloop
set x=EEO+1
loop
exitwhen x>(EFO+EEO)
set EVO=0
set EZO=EYO
set i=1
loop
exitwhen i>EEO
set EVO=x+(x-1)
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EHO[x-EEO]))])))
call MultiboardSetItemWidth(Z2I,0.01)
call MultiboardReleaseItem(Z2I)
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EGO[i]))])))
call MultiboardSetItemValue(Z2I," "+ESO(EHO[x-EEO],EGO[i]))
call MultiboardSetItemWidth(Z2I,0.059)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set x=x+1
endloop
endif
set EZO=EZO+1
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848658003)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
if ETO(EGO[i])==" "then
call MultiboardSetItemStyle(Z2I,true,false)
else
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EGO[i]))])))
endif
call MultiboardSetItemValue(Z2I,EPO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemValueColor(Z2I,F1O,FOO,F2O,F3O)
if ETO(EHO[i])==" "then
call MultiboardSetItemStyle(Z2I,true,false)
else
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EHO[i]))])))
endif
call MultiboardSetItemValue(Z2I,EPO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set EVO=0
set EZO=EZO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,c0+GetObjectName(1848657204)+e)
call MultiboardReleaseItem(Z2I)
set EVO=0
set i=1
loop
exitwhen i>EEO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
if ETO(EGO[i])==" "then
call MultiboardSetItemStyle(Z2I,true,false)
else
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EGO[i]))])))
endif
call MultiboardSetItemValue(Z2I,ETO(EGO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set i=1
loop
exitwhen i>EFO
set EVO=EVO+1
set Z2I=MultiboardGetItem(M50,EZO,EVO)
if ETO(EHO[i])==" "then
call MultiboardSetItemStyle(Z2I,true,false)
else
call MultiboardSetItemStyle(Z2I,true,true)
call MultiboardSetItemIcon(Z2I,(V3I(L1[GetPlayerId((EHO[i]))])))
endif
call MultiboardSetItemValue(Z2I,ETO(EHO[i]))
call MultiboardSetItemWidth(Z2I,0.07)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
endfunction
function F4O takes nothing returns nothing
local trigger t
if D2 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddAction(t,function FIO)
set M60=t
endif
endfunction
function F5O takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
local string VXI
if GetLocalPlayer()==GetTriggerPlayer()then
if id==1749236021 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848652107 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1849897784 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1697657397 then
elseif id==1848651862 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651863 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651826 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651864 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651833 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848657989 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1849897781 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092369 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1967339316 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092592 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092378 then
call ResetUnitAnimation(GetTriggerUnit())
endif
endif
return false
endfunction
function F6O takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
local string VXI
if GetLocalPlayer()==GetTriggerPlayer()then
if id==1749236021 then
set VXI="stand work"
elseif id==1848652107 then
set VXI="stand third"
elseif id==1849897784 then
call SetUnitAnimationByIndex(GetTriggerUnit(),3)
elseif id==1697657397 then
elseif id==1848651862 then
set VXI="spell attack"
elseif id==1848651863 then
set VXI="spell"
elseif id==1848651826 then
call SetUnitAnimationByIndex(GetTriggerUnit(),3)
elseif id==1848651864 then
set VXI="stand work"
elseif id==1848651833 then
set VXI="stand work"
elseif id==1848657989 then
set VXI="stand victory"
elseif id==1849897781 then
set VXI="stand work"
elseif id==1966092369 then
set VXI="stand work"
elseif id==1967339316 then
set VXI="stand work gold"
elseif id==1966092592 then
set VXI="stand work"
elseif id==1966092378 then
set VXI="stand work"
endif
if VXI!=""then
call SetUnitAnimation(GetTriggerUnit(),VXI)
call QueueUnitAnimation(GetTriggerUnit(),VXI)
endif
endif
return false
endfunction
function F8O takes unit u,integer d returns nothing
local texttag t=CreateTextTag()
call SetTextTagText(t,"+"+I2S(d)+" "+GetObjectName(1848659025),0.03)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,50,75,255,15)
call SetTextTagVelocity(t,0,0.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,2.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
call SetTextTagVisibility(t,true)
if IsUnitVisible(u,GetLocalPlayer())or XJI(GetLocalPlayer())then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
set t=null
endfunction
function F9O takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
if GetSpellAbilityId()==1093678387 and GetUnitState(XSI,UNIT_STATE_LIFE)>1 then
call SetUnitState(XSI,UNIT_STATE_MANA,GetUnitState(XSI,UNIT_STATE_MANA)+GetUnitState(XTI,UNIT_STATE_LIFE)*GetUnitAbilityLevel(XSI,1093678387)*0.15)
call F8O(XTI,R2I(GetUnitState(XTI,UNIT_STATE_LIFE)*GetUnitAbilityLevel(XSI,1093678387)*0.15))
call KillUnit(XTI)
endif
set XSI=null
set XTI=null
endfunction
function FAO takes nothing returns boolean
if GetSpellAbilityId()==1093678387 and XBI(GetSpellTargetUnit())==false then
call F9O()
endif
return false
endfunction
function IsChinese takes nothing returns boolean
return GetObjectName(1848658741)!="Only Translate This String If Simplified Chinese"
endfunction
function FCO takes nothing returns boolean
local integer i=0
local string s=" t.qq.com/icefrogdev"
loop
exitwhen i>12
if GetRandomInt(0,10)<11 and(GetObjectName(1848658741)!="Only Translate This String If Simplified Chinese")then
call DisplayTimedTextToPlayer(Player(i),0,0,10,"|CFF00FF00"+s+"|r")
endif
set i=i+1
endloop
return false
endfunction
function FEO takes unit u returns nothing
endfunction
function FFO takes nothing returns boolean
local real FGO
local real FHO
local unit u
if N50==false then
set u=QQ
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-M70)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
endif
if N60==false then
set u=UQ
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-M80)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
endif
if N70==false then
set u=I00
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-M90)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
endif
if N40==false then
set u=II0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MA0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I10
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MB0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=IO0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MC0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I20
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MD0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I30
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-ME0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I40
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MF0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I50
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MG0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I60
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MH0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I70
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MZ0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I80
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MV0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=I90
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MW0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
endif
if NO0==false then
set u=BY0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MX0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
endif
if N20==false then
set u=BJ0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MY0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
endif
if N30==false then
set u=BK0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MJ0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
endif
if N10==false then
set u=BL0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MK0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=BM0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-ML0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=BN0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MM0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=BS0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MN0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=BT0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MS0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=BR0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MT0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=BP0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MR0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=BQ0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MP0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=BU0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MQ0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=C00
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MU0)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
set u=CI0
if u!=null then
set FGO=GetUnitState(u,UNIT_STATE_LIFE)
set FHO=FGO+NI0
if FHO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-N00)then
call SetUnitState(u,UNIT_STATE_LIFE,FHO)
call FEO(u)
endif
endif
endif
return false
endfunction
function FZO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if NO0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MX0=MX0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FVO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N20 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MY0=MY0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FWO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N30 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MJ0=MJ0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FXO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MK0=MK0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FYO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set ML0=ML0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FJO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MM0=MM0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FKO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MN0=MN0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FLO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MS0=MS0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FMO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MT0=MT0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FNO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MR0=MR0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FSO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MP0=MP0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FTO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MQ0=MQ0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FRO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MU0=MU0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FPO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N10 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set N00=N00+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FQO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N50 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set M70=M70+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function FUO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N60 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set M80=M80+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G0O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N70 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set M90=M90+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function GIO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MA0=MA0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G1O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MB0=MB0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function GOO takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MC0=MC0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G2O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MD0=MD0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G3O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set ME0=ME0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G4O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MF0=MF0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G5O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MG0=MG0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G6O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MH0=MH0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G7O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MZ0=MZ0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G8O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MV0=MV0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function G9O takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if N40 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true then
set MW0=MW0+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource())==true then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*GetEventDamage())
endif
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function GBO takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==DO[0]then
set N40=true
endif
return false
endfunction
function GCO takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==DO[0]then
set N50=true
endif
return false
endfunction
function GDO takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==DO[0]then
set N60=true
endif
return false
endfunction
function GEO takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==DO[0]then
set N70=true
endif
return false
endfunction
function GFO takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==CO[0]then
set N10=true
endif
return false
endfunction
function GGO takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==CO[0]then
set NO0=true
endif
return false
endfunction
function GHO takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==CO[0]then
set N20=true
endif
return false
endfunction
function GZO takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==CO[0]then
set N30=true
endif
return false
endfunction
function GVO takes nothing returns boolean
local group g=ZJI()
set N10=false
set NO0=false
set N20=false
set N30=false
set N40=false
set N50=false
set N60=false
set N70=false
call GroupEnumUnitsInRect(g,A6,Condition(function GBO))
call GroupEnumUnitsInRect(g,B6,Condition(function GBO))
call GroupEnumUnitsInRect(g,C6,Condition(function GBO))
call GroupEnumUnitsInRect(g,DB,Condition(function GBO))
call GroupEnumUnitsInRect(g,EB,Condition(function GBO))
call GroupEnumUnitsInRect(g,FB,Condition(function GBO))
call GroupEnumUnitsInRect(g,BB,Condition(function GCO))
call GroupEnumUnitsInRect(g,VB,Condition(function GDO))
call GroupEnumUnitsInRect(g,CB,Condition(function GEO))
call GroupEnumUnitsInRect(g,D6,Condition(function GFO))
call GroupEnumUnitsInRect(g,E6,Condition(function GFO))
call GroupEnumUnitsInRect(g,F6,Condition(function GFO))
call GroupEnumUnitsInRect(g,ZB,Condition(function GFO))
call GroupEnumUnitsInRect(g,GB,Condition(function GFO))
call GroupEnumUnitsInRect(g,HB,Condition(function GFO))
call GroupEnumUnitsInRect(g,IB,Condition(function GGO))
call GroupEnumUnitsInRect(g,OB,Condition(function GHO))
call GroupEnumUnitsInRect(g,AB,Condition(function GZO))
call ZYI(g)
set g=null
return false
endfunction
function GXO takes nothing returns boolean
call ZSI(GetTriggeringTrigger())
call TriggerEvaluate(SG)
return false
endfunction
function GYO takes nothing returns boolean
local real r=TimerGetRemaining(SK)
local real GJO=r
local integer J1I=R2I(GJO)
local integer NYI=J1I/60-1/2
local integer NJI=ModuloInteger(J1I,60)
local trigger t
if r==0 then
set N80=true
call P7I("GameStart",1)
call NXI(NYI,NJI,true)
set PK=true
set N=TimerGetElapsed(M)
call ZSI(GetTriggeringTrigger())
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.00)
call SuspendTimeOfDay(false)
call SetTimeOfDayScale(0.625)
if P0==false then
if AL then
call TriggerRegisterTimerEvent(XW0,120,true)
else
call TriggerRegisterTimerEvent(XW0,120,true)
endif
call TriggerEvaluate(XW0)
endif
call TriggerRegisterTimerEvent(SG,60,true)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30,false)
call TriggerAddCondition(t,Condition(function GXO))
set t=null
call TriggerRegisterTimerEventPeriodic(BG,30.00)
call TriggerExecute(BG)
call TriggerRegisterTimerEventPeriodic(MG,450.00)
call TriggerRegisterTimerEventSingle(OG,2699.00)
call TriggerRegisterTimerEventSingle(AG,999.00)
call TriggerRegisterTimerEventSingle(AG,1999.00)
call TriggerRegisterTimerEventSingle(AG,2999.00)
call TriggerRegisterTimerEvent(FI0,300,true)
call TriggerRegisterTimerEvent(NY0,300,true)
call TriggerRegisterTimerEvent(QN,30,true)
call TriggerEvaluate(QN)
if Q0 then
call TriggerRegisterTimerEvent(TG,600,true)
endif
call ExecuteFunc("GKO")
elseif r==7 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30,true)
call TriggerAddCondition(t,Condition(function AVO))
elseif GJO<12 and QK==false then
set QK=true
call PlaySoundBJ(QD)
call NXI(NYI,NJI,true)
elseif GJO==20 then
if GetRandomInt(0,10)<6 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,"|c006699CC"+GetObjectName(1848659015)+"|r")
endif
elseif GJO==30 then
call ExecuteFunc("FCO")
else
call NXI(NYI,NJI,true)
endif
return false
endfunction
function GLO takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and GetOwningPlayer(GetFilterUnit())!=EO then
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true then
set N90=GetFilterUnit()
else
set NA0=GetFilterUnit()
endif
endif
return false
endfunction
function GMO takes nothing returns nothing
local unit AKO=GetAttacker()
local unit XTI=GetTriggerUnit()
local group g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(AKO),GetUnitY(AKO),900,Condition(function GLO))
call ZYI(g)
call DisableTrigger(GetTriggeringTrigger())
if N90!=null then
call IssueTargetOrder(AKO,"attack",N90)
call GroupAddUnit(NB0,AKO)
elseif IsUnitType(XTI,UNIT_TYPE_HERO)==true and NA0!=null then
call IssueTargetOrder(AKO,"attack",NA0)
call GroupAddUnit(NB0,AKO)
endif
call EnableTrigger(GetTriggeringTrigger())
set N90=null
set NA0=null
set AKO=null
set XTI=null
set g=null
endfunction
function GNO takes nothing returns nothing
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<1 then
call GroupRemoveUnit(NB0,GetEnumUnit())
endif
if GetUnitCurrentOrder(GetEnumUnit())!=OrderId("attack")then
call GroupRemoveUnit(NB0,GetEnumUnit())
call IssuePointOrderLoc(GetEnumUnit(),"attack",A2[GetUnitAbilityLevel(GetEnumUnit(),O2)])
endif
endfunction
function GSO takes nothing returns boolean
call ForGroup(NB0,function GNO)
return false
endfunction
function GRO takes string s returns nothing
set NE0=NE0+1
set NF0[NE0]=s
endfunction
function GPO takes nothing returns boolean
local integer i=1
loop
exitwhen i>NE0
call ExecuteFunc(NF0[i])
set i=i+1
endloop
call ExecuteFunc("W41")
call ExecuteFunc("S11")
return false
endfunction
function GQO takes unit V8I returns nothing
local trigger t=CreateTrigger()
call SaveBoolean(ZY,(GetHandleId(GetTriggerUnit())),(38),(true))
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function GPO))
set t=null
endfunction
function GUO takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())!=1211122232 and GetUnitTypeId(GetTriggerUnit())!=1211117645 and GetUnitTypeId(GetTriggerUnit())!=1211119431 and GetUnitTypeId(GetTriggerUnit())!=1211117657 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetTriggerUnit())==false and HaveSavedBoolean(ZY,GetHandleId(GetTriggerUnit()),38)==false then
if NC0 and(GetUnitTypeId(GetTriggerUnit())!=1328558160 or(GetUnitTypeId(GetTriggerUnit())==1328558160 and ND0))then
call GQO(GetTriggerUnit())
endif
endif
return false
endfunction
function HIO takes nothing returns boolean
local unit u
local real H1O
local boolean HOO=YAI()
set u=IA0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IB0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IC0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=ID0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IE0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IF0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IG0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IH0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IZ0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IV0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
set u=IW0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set H1O=GetUnitState(u,UNIT_STATE_MANA)
if HOO then
set H1O=YQI(H1O-25,0)
else
set H1O=YPI(H1O+5,300)
endif
call SetUnitState(u,UNIT_STATE_MANA,H1O)
endif
return false
endfunction
function H4O takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(AK))==true then
set d=JAI(RJ,PJ,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<TJ then
set TJ=d
set OK=GetFilterUnit()
endif
endif
return false
endfunction
function H5O takes unit VCI,real x,real y returns unit
local group g=ZJI()
set OK=null
set AK=VCI
set TJ=99999
set RJ=x
set PJ=y
call GroupEnumUnitsInRange(g,x,y,2000,Condition(function H4O))
call ZYI(g)
set g=null
return OK
endfunction
function TeleportationEffect_Remove takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI
if GetSpellAbilityId()==1093808945 then
set XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call UnitRemoveAbility(XTI,1114205798)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function H6O takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location l
local real x
local real y
local unit XTI=GetSpellTargetUnit()
call V5I(V8I,4256,1)
if XTI==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
if GetSpellAbilityId()==1093751349 then
set XTI=PC1(V8I,x,y)
else
set XTI=H5O(V8I,x,y)
endif
set x=GetUnitX(XTI)
set y=GetUnitY(XTI)
else
set x=GetUnitX(GetSpellTargetUnit())
set y=GetUnitY(GetSpellTargetUnit())
endif
if(IsUnitAlly(V8I,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(V8I))or(D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0))then
call PingMinimapEx(x,y,3,255,255,255,false)
endif
set V8I=null
set l=null
endfunction
function TeleportationEffect_Main takes nothing returns boolean
if GetSpellAbilityId()==1093808945 then
call H6O()
endif
return false
endfunction
function H8O takes nothing returns nothing
call W2I(1214344551)
call W2I(1328558406)
call W2I(1160786506)
call W2I(1164277353)
call W2I(1160786502)
call W2I(1160786505)
call W2I(1160786520)
call W2I(1311780946)
endfunction
function H9O takes nothing returns nothing
if XBI(GetEnumUnit())and IsUnitAlly(GetEnumUnit(),CO[0])==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>0.5 then
call UnitRemoveAbility(GetEnumUnit(),1110456392)
call XNI(HQ,GetEnumUnit(),2,500)
endif
endfunction
function HAO takes nothing returns nothing
if XBI(GetEnumUnit())and IsUnitAlly(GetEnumUnit(),DO[0])==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>0.5 then
call UnitRemoveAbility(GetEnumUnit(),1110456392)
call XNI(B70,GetEnumUnit(),2,500)
endif
endfunction
function HBO takes nothing returns boolean
local group g=ZJI()
call GroupEnumUnitsInRect(g,H5,Condition(function HRI))
call ForGroup(g,function H9O)
call ZYI(g)
set g=ZJI()
call GroupEnumUnitsInRect(g,Z5,Condition(function HRI))
call ForGroup(g,function HAO)
call ZYI(g)
set g=null
return false
endfunction
function HDO takes string winner returns nothing
local integer i
local player p
local string id
local integer J1I=R2I(TimerGetElapsed(M)-N)
local integer NYI=J1I/60-1/2
local integer NJI=ModuloInteger(J1I,60)
call XZI()
set i=1
loop
exitwhen i>5
set p=CO[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(NN,id,"1",(I[GetPlayerId((p))]))
call StoreInteger(NN,id,"2",(O[GetPlayerId((p))]))
call StoreInteger(NN,id,"3",(A[GetPlayerId((p))]))
call StoreInteger(NN,id,"4",(B[GetPlayerId((p))]))
call StoreInteger(NN,id,"5",(D[GetPlayerId((p))]))
call StoreInteger(NN,id,"6",(GetPlayerState((p),PLAYER_STATE_RESOURCE_GOLD)))
call StoreInteger(NN,id,"7",(LoadInteger(ZY,(400+GetPlayerId((p))),(79))))
call StoreInteger(NN,id,"8_0",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(0)))))
call StoreInteger(NN,id,"8_1",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(1)))))
call StoreInteger(NN,id,"8_2",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(2)))))
call StoreInteger(NN,id,"8_3",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(3)))))
call StoreInteger(NN,id,"8_4",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(4)))))
call StoreInteger(NN,id,"8_5",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(5)))))
call StoreInteger(NN,id,"9",(GetUnitTypeId(L1[GetPlayerId((p))])))
call StoreInteger(NN,id,"id",i)
set p=DO[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(NN,id,"1",(I[GetPlayerId((p))]))
call StoreInteger(NN,id,"2",(O[GetPlayerId((p))]))
call StoreInteger(NN,id,"3",(A[GetPlayerId((p))]))
call StoreInteger(NN,id,"4",(B[GetPlayerId((p))]))
call StoreInteger(NN,id,"5",(D[GetPlayerId((p))]))
call StoreInteger(NN,id,"6",(GetPlayerState((p),PLAYER_STATE_RESOURCE_GOLD)))
call StoreInteger(NN,id,"7",(LoadInteger(ZY,(400+GetPlayerId((p))),(79))))
call StoreInteger(NN,id,"8_0",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(0)))))
call StoreInteger(NN,id,"8_1",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(1)))))
call StoreInteger(NN,id,"8_2",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(2)))))
call StoreInteger(NN,id,"8_3",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(3)))))
call StoreInteger(NN,id,"8_4",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(4)))))
call StoreInteger(NN,id,"8_5",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(5)))))
call StoreInteger(NN,id,"9",(GetUnitTypeId(L1[GetPlayerId((p))])))
call StoreInteger(NN,id,"id",i+5)
if GetLocalPlayer()==XO then
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"1")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"2")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"3")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"4")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"5")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"6")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"7")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"8_0")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"8_1")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"8_2")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"8_3")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"8_4")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"8_5")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"9")
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"id")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"1")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"2")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"3")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"4")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"5")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"6")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"7")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"8_0")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"8_1")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"8_2")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"8_3")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"8_4")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"8_5")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"9")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"id")
endif
set i=i+1
endloop
if NG0==false then
call StoreInteger(NN,"Global","Winner",NH0)
call StoreInteger(NN,"Global","m",NYI)
call StoreInteger(NN,"Global","s",NJI)
if GetLocalPlayer()==XO then
call SyncStoredInteger(NN,"Global","Winner")
call SyncStoredInteger(NN,"Global","m")
call SyncStoredInteger(NN,"Global","s")
endif
endif
endfunction
function IW1 takes nothing returns nothing
call HDO("1")
endfunction
function IV1 takes nothing returns nothing
local player p=NZ0
local string id=I2S(GetPlayerId(p))
call StoreInteger(NN,id,"8_0",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(0)))))
call StoreInteger(NN,id,"8_1",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(1)))))
call StoreInteger(NN,id,"8_2",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(2)))))
call StoreInteger(NN,id,"8_3",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(3)))))
call StoreInteger(NN,id,"8_4",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(4)))))
call StoreInteger(NN,id,"8_5",(GetItemTypeId(UnitItemInSlot(L1[GetPlayerId((p))],(5)))))
if GetLocalPlayer()==XO then
call SyncStoredInteger(NN,I2S(GetPlayerId(p)),"8_0")
call SyncStoredInteger(NN,I2S(GetPlayerId(p)),"8_1")
call SyncStoredInteger(NN,I2S(GetPlayerId(p)),"8_2")
call SyncStoredInteger(NN,I2S(GetPlayerId(p)),"8_3")
call SyncStoredInteger(NN,I2S(GetPlayerId(p)),"8_4")
call SyncStoredInteger(NN,I2S(GetPlayerId(p)),"8_5")
endif
endfunction
function HEO takes nothing returns boolean
call ExecuteFunc("EDO")
return false
endfunction
function HFO takes nothing returns nothing
call VJI(GetEnumUnit())
endfunction
function HGO takes nothing returns nothing
local group g=ZJI()
call GroupEnumUnitsInRange(g,0,0,12000,Condition(function S0I))
call ForGroup(g,function HFO)
call ZYI(g)
set g=null
endfunction
function HHO takes nothing returns nothing
set bj_changeLevelShowScores=true
call DisableTrigger(JK)
call DisableTrigger(KK)
call ExecuteFunc("N61")
if D2 then
call DisableTrigger(M60)
endif
call DisableTrigger(E50)
call ClearTextMessages()
call JDI(bj_FORCE_ALL_PLAYERS,60,K3+" "+GetObjectName(1848653108)+" www.getdota.com.")
set U2=true
call KJI()
call DisableTrigger(BG)
call DisableTrigger(UG)
call DisableTrigger(E40)
call ZKI()
endfunction
function HZO takes nothing returns nothing
local trigger t=CreateTrigger()
call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function HEO))
set NH0=2
set K3="|c0020c000"+GetObjectName(1848652623)+"|r"
call HHO()
call HGO()
call HDO("2")
set t=null
endfunction
function HVO takes nothing returns boolean
call SetUnitVertexColorBJ(BZ0,100,100,100,GetTriggerEvalCount(GetTriggeringTrigger()))
if GetTriggerEvalCount(GetTriggeringTrigger())==100 then
call ShowUnit(BZ0,false)
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function HWO takes nothing returns nothing
local trigger t=CreateTrigger()
call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function HEO))
set NH0=1
set K3="|c00ff0303"+GetObjectName(1848652622)+"|r"
call HHO()
call HGO()
call HDO("1")
call AddSpecialEffect("war3mapImported\\FrozenThronesDeath2.mdx",GetUnitX(BZ0)+150,GetUnitY(BZ0)+100)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function HVO))
set t=null
endfunction
function HYO takes real JHI returns boolean
return(100*GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE))<JHI
endfunction
function AntiTK_Building takes nothing returns boolean
return HYO(10)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==true and GetUnitTypeId(GetTriggerUnit())!=1702129516 and GetUnitTypeId(GetTriggerUnit())!=1970172012
endfunction
function AntiTK_Hero takes nothing returns boolean
return HYO(25)and(GetUnitAbilityLevel(GetTriggerUnit(),1112433775)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1111847784)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110454321)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458705)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458704)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455620)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455629)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455630)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455631)>0)
endfunction
function AntiTK_Creep takes nothing returns boolean
return HYO(50)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false or GetUnitTypeId(GetTriggerUnit())==1700946284 or GetUnitTypeId(GetTriggerUnit())==1697657398 or GetUnitTypeId(GetTriggerUnit())==1970107511 or GetUnitTypeId(GetTriggerUnit())==1966092370)
endfunction
function AntiTK_Exception takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==1966092371
endfunction
function HJO takes nothing returns nothing
if not((HYO(10)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==true and GetUnitTypeId(GetTriggerUnit())!=1702129516 and GetUnitTypeId(GetTriggerUnit())!=1970172012)or(HYO(25)and(GetUnitAbilityLevel(GetTriggerUnit(),1112433775)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1111847784)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110454321)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458705)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458704)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455620)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455629)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455630)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455631)>0))or(HYO(50)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false or GetUnitTypeId(GetTriggerUnit())==1700946284 or GetUnitTypeId(GetTriggerUnit())==1697657398 or GetUnitTypeId(GetTriggerUnit())==1970107511 or GetUnitTypeId(GetTriggerUnit())==1966092370))or(GetUnitTypeId(GetTriggerUnit())==1966092371))then
call IssueImmediateOrder(GetAttacker(),"stop")
endif
endfunction
function HKO takes nothing returns boolean
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call HJO()
elseif IsUnitType(GetAttacker(),UNIT_TYPE_HERO)==true or NCI(GetAttacker())then
set NV0=GetPlayerId(GetOwningPlayer(GetAttacker()))
if J80[NV0]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitIllusion(GetAttacker())==false and TPI(GetAttacker(),F20[GV0])==true then
call SE1()
endif
if JB0[NV0]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and TPI(GetAttacker(),F20[HU0])==true then
call SN1()
endif
if JD0[NV0]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and TPI(GetAttacker(),F20[ZB0])==true then
call SY1()
elseif JE0[NV0]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and TPI(GetAttacker(),F20[HQ0])==true then
call SM1()
endif
elseif GetUnitAbilityLevel(GetAttacker(),1093744467)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false then
call GMO()
endif
return false
endfunction
function HMO takes nothing returns nothing
call YQ1()
call YU1()
endfunction
function HSO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT or(LoadBoolean(ZY,(GetHandleId(V8I)),(140)))==true then
if(LoadBoolean(ZY,(GetHandleId(V8I)),(140)))==true then
call SaveBoolean(ZY,(GetHandleId(V8I)),(140),(false))
call SaveInteger(ZY,(GetHandleId((V8I))),((4259)),(2))
call UnitRemoveAbility(V8I,1093678162)
call NLI(V8I,false)
call PauseUnit(V8I,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetSpellTargetUnit()==V8I and GetSpellAbilityId()==NX0 and(GetPlayerSlotState(GetOwningPlayer((V8I)))==PLAYER_SLOT_STATE_LEFT)and((LoadInteger(ZY,(GetHandleId((V8I))),((4259))))==1)==true then
call SaveInteger(ZY,(GetHandleId((V8I))),((4259)),(2))
call UnitRemoveAbility(V8I,1093678162)
call NLI(V8I,false)
call PauseUnit(V8I,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
elseif KMI(V8I)==false then
call SetUnitX(V8I,x)
call SetUnitY(V8I,y)
call SaveInteger(ZY,(GetHandleId((V8I))),((4259)),(1))
call UnitAddAbility(V8I,1093678162)
call NLI(V8I,true)
call PauseUnit(V8I,true)
endif
set V8I=null
set t=null
return false
endfunction
function HTO takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetSpellTargetUnit()
call SaveBoolean(ZY,(GetHandleId(V8I)),(140),(false))
call SaveInteger(ZY,(GetHandleId((V8I))),((4259)),(1))
call UnitAddAbility(V8I,1093678162)
call NLI(V8I,true)
call PauseUnit(V8I,true)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(6),((GetUnitX(V8I))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(V8I))*1.0))
call TriggerRegisterTimerEvent(t,1,true)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HSO))
set t=null
set V8I=null
endfunction
function HRO takes nothing returns boolean
if GetSpellAbilityId()==NW0 and(GetPlayerSlotState(GetOwningPlayer((GetSpellTargetUnit())))==PLAYER_SLOT_STATE_LEFT)and((LoadInteger(ZY,(GetHandleId((GetSpellTargetUnit()))),((4259))))==1)==false then
call HTO()
elseif(GetSpellAbilityId()==NX0 or GetSpellAbilityId()==NW0)and(GetPlayerSlotState(GetOwningPlayer((GetSpellTargetUnit())))==PLAYER_SLOT_STATE_LEFT)==false then
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652366))
endif
return false
endfunction
function HQO takes destructable d returns boolean
local real x=GetDestructableX(d)
local real y=GetDestructableY(d)
local group g=ZJI()
local boolean HUO
call GroupEnumUnitsInRange(g,x,y,250,Condition(function SMI))
set HUO=FirstOfGroup(g)!=null
call ZYI(g)
set g=null
return HUO
endfunction
function Z0O takes nothing returns nothing
if XCI(GetEnumDestructable())and GetDestructableLife(GetEnumDestructable())<1 and GetDestructableTypeId(GetEnumDestructable())!=1110454322 and GetDestructableTypeId(GetEnumDestructable())!=1110454323 then
if HQO(GetEnumDestructable())==false then
call DestructableRestoreLife(GetEnumDestructable(),GetDestructableMaxLife(GetEnumDestructable()),false)
if TL[GetPlayerId(GetLocalPlayer())]==1 and GetDestructableTypeId(GetEnumDestructable())==1096053874 then
call SetDestructableAnimation(GetEnumDestructable(),"stand alternate")
endif
endif
endif
endfunction
function ZIO takes nothing returns nothing
call EnumDestructablesInRectAll(bj_mapInitialPlayableArea,function Z0O)
endfunction
function ZOO takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1848651852 then
if IsUnitIllusion(GetAttacker())==true then
call KillUnit(GetAttacker())
elseif IsUnitInRegion(NJ0,GetAttacker())==false then
call Y3I(GetOwningPlayer(GetAttacker()),GetObjectName(1848652597))
call IssueImmediateOrder(GetAttacker(),"stop")
endif
endif
return false
endfunction
function Z3O takes nothing returns boolean
return GetUnitTypeId(GetEnteringUnit())==1697656901 or GetUnitTypeId(GetEnteringUnit())==1697657394
endfunction
function Z4O takes nothing returns nothing
call ShowUnitHide(GetEnteringUnit())
call SetUnitPathing(GetEnteringUnit(),false)
call SetUnitInvulnerable(GetEnteringUnit(),true)
call UnitApplyTimedLifeBJ(20.00,1112820806,GetEnteringUnit())
endfunction
function Z6O takes nothing returns boolean
if(GetUnitTypeId(GetDyingUnit())==1697656914)then
return true
endif
if(GetUnitTypeId(GetDyingUnit())==1697657137)then
return true
endif
if(GetUnitTypeId(GetDyingUnit())==1697656915)then
return true
endif
if(GetUnitTypeId(GetDyingUnit())==1697657145)then
return true
endif
return false
endfunction
function Z7O takes nothing returns boolean
if(not(GetDyingUnit()==I20))then
return false
endif
if(not(KMI(I30)==true))then
return false
endif
return true
endfunction
function Z8O takes nothing returns boolean
if(not(GetDyingUnit()==I30))then
return false
endif
if(not(KMI(I20)==true))then
return false
endif
return true
endfunction
function Z9O takes nothing returns nothing
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set J[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=J[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
if(GetDyingUnit()==TQ)then
call P7I("Tower"+I2S(0)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(QQ,false)
call WSI(GetKillingUnit(),1)
endif
if(GetDyingUnit()==RQ)then
call P7I("Tower"+I2S(0)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(UQ,false)
call WSI(GetKillingUnit(),1)
endif
if(GetDyingUnit()==PQ)then
call P7I("Tower"+I2S(0)+I2S(1)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(I00,false)
call WSI(GetKillingUnit(),1)
endif
if(GetDyingUnit()==QQ)then
call P7I("Tower"+I2S(0)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(II0,false)
call WSI(GetKillingUnit(),2)
endif
if(GetDyingUnit()==UQ)then
call P7I("Tower"+I2S(0)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(I10,false)
call WSI(GetKillingUnit(),2)
endif
if(GetDyingUnit()==I00)then
call P7I("Tower"+I2S(0)+I2S(2)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(IO0,false)
call WSI(GetKillingUnit(),2)
endif
if(GetDyingUnit()==II0)then
call P7I("Tower"+I2S(0)+I2S(3)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call WSI(GetKillingUnit(),3)
call NLI(I40,false)
call NLI(I70,false)
call NLI(I20,false)
call NLI(I30,false)
call NLI(IX0,false)
call NLI(IY0,false)
call NLI(IJ0,false)
call NLI(IK0,false)
call NLI(IA0,false)
call NLI(IB0,false)
call NLI(IC0,false)
call NLI(ID0,false)
call NLI(IE0,false)
call NLI(IF0,false)
call NLI(IG0,false)
call NLI(IH0,false)
call NLI(IZ0,false)
call NLI(IV0,false)
call NLI(IW0,false)
endif
if(GetDyingUnit()==I10)then
call P7I("Tower"+I2S(0)+I2S(3)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call WSI(GetKillingUnit(),3)
call NLI(I50,false)
call NLI(I80,false)
call NLI(I20,false)
call NLI(I30,false)
call NLI(IX0,false)
call NLI(IY0,false)
call NLI(IJ0,false)
call NLI(IK0,false)
call NLI(IA0,false)
call NLI(IB0,false)
call NLI(IC0,false)
call NLI(ID0,false)
call NLI(IE0,false)
call NLI(IF0,false)
call NLI(IG0,false)
call NLI(IH0,false)
call NLI(IZ0,false)
call NLI(IV0,false)
call NLI(IW0,false)
endif
if(GetDyingUnit()==IO0)then
call P7I("Tower"+I2S(0)+I2S(3)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call WSI(GetKillingUnit(),3)
call NLI(I60,false)
call NLI(I90,false)
call NLI(I20,false)
call NLI(I30,false)
call NLI(IX0,false)
call NLI(IY0,false)
call NLI(IJ0,false)
call NLI(IK0,false)
call NLI(IA0,false)
call NLI(IB0,false)
call NLI(IC0,false)
call NLI(ID0,false)
call NLI(IE0,false)
call NLI(IF0,false)
call NLI(IG0,false)
call NLI(IH0,false)
call NLI(IZ0,false)
call NLI(IV0,false)
call NLI(IW0,false)
endif
if GetDyingUnit()==I20 or GetDyingUnit()==I30 then
call P7I("Tower"+I2S(0)+I2S(4)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call WSI(GetKillingUnit(),4)
endif
if(Z7O())then
call NLI(SQ,false)
endif
if(Z8O())then
call NLI(SQ,false)
endif
endfunction
function ZBO takes nothing returns boolean
if(GetUnitTypeId(GetDyingUnit())==1966092365)then
return true
endif
if(GetUnitTypeId(GetDyingUnit())==1966092356)then
return true
endif
if(GetUnitTypeId(GetDyingUnit())==1966092366)then
return true
endif
if(GetUnitTypeId(GetDyingUnit())==1966092372)then
return true
endif
return false
endfunction
function ZCO takes nothing returns boolean
if(not(GetDyingUnit()==BS0))then
return false
endif
if(not(KMI(BT0)==true))then
return false
endif
return true
endfunction
function ZDO takes nothing returns boolean
if(not(GetDyingUnit()==BT0))then
return false
endif
if(not(KMI(BS0)==true))then
return false
endif
return true
endfunction
function ZEO takes nothing returns nothing
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set J[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=J[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
if(GetDyingUnit()==BV0)then
call P7I("Tower"+I2S(1)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(BY0,false)
call WSI(GetKillingUnit(),1)
endif
if(GetDyingUnit()==BW0)then
call P7I("Tower"+I2S(1)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(BJ0,false)
call WSI(GetKillingUnit(),1)
endif
if(GetDyingUnit()==BX0)then
call P7I("Tower"+I2S(1)+I2S(1)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(BK0,false)
call WSI(GetKillingUnit(),1)
endif
if(GetDyingUnit()==BY0)then
call P7I("Tower"+I2S(1)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(BL0,false)
call WSI(GetKillingUnit(),2)
endif
if(GetDyingUnit()==BJ0)then
call P7I("Tower"+I2S(1)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(BM0,false)
call WSI(GetKillingUnit(),2)
endif
if(GetDyingUnit()==BK0)then
call P7I("Tower"+I2S(1)+I2S(2)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call NLI(BN0,false)
call WSI(GetKillingUnit(),2)
endif
if(GetDyingUnit()==BL0)then
call P7I("Tower"+I2S(1)+I2S(3)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call WSI(GetKillingUnit(),3)
call NLI(BR0,false)
call NLI(BU0,false)
call NLI(BS0,false)
call NLI(BT0,false)
call NLI(CB0,false)
call NLI(CC0,false)
call NLI(CD0,false)
call NLI(CE0,false)
call NLI(C10,false)
call NLI(CO0,false)
call NLI(C20,false)
call NLI(C30,false)
call NLI(C40,false)
call NLI(C50,false)
call NLI(C60,false)
call NLI(C70,false)
call NLI(C80,false)
call NLI(C90,false)
call NLI(CA0,false)
endif
if(GetDyingUnit()==BM0)then
call P7I("Tower"+I2S(1)+I2S(3)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call WSI(GetKillingUnit(),3)
call NLI(BP0,false)
call NLI(C00,false)
call NLI(BS0,false)
call NLI(BT0,false)
call NLI(CB0,false)
call NLI(CC0,false)
call NLI(CD0,false)
call NLI(CE0,false)
call NLI(C10,false)
call NLI(CO0,false)
call NLI(C20,false)
call NLI(C30,false)
call NLI(C40,false)
call NLI(C50,false)
call NLI(C60,false)
call NLI(C70,false)
call NLI(C80,false)
call NLI(C90,false)
call NLI(CA0,false)
endif
if(GetDyingUnit()==BN0)then
call P7I("Tower"+I2S(1)+I2S(3)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call WSI(GetKillingUnit(),3)
call NLI(BQ0,false)
call NLI(CI0,false)
call NLI(BS0,false)
call NLI(BT0,false)
call NLI(CB0,false)
call NLI(CC0,false)
call NLI(CD0,false)
call NLI(CE0,false)
call NLI(C10,false)
call NLI(CO0,false)
call NLI(C20,false)
call NLI(C30,false)
call NLI(C40,false)
call NLI(C50,false)
call NLI(C60,false)
call NLI(C70,false)
call NLI(C80,false)
call NLI(C90,false)
call NLI(CA0,false)
endif
if GetDyingUnit()==BS0 or GetDyingUnit()==BT0 then
call P7I("Tower"+I2S(1)+I2S(4)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call WSI(GetKillingUnit(),4)
endif
if(ZCO())then
call NLI(BZ0,false)
endif
if(ZDO())then
call NLI(BZ0,false)
endif
endfunction
function ZGO takes nothing returns boolean
local integer x=0
if GetPlayerSlotState(CO[1])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(CO[2])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(CO[3])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(CO[4])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(CO[5])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(DO[1])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(DO[2])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(DO[3])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(DO[4])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(DO[5])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
return x==9
endfunction
function SinglePlayer_Condition takes nothing returns boolean
return bj_isSinglePlayer and ZGO()
endfunction
function ZHO takes nothing returns nothing
set NK0=false
endfunction
function ZZO takes nothing returns nothing
set NL0=true
endfunction
function ZVO takes nothing returns nothing
set NK0=true
endfunction
function ZWO takes nothing returns nothing
set YK=false
endfunction
function ZXO takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function ZYO takes nothing returns nothing
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,DO[0],Condition(function ZXO))
call ZYI(g)
set g=null
set X3=true
endfunction
function ZJO takes nothing returns nothing
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,CO[0],Condition(function ZXO))
call ZYI(g)
set g=null
set X3=true
endfunction
function ZKO takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1865429044 or GetUnitTypeId(GetFilterUnit())==1868921189 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function ZLO takes nothing returns nothing
local group g=ZJI()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function ZKO))
call ZYI(g)
set g=null
set X3=true
endfunction
function ZMO takes nothing returns nothing
call ZJO()
call ZYO()
set X3=true
endfunction
function ZNO takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
call SetHeroLevel(GetFilterUnit(),GetHeroLevel(GetFilterUnit())+YTI(MJ,1),true)
endif
return false
endfunction
function ZSO takes nothing returns nothing
local string ZTO=SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString()))
local integer WTI=S2I(ZTO)
local group g=ZJI()
if WTI<1 then
set WTI=1
endif
set MJ=WTI
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function ZNO))
call ZYI(g)
set g=null
set X3=true
endfunction
function ZRO takes nothing returns nothing
call TriggerExecute(BG)
set X3=true
endfunction
function ZPO takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
call UnitResetCooldown(GetFilterUnit())
call TimerStart(E70[GetPlayerId((GetOwningPlayer(GetFilterUnit())))],0,false,null)
call SetUnitState(GetFilterUnit(),UNIT_STATE_LIFE,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE))
call SetUnitState(GetFilterUnit(),UNIT_STATE_MANA,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_MANA))
endif
return false
endfunction
function ZQO takes nothing returns nothing
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function ZPO))
call ZYI(g)
set g=null
set X3=true
endfunction
function ZUO takes nothing returns nothing
call KillUnit(L1[GetPlayerId(GetTriggerPlayer())])
set X3=true
endfunction
function V0O takes nothing returns nothing
local string VIO=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
local integer Q1I=S2I(VIO)
if Q1I<0 or Q1I>24 then
set Q1I=0
endif
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,Q1I)
set X3=true
endfunction
function V1O takes nothing returns nothing
local string VOO=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
local integer WLI=S2I(VOO)
call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)+WLI)
set X3=true
endfunction
function V2O takes nothing returns nothing
local unit MKI=L1[GetPlayerId(GetTriggerPlayer())]
local player WN1=GetTriggerPlayer()
local location WJ1
if VNI(WN1)then
set WJ1=GetRectCenter(T3)
else
set WJ1=GetRectCenter(A4)
endif
if U2==false and KMI(MKI)then
call IM1(MKI,WN1,GetLocationX(WJ1),GetLocationY(WJ1),true)
if WV1(MKI)==false or GetUnitAbilityLevel(MKI,1093684567)==0 then
call ReviveHeroLoc(MKI,WJ1,true)
else
call WY1(MKI,WJ1)
endif
endif
call RemoveLocation(WJ1)
set MKI=null
set WN1=null
set WJ1=null
endfunction
function V3O takes nothing returns nothing
local unit XSI=L1[GetPlayerId(GetTriggerPlayer())]
local player V4O
local unit V5O
local real x=GetRectCenterX(J5)
local real y=GetRectCenterX(J5)
if VNI(GetOwningPlayer(XSI))then
set V4O=CO[1]
else
set V4O=DO[1]
endif
set V5O=CreateUnit(V4O,1211117616,x,y,0)
call SetHeroLevel(V5O,10,false)
set XSI=null
set V5O=null
set V4O=null
endfunction
function V6O takes nothing returns nothing
call TriggerEvaluate(XW0)
endfunction
function V7O takes nothing returns nothing
call TriggerEvaluate(SG)
endfunction
function V8O takes nothing returns nothing
call EnumDestructablesInRectAll(bj_mapInitialPlayableArea,function Z0O)
endfunction
function V9O takes nothing returns boolean
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** "+GetObjectName(1848653382)+" ****")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,GetObjectName(1848653622)+" -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** "+GetObjectName(1848653382)+" ****")
return false
endfunction
function VAO takes nothing returns nothing
local player OnlyPlayer=XO
local trigger t
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,GetObjectName(1848653622)+" -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function V9O))
call TriggerRegisterTimerEvent(t,GetRandomReal(60,100),false)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-lvlup",false)
call TriggerAddAction(t,function ZSO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-spawncreeps",true)
call TriggerAddAction(t,function ZRO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-refresh",true)
call TriggerAddAction(t,function ZQO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-kill",true)
call TriggerAddAction(t,function ZUO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-gold",false)
call TriggerAddAction(t,function V1O)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-time",false)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-time",false)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-time",false)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-time",false)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-time",false)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-time",false)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-time",false)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-time",false)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-time",false)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-time",false)
call TriggerAddAction(t,function V0O)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-powerup",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-powerup",true)
call TriggerAddAction(t,function V6O)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-killall",true)
call TriggerAddAction(t,function ZMO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-killsent",true)
call TriggerAddAction(t,function ZJO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-killscourge",true)
call TriggerAddAction(t,function ZYO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-neutrals",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-neutrals",true)
call TriggerAddAction(t,function V7O)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-noherolimit",true)
call TriggerAddAction(t,function ZWO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-trees",true)
call TriggerAddAction(t,function V8O)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-killwards",true)
call TriggerAddAction(t,function ZLO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-spawnoff",true)
call TriggerAddAction(t,function ZVO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-spawnon",true)
call TriggerAddAction(t,function ZHO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-roshan",true)
call TriggerAddAction(t,function ZZO)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-respawn",true)
call TriggerAddAction(t,function V2O)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-dummy",true)
call TriggerAddAction(t,function V3O)
endfunction
function VCO takes nothing returns boolean
return not B0
endfunction
function VDO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit NDI=(LoadUnitHandle(ZY,(V0I),(26)))
if GetUnitTypeId(NDI)!=1852010352 then
call UnitResetCooldown(NDI)
call SetUnitManaPercentBJ(NDI,100)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set NDI=null
return false
endfunction
function VEO takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function VDO))
call SaveUnitHandle(ZY,(V0I),(26),(GetTriggerUnit()))
set t=null
endfunction
function VFO takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer VGO=W0I(AO)+W0I(BO)
local integer NumRequired=YSI(VGO,VGO/2+1)
local integer V0I=GetHandleId(t)
if SS0==false then
set NM0=true
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60.00," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.00,GetObjectName(1848653623))
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.00,GetObjectName(1848653624))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function VEO)
endif
endfunction
function VZO takes nothing returns boolean
if V91(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false then
call Q4I(GetOwningPlayer(GetTriggerUnit()))
call P7I("Level"+I2S(GetHeroLevel(GetTriggerUnit())),GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
endif
return false
endfunction
function VWO takes nothing returns nothing
if SS0==false then
call VAO()
call ZSI(GetTriggeringTrigger())
endif
endfunction
function VXO takes nothing returns boolean
if B0==false and(bj_isSinglePlayer and ZGO())==false then
call VWO()
endif
return false
endfunction
function VJO takes nothing returns boolean
local integer i=0
local real VKO
local real VLO
local real x
local real y
local boolean VMO
loop
exitwhen i>11
if GetLocalPlayer()==Player(i)then
set VKO=GetCameraTargetPositionX()
set VLO=GetCameraTargetPositionY()
endif
set i=i+1
endloop
set i=0
call PauseGame(true)
call TriggerSleepAction(0)
loop
exitwhen i>11
if GetLocalPlayer()==Player(i)then
call SetCameraPosition(VKO+1,VLO+1)
endif
set i=i+1
endloop
call TriggerSleepAction(0)
call PauseGame(false)
set i=0
loop
exitwhen i>11
if GetLocalPlayer()==Player(i)then
set x=GetCameraTargetPositionX()
if x==VKO+1 then
set VMO=false
else
set VMO=true
endif
call SetCameraPosition(VKO,VLO)
endif
set i=i+1
endloop
return VMO
endfunction
function VNO takes nothing returns nothing
call CinematicModeBJ(true,bj_FORCE_ALL_PLAYERS)
call PauseGame(false)
call TriggerSleepAction(.0)
call EnableUserControl(false)
call TriggerSleepAction(.0)
if VJO()==false then
set NN0=true
endif
call EnableUserControl(true)
call HII(1)
call CinematicModeBJ(false,bj_FORCE_ALL_PLAYERS)
endfunction
function VSO takes nothing returns boolean
local integer i=1
local unit V8I
loop
exitwhen i>5
set V8I=L1[GetPlayerId(CO[i])]
if V8I!=null and KMI(V8I)==false and IsUnitEnemy(V8I,GetLocalPlayer())==true then
if NN0 and(D2==false or(D2==true and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0)))then
if IsUnitVisible(V8I,GetLocalPlayer())==false then
if MK==2 then
call P4I(V8I)
endif
else
if MK==2 then
call P2I(V8I)
endif
endif
endif
endif
set V8I=L1[GetPlayerId(DO[i])]
if V8I!=null and KMI(V8I)==false and IsUnitEnemy(V8I,GetLocalPlayer())==true then
if NN0 and(D2==false or(D2==true and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0)))then
if IsUnitVisible(V8I,GetLocalPlayer())==false then
if MK==2 then
call P4I(V8I)
endif
else
if MK==2 then
call P2I(V8I)
endif
endif
endif
endif
set i=i+1
endloop
set V8I=null
return false
endfunction
function VTO takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerAddCondition(t,Condition(function VSO))
set t=null
endfunction
function VRO takes nothing returns nothing
call VNO()
call VTO()
endfunction
function VPO takes unit VCI returns boolean
return(GetOwningPlayer(VCI)==CO[0])or(GetOwningPlayer(VCI)==DO[0])
endfunction
function VQO takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),0)
call IssuePointOrderLoc(GetEnumUnit(),"attack",(A2[GetUnitAbilityLevel((GetEnumUnit()),O2)]))
endfunction
function VUO takes nothing returns nothing
call IssueTargetOrder(GetEnumUnit(),"attack",NR0)
call GroupAddUnit(NT0,GetEnumUnit())
call SetUnitUserData(GetEnumUnit(),NP0)
endfunction
function W0O takes nothing returns boolean
local integer id=GetUnitTypeId(GetFilterUnit())
if id==1700946284 or id==1697657398 or id==1970107511 or id==1966092370 then
return false
endif
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(NR0))and(GetOwningPlayer(GetFilterUnit())==CO[0]or GetOwningPlayer(GetFilterUnit())==DO[0])and GetUnitUserData(GetFilterUnit())==0 then
return true
endif
return false
endfunction
function WIO takes nothing returns nothing
if GetUnitCurrentOrder(GetEnumUnit())==0 and IsUnitInRange(GetEnumUnit(),NR0,GetUnitAcquireRange(GetEnumUnit()))==false then
call GroupRemoveUnit(NT0,GetEnumUnit())
call SetUnitUserData(GetEnumUnit(),0)
call IssuePointOrderLoc(GetEnumUnit(),"attack",(A2[GetUnitAbilityLevel((GetEnumUnit()),O2)]))
endif
endfunction
function W1O takes nothing returns nothing
local integer V0I=GetHandleId((LoadUnitHandle(ZY,(GetHandleId(GetExpiredTimer())),(2))))
local integer WOO=(LoadInteger(ZY,(V0I),(143)))
local group W2O=(LoadGroupHandle(ZY,(V0I),(144)))
set NS0[WOO]=null
call ForGroup(W2O,function VQO)
call GroupClear(W2O)
set W2O=null
endfunction
function W3O takes unit V8I,unit SF1 returns nothing
local integer V0I=GetHandleId(V8I)
local group W2O=(LoadGroupHandle(ZY,(V0I),(144)))
local integer WOO=(LoadInteger(ZY,(V0I),(143)))
local unit W4O=NS0[WOO]
local group g
if W4O!=null and W4O!=SF1 then
call ForGroup(W2O,function VQO)
call GroupClear(W2O)
endif
set NS0[WOO]=SF1
set NT0=W2O
set NR0=SF1
set NP0=WOO
call ForGroup(W2O,function WIO)
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(SF1),GetUnitY(SF1),500,Condition(function W0O))
call ForGroup(g,function VUO)
call ZYI(g)
call TimerStart((LoadTimerHandle(ZY,(V0I),(141))),2,false,function W1O)
set W2O=null
set W4O=null
set g=null
endfunction
function W5O takes nothing returns boolean
local unit V8I=GetTriggerUnit()
local unit XTI=GetOrderTargetUnit()
local integer W6O=GetIssuedOrderId()
local integer WOO
if IsUnitType(XTI,UNIT_TYPE_HERO)==true and IsUnitIllusion(XTI)==false and(W6O==851983 or W6O==851971)and IsUnitEnemy(XTI,GetOwningPlayer(V8I))and IsUnitVisible(V8I,GetOwningPlayer(XTI))then
set WOO=(LoadInteger(ZY,(GetHandleId(XTI)),(143)))
if NS0[WOO]==null or NS0[WOO]==XTI or KMI(NS0[WOO])then
call W3O(XTI,V8I)
endif
endif
set V8I=null
set XTI=null
return false
endfunction
function W7O takes nothing returns boolean
local unit V8I=GetAttacker()
local unit XTI=GetTriggerUnit()
local integer W6O=GetIssuedOrderId()
local integer WOO
if VPO(V8I)==false then
set WOO=(LoadInteger(ZY,(GetHandleId(XTI)),(143)))
if NS0[WOO]==null or NS0[WOO]==XTI or KMI(NS0[WOO])then
call W3O(XTI,V8I)
endif
endif
set V8I=null
set XTI=null
return false
endfunction
function W8O takes unit V8I returns nothing
local group g
local trigger t
local timer tm
local integer V0I=GetHandleId(V8I)
set NQ0=NQ0+1
call SaveBoolean(ZY,(V0I),(142),(true))
call SaveInteger(ZY,(V0I),(143),(NQ0))
set g=ZJI()
call SaveGroupHandle(ZY,(V0I),(144),(g))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function W5O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function W7O))
set tm=CreateTimer()
call SaveTimerHandle(ZY,(GetHandleId(V8I)),(141),(tm))
call SaveUnitHandle(ZY,(GetHandleId(tm)),(2),(V8I))
set g=null
set t=null
endfunction
function W9O takes nothing returns boolean
if XVI(GetTriggerUnit())and(LoadBoolean(ZY,(GetHandleId(GetTriggerUnit())),(142)))==false then
call W8O(GetTriggerUnit())
endif
return false
endfunction
function WBO takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==CO[0]then
call SetUnitAbilityLevel(GetTriggerUnit(),O2,5)
if NS0[GetUnitUserData(GetTriggerUnit())]==null then
call SetUnitUserData(GetTriggerUnit(),0)
call IssuePointOrderLoc(GetTriggerUnit(),"attack",(A2[GetUnitAbilityLevel((GetTriggerUnit()),O2)]))
endif
elseif GetOwningPlayer(GetTriggerUnit())==DO[0]then
call SetUnitAbilityLevel(GetTriggerUnit(),O2,1)
if NS0[GetUnitUserData(GetTriggerUnit())]==null then
call SetUnitUserData(GetTriggerUnit(),0)
call IssuePointOrderLoc(GetTriggerUnit(),"attack",(A2[GetUnitAbilityLevel((GetTriggerUnit()),O2)]))
endif
endif
return false
endfunction
constant function InvisibilityUnitId takes nothing returns integer
return 1966092354
endfunction
function WDO takes nothing returns nothing
local unit UO1=GetTriggerUnit()
local unit WEO=(LoadUnitHandle(ZY,(GetHandleId(UO1)),(145)))
call RemoveUnit(WEO)
endfunction
function WFO takes nothing returns nothing
local group g
local unit UO1
local unit WEO
local trigger t
local integer i
set t=CreateTrigger()
call TriggerAddAction(t,function WDO)
set g=ZJI()
call GroupEnumUnitsOfPlayer(g,CO[0],Condition(function HRI))
loop
set UO1=FirstOfGroup(g)
exitwhen UO1==null
call GroupRemoveUnit(g,UO1)
if GetUnitAbilityLevel(UO1,1097102451)>0 or GetUnitAbilityLevel(UO1,1098150517)>0 then
call TriggerRegisterUnitEvent(t,UO1,EVENT_UNIT_DEATH)
set WEO=CreateUnit(CO[1],(1966092354),-5000,-5100,0)
call SetUnitScale(WEO,0,0,0)
call SetUnitPathing(WEO,false)
call SetUnitInvulnerable(WEO,true)
call SetUnitX(WEO,GetUnitX(UO1))
call SetUnitY(WEO,GetUnitY(UO1))
call SaveUnitHandle(ZY,(GetHandleId(UO1)),(145),(WEO))
endif
endloop
call ZYI(g)
set g=ZJI()
call GroupEnumUnitsOfPlayer(g,DO[0],Condition(function HRI))
loop
set UO1=FirstOfGroup(g)
exitwhen UO1==null
call GroupRemoveUnit(g,UO1)
if GetUnitAbilityLevel(UO1,1097102451)>0 or GetUnitAbilityLevel(UO1,1098150517)>0 then
call TriggerRegisterUnitEvent(t,UO1,EVENT_UNIT_DEATH)
set WEO=CreateUnit(DO[1],(1966092354),3400,4400,0)
call SetUnitScale(WEO,0,0,0)
call SetUnitPathing(WEO,false)
call SetUnitInvulnerable(WEO,true)
call SetUnitX(WEO,GetUnitX(UO1))
call SetUnitY(WEO,GetUnitY(UO1))
call SaveUnitHandle(ZY,(GetHandleId(UO1)),(145),(WEO))
endif
endloop
call ZYI(g)
endfunction
function WHO takes nothing returns nothing
local unit WZO=GetTriggerUnit()
local unit XTI=NS0[GetUnitUserData(WZO)]
call SetUnitPosition(WZO,GetUnitX(WZO),GetUnitY(WZO))
if XTI!=null and KMI(XTI)==false and IsUnitVisible(XTI,GetOwningPlayer(XTI))then
call IssueTargetOrder(WZO,"attack",XTI)
else
call DisableTrigger(GetTriggeringTrigger())
call IssuePointOrderLoc(WZO,"attack",(A2[GetUnitAbilityLevel((WZO),O2)]))
call EnableTrigger(GetTriggeringTrigger())
endif
set WZO=null
set XTI=null
endfunction
function WVO takes nothing returns boolean
if VPO(GetTriggerUnit())then
call WHO()
endif
return false
endfunction
function WWO takes nothing returns nothing
local unit WZO=GetTriggerUnit()
local unit XTI=NS0[GetUnitUserData(WZO)]
call SetUnitPosition(WZO,GetUnitX(WZO),GetUnitY(WZO))
if XTI!=null and KMI(XTI)==false and IsUnitVisible(XTI,GetOwningPlayer(XTI))then
call IssueTargetOrder(WZO,"attack",XTI)
else
call DisableTrigger(GetTriggeringTrigger())
call IssuePointOrderLoc(WZO,"attack",(A2[GetUnitAbilityLevel((WZO),O2)]))
call EnableTrigger(GetTriggeringTrigger())
endif
set WZO=null
set XTI=null
endfunction
function WXO takes nothing returns boolean
if GetIssuedOrderId()==851986 then
call WWO()
endif
return false
endfunction
function WYO takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==CO[0]then
if IsUnitFogged(GetAttacker(),CO[1])or IsUnitFogged(GetAttacker(),DO[1])then
call LZI(CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),128,true,false),1)
endif
elseif GetOwningPlayer(GetTriggerUnit())==DO[0]then
if IsUnitFogged(GetAttacker(),CO[1])or IsUnitFogged(GetAttacker(),DO[1])then
call LZI(CreateFogModifierRadius(DO[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),128,true,false),1)
endif
endif
return false
endfunction
function WJO takes nothing returns boolean
local trigger t
local group g
local unit u
if D2 then
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,CO[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,DO[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function HRI))
call TriggerAddCondition(t,Condition(function WXO))
set t=CreateTrigger()
set g=ZJI()
call GroupEnumUnitsOfPlayer(g,CO[0],Condition(function HRI))
loop
set u=FirstOfGroup(g)
exitwhen u==null
call GroupRemoveUnit(g,u)
if GetUnitAcquireRange(u)!=0 then
call TriggerRegisterUnitInRange(t,u,600,Condition(function HRI))
endif
endloop
call ZYI(g)
set g=ZJI()
call GroupEnumUnitsOfPlayer(g,DO[0],Condition(function HRI))
loop
set u=FirstOfGroup(g)
exitwhen u==null
call GroupRemoveUnit(g,u)
if GetUnitAcquireRange(u)!=0 and IsUnitType(u,UNIT_TYPE_STRUCTURE)then
call TriggerRegisterUnitInRange(t,u,600,Condition(function HRI))
endif
endloop
call ZYI(g)
call TriggerAddCondition(t,Condition(function WVO))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function WYO))
endif
call ZSI(GetTriggeringTrigger())
return false
endfunction
function WLO takes unit VCI returns nothing
local integer i=0
loop
exitwhen(i==16)
if IsUnitAlly(VCI,Player(i))then
call UnitShareVision(VCI,Player(i),true)
endif
set i=i+1
endloop
endfunction
function WMO takes nothing returns nothing
call WLO(GetEnumUnit())
endfunction
function WNO takes nothing returns nothing
local integer x
local group g
set x=1
loop
exitwhen x>5
call SetPlayerAlliance(CO[0],CO[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(DO[0],DO[x],ConvertAllianceType(5),false)
set x=x+1
endloop
set g=ZJI()
call GroupEnumUnitsOfPlayer(g,CO[0],Condition(function HRI))
call ForGroup(g,function WMO)
call ZYI(g)
set g=ZJI()
call GroupEnumUnitsOfPlayer(g,DO[0],Condition(function HRI))
call ForGroup(g,function WMO)
call ZYI(g)
set g=null
endfunction
function WSO takes nothing returns nothing
local integer x
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(CO[x],EO,ConvertAllianceType(0),false)
call SetPlayerAlliance(CO[x],EO,ConvertAllianceType(1),false)
call SetPlayerAlliance(CO[x],EO,ConvertAllianceType(2),false)
call SetPlayerAlliance(CO[x],EO,ConvertAllianceType(3),false)
call SetPlayerAlliance(CO[x],EO,ConvertAllianceType(4),false)
call SetPlayerAlliance(CO[x],EO,ConvertAllianceType(5),false)
call SetPlayerAlliance(CO[x],EO,ConvertAllianceType(6),false)
call SetPlayerAlliance(CO[x],EO,ConvertAllianceType(7),false)
call SetPlayerAlliance(DO[x],EO,ConvertAllianceType(0),false)
call SetPlayerAlliance(DO[x],EO,ConvertAllianceType(1),false)
call SetPlayerAlliance(DO[x],EO,ConvertAllianceType(2),false)
call SetPlayerAlliance(DO[x],EO,ConvertAllianceType(3),false)
call SetPlayerAlliance(DO[x],EO,ConvertAllianceType(4),false)
call SetPlayerAlliance(DO[x],EO,ConvertAllianceType(5),false)
call SetPlayerAlliance(DO[x],EO,ConvertAllianceType(6),false)
call SetPlayerAlliance(DO[x],EO,ConvertAllianceType(7),false)
call SetPlayerAlliance(EO,CO[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(EO,CO[x],ConvertAllianceType(1),false)
call SetPlayerAlliance(EO,CO[x],ConvertAllianceType(2),false)
call SetPlayerAlliance(EO,CO[x],ConvertAllianceType(3),false)
call SetPlayerAlliance(EO,CO[x],ConvertAllianceType(4),false)
call SetPlayerAlliance(EO,CO[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(EO,CO[x],ConvertAllianceType(6),false)
call SetPlayerAlliance(EO,CO[x],ConvertAllianceType(7),false)
call SetPlayerAlliance(EO,DO[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(EO,DO[x],ConvertAllianceType(1),false)
call SetPlayerAlliance(EO,DO[x],ConvertAllianceType(2),false)
call SetPlayerAlliance(EO,DO[x],ConvertAllianceType(3),false)
call SetPlayerAlliance(EO,DO[x],ConvertAllianceType(4),false)
call SetPlayerAlliance(EO,DO[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(EO,DO[x],ConvertAllianceType(6),false)
call SetPlayerAlliance(EO,DO[x],ConvertAllianceType(7),false)
set x=x+1
endloop
endfunction
function WTO takes nothing returns boolean
return VPO(GetTriggerUnit())
endfunction
function WRO takes nothing returns nothing
call WLO(GetTriggerUnit())
endfunction
function WPO takes nothing returns nothing
local trigger t
if not D2 then
return
endif
call WNO()
call WSO()
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function WTO))
call TriggerAddAction(t,function WRO)
set t=null
endfunction
function WUO takes nothing returns nothing
local string X0O=StringCase(GetEventPlayerChatString(),false)
local boolean XIO=X0O=="-random"or X0O=="-random int"or X0O=="-random agi"or X0O=="-random str"
local boolean X1O=X0O=="-repick"
local boolean XOO=X0O=="-gameinfo"
local boolean X2O=SubString(X0O,0,5)=="-swap"
local boolean X3O=X0O=="-recreate"
local boolean X4O=X0O=="-unstuck"
local boolean X5O=X0O=="-matchup"or X0O=="-ma"
local boolean X6O=X0O=="-movespeed"or X0O=="-ms"
local boolean X7O=X0O=="-msa"
local boolean X8O=X0O=="-disablehelp"
local boolean X9O=X0O=="-enablehelp"
local boolean XAO=X0O=="-creepstats"or X0O=="-cs"
local boolean XBO=X0O=="-cson"or X0O=="-csoff"
local boolean XCO=X0O=="-hidemsg"
local boolean XDO=X0O=="-showmsg"
local boolean XEO=X0O=="-weather snow"or X0O=="-weather rain"or X0O=="-weather off"or X0O=="-weather random"or X0O=="-weather wind"or X0O=="-weather moonlight"
local boolean XFO=X0O=="-showdeny"or X0O=="-hidedeny"
local boolean XGO=X0O=="-denyinfo"or X0O=="-di"
local boolean XHO=X0O=="-don"or X0O=="-deathon"or X0O=="-doff"or X0O=="-deathoff"
local boolean XZO=SubString(X0O,0,5)=="-roll"and X0O!="-rollhero"
local boolean XVO=X0O=="-hhn"or X0O=="-hideheronames"
local boolean XWO=X0O=="-mute"
local boolean XXO=X0O=="-afk"
local boolean XYO=SubString(X0O,0,8)=="-kickafk"
local boolean XJO=X0O=="-apm"
local boolean XKO=X0O=="-clear"
local boolean JD1=X0O=="-courier"
local boolean AH=X0O=="-ah"
local boolean XLO=X0O=="-invokelist"or X0O=="-il"
local boolean XMO=X0O=="-list"
local boolean XNO=X0O=="-rolloff"
local boolean XSO=X0O=="-rollon"
local boolean XTO=SubString(X0O,0,6)=="-music"
local boolean XRO=SubString(X0O,0,6)=="-water"
local boolean XPO=SubString(X0O,0,6)=="-quote"
local boolean XQO=SubString(X0O,0,3)=="-cm"
local boolean XUO=SubString(X0O,0,9)=="-itemswap"
local boolean Y0O=X0O=="-bonus"
local boolean YIO=X0O=="-rollhero"or X0O=="-rh"
local boolean Y1O=SubString(X0O,0,9)=="-rickroll"
local boolean NoSwitch=X0O=="-noswitch"
local boolean YOO=SubString(X0O,0,7)=="-switch"or X0O=="-ok"or X0O=="-no"
local boolean Terrain=X0O=="-terrain"or X0O=="-terrain default"or X0O=="-terrain snow"
local boolean Y2O=X0O=="-tips"
local boolean Y3O=X0O=="-ii"or X0O=="-iteminfo"
local boolean Y4O=X0O=="-center"or X0O=="-centeroff"or X0O=="-c"or X0O=="-co"
local boolean Y5O=X0O=="-unlock"
local boolean Y6O=X0O=="-disableselection"or X0O=="-ds"
local boolean Y7O=X0O=="-enableselection"or X0O=="-es"
local boolean Y8O=X0O=="-sleep"
local boolean Y9O=X0O=="-calm"
local boolean WNI=X0O=="-bounty"
call YBI("YAO",XIO)
call YBI("YBO",X1O)
call YBI("YCO",XOO)
call YBI("YDO",X2O)
call YBI("YEO",X3O)
call YBI("YFO",X4O)
call YBI("YGO",X5O)
call YBI("YHO",X6O)
call YBI("YZO",X7O)
call YBI("YVO",X8O)
call YBI("YWO",X9O)
call YBI("YXO",XAO)
call YBI("YYO",XBO)
call YBI("YJO",XCO)
call YBI("YKO",XDO)
call YBI("YLO",XEO)
call YBI("YMO",XFO)
call YBI("YNO",XGO)
call YBI("YSO",XHO)
call YBI("YTO",XZO)
call YBI("YRO",XVO)
call YBI("YPO",XWO)
call YBI("YQO",XXO)
call YBI("YUO",XYO)
call YBI("J0O",XJO)
call YBI("JIO",XKO)
call YBI("J1O",JD1)
call YBI("JOO",AH)
call YBI("J2O",XLO)
call YBI("J3O",XMO)
call YBI("J4O",XNO)
call YBI("J5O",XSO)
call YBI("J6O",XTO)
call YBI("J7O",XRO)
call YBI("J8O",XPO)
call YBI("J9O",XQO)
call YBI("JAO",XUO)
call YBI("JBO",Y0O)
call YBI("JCO",YIO)
call YBI("JDO",Y1O)
call YBI("JEO",YOO)
call YBI("JFO",Y3O)
call YBI("JGO",Y2O)
call YBI("JHO",Y4O)
call YBI("JZO",Y5O)
call YBI("JVO",Y6O)
call YBI("JWO",Y7O)
call YBI("JXO",Y8O)
call YBI("JYO",WNI)
call YBI("JJO",Y9O)
endfunction
function JDO takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),10,StringLength(GetEventPlayerChatString())))
local integer HWI=GetPlayerId(GetTriggerPlayer())
set NU0[HWI]=NU0[HWI]+1
if NU0[HWI]>10 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848656977))
return
endif
if a<1 or a>8 then
set a=GetRandomInt(1,8)
endif
if a==1 then
call JDI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna give you up")
elseif a==2 then
call JDI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna let you down")
elseif a==3 then
call JDI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna run around")
elseif a==4 then
call JDI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna desert you")
elseif a==5 then
call JDI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna make you cry")
elseif a==6 then
call JDI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna say goodbye")
elseif a==7 then
call JDI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna tell a lie")
elseif a==8 then
call JDI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna hurt you")
endif
endfunction
function JLO takes nothing returns boolean
if A3==false then
return false
endif
if S0[GetPlayerId(M2)]==true then
return false
endif
if B0==false then
return false
endif
if L1[GetPlayerId(M2)]!=null and C3==false then
return false
endif
if D0[GetPlayerId(M2)]==true then
return false
endif
if D3[GetPlayerId(M2)]and C3==false then
return false
endif
if C3 and F3[GetPlayerId(M2)]then
return false
endif
return true
endfunction
function JMO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local string JNO=(LoadStr(ZY,(V0I),(146)))
set M2=p
if JLO()then
set S0[GetPlayerId(p)]=true
if JNO=="-random int"then
call XII(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
elseif JNO=="-random str"then
call X3I(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
elseif JNO=="-random agi"then
call X4I(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
else
call X5I(p)
endif
else
call DisplayTimedTextToPlayer(p,0,I3,10,GetObjectName(1848653625))
endif
set t=null
set p=null
return false
endfunction
function YAO takes nothing returns nothing
local player VRI=GetTriggerPlayer()
local trigger t
set M2=VRI
if JLO()and G3[GetPlayerId(VRI)]==false then
set G3[GetPlayerId(VRI)]=true
call W4I(VRI)
call DisplayTimedTextToPlayer(VRI,0,I3,10,GetObjectName(1848653633))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function JMO))
call SavePlayerHandle(ZY,(GetHandleId(t)),(54),(VRI))
call SaveStr(ZY,(GetHandleId(t)),(146),(StringCase(GetEventPlayerChatString(),false)))
endif
set t=null
endfunction
function JSO takes nothing returns boolean
local unit V8I=L1[GetPlayerId(GetTriggerPlayer())]
if QZ0 then
call Y3I(GetTriggerPlayer(),GetObjectName(1848652592))
return false
endif
if B3==false then
if PW0==false and S2==false and R30==false and TM==false and QO0==false and Q60==false and C3==false and F2==false then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,"-repick "+GetObjectName(1848653122))
endif
return false
endif
if(D0[GetPlayerId(GetTriggerPlayer())]==true)then
return false
endif
if(L1[GetPlayerId(GetTriggerPlayer())]==null)then
return false
endif
if X0 or S2 or C3 then
return false
endif
if(Z3==true)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653104))
return false
endif
if(GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<T0)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653113))
return false
endif
if GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<350 and K0 or K2 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653141))
return false
endif
if GetUnitState(V8I,UNIT_STATE_MANA)!=GetUnitState(V8I,UNIT_STATE_MAX_MANA)or GetUnitState(V8I,UNIT_STATE_LIFE)!=GetUnitState(V8I,UNIT_STATE_MAX_LIFE)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653130))
return false
endif
return true
endfunction
function JTO takes nothing returns nothing
if(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true)then
if(GetUnitTypeId(GetEnumUnit())==1429221430)then
call ExecuteFunc("XB1")
elseif GetUnitTypeId(GetEnumUnit())==1429221432 or GetUnitTypeId(GetEnumUnit())==1160786229 then
set WK=GetEnumUnit()
call ExecuteFunc("Y21")
endif
call JDI(H7I(GetTriggerPlayer()),10.00,GetObjectName(1848653132)+" "+VOI(GetEnumUnit())+".")
endif
if(GetUnitTypeId(GetEnumUnit())==1848651828)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652088)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652099)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652103)then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function JRO takes nothing returns nothing
local player VRI=GetTriggerPlayer()
local group U4I=ZJI()
local integer X1I
local integer XOI
local location X2I
local unit RepickedUnit
local integer WCI
local integer W5I
local integer W6I
local unit JPO
local location UBI=GetRectCenter(S4)
local location UCI=GetRectCenter(T4)
set bj_groupEnumOwningPlayer=VRI
call GroupEnumUnitsInRect(U4I,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
if(VLI(VRI)==true)then
set X1I=D10
set XOI=DO0
set X2I=GetRectCenter(G4)
else
set X1I=D20
set XOI=D30
set X2I=GetRectCenter(F4)
endif
if Y0 then
if(GetRandomInt(1,2)==1)then
set X1I=D10
set XOI=DO0
else
set X1I=D20
set XOI=D30
endif
endif
if K0 or K2 then
set T0=100
endif
set JPO=(LoadUnitHandle(ZY,(GetHandleId(GetTriggerPlayer())),(147)))
if JPO!=null and GetUnitTypeId(JPO)==1697656899 then
call RemoveUnit(JPO)
endif
call AdjustPlayerStateBJ(-1*T0,VRI,PLAYER_STATE_RESOURCE_GOLD)
set D0[GetPlayerId(VRI)]=true
call ForGroup(U4I,function JTO)
call YKI(L1[GetPlayerId(VRI)])
set L1[GetPlayerId(GetTriggerPlayer())]=null
if K0 or K2 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,GetObjectName(1311782233))
if K0 then
set W5I=D10
set W6I=D30
endif
if VLI(VRI)then
if K2 then
set W5I=D10
set W6I=DO0
call CreateUnitAtLoc(VRI,1848651843,UBI,bj_UNIT_FACING)
else
call CreateUnitAtLoc(VRI,1848651843,UBI,bj_UNIT_FACING)
call CreateUnitAtLoc(VRI,1848651843,UCI,bj_UNIT_FACING)
endif
call PanCameraToTimedLocForPlayer(VRI,UBI,0)
else
if K2 then
set W5I=D20
set W6I=D30
call CreateUnitAtLoc(VRI,1848651843,UCI,bj_UNIT_FACING)
else
call CreateUnitAtLoc(VRI,1848651843,UBI,bj_UNIT_FACING)
call CreateUnitAtLoc(VRI,1848651843,UCI,bj_UNIT_FACING)
endif
call PanCameraToTimedLocForPlayer(VRI,UCI,0)
endif
loop
exitwhen W5I>W6I
if R[W5I]==false then
call SetPlayerTechMaxAllowed(VRI,D00[W5I],1)
endif
set W5I=W5I+1
endloop
call RemoveLocation(UBI)
call RemoveLocation(UCI)
return
endif
loop
set WCI=GetRandomInt(X1I,XOI)
if(R[WCI]==false)then
set R[WCI]=true
set L1[GetPlayerId(VRI)]=CreateUnitAtLoc(VRI,D00[WCI],X2I,bj_UNIT_FACING)
call W2I(D00[WCI])
endif
exitwhen L1[GetPlayerId(GetTriggerPlayer())]!=null
endloop
call ZYI(U4I)
call RemoveLocation(X2I)
call RemoveLocation(UBI)
call RemoveLocation(UCI)
endfunction
function YBO takes nothing returns nothing
if JSO()then
call JRO()
endif
endfunction
function YCO takes nothing returns nothing
local player VRI=GetTriggerPlayer()
local string JUO="|c006699CC"
if QO0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"League Mode"+"|r:      "+GetObjectName(1848653621))
endif
if Q60 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Extended League"+"|r:      "+GetObjectName(1848653634))
call DisplayTimedTextToPlayer(VRI,0,I3,20,"                                 "+GetObjectName(1848653616))
endif
if X0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Death Match"+"|r:        "+GetObjectName(1848653402))
call DisplayTimedTextToPlayer(VRI,0,I3,20,"                              "+GetObjectName(1848653401)+" "+I2S(YSI(DO0,D30-D20+1))+" "+GetObjectName(1848653635))
endif
if F2 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Mirror Match"+"|r:       "+GetObjectName(1848653399))
endif
if K0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"All Pick"+"|r:                 "+GetObjectName(1848653398))
endif
if R30 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Random Draft"+"|r:                 "+GetObjectName(1848653618))
endif
if PW0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Single Draft"+"|r:                 "+GetObjectName(1848653639))
endif
if Y0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"All Random"+"|r:          "+GetObjectName(1848653617))
endif
if S2 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Vote Random"+"|r:         "+GetObjectName(1848653620))
endif
if J0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Team Random"+"|r:     "+GetObjectName(1848653389))
endif
if C3 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Reverse"+"|r:                 "+GetObjectName(1848653619))
endif
if GO then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Shuffle Players"+"|r:     "+GetObjectName(1848653640))
endif
if Z2 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"All Agility"+"|r:             "+GetObjectName(1848653644))
endif
if W2 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"All Strength"+"|r:         "+GetObjectName(1848653643))
endif
if V2 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"All Intelligence"+"|r:    "+GetObjectName(1848653642))
endif
if QB0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Range Only"+"|r:    "+GetObjectName(1848657716))
endif
if QA0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Melee Only"+"|r:    "+GetObjectName(1848657717))
endif
if G2 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Duplicate Mode"+"|r:   "+GetObjectName(1848653641))
endif
if L0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Item Drop"+"|r:             "+GetObjectName(1848653638))
endif
if P0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"No Powerups"+"|r:        "+GetObjectName(1848653645))
endif
if Q0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Super Creeps"+"|r:        "+GetObjectName(1848653646))
call DisplayTimedTextToPlayer(VRI,0,I3,20,"                             "+GetObjectName(1848653647))
endif
if R0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Easy Mode"+"|r:           "+GetObjectName(1848653652))
endif
if J2 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Same Hero"+"|r:           "+GetObjectName(1848653653)+" "+(CR0[GetPlayerId((XO))])+"|r"+" "+GetObjectName(1848653655))
endif
if QC0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Only Mid"+"|r:           "+GetObjectName(1848653872))
endif
if QE0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"No Bot"+"|r:           "+GetObjectName(1848653654))
endif
if QG0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"No Mid"+"|r:           "+GetObjectName(1848653651))
endif
if QH0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"No Top"+"|r:           "+GetObjectName(1848653650))
endif
if IL then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"No Swap"+"|r:           "+GetObjectName(1848653656))
endif
if IL then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"No Repick"+"|r:           "+GetObjectName(1848653649))
endif
if BL then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Pool Mode"+"|r:           "+GetObjectName(1848653657))
endif
if QV0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Observer Info"+"|r:           "+GetObjectName(1848653658))
endif
if QX0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Mini Hereos"+"|r:           "+GetObjectName(1848657219))
endif
if QY0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Fast Respawn"+"|r:           "+GetObjectName(1848656976))
endif
if RM then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Captains Mode"+"|r:           "+GetObjectName(1848657220))
endif
if AL then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Experimental Runes"+"|r:           "+GetObjectName(1848657718))
endif
if TM then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Captains Draft"+"|r:           "+GetObjectName(1848657734))
endif
if QL0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Capture Point"+"|r:           "+GetObjectName(1848658760))
endif
if QJ0 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Capture Point"+"|r:           "+GetObjectName(1848658761))
endif
if K2 then
call DisplayTimedTextToPlayer(VRI,0,I3,20,JUO+"Normal Mode"+"|r:        "+GetObjectName(1848653648))
endif
endfunction
function KIO takes nothing returns nothing
if GetUnitTypeId(GetEnumUnit())==1848651828 then
call RemoveUnit(GetEnumUnit())
endif
if GetUnitTypeId(GetEnumUnit())==1865429043 then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function K1O takes unit u1,unit u2 returns nothing
local player Me=GetOwningPlayer(u1)
local player KOO=GetOwningPlayer(u2)
local unit K2O=CreateUnit(Me,1697657158,0,0,0)
local group g
local item RR1
local integer K3O
set K3O=E80[GetPlayerId(Me)]
set E80[GetPlayerId(Me)]=E80[GetPlayerId(KOO)]
set E80[GetPlayerId(KOO)]=K3O
call DisableTrigger(JX0)
if GetUnitAbilityLevel(u1,1093677893)>0 then
set AM=u1
set BM=u2
call ExecuteFunc("K4O")
elseif GetUnitAbilityLevel(u2,1093677893)>0 then
set AM=u2
set BM=u1
call ExecuteFunc("K4O")
endif
if GetUnitAbilityLevel(u1,1093682009)>0 then
set AM=u1
set BM=u2
call ExecuteFunc("K5O")
elseif GetUnitAbilityLevel(u2,1093682009)>0 then
set AM=u2
set BM=u1
call ExecuteFunc("K5O")
endif
if GetUnitAbilityLevel(u1,1093743444)>0 then
set AM=u1
set BM=u2
call ExecuteFunc("K6O")
elseif GetUnitAbilityLevel(u2,1093743444)>0 then
set AM=u2
set BM=u1
call ExecuteFunc("K6O")
endif
call FlushChildHashtable(ZY,(800+GetPlayerId(GetOwningPlayer(u1))))
call FlushChildHashtable(ZY,(800+GetPlayerId(GetOwningPlayer(u2))))
set g=ZJI()
set bj_groupEnumOwningPlayer=Me
call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
call ForGroup(g,function KIO)
call ZYI(g)
set g=ZJI()
set bj_groupEnumOwningPlayer=KOO
call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
call ForGroup(g,function KIO)
call ZYI(g)
call SetUnitOwner(u2,Me,true)
call SetUnitOwner(u1,KOO,true)
set L1[GetPlayerId(Me)]=u2
set L1[GetPlayerId(KOO)]=u1
call SetPlayerName(Me,(CR0[GetPlayerId((Me))])+" ("+VOI(L1[GetPlayerId(Me)])+")")
call SetPlayerName(KOO,(CR0[GetPlayerId((KOO))])+" ("+VOI(L1[GetPlayerId(KOO)])+")")
call UnitAddItem(K2O,UnitItemInSlot(u2,0))
call UnitAddItem(K2O,UnitItemInSlot(u2,1))
call UnitAddItem(K2O,UnitItemInSlot(u2,2))
call UnitAddItem(K2O,UnitItemInSlot(u2,3))
call UnitAddItem(K2O,UnitItemInSlot(u2,4))
call UnitAddItem(K2O,UnitItemInSlot(u2,5))
set RR1=UnitItemInSlot(u1,0)
if RR1!=null then
call SetItemPlayer(RR1,Me,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u2,RR1)
endif
set RR1=UnitItemInSlot(u1,1)
if RR1!=null then
call SetItemPlayer(RR1,Me,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u2,RR1)
endif
set RR1=UnitItemInSlot(u1,2)
if RR1!=null then
call SetItemPlayer(RR1,Me,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u2,RR1)
endif
set RR1=UnitItemInSlot(u1,3)
if RR1!=null then
call SetItemPlayer(RR1,Me,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u2,RR1)
endif
set RR1=UnitItemInSlot(u1,4)
if RR1!=null then
call SetItemPlayer(RR1,Me,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u2,RR1)
endif
set RR1=UnitItemInSlot(u1,5)
if RR1!=null then
call SetItemPlayer(RR1,Me,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u2,RR1)
endif
set RR1=UnitItemInSlot(K2O,0)
if RR1!=null then
call SetItemPlayer(RR1,KOO,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u1,RR1)
endif
set RR1=UnitItemInSlot(K2O,1)
if RR1!=null then
call SetItemPlayer(RR1,KOO,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u1,RR1)
endif
set RR1=UnitItemInSlot(K2O,2)
if RR1!=null then
call SetItemPlayer(RR1,KOO,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u1,RR1)
endif
set RR1=UnitItemInSlot(K2O,3)
if RR1!=null then
call SetItemPlayer(RR1,KOO,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u1,RR1)
endif
set RR1=UnitItemInSlot(K2O,4)
if RR1!=null then
call SetItemPlayer(RR1,KOO,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u1,RR1)
endif
set RR1=UnitItemInSlot(K2O,5)
if RR1!=null then
call SetItemPlayer(RR1,KOO,false)
call SetItemUserData(RR1,1)
call UnitAddItem(u1,RR1)
endif
call RemoveUnit(K2O)
call EnableTrigger(JX0)
if(IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER)==true or GetUnitTypeId(u1)==1211119187)and REI(u1,F20[GQ0])!=null then
call UnitRemoveItem(u1,REI(u1,F20[GQ0]))
elseif(IsUnitType(u1,UNIT_TYPE_RANGED_ATTACKER)==true or GetUnitTypeId(u1)==1211119187)and REI(u1,F20[GP0])!=null then
call UnitRemoveItem(u1,REI(u1,F20[GP0]))
endif
if(IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER)==true or GetUnitTypeId(u1)==1211119187)and REI(u2,F20[GQ0])!=null then
call UnitRemoveItem(u1,REI(u2,F20[GQ0]))
elseif(IsUnitType(u2,UNIT_TYPE_RANGED_ATTACKER)==true or GetUnitTypeId(u1)==1211119187)and REI(u2,F20[GP0])!=null then
call UnitRemoveItem(u1,REI(u2,F20[GP0]))
endif
if GetUnitTypeId(u1)==1211119187 and REI(u1,F20[GP0])!=null then
call UnitRemoveItem(u1,REI(u1,F20[GP0]))
elseif GetUnitTypeId(u1)==1211119187 and REI(u1,F20[GQ0])!=null then
call UnitRemoveItem(u1,REI(u1,F20[GQ0]))
endif
if GetUnitTypeId(u2)==1211119187 and REI(u2,F20[GP0])!=null then
call UnitRemoveItem(u2,REI(u2,F20[GP0]))
elseif GetUnitTypeId(u2)==1211119187 and REI(u2,F20[GQ0])!=null then
call UnitRemoveItem(u2,REI(u2,F20[GQ0]))
endif
if(IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER)==true)and REI(u1,F20[WI0])!=null then
call UnitRemoveItem(u1,REI(u1,F20[WI0]))
elseif(IsUnitType(u1,UNIT_TYPE_RANGED_ATTACKER)==true)and REI(u1,F20[GP0])!=null then
call UnitRemoveItem(u1,REI(u1,F20[GP0]))
endif
if(IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER)==true)and REI(u2,F20[WI0])!=null then
call UnitRemoveItem(u1,REI(u2,F20[WI0]))
elseif(IsUnitType(u2,UNIT_TYPE_RANGED_ATTACKER)==true)and REI(u2,F20[W00])!=null then
call UnitRemoveItem(u1,REI(u2,F20[W00]))
endif
call ClearSelectionForPlayer(Me)
call SelectUnitAddForPlayer(u2,Me)
call ClearSelectionForPlayer(KOO)
call SelectUnitAddForPlayer(u1,KOO)
call FlushChildHashtable(ZY,(800+GetPlayerId(Me)))
call FlushChildHashtable(ZY,(800+GetPlayerId(KOO)))
set OK=u1
call ExecuteFunc("VY1")
set OK=u2
call ExecuteFunc("VY1")
call P5I(GetOwningPlayer(u1),"9",GetUnitTypeId(u1))
call P5I(GetOwningPlayer(u2),"9",GetUnitTypeId(u2))
call P7I("SWAP_"+I2S(GetPlayerId(GetOwningPlayer(u1)))+"_"+I2S(GetPlayerId(GetOwningPlayer(u2))),GetUnitTypeId(u1))
call P7I("SWAP_"+I2S(GetPlayerId(GetOwningPlayer(u2)))+"_"+I2S(GetPlayerId(GetOwningPlayer(u1))),GetUnitTypeId(u2))
call Q4I(Me)
call Q4I(KOO)
set Me=null
set KOO=null
set g=null
set K2O=null
set RR1=null
endfunction
function K7O takes unit u1,unit u2 returns boolean
return(LoadBoolean(ZY,(800+GetPlayerId(GetOwningPlayer(u2))),(GetUnitTypeId(u1)+GetUnitTypeId(u2))))
endfunction
function SwapHero_Off takes nothing returns nothing
call FlushChildHashtable(ZY,(800+GetPlayerId(GetTriggerPlayer())))
endfunction
function K8O takes player p returns integer
local integer i=1
loop
exitwhen i>5
if CO[i]==p or DO[i]==p then
return i
endif
set i=i+1
endloop
return-1
endfunction
function K9O takes unit u1,unit u2,boolean KAO returns boolean
call SaveBoolean(ZY,(800+GetPlayerId(GetOwningPlayer(u1))),(GetUnitTypeId(u1)+GetUnitTypeId(u2)),(true))
if K7O(u1,u2)then
call K1O(u1,u2)
return true
else
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,I3,30,"  ")
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,I3,30,"                         "+C0[GetPlayerId(GetOwningPlayer(u1))]+GetUnitName(u1)+"|r |cff99ccff"+GetObjectName(1848653874)+" "+GetObjectName(1848653875)+"|r |c00ff0303-swap "+I2S(K8O(GetOwningPlayer(u1)))+"|r |cff99ccff"+GetObjectName(1848653873)+"|r")
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,I3,30,"  ")
if KAO then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,I3,30,"  ")
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,I3,30,"|cff99ccff"+GetObjectName(1848653891)+" |r"+C0[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r")
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,I3,30,"  ")
endif
endif
return false
endfunction
function KBO takes nothing returns nothing
local integer i=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
if GetEventPlayerChatString()=="-swapall"then
set i=1
set AK=L1[GetPlayerId(GetTriggerPlayer())]
loop
exitwhen i>5
if VLI(GetTriggerPlayer())then
set GK=CO[i]
else
set GK=DO[i]
endif
set OK=L1[GetPlayerId(GK)]
if not(AK==null or GetOwningPlayer(AK)!=GetTriggerPlayer()or OK==null or GetOwningPlayer(OK)!=GK or GK==GetTriggerPlayer())then
if K9O(AK,OK,false)then
return
endif
endif
set i=i+1
endloop
return
elseif i<1 or i>5 then
call Y3I(GetTriggerPlayer(),GetObjectName(1848652378))
return
endif
set AK=L1[GetPlayerId(GetTriggerPlayer())]
if VLI(GetTriggerPlayer())then
set GK=CO[i]
else
set GK=DO[i]
endif
set OK=L1[GetPlayerId(GK)]
if AK==null or GetOwningPlayer(AK)!=GetTriggerPlayer()or OK==null or GetOwningPlayer(OK)!=GK or GK==GetTriggerPlayer()then
call Y3I(GetTriggerPlayer(),GetObjectName(1848652378))
return
endif
call K9O(AK,OK,true)
endfunction
function KCO takes nothing returns nothing
local integer i
local player p
local unit u
local string s
if GetLocalPlayer()==GetTriggerPlayer()then
call ClearTextMessages()
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,45,"|cff99ccff"+GetObjectName(1848653890)+"|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,45," ")
set i=1
loop
exitwhen i>5
set p=CO[i]
set u=L1[GetPlayerId(p)]
if IsPlayerAlly(GetTriggerPlayer(),p)and GetTriggerPlayer()!=p and u!=null and GetOwningPlayer(u)==p then
set s=" "
if K7O(L1[GetPlayerId(GetTriggerPlayer())],u)then
set s=" |c00ff0303("+GetObjectName(1848653877)+")|r"
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,45,C0[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)
endif
set p=DO[i]
set u=L1[GetPlayerId(p)]
if IsPlayerAlly(GetTriggerPlayer(),p)and GetTriggerPlayer()!=p and u!=null and GetOwningPlayer(u)==p then
set s=" "
if K7O(L1[GetPlayerId(GetTriggerPlayer())],u)then
set s=" |c00ff0303("+GetObjectName(1848653877)+")|r"
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,45,C0[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)
endif
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,45," ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,45,"|cff99ccff"+GetObjectName(1848653875)+"|r |c00ff0303-swap #|r |cff99ccff"+GetObjectName(1848653878)+" -swapcancel "+GetObjectName(1848653879)+"|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,45," ")
endfunction
function KDO takes player H8I returns boolean
local integer W5I=1
local integer KEO=0
loop
exitwhen W5I>5
if VLI(H8I)then
if L1[GetPlayerId(CO[W5I])]!=null and CO[W5I]!=H8I and GetHeroLevel(L1[GetPlayerId(CO[W5I])])==1 then
set KEO=KEO+1
endif
else
if L1[GetPlayerId(DO[W5I])]!=null and DO[W5I]!=H8I and GetHeroLevel(L1[GetPlayerId(DO[W5I])])==1 then
set KEO=KEO+1
endif
endif
set W5I=W5I+1
endloop
if KEO>0 then
return true
else
return false
endif
endfunction
function KFO takes nothing returns boolean
if IL or OL==false then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,"-swaphero "+GetObjectName(1848653880))
return false
endif
if GetUnitState(L1[GetPlayerId(GetTriggerPlayer())],UNIT_STATE_LIFE)<1 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653894))
return false
endif
if PK==true then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653895)+" -swaphero.")
return false
endif
if KDO(GetTriggerPlayer())==false then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653896))
return false
endif
return true
endfunction
function YDO takes nothing returns nothing
if KFO()then
if GetEventPlayerChatString()=="-swap"or GetEventPlayerChatString()=="-swaphero"then
call KCO()
elseif GetEventPlayerChatString()=="-swapcancel"then
call FlushChildHashtable(ZY,(800+GetPlayerId(GetTriggerPlayer())))
else
call KBO()
endif
endif
endfunction
function KGO takes nothing returns boolean
return GetSpellAbilityId()==1093682761
endfunction
function KHO takes integer KLI,unit KZO,unit KVO returns nothing
local integer W5I=1
local integer W6I=GetUnitAbilityLevel(KZO,KLI)
loop
exitwhen W5I>W6I
call SelectHeroSkill(KVO,KLI)
set W5I=W5I+1
endloop
endfunction
function KWO takes nothing returns nothing
local integer W5I
local integer W6I
local unit KXO
local location YV1=GetUnitLoc(GetTriggerUnit())
set KXO=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),GetUnitTypeId(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call SetHeroXP(KXO,GetHeroXP(GetTriggerUnit()),false)
set W5I=1
set W6I=GetUnitAbilityLevel(GetTriggerUnit(),1096904043)
loop
exitwhen W5I>W6I
call SelectHeroSkill(bj_lastCreatedUnit,1096904043)
set W5I=W5I+1
endloop
set W5I=0
set W6I=5
loop
exitwhen W5I>W6I
call UnitAddItem(KXO,UnitItemInSlot(GetTriggerUnit(),W5I))
set W5I=W5I+1
endloop
if(GetUnitTypeId(GetTriggerUnit())==1164277353)then
call KHO(1093678156,GetTriggerUnit(),KXO)
call KHO(1093683252,GetTriggerUnit(),KXO)
call KHO(1095071337,GetTriggerUnit(),KXO)
call KHO(1093678929,GetTriggerUnit(),KXO)
endif
if(GetUnitTypeId(GetTriggerUnit())==1429221432)then
call KHO(1093677892,GetTriggerUnit(),KXO)
call KHO(1093677639,GetTriggerUnit(),KXO)
call KHO(1093677893,GetTriggerUnit(),KXO)
call KHO(1093679411,GetTriggerUnit(),KXO)
endif
if(GetUnitTypeId(GetTriggerUnit())==1429221431)then
call KHO(1093682745,GetTriggerUnit(),KXO)
call KHO(1093678681,GetTriggerUnit(),KXO)
call KHO(1093677381,GetTriggerUnit(),KXO)
call KHO(1093677624,GetTriggerUnit(),KXO)
endif
if(GetUnitTypeId(GetTriggerUnit())==1215063922)then
call KHO(1093677895,GetTriggerUnit(),KXO)
call KHO(1093677894,GetTriggerUnit(),KXO)
call KHO(1093685043,GetTriggerUnit(),KXO)
call KHO(1095068013,GetTriggerUnit(),KXO)
endif
if(GetUnitTypeId(GetTriggerUnit())==1164666213)then
call KHO(1093677877,GetTriggerUnit(),KXO)
call KHO(1093678679,GetTriggerUnit(),KXO)
call KHO(1093678678,GetTriggerUnit(),KXO)
call KHO(1093678680,GetTriggerUnit(),KXO)
endif
call YKI(GetTriggerUnit())
call RemoveLocation(YV1)
set L1[GetPlayerId(GetOwningPlayer(KXO))]=KXO
endfunction
function KYO takes nothing returns boolean
local integer VAI=GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])
return(VAI==1429221432 or VAI==1429221431 or VAI==1215063922 or VAI==1164277353 or VAI==1164666213)and(RectContainsUnit(H5,L1[GetPlayerId(GetTriggerPlayer())])or RectContainsUnit(Z5,L1[GetPlayerId(GetTriggerPlayer())]))
endfunction
function KJO takes nothing returns nothing
local unit V8I=L1[GetPlayerId(GetTriggerPlayer())]
call UnitAddAbility(V8I,1093682761)
call IssueImmediateOrder(V8I,"chemicalrage")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,120.00,"|c00ff0303"+GetObjectName(1848653897)+" "+VOI(GetEnumUnit())+". "+GetObjectName(1848653898)+"|r")
endfunction
function YEO takes nothing returns nothing
if KYO()then
call KJO()
endif
endfunction
function KLO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer ZLI=GetTriggerEvalCount(t)
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_DEATH or ZLI>60 then
if((LoadInteger(ZY,(GetHandleId((V8I))),((4259))))==1)==false then
if VLI(GetOwningPlayer(V8I))then
set x=GetRectCenterX(A4)
set y=GetRectCenterY(A4)
else
set x=GetRectCenterX(T3)
set y=GetRectCenterY(T3)
endif
call SetUnitPosition(V8I,x,y)
call PauseUnit(V8I,false)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call PauseUnit(V8I,true)
endif
set t=null
set V8I=null
return false
endfunction
function KMO takes player p returns nothing
local unit V8I=L1[GetPlayerId(p)]
local trigger t
if KMI(V8I)==false then
set t=CreateTrigger()
call DisplayTimedTextToPlayer(p,0,I3,30.0,GetObjectName(1848653899))
call UnitRemoveBuffs(V8I,true,false)
call UnitRemoveAbility(V8I,1113815395)
call UnitRemoveAbility(V8I,1113815346)
call UnitRemoveAbility(V8I,1110454858)
call UnitRemoveAbility(V8I,1112896368)
call UnitRemoveAbility(V8I,1114993524)
call UnitRemoveAbility(V8I,1110454854)
call PauseUnit(V8I,true)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function KLO))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(V8I))
endif
set p=null
set V8I=null
set t=null
endfunction
function KNO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call KMO(p)
endif
set t=null
return false
endfunction
function YFO takes nothing returns nothing
local player p=GetTriggerPlayer()
local unit V8I=L1[GetPlayerId(p)]
local trigger t
if KMI(V8I)==false then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,3.5,false)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function KNO))
call SavePlayerHandle(ZY,(GetHandleId(t)),(54),(p))
endif
set p=null
set V8I=null
set t=null
endfunction
function KSO takes player p returns string
local string s=L3[GetPlayerId(p)]
if L3[GetPlayerId(p)]!="Here"then
return" |c00ff0303("+GetObjectName(1848653881)+" at "+SubString(s,10,StringLength(s))+"|c00ff0303)|r"
endif
return" "
endfunction
function YGO takes nothing returns nothing
local integer W5I=1
local integer W6I=5
local integer HWI
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,20," ")
if(VNI(GetTriggerPlayer())==true)then
loop
exitwhen W5I>W6I
set HWI=GetPlayerId(CO[W5I])
if(L1[HWI]!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,20,C0[HWI]+(CR0[GetPlayerId((CO[W5I]))])+"|r "+GetObjectName(1848653901)+" "+GetUnitName(L1[HWI])+" ("+GetObjectName(1848653900)+" "+I2S(GetUnitLevel(L1[HWI]))+")"+KSO(CO[W5I]))
endif
set W5I=W5I+1
endloop
else
loop
exitwhen W5I>W6I
set HWI=GetPlayerId(DO[W5I])
if(L1[HWI]!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,20,C0[HWI]+(CR0[GetPlayerId((DO[W5I]))])+"|r "+GetObjectName(1848653901)+" "+GetUnitName(L1[HWI])+" ("+GetObjectName(1848653900)+" "+I2S(GetUnitLevel(L1[HWI]))+")"+KSO(DO[W5I]))
endif
set W5I=W5I+1
endloop
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,20," ")
endfunction
function KRO takes unit u returns boolean
return GetUnitTypeId(u)==1311781199 or GetUnitTypeId(u)==1311781171 or GetUnitTypeId(u)==1311781172 or GetUnitTypeId(u)==1311781173
endfunction
function KPO takes unit u returns unit
local integer V0I=GetHandleId(GetOwningPlayer(u))
return(LoadUnitHandle(ZY,(V0I),(333)))
endfunction
function YHO takes nothing returns nothing
local unit u
local integer i=0
if(L1[GetPlayerId(GetTriggerPlayer())]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848653889))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetUnitName(L1[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+GetUnitMoveSpeed(L1[GetPlayerId(GetTriggerPlayer())]))))
if KRO(L1[GetPlayerId(GetTriggerPlayer())])then
set u=KPO(L1[GetPlayerId(GetTriggerPlayer())])
if u!=null then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+GetUnitMoveSpeed(u))))
endif
endif
endif
endfunction
function YZO takes nothing returns nothing
local unit u
local integer i=0
if(L1[GetPlayerId(GetTriggerPlayer())]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848653889))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetUnitName(L1[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+GetUnitMoveSpeed(L1[GetPlayerId(GetTriggerPlayer())]))))
if KRO(L1[GetPlayerId(GetTriggerPlayer())])then
set u=KPO(L1[GetPlayerId(GetTriggerPlayer())])
if u!=null then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+GetUnitMoveSpeed(u))))
endif
endif
loop
exitwhen i>16
set u=L1[i]
if u!=null and u!=L1[GetPlayerId(GetTriggerPlayer())]and IsUnitAlly(u,GetTriggerPlayer())==true then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+GetUnitMoveSpeed(u))))
endif
set i=i+1
endloop
endif
endfunction
function YVO takes nothing returns nothing
call SaveBoolean(ZY,(GetHandleId(GetTriggerPlayer())),(139),(true))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653906))
endfunction
function YWO takes nothing returns nothing
call SaveBoolean(ZY,(GetHandleId(GetTriggerPlayer())),(139),(false))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653903))
endfunction
function YXO takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,"   "+GetObjectName(1848653904)+" "+I2S(A[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName(1848653905)+" "+I2S(B[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName(1848653907)+" "+I2S(C[GetPlayerId(GetTriggerPlayer())]))
endfunction
function YYO takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
if(GetEventPlayerChatString()=="-cson")then
set UL[x]=true
set S60[x]=true
else
set UL[x]=false
set S60[x]=false
endif
call WF1()
endfunction
function L1O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer i=(LoadInteger(ZY,(V0I),(34)))
local real x
local real y
if S00[i]==false then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif L1[i]!=null and KMI(L1[i])==false then
set x=GetUnitX(L1[i])
set y=GetUnitY(L1[i])
call PanCameraToTimedForPlayer(Player(i),x,y,0)
endif
set t=null
return false
endfunction
function JHO takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
local trigger t
local integer V0I
local integer i
if S00[x]==false and(GetEventPlayerChatString()=="-center"or GetEventPlayerChatString()=="-c")then
set S00[x]=true
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.01,true)
call TriggerAddCondition(t,Condition(function L1O))
call SaveInteger(ZY,(V0I),(34),(x))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848658519))
elseif GetEventPlayerChatString()=="-centeroff"or GetEventPlayerChatString()=="-co"then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848658520))
set S00[x]=false
endif
endfunction
function JVO takes nothing returns nothing
set SI0[GetPlayerId(GetTriggerPlayer())]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName(1848658522))
endfunction
function JWO takes nothing returns nothing
set SI0[GetPlayerId(GetTriggerPlayer())]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName(1848658736))
endfunction
function JZO takes nothing returns nothing
local integer i=0
local integer id=GetPlayerId(GetTriggerPlayer())
local integer ZLI=0
local integer L3O=0
local player p
if SO0==false or FL==false then
return
endif
if S30+90<(TimerGetElapsed(M))then
loop
exitwhen i>15
set S20[i]=false
set i=i+1
endloop
endif
set S30=(TimerGetElapsed(M))+90
set S20[id]=true
set i=0
loop
exitwhen i>15
if VLI(GetTriggerPlayer())then
if VLI(Player(i))and VTI(Player(i))then
set L3O=L3O+1
if S20[i]then
set ZLI=ZLI+1
endif
endif
else
if VNI(Player(i))and VTI(Player(i))then
set L3O=L3O+1
if S20[i]then
set ZLI=ZLI+1
endif
endif
endif
set i=i+1
endloop
if ZLI*2>L3O then
if VLI(GetTriggerPlayer())then
set i=0
loop
exitwhen i>5
set p=CO[i]
if EI0[GetPlayerId(p)]==true and S10[GetPlayerId(p)]==false then
call JDI(AO,10,GetObjectName(1848658756)+" "+(CR0[GetPlayerId((p))]))
call NGI(p)
set S10[GetPlayerId(p)]=true
endif
set i=i+1
endloop
else
set i=0
loop
exitwhen i>5
set p=DO[i]
if EI0[GetPlayerId(p)]==true and S10[GetPlayerId(p)]==false then
call JDI(BO,10,GetObjectName(1848658756)+" "+(CR0[GetPlayerId((p))]))
call NGI(p)
set S10[GetPlayerId(p)]=true
endif
set i=i+1
endloop
endif
else
if VLI(GetTriggerPlayer())then
call JDI(AO,10,GetObjectName(1848658754)+" "+I2S(ZLI)+"/"+I2S(L3O)+" ("+(CR0[GetPlayerId((GetTriggerPlayer()))])+")")
else
call JDI(BO,10,GetObjectName(1848658754)+" "+I2S(ZLI)+"/"+I2S(L3O)+" ("+(CR0[GetPlayerId((GetTriggerPlayer()))])+")")
endif
endif
endfunction
function L5O takes nothing returns nothing
local integer i=1
local integer YJI
local player p
loop
exitwhen i>5
set p=CO[i]
set YJI=R2I(TimerGetRemaining(F0[GetPlayerId(p)]))
if YJI>0 and S40[GetPlayerId(p)]and DL==false and U2==false then
call LeaderboardDisplay(S50[GetPlayerId(p)],true)
call LeaderboardSetLabel(S50[GetPlayerId(p)],"   "+GetObjectName(1848653910)+" "+I2S(YJI)+" "+GetObjectName(1848654133))
else
call LeaderboardDisplay(S50[GetPlayerId(p)],false)
endif
set p=DO[i]
set YJI=R2I(TimerGetRemaining(F0[GetPlayerId(p)]))
if YJI>0 and S40[GetPlayerId(p)]and DL==false and U2==false then
call LeaderboardDisplay(S50[GetPlayerId(p)],true)
call LeaderboardSetLabel(S50[GetPlayerId(p)],"   "+GetObjectName(1848653910)+" "+I2S(YJI)+" "+GetObjectName(1848654133))
else
call LeaderboardDisplay(S50[GetPlayerId(p)],false)
endif
set i=i+1
endloop
endfunction
function L6O takes nothing returns nothing
local integer x=0
set x=x+1
set S50[GetPlayerId(CO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(CO[x],S50[GetPlayerId(CO[x])])
call LeaderboardDisplay(S50[GetPlayerId(CO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")
set S50[GetPlayerId(DO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(DO[x],S50[GetPlayerId(DO[x])])
call LeaderboardDisplay(S50[GetPlayerId(DO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(DO[x])],GetObjectName(1848657204)+": ")
set x=x+1
set S50[GetPlayerId(CO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(CO[x],S50[GetPlayerId(CO[x])])
call LeaderboardDisplay(S50[GetPlayerId(CO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")
set S50[GetPlayerId(DO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(DO[x],S50[GetPlayerId(DO[x])])
call LeaderboardDisplay(S50[GetPlayerId(DO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(DO[x])],GetObjectName(1848657204)+": ")
set x=x+1
set S50[GetPlayerId(CO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(CO[x],S50[GetPlayerId(CO[x])])
call LeaderboardDisplay(S50[GetPlayerId(CO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")
set S50[GetPlayerId(DO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(DO[x],S50[GetPlayerId(DO[x])])
call LeaderboardDisplay(S50[GetPlayerId(DO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(DO[x])],GetObjectName(1848657204)+": ")
set x=x+1
set S50[GetPlayerId(CO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(CO[x],S50[GetPlayerId(CO[x])])
call LeaderboardDisplay(S50[GetPlayerId(CO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")
set S50[GetPlayerId(DO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(DO[x],S50[GetPlayerId(DO[x])])
call LeaderboardDisplay(S50[GetPlayerId(DO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(DO[x])],GetObjectName(1848657204)+": ")
set x=x+1
set S50[GetPlayerId(CO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(CO[x],S50[GetPlayerId(CO[x])])
call LeaderboardDisplay(S50[GetPlayerId(CO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")
set S50[GetPlayerId(DO[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(DO[x],S50[GetPlayerId(DO[x])])
call LeaderboardDisplay(S50[GetPlayerId(DO[x])],false)
call LeaderboardSetLabel(S50[GetPlayerId(DO[x])],GetObjectName(1848657204)+": ")
endfunction
function YSO takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
if GetEventPlayerChatString()=="-don"or GetEventPlayerChatString()=="-deathon"then
set S40[x]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653911))
else
set S40[x]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653912))
endif
endfunction
function L7O takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddAction(t,function L6O)
call TriggerRegisterTimerEvent(t,.5,false)
set t=CreateTrigger()
call TriggerAddAction(t,function L5O)
call TriggerRegisterTimerEvent(t,1,true)
endfunction
function YMO takes nothing returns nothing
if(GetEventPlayerChatString()=="-showdeny")then
set S60[GetPlayerId(GetTriggerPlayer())]=true
else
set S60[GetPlayerId(GetTriggerPlayer())]=false
endif
endfunction
function YNO takes nothing returns nothing
call Y3I(GetTriggerPlayer(),GetObjectName(1848657991))
endfunction
function LAO takes nothing returns nothing
local integer i=0
loop
exitwhen i>16
set S60[i]=true
set UL[i]=true
set i=i+1
endloop
endfunction
function YJO takes nothing returns nothing
call ForceRemovePlayer(Q2,GetTriggerPlayer())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653909))
endfunction
function YKO takes nothing returns nothing
call ForceAddPlayer(Q2,GetTriggerPlayer())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848653914))
endfunction
function LDO takes nothing returns boolean
local integer x=GetRandomInt(1,4)
if x==1 then
set S80=V3
elseif x==2 then
set S80=W3
elseif x==3 then
set S80=BS
elseif x==4 then
set S80=CS
endif
if S90[GetPlayerId(GetLocalPlayer())]then
call EnableWeatherEffect(V3,false)
call EnableWeatherEffect(W3,false)
call EnableWeatherEffect(BS,false)
call EnableWeatherEffect(CS,false)
call EnableWeatherEffect(S80,true)
endif
return false
endfunction
function LEO takes nothing returns nothing
local integer x=GetRandomInt(1,4)
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,300,true)
call TriggerAddCondition(t,Condition(function LDO))
set S90[GetPlayerId(CO[1])]=false
set S90[GetPlayerId(CO[2])]=false
set S90[GetPlayerId(CO[3])]=false
set S90[GetPlayerId(CO[4])]=false
set S90[GetPlayerId(CO[5])]=false
set S90[GetPlayerId(DO[1])]=false
set S90[GetPlayerId(DO[2])]=false
set S90[GetPlayerId(DO[3])]=false
set S90[GetPlayerId(DO[4])]=false
set S90[GetPlayerId(DO[5])]=false
if D2 then
set S90[GetPlayerId(CS0)]=false
set S90[GetPlayerId(CT0)]=false
endif
if x==1 then
set S80=V3
elseif x==2 then
set S80=W3
elseif x==3 then
set S80=BS
elseif x==4 then
set S80=CS
endif
set t=null
endfunction
function YLO takes nothing returns nothing
local string X0O=StringCase(GetEventPlayerChatString(),false)
if S70==true then
set S70=false
call LEO()
endif
if X0O=="-weather snow"and GetLocalPlayer()==GetTriggerPlayer()then
set S90[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(V3,true)
call EnableWeatherEffect(W3,false)
call EnableWeatherEffect(BS,false)
call EnableWeatherEffect(CS,false)
endif
if X0O=="-weather rain"and GetLocalPlayer()==GetTriggerPlayer()then
set S90[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(V3,false)
call EnableWeatherEffect(W3,true)
call EnableWeatherEffect(BS,false)
call EnableWeatherEffect(CS,false)
endif
if X0O=="-weather moonlight"and GetLocalPlayer()==GetTriggerPlayer()then
set S90[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(V3,false)
call EnableWeatherEffect(W3,false)
call EnableWeatherEffect(BS,true)
call EnableWeatherEffect(CS,false)
endif
if X0O=="-weather wind"and GetLocalPlayer()==GetTriggerPlayer()then
set S90[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(V3,false)
call EnableWeatherEffect(W3,false)
call EnableWeatherEffect(BS,false)
call EnableWeatherEffect(CS,true)
endif
if X0O=="-weather off"and GetLocalPlayer()==GetTriggerPlayer()then
set S90[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(V3,false)
call EnableWeatherEffect(W3,false)
call EnableWeatherEffect(BS,false)
call EnableWeatherEffect(CS,false)
endif
if X0O=="-weather random"then
set S90[GetPlayerId(GetTriggerPlayer())]=true
if GetLocalPlayer()==GetTriggerPlayer()then
call EnableWeatherEffect(V3,false)
call EnableWeatherEffect(W3,false)
call EnableWeatherEffect(BS,false)
call EnableWeatherEffect(CS,false)
call EnableWeatherEffect(S80,true)
endif
endif
endfunction
function YTO takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
local integer HWI=GetPlayerId(GetTriggerPlayer())
set RL[HWI]=RL[HWI]+1
if RL[HWI]>20 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848656977))
return
endif
if GetEventPlayerChatString()=="-rollon"or GetEventPlayerChatString()=="-rolloff"then
return
endif
if a==0 then
set a=100
endif
if a>0 and a<2001 then
call JFI(Q2,5,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r "+GetObjectName(1848653129)+" "+I2S(GetRandomInt(1,a))+" "+GetObjectName(1848653133)+" "+I2S(a))
else
call Y3I(GetTriggerPlayer(),GetObjectName(1848652377))
endif
endfunction
function JCO takes nothing returns nothing
local integer a
if GetRandomInt(1,2)==1 then
set a=GetRandomInt(D20,D30)
else
set a=GetRandomInt(D10,DO0)
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848657747)+" "+V2I(a))
endfunction
function J9O takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),4,StringLength(GetEventPlayerChatString())))
if GetTriggerPlayer()!=CO[1]or a>2 or a<1 or RM==false or TimerGetElapsed(M)>14 or SU0==true then
return
endif
set TO0=a
set T20=a
set SQ0=true
if a==1 then
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(CO[1])]+(CR0[GetPlayerId((CO[1]))])+"|r "+GetObjectName(1848656979))
else
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(DO[1])]+(CR0[GetPlayerId((DO[1]))])+"|r "+GetObjectName(1848656979))
endif
endfunction
function J4O takes nothing returns nothing
set PL[GetPlayerId(GetTriggerPlayer())]=false
endfunction
function J5O takes nothing returns nothing
set PL[GetPlayerId(GetTriggerPlayer())]=true
endfunction
function YRO takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848654128))
set SA0[GetPlayerId(GetTriggerPlayer())]=true
if GetLocalPlayer()==GetTriggerPlayer()then
call SetPlayerName(CO[1],(CR0[GetPlayerId((CO[1]))]))
call SetPlayerName(CO[2],(CR0[GetPlayerId((CO[2]))]))
call SetPlayerName(CO[3],(CR0[GetPlayerId((CO[3]))]))
call SetPlayerName(CO[4],(CR0[GetPlayerId((CO[4]))]))
call SetPlayerName(CO[5],(CR0[GetPlayerId((CO[5]))]))
call SetPlayerName(DO[1],(CR0[GetPlayerId((DO[1]))]))
call SetPlayerName(DO[2],(CR0[GetPlayerId((DO[2]))]))
call SetPlayerName(DO[3],(CR0[GetPlayerId((DO[3]))]))
call SetPlayerName(DO[4],(CR0[GetPlayerId((DO[4]))]))
call SetPlayerName(DO[5],(CR0[GetPlayerId((DO[5]))]))
endif
endfunction
function YPO takes nothing returns nothing
local integer id=GetPlayerId(GetTriggerPlayer())
if QL[id]==true then
set QL[id]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848653908))
else
set QL[id]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848654129))
endif
endfunction
function JFO takes nothing returns nothing
local integer id=GetPlayerId(GetTriggerPlayer())
set SB0[id]=true
endfunction
function J3O takes nothing returns nothing
endfunction
function J0O takes nothing returns nothing
local integer i=1
local player p
local real LWO
loop
exitwhen i>5
set p=CO[i]
if VTI(p)then
set LWO=K[GetPlayerId(p)]/(TimerGetElapsed(M))*60
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653876)+" "+R2S(LWO))
endif
set p=DO[i]
if VTI(p)then
set LWO=K[GetPlayerId(p)]/(TimerGetElapsed(M))*60
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653876)+" "+R2S(LWO))
endif
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00," ")
set p=null
endfunction
function JIO takes nothing returns nothing
call MEI(GetTriggerPlayer())
endfunction
function LXO takes nothing returns boolean
call ZSI(GetTriggeringTrigger())
set SC0=true
return false
endfunction
function LYO takes real d returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function LXO))
set t=null
endfunction
function LJO takes player H8I returns nothing
local integer LKO
local player LLO
set LKO=0
loop
set LLO=Player(LKO)
if(PlayersAreCoAllied(H8I,LLO)and H8I!=LLO)then
call SetPlayerAlliance(H8I,LLO,ALLIANCE_SHARED_VISION,true)
call SetPlayerAlliance(H8I,LLO,ALLIANCE_SHARED_CONTROL,true)
call SetPlayerAlliance(LLO,H8I,ALLIANCE_SHARED_CONTROL,true)
endif
set LKO=LKO+1
exitwhen LKO==12
endloop
endfunction
function YUO takes nothing returns nothing
local integer HWI=S2I(SubString(GetEventPlayerChatString(),9,StringLength(GetEventPlayerChatString())))
local integer i=1
local player p
local string Q1I
if SC0 then
if(Z0<10)then
set Q1I=I2S(H0)+":0"+I2S(Z0)
else
set Q1I=I2S(H0)+":"+I2S(Z0)
endif
if HWI<1 or SD0[HWI]==false then
loop
exitwhen i>5
set p=CO[i]
if VTI(p)and((TimerGetElapsed(M))-L[GetPlayerId(p)])>300.0 and SD0[GetPlayerId(p)]==false then
set SD0[GetPlayerId(p)]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653127)+" "+R2S(((TimerGetElapsed(M))-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,GetObjectName(1848653135)+" |cff99ccff-kickafk "+I2S(GetPlayerId(p))+" |r "+GetObjectName(1848653136))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00," ")
endif
set p=DO[i]
if VTI(p)and((TimerGetElapsed(M))-L[GetPlayerId(p)])>300.0 and SD0[GetPlayerId(p)]==false then
set SD0[GetPlayerId(p)]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653127)+" "+R2S(((TimerGetElapsed(M))-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,GetObjectName(1848653135)+" |cff99ccff-kickafk "+I2S(GetPlayerId(p))+" |r "+GetObjectName(1848653136))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00," ")
endif
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00," ")
elseif VTI(Player(HWI))==true and IsPlayerAlly(GetTriggerPlayer(),Player(HWI))==true then
call DisplayTimedTextToPlayer(Player(HWI),0,I3,3600,"|c00ff0303"+GetObjectName(1848653125)+"|r")
call IH1(Player(HWI))
set L3[GetPlayerId(Player(HWI))]="|c00555555"+Q1I+"|r"
call RemovePlayer(Player(HWI),PLAYER_GAME_RESULT_DEFEAT)
call LJO(Player(HWI))
if FL then
call NEI(Player(HWI))
endif
set EI0[GetPlayerId(Player(HWI))]=true
call IG1(Player(HWI))
call JDI(Q2,30.00,"|c00ff0303"+(CR0[GetPlayerId((Player(HWI)))])+" "+GetObjectName(1848653125)+"|r")
endif
endif
endfunction
function YQO takes nothing returns nothing
local integer i=1
local player p
local integer x=0
if SC0 then
loop
exitwhen i>5
set p=CO[i]
if VTI(p)and((TimerGetElapsed(M))-L[GetPlayerId(p)])/60>0.2 then
set x=x+1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653124)+" "+R2S(((TimerGetElapsed(M))-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))
endif
set p=DO[i]
if VTI(p)and((TimerGetElapsed(M))-L[GetPlayerId(p)])/60>0.2 then
set x=x+1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653124)+" "+R2S(((TimerGetElapsed(M))-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))
endif
set i=i+1
endloop
if x<1 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,GetObjectName(1311782225))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00," ")
endif
endif
endfunction
function LMO takes nothing returns boolean
local integer i=1
local player p
local real Q1I=(TimerGetElapsed(M))
if SC0 then
loop
exitwhen i>5
set p=CO[i]
if VTI(p)and(Q1I-L[GetPlayerId(p)])>300.0 and SD0[GetPlayerId(p)]==false then
set SD0[GetPlayerId(p)]=true
call JDI(AO,15,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653127)+" "+R2S((Q1I-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))
call JDI(AO,15,GetObjectName(1848653135)+" |cff99ccff-kickafk "+I2S(GetPlayerId(p))+" |r "+GetObjectName(1848653136))
call JDI(AO,15," ")
endif
set p=DO[i]
if VTI(p)and(Q1I-L[GetPlayerId(p)])>300.0 and SD0[GetPlayerId(p)]==false then
set SD0[GetPlayerId(p)]=true
call JDI(BO,15,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653127)+" "+R2S((Q1I-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))
call JDI(BO,15,GetObjectName(1848653135)+" |cff99ccff-kickafk "+I2S(GetPlayerId(p))+" |r "+GetObjectName(1848653136))
call JDI(BO,15," ")
endif
set i=i+1
endloop
endif
return false
endfunction
function LNO takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())!=CO[0]and GetOwningPlayer(GetTriggerUnit())!=DO[0]then
set K[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=K[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]+1
if GetIssuedOrderId()!=851983 then
set L[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=(TimerGetElapsed(M))
set SD0[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
endif
if(GetIssuedOrderId()==851983 or GetIssuedOrderId()==851971)and GetOrderTargetItem()!=null then
if GetIssuedOrderId()==851983 or(GetIssuedOrderId()==851971 and(LoadBoolean(ZY,(GetHandleId(GetItemPlayer(GetOrderTargetItem()))),(139)))==true)then
if GetItemPlayer(GetOrderTargetItem())!=GetOwningPlayer(GetTriggerUnit())and IsPointInRegion(LK,GetItemX(GetOrderTargetItem()),GetItemY(GetOrderTargetItem()))==true then
call DisableTrigger(GetTriggeringTrigger())
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848657719))
call EnableTrigger(GetTriggeringTrigger())
endif
endif
endif
endif
return false
endfunction
function LTO takes nothing returns boolean
return XBI(GetFilterUnit())and GetOwningPlayer(GetFilterUnit())==GetTriggerPlayer()
endfunction
function Courier_Add takes nothing returns nothing
call UnitAddType(GetEnumUnit(),UNIT_TYPE_PEON)
endfunction
function Courier_Remove takes nothing returns nothing
call UnitRemoveType(GetEnumUnit(),UNIT_TYPE_PEON)
endfunction
function J1O takes nothing returns nothing
local group g=ZJI()
call GroupEnumUnitsInRange(g,0,0,12000,Condition(function LTO))
call ZYI(g)
set g=null
endfunction
function LPO takes nothing returns nothing
local string X0O=StringCase(GetEventPlayerChatString(),false)
local boolean LQO=X0O=="-mode1"
local boolean LUO=X0O=="-mode2"
if LQO==false and LUO==false then
return
endif
if(TimerGetElapsed(M))>60 then
call Y6I(GetTriggerPlayer(),GetObjectName(1848652376))
return
elseif(TimerGetElapsed(M))<15 then
call Y6I(GetTriggerPlayer(),GetObjectName(1848652376))
return
endif
if LQO then
set MK=1
elseif LUO then
set MK=2
endif
call VRO()
call JDI(Q2,15,GetObjectName(1848653134)+" "+GetObjectName(1848653109))
call JDI(Q2,15,GetObjectName(1848653138))
call ZSI(GetTriggeringTrigger())
endfunction
function M0O takes nothing returns boolean
call ExecuteFunc("LPO")
return false
endfunction
function AH_RegisterCommands takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,XO,"-",false)
call TriggerAddCondition(t,Condition(function M0O))
call JDI(Q2,30,"|cff99ccff"+GetObjectName(1848653139)+"|r")
call JDI(Q2,30,GetObjectName(1848653140)+" "+GetObjectName(1848653128)+" "+GetObjectName(1848653142)+" ")
call JDI(Q2,30," ")
call JDI(Q2,30,"|cff99ccff-mode1|r "+GetObjectName(1848653143)+". ("+GetObjectName(1848653144)+")")
call JDI(Q2,30,"|cff99ccff-mode2|r "+GetObjectName(1848653362))
endfunction
function AH_RegisterCommands_Delayed takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.5,false)
set t=null
endfunction
function JOO takes nothing returns nothing
if(TimerGetElapsed(M))>60 then
call Y6I(GetTriggerPlayer(),GetObjectName(1848652376))
return
elseif(TimerGetElapsed(M))<15 then
call Y6I(GetTriggerPlayer(),GetObjectName(1848652376))
return
endif
if GetTriggerPlayer()!=XO then
call Y6I(GetTriggerPlayer(),GetObjectName(1848652375))
return
endif
if NK==false then
set NK=true
set MK=2
call VRO()
call JDI(Q2,15,GetObjectName(1848653134)+" "+GetObjectName(1848653109))
call JDI(Q2,15,GetObjectName(1848653138))
else
call Y3I(GetTriggerPlayer(),GetObjectName(1848652374))
endif
endfunction
function J2O takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656726)+" [|cffff0000E|r|cffff0000E|r|cffff0000E|r] - [|cffffcc00T|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656725)+" [|cffff0000E|r|cffff0000E|r|cff00ffffW|r] - [|cffffcc00D|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656724)+" [|cffff0000E|r|cffff0000E|r|cff0000ffQ|r] - [|cffffcc00F|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656694)+" [|cff0000ffQ|r|cff0000ffQ|r|cff0000ffQ|r] - [|cffffcc00Y|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656716)+" [|cff0000ffQ|r|cff0000ffQ|r|cff00ffffW|r] - [|cffffcc00V|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656718)+" [|cff0000ffQ|r|cff0000ffQ|r|cffff0000E|r] - [|cffffcc00G|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656723)+" [|cff00ffffW|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00Z|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656719)+" [|cff00ffffW|r|cff00ffffW|r|cff0000ffQ|r] - [|cffffcc00X|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656720)+" [|cff00ffffW|r|cff00ffffW|r|cff00ffffW|r] - [|cffffcc00C|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656721)+" [|cff0000ffQ|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00B|r]")
endfunction
function MIO takes string s returns nothing
call StopMusic(true)
call PlayMusic(s)
endfunction
function J6O takes nothing returns nothing
local string s=GetEventPlayerChatString()
local integer WCI=GetRandomInt(1,SF0)
if GetLocalPlayer()==GetTriggerPlayer()then
if s=="-music off"then
call StopMusic(false)
elseif s=="-music random"then
call MIO(SE0[WCI])
elseif s=="-music nightelf1"then
call MIO(QC)
elseif s=="-music nightelf2"then
call MIO(UC)
elseif s=="-music nightelf3"then
call MIO(OD)
elseif s=="-music human1"then
call MIO(XC)
elseif s=="-music human2"then
call MIO(YC)
elseif s=="-music human3"then
call MIO(JC)
elseif s=="-music orc1"then
call MIO(BD)
elseif s=="-music orc2"then
call MIO(DD)
elseif s=="-music orc3"then
call MIO(ED)
elseif s=="-music undead1"then
call MIO(IE)
elseif s=="-music undead2"then
call MIO(OE)
elseif s=="-music undead3"then
call MIO(AE)
elseif s=="-music other1"then
call MIO(FD)
elseif s=="-music other2"then
call MIO(GD)
elseif s=="-music other3"then
call MIO(HD)
elseif s=="-music other4"then
call MIO(ZD)
elseif s=="-music other5"then
call MIO(VD)
elseif s=="-music other6"then
call MIO(EF)
elseif s=="-music other7"then
call MIO(FF)
elseif s=="-music other8"then
call MIO(GF)
elseif s=="-music other9"then
call MIO(HF)
elseif s=="-music special"then
call MIO(SG0)
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848656727)+" ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,"off, random, nightelf1, nightelf2, nightelf3, human1, human2, human3, orc1, orc2, orc3, undead1, undead2, undead3, other1, other2, other3, other4, other5, other6, other7, other8, other9, special")
endif
endif
endfunction
function MOO takes player p,integer r,integer g,integer b,integer a returns nothing
if GetLocalPlayer()==p then
call SetWaterBaseColor(r,g,b,a)
endif
endfunction
function M2O takes string s returns nothing
local string M3O=""
local string M4O=""
local string M5O=""
local integer i=0
local integer RVI=StringLength(s)
local integer M6O=1
loop
exitwhen i>RVI
if SubString(s,i,i+1)==" "then
set M6O=M6O+1
else
if M6O==1 then
set M3O=M3O+SubString(s,i,i+1)
elseif M6O==2 then
set M4O=M4O+SubString(s,i,i+1)
else
set M5O=M5O+SubString(s,i,i+1)
endif
endif
set i=i+1
endloop
set SZ0=S2I(M3O)
set SV0=S2I(M4O)
set SW0=S2I(M5O)
endfunction
function J7O takes nothing returns nothing
local string M7O=SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString()))
local player p=GetTriggerPlayer()
local integer r
local integer g
local integer b
set SH0[GetPlayerId(p)]=true
if M7O=="red"then
call MOO(p,255,0,0,255)
elseif M7O=="blue"then
call MOO(p,0,0,255,255)
elseif M7O=="green"then
call MOO(p,0,255,0,255)
elseif M7O=="default"then
call MOO(p,0,0,255,255)
elseif M7O=="random"then
set r=GetRandomInt(0,255)
set g=GetRandomInt(0,255)
set b=GetRandomInt(0,255)
call MOO(p,r,g,b,255)
call DisplayTimedTextToPlayer(p,0,0,5,GetObjectName(1848657988)+" r="+I2S(r)+" g="+I2S(g)+" b="+I2S(b))
else
call M2O(M7O)
set r=SZ0
set g=SV0
set b=SW0
if r==0 and g==0 and b==0 and M7O!="0 0 0"then
return
endif
if r>=0 and r<=255 and g>=0 and g<=255 and b>=0 and b<=255 then
call MOO(p,r,g,b,255)
endif
endif
endfunction
function JAO takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,15.00,"This command has been temporarily disabled")
endfunction
function JBO takes nothing returns boolean
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,"Total Bonus XP/Gold: "+I2S(ES0[GetPlayerId(GetTriggerPlayer())])+"/"+I2S(ET0[GetPlayerId(GetTriggerPlayer())]))
return false
endfunction
function JYO takes nothing returns boolean
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848659023)+": "+I2S(UC0))
return false
endfunction
function Quote_ReplaySound takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer x=(LoadInteger(ZY,(V0I),(148)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
call YII(p,SX0[x])
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set p=null
return false
endfunction
function J8O takes nothing returns nothing
local string s=GetEventPlayerChatString()
local trigger t
local integer x=S2I(SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString())))
local integer i=1
if x<1 or x>SJ0 then
set x=GetRandomInt(1,SJ0)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10,GetObjectName(1848657205)+" "+I2S(x))
endif
if SK0 then
loop
exitwhen i>SJ0
call NOI(SX0[i])
set i=i+1
endloop
set SK0=false
endif
if SY0[x]==false then
endif
call YII(GetTriggerPlayer(),SX0[x])
endfunction
function MAO takes player p1 returns string
local string s=GetObjectName(1848657730)
set s=PAI(s,"$c1","|c00ff0303")
set s=PAI(s,"$p1",C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r")
return s
endfunction
function MBO takes nothing returns string
local string s=GetObjectName(1848657729)
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$c2","|c00ff0303")
return s
endfunction
function MCO takes nothing returns nothing
local integer i=1
local unit V8I
if NK then
loop
exitwhen i>5
set V8I=L1[GetPlayerId(CO[i])]
if V8I!=null then
if MK==2 then
call P2I(V8I)
endif
call UnitSetUsesAltIcon(V8I,false)
endif
set V8I=L1[GetPlayerId(DO[i])]
if V8I!=null then
if MK==2 then
call P2I(V8I)
endif
call UnitSetUsesAltIcon(V8I,false)
endif
set i=i+1
endloop
set V8I=null
endif
endfunction
function MDO takes player p1,player p2 returns string
local string s=GetObjectName(1848657714)
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$c2","|c00ff0303")
set s=PAI(s,"$c2","|c00ff0303")
set s=PAI(s,"$p1",C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r")
set s=PAI(s,"$p2",C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r")
return s
endfunction
function MEO takes string MFO,string MGO returns string
local string s=GetObjectName(1848657494)
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$c1","|c006699CC")
set s=PAI(s,"$p1",MFO)
set s=PAI(s,"$p2",MGO)
return s
endfunction
function MHO takes player p2 returns string
local string s=GetObjectName(1848657491)
set s=PAI(s,"$p2",C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r")
set s=PAI(s,"$c1","|c006699CC")
return s
endfunction
function MZO takes player p returns nothing
local integer W5I
local integer W6I
if(VLI(p)==true)then
set W5I=1
set W6I=5
loop
exitwhen W5I>W6I
if(CO[W5I]!=p)then
if(VTI(CO[W5I])==true)then
call SetPlayerAllianceStateBJ(p,CO[W5I],4)
endif
endif
set W5I=W5I+1
endloop
else
set W5I=1
set W6I=5
loop
exitwhen W5I>W6I
if(DO[W5I]!=p)then
if(VTI(DO[W5I])==true)then
call SetPlayerAllianceStateBJ(p,DO[W5I],4)
endif
endif
set W5I=W5I+1
endloop
endif
endfunction
function MVO takes nothing returns nothing
if GetOwningPlayer(GetEnumUnit())==GM then
call SetUnitOwner(GetEnumUnit(),HM,true)
elseif GetOwningPlayer(GetEnumUnit())==HM then
call SetUnitOwner(GetEnumUnit(),GM,true)
endif
endfunction
function MWO takes unit u,player p returns nothing
local real x1
local real y1
local real x2
local real y2
local integer i
local item NFI
if VLI(p)then
set x1=GetRectCenterX(T3)
set y1=GetRectCenterY(T3)
set x2=GetRectCenterX(A4)
set y2=GetRectCenterY(A4)
else
set x1=GetRectCenterX(A4)
set y1=GetRectCenterY(A4)
set x2=GetRectCenterX(T3)
set y2=GetRectCenterY(T3)
endif
call SetUnitX(u,x1)
call SetUnitY(u,y1)
if XBI(u)then
call IssueImmediateOrder(u,"creepanimatedead")
endif
if IsUnitType(u,UNIT_TYPE_HERO)==true then
call SaveBoolean(ZY,(GetHandleId(u)),(140),(true))
call SaveInteger(ZY,(GetHandleId((u))),((4259)),(2))
call UnitRemoveAbility(u,1093678162)
call SetUnitInvulnerable(u,false)
call PauseUnit(u,false)
set i=0
loop
exitwhen i>5
set NFI=UnitItemInSlot(u,i)
if GetUnitTypeId(u)!=1211117642 and NFI!=null and(GetItemPlayer(NFI)!=GetOwningPlayer(u)and TQI(NFI)!=VI0 and TQI(NFI)!=V10)and GetItemTypeId(NFI)!=F20[ZX0]then
call UnitRemoveItem(u,NFI)
endif
set i=i+1
endloop
endif
call SetUnitX(u,x2)
call SetUnitY(u,y2)
call SetUnitColor(u,GetPlayerColor(p))
set NFI=null
endfunction
function MXO takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or XBI(GetFilterUnit())then
call MWO(GetFilterUnit(),XM)
elseif GetUnitTypeId(GetFilterUnit())==1852010352 then
call IssueImmediateOrder(GetFilterUnit(),"creepanimatedead")
elseif GetUnitTypeId(GetFilterUnit())==1966092354 then
return true
endif
return false
endfunction
function MYO takes item i,player p returns nothing
local real x
local real y
if VLI(p)then
set x=GetRectCenterX(A4)
set y=GetRectCenterY(A4)
else
set x=GetRectCenterX(T3)
set y=GetRectCenterY(T3)
endif
call SetItemPosition(i,x,y)
endfunction
function MJO takes nothing returns nothing
if GetItemPlayer(GetEnumItem())==XM then
call MYO(GetEnumItem(),XM)
endif
endfunction
function MKO takes player p1,player p2 returns nothing
local group g1=ZJI()
local group g2=ZJI()
set XM=p1
call GroupEnumUnitsOfPlayer(g1,p1,Condition(function MXO))
set XM=p2
call GroupEnumUnitsOfPlayer(g2,p2,Condition(function MXO))
call ForGroup(g1,function MVO)
call ForGroup(g2,function MVO)
set XM=p1
call EnumItemsInRect(GetWorldBounds(),Condition(function K6I),function MJO)
set XM=p2
call EnumItemsInRect(GetWorldBounds(),Condition(function K6I),function MJO)
call ZYI(g1)
call ZYI(g2)
set g1=null
set g2=null
endfunction
function MLO takes player p1,player p2 returns nothing
local integer x
local integer y
local integer i
local integer i1
local integer i2
local real x1
local real y1
local real x2
local real y2
local player p
local string MFO=C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"
local string MGO=C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"
local integer K3O
set K3O=E80[GetPlayerId(p1)]
set E80[GetPlayerId(p1)]=E80[GetPlayerId(p2)]
set E80[GetPlayerId(p2)]=K3O
if VLI(p1)then
set x1=GetRectCenterX(T3)
set y1=GetRectCenterY(T3)
else
set x1=GetRectCenterX(A4)
set y1=GetRectCenterY(A4)
endif
if VLI(p2)then
set x2=GetRectCenterX(T3)
set y2=GetRectCenterY(T3)
else
set x2=GetRectCenterX(A4)
set y2=GetRectCenterY(A4)
endif
set i=1
loop
exitwhen i>5
if CO[i]==p1 or DO[i]==p1 then
set i1=i
endif
if CO[i]==p2 or DO[i]==p2 then
set i2=i
endif
set i=i+1
endloop
if VLI(p1)then
set DO[i2]=p1
set CO[i1]=p2
else
set CO[i2]=p1
set DO[i1]=p2
endif
call SetPlayerTeam(CO[0],0)
call SetPlayerTeam(CO[1],0)
call SetPlayerTeam(CO[2],0)
call SetPlayerTeam(CO[3],0)
call SetPlayerTeam(CO[4],0)
call SetPlayerTeam(CO[5],0)
call SetPlayerTeam(DO[0],1)
call SetPlayerTeam(DO[1],1)
call SetPlayerTeam(DO[2],1)
call SetPlayerTeam(DO[3],1)
call SetPlayerTeam(DO[4],1)
call SetPlayerTeam(DO[5],1)
call UII()
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
call SetPlayerAllianceStateBJ(CO[x],CO[y],3)
call SetPlayerAllianceStateBJ(DO[x],DO[y],3)
call SetPlayerAllianceStateBJ(CO[x],DO[y],0)
call SetPlayerAllianceStateBJ(DO[x],CO[y],0)
set y=y+1
endloop
set y=0
set x=x+1
endloop
call ForceClear(AO)
call ForceClear(BO)
call ForceAddPlayer(AO,CO[0])
call ForceAddPlayer(AO,CO[1])
call ForceAddPlayer(AO,CO[2])
call ForceAddPlayer(AO,CO[3])
call ForceAddPlayer(AO,CO[4])
call ForceAddPlayer(AO,CO[5])
call ForceAddPlayer(BO,DO[0])
call ForceAddPlayer(BO,DO[1])
call ForceAddPlayer(BO,DO[2])
call ForceAddPlayer(BO,DO[3])
call ForceAddPlayer(BO,DO[4])
call ForceAddPlayer(BO,DO[5])
call ExecuteFunc("U1I")
call MKO(p1,p2)
set JM=true
call PanCameraToTimedForPlayer(p1,x1,y1,0)
call PanCameraToTimedForPlayer(p2,x2,y2,0)
call U0I()
set FM=false
if YM!=null then
call TriggerEvaluate(YM)
endif
if GetPlayerSlotState(p2)==PLAYER_SLOT_STATE_EMPTY then
set CR0[GetPlayerId(p2)]=GetPlayerName(p2)
endif
set i=1
loop
exitwhen i>5
set p=CO[i]
if VQI(p)then
call MZO(p)
endif
set p=DO[i]
if VQI(p)then
call MZO(p)
endif
set i=i+1
endloop
call MCO()
call CRO()
call ClearTextMessages()
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,MEO(MFO,MGO))
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20," ")
call Q2I(p1)
call Q2I(p2)
endfunction
function MMO takes nothing returns nothing
local integer i=1
local player p
set KM=0
set SM=0
loop
exitwhen i>5
set p=CO[i]
if VTI(p)then
set SM=SM+1
if VM[GetPlayerId(p)]==true then
set KM=KM+1
endif
endif
set p=DO[i]
if VTI(p)then
set SM=SM+1
if VM[GetPlayerId(p)]==true then
set KM=KM+1
endif
endif
set i=i+1
endloop
endfunction
function MNO takes nothing returns nothing
set FM=false
if YM!=null then
call TriggerEvaluate(YM)
endif
call ClearTextMessages()
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,MAO(GetTriggerPlayer()))
endfunction
function MSO takes nothing returns nothing
local integer i=1
local player p
local integer MTO=0
local integer MRO=0
local integer MPO=0
if VM[GetPlayerId(GetTriggerPlayer())]==false then
set VM[GetPlayerId(GetTriggerPlayer())]=true
call MMO()
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,C0[GetPlayerId(GetTriggerPlayer())]+(CR0[GetPlayerId((GetTriggerPlayer()))])+"|r|c006699CC "+GetObjectName(1848657492)+"|r ("+I2S(KM)+"/"+I2S(SM)+")")
endif
loop
exitwhen i>5
set p=CO[i]
if VTI(p)and VM[GetPlayerId(p)]==false then
set MTO=MTO+1
set MPO=MPO+1
endif
if VTI(p)and VM[GetPlayerId(p)]==true then
set MRO=MRO+1
set MPO=MPO+1
endif
set p=DO[i]
if VTI(p)and VM[GetPlayerId(p)]==false then
set MTO=MTO+1
set MPO=MPO+1
endif
if VTI(p)and VM[GetPlayerId(p)]==true then
set MRO=MRO+1
set MPO=MPO+1
endif
set i=i+1
endloop
if MTO<2 and MRO>=R2I(MPO/2)then
if(MPO==2 and MRO>1)or MPO!=2 then
call MLO(GM,HM)
endif
endif
endfunction
function MQO takes nothing returns nothing
local integer i=1
local player p=GetTriggerPlayer()
local player MUO
local string s
local string s2
loop
exitwhen i>5
set s=""
set s2=""
if VLI(p)then
set MUO=DO[i]
else
set MUO=CO[i]
endif
if GetPlayerSlotState(MUO)==PLAYER_SLOT_STATE_LEFT and GetPlayerController(MUO)==MAP_CONTROL_USER then
set s="|c00ff0303["+GetObjectName(1848657497)+"]|r"
endif
if L1[GetPlayerId(MUO)]!=null then
set s2=" ("+GetUnitName(L1[GetPlayerId(MUO)])+")"
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,GetObjectName(1848653875)+"|c006699CC "+"-switch "+I2S(i)+"|r "+GetObjectName(1848657489)+" "+C0[GetPlayerId(MUO)]+(CR0[GetPlayerId((MUO))])+s2+"|r "+s)
set i=i+1
endloop
endfunction
function N0O takes nothing returns boolean
local integer i=0
if FM then
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,"|c00ff0303"+GetObjectName(1848657493)+"|r")
endif
set SO0=true
set FM=false
set GM=null
set HM=null
loop
exitwhen i>16
set VM[i]=false
set i=i+1
endloop
call ZSI(GetTriggeringTrigger())
set YM=null
return false
endfunction
function NIO takes player p1,player p2 returns nothing
local trigger t=CreateTrigger()
local integer i=0
local string s
local string DWO
local string msg2
local string msg3
local player p
local string s2
set SO0=false
set FM=true
set GM=p1
set HM=p2
loop
exitwhen i>16
set VM[i]=false
set i=i+1
endloop
set VM[GetPlayerId(GM)]=true
call TriggerRegisterTimerEvent(t,60,false)
call TriggerAddCondition(t,Condition(function N0O))
set YM=t
set s=MDO(p1,p2)
set s2=MBO()
set i=1
loop
exitwhen i>5
set p=CO[i]
if p!=p1 then
call DisplayTimedTextToPlayer(p,0,0,20,s)
call DisplayTimedTextToPlayer(p,0,0,20,s2)
endif
set p=DO[i]
if p!=p1 then
call DisplayTimedTextToPlayer(p,0,0,20,s)
call DisplayTimedTextToPlayer(p,0,0,20,s2)
endif
set i=i+1
endloop
set s=MHO(p2)
call DisplayTimedTextToPlayer(p1,0,0,20,s)
set t=null
endfunction
function JEO takes nothing returns nothing
if FL==false then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848657752))
return
endif
if D2 and GetEventPlayerChatString()!="-ok"and GetEventPlayerChatString()!="-switch accept"and GetEventPlayerChatString()!="-no"then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848657712))
return
endif
if GetEventPlayerChatString()=="-switch accept"or GetEventPlayerChatString()=="-ok"then
if FM then
call MSO()
endif
elseif GetEventPlayerChatString()=="-no"then
if FM then
call MNO()
endif
elseif GetEventPlayerChatString()=="-switch"then
if FM==false then
call MQO()
endif
elseif FM==false then
set WM=S2I(SubString(GetEventPlayerChatString(),8,StringLength(GetEventPlayerChatString())))
if WM>0 and WM<6 then
if VLI(GetTriggerPlayer())then
if S10[GetPlayerId(DO[WM])]==false then
call NIO(GetTriggerPlayer(),DO[WM])
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848658009))
endif
else
if S10[GetPlayerId(CO[WM])]==false then
call NIO(GetTriggerPlayer(),CO[WM])
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848658009))
endif
endif
endif
endif
endfunction
function Command_NoSwitch takes nothing returns nothing
if B0==false and FL and GetTriggerPlayer()==XO then
set FL=false
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,GetObjectName(1848657752))
endif
endfunction
function JXO takes nothing returns nothing
call SetUnitAnimation(L1[GetPlayerId(GetTriggerPlayer())],"sleep")
endfunction
function JJO takes nothing returns nothing
call SetUnitAnimationByIndex(L1[GetPlayerId(GetTriggerPlayer())],23)
endfunction
function JGO takes nothing returns nothing
if SL0[GetPlayerId(GetTriggerPlayer())]==false then
set SL0[GetPlayerId(GetTriggerPlayer())]=true
if GetObjectName(1848657992)=="Language: English"then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"You have activated the -tips system.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"Please remember that these are just introductory recommendations and are not the only way to play heroes.")
endif
if L1[GetPlayerId(GetTriggerPlayer())]!=null then
call PTI(GetTriggerPlayer(),GetUnitPointValue(L1[GetPlayerId(GetTriggerPlayer())]))
endif
endif
endfunction
function NOO takes integer N2O,integer N3O returns integer
if N3O==0 then
return N2O
elseif N3O==1 then
if N2O==1130656372 then
return 1130656372
endif
if N2O==1130656356 then
return 1231317865
endif
if N2O==1131833710 then
return 1232301687
endif
if N2O==1130852979 then
return 1232301687
endif
if N2O==1131181671 then
return 1232301687
endif
if N2O==1517709678 then
return 1231317865
endif
if N2O==1516399475 then
return 1231188849
endif
if N2O==1315205732 then
return 1231188849
endif
elseif N3O==2 then
if N2O==1130656372 then
return 1130656372
endif
if N2O==1130656356 then
return 1499622509
endif
if N2O==1131833710 then
return 1499624556
endif
if N2O==1130852979 then
return 1130852979
endif
if N2O==1131181671 then
return 1131181671
endif
if N2O==1517709678 then
return 1500673132
endif
if N2O==1516399475 then
return 1500999010
endif
if N2O==1315205732 then
return 1247966316
endif
elseif N3O==3 then
if N2O==1130656372 then
return 1130656372
endif
if N2O==1130656356 then
return 1499622509
endif
if N2O==1131833710 then
return 1499624556
endif
if N2O==1130852979 then
return 1500673132
endif
if N2O==1131181671 then
return 1131181671
endif
if N2O==1517709678 then
return 1500673132
endif
if N2O==1516399475 then
return 1499624556
endif
if N2O==1315205732 then
return 1247966316
endif
elseif N3O==4 then
if N2O==1130656372 then
return 1130656372
endif
if N2O==1130656356 then
return 1131570027
endif
if N2O==1131833710 then
return 1098279278
endif
if N2O==1130852979 then
return 1097298532
endif
if N2O==1131181671 then
return 1097627236
endif
if N2O==1517709678 then
return 1097298532
endif
if N2O==1516399475 then
return 1131570027
endif
if N2O==1315205732 then
return 1131833710
endif
elseif N3O==5 then
if N2O==1130656372 then
return 1130656372
endif
if N2O==1130656356 then
return 1365537394
endif
if N2O==1131833710 then
return 1365467760
endif
if N2O==1130852979 then
return 1365734004
endif
if N2O==1131181671 then
return 1365734003
endif
if N2O==1517709678 then
return 1365734004
endif
if N2O==1516399475 then
return 1365467760
endif
if N2O==1315205732 then
return 1366520944
endif
elseif N3O==6 then
if N2O==1130656372 then
return 1130656372
endif
if N2O==1130656356 then
return 1147302507
endif
if N2O==1131833710 then
return 1147630195
endif
if N2O==1130852979 then
return 1331982964
endif
if N2O==1131181671 then
return 1332114292
endif
if N2O==1517709678 then
return 1148347507
endif
if N2O==1516399475 then
return 1148416356
endif
if N2O==1315205732 then
return 1332964706
endif
elseif N3O==7 then
if N2O==1130656372 then
return 1130656372
endif
if N2O==1130656356 then
return 1197634155
endif
if N2O==1131833710 then
return 1198290531
endif
if N2O==1130852979 then
return 1197765236
endif
if N2O==1131181671 then
return 1197763442
endif
if N2O==1517709678 then
return 1198679155
endif
if N2O==1516399475 then
return 1198748004
endif
if N2O==1315205732 then
return 1197961843
endif
endif
return 0
endfunction
function N4O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real N5O=(LoadReal(ZY,(V0I),(149)))
local real N6O=(LoadReal(ZY,(V0I),(150)))
local real N7O=(LoadReal(ZY,(V0I),(151)))
local real N8O=128
local real x
local real y
local integer N9O=(LoadInteger(ZY,(V0I),(152)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local integer NAO=(LoadInteger(ZY,(V0I),(153)))
loop
exitwhen N5O>N7O
loop
exitwhen N6O>8192
if GetLocalPlayer()==p then
set NAO=NAO+1
set x=N5O
set y=N6O
call SetTerrainType(x,y,NOO(VL[NAO],N9O),KL[NAO],1,0)
set x=-N5O
set y=N6O
call SetTerrainType(x,y,NOO(WL[NAO],N9O),LL[NAO],1,0)
set x=-N5O
set y=-N6O
call SetTerrainType(x,y,NOO(YL[NAO],N9O),ML[NAO],1,0)
set x=N5O
set y=-N6O
call SetTerrainType(x,y,NOO(JL[NAO],N9O),SL[NAO],1,0)
endif
set N6O=N6O+N8O
endloop
set N6O=0
set N5O=N5O+N8O
endloop
set N7O=N7O+256
call SaveReal(ZY,(V0I),(149),((N5O)*1.0))
call SaveReal(ZY,(V0I),(150),((N6O)*1.0))
call SaveInteger(ZY,(V0I),(153),(NAO))
call SaveReal(ZY,(V0I),(151),((N7O)*1.0))
if N7O>8192 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
return false
endfunction
function NBO takes nothing returns nothing
if GetTriggerPlayer()==GetLocalPlayer()and(GetDestructableTypeId(GetEnumDestructable())==1096053874 or GetDestructableTypeId(GetEnumDestructable())==1110454322)then
call SetDestructableAnimation(GetEnumDestructable(),"stand alternate")
endif
endfunction
function NCO takes nothing returns nothing
if GetTriggerPlayer()==GetLocalPlayer()and(GetDestructableTypeId(GetEnumDestructable())==1096053874 or GetDestructableTypeId(GetEnumDestructable())==1110454322)then
call SetDestructableAnimation(GetEnumDestructable(),"stand")
endif
endfunction
function NDO takes integer N9O returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
if N9O==1 then
call EnumDestructablesInRectAll(GetWorldBounds(),function NBO)
else
call EnumDestructablesInRectAll(GetWorldBounds(),function NCO)
endif
set TL[GetPlayerId(GetTriggerPlayer())]=N9O
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function N4O))
call SaveInteger(ZY,(V0I),(152),(N9O))
call SaveReal(ZY,(V0I),(149),((0)*1.0))
call SaveReal(ZY,(V0I),(150),((0)*1.0))
call SaveReal(ZY,(V0I),(151),((160)*1.0))
call SavePlayerHandle(ZY,(V0I),(54),(GetTriggerPlayer()))
set t=null
endfunction
function Command_Terrain takes nothing returns nothing
if HL[GetPlayerId(GetTriggerPlayer())]==false then
set GL[GetPlayerId(GetTriggerPlayer())]=GL[GetPlayerId(GetTriggerPlayer())]+1
if GL[GetPlayerId(GetTriggerPlayer())]<9 then
if GetEventPlayerChatString()=="-terrain"or GetEventPlayerChatString()=="-terrain default"then
call NDO(0)
elseif GetEventPlayerChatString()=="-terrain snow"then
call NDO(1)
elseif GetEventPlayerChatString()=="-terrain city1"then
call NDO(2)
elseif GetEventPlayerChatString()=="-terrain city2"then
call NDO(3)
elseif GetEventPlayerChatString()=="-terrain jungle"then
call NDO(4)
elseif GetEventPlayerChatString()=="-terrain highlands"then
call NDO(5)
elseif GetEventPlayerChatString()=="-terrain reddungeon"then
call NDO(6)
elseif GetEventPlayerChatString()=="-terrain bluedungeon"then
call NDO(7)
endif
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848657740))
endif
endif
endfunction
function NEO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real N5O=(LoadReal(ZY,(V0I),(149)))
local real N6O=(LoadReal(ZY,(V0I),(150)))
local real N7O=(LoadReal(ZY,(V0I),(151)))
local real N8O=128
local real x
local real y
loop
exitwhen N5O>N7O
loop
exitwhen N6O>8192
set ZL=ZL+1
set x=N5O
set y=N6O
if IsPointBlighted(x,y)==false then
set VL[ZL]=GetTerrainType(x,y)
set KL[ZL]=GetTerrainVariance(x,y)
endif
set x=-N5O
set y=N6O
if IsPointBlighted(x,y)==false then
set WL[ZL]=GetTerrainType(x,y)
set LL[ZL]=GetTerrainVariance(x,y)
endif
set x=-N5O
set y=-N6O
if IsPointBlighted(x,y)==false then
set YL[ZL]=GetTerrainType(x,y)
set ML[ZL]=GetTerrainVariance(x,y)
endif
set x=N5O
set y=-N6O
if IsPointBlighted(x,y)==false then
set JL[ZL]=GetTerrainType(x,y)
set SL[ZL]=GetTerrainVariance(x,y)
endif
set N6O=N6O+N8O
endloop
set N6O=0
set N5O=N5O+N8O
endloop
set N7O=N7O+256
call SaveReal(ZY,(V0I),(149),((N5O)*1.0))
call SaveReal(ZY,(V0I),(150),((N6O)*1.0))
call SaveReal(ZY,(V0I),(151),((N7O)*1.0))
if N7O>8192 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
return false
endfunction
function NGO takes nothing returns nothing
local trigger t
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function GYO))
set SK=CreateTimer()
call TimerStart(SK,RK+1,false,null)
set t=null
endfunction
function NHO takes string JNO returns boolean
if JNO=="-ma"or JNO=="-ms"or JNO=="-cs"or JNO=="-cson"or JNO=="-disablehelp"or JNO=="-enablehelp"or JNO=="-unstuck"or JNO=="-recreate"then
return true
elseif JNO=="-swaphero"or JNO=="-showmsg"or JNO=="-hidemsg"or JNO=="-showdeny"or JNO=="-hidedeny"or JNO=="-weather rain"or JNO=="-weather snow"or JNO=="-weather moonlight"or JNO=="-weather wind"or JNO=="-weather random"or JNO=="-weather off"or JNO=="-denyinfo"or JNO=="-di"or JNO=="-deathon"or JNO=="-don"or JNO=="-deathoff"or JNO=="-doff"or JNO=="-roll"or JNO=="-hideheronames"or JNO=="-hhn"or JNO=="-test"or JNO=="-mute"or JNO=="-wtf"or JNO=="-fleshstr"or JNO=="-fs"or JNO=="-switchon"then
return true
endif
return false
endfunction
function NZO takes nothing returns boolean
return not B0
endfunction
function NVO takes string NWO returns nothing
if X2==""then
set X2="|c006699CC"+NWO+"|r"
else
set X2=X2+"/|c006699CC"+NWO+"|r"
endif
endfunction
function NXO takes string NYO,integer NJO,integer NKO returns string
return SubString(NYO,0,NJO)+SubString(NYO,NKO,StringLength(NYO))
endfunction
function NLO takes string NYO returns string
local integer PEI=StringLength(NYO)
local string NMO
local string HUO=""
local integer i=0
loop
exitwhen(i==PEI)
set NMO=StringCase(SubString(NYO,i,i+1),false)
if not(NMO==StringCase(NMO,true))then
set HUO=HUO+NMO
endif
set i=i+1
endloop
return HUO
endfunction
function NNO takes string NSO,integer N9O returns nothing
local string X0O=NLO(NSO)
local string array NTO
local string array NRO
local string array GameModeString
local boolean array NPO
local integer NQO
local integer PEI=StringLength(X0O)
local integer x=0
local integer y=0
local integer z=0
local boolean AP
local boolean AR
local boolean LM
local boolean MM
local boolean TR
local boolean DM
local boolean MR
local boolean SP
local boolean AA
local boolean AI
local boolean AS
local boolean ID
local boolean NP
local boolean SC
local boolean EM
local boolean DU
local boolean SH
local boolean VR
local boolean RV
local boolean RD
local boolean OM
local boolean NT
local boolean NB
local boolean NM
local boolean NS
local boolean SO
local boolean NR
local boolean XL
local boolean SD
local boolean PM
local boolean OI
local boolean MI
local boolean CM
local boolean FR
local boolean MO
local boolean RO
local boolean ER
local boolean CD
local boolean RS
local boolean CP
local boolean ZM
local boolean UB
set NTO[1]="allpick"
set NRO[1]="ap"
set NTO[2]="allrandom"
set NRO[2]="ar"
set NTO[3]="leaguemode"
set NRO[3]="lm"
set NTO[4]="mirrormatch"
set NRO[4]="mm"
set NTO[5]="teamrandom"
set NRO[5]="tr"
set NTO[6]="deathmatch"
set NRO[6]="dm"
set NTO[7]="moderandom"
set NRO[7]="mr"
set NTO[8]="shuffleplayers"
set NRO[8]="sp"
set NTO[9]="allagility"
set NRO[9]="aa"
set NTO[10]="allintelligence"
set NRO[10]="ai"
set NTO[11]="allstrength"
set NRO[11]="as"
set NTO[12]="itemdrop"
set NRO[12]="id"
set NTO[13]="nopowerups"
set NRO[13]="np"
set NTO[14]="supercreeps"
set NRO[14]="sc"
set NTO[15]="easymode"
set NRO[15]="em"
set NTO[16]="duplicatemode"
set NRO[16]="du"
set NTO[17]="samehero"
set NRO[17]="sh"
set NTO[18]="voterandom"
set NRO[18]="vr"
set NTO[19]="reverse"
set NRO[19]="rv"
set NTO[20]="randomdraft"
set NRO[20]="rd"
set NTO[21]="onlymid"
set NRO[21]="om"
set NTO[22]="extendedleague"
set NRO[22]="xl"
set NTO[23]="nomid"
set NRO[23]="nm"
set NTO[24]="notop"
set NRO[24]="nt"
set NTO[25]="nobot"
set NRO[25]="nb"
set NTO[26]="noswap"
set NRO[26]="ns"
set NTO[27]="norepick"
set NRO[27]="nr"
set NTO[28]="captainsdraft"
set NRO[28]="cd"
set NTO[29]="singledraft"
set NRO[29]="sd"
set NTO[30]="poolingmode"
set NRO[30]="pm"
set NTO[31]="observerinfo"
set NRO[31]="oi"
set NTO[32]="miniheroes"
set NRO[32]="mi"
set NTO[33]="captainsmode"
set NRO[33]="cm"
set NTO[34]="fastrespawn"
set NRO[34]="fr"
set NTO[35]="meleeonly"
set NRO[35]="mo"
set NTO[36]="rangeonly"
set NRO[36]="ro"
set NTO[37]="experimentalrunes"
set NRO[37]="er"
set NTO[38]="randomside"
set NRO[38]="rs"
set NTO[39]="switchon"
set NRO[39]="so"
set NTO[40]="zoommode"
set NRO[40]="zm"
set NTO[41]="capturepoint"
set NRO[41]="cp"
set NTO[42]="unban"
set NRO[42]="ub"
set NQO=42
set x=-1
loop
exitwhen x==PEI-1
set x=x+1
set y=x
loop
exitwhen y==PEI
set y=y+1
set z=1
loop
exitwhen z>NQO
if NTO[z]==SubString(X0O,x,y)then
set NPO[z]=true
set z=NQO+1
set X0O=NXO(X0O,x,y)
set x=-1
set PEI=StringLength(X0O)
set y=PEI
else
set z=z+1
endif
endloop
endloop
endloop
set x=-1
loop
exitwhen x==PEI-1
set x=x+1
set y=x
loop
exitwhen y==PEI
set y=y+1
set z=1
loop
exitwhen z>NQO
if NRO[z]==SubString(X0O,x,y)then
set NPO[z]=true
set z=NQO+1
set X0O=NXO(X0O,x,y)
set x=-1
set PEI=StringLength(X0O)
set y=PEI
else
set z=z+1
endif
endloop
endloop
endloop
set AP=NPO[1]
set AR=NPO[2]
set LM=NPO[3]
set MM=NPO[4]
set TR=NPO[5]
set DM=NPO[6]
set MR=NPO[7]
set SP=NPO[8]
set AA=NPO[9]
set AI=NPO[10]
set AS=NPO[11]
set ID=NPO[12]
set NP=NPO[13]
set SC=NPO[14]
set EM=NPO[15]
set DU=NPO[16]
set SH=NPO[17]
set VR=NPO[18]
set RV=NPO[19]
set RD=NPO[20]
set OM=NPO[21]
set XL=NPO[22]
set NM=NPO[23]
set NT=NPO[24]
set NB=NPO[25]
set NS=NPO[26]
set NR=NPO[27]
set CD=NPO[28]
set SD=NPO[29]
set PM=NPO[30]
set OI=NPO[31]
set MI=NPO[32]
set CM=NPO[33]
set FR=NPO[34]
set MO=NPO[35]
set RO=NPO[36]
set ER=NPO[37]
set RS=NPO[38]
set SO=NPO[39]
set ZM=NPO[40]
set CP=NPO[41]
set UB=NPO[42]
if X0O!=""or NHO(NSO)then
return
endif
if(AR and(CM or AP or TR or LM or MR or RV or RD or CD or SD))or(AP and(TR or MR))or(TR and(LM or MR))or(LM and MR)or(MM and SH)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if(AA and(AI or AS or DM))or(AS and(AI or DM))or(AI and DM)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if(RO and(MO or DM))or(MO and DM)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if RV and(CM or AR or TR or MR or LM or DM or SH)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if(DM and(CM or TR or LM or MR or SH or RV or RD or CD or SD))or(MM and DM)or(SH and DM)then
call Y3I(XO,GetObjectName(1848652372))
return
endif
if LM and(CM or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or XL or MO or RO)then
call Y3I(XO,GetObjectName(1848652593))
return
endif
if XL and(CM or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or LM or RO or MO)then
call Y3I(XO,GetObjectName(1848652594))
return
endif
if CM and(SP or XL or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or LM or MO or RO)then
call Y3I(XO,GetObjectName(1848652594))
return
endif
if RD and(CD or CM or AP or LM or AR or SD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if CD and(RD or CM or AP or LM or AR or SD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if MR and(CM or AP or LM or AR or SD or MM or TR or DM or AA or AI or AS or SH or RV or RO or MO)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if SD and(CM or AP or LM or AR or RD or CD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if VR and(CM or LM or RD or CD or SD or AR or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call Y3I(XO,GetObjectName(1848652373))
return
endif
if MM and W0I(AO)!=W0I(BO)then
call Y3I(XO,GetObjectName(1848652596))
return
endif
if VR and W0I(AO)!=W0I(BO)then
call Y3I(XO,GetObjectName(1848652596))
return
endif
if RV and W0I(AO)!=W0I(BO)then
call Y3I(XO,GetObjectName(1848652596))
return
endif
if LM and not(VTI(CO[1])and VTI(CO[2])and VTI(CO[3])and VTI(CO[4])and VTI(CO[5])and VTI(DO[1])and VTI(DO[2])and VTI(DO[3])and VTI(DO[4])and VTI(DO[5]))then
endif
if XL and not(VTI(CO[1])and VTI(CO[2])and VTI(CO[3])and VTI(CO[4])and VTI(CO[5])and VTI(DO[1])and VTI(DO[2])and VTI(DO[3])and VTI(DO[4])and VTI(DO[5]))then
endif
if ZM or CP or FR or CM or AP or AR or LM or MM or TR or DM or MR or SP or AA or AI or AS or ID or NP or SC or DU or EM or SH or VR or RV or RD or CD or OM or NB or NM or NT or NS or NR or XL or SD or PM or OI or MI or MO or RO or ER or RS or SO then
call DisableTrigger(ST0)
else
return
endif
if CM==false then
call CRO()
call F4O()
endif
if LM==false and XL==false then
call L7O()
endif
set UK=NLO(NSO)
if SS0 then
call P7I("Mode"+UK,0)
else
call P7I("Mode"+UK,GetPlayerId(XO))
endif
set K2=false
if LM then
set E3=GetObjectName(1848658010)
elseif XL then
set E3=GetObjectName(1848658232)
elseif RD then
set E3=GetObjectName(1848658254)
elseif CD then
set E3=GetObjectName(1848658233)
elseif MM then
set E3=GetObjectName(1848658248)
elseif DM then
set E3=GetObjectName(1848658249)
elseif RV then
set E3=GetObjectName(1848658243)
elseif AP then
set E3=GetObjectName(1848658244)
elseif AR then
set E3=GetObjectName(1848658231)
elseif TR then
set E3=GetObjectName(1848658230)
elseif MR then
set E3=GetObjectName(1848658250)
elseif VR then
set E3=GetObjectName(1848658229)
elseif SD then
set E3=GetObjectName(1848658228)
elseif CM then
set E3=GetObjectName(1848658247)
endif
if CM then
call NVO(GetObjectName(1848658251))
endif
if LM then
call NVO(GetObjectName(1848658227))
endif
if XL then
call NVO(GetObjectName(1848658226))
endif
if RD then
call NVO(GetObjectName(1848658246))
endif
if CD then
call NVO(GetObjectName(1848658225))
endif
if DM then
call NVO(GetObjectName(1848658241))
endif
if MM then
call NVO(GetObjectName(1848658224))
endif
if AP then
call NVO(GetObjectName(1848658252))
endif
if AR then
call NVO(GetObjectName(1848658257))
endif
if VR then
call NVO(GetObjectName(1848658253))
endif
if MR then
call NVO(GetObjectName(1848658245))
endif
if TR then
call NVO(GetObjectName(1848658242))
endif
if SP then
call NVO(GetObjectName(1848658255))
endif
if AA then
call NVO(GetObjectName(1848658261))
endif
if AS then
call NVO(GetObjectName(1848658256))
endif
if AI then
call NVO(GetObjectName(1848658259))
endif
if RO then
call NVO(GetObjectName(1848658260))
endif
if MO then
call NVO(GetObjectName(1848652594))
endif
if DU then
call NVO(GetObjectName(1848658264))
endif
if ID then
call NVO(GetObjectName(1848658266))
endif
if NP then
call NVO(GetObjectName(1848658486))
endif
if SC then
call NVO(GetObjectName(1848658487))
endif
if EM then
call NVO(GetObjectName(1848658489))
endif
if SH then
call NVO(GetObjectName(1848658497))
endif
if RV then
call NVO(GetObjectName(1848658263))
endif
if OM then
call NVO(GetObjectName(1848658262))
endif
if NM then
call NVO(GetObjectName(1848658258))
endif
if NB then
call NVO(GetObjectName(1848658498))
endif
if NT then
call NVO(GetObjectName(1848658488))
endif
if NS then
call NVO(GetObjectName(1848658499))
endif
if NR then
call NVO(GetObjectName(1848658502))
endif
if SD then
call NVO(GetObjectName(1848658480))
endif
if PM then
call NVO(GetObjectName(1848658265))
endif
if OI then
call NVO(GetObjectName(1848658485))
endif
if MI then
call NVO(GetObjectName(1848658484))
endif
if FR then
call NVO(GetObjectName(1848658500))
endif
if ER then
call NVO(GetObjectName(1848658501))
endif
if RS then
call NVO(GetObjectName(1848658481))
endif
if SO then
call NVO(GetObjectName(1848658482))
endif
if ZM then
call NVO(GetObjectName(1848658753))
endif
if CP then
call NVO(GetObjectName(1848658755))
endif
if UB then
call NVO(GetObjectName(1848658994))
endif
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
if N9O==1 then
call JDI(bj_FORCE_ALL_PLAYERS,20.00,C0[GetPlayerId(XO)]+(CR0[GetPlayerId((XO))])+"|r"+" "+GetObjectName(1848653361)+" "+X2)
else
call JDI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657998)+" "+X2)
endif
call JDI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848653363)+" -gameinfo.")
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
call YBI("NUO",SP)
call YBI("S0O",RS)
call YBI("SIO",UB)
call YBI("S1O",DM)
call YBI("SOO",MM)
call YBI("S2O",SH)
call YBI("S3O",AA)
call YBI("S4O",AI)
call YBI("S5O",AS)
call YBI("S6O",RO)
call YBI("S7O",MO)
call YBI("S8O",DU)
call YBI("S9O",AR)
call YBI("SAO",VR)
call YBI("SBO",AP)
call YBI("SCO",TR)
call YBI("SDO",RV)
call YBI("SEO",LM)
call YBI("SFO",XL)
call YBI("SGO",CM)
call YBI("SHO",RD)
call YBI("SZO",SD)
call YBI("SVO",MR)
call YBI("SWO",ID)
call YBI("SXO",NP)
call YBI("SYO",SC)
call YBI("SJO",EM)
call YBI("SKO",OM)
call YBI("SLO",NB)
call YBI("SMO",NT)
call YBI("SNO",NM)
call YBI("SSO",SO)
call YBI("STO",NS)
call YBI("SRO",NR)
call YBI("SPO",PM)
call YBI("SQO",OI)
call YBI("SUO",MI)
call YBI("T0O",FR)
call YBI("TIO",ER)
call YBI("T1O",CD)
call YBI("TOO",ZM)
call YBI("T2O",CP)
set TK=true
call NXI(0,0,false)
if RM==false and TM==false then
call NGO()
endif
call WF1()
if SO==false then
set S10[0]=true
set S10[1]=true
set S10[2]=true
set S10[3]=true
set S10[4]=true
set S10[5]=true
set S10[6]=true
set S10[7]=true
set S10[8]=true
set S10[9]=true
set S10[10]=true
set S10[11]=true
set S10[12]=true
set S10[13]=true
set S10[14]=true
set S10[15]=true
set S10[16]=true
endif
endfunction
function T3O takes nothing returns nothing
call NNO(GetEventPlayerChatString(),1)
endfunction
function T4O takes nothing returns boolean
if(VY)!=""and TK==false then
set SS0=true
call NNO("-"+(VY),2)
else
call TriggerRegisterPlayerChatEvent(ST0,XO,"-",false)
endif
return false
endfunction
function SBO takes nothing returns nothing
local location UBI=GetRectCenter(S4)
local location UCI=GetRectCenter(T4)
local integer x=1
set K0=true
set RK=120
loop
exitwhen x>5
if VTI(CO[x])then
call CreateUnitAtLoc(CO[x],1848651843,UCI,bj_UNIT_FACING)
endif
if VTI(DO[x])then
call CreateUnitAtLoc(DO[x],1848651843,UBI,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set UBI=null
set UCI=null
endfunction
function T7O takes string S,real T8O,real T9O,real TAO,real TBO,real TCO,boolean TDO,integer r,integer g,integer b returns image
set VK=CreateImage(S,T8O,T9O,0,TAO-(T8O/2),TBO-(T9O/2),TCO,0,0,0,2)
call SetImageRenderAlways(VK,true)
call ShowImage(VK,TDO)
call SetImageColor(VK,r,g,b,255)
return VK
endfunction
function TEO takes image i returns nothing
call ShowImage(i,false)
call DestroyImage(i)
endfunction
function TFO takes integer TGO returns nothing
local real x=TT0+40
local real y=TR0-50
local integer THO=255
local integer TZO=0
local integer TVO=0
local integer TWO=0
local integer TXO=0
local integer TYO=255
local integer r
local integer g
local integer b
if TGO==1 then
set r=THO
set g=TZO
set b=TVO
set TD0=T7O("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)
set TE0=T7O("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)
set TF0=T7O("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)
elseif TGO==2 then
set r=TWO
set g=TXO
set b=TYO
call TEO(TD0)
call TEO(TE0)
call TEO(TF0)
set TD0=T7O("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)
set TE0=T7O("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)
set TF0=T7O("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)
set TG0=T7O("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)
elseif TGO==3 then
set r=THO
set g=TZO
set b=TVO
call TEO(TD0)
call TEO(TE0)
call TEO(TF0)
call TEO(TG0)
set TD0=T7O("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)
set TE0=T7O("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)
set TF0=T7O("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)
elseif TGO==4 then
set r=TWO
set g=TXO
set b=TYO
call TEO(TD0)
call TEO(TE0)
call TEO(TF0)
set TD0=T7O("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)
set TE0=T7O("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)
set TF0=T7O("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)
set TG0=T7O("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)
elseif TGO==5 then
call TEO(TD0)
call TEO(TE0)
call TEO(TF0)
call TEO(TG0)
endif
endfunction
function TJO takes integer i,integer TKO returns string
if i<0 then
set i=0
endif
if TimerGetElapsed(M)<15 then
return "|c00555555"+I2S(i)
endif
if T20==3 then
return "|c00555555"+I2S(i)
endif
if T20==1 and TKO!=1 then
return "|c00555555"+I2S(i)
elseif T20==2 and TKO!=2 then
return "|c00555555"+I2S(i)
elseif i==0 then
return "|c00555555"+I2S(i)
elseif i<6 then
return "|c00ff0303"+I2S(i)
else
return I2S(i)
endif
endfunction
function TLO takes nothing returns boolean
local multiboarditem Z2I
local integer i
local integer EZO
local integer EVO
local integer T8I=7
local integer TMO=0
set EZO=1
set EVO=TMO
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemWidth(Z2I,0.5)
call MultiboardSetItemValue(Z2I,C0[GetPlayerId(CO[1])]+(CR0[GetPlayerId((CO[1]))])+"|r")
call MultiboardReleaseItem(Z2I)
set EZO=EZO+2
set EVO=TMO
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+GetObjectName(1848657238))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set i=0
set EZO=EZO
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T30[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T30[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=1
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T30[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T30[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=2
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T30[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T30[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=3
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T30[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T30[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=4
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T30[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T30[i]])
endif
call MultiboardReleaseItem(Z2I)
set EZO=EZO+2
set EVO=TMO
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+GetObjectName(1848657240))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set i=0
set EZO=EZO
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T70[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T70[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=1
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T70[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T70[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=2
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T70[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T70[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=3
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T70[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T70[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=4
set EVO=TMO+i+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T70[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T70[i]])
endif
call MultiboardReleaseItem(Z2I)
set EZO=EZO+2
set EVO=TMO
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+GetObjectName(1848657237))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EVO=TMO+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,TJO(T10[1],1))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EZO=EZO+1
set EVO=TMO
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+GetObjectName(1848657236))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EVO=TMO+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,TJO(TI0[1],1))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EZO=EZO+2
set EVO=TMO
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+GetObjectName(1848657241))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EVO=TMO+1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
if TimerGetElapsed(M)<15 then
call MultiboardSetItemValue(Z2I,"|c00555555"+GetObjectName(1848657457))
elseif T20==1 then
call MultiboardSetItemValue(Z2I,GetObjectName(1848657460))
elseif T20==2 then
call MultiboardSetItemValue(Z2I,"|c00555555"+GetObjectName(1848657457))
else
call MultiboardSetItemValue(Z2I,"|c00555555"+GetObjectName(1848657458))
endif
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EZO=1
set EVO=T8I
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemWidth(Z2I,1.5)
call MultiboardSetItemValue(Z2I,"   "+C0[GetPlayerId(DO[1])]+(CR0[GetPlayerId((DO[1]))])+"|r")
call MultiboardReleaseItem(Z2I)
set EZO=EZO+2
set EVO=T8I-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+" "+GetObjectName(1848657238))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set i=0
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T40[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T40[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=1
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T40[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T40[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=2
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T40[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T40[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=3
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T40[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T40[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=4
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T40[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T40[i]])
endif
call MultiboardReleaseItem(Z2I)
set EZO=EZO+2
set EVO=T8I-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+" "+GetObjectName(1848657240))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set i=0
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T80[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T80[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=1
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T80[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T80[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=2
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T80[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T80[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=3
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T80[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T80[i]])
endif
call MultiboardReleaseItem(Z2I)
set i=4
set EVO=T8I+i+1-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemWidth(Z2I,0.015)
if T80[i]>0 then
call MultiboardSetItemStyle(Z2I,false,true)
call MultiboardSetItemIcon(Z2I,DE0[T80[i]])
endif
call MultiboardReleaseItem(Z2I)
set EZO=EZO+2
set EVO=T8I-2
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+GetObjectName(1848657237))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EVO=T8I-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,TJO(T10[2],2))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EZO=EZO+1
set EVO=T8I-2
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+GetObjectName(1848657236))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EVO=T8I-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,TJO(TI0[2],2))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EZO=EZO+2
set EVO=T8I-2
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
call MultiboardSetItemValue(Z2I,"|c006699CC"+GetObjectName(1848657241))
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
set EVO=T8I-1
set Z2I=MultiboardGetItem(TC0,EZO,EVO)
call MultiboardSetItemStyle(Z2I,true,false)
if TimerGetElapsed(M)<15 then
call MultiboardSetItemValue(Z2I,"|c00555555"+GetObjectName(1848657457))
elseif T20==2 then
call MultiboardSetItemValue(Z2I,GetObjectName(1848657460))
elseif T20==1 then
call MultiboardSetItemValue(Z2I,"|c00555555"+GetObjectName(1848657457))
else
call MultiboardSetItemValue(Z2I,"|c00555555"+GetObjectName(1848657458))
endif
call MultiboardSetItemWidth(Z2I,0.035)
call MultiboardReleaseItem(Z2I)
return false
endfunction
function TNO takes nothing returns nothing
local integer EWO=12
local integer EXO=14
local trigger t=CreateTrigger()
local integer i
local multiboarditem Z2I
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function TLO))
set TC0=CreateMultiboard()
call MultiboardSetItemsWidth(TC0,0.015)
call MultiboardSetRowCount(TC0,EWO)
call MultiboardSetColumnCount(TC0,EXO)
call MultiboardSetTitleText(TC0,GetObjectName(1848658742))
call MultiboardSetItemsStyle(TC0,false,false)
call MultiboardMinimize(TC0,false)
call MultiboardDisplay(TC0,true)
set i=0
loop
exitwhen i>EXO
set Z2I=MultiboardGetItem(TC0,0,i)
call MultiboardSetItemWidth(Z2I,0.015)
call MultiboardReleaseItem(Z2I)
set i=i+1
endloop
set t=null
set Z2I=null
endfunction
function TSO takes nothing returns boolean
local unit TTO=GetSoldUnit()
local player p=GetOwningPlayer(TTO)
local integer i
local real x
local real y
local real a
if GetUnitTypeId(TTO)==1747990094 and IsPlayerAlly(GetOwningPlayer(TTO),GetOwningPlayer(GetSellingUnit()))then
if L1[GetPlayerId(p)]!=null then
call Y3I(p,GetObjectName(1848657459))
call KillUnit(TTO)
set TTO=null
set p=null
return false
endif
set x=GetUnitX(GetSellingUnit())
set y=GetUnitY(GetSellingUnit())
set i=XWI(GetUnitTypeId(GetSellingUnit()))
set a=GetUnitFacing(GetSellingUnit())
call RemoveUnit(GetSellingUnit())
call CreateUnit(p,i,x,y,a)
endif
if GetUnitTypeId(TTO)==1747990094 then
call KillUnit(TTO)
endif
if L1[GetPlayerId(CO[1])]!=null and L1[GetPlayerId(CO[2])]!=null and L1[GetPlayerId(CO[3])]!=null and L1[GetPlayerId(CO[4])]!=null and L1[GetPlayerId(CO[5])]!=null and L1[GetPlayerId(DO[1])]!=null and L1[GetPlayerId(DO[2])]!=null and L1[GetPlayerId(DO[3])]!=null and L1[GetPlayerId(DO[4])]!=null and L1[GetPlayerId(DO[5])]!=null then
call ZSI(GetTriggeringTrigger())
endif
set TTO=null
set p=null
return false
endfunction
function TRO takes nothing returns boolean
set T00=true
call ZSI(GetTriggeringTrigger())
call DestroyMultiboard(TC0)
call CRO()
call F4O()
call WF1()
return false
endfunction
function ModeCM_SpawnSound takes nothing returns boolean
call ZSI(GetTriggeringTrigger())
call PlaySoundBJ(QD)
return false
endfunction
function TPO takes nothing returns boolean
local trigger t=CreateTrigger()
local integer NJI
local integer NYI
local string Q1I
local unit u
local real x
local real y
local integer i
local real d
local real TQO=GetRectCenterX(A4)
local real TUO=GetRectCenterY(A4)
local real R0O=GetRectCenterX(T3)
local real RIO=GetRectCenterY(T3)
set T20=3
set NC0=true
call ZSI(GetTriggeringTrigger())
set i=0
loop
exitwhen i==5
set x=TQO-300+i*150
set y=TUO
set u=CreateUnit(CO[0],DF0[T70[i]],x,y,270)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)
call PanCameraToTimedForPlayer(CO[i+1],TQO,TUO,0)
call CreateUnit(CO[i+1],1848651843,TQO,TUO,bj_UNIT_FACING)
call SetPlayerState(CO[i+1],PLAYER_STATE_RESOURCE_GOLD,SP0[GetPlayerId(CO[i+1])]-250)
set i=i+1
endloop
set i=0
loop
exitwhen i==5
set x=R0O-300+i*150
set y=RIO
set u=CreateUnit(DO[0],DF0[T80[i]],x,y,270)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)
call PanCameraToTimedForPlayer(DO[i+1],R0O,RIO,0)
call CreateUnit(DO[i+1],1848651843,R0O,RIO,bj_UNIT_FACING)
call SetPlayerState(DO[i+1],PLAYER_STATE_RESOURCE_GOLD,SP0[GetPlayerId(DO[i+1])]-250)
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function TSO))
call SuspendTimeOfDay(false)
call EnableTrigger(E30)
call EnableTrigger(QM)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,10,false)
call TriggerAddCondition(t,Condition(function TRO))
set RK=90
call NGO()
call W7I()
set t=null
set u=null
return false
endfunction
function R1O takes integer i returns nothing
call W2I(D00[i])
if T20==1 then
set T70[T90]=i
set T90=T90+1
else
set T80[TA0]=i
set TA0=TA0+1
endif
endfunction
function ROO takes nothing returns nothing
local integer i=WBI()
loop
if R[i]==false then
set R[i]=true
call R1O(i)
return
endif
endloop
endfunction
function R2O takes integer i returns nothing
call P7I("Ban"+I2S(GetPlayerId(GetOwningPlayer(GetSoldUnit()))),D00[i])
call W2I(D00[i])
if T20==1 then
set T30[T50]=i
set T50=T50+1
else
set T40[T60]=i
set T60=T60+1
endif
endfunction
function ModeCM_BanRandomHero takes nothing returns nothing
call R2O(-1)
endfunction
function R3O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call R1O(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
if TB0==0 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
if T20==1 then
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==1 then
if T20==1 and T90==4 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
elseif T20==2 and TA0==4 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==2 then
if T20==1 and T90==5 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
elseif T20==2 and TA0==5 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==3 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function TPO))
call TFO(5)
call MultiboardSetTitleText(TC0,GetObjectName(1848658742))
endif
else
if GetTriggerEvalCount(t)>50 then
if TI0[T20]>0 then
set TI0[T20]=TI0[T20]-1
else
if T20==1 then
call ROO()
else
call ROO()
endif
if TB0==0 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
if T20==1 then
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==1 then
if T20==1 and T90==4 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
elseif T20==2 and TA0==4 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==2 then
if T20==1 and T90==5 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
elseif T20==2 and TA0==5 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==3 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function TPO))
call TFO(5)
call MultiboardSetTitleText(TC0,GetObjectName(1848658742))
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
endif
endif
else
if T20==1 then
set T10[1]=T10[1]-1
else
set T10[2]=T10[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function R4O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if T50==(3+2)and T60==(3+2)then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call RemoveUnit(GetSoldUnit())
endif
call ZSI(t)
set TB0=0
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R3O))
call TFO(4)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658995)+"|r")
call MultiboardSetTitleText(TC0,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659000))
if T20==1 then
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
set t=null
set p=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call R2O(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R4O))
if T20==1 then
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
else
if GetTriggerEvalCount(t)>50 then
if TI0[T20]>0 then
set TI0[T20]=TI0[T20]-1
else
call R2O(-1)
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R4O))
if T20==1 then
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
endif
else
if T20==1 then
set T10[1]=T10[1]-1
else
set T10[2]=T10[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function R5O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call R1O(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
if TB0==0 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
if T20==1 then
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==1 then
if T20==1 and T90==2 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call YII(p,"Sound\\Interface\\Rescue.wav")
elseif T20==2 and TA0==2 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==2 then
if T20==1 and T90==3 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
elseif T20==2 and TA0==3 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==3 then
set TB0=TB0+1
call ZSI(t)
if TO0==1 then
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=2
set p=DO[1]
set T10[T20]=50
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R4O))
call TFO(3)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658996)+"|r")
call MultiboardSetTitleText(TC0,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848658999))
endif
else
if GetTriggerEvalCount(t)>50 then
if TI0[T20]>0 then
set TI0[T20]=TI0[T20]-1
else
if T20==1 then
call ROO()
else
call ROO()
endif
if TB0==0 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
if T20==1 then
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==1 then
if T20==1 and T90==2 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
elseif T20==2 and TA0==2 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==2 then
if T20==1 and T90==3 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
set T20=2
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
elseif T20==2 and TA0==3 then
set TB0=TB0+1
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
elseif TB0==3 then
set TB0=TB0+1
call ZSI(t)
if TO0==1 then
set T20=1
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=2
set p=DO[1]
set T10[T20]=50
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R4O))
call TFO(3)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658996)+"|r")
call MultiboardSetTitleText(TC0,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848658999))
endif
endif
else
if T20==1 then
set T10[1]=T10[1]-1
else
set T10[2]=T10[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function R6O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if T50==3 and T60==3 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call RemoveUnit(GetSoldUnit())
endif
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R5O))
call TFO(2)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658997)+"|r")
call MultiboardSetTitleText(TC0,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659001))
if T20==1 then
set T10[T20]=50
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T10[T20]=50
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
set t=null
set p=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call R2O(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R6O))
if T20==1 then
set T20=2
set T10[T20]=40
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=1
set T10[T20]=40
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
else
if GetTriggerEvalCount(t)>40 then
if TI0[T20]>0 then
set TI0[T20]=TI0[T20]-1
else
call R2O(-1)
call ZSI(t)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R6O))
if T20==1 then
set T20=2
set T10[T20]=40
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=1
set T10[T20]=40
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
endif
else
if T20==1 then
set T10[1]=T10[1]-1
else
set T10[2]=T10[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function R7O takes nothing returns boolean
local trigger t=CreateTrigger()
local player p
set SU0=true
call ZSI(GetTriggeringTrigger())
if SQ0==false then
if TO0==1 then
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(CO[1])]+(CR0[GetPlayerId((CO[1]))])+"|r "+GetObjectName(1848657217))
else
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(DO[1])]+(CR0[GetPlayerId((DO[1]))])+"|r "+GetObjectName(1848657217))
endif
endif
if TO0==1 then
set T20=1
set T10[T20]=40
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
else
set T20=2
set p=DO[1]
set T10[T20]=40
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,250)
call YII(p,"Sound\\Interface\\Rescue.wav")
endif
call TFO(1)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658998)+"|r")
call MultiboardSetTitleText(TC0,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659009))
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function R6O))
set t=null
set p=null
return false
endfunction
function SGO takes nothing returns nothing
local trigger t
local location UBI=GetRectCenter(S4)
local location UCI=GetRectCenter(T4)
local integer x=1
local player p
loop
exitwhen x>5
if VTI(CO[x])then
call CreateUnitAtLoc(CO[x],1848651843,UCI,bj_UNIT_FACING)
endif
if VTI(DO[x])then
call CreateUnitAtLoc(DO[x],1848651843,UBI,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set RM=true
set B3=false
set A3=false
set NC0=false
set SC0=false
call SuspendTimeOfDay(true)
call DisableTrigger(E30)
call DisableTrigger(QM)
if QF0==false then
call H8O()
endif
set SP0[GetPlayerId(CO[1])]=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(CO[2])]=GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(CO[3])]=GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(CO[4])]=GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(CO[5])]=GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(DO[1])]=GetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(DO[2])]=GetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(DO[3])]=GetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(DO[4])]=GetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD)
set SP0[GetPlayerId(DO[5])]=GetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD,0)
set TI0[1]=90
set TI0[2]=90
set TO0=GetRandomInt(1,2)
set SQ0=false
set T20=TO0
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(M),false)
call TriggerAddCondition(t,Condition(function R7O))
call TNO()
call JDI(bj_FORCE_ALL_PLAYERS,4.00,GetObjectName(1848657235))
call JDI(bj_FORCE_ALL_PLAYERS,4.00,GetObjectName(1848657234))
set t=null
set UBI=null
set UCI=null
set p=null
endfunction
function R8O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
set UM=true
call ZSI(t)
call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_MASKED,R60,R70,700,false,false))
call DestroyFogModifier(CreateFogModifierRadius(DO[0],FOG_OF_WAR_MASKED,R60,R70,700,false,false))
set t=null
return false
endfunction
function R9O takes nothing returns nothing
local integer i=0
loop
exitwhen i>RB0
call RemoveUnit(RA0[i])
set i=i+1
endloop
endfunction
function RAO takes real x,real y returns nothing
set RA0[RB0]=CreateUnit(Player(0),1747990089,x,y,0)
set RB0=RB0+1
endfunction
function RBO takes string S,real T8O,real T9O,real TAO,real TBO,real TCO,boolean TDO returns nothing
set VK=CreateImage(S,T8O,T9O,0,TAO-(T8O/2),TBO-(T9O/2),TCO,0,0,0,2)
call SetImageRenderAlways(VK,true)
call ShowImage(VK,TDO)
endfunction
function RCO takes integer RDO,integer r,integer g,integer b,integer a,real x,real y,integer V0I returns nothing
if StringLength(I2S(RDO))>1 then
call RBO("Fonts\\"+SubString(I2S(RDO),0,1)+".blp",90,90,x-20,y,0,true)
call SetImageColor(VK,r,g,b,a)
call SaveImageHandle(ZY,(V0I),(158),(VK))
call RBO("Fonts\\"+SubString(I2S(RDO),1,2)+".blp",90,90,x+20,y,0,true)
call SetImageColor(VK,r,g,b,a)
call SaveImageHandle(ZY,(V0I),(159),(VK))
else
call RBO("Fonts\\0.blp",90,90,x-20,y,0,true)
call SetImageColor(VK,r,g,b,a)
call SaveImageHandle(ZY,(V0I),(158),(VK))
call RBO("Fonts\\"+SubString(I2S(RDO),0,1)+".blp",90,90,x+20,y,0,true)
call SetImageColor(VK,r,g,b,a)
call SaveImageHandle(ZY,(V0I),(159),(VK))
endif
endfunction
function REO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer SQI=(LoadInteger(ZY,(V0I),(57)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local integer ZLI=GetTriggerEvalCount(t)
local integer RFO=SQI-ZLI
local image RGO=(LoadImageHandle(ZY,(V0I),(158)))
local image RHO=(LoadImageHandle(ZY,(V0I),(159)))
local integer r
local integer g
local integer b
local integer a
if ZLI>0 then
call ShowImage(RGO,false)
call DestroyImage(RGO)
call ShowImage(RHO,false)
call DestroyImage(RHO)
endif
if ZLI==SQI then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if RFO<6 then
set r=255
set g=0
set b=0
elseif GetLocalPlayer()==R10 or GetLocalPlayer()==RO0 then
set r=CP0[GetPlayerId(GetLocalPlayer())]
set g=CQ0[GetPlayerId(GetLocalPlayer())]
set b=CU0[GetPlayerId(GetLocalPlayer())]
else
set r=255
set g=255
set b=255
endif
if IsPlayerAlly(R10,GetLocalPlayer())then
set a=255
else
set a=125
endif
call RCO(RFO,r,g,b,a,x,y,V0I)
endif
set t=null
set RGO=null
set RHO=null
return false
endfunction
function RZO takes integer SQI,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function REO))
call SaveInteger(ZY,(V0I),(57),(SQI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call TriggerEvaluate(t)
set t=null
endfunction
function RVO takes integer a,real x,real y,integer V0I returns nothing
call RBO("Fonts\\Y.blp",90,90,x-150,y,0,true)
call SetImageColor(VK,255,0,0,a)
call SaveImageHandle(ZY,(V0I),(158),(VK))
call RBO("Fonts\\O.blp",90,90,x-110,y,0,true)
call SetImageColor(VK,255,0,0,a)
call SaveImageHandle(ZY,(V0I),(159),(VK))
call RBO("Fonts\\U.blp",90,90,x-70,y,0,true)
call SetImageColor(VK,255,0,0,a)
call SaveImageHandle(ZY,(V0I),(160),(VK))
call RBO("Fonts\\R.blp",90,90,x-30,y,0,true)
call SetImageColor(VK,255,0,0,a)
call SaveImageHandle(ZY,(V0I),(161),(VK))
call RBO("Fonts\\T.blp",90,90,x+30,y,0,true)
call SetImageColor(VK,255,0,0,a)
call SaveImageHandle(ZY,(V0I),(162),(VK))
call RBO("Fonts\\U.blp",90,90,x+70,y,0,true)
call SetImageColor(VK,255,0,0,a)
call SaveImageHandle(ZY,(V0I),(163),(VK))
call RBO("Fonts\\R.blp",90,90,x+110,y,0,true)
call SetImageColor(VK,255,0,0,a)
call SaveImageHandle(ZY,(V0I),(164),(VK))
call RBO("Fonts\\N.blp",90,90,x+150,y,0,true)
call SetImageColor(VK,255,0,0,a)
call SaveImageHandle(ZY,(V0I),(165),(VK))
endfunction
function RWO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real x
local real y
local integer ZLI=GetTriggerEvalCount(t)
local image RGO=(LoadImageHandle(ZY,(V0I),(158)))
local image RHO=(LoadImageHandle(ZY,(V0I),(159)))
local image RXO=(LoadImageHandle(ZY,(V0I),(160)))
local image RYO=(LoadImageHandle(ZY,(V0I),(161)))
local image RJO=(LoadImageHandle(ZY,(V0I),(162)))
local image RKO=(LoadImageHandle(ZY,(V0I),(163)))
local image RLO=(LoadImageHandle(ZY,(V0I),(164)))
local image RMO=(LoadImageHandle(ZY,(V0I),(165)))
local integer r
local integer g
local integer b
local integer a
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
if VLI(p)then
set x=R60
set y=R70+250
else
set x=R80
set y=R90+250
endif
if ZLI>0 then
call ShowImage(RGO,false)
call DestroyImage(RGO)
call ShowImage(RHO,false)
call DestroyImage(RHO)
call ShowImage(RXO,false)
call DestroyImage(RXO)
call ShowImage(RYO,false)
call DestroyImage(RYO)
call ShowImage(RJO,false)
call DestroyImage(RJO)
call ShowImage(RKO,false)
call DestroyImage(RKO)
call ShowImage(RLO,false)
call DestroyImage(RLO)
call ShowImage(RMO,false)
call DestroyImage(RMO)
endif
if ZLI==20 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if GetLocalPlayer()==R10 or GetLocalPlayer()==RO0 then
set a=255
else
set a=0
endif
call RVO(a,x,y,V0I)
endif
set t=null
set RGO=null
set RHO=null
set RXO=null
set RYO=null
set RJO=null
set RKO=null
set RLO=null
set RMO=null
set p=null
return false
endfunction
function RNO takes player p returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function RWO))
call SavePlayerHandle(ZY,(V0I),(54),(p))
call TriggerEvaluate(t)
set t=null
endfunction
function RSO takes player p,integer HWI,boolean randomed returns nothing
local integer i=VKI(p)
local real d
if VTI(p)==false then
return
endif
if VLI(p)then
call SetUnitPosition(TW0[HWI],TX0[i],TY0[i])
set d=YQI(VZI(TW0[HWI])-0.3,0.5)
call SetUnitScale(TW0[HWI],d,d,d)
call SetUnitFacing(TW0[HWI],270)
call UnitRemoveAbility(TW0[HWI],1097690998)
else
call SetUnitPosition(TW0[HWI],TJ0[i],TK0[i])
set d=YQI(VZI(TW0[HWI])-0.3,0.5)
call SetUnitScale(TW0[HWI],d,d,d)
call SetUnitFacing(TW0[HWI],90)
call UnitRemoveAbility(TW0[HWI],1097690998)
endif
call SetUnitColor(TW0[HWI],GetPlayerColor(p))
call PauseUnit(TW0[HWI],true)
call SetUnitOwner(TW0[HWI],p,true)
set R50[GetPlayerId(p)]=true
set TV0[HWI]=true
if VLI(p)then
set L1[GetPlayerId(p)]=CreateUnit(p,D00[TZ0[HWI]],GetRectCenterX(A4),GetRectCenterY(A4),0)
else
set L1[GetPlayerId(p)]=CreateUnit(p,D00[TZ0[HWI]],GetRectCenterX(T3),GetRectCenterY(T3),0)
endif
endfunction
function RTO takes nothing returns integer
local integer i=1
loop
exitwhen i>20
if TV0[i]==false then
return i
endif
set i=i+1
endloop
return 0
endfunction
function RRO takes player p returns nothing
local integer i=1
local boolean RPO=VLI(p)
loop
exitwhen i==20
if GetOwningPlayer(TW0[i])==CO[0]or GetOwningPlayer(TW0[i])==DO[0]then
if RPO then
call SetUnitOwner(TW0[i],CO[0],false)
else
call SetUnitOwner(TW0[i],DO[0],false)
endif
endif
set i=i+1
endloop
endfunction
function RQO takes player p,unit u returns nothing
local integer a=80
if GetLocalPlayer()==p then
set a=255
endif
call SetUnitVertexColor(u,255,255,255,a)
endfunction
function RUO takes player p1,player p2 returns nothing
local unit T0I
local real x
local real y
call RNO(p1)
call YII(p1,"Sound\\Interface\\Rescue.wav")
if VLI(p1)then
if GetLocalPlayer()==p1 then
call PingMinimapEx(TT0,TR0,5,255,255,255,false)
endif
set T0I=CreateUnit(p1,1848652353,TT0-250,TR0,0)
call UnitApplyTimedLife(T0I,1112820806,20)
call UnitAddAbility(T0I,1097625443)
set RD0[GetPlayerId(p1)]=T0I
call RQO(p1,T0I)
if GetLocalPlayer()==p1 then
call ClearTextMessages()
endif
call DisplayTimedTextToPlayer(p1,0,0,10," ")
call DisplayTimedTextToPlayer(p1,0,0,10," ")
call DisplayTimedTextToPlayer(p1,0,0,20,GetObjectName(1848653368))
call DisplayTimedTextToPlayer(p1,0,0,10," ")
else
call RNO(p1)
if GetLocalPlayer()==p1 then
call PingMinimapEx(TP0,TQ0,5,255,255,255,false)
endif
set T0I=CreateUnit(p1,1848652353,TT0-250,TR0,0)
call SetUnitVertexColor(T0I,255,255,255,175)
call UnitApplyTimedLife(T0I,1112820806,20)
call UnitAddAbility(T0I,1097625443)
set RE0[GetPlayerId(p1)]=T0I
call RQO(p1,T0I)
if GetLocalPlayer()==p1 then
call ClearTextMessages()
endif
call DisplayTimedTextToPlayer(p1,0,0,10," ")
call DisplayTimedTextToPlayer(p1,0,0,10," ")
call DisplayTimedTextToPlayer(p1,0,0,20,GetObjectName(1848653368))
call DisplayTimedTextToPlayer(p1,0,0,10," ")
endif
if p2!=null then
call RNO(p2)
call YII(p2,"Sound\\Interface\\Rescue.wav")
if VLI(p2)then
if GetLocalPlayer()==p2 then
call PingMinimapEx(TT0,TR0,5,255,255,255,false)
endif
set T0I=CreateUnit(p2,1848652353,TT0+250,TR0,0)
call UnitApplyTimedLife(T0I,1112820806,20)
call UnitAddAbility(T0I,1097625443)
set RD0[GetPlayerId(p2)]=T0I
call RQO(p2,T0I)
if GetLocalPlayer()==p2 then
call ClearTextMessages()
endif
call DisplayTimedTextToPlayer(p2,0,0,10," ")
call DisplayTimedTextToPlayer(p2,0,0,10," ")
call DisplayTimedTextToPlayer(p2,0,0,20,GetObjectName(1848653368))
call DisplayTimedTextToPlayer(p2,0,0,10," ")
else
if GetLocalPlayer()==p2 then
call PingMinimapEx(TP0,TQ0,5,255,255,255,false)
endif
set T0I=CreateUnit(p2,1848652353,TT0+250,TR0,0)
call UnitApplyTimedLife(T0I,1112820806,20)
call UnitAddAbility(T0I,1097625443)
set RE0[GetPlayerId(p2)]=T0I
call RQO(p2,T0I)
if GetLocalPlayer()==p2 then
call ClearTextMessages()
endif
call DisplayTimedTextToPlayer(p2,0,0,10," ")
call DisplayTimedTextToPlayer(p2,0,0,10," ")
call DisplayTimedTextToPlayer(p2,0,0,20,GetObjectName(1848653368))
call DisplayTimedTextToPlayer(p2,0,0,10," ")
endif
endif
set T0I=null
endfunction
function P0O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer PIO=(LoadInteger(ZY,(V0I),(25)))
local player P1O=R10
local player POO=RO0
local integer i
set R10=null
set RO0=null
if PIO==0 then
if R20==1 then
set R10=CO[1]
else
set R10=DO[1]
endif
call RRO(R10)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(R10)]+(CR0[GetPlayerId((R10))])+"|r"+" "+GetObjectName(1848653364))
call RUO(R10,RO0)
call RZO(20,R60,R70)
elseif PIO==1 then
if R20==1 then
if RF0==false then
set R10=DO[1]
set RO0=DO[2]
else
set R10=DO[1]
set RO0=DO[1]
endif
else
if RF0==false then
set R10=CO[1]
set RO0=CO[2]
else
set R10=CO[1]
set RO0=CO[1]
endif
endif
if R50[GetPlayerId(P1O)]==false then
call RSO(P1O,RTO(),true)
endif
call RRO(R10)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(R10)]+(CR0[GetPlayerId((R10))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(RO0)]+(CR0[GetPlayerId((RO0))])+"|r"+" "+GetObjectName(1848653364))
call RUO(R10,RO0)
call RZO(20,R60,R70)
elseif PIO==2 then
if R20==1 then
if RF0==false then
set R10=CO[2]
set RO0=CO[3]
else
set R10=CO[1]
set RO0=CO[1]
endif
else
if RF0==false then
set R10=DO[2]
set RO0=DO[3]
else
set R10=DO[1]
set RO0=DO[1]
endif
endif
if R50[GetPlayerId(P1O)]==false then
call RSO(P1O,RTO(),true)
endif
if R50[GetPlayerId(POO)]==false then
call RSO(POO,RTO(),true)
endif
call RRO(R10)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(R10)]+(CR0[GetPlayerId((R10))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(RO0)]+(CR0[GetPlayerId((RO0))])+"|r"+" "+GetObjectName(1848653364))
call RUO(R10,RO0)
call RZO(20,R60,R70)
elseif PIO==3 then
if R20==1 then
if RF0==false then
set R10=DO[3]
set RO0=DO[4]
else
set R10=DO[1]
set RO0=DO[1]
endif
else
if RF0==false then
set R10=CO[3]
set RO0=CO[4]
else
set R10=CO[1]
set RO0=CO[1]
endif
endif
if R50[GetPlayerId(P1O)]==false then
call RSO(P1O,RTO(),true)
endif
if R50[GetPlayerId(POO)]==false then
call RSO(POO,RTO(),true)
endif
call RRO(R10)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(R10)]+(CR0[GetPlayerId((R10))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(RO0)]+(CR0[GetPlayerId((RO0))])+"|r"+" "+GetObjectName(1848653364))
call RUO(R10,RO0)
call RZO(20,R60,R70)
elseif PIO==4 then
if R20==1 then
if RF0==false then
set R10=CO[4]
set RO0=CO[5]
else
set R10=CO[1]
set RO0=CO[1]
endif
else
if RF0==false then
set R10=DO[4]
set RO0=DO[5]
else
set R10=DO[1]
set RO0=DO[1]
endif
endif
if R50[GetPlayerId(P1O)]==false then
call RSO(P1O,RTO(),true)
endif
if R50[GetPlayerId(POO)]==false then
call RSO(POO,RTO(),true)
endif
call RRO(R10)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(R10)]+(CR0[GetPlayerId((R10))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(RO0)]+(CR0[GetPlayerId((RO0))])+"|r"+" "+GetObjectName(1848653364))
call RUO(R10,RO0)
call RZO(20,R60,R70)
elseif PIO==5 then
if R20==1 then
if RF0==false then
set R10=DO[5]
else
set R10=DO[1]
endif
else
if RF0==false then
set R10=CO[5]
else
set RO0=CO[1]
endif
endif
if R50[GetPlayerId(P1O)]==false then
call RSO(P1O,RTO(),true)
endif
if R50[GetPlayerId(POO)]==false then
call RSO(POO,RTO(),true)
endif
call RRO(R10)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(R10)]+(CR0[GetPlayerId((R10))])+"|r"+" "+GetObjectName(1848653364))
call RUO(R10,RO0)
call RZO(20,R60,R70)
elseif PIO==6 then
if R50[GetPlayerId(P1O)]==false then
call RSO(P1O,RTO(),true)
endif
call SuspendTimeOfDay(false)
endif
if PIO==7 then
set R40=true
endif
if PIO==8 then
call R9O()
set i=1
loop
exitwhen i>20
call RemoveUnit(TW0[i])
set i=i+1
endloop
call VF1()
call LYO(60)
call UnitApplyTimedLife(TH0[1],1112820806,2)
call UnitApplyTimedLife(TH0[2],1112820806,2)
call UnitApplyTimedLife(TH0[3],1112820806,2)
call UnitApplyTimedLife(TH0[4],1112820806,2)
call UnitApplyTimedLife(TH0[5],1112820806,2)
call UnitApplyTimedLife(TH0[6],1112820806,2)
call UnitApplyTimedLife(TH0[7],1112820806,2)
call UnitApplyTimedLife(TH0[8],1112820806,2)
call UnitApplyTimedLife(TH0[9],1112820806,2)
call UnitApplyTimedLife(TH0[10],1112820806,2)
call UnitApplyTimedLife(TH0[11],1112820806,2)
call UnitApplyTimedLife(TH0[12],1112820806,2)
call ZSI(RC0)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,7,false)
call TriggerAddCondition(t,Condition(function R8O))
else
call SaveInteger(ZY,(V0I),(25),(PIO+1))
endif
set t=null
set P1O=null
set POO=null
return false
endfunction
function P2O takes unit V8I returns integer
local integer i=1
loop
exitwhen i>20
if TW0[i]==V8I then
return i
endif
set i=i+1
endloop
return 0
endfunction
function P3O takes nothing returns boolean
local unit TTO=GetSoldUnit()
local player p=GetOwningPlayer(TTO)
call KillUnit(TTO)
if R50[GetPlayerId(p)]==true then
call Y3I(p,GetObjectName(1848656951))
set TTO=null
set p=null
return false
endif
if p!=R10 and p!=RO0 then
call Y3I(p,GetObjectName(1848656722))
set TTO=null
set p=null
return false
endif
if GetUnitTypeId(TTO)==1747990094 then
call RSO(p,P2O(GetSellingUnit()),false)
call KillUnit(RD0[GetPlayerId(p)])
call KillUnit(RE0[GetPlayerId(p)])
endif
set TTO=null
set p=null
return false
endfunction
function ModeRD_Selected takes nothing returns boolean
local unit P4O=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local player p=GetOwningPlayer(P4O)
if GetSpellAbilityId()==1093687874 and P2O(XTI)!=0 then
if(p==R10 or p==RO0)and R50[GetPlayerId(p)]==false and TV0[P2O(XTI)]==false then
call RSO(p,P2O(XTI),false)
call RemoveUnit(P4O)
endif
endif
set XTI=null
set p=null
return false
endfunction
function P5O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I
local integer i=1
call ZSI(t)
call SuspendTimeOfDay(true)
set R20=GetRandomInt(1,2)
call JDI(bj_FORCE_ALL_PLAYERS,15.00," ")
if R20==1 then
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848653365)+"|r"+" "+GetObjectName(1848653366))
else
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(DO[0])]+GetObjectName(1848653379)+"|r"+" "+GetObjectName(1848653366))
endif
call JDI(bj_FORCE_ALL_PLAYERS,15.00," ")
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,20,true)
call TriggerAddCondition(t,Condition(function P0O))
call SaveInteger(ZY,(V0I),(25),(0))
call TriggerEvaluate(t)
set t=null
return false
endfunction
function ModeRD_SetCap takes nothing returns boolean
if RF0==false then
set RF0=true
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848657732))
endif
return false
endfunction
function SHO takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=1
local real x
local real y
local real a
local integer r
local integer WCI
local boolean P6O=false
local boolean P7O=false
local boolean P8O=false
local boolean P9O=false
local boolean PAO=false
local boolean PBO=false
local boolean PCO=false
local boolean PDO=false
local boolean PEO=false
local boolean array PFO
local player p
local real T8I
local boolean PGO=false
local real z
set SC0=false
set RC0=CreateTrigger()
call TriggerAddCondition(RC0,Condition(function P3O))
call YII(GetLocalPlayer(),"Sound\\Interface\\Rescue.wav")
set p=CO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=CO[2]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=CO[3]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=CO[4]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=CO[5]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[2]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[3]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[4]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[5]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(M),false)
call TriggerAddCondition(t,Condition(function P5O))
set R30=true
set RK=180
set B3=false
set A3=false
call UnitAddAbility(DX0,1097295983)
call UnitAddAbility(DY0,1097295983)
call UnitAddAbility(DJ0,1097295983)
call UnitAddAbility(DK0,1097295983)
call UnitAddAbility(DT0,1097295983)
call UnitAddAbility(DR0,1097295983)
call UnitAddAbility(DP0,1097295983)
call UnitAddAbility(DQ0,1097295983)
call UnitAddAbility(DL0,1097295983)
call UnitAddAbility(DM0,1097295983)
call UnitAddAbility(DN0,1097295983)
call UnitAddAbility(DS0,1097295983)
call ShowUnit(DX0,false)
call ShowUnit(DY0,false)
call ShowUnit(DJ0,false)
call ShowUnit(DK0,false)
call ShowUnit(DT0,false)
call ShowUnit(DR0,false)
call ShowUnit(DP0,false)
call ShowUnit(DQ0,false)
call ShowUnit(DL0,false)
call ShowUnit(DM0,false)
call ShowUnit(DN0,false)
call ShowUnit(DS0,false)
set i=1
loop
exitwhen i>20
set WCI=X6I(true,true)
if P6O then
set P6O=false
set WCI=50
elseif P7O then
set P7O=false
set WCI=51
elseif P8O then
set P8O=false
set WCI=104
elseif P9O then
set P9O=false
set WCI=65
elseif PAO then
set PAO=false
set WCI=49
elseif PBO then
set PBO=false
if GetRandomInt(1,2)==1 then
set WCI=16
else
set WCI=86
endif
elseif PCO then
set PCO=false
if GetRandomInt(1,2)==1 then
set WCI=73
else
set WCI=83
endif
elseif PDO then
set PDO=false
elseif PEO then
set PEO=false
endif
if PFO[WCI]==false and((WCI)!=23)then
set PFO[WCI]=true
set TZ0[i]=WCI
set i=i+1
endif
endloop
set TH0[1]=CreateUnit(CO[0],1848656963,TT0,TR0,0)
set TH0[2]=CreateUnit(CO[1],1848656963,TT0,TR0,0)
set TH0[3]=CreateUnit(CO[2],1848656963,TT0,TR0,0)
set TH0[4]=CreateUnit(CO[3],1848656963,TT0,TR0,0)
set TH0[5]=CreateUnit(CO[4],1848656963,TT0,TR0,0)
set TH0[6]=CreateUnit(CO[5],1848656963,TT0,TR0,0)
set TH0[7]=CreateUnit(DO[0],1848656963,TP0,TQ0,0)
set TH0[8]=CreateUnit(DO[1],1848656963,TP0,TQ0,0)
set TH0[9]=CreateUnit(DO[2],1848656963,TP0,TQ0,0)
set TH0[10]=CreateUnit(DO[3],1848656963,TP0,TQ0,0)
set TH0[11]=CreateUnit(DO[4],1848656963,TP0,TQ0,0)
set TH0[12]=CreateUnit(DO[5],1848656963,TP0,TQ0,0)
call PanCameraToTimedForPlayer(CO[1],TT0,TR0,0)
call PanCameraToTimedForPlayer(CO[2],TT0,TR0,0)
call PanCameraToTimedForPlayer(CO[3],TT0,TR0,0)
call PanCameraToTimedForPlayer(CO[4],TT0,TR0,0)
call PanCameraToTimedForPlayer(CO[5],TT0,TR0,0)
call PanCameraToTimedForPlayer(DO[1],TT0,TR0,0)
call PanCameraToTimedForPlayer(DO[2],TT0,TR0,0)
call PanCameraToTimedForPlayer(DO[3],TT0,TR0,0)
call PanCameraToTimedForPlayer(DO[4],TT0,TR0,0)
call PanCameraToTimedForPlayer(DO[5],TT0,TR0,0)
set R60=TT0
set R70=TR0
set R80=TP0
set R90=TQ0
set TX0[1]=TT0+R00*(-2)
set TY0[1]=TR0+RI0
set TX0[2]=TT0+R00*(-1)
set TY0[2]=TR0+RI0
set TX0[3]=TT0+R00*(0)
set TY0[3]=TR0+RI0
set TX0[4]=TT0+R00*(1)
set TY0[4]=TR0+RI0
set TX0[5]=TT0+R00*(2)
set TY0[5]=TR0+RI0
set TJ0[1]=TT0+R00*(-2)
set TK0[1]=TR0-RI0
set TJ0[2]=TT0+R00*(-1)
set TK0[2]=TR0-RI0
set TJ0[3]=TT0+R00*(0)
set TK0[3]=TR0-RI0
set TJ0[4]=TT0+R00*(1)
set TK0[4]=TR0-RI0
set TJ0[5]=TT0+R00*(2)
set TK0[5]=TR0-RI0
set TL0[1]=TP0+R00*(-2)
set TM0[1]=TQ0+RI0
set TL0[2]=TP0+R00*(-1)
set TM0[2]=TQ0+RI0
set TL0[3]=TP0+R00*(0)
set TM0[3]=TQ0+RI0
set TL0[4]=TP0+R00*(1)
set TM0[4]=TQ0+RI0
set TL0[5]=TP0+R00*(2)
set TM0[5]=TQ0+RI0
set TN0[1]=TP0+R00*(-2)
set TS0[1]=TQ0-RI0
set TN0[2]=TP0+R00*(-1)
set TS0[2]=TQ0-RI0
set TN0[3]=TP0+R00*(0)
set TS0[3]=TQ0-RI0
set TN0[4]=TP0+R00*(1)
set TS0[4]=TQ0-RI0
set TN0[5]=TP0+R00*(2)
set TS0[5]=TQ0-RI0
set T8I=TU0
set i=1
loop
exitwhen i>20
if PGO==false then
set PGO=true
else
set PGO=false
endif
set a=i/I2R(20)*360.0
set x=TT0+T8I*Cos(a*bj_DEGTORAD)
set y=TR0+T8I*Sin(a*bj_DEGTORAD)
set TW0[i]=CreateUnit(CO[0],DF0[TZ0[i]],x,y,JPI(x,y,TT0,TR0))
call RAO(x,y)
if PGO then
call SetUnitColor(TW0[i],GetPlayerColor(DO[5]))
else
call SetUnitColor(TW0[i],GetPlayerColor(DO[4]))
endif
call TriggerRegisterUnitEvent(RC0,TW0[i],EVENT_UNIT_SELL)
set i=i+1
endloop
call W7I()
set t=null
set p=null
endfunction
function PHO takes nothing returns boolean
local unit TTO=GetSoldUnit()
local player p=GetOwningPlayer(TTO)
local integer i
local real x
local real y
local real a
if GetUnitTypeId(TTO)==1747990094 and IsPlayerAlly(GetOwningPlayer(TTO),GetOwningPlayer(GetSellingUnit()))then
if L1[GetPlayerId(p)]!=null then
call Y3I(p,GetObjectName(1848657459))
call KillUnit(TTO)
set TTO=null
set p=null
return false
endif
set x=GetUnitX(GetSellingUnit())
set y=GetUnitY(GetSellingUnit())
set i=XWI(GetUnitTypeId(GetSellingUnit()))
set a=GetUnitFacing(GetSellingUnit())
call RemoveUnit(GetSellingUnit())
call CreateUnit(p,i,x,y,a)
endif
if GetUnitTypeId(TTO)==1747990094 then
call KillUnit(TTO)
endif
if L1[GetPlayerId(CO[1])]!=null and L1[GetPlayerId(CO[2])]!=null and L1[GetPlayerId(CO[3])]!=null and L1[GetPlayerId(CO[4])]!=null and L1[GetPlayerId(CO[5])]!=null and L1[GetPlayerId(DO[1])]!=null and L1[GetPlayerId(DO[2])]!=null and L1[GetPlayerId(DO[3])]!=null and L1[GetPlayerId(DO[4])]!=null and L1[GetPlayerId(DO[5])]!=null then
call ZSI(GetTriggeringTrigger())
endif
set TTO=null
set p=null
return false
endfunction
function PZO takes nothing returns nothing
local trigger t=CreateTrigger()
local integer NJI
local integer NYI
local string Q1I
local unit u
local real x
local real y
local integer i
local real d
local real TQO=GetRectCenterX(A4)+125
local real TUO=GetRectCenterY(A4)+75
local real R0O=GetRectCenterX(T3)+100
local real RIO=GetRectCenterY(T3)
set NC0=true
set i=1
loop
exitwhen i>5
set x=TQO-290+(i-1)*100
set y=TUO
call CreateUnit(CO[i+1],1848651843,TQO,TUO,bj_UNIT_FACING)
set u=CreateUnit(CO[0],DF0[RN0[i+2]],x,y,270)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)
call PanCameraToTimedForPlayer(CO[i],TQO,TUO,0)
set i=i+1
endloop
set i=1
loop
exitwhen i>5
set x=R0O-290+(i-1)*100
set y=RIO
call CreateUnit(DO[i+1],1848651843,R0O,RIO,bj_UNIT_FACING)
set u=CreateUnit(DO[0],DF0[RS0[i+2]],x,y,270)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)
call PanCameraToTimedForPlayer(DO[i],R0O,RIO,0)
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function PHO))
call SuspendTimeOfDay(false)
call EnableTrigger(E30)
call EnableTrigger(QM)
set RK=90
call NGO()
set t=null
set u=null
endfunction
function PVO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
set UM=true
call ZSI(t)
call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_MASKED,SM0,SN0,700,false,false))
call DestroyFogModifier(CreateFogModifierRadius(DO[0],FOG_OF_WAR_MASKED,SM0,SN0,700,false,false))
set t=null
return false
endfunction
function PWO takes string S,real T8O,real T9O,real TAO,real TBO,real TCO,boolean TDO returns nothing
set VK=CreateImage(S,T8O,T9O,0,TAO-(T8O/2),TBO-(T9O/2),TCO,0,0,0,2)
call SetImageRenderAlways(VK,true)
call ShowImage(VK,TDO)
endfunction
function PXO takes string PYO,integer r,integer g,integer b,integer a,real x,real y returns image
call PWO("Fonts\\"+PYO+".blp",60,60,x-20,y,0,true)
call SetImageColor(VK,r,g,b,a)
return VK
endfunction
function PJO takes boolean PKO,boolean PLO returns nothing
local integer PMO
local integer PNO
local integer PSO
local integer PTO
local integer PRO
local integer PPO
local integer PQO
local integer PUO
local integer c1
local integer c2
local integer a=0
set PMO=RK0[1]
set PNO=PMO/60
set PSO=(PMO-PNO*60)/10
set PTO=PMO-PNO*60-PSO*10
set PRO=RK0[2]
set PPO=PRO/60
set PQO=(PRO-PPO*60)/10
set PUO=PRO-PPO*60-PQO*10
if PKO==false then
call ShowImage(PO0,false)
call DestroyImage(PO0)
call ShowImage(P20,false)
call DestroyImage(P20)
call ShowImage(P30,false)
call DestroyImage(P30)
call ShowImage(P40,false)
call DestroyImage(P40)
call ShowImage(P50,false)
call DestroyImage(P50)
call ShowImage(P60,false)
call DestroyImage(P60)
call ShowImage(P70,false)
call DestroyImage(P70)
call ShowImage(P80,false)
call DestroyImage(P80)
call ShowImage(P90,false)
call DestroyImage(P90)
call ShowImage(PA0,false)
call DestroyImage(PA0)
call ShowImage(PB0,false)
call DestroyImage(PB0)
call ShowImage(PC0,false)
call DestroyImage(PC0)
call ShowImage(PD0,false)
call DestroyImage(PD0)
call ShowImage(PE0,false)
call DestroyImage(PE0)
call ShowImage(PF0,false)
call DestroyImage(PF0)
call ShowImage(PG0,false)
call DestroyImage(PG0)
endif
if PLO==false then
set c1=255
set c2=255
if RJ0==1 then
if IsPlayerAlly(CO[1],GetLocalPlayer())then
set a=255
set c1=0
endif
else
if IsPlayerAlly(DO[1],GetLocalPlayer())then
set a=255
set c2=0
endif
endif
set PO0=PXO(I2S(PNO),255,c1,c1,255,SM0-40,SN0+300)
set P20=PXO("58",255,c1,c1,255,SM0-0,SN0+300)
set P30=PXO(I2S(PSO),255,c1,c1,255,SM0+20,SN0+300)
set P40=PXO(I2S(PTO),255,c1,c1,255,SM0+60,SN0+300)
set P50=PXO(I2S(PPO),255,c2,c2,255,SM0-40,SN0-300)
set P60=PXO("58",255,c2,c2,255,SM0-0,SN0-300)
set P70=PXO(I2S(PQO),255,c2,c2,255,SM0+20,SN0-300)
set P80=PXO(I2S(PUO),255,c2,c2,255,SM0+60,SN0-300)
if RL0==1 or RL0==2 or RL0==3 or RL0==4 then
set P90=PXO("Y",255,0,0,a,SM0-130,SN0)
set PA0=PXO("O",255,0,0,a,SM0-90,SN0)
set PB0=PXO("U",255,0,0,a,SM0-50,SN0)
set PC0=PXO("R",255,0,0,a,SM0-10,SN0)
set PD0=PXO("B",255,0,0,a,SM0+70,SN0)
set PE0=PXO("A",255,0,0,a,SM0+110,SN0)
set PF0=PXO("N",255,0,0,a,SM0+150,SN0)
set PG0=PXO("K",255,0,0,0,SM0+170,SN0)
else
set P90=PXO("Y",255,0,0,a,SM0-150,SN0)
set PA0=PXO("O",255,0,0,a,SM0-110,SN0)
set PB0=PXO("U",255,0,0,a,SM0-70,SN0)
set PC0=PXO("R",255,0,0,a,SM0-30,SN0)
set PD0=PXO("P",255,0,0,a,SM0+50,SN0)
set PE0=PXO("I",255,0,0,a,SM0+90,SN0)
set PF0=PXO("C",255,0,0,a,SM0+130,SN0)
set PG0=PXO("K",255,0,0,a,SM0+170,SN0)
endif
endif
endfunction
function Q0O takes nothing returns nothing
local integer i=0
loop
exitwhen i>RW0
call RemoveUnit(RX0[i])
set i=i+1
endloop
endfunction
function QIO takes real x,real y returns nothing
set RX0[RW0]=CreateUnit(Player(0),1747990089,x,y,0)
set RW0=RW0+1
endfunction
function Q1O takes integer QOO,boolean Q2O returns nothing
local player p
local real d
set RM0[QOO]=true
set PI0[RJ0]=PI0[RJ0]-1
if RJ0==1 then
set p=CO[1]
set RT0=RT0+1
set RN0[RT0]=RH0[QOO]
if RT0<3 then
call UnitAddAbility(RV0[QOO],1097167980)
call UnitAddAbility(RV0[QOO],1097625443)
endif
call SetUnitPosition(RV0[QOO],RP0[RT0],RQ0[RT0])
set d=RMaxBJ(VZI(RV0[QOO])-0.3,0.5)
call QIO(RP0[RT0],RQ0[RT0])
call SetUnitScale(RV0[QOO],d,d,d)
call SetUnitFacing(RV0[QOO],270)
if Q2O==false then
if RL0==1 or RL0==2 or RL0==3 or RL0==4 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r "+GetObjectName(1848657973)+" "+GetUnitName(RV0[QOO]))
call P7I("Ban"+I2S(GetPlayerId(p)),D00[RH0[QOO]])
else
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r "+GetObjectName(1848657974)+" "+GetUnitName(RV0[QOO]))
call P7I("Pick"+I2S(GetPlayerId(p)),D00[RH0[QOO]])
endif
else
if RL0==1 or RL0==2 or RL0==3 or RL0==4 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r "+GetObjectName(1848657975)+" "+GetUnitName(RV0[QOO]))
call P7I("Ban"+I2S(GetPlayerId(p)),D00[RH0[QOO]])
else
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r "+GetObjectName(1848657976)+" "+GetUnitName(RV0[QOO]))
call P7I("Pick"+I2S(GetPlayerId(p)),D00[RH0[QOO]])
endif
endif
else
set p=DO[1]
set RR0=RR0+1
set RS0[RR0]=RH0[QOO]
if RR0<3 then
call UnitAddAbility(RV0[QOO],1097167980)
call UnitAddAbility(RV0[QOO],1097625443)
endif
call SetUnitPosition(RV0[QOO],RU0[RR0],P00[RR0])
set d=RMaxBJ(VZI(RV0[QOO])-0.3,0.5)
call QIO(RU0[RR0],P00[RR0])
call SetUnitScale(RV0[QOO],d,d,d)
call SetUnitFacing(RV0[QOO],90)
if Q2O==false then
if RL0==1 or RL0==2 or RL0==3 or RL0==4 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r "+GetObjectName(1848657973)+" "+GetUnitName(RV0[QOO]))
call P7I("Ban"+I2S(GetPlayerId(p)),D00[RH0[QOO]])
else
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r "+GetObjectName(1848657974)+" "+GetUnitName(RV0[QOO]))
call P7I("Pick"+I2S(GetPlayerId(p)),D00[RH0[QOO]])
endif
else
if RL0==1 or RL0==2 or RL0==3 or RL0==4 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r "+GetObjectName(1848657975)+" "+GetUnitName(RV0[QOO]))
call P7I("Ban"+I2S(GetPlayerId(p)),D00[RH0[QOO]])
else
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(CR0[GetPlayerId((p))])+"|r "+GetObjectName(1848657976)+" "+GetUnitName(RV0[QOO]))
call P7I("Pick"+I2S(GetPlayerId(p)),D00[RH0[QOO]])
endif
endif
endif
call PauseUnit(RV0[QOO],true)
call SetUnitOwner(RV0[QOO],p,true)
endfunction
function Q3O takes unit V8I returns integer
local integer i=1
loop
exitwhen i>24
if RV0[i]==V8I then
return i
endif
set i=i+1
endloop
return 0
endfunction
function Q4O takes nothing returns nothing
local integer i
loop
set i=GetRandomInt(1,24)
exitwhen RM0[i]==false
endloop
call Q1O(i,true)
endfunction
function Q5O takes nothing returns boolean
local unit TTO=GetSoldUnit()
local player p=GetOwningPlayer(TTO)
local integer id=GetPlayerId(p)
local player Q6O
if RJ0==1 then
set Q6O=CO[1]
else
set Q6O=DO[1]
endif
call KillUnit(TTO)
if P10 or PI0[RJ0]<1 or p!=Q6O then
call Y3I(p,GetObjectName(1848656722))
elseif GetUnitTypeId(TTO)==1747990094 then
call Q1O(Q3O(GetSellingUnit()),false)
endif
set TTO=null
return false
endfunction
function Q7O takes nothing returns boolean
local integer i=1
local trigger t
call ZSI(GetTriggeringTrigger())
loop
exitwhen i>24
call RemoveUnit(RV0[i])
set i=i+1
endloop
call SuspendTimeOfDay(false)
call Q0O()
call VF1()
call LYO(90)
call UnitApplyTimedLife(RZ0[1],1112820806,2)
call UnitApplyTimedLife(RZ0[2],1112820806,2)
call UnitApplyTimedLife(RZ0[3],1112820806,2)
call UnitApplyTimedLife(RZ0[4],1112820806,2)
call UnitApplyTimedLife(RZ0[5],1112820806,2)
call UnitApplyTimedLife(RZ0[6],1112820806,2)
call UnitApplyTimedLife(RZ0[7],1112820806,2)
call UnitApplyTimedLife(RZ0[8],1112820806,2)
call UnitApplyTimedLife(RZ0[9],1112820806,2)
call UnitApplyTimedLife(RZ0[10],1112820806,2)
call UnitApplyTimedLife(RZ0[11],1112820806,2)
call UnitApplyTimedLife(RZ0[12],1112820806,2)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,7,false)
call TriggerAddCondition(t,Condition(function PVO))
set t=null
call PZO()
return false
endfunction
function Q8O takes nothing returns boolean
local integer i
local trigger t
local force f
local string c="|c006699CC"
set RK0[RJ0]=IMaxBJ(RK0[RJ0]-1,0)
call PJO(false,false)
if PI0[RJ0]<1 then
if RJ0==1 then
call YII(CO[1],"Sound\\Interface\\Rescue.wav")
call YII(CO[2],"Sound\\Interface\\Rescue.wav")
call YII(CO[3],"Sound\\Interface\\Rescue.wav")
call YII(CO[4],"Sound\\Interface\\Rescue.wav")
call YII(CO[5],"Sound\\Interface\\Rescue.wav")
else
call YII(DO[1],"Sound\\Interface\\Rescue.wav")
call YII(DO[2],"Sound\\Interface\\Rescue.wav")
call YII(DO[3],"Sound\\Interface\\Rescue.wav")
call YII(DO[4],"Sound\\Interface\\Rescue.wav")
call YII(DO[5],"Sound\\Interface\\Rescue.wav")
endif
set RL0=RL0+1
if RJ0==1 then
set RJ0=2
set f=BO
else
set RJ0=1
set f=AO
endif
set RK0[RJ0]=IMaxBJ(RK0[RJ0],6)
if RL0==1 or RL0==2 or RL0==3 or RL0==4 then
set PI0[RJ0]=1
call JDI(f,15,c+GetObjectName(1848657970)+"|r")
elseif RL0==5 then
set PI0[RJ0]=1
call JDI(f,15,c+GetObjectName(1848657971)+"|r")
elseif RL0==6 or RL0==7 or RL0==8 or RL0==9 then
set PI0[RJ0]=2
call JDI(f,15,c+GetObjectName(1848657972)+"|r")
elseif RL0==10 then
set PI0[RJ0]=1
call JDI(f,15,c+GetObjectName(1848657971)+"|r")
else
call PJO(false,true)
call ZSI(GetTriggeringTrigger())
call ZSI(RG0)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function Q7O))
set t=null
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848657977))
endif
elseif RK0[RJ0]==0 then
call Q4O()
endif
return false
endfunction
function Q9O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local force f
local string c="|c006699CC"
call ZSI(t)
set RY0=GetRandomInt(1,2)
call JDI(bj_FORCE_ALL_PLAYERS,15.00," ")
if RY0==1 then
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848653365)+"|r"+" "+GetObjectName(1848653366))
else
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(DO[0])]+GetObjectName(1848653379)+"|r"+" "+GetObjectName(1848653366))
endif
call JDI(bj_FORCE_ALL_PLAYERS,15.00," ")
set RJ0=RY0
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function Q8O))
set RK0[1]=150
set RK0[2]=150
set RL0=1
set PI0[RJ0]=1
call PJO(true,false)
if RJ0==1 then
set f=AO
else
set f=BO
endif
call JDI(f,15,c+GetObjectName(1848657970)+"|r")
set P10=false
set t=null
return false
endfunction
function T1O takes nothing returns nothing
local integer i
local player p
local boolean PGO=false
local real a
local real x
local real y
local trigger t
local integer WCI
local boolean P6O=false
local boolean P7O=false
local boolean P8O=false
local boolean P9O=false
local boolean PAO=false
local boolean PBO=false
local boolean PCO=false
local boolean PDO=false
local boolean PEO=false
local integer z
local string c="|c006699CC"
local boolean array PFO
call H8O()
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15,false)
call TriggerAddCondition(t,Condition(function Q9O))
set t=null
set RJ0=-1
set SC0=false
set TM=true
set B3=false
set A3=false
set NC0=false
call YII(GetLocalPlayer(),"Sound\\Interface\\Rescue.wav")
call SuspendTimeOfDay(true)
set RG0=CreateTrigger()
call UnitAddAbility(DX0,1097295983)
call UnitAddAbility(DY0,1097295983)
call UnitAddAbility(DJ0,1097295983)
call UnitAddAbility(DK0,1097295983)
call UnitAddAbility(DT0,1097295983)
call UnitAddAbility(DR0,1097295983)
call UnitAddAbility(DP0,1097295983)
call UnitAddAbility(DQ0,1097295983)
call UnitAddAbility(DL0,1097295983)
call UnitAddAbility(DM0,1097295983)
call UnitAddAbility(DN0,1097295983)
call UnitAddAbility(DS0,1097295983)
set p=CO[1]
set RZ0[1]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=CO[2]
set RZ0[2]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=CO[3]
set RZ0[3]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=CO[4]
set RZ0[4]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=CO[5]
set RZ0[5]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[1]
set RZ0[6]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[2]
set RZ0[7]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[3]
set RZ0[8]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[4]
set RZ0[9]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set p=DO[5]
set RZ0[10]=CreateUnit(p,1848656963,SM0,SN0,0)
call PanCameraToTimedForPlayer(p,SM0,SN0,0)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
set RP0[1]=SM0+PZ0*(-3.5)
set RQ0[1]=SN0+PV0
set RP0[2]=SM0+PZ0*(3.5)
set RQ0[2]=SN0+PV0
set RP0[3]=SM0+PZ0*(-2)
set RQ0[3]=SN0+PV0
set RP0[4]=SM0+PZ0*(-1)
set RQ0[4]=SN0+PV0
set RP0[5]=SM0+PZ0*(0)
set RQ0[5]=SN0+PV0
set RP0[6]=SM0+PZ0*(1)
set RQ0[6]=SN0+PV0
set RP0[7]=SM0+PZ0*(2)
set RQ0[7]=SN0+PV0
set RU0[1]=SM0+PZ0*(-3.5)
set P00[1]=SN0-PV0
set RU0[2]=SM0+PZ0*(3.5)
set P00[2]=SN0-PV0
set RU0[3]=SM0+PZ0*(-2)
set P00[3]=SN0-PV0
set RU0[4]=SM0+PZ0*(-1)
set P00[4]=SN0-PV0
set RU0[5]=SM0+PZ0*(0)
set P00[5]=SN0-PV0
set RU0[6]=SM0+PZ0*(1)
set P00[6]=SN0-PV0
set RU0[7]=SM0+PZ0*(2)
set P00[7]=SN0-PV0
call KCI(SM0,SN0,600)
set i=1
loop
exitwhen i>24
set WCI=X6I(true,true)
if P6O then
set P6O=false
set WCI=50
elseif P7O then
set P7O=false
set WCI=51
elseif P8O then
set P8O=false
set WCI=104
elseif P9O then
set P9O=false
set WCI=65
elseif PAO then
set PAO=false
set WCI=49
elseif PBO then
set PBO=false
if GetRandomInt(1,2)==1 then
set WCI=16
else
set WCI=86
endif
elseif PCO then
set PCO=false
if GetRandomInt(1,2)==1 then
set WCI=73
else
set WCI=83
endif
elseif PDO then
set PDO=false
elseif PEO then
set PEO=false
endif
if PFO[WCI]==false then
set PFO[WCI]=true
set RH0[i]=WCI
call P7I("Pool"+I2S(i),D00[RH0[i]])
if PGO==false then
set PGO=true
else
set PGO=false
endif
set a=(i/I2R(24))*360.0
set x=SM0+PH0*Cos(a*bj_DEGTORAD)
set y=SN0+PH0*Sin(a*bj_DEGTORAD)
set RV0[i]=CreateUnit(CO[0],DF0[RH0[i]],x,y,JPI(x,y,SM0,SN0))
call SetUnitPathing(RV0[i],false)
call SetUnitX(RV0[i],x)
call SetUnitY(RV0[i],y)
call QIO(x,y)
if PGO then
call SetUnitColor(RV0[i],GetPlayerColor(DO[5]))
else
call SetUnitColor(RV0[i],GetPlayerColor(DO[4]))
endif
set RM0[i]=false
call TriggerRegisterUnitEvent(RG0,RV0[i],EVENT_UNIT_SELL)
set i=i+1
endif
endloop
call TriggerAddCondition(RG0,Condition(function Q5O))
call W7I()
endfunction
function QAO takes player p,integer VFI returns nothing
local integer i=1
loop
exitwhen i>5
if p!=CO[i]then
call SetPlayerTechMaxAllowed(CO[i],VFI,0)
endif
if p!=DO[i]then
call SetPlayerTechMaxAllowed(DO[i],VFI,0)
endif
set i=i+1
endloop
endfunction
function ModeSD_Chosen takes nothing returns boolean
local string X0O=GetEventPlayerChatString()
local integer a=S2I(SubString(X0O,6,StringLength(X0O)))
local integer VFI
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local location UBI=GetRectCenter(G4)
local location UCI=GetRectCenter(F4)
local player p=GetTriggerPlayer()
if a==1 then
set VFI=(LoadInteger(ZY,(V0I),(166)))
elseif a==2 then
set VFI=(LoadInteger(ZY,(V0I),(167)))
elseif a==3 then
set VFI=(LoadInteger(ZY,(V0I),(168)))
else
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set UBI=null
set UCI=null
return false
endif
if GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)>=250 then
if VLI(p)then
set L1[GetPlayerId(p)]=CreateUnitAtLoc(p,D00[VFI],UBI,0)
else
set L1[GetPlayerId(p)]=CreateUnitAtLoc(p,D00[VFI],UCI,0)
endif
call MEI(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call Y3I(p,GetObjectName(1848652595))
endif
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set UBI=null
set UCI=null
set t=null
set p=null
return false
endfunction
function QBO takes integer QCO returns integer
local integer XIO
if QCO==1 then
set XIO=GetUnitPointValueByType(D40[GetRandomInt(1,D50)])
elseif QCO==2 then
set XIO=GetUnitPointValueByType(D60[GetRandomInt(1,D70)])
elseif QCO==3 then
set XIO=GetUnitPointValueByType(D80[GetRandomInt(1,D90)])
endif
return XIO
endfunction
function QDO takes integer QEO,integer QFO,integer QCO returns integer
local integer X1I
local integer XOI
local integer XIO
set XIO=QBO(QCO)
if G2 and QEO!=XIO and QFO!=XIO then
return XIO
endif
loop
exitwhen R[XIO]==false and QEO!=XIO and QFO!=XIO
set XIO=QBO(QCO)
endloop
set R[XIO]=true
return XIO
endfunction
function SZO takes nothing returns nothing
local player p
local integer i=1
local integer QGO
local integer QHO
local integer QZO
local trigger t
local integer V0I
set PW0=true
set RK=120
set A3=false
set B3=false
call PauseUnit(DX0,true)
call PauseUnit(DY0,true)
call PauseUnit(DJ0,true)
call PauseUnit(DK0,true)
call PauseUnit(DL0,true)
call PauseUnit(DM0,true)
call PauseUnit(DN0,true)
call PauseUnit(DS0,true)
call PauseUnit(DT0,true)
call PauseUnit(DR0,true)
call PauseUnit(DP0,true)
call PauseUnit(DQ0,true)
loop
exitwhen i>5
set p=CO[i]
set QGO=0
set QHO=0
set QZO=0
if VTI(p)then
call UnitAddAbility(CL0[GetPlayerId(p)],1093743686)
call UnitAddAbility(CL0[GetPlayerId(p)],1093743685)
call UnitAddAbility(CL0[GetPlayerId(p)],1093743688)
set QGO=QDO(QGO,QHO,1)
set QHO=QDO(QGO,QHO,2)
set QZO=QDO(QGO,QHO,3)
call AddUnitToStock(CL0[GetPlayerId(p)],D00[QGO],1,1)
call QAO(p,D00[QGO])
call AddUnitToStock(CL0[GetPlayerId(p)],D00[QHO],1,1)
call QAO(p,D00[QHO])
call AddUnitToStock(CL0[GetPlayerId(p)],D00[QZO],1,1)
call QAO(p,D00[QZO])
call ClearSelectionForPlayer(p)
call SelectUnitAddForPlayer(CL0[GetPlayerId(p)],p)
call PanCameraToTimedForPlayer(p,GetRectCenterX(A4),GetRectCenterY(A4),0)
call DisplayTimedTextToPlayer(p,0,I3,15," ")
call DisplayTimedTextToPlayer(p,0,I3,15," ")
call DisplayTimedTextToPlayer(p,0,I3,15," ")
call DisplayTimedTextToPlayer(p,0,I3,15,"|cff99ccff"+GetObjectName(1848657206)+"|r")
call DisplayTimedTextToPlayer(p,0,I3,15," ")
endif
set p=DO[i]
set QGO=0
set QHO=0
set QZO=0
if VTI(p)then
call UnitAddAbility(CL0[GetPlayerId(p)],1093743686)
call UnitAddAbility(CL0[GetPlayerId(p)],1093743685)
call UnitAddAbility(CL0[GetPlayerId(p)],1093743688)
set QGO=QDO(QGO,QHO,1)
set QHO=QDO(QGO,QHO,2)
set QZO=QDO(QGO,QHO,3)
call AddUnitToStock(CL0[GetPlayerId(p)],D00[QGO],1,1)
call QAO(p,D00[QGO])
call AddUnitToStock(CL0[GetPlayerId(p)],D00[QHO],1,1)
call QAO(p,D00[QHO])
call AddUnitToStock(CL0[GetPlayerId(p)],D00[QZO],1,1)
call QAO(p,D00[QZO])
call ClearSelectionForPlayer(p)
call SelectUnitAddForPlayer(CL0[GetPlayerId(p)],p)
call PanCameraToTimedForPlayer(p,GetRectCenterX(T3),GetRectCenterY(T3),0)
call DisplayTimedTextToPlayer(p,0,I3,15," ")
call DisplayTimedTextToPlayer(p,0,I3,15," ")
call DisplayTimedTextToPlayer(p,0,I3,15," ")
call DisplayTimedTextToPlayer(p,0,I3,15,"|cff99ccff"+GetObjectName(1848657206)+"|r")
call DisplayTimedTextToPlayer(p,0,I3,15," ")
endif
set i=i+1
endloop
set p=null
set t=null
endfunction
function QVO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer LWI=(LoadInteger(ZY,(V0I),(55)))
local player p
local integer WCI
local location UBI=GetRectCenter(A4)
local location UCI=GetRectCenter(T3)
if LWI<6 then
set p=CO[LWI]
elseif LWI<11 then
set p=DO[LWI-5]
endif
if LWI>10 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if X0==false then
set B3=true
endif
elseif LWI<6 then
call SaveInteger(ZY,(V0I),(55),(LWI+1))
set L1[GetPlayerId(p)]=null
if VTI(p)then
loop
exitwhen L1[GetPlayerId(p)]!=null
set WCI=WBI()
if R[WCI]==false then
if not G2 then
set R[WCI]=true
endif
set L1[GetPlayerId(p)]=CreateUnitAtLoc(p,D00[WCI],UBI,bj_UNIT_FACING)
endif
endloop
endif
elseif LWI<11 then
call SaveInteger(ZY,(V0I),(55),(LWI+1))
set L1[GetPlayerId(p)]=null
if VTI(p)then
loop
exitwhen L1[GetPlayerId(p)]!=null
set WCI=WBI()
if R[WCI]==false then
if not G2 then
set R[WCI]=true
endif
set L1[GetPlayerId(p)]=CreateUnitAtLoc(p,D00[WCI],UCI,bj_UNIT_FACING)
endif
endloop
endif
endif
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set UBI=null
set UCI=null
set p=null
set t=null
return false
endfunction
function S9O takes nothing returns nothing
local location UBI=GetRectCenter(A4)
local location UCI=GetRectCenter(T3)
local location QWO=GetRectCenter(A4)
local location QXO=GetRectCenter(T3)
local integer W5I=1
local integer W6I=5
local integer WCI
local trigger t
set Y0=true
set A3=false
if not G2 then
call W7I()
endif
set T0=400
call PanCameraToTimedLocForPlayer(CO[1],QWO,0)
call PanCameraToTimedLocForPlayer(CO[2],QWO,0)
call PanCameraToTimedLocForPlayer(CO[3],QWO,0)
call PanCameraToTimedLocForPlayer(CO[4],QWO,0)
call PanCameraToTimedLocForPlayer(CO[5],QWO,0)
call PanCameraToTimedLocForPlayer(DO[1],QXO,0)
call PanCameraToTimedLocForPlayer(DO[2],QXO,0)
call PanCameraToTimedLocForPlayer(DO[3],QXO,0)
call PanCameraToTimedLocForPlayer(DO[4],QXO,0)
call PanCameraToTimedLocForPlayer(DO[5],QXO,0)
if J2 then
loop
set WCI=WBI()
exitwhen R[WCI]==false
endloop
if VLI(XO)then
set L1[GetPlayerId(XO)]=CreateUnit(XO,D00[WCI],GetLocationX(UBI),GetLocationY(UBI),270)
else
set L1[GetPlayerId(XO)]=CreateUnit(XO,D00[WCI],GetLocationX(UCI),GetLocationY(UCI),270)
endif
call RemoveLocation(UBI)
call RemoveLocation(UCI)
call RemoveLocation(QWO)
call RemoveLocation(QXO)
set UBI=null
set UCI=null
set QWO=null
set QXO=null
set t=null
return
endif
set B3=false
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function QVO))
call SaveInteger(ZY,(GetHandleId(t)),(55),(1))
call RemoveLocation(UBI)
call RemoveLocation(UCI)
call RemoveLocation(QWO)
call RemoveLocation(QXO)
set UBI=null
set UCI=null
set QWO=null
set QXO=null
set t=null
endfunction
function QYO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
call ZSI(t)
set O3=true
set t=null
return false
endfunction
function QJO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local trigger QKO=(LoadTriggerHandle(ZY,(V0I),(35)))
local integer i
local integer x
local integer WCI
local integer QLO=W0I(AO)
local integer QMO=W0I(BO)
local location UBI=GetRectCenter(G4)
local location UCI=GetRectCenter(F4)
local location QWO=GetRectCenter(A4)
local location QXO=GetRectCenter(T3)
call ZSI(QKO)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set PT0=(LoadInteger(ZY,(2001),(126)))
set PR0=(LoadInteger(ZY,(2001),(127)))
set PP0=(LoadInteger(ZY,(2001),(128)))
set i=1
loop
exitwhen i>QLO
set PS0[i]=PY0[i]
set i=i+1
endloop
set x=GetRandomInt(1,3)
if x==1 then
if QLO==1 then
set PS0[1]=PY0[1]
elseif QLO==2 then
set PS0[1]=PY0[2]
set PS0[2]=PY0[1]
elseif QLO==3 then
set PS0[1]=PY0[3]
set PS0[2]=PY0[1]
set PS0[3]=PY0[2]
elseif QLO==4 then
set PS0[1]=PY0[4]
set PS0[2]=PY0[3]
set PS0[3]=PY0[2]
set PS0[4]=PY0[1]
elseif QLO==5 then
set PS0[1]=PY0[5]
set PS0[2]=PY0[4]
set PS0[3]=PY0[1]
set PS0[4]=PY0[2]
set PS0[5]=PY0[3]
endif
elseif x==2 then
if QLO==1 then
set PS0[1]=PY0[1]
elseif QLO==2 then
set PS0[1]=PY0[2]
set PS0[2]=PY0[1]
elseif QLO==3 then
set PS0[1]=PY0[2]
set PS0[2]=PY0[3]
set PS0[3]=PY0[1]
elseif QLO==4 then
set PS0[1]=PY0[3]
set PS0[2]=PY0[1]
set PS0[3]=PY0[4]
set PS0[4]=PY0[2]
elseif QLO==5 then
set PS0[1]=PY0[4]
set PS0[2]=PY0[3]
set PS0[3]=PY0[2]
set PS0[4]=PY0[5]
set PS0[5]=PY0[1]
endif
else
if QLO==1 then
set PS0[1]=PY0[1]
elseif QLO==2 then
set PS0[1]=PY0[1]
set PS0[2]=PY0[2]
elseif QLO==3 then
set PS0[1]=PY0[3]
set PS0[2]=PY0[2]
set PS0[3]=PY0[1]
elseif QLO==4 then
set PS0[1]=PY0[2]
set PS0[2]=PY0[4]
set PS0[3]=PY0[3]
set PS0[4]=PY0[1]
elseif QLO==5 then
set PS0[1]=PY0[5]
set PS0[2]=PY0[1]
set PS0[3]=PY0[3]
set PS0[4]=PY0[4]
set PS0[5]=PY0[2]
endif
endif
set i=1
loop
exitwhen i>QLO
set PY0[i]=PS0[i]
set i=i+1
endloop
set i=1
loop
exitwhen i>QLO
set PS0[i]=PJ0[i]
set i=i+1
endloop
set x=GetRandomInt(1,3)
if x==1 then
if QLO==1 then
set PS0[1]=PJ0[1]
elseif QLO==2 then
set PS0[1]=PJ0[2]
set PS0[2]=PJ0[1]
elseif QLO==3 then
set PS0[1]=PJ0[3]
set PS0[2]=PJ0[1]
set PS0[3]=PJ0[2]
elseif QLO==4 then
set PS0[1]=PJ0[4]
set PS0[2]=PJ0[3]
set PS0[3]=PJ0[2]
set PS0[4]=PJ0[1]
elseif QLO==5 then
set PS0[1]=PJ0[5]
set PS0[2]=PJ0[4]
set PS0[3]=PJ0[1]
set PS0[4]=PJ0[2]
set PS0[5]=PJ0[3]
endif
elseif x==2 then
if QLO==1 then
set PS0[1]=PJ0[1]
elseif QLO==2 then
set PS0[1]=PJ0[2]
set PS0[2]=PJ0[1]
elseif QLO==3 then
set PS0[1]=PJ0[2]
set PS0[2]=PJ0[3]
set PS0[3]=PJ0[1]
elseif QLO==4 then
set PS0[1]=PJ0[3]
set PS0[2]=PJ0[1]
set PS0[3]=PJ0[4]
set PS0[4]=PJ0[2]
elseif QLO==5 then
set PS0[1]=PJ0[4]
set PS0[2]=PJ0[3]
set PS0[3]=PJ0[2]
set PS0[4]=PJ0[5]
set PS0[5]=PJ0[1]
endif
else
if QLO==1 then
set PS0[1]=PJ0[1]
elseif QLO==2 then
set PS0[1]=PJ0[1]
set PS0[2]=PJ0[2]
elseif QLO==3 then
set PS0[1]=PJ0[3]
set PS0[2]=PJ0[2]
set PS0[3]=PJ0[1]
elseif QLO==4 then
set PS0[1]=PJ0[2]
set PS0[2]=PJ0[4]
set PS0[3]=PJ0[3]
set PS0[4]=PJ0[1]
elseif QLO==5 then
set PS0[1]=PJ0[5]
set PS0[2]=PJ0[1]
set PS0[3]=PJ0[3]
set PS0[4]=PJ0[4]
set PS0[5]=PJ0[2]
endif
endif
set i=1
loop
exitwhen i>QLO
set PJ0[i]=PS0[i]
set i=i+1
endloop
set i=1
loop
exitwhen i>QLO
set PS0[i]=PK0[i]
set i=i+1
endloop
set x=GetRandomInt(1,3)
if x==1 then
if QLO==1 then
set PS0[1]=PK0[1]
elseif QLO==2 then
set PS0[1]=PK0[2]
set PS0[2]=PK0[1]
elseif QLO==3 then
set PS0[1]=PK0[3]
set PS0[2]=PK0[1]
set PS0[3]=PK0[2]
elseif QLO==4 then
set PS0[1]=PK0[4]
set PS0[2]=PK0[3]
set PS0[3]=PK0[2]
set PS0[4]=PK0[1]
elseif QLO==5 then
set PS0[1]=PK0[5]
set PS0[2]=PK0[4]
set PS0[3]=PK0[1]
set PS0[4]=PK0[2]
set PS0[5]=PK0[3]
endif
elseif x==2 then
if QLO==1 then
set PS0[1]=PK0[1]
elseif QLO==2 then
set PS0[1]=PK0[2]
set PS0[2]=PK0[1]
elseif QLO==3 then
set PS0[1]=PK0[2]
set PS0[2]=PK0[3]
set PS0[3]=PK0[1]
elseif QLO==4 then
set PS0[1]=PK0[3]
set PS0[2]=PK0[1]
set PS0[3]=PK0[4]
set PS0[4]=PK0[2]
elseif QLO==5 then
set PS0[1]=PK0[4]
set PS0[2]=PK0[3]
set PS0[3]=PK0[2]
set PS0[4]=PK0[5]
set PS0[5]=PK0[1]
endif
else
if QLO==1 then
set PS0[1]=PK0[1]
elseif QLO==2 then
set PS0[1]=PK0[1]
set PS0[2]=PK0[2]
elseif QLO==3 then
set PS0[1]=PK0[3]
set PS0[2]=PK0[2]
set PS0[3]=PK0[1]
elseif QLO==4 then
set PS0[1]=PK0[2]
set PS0[2]=PK0[4]
set PS0[3]=PK0[3]
set PS0[4]=PK0[1]
elseif QLO==5 then
set PS0[1]=PK0[5]
set PS0[2]=PK0[1]
set PS0[3]=PK0[3]
set PS0[4]=PK0[4]
set PS0[5]=PK0[2]
endif
endif
set i=1
loop
exitwhen i>QLO
set PK0[i]=PS0[i]
set i=i+1
endloop
set i=1
loop
exitwhen i>QLO
set PS0[i]=PL0[i]
set i=i+1
endloop
set x=GetRandomInt(1,3)
if x==1 then
if QLO==1 then
set PS0[1]=PL0[1]
elseif QLO==2 then
set PS0[1]=PL0[2]
set PS0[2]=PL0[1]
elseif QLO==3 then
set PS0[1]=PL0[3]
set PS0[2]=PL0[1]
set PS0[3]=PL0[2]
elseif QLO==4 then
set PS0[1]=PL0[4]
set PS0[2]=PL0[3]
set PS0[3]=PL0[2]
set PS0[4]=PL0[1]
elseif QLO==5 then
set PS0[1]=PL0[5]
set PS0[2]=PL0[4]
set PS0[3]=PL0[1]
set PS0[4]=PL0[2]
set PS0[5]=PL0[3]
endif
elseif x==2 then
if QLO==1 then
set PS0[1]=PL0[1]
elseif QLO==2 then
set PS0[1]=PL0[2]
set PS0[2]=PL0[1]
elseif QLO==3 then
set PS0[1]=PL0[2]
set PS0[2]=PL0[3]
set PS0[3]=PL0[1]
elseif QLO==4 then
set PS0[1]=PL0[3]
set PS0[2]=PL0[1]
set PS0[3]=PL0[4]
set PS0[4]=PL0[2]
elseif QLO==5 then
set PS0[1]=PL0[4]
set PS0[2]=PL0[3]
set PS0[3]=PL0[2]
set PS0[4]=PL0[5]
set PS0[5]=PL0[1]
endif
else
if QLO==1 then
set PS0[1]=PL0[1]
elseif QLO==2 then
set PS0[1]=PL0[1]
set PS0[2]=PL0[2]
elseif QLO==3 then
set PS0[1]=PL0[3]
set PS0[2]=PL0[2]
set PS0[3]=PL0[1]
elseif QLO==4 then
set PS0[1]=PL0[2]
set PS0[2]=PL0[4]
set PS0[3]=PL0[3]
set PS0[4]=PL0[1]
elseif QLO==5 then
set PS0[1]=PL0[5]
set PS0[2]=PL0[1]
set PS0[3]=PL0[3]
set PS0[4]=PL0[4]
set PS0[5]=PL0[2]
endif
endif
set i=1
loop
exitwhen i>QLO
set PL0[i]=PS0[i]
set i=i+1
endloop
set i=1
loop
exitwhen i>QLO
set PS0[i]=PM0[i]
set i=i+1
endloop
set x=GetRandomInt(1,3)
if x==1 then
if QLO==1 then
set PS0[1]=PM0[1]
elseif QLO==2 then
set PS0[1]=PM0[2]
set PS0[2]=PM0[1]
elseif QLO==3 then
set PS0[1]=PM0[3]
set PS0[2]=PM0[1]
set PS0[3]=PM0[2]
elseif QLO==4 then
set PS0[1]=PM0[4]
set PS0[2]=PM0[3]
set PS0[3]=PM0[2]
set PS0[4]=PM0[1]
elseif QLO==5 then
set PS0[1]=PM0[5]
set PS0[2]=PM0[4]
set PS0[3]=PM0[1]
set PS0[4]=PM0[2]
set PS0[5]=PM0[3]
endif
elseif x==2 then
if QLO==1 then
set PS0[1]=PM0[1]
elseif QLO==2 then
set PS0[1]=PM0[2]
set PS0[2]=PM0[1]
elseif QLO==3 then
set PS0[1]=PM0[2]
set PS0[2]=PM0[3]
set PS0[3]=PM0[1]
elseif QLO==4 then
set PS0[1]=PM0[3]
set PS0[2]=PM0[1]
set PS0[3]=PM0[4]
set PS0[4]=PM0[2]
elseif QLO==5 then
set PS0[1]=PM0[4]
set PS0[2]=PM0[3]
set PS0[3]=PM0[2]
set PS0[4]=PM0[5]
set PS0[5]=PM0[1]
endif
else
if QLO==1 then
set PS0[1]=PM0[1]
elseif QLO==2 then
set PS0[1]=PM0[1]
set PS0[2]=PM0[2]
elseif QLO==3 then
set PS0[1]=PM0[3]
set PS0[2]=PM0[2]
set PS0[3]=PM0[1]
elseif QLO==4 then
set PS0[1]=PM0[2]
set PS0[2]=PM0[4]
set PS0[3]=PM0[3]
set PS0[4]=PM0[1]
elseif QLO==5 then
set PS0[1]=PM0[5]
set PS0[2]=PM0[1]
set PS0[3]=PM0[3]
set PS0[4]=PM0[4]
set PS0[5]=PM0[2]
endif
endif
set i=1
loop
exitwhen i>QLO
set PM0[i]=PS0[i]
set i=i+1
endloop
set i=1
loop
exitwhen i>QLO
set PS0[i]=PN0[i]
set i=i+1
endloop
set x=GetRandomInt(1,3)
if x==1 then
if QLO==1 then
set PS0[1]=PN0[1]
elseif QLO==2 then
set PS0[1]=PN0[2]
set PS0[2]=PN0[1]
elseif QLO==3 then
set PS0[1]=PN0[3]
set PS0[2]=PN0[1]
set PS0[3]=PN0[2]
elseif QLO==4 then
set PS0[1]=PN0[4]
set PS0[2]=PN0[3]
set PS0[3]=PN0[2]
set PS0[4]=PN0[1]
elseif QLO==5 then
set PS0[1]=PN0[5]
set PS0[2]=PN0[4]
set PS0[3]=PN0[1]
set PS0[4]=PN0[2]
set PS0[5]=PN0[3]
endif
elseif x==2 then
if QLO==1 then
set PS0[1]=PN0[1]
elseif QLO==2 then
set PS0[1]=PN0[2]
set PS0[2]=PN0[1]
elseif QLO==3 then
set PS0[1]=PN0[2]
set PS0[2]=PN0[3]
set PS0[3]=PN0[1]
elseif QLO==4 then
set PS0[1]=PN0[3]
set PS0[2]=PN0[1]
set PS0[3]=PN0[4]
set PS0[4]=PN0[2]
elseif QLO==5 then
set PS0[1]=PN0[4]
set PS0[2]=PN0[3]
set PS0[3]=PN0[2]
set PS0[4]=PN0[5]
set PS0[5]=PN0[1]
endif
else
if QLO==1 then
set PS0[1]=PN0[1]
elseif QLO==2 then
set PS0[1]=PN0[1]
set PS0[2]=PN0[2]
elseif QLO==3 then
set PS0[1]=PN0[3]
set PS0[2]=PN0[2]
set PS0[3]=PN0[1]
elseif QLO==4 then
set PS0[1]=PN0[2]
set PS0[2]=PN0[4]
set PS0[3]=PN0[3]
set PS0[4]=PN0[1]
elseif QLO==5 then
set PS0[1]=PN0[5]
set PS0[2]=PN0[1]
set PS0[3]=PN0[3]
set PS0[4]=PN0[4]
set PS0[5]=PN0[2]
endif
endif
set i=1
loop
exitwhen i>QLO
set PN0[i]=PS0[i]
set i=i+1
endloop
set WCI=GetRandomInt(1,2)
if PT0>=PR0 and PT0>=PP0 then
call ClearTextMessages()
call JDI(bj_FORCE_ALL_PLAYERS,45,GetObjectName(1848653146)+" "+PQ0)
call JDI(bj_FORCE_ALL_PLAYERS,45," ")
set i=1
set x=1
loop
exitwhen i>5
if VTI(CO[i])then
if WCI==1 then
set L1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],PY0[x],UBI,bj_UNIT_FACING)
else
set L1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],PJ0[x],UBI,bj_UNIT_FACING)
endif
set x=x+1
endif
set i=i+1
endloop
set i=1
set x=1
loop
exitwhen i>5
if VTI(DO[i])then
if WCI==1 then
set L1[GetPlayerId(DO[i])]=CreateUnitAtLoc(DO[i],PJ0[x],UCI,bj_UNIT_FACING)
else
set L1[GetPlayerId(DO[i])]=CreateUnitAtLoc(DO[i],PY0[x],UCI,bj_UNIT_FACING)
endif
set x=x+1
endif
set i=i+1
endloop
elseif PR0>=PT0 and PR0>=PP0 then
call ClearTextMessages()
call JDI(bj_FORCE_ALL_PLAYERS,45,GetObjectName(1848653146)+" "+PU0)
call JDI(bj_FORCE_ALL_PLAYERS,45," ")
set i=1
set x=1
loop
exitwhen i>5
if VTI(CO[i])then
if WCI==1 then
set L1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],PK0[x],UBI,bj_UNIT_FACING)
else
set L1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],PL0[x],UBI,bj_UNIT_FACING)
endif
set x=x+1
endif
set i=i+1
endloop
set i=1
set x=1
loop
exitwhen i>5
if VTI(DO[i])then
if WCI==1 then
set L1[GetPlayerId(DO[i])]=CreateUnitAtLoc(DO[i],PL0[x],UCI,bj_UNIT_FACING)
else
set L1[GetPlayerId(DO[i])]=CreateUnitAtLoc(DO[i],PK0[x],UCI,bj_UNIT_FACING)
endif
set x=x+1
endif
set i=i+1
endloop
elseif PP0>=PT0 and PP0>=PR0 then
call ClearTextMessages()
call JDI(bj_FORCE_ALL_PLAYERS,45,GetObjectName(1848653146)+" "+Q00)
call JDI(bj_FORCE_ALL_PLAYERS,45," ")
set i=1
set x=1
loop
exitwhen i>5
if VTI(CO[i])then
if WCI==1 then
set L1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],PM0[x],UBI,bj_UNIT_FACING)
else
set L1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],PN0[x],UBI,bj_UNIT_FACING)
endif
set x=x+1
endif
set i=i+1
endloop
set i=1
set x=1
loop
exitwhen i>5
if VTI(DO[i])then
if WCI==1 then
set L1[GetPlayerId(DO[i])]=CreateUnitAtLoc(DO[i],PN0[x],UCI,bj_UNIT_FACING)
else
set L1[GetPlayerId(DO[i])]=CreateUnitAtLoc(DO[i],PM0[x],UCI,bj_UNIT_FACING)
endif
set x=x+1
endif
set i=i+1
endloop
endif
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,70,false)
call TriggerAddCondition(t,Condition(function QYO))
call RemoveLocation(UBI)
call RemoveLocation(UCI)
call RemoveLocation(QWO)
call RemoveLocation(QXO)
set UBI=null
set UCI=null
set QWO=null
set QXO=null
set t=null
set QKO=null
return false
endfunction
function QNO takes integer i returns integer
if i==1 then
return XXI(D80[GetRandomInt(1,D90)])
elseif i==2 then
return XXI(D40[GetRandomInt(1,D50)])
elseif i==3 then
return XXI(D60[GetRandomInt(1,D70)])
elseif i==4 then
return XXI(DC0[GetRandomInt(1,DD0)])
elseif i==5 then
return XXI(DA0[GetRandomInt(1,DB0)])
endif
return 0
endfunction
function QSO takes integer i returns integer
local integer X1I
local integer XOI
local integer XIO
set XIO=QNO(i)
if G2 then
return XIO
endif
loop
exitwhen T2[XIO]==false
set XIO=QNO(i)
endloop
set T2[XIO]=true
return XIO
endfunction
function QTO takes nothing returns nothing
local integer i=D10
loop
exitwhen i>D30
set T2[i]=false
set i=i+1
endloop
endfunction
function QRO takes nothing returns boolean
local integer QPO=GetPlayerId(GetTriggerPlayer())
local string QQO=SubString(GetEventPlayerChatString(),8,9)
local integer QUO=0
if QQO=="1"then
set QUO=1
elseif QQO=="2"then
set QUO=2
elseif QQO=="3"then
set QUO=3
endif
if QUO==0 then
call Y7I(GetTriggerPlayer(),GetObjectName(1848652612))
return false
endif
if(LoadBoolean(ZY,(2001),(950+QPO)))then
call Y7I(GetTriggerPlayer(),GetObjectName(1848652609))
return false
endif
call SaveBoolean(ZY,(2001),(950+QPO),(true))
if QUO==1 then
call SaveInteger(ZY,(2001),(126),(1+(LoadInteger(ZY,(2001),(126)))))
elseif QUO==2 then
call SaveInteger(ZY,(2001),(127),(1+(LoadInteger(ZY,(2001),(127)))))
else
call SaveInteger(ZY,(2001),(128),(1+(LoadInteger(ZY,(2001),(128)))))
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,20,GetObjectName(1848654157)+" Option "+I2S(QUO)+".")
return false
endfunction
function SAO takes nothing returns nothing
local integer QLO=W0I(AO)
local integer QMO=W0I(BO)
local integer i
local integer x
local trigger t=CreateTrigger()
local location UBI=GetRectCenter(G4)
local location UCI=GetRectCenter(F4)
local location QWO=GetRectCenter(A4)
local location QXO=GetRectCenter(T3)
local integer WCI
local trigger t2
set S2=true
set A3=false
set B3=false
call W7I()
call PanCameraToTimedLocForPlayer(CO[1],QWO,0)
call PanCameraToTimedLocForPlayer(CO[2],QWO,0)
call PanCameraToTimedLocForPlayer(CO[3],QWO,0)
call PanCameraToTimedLocForPlayer(CO[4],QWO,0)
call PanCameraToTimedLocForPlayer(CO[5],QWO,0)
call PanCameraToTimedLocForPlayer(DO[1],QXO,0)
call PanCameraToTimedLocForPlayer(DO[2],QXO,0)
call PanCameraToTimedLocForPlayer(DO[3],QXO,0)
call PanCameraToTimedLocForPlayer(DO[4],QXO,0)
call PanCameraToTimedLocForPlayer(DO[5],QXO,0)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-Option",false)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-Option",false)
call TriggerAddCondition(t,Condition(function QRO))
call QTO()
set i=1
loop
exitwhen i>QLO
set PY0[i]=D00[QSO(i)]
set PQ0=PQ0+GetObjectName(PY0[i])
set i=i+1
if i<=QLO then
set PQ0=PQ0+"|c005BFEEA-|r"
endif
endloop
set PQ0=PQ0+" |c00FF0000vs |r"
set i=1
loop
exitwhen i>QMO
set PJ0[i]=D00[QSO(i)]
set PQ0=PQ0+GetObjectName(PJ0[i])
set i=i+1
if i<=QMO then
set PQ0=PQ0+"|c005BFEEA-|r"
endif
endloop
call QTO()
set i=1
loop
exitwhen i>QLO
set PK0[i]=D00[QSO(i)]
set PU0=PU0+GetObjectName(PK0[i])+" "
set i=i+1
if i<=QLO then
set PU0=PU0+"|c005BFEEA-|r"
endif
endloop
set PU0=PU0+" |c00FF0000vs |r"
set i=1
loop
exitwhen i>QMO
set PL0[i]=D00[QSO(i)]
set PU0=PU0+GetObjectName(PL0[i])+" "
set i=i+1
if i<=QMO then
set PU0=PU0+"|c005BFEEA-|r"
endif
endloop
call QTO()
set i=1
loop
exitwhen i>QLO
set PM0[i]=D00[QSO(i)]
set Q00=Q00+GetObjectName(PM0[i])+" "
set i=i+1
if i<=QLO then
set Q00=Q00+"|c005BFEEA-|r"
endif
endloop
set Q00=Q00+" |c00FF0000vs |r"
set i=1
loop
exitwhen i>QMO
set PN0[i]=D00[QSO(i)]
set Q00=Q00+GetObjectName(PN0[i])+" "
set i=i+1
if i<=QMO then
set Q00=Q00+"|c005BFEEA-|r"
endif
endloop
call JDI(bj_FORCE_ALL_PLAYERS,75," ")
call JDI(bj_FORCE_ALL_PLAYERS,75,GetObjectName(1848653396))
call JDI(bj_FORCE_ALL_PLAYERS,75,GetObjectName(1848653385)+" "+GetObjectName(1848653380))
call JDI(bj_FORCE_ALL_PLAYERS,75," ")
call JDI(bj_FORCE_ALL_PLAYERS,75,PQ0)
call JDI(bj_FORCE_ALL_PLAYERS,75," ")
call JDI(bj_FORCE_ALL_PLAYERS,75,PU0)
call JDI(bj_FORCE_ALL_PLAYERS,75," ")
call JDI(bj_FORCE_ALL_PLAYERS,75,Q00)
set t2=CreateTrigger()
call TriggerRegisterTimerEvent(t2,30,false)
call TriggerAddCondition(t2,Condition(function QJO))
call SaveTriggerHandle(ZY,(GetHandleId(t2)),(35),(t))
call RemoveLocation(UBI)
call RemoveLocation(UCI)
call RemoveLocation(QWO)
call RemoveLocation(QXO)
set UBI=null
set UCI=null
set QWO=null
set QXO=null
set t=null
set t2=null
endfunction
function U0O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ZLI=GetTriggerEvalCount(t)
local integer Q1I=20-(ZLI-(ZLI/20)*20)
call LeaderboardSetLabel(Q30,"           "+GetObjectName(1848657242)+" "+I2S(Q1I))
if ZLI>125 then
call DestroyLeaderboard(Q30)
call L7O()
call ZSI(t)
endif
set t=null
return false
endfunction
function UIO takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function U0O))
set Q30=CreateLeaderboard()
call LeaderboardSetStyle(Q30,true,false,false,false)
call LeaderboardDisplay(Q30,false)
call PlayerSetLeaderboard(CO[1],Q30)
call PlayerSetLeaderboard(CO[2],Q30)
call PlayerSetLeaderboard(CO[3],Q30)
call PlayerSetLeaderboard(CO[4],Q30)
call PlayerSetLeaderboard(CO[5],Q30)
call PlayerSetLeaderboard(DO[1],Q30)
call PlayerSetLeaderboard(DO[2],Q30)
call PlayerSetLeaderboard(DO[3],Q30)
call PlayerSetLeaderboard(DO[4],Q30)
call PlayerSetLeaderboard(DO[5],Q30)
set t=null
endfunction
function U1O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer PIO=(LoadInteger(ZY,(V0I),(25)))
local player p1
local player p2
local player P1O
local player POO
if PIO==0 then
if QI0==1 then
set p1=CO[1]
else
set p1=DO[1]
endif
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p1)])
if GetLocalPlayer()==p1 then
call LeaderboardDisplay(Q30,true)
else
call LeaderboardDisplay(Q30,false)
endif
elseif PIO==1 then
if QI0==1 then
set p1=DO[1]
set p2=DO[2]
set P1O=CO[1]
else
set p1=CO[1]
set p2=CO[2]
set P1O=DO[1]
endif
call W4I(P1O)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p1)])
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p2)])
if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 then
call LeaderboardDisplay(Q30,true)
else
call LeaderboardDisplay(Q30,false)
endif
elseif PIO==2 then
if QI0==1 then
set p1=CO[2]
set p2=CO[3]
set P1O=DO[1]
set POO=DO[2]
else
set p1=DO[2]
set p2=DO[3]
set P1O=CO[1]
set POO=CO[2]
endif
call W4I(P1O)
call W4I(POO)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p1)])
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p2)])
if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 then
call LeaderboardDisplay(Q30,true)
else
call LeaderboardDisplay(Q30,false)
endif
elseif PIO==3 then
if QI0==1 then
set p1=DO[3]
set p2=DO[4]
set P1O=CO[2]
set POO=CO[3]
else
set p1=CO[3]
set p2=CO[4]
set P1O=DO[2]
set POO=DO[3]
endif
call W4I(P1O)
call W4I(POO)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p1)])
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p2)])
if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 then
call LeaderboardDisplay(Q30,true)
else
call LeaderboardDisplay(Q30,false)
endif
elseif PIO==4 then
if QI0==1 then
set p1=CO[4]
set p2=CO[5]
set P1O=DO[3]
set POO=DO[4]
else
set p1=DO[4]
set p2=DO[5]
set P1O=CO[3]
set POO=CO[4]
endif
call W4I(P1O)
call W4I(POO)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p1)])
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p2)])
if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 then
call LeaderboardDisplay(Q30,true)
else
call LeaderboardDisplay(Q30,false)
endif
elseif PIO==5 then
if QI0==1 then
set p1=DO[5]
set P1O=CO[4]
set POO=CO[5]
else
set p1=CO[5]
set P1O=DO[4]
set POO=DO[5]
endif
call W4I(P1O)
call W4I(POO)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q10[GetPlayerId(p1)])
if GetLocalPlayer()==p1 then
call LeaderboardDisplay(Q30,true)
else
call LeaderboardDisplay(Q30,false)
endif
elseif PIO==6 then
if QI0==1 then
set P1O=DO[5]
else
set P1O=CO[5]
endif
call W4I(P1O)
call LeaderboardDisplay(Q30,false)
call SuspendTimeOfDay(false)
endif
if PIO>6 then
set Q20=true
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SaveInteger(ZY,(V0I),(25),(PIO+1))
endif
set t=null
set p1=null
set p2=null
set P1O=null
set POO=null
return false
endfunction
function UOO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I
call ZSI(t)
call SuspendTimeOfDay(true)
set QI0=GetRandomInt(1,2)
call JDI(bj_FORCE_ALL_PLAYERS,15.00," ")
if QI0==1 then
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848653365)+"|r"+" "+GetObjectName(1848653366))
else
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(DO[0])]+GetObjectName(1848653379)+"|r"+" "+GetObjectName(1848653366))
endif
call JDI(bj_FORCE_ALL_PLAYERS,15.00," ")
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,20,true)
call TriggerAddCondition(t,Condition(function U1O))
call SaveInteger(ZY,(V0I),(25),(0))
call UIO()
call TriggerEvaluate(t)
set t=null
return false
endfunction
function SEO takes nothing returns nothing
local trigger t
local integer x=1
set QO0=true
set RK=180
set B3=false
set A3=false
call H8O()
set Q10[GetPlayerId(CO[1])]=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(CO[2])]=GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(CO[3])]=GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(CO[4])]=GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(CO[5])]=GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(DO[1])]=GetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(DO[2])]=GetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(DO[3])]=GetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(DO[4])]=GetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD)
set Q10[GetPlayerId(DO[5])]=GetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD,0)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(M),false)
call TriggerAddCondition(t,Condition(function UOO))
set t=null
endfunction
function U2O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ZLI=GetTriggerEvalCount(t)
local integer Q1I=20-(ZLI-(ZLI/20)*20)
call LeaderboardSetLabel(Q80,"           "+GetObjectName(1848657242)+" "+I2S(Q1I))
if ZLI>125 then
call DestroyLeaderboard(Q80)
call L7O()
call ZSI(t)
endif
set t=null
return false
endfunction
function U3O takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function U2O))
set Q80=CreateLeaderboard()
call LeaderboardSetStyle(Q80,true,false,false,false)
call LeaderboardDisplay(Q80,false)
call PlayerSetLeaderboard(CO[1],Q80)
call PlayerSetLeaderboard(CO[2],Q80)
call PlayerSetLeaderboard(CO[3],Q80)
call PlayerSetLeaderboard(CO[4],Q80)
call PlayerSetLeaderboard(CO[5],Q80)
call PlayerSetLeaderboard(DO[1],Q80)
call PlayerSetLeaderboard(DO[2],Q80)
call PlayerSetLeaderboard(DO[3],Q80)
call PlayerSetLeaderboard(DO[4],Q80)
call PlayerSetLeaderboard(DO[5],Q80)
set t=null
endfunction
function U4O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer PIO=(LoadInteger(ZY,(V0I),(25)))
local player p1
local player p2
local player P1O
local player POO
if PIO==0 then
if Q40==1 then
set p1=CO[1]
else
set p1=DO[1]
endif
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p1)])
if GetLocalPlayer()==p1 then
call LeaderboardDisplay(Q80,true)
else
call LeaderboardDisplay(Q80,false)
endif
elseif PIO==1 then
if Q40==1 then
set p1=DO[1]
set p2=DO[2]
set P1O=CO[1]
else
set p1=CO[1]
set p2=CO[2]
set P1O=DO[1]
endif
call W4I(P1O)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p1)])
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p2)])
if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 then
call LeaderboardDisplay(Q80,true)
else
call LeaderboardDisplay(Q80,false)
endif
elseif PIO==2 then
if Q40==1 then
set p1=CO[2]
set p2=CO[3]
set P1O=DO[1]
set POO=DO[2]
else
set p1=DO[2]
set p2=DO[3]
set P1O=CO[1]
set POO=CO[2]
endif
call W4I(P1O)
call W4I(POO)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p1)])
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p2)])
if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 then
call LeaderboardDisplay(Q80,true)
else
call LeaderboardDisplay(Q80,false)
endif
elseif PIO==3 then
if Q40==1 then
set p1=DO[3]
set p2=DO[4]
set P1O=CO[2]
set POO=CO[3]
else
set p1=CO[3]
set p2=CO[4]
set P1O=DO[2]
set POO=DO[3]
endif
call W4I(P1O)
call W4I(POO)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p1)])
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p2)])
if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 then
call LeaderboardDisplay(Q80,true)
else
call LeaderboardDisplay(Q80,false)
endif
elseif PIO==4 then
if Q40==1 then
set p1=CO[4]
set p2=CO[5]
set P1O=DO[3]
set POO=DO[4]
else
set p1=DO[4]
set p2=DO[5]
set P1O=CO[3]
set POO=CO[4]
endif
call W4I(P1O)
call W4I(POO)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(CR0[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p1)])
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p2)])
if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 then
call LeaderboardDisplay(Q80,true)
else
call LeaderboardDisplay(Q80,false)
endif
elseif PIO==5 then
if Q40==1 then
set p1=DO[5]
set P1O=CO[4]
set POO=CO[5]
else
set p1=CO[5]
set P1O=DO[4]
set POO=DO[5]
endif
call W4I(P1O)
call W4I(POO)
call JDI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(CR0[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))
call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,Q50[GetPlayerId(p1)])
if GetLocalPlayer()==p1 then
call LeaderboardDisplay(Q80,true)
else
call LeaderboardDisplay(Q80,false)
endif
elseif PIO==6 then
if Q40==1 then
set P1O=DO[5]
else
set P1O=CO[5]
endif
call W4I(P1O)
call LeaderboardDisplay(Q80,false)
call SuspendTimeOfDay(false)
endif
if PIO>6 then
set Q70=true
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SaveInteger(ZY,(V0I),(25),(PIO+1))
endif
set t=null
set p1=null
set p2=null
set P1O=null
set POO=null
return false
endfunction
function U5O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local trigger U6O=(LoadTriggerHandle(ZY,(V0I),(169)))
set NC0=true
call ZSI(U6O)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,20,true)
call TriggerAddCondition(t,Condition(function U4O))
call SaveInteger(ZY,(V0I),(25),(0))
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call EnableTrigger(E30)
call EnableTrigger(QM)
set Q40=GetRandomInt(1,2)
call JDI(bj_FORCE_ALL_PLAYERS,15.00," ")
if Q40==1 then
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848654159)+" "+GetObjectName(1848653131)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848653365)+"|r"+" "+GetObjectName(1848653366))
else
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848654159)+" "+GetObjectName(1848653131)+" "+C0[GetPlayerId(DO[0])]+GetObjectName(1848653379)+"|r"+" "+GetObjectName(1848653366))
endif
call JDI(bj_FORCE_ALL_PLAYERS,15.00," ")
call U3O()
call TriggerEvaluate(t)
set t=null
set U6O=null
return false
endfunction
function U7O takes nothing returns boolean
local unit V8I=GetSoldUnit()
local string U8O=C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(CR0[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r"
call JDI(bj_FORCE_ALL_PLAYERS,20,U8O+" "+GetObjectName(1848654153)+" "+GetUnitName(V8I)+" "+GetObjectName(1848654158))
call W2I(GetUnitTypeId(GetSoldUnit()))
call P7I("Ban"+I2S(GetPlayerId(GetOwningPlayer(GetSoldUnit()))),GetUnitTypeId(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
set V8I=null
return false
endfunction
function U9O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local trigger U6O=CreateTrigger()
local integer V0I
local string UAO=C0[GetPlayerId(CO[1])]+(CR0[GetPlayerId((CO[1]))])+"|r"
local string UBO=C0[GetPlayerId(DO[1])]+(CR0[GetPlayerId((DO[1]))])+"|r"
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
call JDI(bj_FORCE_ALL_PLAYERS,20.00,UAO+" "+GetObjectName(1848654155))
call JDI(bj_FORCE_ALL_PLAYERS,20.00,UBO+" "+GetObjectName(1848654155))
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
call ZSI(t)
call K7I(U6O,EVENT_PLAYER_UNIT_SELL)
call TriggerAddCondition(U6O,Condition(function U7O))
call SuspendTimeOfDay(true)
call DisableTrigger(E30)
call DisableTrigger(QM)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,1000)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,1000)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveTriggerHandle(ZY,(V0I),(169),(U6O))
call TriggerRegisterTimerEvent(t,20,false)
call TriggerAddCondition(t,Condition(function U5O))
set U6O=null
set t=null
return false
endfunction
function SFO takes nothing returns nothing
local trigger t
local location UBI=GetRectCenter(S4)
local location UCI=GetRectCenter(T4)
local integer x=1
loop
exitwhen x>5
if VTI(CO[x])then
call CreateUnitAtLoc(CO[x],1848651843,UCI,bj_UNIT_FACING)
endif
if VTI(DO[x])then
call CreateUnitAtLoc(DO[x],1848651843,UBI,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set Q60=true
set RK=180
set B3=false
set A3=false
set NC0=false
call H8O()
set Q50[GetPlayerId(CO[1])]=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(CO[2])]=GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(CO[3])]=GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(CO[4])]=GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(CO[5])]=GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(DO[1])]=GetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(DO[2])]=GetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(DO[3])]=GetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(DO[4])]=GetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD)
set Q50[GetPlayerId(DO[5])]=GetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD)
call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD,0)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(M),false)
call TriggerAddCondition(t,Condition(function U9O))
set t=null
set UBI=null
set UCI=null
endfunction
function UCO takes nothing returns boolean
local player VRI
set H3=true
set VRI=CO[1]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=CO[2]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=CO[3]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=CO[4]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=CO[5]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=DO[1]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=DO[2]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=DO[3]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=DO[4]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
set VRI=DO[5]
if(GetPlayerSlotState((VRI))==PLAYER_SLOT_STATE_EMPTY)==false and D3[GetPlayerId(VRI)]==false then
call X5I(VRI)
endif
return false
endfunction
function UDO takes nothing returns boolean
set A3=false
set B3=false
call W7I()
return false
endfunction
function SDO takes nothing returns nothing
local integer V0I=2000
local player array QLO
local player array QMO
local integer x=0
local integer y=0
local integer i=0
local trigger t=CreateTrigger()
set C3=true
call TriggerAddCondition(t,Condition(function UCO))
call TriggerRegisterTimerEvent(t,60-TimerGetElapsed(M),false)
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function UDO))
call TriggerRegisterTimerEvent(t,57-TimerGetElapsed(M),false)
set t=null
if VTI(CO[1])then
set x=x+1
set QLO[x]=CO[1]
endif
if VTI(CO[2])then
set x=x+1
set QLO[x]=CO[2]
endif
if VTI(CO[3])then
set x=x+1
set QLO[x]=CO[3]
endif
if VTI(CO[4])then
set x=x+1
set QLO[x]=CO[4]
endif
if VTI(CO[5])then
set x=x+1
set QLO[x]=CO[5]
endif
if VTI(DO[1])then
set y=y+1
set QMO[y]=DO[1]
endif
if VTI(DO[2])then
set y=y+1
set QMO[y]=DO[2]
endif
if VTI(DO[3])then
set y=y+1
set QMO[y]=DO[3]
endif
if VTI(DO[4])then
set y=y+1
set QMO[y]=DO[4]
endif
if VTI(DO[5])then
set y=y+1
set QMO[y]=DO[5]
endif
set i=1
loop
exitwhen i>x
call SavePlayerHandle(ZY,(2000),(550+GetPlayerId(QLO[i])),(QMO[i]))
call SavePlayerHandle(ZY,(2000),(550+GetPlayerId(QMO[i])),(QLO[i]))
set i=i+1
endloop
endfunction
function UFO takes nothing returns nothing
call YKI(GetEnumUnit())
endfunction
function UGO takes unit V8I returns nothing
local integer UHO=GetPlayerId(GetOwningPlayer(V8I))
set LO[UHO]=UnitItemInSlot(V8I,0)
set NO[UHO]=UnitItemInSlot(V8I,1)
set TO[UHO]=UnitItemInSlot(V8I,2)
set PO[UHO]=UnitItemInSlot(V8I,3)
set QO[UHO]=UnitItemInSlot(V8I,4)
set UO[UHO]=UnitItemInSlot(V8I,5)
endfunction
function UZO takes player X7I,player X8I returns integer
local unit UVO=L1[GetPlayerId(X7I)]
local unit UWO=L1[GetPlayerId(X8I)]
call UnitRemoveBuffs(UVO,true,true)
call UnitRemoveBuffs(UWO,true,true)
if UVO==null and UWO==null then
call JDI(bj_FORCE_ALL_PLAYERS,15,C0[GetPlayerId(CO[0])]+(CR0[GetPlayerId((X7I))])+" "+GetObjectName(1848653367)+" "+(CR0[GetPlayerId((X8I))])+" "+GetObjectName(1848656176)+"|r")
elseif GetRandomInt(1,2)==1 then
if(UVO!=null)then
return GetUnitTypeId(UVO)
else
return GetUnitTypeId(UWO)
endif
else
if(UWO!=null)then
return GetUnitTypeId(UWO)
else
return GetUnitTypeId(UVO)
endif
endif
call JDI(bj_FORCE_ALL_PLAYERS,15,C0[GetPlayerId(CO[0])]+(CR0[GetPlayerId((X7I))])+" "+GetObjectName(1848653367)+" "+(CR0[GetPlayerId((X8I))])+" "+GetObjectName(1848654146))
return WBI()
endfunction
function UXO takes nothing returns nothing
if(GetUnitTypeId(GetEnumUnit())==1848651828)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1865429043)then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function UYO takes nothing returns boolean
local integer W5I
local group UJO=ZJI()
local unit UKO
local location QWO=GetRectCenter(A4)
local location QXO=GetRectCenter(T3)
local integer ULO=W0I(AO)
local player array UMO
local player array UNO
local integer x
local integer y
local real USO
local real UTO
local real URO
local integer UPO
local group U4I=ZJI()
call GroupEnumUnitsInRect(U4I,GetWorldBounds(),Condition(function HRI))
call ForGroup(U4I,function UXO)
call ZYI(U4I)
set W5I=1
set x=1
set y=1
loop
exitwhen W5I>5
if(VTI(CO[W5I]))then
call UGO(L1[GetPlayerId(CO[W5I])])
call GroupAddUnit(UJO,L1[GetPlayerId(CO[W5I])])
set UMO[x]=CO[W5I]
set x=x+1
endif
if(VTI(DO[W5I]))then
call UGO(L1[GetPlayerId(DO[W5I])])
call GroupAddUnit(UJO,L1[GetPlayerId(DO[W5I])])
set UNO[y]=DO[W5I]
set y=y+1
endif
set W5I=W5I+1
endloop
set x=1
loop
exitwhen x>ULO
set UPO=UZO(UMO[x],UNO[x])
if(L1[GetPlayerId(UMO[x])]==null)then
set USO=GetLocationX(QWO)+GetRandomReal(1,40)
set UTO=GetLocationY(QWO)+GetRandomReal(1,40)
set URO=270
else
set USO=GetUnitX(L1[GetPlayerId(UMO[x])])
set UTO=GetUnitY(L1[GetPlayerId(UMO[x])])
set URO=GetUnitFacing(L1[GetPlayerId(UMO[x])])
call SetUnitPathing(L1[GetPlayerId(UMO[x])],false)
endif
set L1[GetPlayerId(UMO[x])]=CreateUnit(UMO[x],UPO,USO,UTO,URO)
call SetUnitPathing(L1[GetPlayerId(UMO[x])],false)
call SetUnitPosition(L1[GetPlayerId(UMO[x])],USO,UTO)
call UnitAddItem(L1[GetPlayerId(UMO[x])],LO[GetPlayerId(UMO[x])])
call UnitAddItem(L1[GetPlayerId(UMO[x])],NO[GetPlayerId(UMO[x])])
call UnitAddItem(L1[GetPlayerId(UMO[x])],TO[GetPlayerId(UMO[x])])
call UnitAddItem(L1[GetPlayerId(UMO[x])],PO[GetPlayerId(UMO[x])])
call UnitAddItem(L1[GetPlayerId(UMO[x])],QO[GetPlayerId(UMO[x])])
call UnitAddItem(L1[GetPlayerId(UMO[x])],UO[GetPlayerId(UMO[x])])
call ClearSelectionForPlayer(UMO[x])
call SelectUnitAddForPlayer(L1[GetPlayerId(UMO[x])],UMO[x])
call PanCameraToTimedForPlayer(UMO[x],USO,UTO,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",USO,UTO))
if(L1[GetPlayerId(UNO[x])]==null)then
set USO=GetLocationX(QXO)
set UTO=GetLocationY(QXO)
set URO=270
else
set USO=GetUnitX(L1[GetPlayerId(UNO[x])])
set UTO=GetUnitY(L1[GetPlayerId(UNO[x])])
set URO=GetUnitFacing(L1[GetPlayerId(UNO[x])])
call SetUnitPathing(L1[GetPlayerId(UNO[x])],false)
endif
set L1[GetPlayerId(UNO[x])]=CreateUnit(UNO[x],UPO,USO,UTO,URO)
call SetUnitPathing(L1[GetPlayerId(UNO[x])],false)
call SetUnitPosition(L1[GetPlayerId(UNO[x])],USO,UTO)
call UnitAddItem(L1[GetPlayerId(UNO[x])],LO[GetPlayerId(UNO[x])])
call UnitAddItem(L1[GetPlayerId(UNO[x])],NO[GetPlayerId(UNO[x])])
call UnitAddItem(L1[GetPlayerId(UNO[x])],TO[GetPlayerId(UNO[x])])
call UnitAddItem(L1[GetPlayerId(UNO[x])],PO[GetPlayerId(UNO[x])])
call UnitAddItem(L1[GetPlayerId(UNO[x])],QO[GetPlayerId(UNO[x])])
call UnitAddItem(L1[GetPlayerId(UNO[x])],UO[GetPlayerId(UNO[x])])
call ClearSelectionForPlayer(UNO[x])
call SelectUnitAddForPlayer(L1[GetPlayerId(UNO[x])],UNO[x])
call PanCameraToTimedForPlayer(UNO[x],USO,UTO,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",USO,UTO))
set x=x+1
endloop
call ForGroup(UJO,function UFO)
call ZYI(UJO)
set x=1
loop
exitwhen x>ULO
call SetUnitPathing(L1[GetPlayerId(UMO[x])],true)
call SetUnitPathing(L1[GetPlayerId(UNO[x])],true)
set x=x+1
endloop
call RemoveLocation(QWO)
call RemoveLocation(QXO)
set UJO=null
set UKO=null
set QWO=null
set QXO=null
set U4I=null
return false
endfunction
function UQO takes nothing returns boolean
set E2=true
return false
endfunction
function UUO takes nothing returns boolean
set B3=false
set A3=false
call W7I()
return false
endfunction
function SOO takes nothing returns nothing
local trigger t=CreateTrigger()
call JDI(Q2,10,GetObjectName(1848654152))
call JDI(Q2,10,GetObjectName(1848654149))
set F2=true
call W2I(1211117641)
call TriggerRegisterTimerEvent(t,60-TimerGetElapsed(M),false)
call TriggerAddCondition(t,Condition(function UYO))
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function UUO))
call TriggerRegisterTimerEvent(t,57-TimerGetElapsed(M),false)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,55+60-TimerGetElapsed(M),false)
call TriggerAddCondition(t,Condition(function UQO))
set t=null
endfunction
function SCO takes nothing returns nothing
local location UBI=GetRectCenter(G4)
local location UCI=GetRectCenter(F4)
local location QWO=GetRectCenter(A4)
local location QXO=GetRectCenter(T3)
local integer W5I
local integer W6I
local integer WCI
if not G2 then
call W7I()
endif
set J0=true
set T0=400
set A3=false
call PanCameraToTimedLocForPlayer(CO[1],QWO,0)
call PanCameraToTimedLocForPlayer(CO[2],QWO,0)
call PanCameraToTimedLocForPlayer(CO[3],QWO,0)
call PanCameraToTimedLocForPlayer(CO[4],QWO,0)
call PanCameraToTimedLocForPlayer(CO[5],QWO,0)
call PanCameraToTimedLocForPlayer(DO[1],QXO,0)
call PanCameraToTimedLocForPlayer(DO[2],QXO,0)
call PanCameraToTimedLocForPlayer(DO[3],QXO,0)
call PanCameraToTimedLocForPlayer(DO[4],QXO,0)
call PanCameraToTimedLocForPlayer(DO[5],QXO,0)
if J2 then
if VLI(XO)then
loop
set WCI=GetRandomInt(D10,DO0)
exitwhen R[WCI]==false
endloop
set L1[GetPlayerId(XO)]=CreateUnit(XO,D00[WCI],GetLocationX(UBI),GetLocationY(UBI),270)
else
loop
set WCI=GetRandomInt(D20,D30)
exitwhen R[WCI]==false
endloop
set L1[GetPlayerId(XO)]=CreateUnit(XO,D00[WCI],GetLocationX(UCI),GetLocationY(UCI),270)
endif
call RemoveLocation(UBI)
call RemoveLocation(UCI)
call RemoveLocation(QWO)
call RemoveLocation(QXO)
return
endif
set B3=false
set W5I=1
set W6I=5
loop
exitwhen W5I>W6I
set L1[GetPlayerId(CO[W5I])]=null
if(VTI(CO[W5I]))then
loop
set WCI=GetRandomInt(D10,DO0)
if(R[WCI]==false)then
if not G2 then
set R[WCI]=true
endif
set L1[GetPlayerId(CO[W5I])]=CreateUnitAtLoc(CO[W5I],D00[WCI],UBI,bj_UNIT_FACING)
endif
exitwhen(L1[GetPlayerId(CO[W5I])]!=null)
endloop
endif
set W5I=W5I+1
endloop
set W5I=1
set W6I=5
loop
exitwhen W5I>W6I
set L1[GetPlayerId(DO[W5I])]=null
if(VTI(DO[W5I]))then
loop
set WCI=GetRandomInt(D20,D30)
if(R[WCI]==false)then
if not G2 then
set R[WCI]=true
endif
set L1[GetPlayerId(DO[W5I])]=CreateUnitAtLoc(DO[W5I],D00[WCI],UCI,bj_UNIT_FACING)
endif
exitwhen(L1[GetPlayerId(DO[W5I])]!=null)
endloop
endif
set W5I=W5I+1
endloop
set B3=true
call RemoveLocation(UBI)
call RemoveLocation(UCI)
call RemoveLocation(QWO)
call RemoveLocation(QXO)
endfunction
function I12 takes nothing returns nothing
set DL=true
call JDI(bj_FORCE_ALL_PLAYERS,10,GetObjectName(1848653387)+" "+GetObjectName(1848653388))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function IO2 takes nothing returns nothing
local integer I22=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
if I22>EL then
call Y3I(XO,GetObjectName(1848652611))
elseif I22<10 then
call Y3I(XO,GetObjectName(1848652361))
else
set EL=I22
call JDI(bj_FORCE_ALL_PLAYERS,10,GetObjectName(1848653400)+" "+I2S(EL)+" "+GetObjectName(1848653390))
call DisableTrigger(GetTriggeringTrigger())
endif
endfunction
function I32 takes nothing returns nothing
call DisableTrigger((LoadTriggerHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(170))))
call DisableTrigger((LoadTriggerHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(171))))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function I42 takes nothing returns nothing
local trigger I52=CreateTrigger()
local trigger I62=CreateTrigger()
local trigger nd=CreateTrigger()
set EL=YSI(DO0,D30-D20+1)
call JDI(bj_FORCE_ALL_PLAYERS,10.00," ")
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653391)+" -nd "+GetObjectName(1848653367)+" -lives xx "+GetObjectName(1848653393))
call JDI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653360)+" "+I2S(EL))
call TriggerRegisterTimerEvent(I52,15,false)
call TriggerAddAction(I52,function I32)
call SaveTriggerHandle(ZY,(GetHandleId(I52)),(170),(nd))
call SaveTriggerHandle(ZY,(GetHandleId(I52)),(171),(I62))
call TriggerRegisterPlayerChatEvent(nd,XO,"-nd",true)
call TriggerAddAction(nd,function I12)
call TriggerRegisterPlayerChatEvent(I62,XO,"-lives",false)
call TriggerAddAction(I62,function IO2)
endfunction
function I72 takes nothing returns nothing
local integer I82=(LoadInteger(ZY,(GetHandleId(GetTriggeringTrigger())),(173)))
local integer W5I
local integer W6I
local integer WCI
local integer LWI
local location UBI=GetRectCenter(S4)
local location UCI=GetRectCenter(T4)
if U2 then
return
endif
if VLI(Player(I82))then
set W5I=D10
set W6I=DO0
set LWI=0
else
set W5I=D20
set W6I=D30
set LWI=1
endif
if K0 then
set W5I=D10
set W6I=D30
if VLI(Player(I82))then
call CreateUnitAtLoc(Player(I82),1848651843,UBI,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(I82),1848651843,UCI,bj_UNIT_FACING)
else
call CreateUnitAtLoc(Player(I82),1848651843,UBI,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(I82),1848651843,UCI,bj_UNIT_FACING)
endif
else
set W5I=D10
set W6I=D30
if VLI(Player(I82))then
call CreateUnitAtLoc(Player(I82),1848651843,UBI,bj_UNIT_FACING)
else
call CreateUnitAtLoc(Player(I82),1848651843,UCI,bj_UNIT_FACING)
endif
endif
if not Y0 then
loop
exitwhen W5I>W6I
if R[W5I]==false then
call SetPlayerTechMaxAllowed(Player(I82),D00[W5I],1)
endif
set W5I=W5I+1
endloop
if(GetPlayerState(Player(I82),PLAYER_STATE_RESOURCE_GOLD)<250)then
call SetPlayerState(Player(I82),PLAYER_STATE_RESOURCE_GOLD,250)
endif
elseif(R1[LWI]<EL)then
set L1[I82]=null
if VTI(Player(I82))then
loop
set WCI=WBI()
if R[WCI]==false then
set R[WCI]=true
if VLI(Player(I82))then
set L1[I82]=CreateUnitAtLoc(Player(I82),D00[WCI],UBI,bj_UNIT_FACING)
else
set L1[I82]=CreateUnitAtLoc(Player(I82),D00[WCI],UCI,bj_UNIT_FACING)
endif
endif
exitwhen L1[I82]!=null
endloop
endif
endif
call RemoveLocation(UBI)
call RemoveLocation(UCI)
if not Y0 then
endif
endfunction
function S1O takes nothing returns nothing
local location YV1
local real I92
local trigger t
local integer IA2
local integer x
set X0=true
call W2I(1211117641)
set x=1
loop
exitwhen x>5
set IA2=GetPlayerId(CO[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,F0[IA2])
call TriggerAddAction(t,function I72)
call SaveInteger(ZY,(GetHandleId(t)),(173),(IA2))
set IA2=GetPlayerId(DO[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,F0[IA2])
call TriggerAddAction(t,function I72)
call SaveInteger(ZY,(GetHandleId(t)),(173),(IA2))
set x=x+1
endloop
call UnitRemoveAbility(CF0,1096906593)
call UnitRemoveAbility(CG0,1096906593)
call UnitRemoveAbility(CH0,1096906593)
call UnitRemoveAbility(CZ0,1096906593)
call UnitRemoveAbility(CV0,1096906593)
call UnitRemoveAbility(CW0,1096906593)
call UnitRemoveAbility(CX0,1096906593)
call UnitRemoveAbility(CY0,1096906593)
call UnitRemoveAbility(CJ0,1096906593)
call UnitRemoveAbility(CK0,1096906593)
call ExecuteFunc("I42")
endfunction
function SVO takes nothing returns nothing
local integer Q2O=GetRandomInt(1,4)
set H2=true
if(Q2O==1)then
call JDI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657476))
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
call ExecuteFunc("SHO")
endif
if(Q2O==2)then
call JDI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657477))
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
call ExecuteFunc("SZO")
endif
if(Q2O==3)then
call JDI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657483))
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
call ExecuteFunc("SAO")
endif
if(Q2O==4)then
call JDI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657485))
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
call ExecuteFunc("S4O")
call ExecuteFunc("S9O")
endif
endfunction
function S8O takes nothing returns nothing
set G2=true
call W2I(1211117641)
endfunction
function NUO takes nothing returns nothing
local integer UAI=W0I(AO)
local integer U9I=W0I(BO)
local integer J1I=UAI+U9I
local integer W5I
local integer ID2
local integer x
local integer y
local integer z
local player array IE2
local player array IF2
local integer w
local integer IG2
local integer IH2
local location QWO=GetRectCenter(A4)
local location QXO=GetRectCenter(T3)
local location UBI=GetRectCenter(S4)
local location UCI=GetRectCenter(T4)
set GO=true
call VD1(CO[1])
call VD1(CO[2])
call VD1(CO[3])
call VD1(CO[4])
call VD1(CO[5])
call VD1(DO[1])
call VD1(DO[2])
call VD1(DO[3])
call VD1(DO[4])
call VD1(DO[5])
set x=1
loop
exitwhen x>5
if VTI(CO[x])then
call CreateUnitAtLoc(CO[x],1848651843,UBI,bj_UNIT_FACING)
call CreateUnitAtLoc(CO[x],1848651843,UCI,bj_UNIT_FACING)
endif
if VTI(DO[x])then
call CreateUnitAtLoc(DO[x],1848651843,UBI,bj_UNIT_FACING)
call CreateUnitAtLoc(DO[x],1848651843,UCI,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set IG2=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)
set IH2=GetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD)
set IE2[1]=null
set IE2[2]=null
set IE2[3]=null
set IE2[4]=null
set IE2[5]=null
set IE2[6]=null
set IE2[7]=null
set IE2[8]=null
set IE2[9]=null
set IE2[10]=null
set z=1
set w=1
set W5I=1
loop
exitwhen W5I>5
if(VTI(CO[W5I]))then
set IE2[w]=CO[W5I]
set w=w+1
else
set IF2[z]=CO[W5I]
set z=z+1
endif
set W5I=W5I+1
endloop
set W5I=1
loop
exitwhen W5I>5
if(VTI(DO[W5I]))then
set IE2[w]=DO[W5I]
set w=w+1
else
set IF2[z]=DO[W5I]
set z=z+1
endif
set W5I=W5I+1
endloop
set CO[1]=null
set CO[2]=null
set CO[3]=null
set CO[4]=null
set CO[5]=null
set DO[1]=null
set DO[2]=null
set DO[3]=null
set DO[4]=null
set DO[5]=null
set W5I=1
loop
exitwhen W5I>(J1I/2)
set ID2=GetRandomInt(1,J1I)
if(IE2[ID2]!=null)then
set CO[W5I]=IE2[ID2]
set IE2[ID2]=null
set W5I=W5I+1
endif
endloop
set x=W5I
set W5I=1
loop
exitwhen W5I>J1I-x+1
set ID2=GetRandomInt(1,J1I)
if(IE2[ID2]!=null)then
set DO[W5I]=IE2[ID2]
set IE2[ID2]=null
set W5I=W5I+1
endif
endloop
set z=W5I
set W5I=x
set y=1
loop
exitwhen W5I>5
set CO[W5I]=IF2[y]
set y=y+1
set W5I=W5I+1
endloop
set W5I=z
loop
exitwhen W5I>5
set DO[W5I]=IF2[y]
set y=y+1
set W5I=W5I+1
endloop
set W5I=0
loop
exitwhen W5I>5
set W5I=W5I+1
endloop
call SetPlayerTeam(CO[0],0)
call SetPlayerTeam(CO[1],0)
call SetPlayerTeam(CO[2],0)
call SetPlayerTeam(CO[3],0)
call SetPlayerTeam(CO[4],0)
call SetPlayerTeam(CO[5],0)
call SetPlayerTeam(DO[0],1)
call SetPlayerTeam(DO[1],1)
call SetPlayerTeam(DO[2],1)
call SetPlayerTeam(DO[3],1)
call SetPlayerTeam(DO[4],1)
call SetPlayerTeam(DO[5],1)
call UII()
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
call SetPlayerAllianceStateBJ(CO[x],CO[y],3)
call SetPlayerAllianceStateBJ(DO[x],DO[y],3)
call SetPlayerAllianceStateBJ(CO[x],DO[y],0)
call SetPlayerAllianceStateBJ(DO[x],CO[y],0)
set y=y+1
endloop
set y=0
set x=x+1
endloop
call ForceClear(AO)
call ForceClear(BO)
call ForceAddPlayer(AO,CO[0])
call ForceAddPlayer(AO,CO[1])
call ForceAddPlayer(AO,CO[2])
call ForceAddPlayer(AO,CO[3])
call ForceAddPlayer(AO,CO[4])
call ForceAddPlayer(AO,CO[5])
call ForceAddPlayer(BO,DO[0])
call ForceAddPlayer(BO,DO[1])
call ForceAddPlayer(BO,DO[2])
call ForceAddPlayer(BO,DO[3])
call ForceAddPlayer(BO,DO[4])
call ForceAddPlayer(BO,DO[5])
call ExecuteFunc("U1I")
call CRO()
set UAI=W0I(AO)
set U9I=W0I(BO)
set W5I=1
loop
exitwhen W5I>5
if(VTI(CO[W5I]))then
call SetPlayerStateBJ(CO[W5I],PLAYER_STATE_RESOURCE_GOLD,(4265/UAI))
call SetPlayerStateBJ(CO[W5I],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(VTI(DO[W5I]))then
call SetPlayerStateBJ(DO[W5I],PLAYER_STATE_RESOURCE_GOLD,(4265/U9I))
call SetPlayerStateBJ(DO[W5I],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set W5I=W5I+1
endloop
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
if D2 then
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),DO[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),DO[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call U0I()
set QWO=null
set QXO=null
set UBI=null
set UCI=null
endfunction
function S0O takes nothing returns nothing
local integer UAI=W0I(AO)
local integer U9I=W0I(BO)
local integer J1I=UAI+U9I
local integer W5I
local integer ID2
local integer x
local integer y
local integer z
local player array IE2
local player array IF2
local integer w
local integer IG2
local integer IH2
local location QWO
local location QXO
local location UBI
local location UCI
local integer IV2
set IV2=GetRandomInt(1,2)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,GetObjectName(1848657753))
if IV2==1 then
return
endif
set Q90=true
set QWO=GetRectCenter(A4)
set QXO=GetRectCenter(T3)
set UBI=GetRectCenter(S4)
set UCI=GetRectCenter(T4)
call VD1(CO[1])
call VD1(CO[2])
call VD1(CO[3])
call VD1(CO[4])
call VD1(CO[5])
call VD1(DO[1])
call VD1(DO[2])
call VD1(DO[3])
call VD1(DO[4])
call VD1(DO[5])
set x=1
loop
exitwhen x>5
if VTI(CO[x])then
call CreateUnitAtLoc(CO[x],1848651843,UBI,bj_UNIT_FACING)
call CreateUnitAtLoc(CO[x],1848651843,UCI,bj_UNIT_FACING)
endif
if VTI(DO[x])then
call CreateUnitAtLoc(DO[x],1848651843,UBI,bj_UNIT_FACING)
call CreateUnitAtLoc(DO[x],1848651843,UCI,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(UBI)
call RemoveLocation(UCI)
set IG2=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)
set IH2=GetPlayerState(DO[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(DO[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(DO[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(DO[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(DO[5],PLAYER_STATE_RESOURCE_GOLD)
set IE2[1]=CO[1]
set IE2[2]=CO[2]
set IE2[3]=CO[3]
set IE2[4]=CO[4]
set IE2[5]=CO[5]
set IE2[6]=DO[1]
set IE2[7]=DO[2]
set IE2[8]=DO[3]
set IE2[9]=DO[4]
set IE2[10]=DO[5]
set CO[1]=IE2[6]
set CO[2]=IE2[7]
set CO[3]=IE2[8]
set CO[4]=IE2[9]
set CO[5]=IE2[10]
set DO[1]=IE2[1]
set DO[2]=IE2[2]
set DO[3]=IE2[3]
set DO[4]=IE2[4]
set DO[5]=IE2[5]
call SetPlayerTeam(CO[0],0)
call SetPlayerTeam(CO[1],0)
call SetPlayerTeam(CO[2],0)
call SetPlayerTeam(CO[3],0)
call SetPlayerTeam(CO[4],0)
call SetPlayerTeam(CO[5],0)
call SetPlayerTeam(DO[0],1)
call SetPlayerTeam(DO[1],1)
call SetPlayerTeam(DO[2],1)
call SetPlayerTeam(DO[3],1)
call SetPlayerTeam(DO[4],1)
call SetPlayerTeam(DO[5],1)
call UII()
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
call SetPlayerAllianceStateBJ(CO[x],CO[y],3)
call SetPlayerAllianceStateBJ(DO[x],DO[y],3)
call SetPlayerAllianceStateBJ(CO[x],DO[y],0)
call SetPlayerAllianceStateBJ(DO[x],CO[y],0)
set y=y+1
endloop
set y=0
set x=x+1
endloop
call ForceClear(AO)
call ForceClear(BO)
call ForceAddPlayer(AO,CO[0])
call ForceAddPlayer(AO,CO[1])
call ForceAddPlayer(AO,CO[2])
call ForceAddPlayer(AO,CO[3])
call ForceAddPlayer(AO,CO[4])
call ForceAddPlayer(AO,CO[5])
call ForceAddPlayer(BO,DO[0])
call ForceAddPlayer(BO,DO[1])
call ForceAddPlayer(BO,DO[2])
call ForceAddPlayer(BO,DO[3])
call ForceAddPlayer(BO,DO[4])
call ForceAddPlayer(BO,DO[5])
call ExecuteFunc("U1I")
set UAI=W0I(AO)
set U9I=W0I(BO)
set W5I=1
loop
exitwhen W5I>5
if(VTI(CO[W5I]))then
call SetPlayerStateBJ(CO[W5I],PLAYER_STATE_RESOURCE_GOLD,(4265/UAI))
call SetPlayerStateBJ(CO[W5I],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(VTI(DO[W5I]))then
call SetPlayerStateBJ(DO[W5I],PLAYER_STATE_RESOURCE_GOLD,(4265/U9I))
call SetPlayerStateBJ(DO[W5I],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set W5I=W5I+1
endloop
call PanCameraToTimedLocForPlayer(CO[1],QWO,0)
call PanCameraToTimedLocForPlayer(CO[2],QWO,0)
call PanCameraToTimedLocForPlayer(CO[3],QWO,0)
call PanCameraToTimedLocForPlayer(CO[4],QWO,0)
call PanCameraToTimedLocForPlayer(CO[5],QWO,0)
call PanCameraToTimedLocForPlayer(DO[1],QXO,0)
call PanCameraToTimedLocForPlayer(DO[2],QXO,0)
call PanCameraToTimedLocForPlayer(DO[3],QXO,0)
call PanCameraToTimedLocForPlayer(DO[4],QXO,0)
call PanCameraToTimedLocForPlayer(DO[5],QXO,0)
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,DO[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
if D2 then
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),DO[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),DO[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call U0I()
call CRO()
set QWO=null
set QXO=null
set UBI=null
set UCI=null
endfunction
function S3O takes nothing returns nothing
local integer W5I
local integer W6I
set Z2=true
set W5I=1
set W6I=D90
loop
exitwhen W5I>W6I
call W2I(D80[W5I])
set W5I=W5I+1
endloop
set W5I=1
set W6I=D70
loop
exitwhen W5I>W6I
call W2I(D60[W5I])
set W5I=W5I+1
endloop
endfunction
function IX2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer VAI=(LoadInteger(ZY,(V0I),(172)))
local player VRI
local integer x=1
loop
exitwhen x>5
set VRI=CO[x]
if VTI(VRI)and VRI!=XO then
set L1[GetPlayerId(VRI)]=CreateUnit(VRI,VAI,GetRectCenterX(A4),GetRectCenterY(A4),270)
endif
set VRI=DO[x]
if VTI(VRI)and VRI!=XO then
set L1[GetPlayerId(VRI)]=CreateUnit(VRI,VAI,GetRectCenterX(T3),GetRectCenterY(T3),270)
endif
set x=x+1
endloop
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set VRI=null
return false
endfunction
function IY2 takes nothing returns nothing
local integer x=1
local player VRI
local unit V8I=GetTriggerUnit()
local integer VAI=GetUnitTypeId(V8I)
local trigger t
local integer V0I
if(GetOwningPlayer(V8I)==XO and IsUnitType(V8I,UNIT_TYPE_HERO)==true)then
call DisableTrigger(GetTriggeringTrigger())
if S0[GetPlayerId(XO)]==false and Y0==false and J0==false then
call SetPlayerState(XO,PLAYER_STATE_RESOURCE_GOLD,250+GetPlayerState(XO,PLAYER_STATE_RESOURCE_GOLD))
endif
set D0[GetPlayerId(XO)]=true
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.01,false)
call TriggerAddCondition(t,Condition(function IX2))
call SaveInteger(ZY,(V0I),(172),(VAI))
endif
set VRI=null
set V8I=null
set t=null
endfunction
function S2O takes nothing returns nothing
local integer x=1
local trigger t=CreateTrigger()
local region r=CreateRegion()
set J2=true
call W2I(1211117641)
loop
exitwhen x>5
if(CO[x]!=XO)then
call W4I(CO[x])
set S0[GetPlayerId(CO[x])]=true
set D0[GetPlayerId(CO[x])]=true
endif
if(DO[x]!=XO)then
call W4I(DO[x])
set S0[GetPlayerId(DO[x])]=true
set D0[GetPlayerId(DO[x])]=true
endif
set x=x+1
endloop
call RegionAddRect(r,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,r,Condition(function HRI))
call TriggerAddAction(t,function IY2)
endfunction
function S5O takes nothing returns nothing
local integer W5I
local integer W6I
set W2=true
set W5I=1
set W6I=D90
loop
exitwhen W5I>W6I
call W2I(D80[W5I])
set W5I=W5I+1
endloop
set W5I=1
set W6I=D50
loop
exitwhen W5I>W6I
call W2I(D40[W5I])
set W5I=W5I+1
endloop
endfunction
function S4O takes nothing returns nothing
local integer W5I
local integer W6I
set V2=true
set W5I=1
set W6I=D50
loop
exitwhen W5I>W6I
call W2I(D40[W5I])
set W5I=W5I+1
endloop
set W5I=1
set W6I=D70
loop
exitwhen W5I>W6I
call W2I(D60[W5I])
set W5I=W5I+1
endloop
endfunction
function S7O takes nothing returns nothing
local integer W5I
local integer W6I
set QA0=true
set W5I=1
set W6I=DB0
loop
exitwhen W5I>W6I
call W2I(DA0[W5I])
set W5I=W5I+1
endloop
endfunction
function S6O takes nothing returns nothing
local integer W5I
local integer W6I
set QB0=true
set W5I=1
set W6I=DD0
loop
exitwhen W5I>W6I
call W2I(DC0[W5I])
set W5I=W5I+1
endloop
endfunction
function SWO takes nothing returns nothing
set L0=true
endfunction
function SJO takes nothing returns nothing
set R0=true
call SetPlayerTechResearched(CO[0],1378889780,1)
call SetPlayerTechResearched(DO[0],1378889780,1)
call SetPlayerHandicapXP(CO[1],1.5)
call SetPlayerHandicapXP(CO[2],1.5)
call SetPlayerHandicapXP(CO[3],1.5)
call SetPlayerHandicapXP(CO[4],1.5)
call SetPlayerHandicapXP(CO[5],1.5)
call SetPlayerHandicapXP(DO[1],1.5)
call SetPlayerHandicapXP(DO[2],1.5)
call SetPlayerHandicapXP(DO[3],1.5)
call SetPlayerHandicapXP(DO[4],1.5)
call SetPlayerHandicapXP(DO[5],1.5)
endfunction
function SXO takes nothing returns nothing
set P0=true
call DisableTrigger(XW0)
endfunction
function SYO takes nothing returns nothing
set Q0=true
endfunction
function IR2 takes nothing returns nothing
set QD0=false
call JDI(bj_FORCE_ALL_PLAYERS,10,GetObjectName(1848657985))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function IP2 takes nothing returns nothing
call DisableTrigger((LoadTriggerHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(174))))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function IQ2 takes nothing returns nothing
local trigger I52=CreateTrigger()
local trigger nn=CreateTrigger()
call JDI(bj_FORCE_ALL_PLAYERS,10.00," ")
call JDI(bj_FORCE_ALL_PLAYERS,10.00,"Extra commands: -noneutrals can be entered in the following 15 seconds. ")
call TriggerRegisterTimerEvent(I52,15,false)
call TriggerAddAction(I52,function IP2)
call SaveTriggerHandle(ZY,(GetHandleId(I52)),(174),(nn))
call TriggerRegisterPlayerChatEvent(nn,XO,"-noneutrals",true)
call TriggerAddAction(nn,function IR2)
endfunction
function SKO takes nothing returns nothing
set QC0=true
call ExecuteFunc("IQ2")
endfunction
function SLO takes nothing returns nothing
set QE0=true
endfunction
function SIO takes nothing returns nothing
set QF0=true
endfunction
function SNO takes nothing returns nothing
set QG0=true
endfunction
function SMO takes nothing returns nothing
set QH0=true
endfunction
function STO takes nothing returns nothing
set IL=true
set OL=false
endfunction
function SRO takes nothing returns nothing
set QZ0=true
endfunction
function SSO takes nothing returns nothing
set CL=true
set FL=true
endfunction
function SPO takes nothing returns nothing
set BL=true
endfunction
function O32 takes nothing returns nothing
local integer i=0
loop
exitwhen i>5
call SetPlayerName(CO[i],(CR0[GetPlayerId((CO[i]))])+" ("+I2S(I[GetPlayerId(CO[i])])+"/"+I2S(O[GetPlayerId(CO[i])])+" | "+I2S(A[GetPlayerId(CO[i])])+"-"+I2S(B[GetPlayerId(CO[i])])+")")
call SetPlayerName(DO[i],(CR0[GetPlayerId((DO[i]))])+" ("+I2S(I[GetPlayerId(DO[i])])+"/"+I2S(O[GetPlayerId(DO[i])])+" | "+I2S(A[GetPlayerId(DO[i])])+"-"+I2S(B[GetPlayerId(DO[i])])+")")
set i=i+1
endloop
endfunction
function O42 takes nothing returns boolean
if QV0==false then
if GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0 then
call O32()
endif
endif
return false
endfunction
function SQO takes nothing returns nothing
set QV0=true
endfunction
function O62 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
call SetUnitScale(V8I,VZI(V8I)*QW0,VZI(V8I)*QW0,VZI(V8I)*QW0)
set V8I=null
endfunction
function O72 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call O62()
endif
return false
endfunction
function SUO takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function O72))
set QX0=true
set QW0=0.5
endfunction
function T0O takes nothing returns nothing
set QY0=true
endfunction
function TIO takes nothing returns nothing
set AL=true
endfunction
function O92 takes nothing returns boolean
if GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0 then
if GetTriggerEvalCount(GetTriggeringTrigger())==1 then
call CameraSetupSetDestPosition(QK0,0,0,0.0)
else
call CameraSetupSetDestPosition(QK0,GetCameraTargetPositionX(),GetCameraTargetPositionY(),0.0)
endif
call CameraSetupApplyForPlayer(true,QK0,GetLocalPlayer(),0)
call SetTerrainFogEx(0,0.0,100000.0,0.500,0.353,0.314,0.235)
endif
return false
endfunction
function TOO takes nothing returns nothing
local trigger t=CreateTrigger()
set QJ0=true
set QK0=CreateCameraSetup()
call CameraSetupSetField(QK0,CAMERA_FIELD_ZOFFSET,0.0,0.0)
call CameraSetupSetField(QK0,CAMERA_FIELD_ROTATION,90.0,0.0)
call CameraSetupSetField(QK0,CAMERA_FIELD_ANGLE_OF_ATTACK,304.0,0.0)
call CameraSetupSetField(QK0,CAMERA_FIELD_TARGET_DISTANCE,2500.0,0.0)
call CameraSetupSetField(QK0,CAMERA_FIELD_ROLL,0.0,0.0)
call CameraSetupSetField(QK0,CAMERA_FIELD_FIELD_OF_VIEW,70.0,0.0)
call CameraSetupSetField(QK0,CAMERA_FIELD_FARZ,16000.0,0.0)
call CameraSetupSetDestPosition(QK0,0.0,0.0,0.0)
call TriggerRegisterTimerEvent(t,180,true)
call TriggerRegisterTimerEvent(t,0.1,false)
call TriggerAddCondition(t,Condition(function O92))
set t=null
endfunction
function OA2 takes nothing returns boolean
return VLI(GetOwningPlayer(GetFilterUnit()))and XVI(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())!=1211117642
endfunction
function OB2 takes nothing returns boolean
return VNI(GetOwningPlayer(GetFilterUnit()))and XVI(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())!=1211117642
endfunction
function OC2 takes nothing returns nothing
local unit u=GetEnumUnit()
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+200)
call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+200)
call SetPlayerState(GetOwningPlayer(u),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(u),PLAYER_STATE_RESOURCE_GOLD)+150)
call AddHeroXP(u,248,true)
set u=null
endfunction
function OD2 takes integer i,integer RDO,integer r,integer g,integer b,integer a,real x,real y,boolean OE2 returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local image OF2=(LoadImageHandle(ZY,(V0I),(476+i)))
local image OG2=(LoadImageHandle(ZY,(V0I),(484+i)))
if OF2!=null then
call DestroyImage(OF2)
call SaveImageHandle(ZY,(V0I),(476+i),(null))
set OF2=null
endif
if OG2!=null then
call DestroyImage(OG2)
call SaveImageHandle(ZY,(V0I),(484+i),(null))
set OG2=null
endif
if OE2==false or RDO<1 then
return
endif
if StringLength(I2S(RDO))>1 then
call RBO("Fonts\\"+SubString(I2S(RDO),0,1)+".blp",120,120,x-30,y,0,true)
call SetImageColor(VK,r,g,b,a)
set OF2=VK
call RBO("Fonts\\"+SubString(I2S(RDO),1,2)+".blp",120,120,x+30,y,0,true)
call SetImageColor(VK,r,g,b,a)
set OG2=VK
else
call RBO("Fonts\\0.blp",120,120,x-30,y,0,true)
call SetImageColor(VK,r,g,b,a)
set OF2=VK
call RBO("Fonts\\"+SubString(I2S(RDO),0,1)+".blp",120,120,x+30,y,0,true)
call SetImageColor(VK,r,g,b,a)
set OG2=VK
endif
call SaveImageHandle(ZY,(V0I),(476+i),(OF2))
call SaveImageHandle(ZY,(V0I),(484+i),(OG2))
set OF2=null
set OG2=null
endfunction
function OH2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local group OZ2=ZJI()
local group OV2=ZJI()
local integer OW2
local integer OX2
local real x
local real y
local rect r
local player OY2
local player OJ2
local integer i=0
local integer YJI
local unit CP
local real SV1
local real ZPI=(TimerGetElapsed(M))
loop
exitwhen i>5
set r=(LoadRectHandle(ZY,(V0I),(460+i)))
set YJI=(LoadInteger(ZY,(V0I),(492+i)))
set CP=(LoadUnitHandle(ZY,(V0I),(452+i)))
set OY2=GetOwningPlayer(CP)
set OJ2=(LoadPlayerHandle(ZY,(V0I),(468+i)))
set x=GetRectCenterX(r)
set y=GetRectCenterY(r)
call GroupEnumUnitsInRect(OZ2,r,Condition(function OA2))
call GroupEnumUnitsInRect(OV2,r,Condition(function OB2))
set OW2=CountUnitsInGroup(OZ2)
set OX2=CountUnitsInGroup(OV2)
if(OW2>0 and OX2>0)or(OW2==0 and OX2==0)then
if OY2==FO then
set OJ2=FO
call SavePlayerHandle(ZY,(V0I),(468+i),(OJ2))
endif
set YJI=61
call SaveInteger(ZY,(V0I),(492+i),(YJI))
elseif OW2>0 and OX2==0 then
set OJ2=CO[1]
call SavePlayerHandle(ZY,(V0I),(468+i),(OJ2))
set YJI=YJI-OW2
call SaveInteger(ZY,(V0I),(492+i),(YJI))
elseif OX2>0 and OW2==0 then
set OJ2=DO[1]
call SavePlayerHandle(ZY,(V0I),(468+i),(OJ2))
set YJI=YJI-OX2
call SaveInteger(ZY,(V0I),(492+i),(YJI))
endif
if OJ2==FO and OY2!=FO then
call SetUnitColor(CP,GetPlayerColor(OJ2))
call SetUnitOwner(CP,OJ2,false)
call OD2(i,YJI,255,0,0,255,x,y,false)
elseif OJ2==OY2 then
call OD2(i,YJI,255,0,0,255,x,y,false)
set YJI=61
call SaveInteger(ZY,(V0I),(492+i),(YJI))
elseif OJ2!=FO then
if YJI<61 then
call OD2(i,YJI,255,0,0,255,x,y,true)
else
call OD2(i,YJI,255,0,0,255,x,y,false)
endif
if YJI<1 then
call PingMinimapEx(x,y,2,255,255,255,false)
call Y2I(OJ2,"Sound\\Interface\\Rescue.wav")
call SetUnitOwner(CP,OJ2,false)
set YJI=61
call SaveInteger(ZY,(V0I),(492+i),(YJI))
call SaveReal(ZY,(V0I),(500+i),((ZPI)*1.0))
if VLI(OJ2)then
call SetUnitColor(CP,GetPlayerColor(CO[0]))
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,"|c00ff0303The Sentinel now controls a Capture Point.|r")
call ForGroup(OZ2,function OC2)
else
call SetUnitColor(CP,GetPlayerColor(DO[0]))
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,"|c00ff0303The Scourge now controls a Capture Point.|r")
call ForGroup(OV2,function OC2)
endif
endif
endif
set i=i+1
endloop
call ZYI(OZ2)
call ZYI(OV2)
set OZ2=null
set OV2=null
return false
endfunction
function OK2 takes nothing returns boolean
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local fogmodifier KHI
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function OH2))
call PingMinimapEx(GetRectCenterX(LB),GetRectCenterY(LB),4,255,255,255,false)
call PingMinimapEx(GetRectCenterX(SB),GetRectCenterY(SB),4,255,255,255,false)
call PingMinimapEx(GetRectCenterX(RB),GetRectCenterY(RB),4,255,255,255,false)
call PingMinimapEx(GetRectCenterX(MB),GetRectCenterY(MB),4,255,255,255,false)
call PingMinimapEx(GetRectCenterX(TB),GetRectCenterY(TB),4,255,255,255,false)
call PingMinimapEx(GetRectCenterX(PB),GetRectCenterY(PB),4,255,255,255,false)
set QM0=CreateUnit(FO,1852010546,GetRectCenterX(LB),GetRectCenterY(LB),0)
set QN0=CreateUnit(FO,1852010546,GetRectCenterX(SB),GetRectCenterY(SB),0)
set QS0=CreateUnit(FO,1852010546,GetRectCenterX(RB),GetRectCenterY(RB),0)
set QT0=CreateUnit(FO,1852010546,GetRectCenterX(MB),GetRectCenterY(MB),0)
set QR0=CreateUnit(FO,1852010546,GetRectCenterX(TB),GetRectCenterY(TB),0)
set QP0=CreateUnit(FO,1852010546,GetRectCenterX(PB),GetRectCenterY(PB),0)
set KHI=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(LB),GetRectCenterY(LB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(DO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(LB),GetRectCenterY(LB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(SB),GetRectCenterY(SB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(DO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(SB),GetRectCenterY(SB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(RB),GetRectCenterY(RB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(DO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(RB),GetRectCenterY(RB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(MB),GetRectCenterY(MB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(DO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(MB),GetRectCenterY(MB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(TB),GetRectCenterY(TB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(DO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(TB),GetRectCenterY(TB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(PB),GetRectCenterY(PB),600,true,true)
call FogModifierStart(KHI)
set KHI=CreateFogModifierRadius(DO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(PB),GetRectCenterY(PB),600,true,true)
call FogModifierStart(KHI)
call K1I("Speed",QM0,255,233,12)
call K1I("Speed",QT0,255,233,12)
call K1I("Combat",QN0,255,233,12)
call K1I("Combat",QR0,255,233,12)
call K1I("Regen",QS0,255,233,12)
call K1I("Regen",QP0,255,233,12)
call UnitAddAbility(QM0,1395667023)
call UnitAddAbility(QT0,1395667026)
call UnitAddAbility(QN0,1093750863)
call UnitAddAbility(QN0,1093750860)
call UnitAddAbility(QR0,1093750862)
call UnitAddAbility(QR0,1093750858)
call UnitAddAbility(QS0,1093750870)
call UnitAddAbility(QS0,1093750854)
call UnitAddAbility(QP0,1093750852)
call UnitAddAbility(QP0,1093750853)
set QQ0=61
set QU0=61
set U00=61
set UI0=61
set U10=61
set UO0=61
call SaveUnitHandle(ZY,(V0I),(452),(QM0))
call SaveUnitHandle(ZY,(V0I),(453),(QN0))
call SaveUnitHandle(ZY,(V0I),(454),(QS0))
call SaveUnitHandle(ZY,(V0I),(455),(QT0))
call SaveUnitHandle(ZY,(V0I),(456),(QR0))
call SaveUnitHandle(ZY,(V0I),(457),(QP0))
call SaveReal(ZY,(V0I),(500),((-1)*1.0))
call SaveReal(ZY,(V0I),(501),((-1)*1.0))
call SaveReal(ZY,(V0I),(502),((-1)*1.0))
call SaveReal(ZY,(V0I),(503),((-1)*1.0))
call SaveReal(ZY,(V0I),(504),((-1)*1.0))
call SaveReal(ZY,(V0I),(505),((-1)*1.0))
call SaveRectHandle(ZY,(V0I),(460),(LB))
call SaveRectHandle(ZY,(V0I),(461),(SB))
call SaveRectHandle(ZY,(V0I),(462),(RB))
call SaveRectHandle(ZY,(V0I),(463),(MB))
call SaveRectHandle(ZY,(V0I),(464),(TB))
call SaveRectHandle(ZY,(V0I),(465),(PB))
call SavePlayerHandle(ZY,(V0I),(468),(FO))
call SavePlayerHandle(ZY,(V0I),(469),(FO))
call SavePlayerHandle(ZY,(V0I),(470),(FO))
call SavePlayerHandle(ZY,(V0I),(471),(FO))
call SavePlayerHandle(ZY,(V0I),(472),(FO))
call SavePlayerHandle(ZY,(V0I),(473),(FO))
call SaveInteger(ZY,(V0I),(492),(61))
call SaveInteger(ZY,(V0I),(493),(61))
call SaveInteger(ZY,(V0I),(494),(61))
call SaveInteger(ZY,(V0I),(495),(61))
call SaveInteger(ZY,(V0I),(496),(61))
call SaveInteger(ZY,(V0I),(497),(61))
call SaveImageHandle(ZY,(V0I),(476),(null))
call SaveImageHandle(ZY,(V0I),(484),(null))
call SaveImageHandle(ZY,(V0I),(477),(null))
call SaveImageHandle(ZY,(V0I),(485),(null))
call SaveImageHandle(ZY,(V0I),(478),(null))
call SaveImageHandle(ZY,(V0I),(486),(null))
call SaveImageHandle(ZY,(V0I),(479),(null))
call SaveImageHandle(ZY,(V0I),(487),(null))
call SaveImageHandle(ZY,(V0I),(480),(null))
call SaveImageHandle(ZY,(V0I),(488),(null))
call SaveImageHandle(ZY,(V0I),(481),(null))
call SaveImageHandle(ZY,(V0I),(489),(null))
call ZSI(GetTriggeringTrigger())
set t=null
return false
endfunction
function GKO takes nothing returns nothing
local trigger t
if QL0 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,600,false)
call TriggerAddCondition(t,Condition(function OK2))
set t=null
endif
endfunction
function T2O takes nothing returns nothing
set QL0=true
endfunction
function OL2 takes nothing returns nothing
set Q[1]=0
endfunction
function ON2 takes nothing returns nothing
set Q[2]=0
endfunction
function OT2 takes nothing returns nothing
set Q[3]=0
endfunction
function OP2 takes nothing returns nothing
set Q[4]=0
endfunction
function OU2 takes nothing returns nothing
set Q[5]=0
endfunction
function AI2 takes nothing returns nothing
set Q[7]=0
endfunction
function AO2 takes nothing returns nothing
set Q[8]=0
endfunction
function A32 takes nothing returns nothing
set Q[9]=0
endfunction
function A52 takes nothing returns nothing
set Q[10]=0
endfunction
function A72 takes nothing returns nothing
set Q[11]=0
endfunction
function A92 takes nothing returns nothing
local integer i=1
local string id
local player p
loop
exitwhen i>5
set p=CO[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(NN,id,"id",i)
set p=DO[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(NN,id,"id",i+5)
if GetLocalPlayer()==XO then
call SyncStoredInteger(NN,I2S(GetPlayerId(CO[i])),"id")
call SyncStoredInteger(NN,I2S(GetPlayerId(DO[i])),"id")
endif
set i=i+1
endloop
endfunction
function AA2 takes nothing returns boolean
if K2 then
call W8I()
call JDI(bj_FORCE_ALL_PLAYERS,20.00,C0[GetPlayerId(XO)]+(CR0[GetPlayerId((XO))])+"|r"+" "+GetObjectName(1848656717))
call JDI(bj_FORCE_ALL_PLAYERS,20.00," ")
set TK=true
call NGO()
call L7O()
call CRO()
call F4O()
call WF1()
endif
call A92()
call ZSI(GetTriggeringTrigger())
return false
endfunction
function AB2 takes nothing returns boolean
set B0=true
call ZSI(GetTriggeringTrigger())
return false
endfunction
function AD2 takes nothing returns nothing
set O0=true
endfunction
function AF2 takes nothing returns nothing
set I2=true
endfunction
function AH2 takes nothing returns nothing
set Z3=true
endfunction
function Torrent_Damage takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function AV2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real AW2
local unit T0I
set AW2=0.6*(ZLI-25)*(ZLI-25)
if ZLI<51 and GetTriggerEventId()!=EVENT_UNIT_DEATH then
if ModuloInteger(ZLI,5)==0 then
call XNI(XSI,XTI,1,3+3*WTI)
endif
if XGI(XTI)==false then
call SetUnitFlyHeight(XTI,500-AW2,0)
endif
else
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093742924)
call SetUnitAbilityLevel(T0I,1093742924,WTI)
call IssueTargetOrder(T0I,"slow",XTI)
if XGI(XTI)==false then
call SetUnitFlyHeight(XTI,GetUnitDefaultFlyHeight(XTI),0)
endif
if U2==false then
call PauseUnit(XTI,false)
endif
call SetUnitPathing(XTI,true)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
return false
endfunction
function AX2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=OK
local unit XTI=GetEnumUnit()
local integer WTI=MJ
call PauseUnit(XTI,true)
call SetUnitPathing(XTI,false)
if XGI(XTI)==false then
call KKI(XTI,1097691750)
call UnitRemoveAbility(XTI,1097691750)
endif
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function AV2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveInteger(ZY,(V0I),(5),(WTI))
call XNI(XSI,XTI,1,30+30*WTI)
set t=null
set XSI=null
set XTI=null
endfunction
function AY2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group g=ZJI()
local ubersplat N5I=CreateUbersplat(x,y,"THNN",255,255,255,255,false,false)
call SetUbersplatRenderAlways(N5I,true)
call KZI(GetOwningPlayer(V8I),4,x,y,400)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(178))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(179))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(180))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",x,y))
call DestroyEffect(AddSpecialEffect("effects\\TidalErruption.mdx",x,y))
set OK=V8I
set MJ=WTI
call GroupEnumUnitsInRange(g,x,y,225,Condition(function S5I))
call ForGroup(g,function AX2)
call ZYI(g)
set t=null
set V8I=null
return false
endfunction
function AJ2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(V8I,1093743414)
local string s=""
local real a
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(V8I))==true or XJI(GetLocalPlayer())then
set s="Objects\\Spawnmodels\\Other\\IllidanFootprint\\IllidanWaterSpawnFootPrint.mdl"
endif
call RemoveLocation(l)
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
set a=0
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
set a=1
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
set a=2
call SaveEffectHandle(ZY,(V0I),(177),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
set a=3
call SaveEffectHandle(ZY,(V0I),(178),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
set a=4
call SaveEffectHandle(ZY,(V0I),(179),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
set a=5
call SaveEffectHandle(ZY,(V0I),(180),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))
call TriggerRegisterTimerEvent(t,1.6,false)
call TriggerAddCondition(t,Condition(function AY2))
set V8I=null
set t=null
set l=null
endfunction
function AK2 takes nothing returns boolean
if GetSpellAbilityId()==1093743414 then
call AJ2()
endif
return false
endfunction
function HH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AK2))
set t=null
endfunction
function K6O takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(AM),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(AM),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(AM),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(AM),1093743673,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(BM),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(BM),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(BM),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(BM),1093743673,false)
endfunction
function AL2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and(GetEventDamage()>40 or IsUnitType(XTI,UNIT_TYPE_STRUCTURE)==true or GetUnitTypeId(XTI)==1970107511 or GetUnitTypeId(XTI)==1700946284)and(LoadBoolean(ZY,(GetHandleId(XSI)),(183)))==true then
call SaveBoolean(ZY,(GetHandleId(XSI)),(183),(false))
call SaveReal(ZY,(GetHandleId(XSI)),(184),(((TimerGetElapsed(M)))*1.0))
call UnitRemoveAbility(XSI,1093742927)
call UnitRemoveAbility(XSI,1093742930)
call UnitRemoveAbility(XSI,1093743671)
call UnitRemoveAbility(XSI,1093743672)
call UnitRemoveAbility(XSI,1093742933)
call UnitRemoveAbility(XSI,1093743673)
call FlushChildHashtable(ZY,(GetHandleId((LoadTriggerHandle(ZY,(V0I),(35))))))
call ZSI((LoadTriggerHandle(ZY,(V0I),(35))))
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function AM2 takes nothing returns boolean
local trigger t
local integer V0I
local unit XTI
local unit XSI
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SaveBoolean(ZY,(GetHandleId(GetTriggerUnit())),(183),(false))
call SaveReal(ZY,(GetHandleId(GetTriggerUnit())),(184),(((TimerGetElapsed(M)))*1.0))
call UnitRemoveAbility(GetTriggerUnit(),1093742927)
call UnitRemoveAbility(GetTriggerUnit(),1093742930)
call UnitRemoveAbility(GetTriggerUnit(),1093743671)
call UnitRemoveAbility(GetTriggerUnit(),1093743672)
call UnitRemoveAbility(GetTriggerUnit(),1093742933)
call UnitRemoveAbility(GetTriggerUnit(),1093743673)
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
elseif GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(182)))then
if IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
set XTI=GetTriggerUnit()
set XSI=GetAttacker()
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function AL2))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveTriggerHandle(ZY,(V0I),(35),(GetTriggeringTrigger()))
set XTI=null
set XSI=null
set t=null
endif
endif
return false
endfunction
function AN2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real JOI=(TimerGetElapsed(M))
local integer WTI=GetUnitAbilityLevel(V8I,1093743444)
local real AS2=(LoadReal(ZY,(GetHandleId(V8I)),(184)))
local boolean AT2=(LoadBoolean(ZY,(GetHandleId(V8I)),(183)))
if JOI-AS2>16-WTI*3 and AT2==false and GetUnitTypeId(V8I)==1211119187 and KMI(V8I)==false then
call SaveBoolean(ZY,(GetHandleId(V8I)),(183),(true))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function AM2))
call SaveUnitHandle(ZY,(V0I),(182),(V8I))
call KKI(V8I,1093742927)
call SetUnitAbilityLevel(V8I,1093742927,WTI)
call KKI(V8I,1093742930)
if WTI==1 then
call KKI(V8I,1093743671)
elseif WTI==2 then
call KKI(V8I,1093743672)
elseif WTI==3 then
call KKI(V8I,1093742933)
elseif WTI==4 then
call KKI(V8I,1093743673)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093743673,false)
elseif AT2==false then
call UnitRemoveAbility(V8I,1093742927)
call UnitRemoveAbility(V8I,1093742930)
call UnitRemoveAbility(V8I,1093743671)
call UnitRemoveAbility(V8I,1093743672)
call UnitRemoveAbility(V8I,1093742933)
call UnitRemoveAbility(V8I,1093743673)
endif
set t=null
set V8I=null
return false
endfunction
function AR2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function AN2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(181),(0))
set V8I=null
set t=null
endfunction
function AP2 takes nothing returns boolean
if GetLearnedSkill()==1093743444 and GetUnitAbilityLevel(GetTriggerUnit(),1093743444)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call AR2()
endif
return false
endfunction
function HZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AP2))
set t=null
endfunction
function AQ2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local image i=(LoadImageHandle(ZY,(V0I),(185)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093743428)then
if GetTriggerEventId()!=EVENT_UNIT_DEATH and XDI(XTI)==false then
if IsUnitHidden(XTI)then
call SetUnitX(XTI,x)
call SetUnitY(XTI,y)
else
call SetUnitPosition(XTI,x,y)
endif
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093743428,false)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093742926 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093742926,true)
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call ShowImage(i,false)
call DestroyImage(i)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set i=null
set XSI=null
return false
endfunction
function AU2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local real K4I=90
local image i=CreateImage("Fonts\\X.blp",K4I,K4I,0,x-K4I/2,y-K4I/2,0,0,0,0,2)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local string fx=""
local integer WTI=GetUnitAbilityLevel(XSI,1093742926)
call V5I(XTI,4401,5)
call KKI(XSI,1093743428)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093743428,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093742926,false)
call SetImageRenderAlways(i,true)
if IsUnitAlly(XSI,GetOwningPlayer(XTI))==false or IsUnitAlly(XTI,GetLocalPlayer())==true or XJI(GetLocalPlayer())then
set fx="effects\\BlackTide.mdx"
call ShowImage(i,true)
else
call ShowImage(i,false)
endif
call SetImageColor(i,255,0,0,255)
call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(XSI),1865429063,x,y,0),1112820806,5)
call TriggerRegisterTimerEvent(t,WTI,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AQ2))
call SaveImageHandle(ZY,(V0I),(185),(i))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget(fx,XTI,"overhead")))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
set XTI=null
set i=null
set t=null
endfunction
function B02 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093742926 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or ZXI(GetSpellTargetUnit())==false)then
call AU2()
endif
else
if GetLearnedSkill()==1093742926 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093743428,false)
call KKI(GetTriggerUnit(),1093743428)
endif
endif
return false
endfunction
function BI2 takes nothing returns boolean
if GetSpellAbilityId()==1093742926 then
if(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endif
return false
endfunction
function HV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function B02))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function BI2))
set t=null
endfunction
function B12 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer LWI=1
local player p
local real d
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer BO2=(LoadInteger(ZY,(V0I),(136)))
local integer SQI=(LoadInteger(ZY,(V0I),(188)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>SQI then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
loop
exitwhen LWI>BO2
set p=(LoadPlayerHandle(ZY,(V0I),(1300+LWI)))
set d=(LoadReal(ZY,(V0I),(1200+LWI)))
if p==null then
set LWI=BO2
else
call SetUnitState(XTI,UNIT_STATE_LIFE,YQI(1,GetUnitState(XTI,UNIT_STATE_LIFE)-d/SQI))
endif
set LWI=LWI+1
endloop
endif
set t=null
set p=null
set XTI=null
return false
endfunction
function B22 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local trigger B32=(LoadTriggerHandle(ZY,(V0I),(135)))
local integer LWI=GetTriggerEvalCount(t)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call TriggerRegisterTimerEvent(B32,1,true)
call TriggerAddCondition(B32,Condition(function B12))
else
set V0I=GetHandleId(B32)
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)+0.5*GetEventDamage())
call SavePlayerHandle(ZY,(V0I),(1300+LWI),(GetOwningPlayer(GetEventDamageSource())))
call SaveReal(ZY,(V0I),(1200+LWI),((0.5*GetEventDamage())*1.0))
call SaveInteger(ZY,(V0I),(136),(LWI))
endif
set t=null
set XTI=null
set p=null
set B32=null
return false
endfunction
function B42 takes nothing returns nothing
local unit XSI=U30
local unit XTI=GetEnumUnit()
local integer WTI=U40
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer SQI=4+WTI
local trigger B32=CreateTrigger()
call MSI(XTI,1093743158,1,SQI)
call UnitMakeAbilityPermanent(XTI,true,1093743158)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093743158,false)
call TriggerRegisterTimerEvent(t,SQI+0.01,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function B22))
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(XSI)))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveTriggerHandle(ZY,(V0I),(135),(B32))
call SaveUnitHandle(ZY,(GetHandleId(B32)),(17),(XTI))
call SaveInteger(ZY,(GetHandleId(B32)),(188),(SQI))
set XSI=null
set XTI=null
set t=null
set B32=null
endfunction
function B52 takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),U20)==false then
call GroupAddUnit(U20,GetFilterUnit())
return true
endif
return false
endfunction
function B62 takes nothing returns nothing
local unit XSI=U30
local unit XTI=GetEnumUnit()
local integer WTI=U40
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093743448)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
call XNI(XSI,XTI,1,200+100*WTI)
set XSI=null
set XTI=null
endfunction
function B72 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local unit B82
local real B92=(LoadReal(ZY,(V0I),(13)))
local real J4I=GetUnitX(KRI)
local real J5I=GetUnitY(KRI)
local real J6I=(LoadReal(ZY,(V0I),(66)))
local real J7I=(LoadReal(ZY,(V0I),(67)))
local integer ZLI=GetTriggerEvalCount(t)
local real KUI=YEI(J6I+13.33*ZLI*Cos(B92))
local real L0I=YHI(J7I+13.33*ZLI*Sin(B92))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local group g
if ZLI<19 then
call SetUnitVertexColor(KRI,255,255,255,5+ZLI*10)
set B82=(LoadUnitHandle(ZY,(V0I),(186)))
call SetUnitVertexColor(B82,255,255,255,5+ZLI*10)
elseif ZLI<125 then
call SetUnitVertexColor(KRI,255,255,255,190)
elseif ZLI<150 then
endif
set g=ZJI()
set U20=BA2
set OK=KRI
set U30=KRI
set U40=WTI
call GroupEnumUnitsInRange(g,GetUnitX(KRI),GetUnitY(KRI),425,Condition(function B52))
call ForGroup(g,function B42)
call ZYI(g)
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
if ZLI==140 then
set B82=(LoadUnitHandle(ZY,(V0I),(186)))
call KillUnit(B82)
elseif ZLI<140 then
set B82=(LoadUnitHandle(ZY,(V0I),(186)))
call SetUnitX(B82,KUI)
call SetUnitY(B82,L0I)
endif
if ZLI==150 then
set g=ZJI()
set OK=KRI
call GroupEnumUnitsInRange(g,KUI,L0I,425,Condition(function SOI))
call ForGroup(g,function B62)
call ZYI(g)
call KillUnit(KRI)
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set KRI=null
set B82=null
set BA2=null
set g=null
return false
endfunction
function BB2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local real J4I=GetUnitX(V8I)
local real J5I=GetUnitY(V8I)
local location l=GetSpellTargetLoc()
local real x0=GetLocationX(l)
local real y0=GetLocationY(l)
local real B92
local real x1
local real y1
local real x2
local real y2
local trigger t
local integer V0I
local integer WTI
local unit KRI
local unit B82
local string s=""
if IsPlayerAlly(GetOwningPlayer(V8I),GetLocalPlayer())or XJI(GetLocalPlayer())then
set s="war3mapImported\\Whirlpool.mdx"
endif
if x0==GetUnitX(V8I)and y0==GetUnitY(V8I)then
set x0=x0+50*Cos(GetUnitFacing(V8I)*bj_DEGTORAD)
set y0=y0+50*Sin(GetUnitFacing(V8I)*bj_DEGTORAD)
endif
set B92=Atan2(y0-J5I,x0-J4I)
set x1=J4I-1000*Cos(B92)
set y1=J5I-1000*Sin(B92)
set x2=J4I+1000*Cos(B92)
set y2=J5I+1000*Sin(B92)
set t=CreateTrigger()
set V0I=GetHandleId(t)
set WTI=GetUnitAbilityLevel(V8I,1093742923)
set KRI=CreateUnit(GetOwningPlayer(V8I),1747990101,x1,y1,Atan2(y0-J5I,x0-J4I)*bj_RADTODEG)
set B82=CreateUnit(GetOwningPlayer(V8I),1747990102,x1,y1,Atan2(y0-J5I,x0-J4I)*bj_RADTODEG)
call SetUnitVertexColor(KRI,255,255,255,0)
call SetUnitPathing(KRI,false)
call RemoveLocation(l)
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveUnitHandle(ZY,(V0I),(186),(B82))
call SaveReal(ZY,(V0I),(66),((x1)*1.0))
call SaveReal(ZY,(V0I),(67),((y1)*1.0))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
call DestroyEffect(AddSpecialEffect(s,YEI(x2),YHI(y2)))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function B72))
set V8I=null
set t=null
set KRI=null
set B82=null
set l=null
endfunction
function BC2 takes nothing returns boolean
if GetSpellAbilityId()==1093742923 then
call BB2()
endif
return false
endfunction
function HW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BC2))
call YVI(1093742924)
set t=null
endfunction
function BD2 takes unit u,real x,real y returns nothing
if u!=null then
call XNI(U50,u,2,U80)
call IssueTargetOrder(U60,"thunderbolt",u)
endif
endfunction
function BE2 takes unit XSI,unit XTI,real W21 returns nothing
local group g
local integer WTI=GetUnitAbilityLevel(XSI,1093750345)
local real x
local real y
set U50=XSI
set U80=(60+60*WTI)*W21/5.0
set U70=(1+0.75*WTI)*W21/5.0
set U60=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(U60,1093687350)
call SetUnitAbilityLevel(U60,1093687350,SPI(U70))
set OK=XSI
if XSI==XTI then
call BD2(XTI,GetUnitX(XTI),GetUnitY(XTI))
elseif GetUnitTypeId(XTI)!=1747993156 then
call BD2(XTI,GetUnitX(XTI),GetUnitY(XTI))
else
set x=GetUnitX(XTI)
set y=GetUnitY(XTI)
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),200,Condition(function SOI))
set XTI=FirstOfGroup(g)
call ZYI(g)
call BD2(XTI,x,y)
set g=null
endif
if XTI!=null then
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",GetUnitX(XTI),GetUnitY(XTI)))
endif
endfunction
function BF2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real W21=(LoadReal(ZY,(V0I),(444)))
local real BG2=(LoadReal(ZY,(V0I),(445)))
local real B92=JPI(GetUnitX(KRI),GetUnitY(KRI),GetUnitX(XTI),GetUnitY(XTI))
local real x=GetUnitX(KRI)+18*Cos(B92*bj_DEGTORAD)
local real y=GetUnitY(KRI)+18*Sin(B92*bj_DEGTORAD)
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
if JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))<=18 then
call KillUnit(KRI)
call BE2(XSI,XTI,W21)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif(TimerGetElapsed(M))-BG2>(5.0+2.0)then
call KillUnit(KRI)
call BE2(XSI,KRI,W21)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
set KRI=null
return false
endfunction
function BH2 takes unit XSI,unit XTI,real W21,real BG2 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747993156,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(444),((W21)*1.0))
call SaveReal(ZY,(V0I),(445),((BG2)*1.0))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function BF2))
set t=null
set KRI=null
endfunction
function BZ2 takes string KOI,unit XTI,unit V8I returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,KOI,0.033)
call SetTextTagPosUnit(tt,XTI,64)
call SetTextTagColor(tt,255,0,0,255)
call SetTextTagVelocity(tt,0,0.0355)
call SetTextTagFadepoint(tt,0.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,0.65)
if IsUnitVisible(V8I,GetLocalPlayer())or XJI(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function BV2 takes real SQI returns string
if SQI>4.5 then
return"5.0"
elseif SQI>4.0 then
return"4.5"
elseif SQI>3.5 then
return"4.0"
elseif SQI>3.0 then
return"3.5"
elseif SQI>2.5 then
return"3.0"
elseif SQI>2.0 then
return"2.5"
elseif SQI>1.5 then
return"2.0"
elseif SQI>1.0 then
return"1.5"
elseif SQI>0.5 then
return"1.0"
elseif SQI>0.0 then
return"0.5"
else
return"0.0"
endif
return" "
endfunction
function BW2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real BG2=(LoadReal(ZY,(V0I),(442)))
local real Q1I=(TimerGetElapsed(M))
local real GJO=5.0-(Q1I-BG2)
local real J1I=YPI(Q1I-BG2,5.0)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))+1
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750344,false)
call SetUnitVertexColor(XSI,255,255,255,255)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093750344 then
if ZXI(GetSpellTargetUnit())==false then
call BH2(XSI,GetSpellTargetUnit(),J1I,BG2)
endif
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750344,false)
call SetUnitVertexColor(XSI,255,255,255,255)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call SaveInteger(ZY,(V0I),(34),(ZLI))
if GJO>=0 then
call BZ2(BV2(GJO),XSI,XSI)
if ModuloInteger(ZLI,2)==0 then
call SetUnitVertexColor(XSI,255,125,125,255)
else
call SetUnitVertexColor(XSI,255,175,175,255)
endif
else
call SetUnitVertexColor(XSI,255,0,0,255)
endif
if Q1I-BG2>(5.0+2.0)then
call BE2(XSI,XSI,5.0)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750344,false)
call SetUnitVertexColor(XSI,255,255,255,255)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
set t=null
set XSI=null
return false
endfunction
function BX2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local string s="war3mapImported\\UnstableConcoctionRangeDisplay3.mdx"
if GetLocalPlayer()!=GetOwningPlayer(XSI)then
set s=""
endif
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M)))*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget(s,XSI,"origin")))
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BW2))
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750345,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750344,true)
call KKI(XSI,1093750344)
call UnitMakeAbilityPermanent(XSI,true,1093750344)
call TriggerEvaluate(t)
set XSI=null
set t=null
endfunction
function BY2 takes nothing returns boolean
if GetSpellAbilityId()==1093750345 then
call BX2()
endif
return false
endfunction
function FG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BY2))
call YVI(1093687350)
set t=null
endfunction
function BJ2 takes nothing returns boolean
return GetUnitAbilityLevel(GetKillingUnit(),1093685043)>0 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function BK2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit u=(LoadUnitHandle(ZY,(V0I),(26)))
call SaveInteger(ZY,(GetHandleId(u)),(27),((LoadInteger(ZY,(GetHandleId(u)),(27)))-1))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set u=null
set t=null
return false
endfunction
function BL2 takes nothing returns nothing
local unit Y9I=GetKillingUnit()
local unit BM2=GetTriggerUnit()
local integer V0I=GetHandleId(Y9I)
local integer BN2=(LoadInteger(ZY,(V0I),(27)))
local integer WTI=GetUnitAbilityLevel(Y9I,1093685043)
local integer BS2=BN2*2
local integer BT2=YSI(BS2+WTI*2,18)
local texttag tt=CreateTextTag()
local player p=GetOwningPlayer(Y9I)
local trigger t=CreateTrigger()
set U90[GetPlayerId(p)]=U90[GetPlayerId(p)]+BT2
call TriggerRegisterTimerEvent(t,20,false)
call TriggerAddCondition(t,Condition(function BK2))
call SaveUnitHandle(ZY,(GetHandleId(t)),(26),(Y9I))
call SaveInteger(ZY,(V0I),(27),(BN2+1))
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,BT2+GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD))
call SetTextTagText(tt,"+"+I2S(BT2),0.025)
call SetTextTagPosUnit(tt,BM2,0)
call SetTextTagColor(tt,255,220,0,255)
call SetTextTagVelocity(tt,0,0.03)
if GetLocalPlayer()==p then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set t=null
endfunction
function BR2 takes nothing returns boolean
local integer Y0O=U90[GetPlayerId(GetTriggerPlayer())]
if(GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])==1311781193 or GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])==1311781192 or GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])==1311781204 or GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])==1311781194)and Y0O>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848657745)+" "+I2S(Y0O))
endif
return false
endfunction
function FF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BJ2))
call TriggerAddAction(t,function BL2)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-st",true)
call TriggerAddCondition(t,Condition(function BR2))
set t=null
endfunction
constant function AcidSpray_RawCode takes nothing returns integer
return 1093683532
endfunction
constant function AcidSpray_EffectCode takes nothing returns integer
return 1093683764
endfunction
function BP2 takes nothing returns boolean
return GetSpellAbilityId()==(1093683532)
endfunction
function BQ2 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(YO))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitTypeId(GetFilterUnit())!=1848657461
endfunction
function BU2 takes nothing returns nothing
call UnitDamageTarget(YO,GetEnumUnit(),KO,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function C02 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer CI2=(LoadInteger(ZY,(V0I),(28)))
local real x=GetUnitX(T0I)
local real y=GetUnitY(T0I)
local boolexpr VE1
local group U4I
if CI2>16 then
call KillUnit(T0I)
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
call DestroyTimer(t)
else
set YO=V8I
set KO=GetUnitAbilityLevel(V8I,(1093683532))*8
set VE1=Condition(function BQ2)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,650,VE1)
call ForGroup(U4I,function BU2)
call ZYI(U4I)
set CI2=CI2+1
call SaveInteger(ZY,(V0I),(28),(CI2))
endif
endfunction
function C12 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location YV1=GetSpellTargetLoc()
local real x=GetLocationX(YV1)
local real y=GetLocationY(YV1)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697657157,x,y,0)
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
call RemoveLocation(YV1)
call KKI(T0I,(1093683764))
call SetUnitAbilityLevel(T0I,(1093683764),GetUnitAbilityLevel(V8I,(1093683532)))
call KKI(T0I,1097625443)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(28),(0))
call TimerStart(t,1,true,function C02)
endfunction
function FH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function C12)
call TriggerAddCondition(t,Condition(function BP2))
call YVI((1093683764))
endfunction
function CO2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real H1O=GetUnitState(V8I,UNIT_STATE_MANA)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitState(V8I,UNIT_STATE_MANA,GetUnitState(V8I,UNIT_STATE_MAX_MANA))
call SetUnitState(V8I,UNIT_STATE_MANA,H1O)
set t=null
set V8I=null
return false
endfunction
function C22 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,0.1,false)
call TriggerAddCondition(t,Condition(function CO2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
set t=null
set V8I=null
endfunction
function C32 takes nothing returns boolean
if GetSpellAbilityId()==1095656306 and GetUnitTypeId(GetTriggerUnit())==1311781193 then
call C22()
endif
return false
endfunction
function Register_ChemicalRage takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C32))
set t=null
endfunction
function C42 takes nothing returns nothing
call XNI(UB0,GetEnumUnit(),1,UA0)
endfunction
function C52 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093682483)
local real XPI=(0.35+0.25*WTI)*(GetUnitState(XTI,UNIT_STATE_MAX_MANA)-GetUnitState(XTI,UNIT_STATE_MANA))
local group g=ZJI()
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",XTI,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",XTI,"chest"))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Enchantment.mdx",GetUnitX(XTI),GetUnitY(XTI)))
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),325,Condition(function S0I))
set UA0=XPI
set UB0=V8I
call ForGroup(g,function C42)
call PlaySoundOnUnitBJ(NC,100,XTI)
call ZYI(g)
set V8I=null
set XTI=null
set g=null
endfunction
function C62 takes nothing returns boolean
if GetSpellAbilityId()==1093682483 and ZXI(GetSpellTargetUnit())==false then
call C52()
endif
return false
endfunction
function OC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C62))
set t=null
endfunction
function C72 takes unit XSI,unit XTI returns nothing
local integer WTI=GetUnitAbilityLevel(XSI,1093752374)
local real C82=16+12*WTI
local real C92=GetUnitState(XTI,UNIT_STATE_MANA)
local real CA2=RMinBJ(C82,C92)
if CA2>0 then
call SetUnitState(XTI,UNIT_STATE_MANA,C92-CA2)
call XNI(XSI,XTI,2,CA2*0.6)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",XTI,"origin"))
endif
endfunction
function CB2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI then
call DisableTrigger(t)
call C72(XSI,XTI)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function CC2 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XTI=GetTriggerUnit()
local unit XSI=GetAttacker()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,0.4,false)
call TriggerAddCondition(t,Condition(function CB2))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XTI=null
set XSI=null
set t=null
endfunction
function CD2 takes nothing returns nothing
local unit XSI=GetAttacker()
if((LoadInteger(ZY,(GetHandleId((XSI))),((4274))))==1)==false then
call V5I(XSI,4274,0.4)
call CC2()
endif
endfunction
function CE2 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093752374)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and XDI(GetTriggerUnit())==false then
call CD2()
endif
return false
endfunction
function CF2 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function CE2))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function CG2 takes nothing returns boolean
if GetLearnedSkill()==1093752374 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093752374)==1 then
call CF2()
endif
return false
endfunction
function OE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function CG2))
set t=null
endfunction
function CH2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer ZLI=GetTriggerEvalCount(t)
local integer CZ2=R2I(((0.9-0.3)/0.5)/0.03)
local integer CV2=R2I((175/CZ2))
local integer CW2=R2I((255/CZ2)*1.75)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
if ZLI>CZ2 then
call SetUnitVertexColor(T0I,255,255,255,0)
call SetUnitVertexColor(V8I,255,255,255,255)
call ShowUnit(T0I,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitVertexColor(T0I,255,255,255,175-CV2*ZLI)
call SetUnitX(T0I,x)
call SetUnitY(T0I,y)
call SetUnitVertexColor(V8I,255,255,255,CW2*ZLI)
endif
set t=null
set T0I=null
set V8I=null
return false
endfunction
function CX2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit T0I=(LoadUnitHandle(ZY,(GetHandleId(V8I)),(293)))
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
call SetUnitX(T0I,x)
call SetUnitY(T0I,y)
call SetUnitX(V8I,x)
call SetUnitY(V8I,y)
call SetUnitVertexColor(V8I,255,255,255,0)
call SetUnitVertexColor(T0I,255,255,255,175)
call SetUnitTimeScale(T0I,0.5)
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function CH2))
set V8I=null
set T0I=null
set t=null
endfunction
function CY2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit T0I
local integer V0I=GetHandleId(V8I)
local location l=GetSpellTargetLoc()
local real a=JPI(GetUnitX(V8I),GetUnitY(V8I),GetLocationX(l),GetLocationY(l))
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
call RemoveLocation(l)
call SetUnitPathing(V8I,false)
call KKI(V8I,1097167976)
set T0I=CreateUnit(GetOwningPlayer(V8I),1747990091,GetUnitX(V8I),GetUnitY(V8I),a)
call M2I(T0I,5)
call SetUnitPathing(T0I,false)
call KKI(T0I,1097167976)
call KKI(T0I,1097625443)
call KKI(T0I,1093678162)
call SetUnitVertexColor(T0I,255,255,255,0)
call SetUnitX(T0I,x)
call SetUnitY(T0I,y)
call SetUnitX(V8I,x)
call SetUnitY(V8I,y)
call SetUnitAnimation(T0I,"Spell Throw")
call SetUnitPathing(V8I,true)
call UnitRemoveAbility(V8I,1097167976)
call SaveUnitHandle(ZY,(V0I),(293),(T0I))
set V8I=null
set T0I=null
endfunction
function CJ2 takes nothing returns boolean
if GetSpellAbilityId()==1095066220 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call CX2()
else
call CY2()
endif
endif
return false
endfunction
function OD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CJ2))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function CJ2))
set t=null
call MGI(1747990091)
endfunction
function CK2 takes nothing returns boolean
return GetSpellAbilityId()==1093685041
endfunction
function TreeKiller takes nothing returns nothing
call KillDestructable(GetEnumDestructable())
endfunction
function CL2 takes unit Y9I,real x,real y,group QY1 returns nothing
local group U4I=ZJI()
local unit OB1
call KCI(x,y,150)
call GroupEnumUnitsInRange(U4I,x,y,150,Condition(function HRI))
loop
set OB1=FirstOfGroup(U4I)
exitwhen OB1==null
if(IsUnitInGroup(OB1,QY1)==false and IsUnitEnemy(OB1,GetOwningPlayer(Y9I)))then
if(GetUnitAbilityLevel(OB1,1093678162)!=1 and GetUnitState(OB1,UNIT_STATE_LIFE)>0 and IsUnitType(OB1,UNIT_TYPE_STRUCTURE)==false)then
call GroupAddUnit(QY1,OB1)
call UnitDamageTarget(Y9I,OB1,60+GetUnitAbilityLevel(Y9I,1093685041)*30,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_METAL_HEAVY_SLICE)
call AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",OB1,"overhead")
endif
endif
call GroupRemoveUnit(U4I,OB1)
endloop
call ZYI(U4I)
endfunction
function CM2 takes nothing returns nothing
local integer V0I=GetHandleId(GetExpiredTimer())
local unit CN2=(LoadUnitHandle(ZY,(V0I),(290)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real Ax=(LoadReal(ZY,(V0I),(284)))
local real Ay=(LoadReal(ZY,(V0I),(285)))
local real Cx=(LoadReal(ZY,(V0I),(286)))
local real Cy=(LoadReal(ZY,(V0I),(287)))
local real Bx=(LoadReal(ZY,(V0I),(288)))
local real By=(LoadReal(ZY,(V0I),(289)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real b=1-a
local boolean CS2=(LoadBoolean(ZY,(V0I),(291)))
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local real CT2=RMaxBJ(JAI(Ax,Ay,Cx,Cy)/1300,0.4)
call SetUnitX(CN2,YEI(Ax*a*a+Bx*2*a*b+Cx*b*b))
call SetUnitY(CN2,YHI(Ay*a*a+By*2*a*b+Cy*b*b))
call CL2(V8I,GetUnitX(CN2),GetUnitY(CN2),QY1)
if(CS2)then
call SaveReal(ZY,(V0I),(137),((a-.02/CT2)*1.0))
else
call SaveReal(ZY,(V0I),(137),((a+.02/CT2)*1.0))
call SaveReal(ZY,(V0I),(284),((GetUnitX(V8I))*1.0))
call SaveReal(ZY,(V0I),(285),((GetUnitY(V8I))*1.0))
endif
if(a<0 and CS2)then
call SaveBoolean(ZY,(V0I),(291),(false))
call SaveReal(ZY,(V0I),(288),((Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+(LoadReal(ZY,(V0I),(292)))))*1.0))
call SaveReal(ZY,(V0I),(289),((Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+(LoadReal(ZY,(V0I),(292)))))*1.0))
endif
if(a>1 and CS2==false)then
call PauseTimer(GetExpiredTimer())
call ZYI(QY1)
call FlushChildHashtable(ZY,(V0I))
call RemoveUnit(CN2)
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function CR2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local real Ax=GetUnitX(Y9I)
local real Ay=GetUnitY(Y9I)
local real Cx=GetLocationX(GetSpellTargetLoc())
local real Cy=GetLocationY(GetSpellTargetLoc())
local unit CP2=CreateUnit(GetOwningPlayer(Y9I),1697657172,Ax,Ay,270.0)
local unit CQ2=CreateUnit(GetOwningPlayer(Y9I),1697657172,Ax,Ay,270.0)
local integer CU2
local integer D02
local timer DI2=CreateTimer()
local timer D12=CreateTimer()
if GetSpellTargetUnit()!=null then
set Cx=GetUnitX(GetSpellTargetUnit())
set Cy=GetUnitY(GetSpellTargetUnit())
endif
call KKI(CP2,1097691750)
call UnitRemoveAbility(CP2,1097691750)
call SetUnitFlyHeight(CP2,150,0)
call KKI(CQ2,1097691750)
call UnitRemoveAbility(CQ2,1097691750)
call SetUnitFlyHeight(CQ2,150,0)
set CU2=GetHandleId(DI2)
call SaveUnitHandle(ZY,(CU2),(14),(Y9I))
call SaveUnitHandle(ZY,(CU2),(290),(CP2))
call SaveGroupHandle(ZY,(CU2),(133),(ZJI()))
call SaveReal(ZY,(CU2),(284),((Ax)*1.0))
call SaveReal(ZY,(CU2),(285),((Ay)*1.0))
call SaveReal(ZY,(CU2),(286),((Cx)*1.0))
call SaveReal(ZY,(CU2),(287),((Cy)*1.0))
call SaveReal(ZY,(CU2),(288),((Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+45))*1.0))
call SaveReal(ZY,(CU2),(289),((Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+45))*1.0))
call SaveReal(ZY,(CU2),(137),((1)*1.0))
call SaveReal(ZY,(CU2),(292),((-45)*1.0))
call SaveBoolean(ZY,(CU2),(291),(true))
set D02=GetHandleId(D12)
call SaveUnitHandle(ZY,(D02),(14),(Y9I))
call SaveUnitHandle(ZY,(D02),(290),(CQ2))
call SaveGroupHandle(ZY,(D02),(133),(ZJI()))
call SaveReal(ZY,(D02),(284),((Ax)*1.0))
call SaveReal(ZY,(D02),(285),((Ay)*1.0))
call SaveReal(ZY,(D02),(286),((Cx)*1.0))
call SaveReal(ZY,(D02),(287),((Cy)*1.0))
call SaveReal(ZY,(D02),(288),((Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)-45))*1.0))
call SaveReal(ZY,(D02),(289),((Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)-45))*1.0))
call SaveReal(ZY,(D02),(137),((1)*1.0))
call SaveReal(ZY,(D02),(292),((45)*1.0))
call SaveBoolean(ZY,(D02),(291),(true))
call TimerStart(DI2,.025,true,function CM2)
call TimerStart(D12,.025,true,function CM2)
endfunction
function OG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CK2))
call TriggerAddAction(t,function CR2)
endfunction
function DO2 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local real a=bj_RADTODEG*Atan2(y-RJ,x-TJ)
local real D22
local real D32
if Sin((a-PJ)*bj_DEGTORAD)<0 then
set D22=GetUnitX(GetEnumUnit())+15*Cos((PJ-90)*bj_DEGTORAD)
set D32=GetUnitY(GetEnumUnit())+15*Sin((PJ-90)*bj_DEGTORAD)
call SetUnitPosition(GetEnumUnit(),D22,D32)
call SetUnitFacingTimed(GetEnumUnit(),PJ+90,0.3)
else
set D22=GetUnitX(GetEnumUnit())+15*Cos((PJ+90)*bj_DEGTORAD)
set D32=GetUnitY(GetEnumUnit())+15*Sin((PJ+90)*bj_DEGTORAD)
call SetUnitPosition(GetEnumUnit(),D22,D32)
call SetUnitFacingTimed(GetEnumUnit(),PJ-90,0.3)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetEnumUnit(),"origin"))
endfunction
function D42 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real B92=(LoadReal(ZY,(V0I),(13)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
if GetTriggerEvalCount(t)>16 then
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set TJ=x
set RJ=y
set PJ=B92
call ForGroup(g,function DO2)
endif
set t=null
set g=null
return false
endfunction
function D52 takes nothing returns nothing
call XNI(OK,GetEnumUnit(),1,TJ)
endfunction
function D62 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093685042)
local unit T0I
local real B92=bj_RADTODEG*Atan2(GetUnitY(XTI)-GetUnitY(V8I),GetUnitX(XTI)-GetUnitX(V8I))
local real x
local real y
local group g=ZJI()
local group g2=ZJI()
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093810233)
endif
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveReal(ZY,(V0I),(6),((GetUnitX(V8I))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(V8I))*1.0))
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function D42))
set x=GetUnitX(V8I)+50*Cos(B92*bj_DEGTORAD)
set y=GetUnitY(V8I)+50*Sin(B92*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,250,Condition(function S0I))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set T0I=CreateUnit(GetOwningPlayer(V8I),1865429081,x,y,B92)
call UnitApplyTimedLife(T0I,1112820806,1)
call KKI(T0I,1093684825)
call SetUnitAbilityLevel(T0I,1093684825,WTI)
call IssueImmediateOrder(T0I,"thunderclap")
set x=GetUnitX(V8I)+250*Cos(B92*bj_DEGTORAD)
set y=GetUnitY(V8I)+250*Sin(B92*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,250,Condition(function S0I))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set T0I=CreateUnit(GetOwningPlayer(V8I),1865429081,x,y,B92)
call UnitApplyTimedLife(T0I,1112820806,1)
call KKI(T0I,1093684825)
call SetUnitAbilityLevel(T0I,1093684825,WTI)
call IssueImmediateOrder(T0I,"thunderclap")
set x=GetUnitX(V8I)+450*Cos(B92*bj_DEGTORAD)
set y=GetUnitY(V8I)+450*Sin(B92*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,250,Condition(function S0I))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set T0I=CreateUnit(GetOwningPlayer(V8I),1865429081,x,y,B92)
call UnitApplyTimedLife(T0I,1112820806,1)
call KKI(T0I,1093684825)
call SetUnitAbilityLevel(T0I,1093684825,WTI)
call IssueImmediateOrder(T0I,"thunderclap")
if GetUnitAbilityLevel(V8I,1093685042)==0 then
set x=GetUnitX(V8I)+650*Cos(B92*bj_DEGTORAD)
set y=GetUnitY(V8I)+650*Sin(B92*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,250,Condition(function S0I))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set T0I=CreateUnit(GetOwningPlayer(V8I),1865429081,x,y,B92)
call UnitApplyTimedLife(T0I,1112820806,1)
call KKI(T0I,1093684825)
call SetUnitAbilityLevel(T0I,1093684825,WTI)
call IssueImmediateOrder(T0I,"thunderclap")
endif
call ZYI(g2)
call GroupRemoveUnit(g,XTI)
set TJ=100*WTI
set OK=V8I
call ForGroup(g,function D52)
set t=null
set V8I=null
set XTI=null
set T0I=null
set g=null
set g2=null
endfunction
function D72 takes nothing returns boolean
if(GetSpellAbilityId()==1093685042 or GetSpellAbilityId()==1093810233)and ZXI(GetSpellTargetUnit())==false then
call D62()
endif
return false
endfunction
function OF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D72))
set t=null
endfunction
function D82 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call UnitRemoveAbility(XSI,1093743664)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function D92 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call KKI(XSI,1093743664)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function D82))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function DA2 takes nothing returns boolean
if GetSpellAbilityId()==1093743450 then
call D92()
endif
return false
endfunction
function OZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DA2))
set t=null
endfunction
function DB2 takes nothing returns boolean
return GetSpellAbilityId()==1093685071
endfunction
function DC2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit DD2=(LoadUnitHandle(ZY,(V0I),(2)))
local real DE2=(LoadReal(ZY,(V0I),(6)))
local real DF2=(LoadReal(ZY,(V0I),(7)))
local real DG2=GetUnitX(DD2)
local real DH2=GetUnitY(DD2)
call SaveReal(ZY,(V0I),(6),((DG2)*1.0))
call SaveReal(ZY,(V0I),(7),((DH2)*1.0))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if DE2==DG2 and DF2==DH2 then
if GetUnitAbilityLevel(DD2,1093752647)==0 then
call KKI(DD2,1093752647)
endif
else
if GetUnitAbilityLevel(DD2,1093752647)>0 then
call UnitRemoveAbility(DD2,1093752647)
endif
endif
endif
set t=null
set DD2=null
return false
endfunction
function DZ2 takes nothing returns nothing
if(GetUnitTypeId(GetEnumUnit())==1848652113 or GetUnitTypeId(GetEnumUnit())==1848652109 or GetUnitTypeId(GetEnumUnit())==1848652114 or GetUnitTypeId(GetEnumUnit())==1848652115)then
call KillUnit(GetEnumUnit())
endif
endfunction
function DV2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local player VRI=GetOwningPlayer(Y9I)
local integer WTI=GetUnitAbilityLevel(Y9I,1093685071)
local real x=GetUnitX(Y9I)
local real y=GetUnitY(Y9I)
local group U4I=ZJI()
local unit DD2
local trigger t
local integer V0I
call GroupEnumUnitsOfPlayer(U4I,VRI,Condition(function HRI))
call ForGroup(U4I,function DZ2)
call ZYI(U4I)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",x,y))
if(WTI==1)then
set DD2=CreateUnit(VRI,1848652113,x,y,270)
call UnitApplyTimedLife(DD2,1112820806,60)
elseif(WTI==2)then
set DD2=CreateUnit(VRI,1848652113,x,y,270)
call UnitApplyTimedLife(DD2,1112820806,70)
call UnitApplyTimedLife(CreateUnit(VRI,1848652109,x,y,270),1112820806,70)
elseif(WTI==3)then
set DD2=CreateUnit(VRI,1848652114,x,y,270)
call UnitApplyTimedLife(DD2,1112820806,80)
call UnitApplyTimedLife(CreateUnit(VRI,1848652109,x,y,270),1112820806,80)
elseif(WTI==4)then
set DD2=CreateUnit(VRI,1848652114,x,y,270)
call UnitApplyTimedLife(DD2,1112820806,80)
call UnitApplyTimedLife(CreateUnit(VRI,1848652115,x,y,270),1112820806,90)
endif
if WTI==3 or WTI==4 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,DD2,EVENT_UNIT_DEATH)
call SaveReal(ZY,(V0I),(6),((GetUnitX(DD2))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(DD2))*1.0))
call SaveUnitHandle(ZY,(V0I),(2),(DD2))
call TriggerAddCondition(t,Condition(function DC2))
endif
endfunction
function OH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DB2))
call TriggerAddAction(t,function DV2)
endfunction
function DW2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer V0I=GetHandleId(XSI)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local texttag tt=CreateTextTag()
local integer WLI
local integer i=1
local unit u
local player p2
if WTI==1 then
set WLI=75
elseif WTI==2 then
set WLI=150
else
set WLI=225
endif
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetTextTagText(tt,"+"+I2S(WLI),0.025)
call SetTextTagPosUnit(tt,L1[GetPlayerId(p)],100)
call SetTextTagColor(tt,255,220,0,255)
call SetTextTagVelocity(tt,0,0.03)
call SetTextTagVisibility(tt,false)
if GetLocalPlayer()==p then
call SetTextTagVisibility(tt,true)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set E80[GetPlayerId(p)]=E80[GetPlayerId(p)]+WLI
set UC0=UC0+WLI
if WTI==1 then
set WLI=50
elseif WTI==2 then
set WLI=100
else
set WLI=150
endif
loop
exitwhen i>5
if VLI(p)then
set p2=CO[i]
else
set p2=DO[i]
endif
if p2!=p then
set u=L1[GetPlayerId(p2)]
if J8I(u,XSI)<950 then
set tt=CreateTextTag()
call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD)+WLI)
call SetTextTagText(tt,"+"+I2S(WLI),0.025)
call SetTextTagPosUnit(tt,u,100)
call SetTextTagColor(tt,255,220,0,255)
call SetTextTagVelocity(tt,0,0.03)
call SetTextTagVisibility(tt,false)
if GetLocalPlayer()==p2 then
call SetTextTagVisibility(tt,true)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set E80[GetPlayerId(p2)]=E80[GetPlayerId(p2)]+WLI
set UC0=UC0+WLI
endif
endif
set i=i+1
endloop
set XSI=null
set p=null
set tt=null
endfunction
function DX2 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and(LoadReal(ZY,(GetHandleId(GetTriggerUnit())),(314)))>(TimerGetElapsed(M))then
call DW2()
endif
return false
endfunction
function DY2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
call SetUnitX(T0I,GetUnitX(XTI))
call SetUnitY(T0I,GetUnitY(XTI))
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEvalCount(t)>10 and GetUnitAbilityLevel(XTI,1110454348)==0)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set T0I=null
return false
endfunction
function DJ2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=GetSpellTargetUnit()
local unit XSI=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(XTI),1697657174,GetUnitX(XTI),GetUnitY(XTI),0)
local string FX="war3mapImported\\TrackBuff.mdx"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(XTI))and XJI(GetLocalPlayer())==false then
set FX=""
endif
call KKI(T0I,1093742901)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function DY2))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget(FX,XTI,"overhead")))
call SaveReal(ZY,(GetHandleId(GetSpellTargetUnit())),(314),(((TimerGetElapsed(M))+30)*1.0))
call SavePlayerHandle(ZY,(GetHandleId(GetSpellTargetUnit())),(54),(GetOwningPlayer(GetTriggerUnit())))
call SaveInteger(ZY,(GetHandleId(GetSpellTargetUnit())),(5),(GetUnitAbilityLevel(GetTriggerUnit(),1093681716)))
set t=null
set XTI=null
set XSI=null
set T0I=null
endfunction
function DK2 takes nothing returns boolean
if GetSpellAbilityId()==1093681716 then
call DJ2()
endif
return false
endfunction
function OJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DK2))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function DX2))
set t=null
endfunction
function Jinada_Swap takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(AM),1093749300,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(AM),1093749299,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(AM),1093749301,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(AM),1093749077,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(BM),1093749300,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(BM),1093749299,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(BM),1093749301,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(BM),1093749077,false)
endfunction
function DL2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call UnitRemoveAbility(XTI,1093749079)
call UnitRemoveAbility(XTI,1110459201)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XTI=null
return false
endfunction
function DM2 takes unit XSI,unit XTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function DL2))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call KKI(XTI,1093749079)
call UnitMakeAbilityPermanent(XTI,true,1093749079)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093749079,false)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",XTI,"chest"))
set t=null
endfunction
function DN2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and(GetEventDamage()>40 or IsUnitType(XTI,UNIT_TYPE_STRUCTURE)==true or GetUnitTypeId(XTI)==1970107511 or GetUnitTypeId(XTI)==1700946284)and(LoadBoolean(ZY,(GetHandleId(XSI)),(183)))==true then
call DM2(XSI,XTI)
call SaveBoolean(ZY,(GetHandleId(XSI)),(183),(false))
call SaveReal(ZY,(GetHandleId(XSI)),(184),(((TimerGetElapsed(M)))*1.0))
call UnitRemoveAbility(XSI,1093749075)
call UnitRemoveAbility(XSI,1093749300)
call UnitRemoveAbility(XSI,1093749299)
call UnitRemoveAbility(XSI,1093749301)
call UnitRemoveAbility(XSI,1093749077)
call FlushChildHashtable(ZY,(GetHandleId((LoadTriggerHandle(ZY,(V0I),(35))))))
call ZSI((LoadTriggerHandle(ZY,(V0I),(35))))
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function DS2 takes nothing returns boolean
local trigger t
local integer V0I
local unit XTI
local unit XSI
local integer WTI
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SaveBoolean(ZY,(GetHandleId(GetTriggerUnit())),(183),(false))
call SaveReal(ZY,(GetHandleId(GetTriggerUnit())),(184),(((TimerGetElapsed(M)))*1.0))
call UnitRemoveAbility(GetTriggerUnit(),1093749075)
call UnitRemoveAbility(GetTriggerUnit(),1093749300)
call UnitRemoveAbility(GetTriggerUnit(),1093749299)
call UnitRemoveAbility(GetTriggerUnit(),1093749301)
call UnitRemoveAbility(GetTriggerUnit(),1093749077)
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
elseif GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(182)))then
if IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
set XTI=GetTriggerUnit()
set XSI=GetAttacker()
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function DN2))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveTriggerHandle(ZY,(V0I),(35),(GetTriggeringTrigger()))
set WTI=GetUnitAbilityLevel(GetAttacker(),1093749073)
if WTI==0 then
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749301)
call UnitRemoveAbility(GetAttacker(),1093749077)
elseif WTI==1 then
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749301)
call UnitRemoveAbility(GetAttacker(),1093749077)
elseif WTI==2 then
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749301)
call UnitRemoveAbility(GetAttacker(),1093749077)
elseif WTI==3 then
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749077)
elseif WTI==4 then
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749301)
endif
set XTI=null
set XSI=null
set t=null
endif
endif
return false
endfunction
function DT2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real JOI=(TimerGetElapsed(M))
local integer WTI=GetUnitAbilityLevel(V8I,1093749073)
local real AS2=(LoadReal(ZY,(GetHandleId(V8I)),(184)))
local boolean DR2=(LoadBoolean(ZY,(GetHandleId(V8I)),(183)))
if JOI-AS2>14-WTI*2 and DR2==false and GetUnitTypeId(V8I)==1315007329 and KMI(V8I)==false then
call SaveBoolean(ZY,(GetHandleId(V8I)),(183),(true))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function DS2))
call SaveUnitHandle(ZY,(V0I),(182),(V8I))
call KKI(V8I,1093749075)
if GetUnitAbilityLevel(V8I,1110455864)==0 then
if WTI==1 then
call KKI(V8I,1093749300)
elseif WTI==2 then
call KKI(V8I,1093749299)
elseif WTI==3 then
call KKI(V8I,1093749301)
elseif WTI==4 then
call KKI(V8I,1093749077)
endif
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093749300,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093749299,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093749301,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093749077,false)
elseif DR2==false and GetUnitAbilityLevel(V8I,1110455864)==0 then
call UnitRemoveAbility(V8I,1093749075)
call UnitRemoveAbility(V8I,1093749300)
call UnitRemoveAbility(V8I,1093749299)
call UnitRemoveAbility(V8I,1093749301)
call UnitRemoveAbility(V8I,1093749077)
endif
set t=null
set V8I=null
return false
endfunction
function DP2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function DT2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(181),(0))
set V8I=null
set t=null
endfunction
function DQ2 takes nothing returns boolean
if GetLearnedSkill()==1093749073 and GetUnitAbilityLevel(GetTriggerUnit(),1093749073)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call DP2()
endif
return false
endfunction
function OK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function DQ2))
set t=null
endfunction
function DU2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093678913)
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if((LoadInteger(ZY,(GetHandleId((XSI))),((2487))))==1)==false then
call V5I(XSI,2487,0.5)
if IsUnitType(XTI,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(XTI,GetOwningPlayer(XSI))then
call XNI(XSI,XTI,2,30*WTI)
call K3I(I2S(R2I(30*WTI)),1,XSI,0.027,216,0,0,216)
endif
endif
endif
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function E02 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XTI=GetTriggerUnit()
local unit XSI=GetAttacker()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function DU2))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XTI=null
set XSI=null
set t=null
endfunction
function EI2 takes nothing returns boolean
local integer WTI
local unit V8I
if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or GetTriggerEventId()==EVENT_UNIT_DEATH then
set V8I=(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))
set WTI=GetUnitAbilityLevel(V8I,1093749073)
if(LoadBoolean(ZY,(GetHandleId(V8I)),(183)))then
set WTI=GetUnitAbilityLevel(V8I,1093749073)
if WTI==0 then
call UnitRemoveAbility(V8I,1093749300)
call UnitRemoveAbility(V8I,1093749299)
call UnitRemoveAbility(V8I,1093749301)
call UnitRemoveAbility(V8I,1093749077)
elseif WTI==1 then
call UnitRemoveAbility(V8I,1093749299)
call UnitRemoveAbility(V8I,1093749301)
call UnitRemoveAbility(V8I,1093749077)
elseif WTI==2 then
call UnitRemoveAbility(V8I,1093749300)
call UnitRemoveAbility(V8I,1093749301)
call UnitRemoveAbility(V8I,1093749077)
elseif WTI==3 then
call UnitRemoveAbility(V8I,1093749300)
call UnitRemoveAbility(V8I,1093749299)
call UnitRemoveAbility(V8I,1093749077)
elseif WTI==4 then
call UnitRemoveAbility(V8I,1093749300)
call UnitRemoveAbility(V8I,1093749299)
call UnitRemoveAbility(V8I,1093749301)
endif
else
call UnitRemoveAbility(V8I,1093749300)
call UnitRemoveAbility(V8I,1093749299)
call UnitRemoveAbility(V8I,1093749301)
call UnitRemoveAbility(V8I,1093749077)
endif
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))then
if((LoadInteger(ZY,(GetHandleId((GetAttacker()))),((2488))))==1)==false then
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
call E02()
endif
if(LoadBoolean(ZY,(GetHandleId(GetAttacker())),(183)))then
set WTI=GetUnitAbilityLevel(GetAttacker(),1093749073)
if WTI==0 then
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749301)
call UnitRemoveAbility(GetAttacker(),1093749077)
elseif WTI==1 then
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749301)
call UnitRemoveAbility(GetAttacker(),1093749077)
elseif WTI==2 then
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749301)
call UnitRemoveAbility(GetAttacker(),1093749077)
elseif WTI==3 then
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749077)
elseif WTI==4 then
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749301)
endif
else
call UnitRemoveAbility(GetAttacker(),1093749300)
call UnitRemoveAbility(GetAttacker(),1093749299)
call UnitRemoveAbility(GetAttacker(),1093749301)
call UnitRemoveAbility(GetAttacker(),1093749077)
endif
endif
else
set V8I=(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))
if(LoadBoolean(ZY,(GetHandleId(V8I)),(183)))==false then
call UnitRemoveAbility(V8I,1093749300)
call UnitRemoveAbility(V8I,1093749299)
call UnitRemoveAbility(V8I,1093749301)
call UnitRemoveAbility(V8I,1093749077)
endif
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function E12 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=GetSpellTargetUnit()
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093678913)
call V5I(XSI,2488,1.25-0.25*WTI-0.01)
call TriggerRegisterTimerEvent(t,10+5*WTI,false)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function EI2))
call SaveUnitHandle(ZY,(V0I),(14),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call KKI(XSI,1093749300)
call KKI(XSI,1093749299)
call KKI(XSI,1093749301)
call KKI(XSI,1093749077)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093749300,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093749299,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093749301,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093749077,false)
set t=null
set XTI=null
set XSI=null
endfunction
function EO2 takes nothing returns boolean
if GetSpellAbilityId()==1093678913 then
call E12()
endif
return false
endfunction
function OL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EO2))
set t=null
endfunction
constant function Warpath_AbilityCode takes nothing returns integer
return 1093682774
endfunction
constant function Warpath_EffectCode takes nothing returns integer
return 1093682502
endfunction
constant function Warpath_SprayCode takes nothing returns integer
return 1093683024
endfunction
constant function Warpath_GooCode takes nothing returns integer
return 1093682775
endfunction
function E22 takes nothing returns boolean
return GetSpellAbilityId()==(1093683024)or GetSpellAbilityId()==(1093682775)
endfunction
function E32 takes integer WTI,integer a returns integer
if a==0 then
return 1
else
return(WTI-1)*5+1+a
endif
endfunction
function E42 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1697656920
endfunction
function E52 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function E62 takes player p returns nothing
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,p,Condition(function E42))
call ForGroup(g,function E52)
call ZYI(g)
set g=null
endfunction
function E72 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit V8I=(LoadUnitHandle(ZY,(GetHandleId(t)),(14)))
local integer V0I=GetHandleId(V8I)
local integer WTI=GetUnitAbilityLevel(V8I,(1093682774))
local integer E82=(LoadInteger(ZY,(V0I),(315)))-1
local integer E92=YRI(E82,0,5)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(316)))
local integer EA2
if WTI==1 then
set EA2=10+E92*10-10
elseif WTI==2 then
set EA2=20+E92*15-15
elseif WTI==3 then
set EA2=30+E92*20-20
endif
if E82==0 then
set EA2=0
endif
call PWI(V8I,EA2)
if GetUnitTypeId(T0I)==1697656920 then
call SetUnitAbilityLevel(T0I,(1093682502),E32(WTI,E92))
call SaveInteger(ZY,(V0I),(315),(E82))
else
call E62((LoadPlayerHandle(ZY,(GetHandleId(t)),(54))))
endif
call FlushChildHashtable(ZY,(GetHandleId(t)))
call ZSI(t)
set t=null
set V8I=null
set T0I=null
return false
endfunction
function EB2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer V0I=GetHandleId(V8I)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(316)))
local integer WTI=GetUnitAbilityLevel(V8I,(1093682774))
local integer E82=(LoadInteger(ZY,(V0I),(315)))+1
local integer E92=YRI(E82,0,5)
local integer EC2=E32(WTI,E92)
local trigger t=CreateTrigger()
local integer EA2
if WTI==1 then
set EA2=10+E92*10-10
elseif WTI==2 then
set EA2=20+E92*15-15
elseif WTI==3 then
set EA2=30+E92*20-20
endif
call PWI(V8I,EA2)
call SetUnitAbilityLevel(T0I,(1093682502),EC2)
call SaveInteger(ZY,(V0I),(315),(E82))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(V8I))
call SavePlayerHandle(ZY,(GetHandleId(t)),(54),(GetOwningPlayer(V8I)))
call TriggerRegisterTimerEvent(t,10,false)
call TriggerAddCondition(t,Condition(function E72))
set t=null
endfunction
function ED2 takes nothing returns boolean
return GetLearnedSkill()==(1093682774)and GetUnitAbilityLevel(GetTriggerUnit(),(1093682774))==1 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function EE2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,(1093682774))
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656920,0,0,0)
local trigger t=CreateTrigger()
call KKI(T0I,(1093682502))
call SaveUnitHandle(ZY,(GetHandleId(V8I)),(316),(T0I))
call SetUnitInvulnerable(T0I,true)
call KKI(T0I,1097625443)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E22))
call TriggerAddAction(t,function EB2)
endfunction
function OM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ED2))
call TriggerAddAction(t,function EE2)
call YVI((1093682502))
endfunction
function EF2 takes nothing returns boolean
return GetSpellAbilityId()==1093683024
endfunction
function EG2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1
endfunction
function EH2 takes nothing returns nothing
local integer EZ2=GetHandleId(GetEnumUnit())
local integer EV2=(LoadInteger(ZY,(UD0),(EZ2)))
local real XPI=YPI(KO+EV2*30,180)
call UnitDamageTarget(YO,GetEnumUnit(),XPI,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call SaveInteger(ZY,(UD0),(EZ2),(EV2+1))
endfunction
function EW2 takes nothing returns nothing
local integer EZ2=GetHandleId(GetEnumUnit())
local integer EV2=(LoadInteger(ZY,(UD0),(EZ2)))
call SaveInteger(ZY,(UD0),(EZ2),(EV2-1))
endfunction
function EX2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit Y9I=(LoadUnitHandle(ZY,(V0I),(221)))
local group U4I=(LoadGroupHandle(ZY,(V0I),(317)))
set UD0=GetHandleId(Y9I)
call ForGroup(U4I,function EW2)
call ZYI(U4I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function EY2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local group U4I=ZJI()
local trigger t=CreateTrigger()
if IsUnitType(Y9I,UNIT_TYPE_HERO)==false then
set Y9I=L1[GetPlayerId(GetOwningPlayer(Y9I))]
endif
call GroupEnumUnitsInRange(U4I,GetUnitX(Y9I),GetUnitY(Y9I),650,Condition(function EG2))
set YO=CreateUnit(GetOwningPlayer(Y9I),1697656901,GetUnitX(Y9I),GetUnitY(Y9I),0)
set KO=GetUnitAbilityLevel(Y9I,1093683024)*20
set UD0=GetHandleId(Y9I)
call ForGroup(U4I,function EH2)
call SaveUnitHandle(ZY,(GetHandleId(t)),(221),(Y9I))
call SaveGroupHandle(ZY,(GetHandleId(t)),(317),(U4I))
call TriggerRegisterTimerEvent(t,10,false)
call TriggerAddCondition(t,Condition(function EX2))
set t=null
endfunction
function OT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EF2))
call TriggerAddAction(t,function EY2)
endfunction
function EJ2 takes nothing returns boolean
return GetSpellAbilityId()==1093682775 and ZXI(GetSpellTargetUnit())==false
endfunction
function Trig_Goo_Func001Func001001002 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1697657413)
endfunction
function EK2 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function EL2 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1697657413)
endfunction
function EM2 takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())==4))then
return false
endif
return true
endfunction
function EN2 takes nothing returns nothing
local location YV1=GetUnitLoc(GetTriggerUnit())
call SetUnitPositionLoc(GetEnumUnit(),YV1)
if(EM2())then
call IssueTargetOrder(GetEnumUnit(),"acidbomb",GetSpellTargetUnit())
else
call IncUnitAbilityLevel(GetEnumUnit(),1093682778)
call IssueTargetOrder(GetEnumUnit(),"acidbomb",GetSpellTargetUnit())
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())+1))
endif
call RemoveLocation(YV1)
endfunction
function ES2 takes nothing returns nothing
local location YV1=GetUnitLoc(GetTriggerUnit())
local location ET2=GetUnitLoc(GetSpellTargetUnit())
local group ER2=ZJI()
if(UnitHasBuffBJ(GetSpellTargetUnit(),1110454869)==true)then
call GroupEnumUnitsOfPlayer(ER2,GetOwningPlayer(GetSpellTargetUnit()),Condition(function EL2))
call ForGroupBJ(ER2,function EN2)
else
call GroupEnumUnitsOfPlayer(ER2,GetOwningPlayer(GetSpellTargetUnit()),Condition(function EL2))
call ForGroupBJ(ER2,function EK2)
call DisableTrigger(IH)
call CreateNUnitsAtLocFacingLocBJ(1,1697657413,GetOwningPlayer(GetSpellTargetUnit()),YV1,ET2)
call EnableTrigger(IH)
call UnitAddAbility(bj_lastCreatedUnit,1093682778)
call SetUnitAbilityLevelSwapped(1093682778,bj_lastCreatedUnit,((GetUnitAbilityLevelSwapped(1093682775,GetTriggerUnit())*4)-3))
call IssueTargetOrder(bj_lastCreatedUnit,"acidbomb",GetSpellTargetUnit())
call SetUnitUserData(bj_lastCreatedUnit,1)
endif
call ZYI(ER2)
call RemoveLocation(YV1)
call RemoveLocation(ET2)
endfunction
function ON1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EJ2))
call TriggerAddAction(t,function ES2)
endfunction
function EP2 takes nothing returns boolean
return GetLearnedSkill()==1093684531 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function EQ2 takes nothing returns boolean
if(IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==true)then
return false
endif
return true
endfunction
function EU2 takes unit V8I returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
call KKI(T0I,1093683024)
call SetUnitAbilityLevel(T0I,1093683024,GetUnitAbilityLevel(V8I,1093683024))
call IssueImmediateOrder(T0I,"fanofknives")
set T0I=null
endfunction
function F02 takes unit V8I,real XPI returns nothing
local integer V0I=GetHandleId(V8I)
local real TVI=(LoadReal(ZY,(V0I),(278)))
if TVI>250 then
call SaveReal(ZY,(V0I),(278),((0)*1.0))
call EU2(V8I)
else
call SaveReal(ZY,(V0I),(278),((TVI+XPI)*1.0))
endif
endfunction
function FI2 takes nothing returns nothing
local unit F12=GetTriggerUnit()
local unit SF1=GetEventDamageSource()
local real FO2=JRI(SF1,F12)
local real F22=GetUnitFacing(F12)
local real F32
local real XPI=GetEventDamage()
local real F42
local real B92
if(XPI>5)and GetUnitState(F12,UNIT_STATE_LIFE)>1 then
if((F22-FO2)<(-180.00))then
set F32=(F22-FO2+360)
else
if((F22-FO2)>180.00)then
set F32=(F22-FO2-360)
else
set F32=(F22-FO2)
endif
endif
set B92=RAbsBJ(F32)
if B92<=70 then
set F42=(GetUnitAbilityLevel(F12,1093684531)*0.08+0.08)*XPI
call F02(F12,XPI-F42)
call SetUnitState(F12,UNIT_STATE_LIFE,GetUnitState(F12,UNIT_STATE_LIFE)+F42)
elseif B92<=110 then
set F42=(GetUnitAbilityLevel(F12,1093684531)*0.04+0.04)*XPI
call SetUnitState(F12,UNIT_STATE_LIFE,GetUnitState(F12,UNIT_STATE_LIFE)+F42)
endif
endif
set F12=null
set SF1=null
endfunction
function F52 takes nothing returns nothing
local trigger t
if GetUnitAbilityLevel(GetTriggerUnit(),1093684531)==1 then
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function EQ2))
call TriggerAddAction(t,function FI2)
endif
endfunction
function OS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function EP2))
call TriggerAddAction(t,function F52)
endfunction
function F62 takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1093677142)>0 and GetUnitAbilityLevel(GetAttacker(),1093678162)!=1 and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false and GetUnitTypeId(GetAttacker())!=1848657461
endfunction
function F72 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetAttacker()
local integer WTI=GetUnitAbilityLevel(XSI,1093677142)
local integer F82=GetHeroStr(XSI,true)
local real XPI=16+(0.18+0.08*WTI)*F82
call XNI(XSI,XTI,2,XPI)
set XSI=null
set XTI=null
endfunction
function OP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function F62))
call TriggerAddAction(t,function F72)
endfunction
function F92 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093677132)
local real FA2
call XNI(XSI,XTI,1,100+WTI*75)
set FA2=100+WTI*75
if GetUnitState(XSI,UNIT_STATE_LIFE)<=FA2*0.75 then
set FA2=GetUnitState(XSI,UNIT_STATE_LIFE)/0.75-10
endif
call XNI(XSI,XSI,1,FA2)
call DestroyEffect(AddSpecialEffect("war3mapImported\\DoubleEdgeTarget.mdx",GetUnitX(XTI),GetUnitY(XTI)))
set XSI=null
set XTI=null
endfunction
function FB2 takes nothing returns boolean
if GetSpellAbilityId()==1093677132 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call F92()
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\DoubleEdgeCaster.mdx",GetTriggerUnit(),"hand, right"))
endif
endif
return false
endfunction
function OR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function FB2))
set t=null
endfunction
function FC2 takes nothing returns boolean
return GetSpellAbilityId()==1093684310
endfunction
function FD2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit FE2=(LoadUnitHandle(ZY,(V0I),(2)))
local unit u=(LoadUnitHandle(ZY,(V0I),(26)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
if(LoadBoolean(ZY,(GetHandleId(u)),(80)))==false and GetUnitAbilityLevel(u,1093678162)==0 then
call V5I(u,4409,1)
call SetUnitPosition(u,x,y)
endif
if(LoadBoolean(ZY,(GetHandleId(u)),(80)))==true then
call Y3I(GetOwningPlayer(FE2),GetObjectName(1848652598))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set FE2=null
set u=null
return false
endfunction
function FF2 takes unit u,unit FG2,integer FH2,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
if IsUnitOwnedByPlayer(u,GetOwningPlayer(FG2))then
call TriggerRegisterTimerEvent(t,0.1,false)
else
call TriggerRegisterTimerEvent(t,7-FH2,false)
endif
call TriggerAddCondition(t,Condition(function FD2))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("effects\\Test_of_Faith_FX.mdx",u,"overhead")))
call SaveUnitHandle(ZY,(V0I),(26),(u))
call SaveUnitHandle(ZY,(V0I),(2),(FG2))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
set t=null
endfunction
function FZ2 takes nothing returns nothing
local unit XTI=GetSpellTargetUnit()
local unit FE2=GetTriggerUnit()
local location YV1=GetUnitLoc(FE2)
local unit T0I
local integer FH2=GetUnitAbilityLevel(FE2,1093684310)
local real T2I
local location FV2
local effect fx
if(VLI(GetOwningPlayer(FE2)))then
set FV2=GetRectCenter(A4)
else
set FV2=GetRectCenter(T3)
endif
if(IsUnitAlly(XTI,GetOwningPlayer(FE2))==false)then
if ZXI(GetSpellTargetUnit())==false then
set T2I=GetRandomInt(50*FH2,100*FH2)
call K3I(I2S(R2I(T2I)),1,XTI,0.023,255,255,0,216)
call UnitDamageTargetBJ(FE2,XTI,T2I,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)
set fx=AddSpecialEffectTargetUnitBJ("chest",XTI,"Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
call DestroyEffect(fx)
endif
else
if(IsUnitType(XTI,UNIT_TYPE_HERO)==true)then
if((LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(XTI))),(139)))==false)then
call FF2(XTI,FE2,FH2,GetLocationX(FV2),GetLocationY(FV2))
endif
elseif(IsUnitOwnedByPlayer(XTI,GetOwningPlayer(FE2))==true)then
call SetUnitPositionLoc(XTI,FV2)
endif
endif
call RemoveLocation(YV1)
call RemoveLocation(FV2)
endfunction
function AI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FC2))
call TriggerAddAction(t,function FZ2)
endfunction
function FW2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real FY2
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>10 then
set FY2=GetEventDamage()*0.07*WTI
call DisableTrigger(t)
call XNI(GetEventDamageSource(),GetTriggerUnit(),2,FY2)
call EnableTrigger(t)
endif
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
return false
endfunction
function FJ2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=GetSpellTargetUnit()
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093684045)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",XSI,"chest"))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TriggerRegisterTimerEvent(t,7,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function FW2))
set t=null
set XTI=null
set XSI=null
endfunction
function FK2 takes nothing returns boolean
if GetSpellAbilityId()==1093684045 then
call FJ2()
endif
return false
endfunction
function OQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FK2))
set t=null
endfunction
function FL2 takes nothing returns boolean
if(not(GetSpellAbilityId()==1093678649))then
return false
endif
return true
endfunction
function FM2 takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false)then
if(IsUnitAliveBJ(GetFilterUnit()))then
if XBI(GetFilterUnit())==false then
if(GetUnitTypeId(GetFilterUnit())!=1852010352)then
if(GetUnitAbilityLevel(GetFilterUnit(),1097167976)==1)then
if((GetUnitAbilityLevel(GetFilterUnit(),1093684047)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684049)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684050)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684048)==1))then
return true
endif
endif
endif
endif
endif
endif
return false
endfunction
function FN2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit FE2=(LoadUnitHandle(ZY,(V0I),(2)))
local integer FS2=(LoadInteger(ZY,(V0I),(157)))
local group U4I=ZJI()
local unit JPO
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(FE2),Condition(function FM2))
loop
exitwhen(CountUnitsInGroup(U4I)<=FS2)
set JPO=GroupPickRandomUnit(U4I)
call GroupRemoveUnit(U4I,JPO)
call KillUnit(JPO)
endloop
call ZYI(U4I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set FE2=null
set t=null
set U4I=null
set JPO=null
return false
endfunction
function FT2 takes nothing returns nothing
local unit FR2=GetSpellTargetUnit()
local unit FE2=GetTriggerUnit()
local integer FH2=GetUnitAbilityLevel(FE2,1093678649)
local integer FS2=1
local integer playerid=GetPlayerId(GetOwningPlayer(FE2))
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call JBI(FR2)
if(FH2==1)then
call KKI(FR2,1093684047)
endif
if(FH2==2)then
call KKI(FR2,1093684049)
endif
if(FH2==3)then
set FS2=2
call KKI(FR2,1093684050)
endif
if(FH2==4)then
set FS2=3
call KKI(FR2,1093684048)
endif
call KKI(FR2,1097167976)
call KKI(FR2,1093743175)
call SaveUnitHandle(ZY,(V0I),(2),(FE2))
call SaveInteger(ZY,(V0I),(157),(FS2))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function FN2))
set t=null
set FR2=null
set FE2=null
endfunction
function FP2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I
local real x
local real y
if IsUnitEnemy(XTI,GetOwningPlayer(XSI))then
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call UnitAddAbility(T0I,1093678649)
call SetUnitAbilityLevel(T0I,1093678649,GetUnitAbilityLevel(XSI,1093810260))
call IssueTargetOrder(T0I,"charm",XTI)
else
if VLI(GetOwningPlayer(XSI))then
set x=GetRectCenterX(A4)
set y=GetRectCenterY(A4)
else
set x=GetRectCenterX(T3)
set y=GetRectCenterY(T3)
endif
if(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(XTI))),(139)))==false then
call FF2(XTI,XSI,GetUnitAbilityLevel(XSI,1093810260),x,y)
endif
endif
set XSI=null
set XTI=null
set T0I=null
endfunction
function FQ2 takes nothing returns boolean
if GetSpellAbilityId()==1093810260 and ZXI(GetSpellTargetUnit())==false then
call FP2()
endif
return false
endfunction
function FU2 takes nothing returns boolean
if GetSpellAbilityId()==1093810260 then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true then
if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetSpellTargetUnit())then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658745))
endif
endif
endif
return false
endfunction
function A01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FL2))
call TriggerAddAction(t,function FT2)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function FU2))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FQ2))
set t=null
endfunction
function G02 takes nothing returns boolean
return GetSpellAbilityId()==1093684308 or GetSpellAbilityId()==1093747539
endfunction
function GI2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1
endfunction
function G12 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local integer FH2=GetUnitAbilityLevel(Y9I,1093684308)
local group U4I=ZJI()
local unit JPO
if FH2==0 then
set FH2=GetUnitAbilityLevel(Y9I,1093747539)
endif
call GroupEnumUnitsInRect(U4I,bj_mapInitialPlayableArea,Condition(function GI2))
loop
set JPO=FirstOfGroup(U4I)
exitwhen JPO==null
if(IsUnitAlly(JPO,GetOwningPlayer(Y9I))==true)then
call SetWidgetLife(JPO,(GetUnitStateSwap(UNIT_STATE_LIFE,JPO)+100+(100*FH2)))
call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",JPO,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))
endif
call GroupRemoveUnit(U4I,JPO)
endloop
call ZYI(U4I)
set U4I=ZJI()
set bj_groupEnumOwningPlayer=GetOwningPlayer(Y9I)
call GroupEnumUnitsInRect(U4I,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
loop
set JPO=FirstOfGroup(U4I)
exitwhen JPO==null
if(IsUnitType(JPO,UNIT_TYPE_HERO)==false and GetUnitTypeId(JPO)!=1848651843)then
call SetUnitLifePercentBJ(JPO,100)
call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",JPO,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))
endif
call GroupRemoveUnit(U4I,JPO)
endloop
call ZYI(U4I)
endfunction
function OU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G02))
call TriggerAddAction(t,function G12)
endfunction
function GO2 takes nothing returns nothing
if XBI(GetEnumUnit())==false then
call XNI(UF0,GetEnumUnit(),1,UE0)
endif
endfunction
function G22 takes unit XSI,real x,real y returns nothing
local real x1
local real y1
local group g=ZJI()
local integer WTI=GetUnitAbilityLevel(XSI,1093687862)
local real XPI=40+40*WTI
set OK=XSI
set UF0=XSI
set UE0=XPI
call GroupEnumUnitsInRange(g,x,y,600,Condition(function SOI))
call ForGroup(g,function GO2)
call ZYI(g)
set x1=x
set y1=y
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x+200
set y1=y+200
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x+200
set y1=y-200
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x-200
set y1=y+200
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x-200
set y1=y-200
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
call KZI(GetOwningPlayer(XSI),10,x,y,600)
set g=null
endfunction
function G32 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real J4I=(LoadReal(ZY,(V0I),(189)))
local real J5I=(LoadReal(ZY,(V0I),(190)))
local real KUI=YEI(J4I+30*Cos(B92))
local real L0I=YHI(J5I+30*Sin(B92))
local real G42
local real G52
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
call SaveReal(ZY,(V0I),(189),((KUI)*1.0))
call SaveReal(ZY,(V0I),(190),((L0I)*1.0))
if KAI(J6I,J7I,KUI,L0I)<=35 then
call KillUnit(KRI)
set V8I=(LoadUnitHandle(ZY,(V0I),(14)))
call G22(V8I,KUI,L0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
set KRI=null
return false
endfunction
function G62 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local real J4I=YEI(GetUnitX(V8I))
local real J5I=YHI(GetUnitY(V8I))
local location FV2=GetSpellTargetLoc()
local real J6I=YEI(GetLocationX(FV2))
local real J7I=YHI(GetLocationY(FV2))
local real B92=Atan2(J7I-J5I,J6I-J4I)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(V8I),1747989337,J4I,J5I,B92*bj_RADTODEG)
call RemoveLocation(FV2)
call SetUnitFacing(KRI,B92*bj_RADTODEG)
call SetUnitPathing(KRI,false)
call KKI(KRI,1097625443)
call ShowUnit(KRI,false)
call UnitRemoveAbility(KRI,1097625443)
call ShowUnit(KRI,true)
call SaveReal(ZY,(V0I),(191),((J4I)*1.0))
call SaveReal(ZY,(V0I),(192),((J5I)*1.0))
call SaveReal(ZY,(V0I),(189),((J4I)*1.0))
call SaveReal(ZY,(V0I),(190),((J5I)*1.0))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function G32))
set V8I=null
set FV2=null
set t=null
set KRI=null
endfunction
function G72 takes nothing returns boolean
if GetSpellAbilityId()==1093687862 then
call G62()
endif
return false
endfunction
function HF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G72))
set t=null
endfunction
function G82 takes real s,real d1,real d2,real d3 returns boolean
return s<=d1 and s<=d2 and s<=d3
endfunction
function G92 takes unit u,real x,real y,real d returns real
local real x2=GetUnitX(u)
local real y2=GetUnitY(u)
local real GA2=JAI(x-d,y,x2,y2)
local real GB2=JAI(x+d,y,x2,y2)
local real GC2=JAI(x,y+d,x2,y2)
local real GD2=JAI(x,y-d,x2,y2)
if G82(GA2,GB2,GD2,GC2)then
return 180.0
elseif G82(GB2,GA2,GD2,GC2)then
return 0.0
elseif G82(GD2,GB2,GA2,GC2)then
return 270.0
endif
return 90.0
endfunction
function GE2 takes real s,real d1,real d2,real d3,real d4,real d5,real d6,real d7 returns boolean
return s<=d1 and s<=d2 and s<=d3 and s<=d4 and s<=d5 and s<=d6 and s<=d7
endfunction
function GF2 takes unit u,integer V0I returns unit
local real x1=GetUnitX(u)
local real y1=GetUnitY(u)
local unit GG2=(LoadUnitHandle(ZY,(V0I),(1100+1)))
local unit GH2=(LoadUnitHandle(ZY,(V0I),(1100+2)))
local unit GZ2=(LoadUnitHandle(ZY,(V0I),(1100+3)))
local unit GV2=(LoadUnitHandle(ZY,(V0I),(1100+4)))
local unit GW2=(LoadUnitHandle(ZY,(V0I),(1100+5)))
local unit GX2=(LoadUnitHandle(ZY,(V0I),(1100+6)))
local unit GY2=(LoadUnitHandle(ZY,(V0I),(1100+7)))
local unit GJ2=(LoadUnitHandle(ZY,(V0I),(1100+8)))
local real d1=JAI(x1,y1,GetUnitX(GG2),GetUnitY(GG2))
local real d2=JAI(x1,y1,GetUnitX(GH2),GetUnitY(GH2))
local real d3=JAI(x1,y1,GetUnitX(GZ2),GetUnitY(GZ2))
local real d4=JAI(x1,y1,GetUnitX(GV2),GetUnitY(GV2))
local real d5=JAI(x1,y1,GetUnitX(GW2),GetUnitY(GW2))
local real d6=JAI(x1,y1,GetUnitX(GX2),GetUnitY(GX2))
local real d7=JAI(x1,y1,GetUnitX(GY2),GetUnitY(GY2))
local real d8=JAI(x1,y1,GetUnitX(GJ2),GetUnitY(GJ2))
if GE2(d1,d2,d3,d4,d5,d6,d7,d8)then
return GG2
elseif GE2(d2,d1,d3,d4,d5,d6,d7,d8)then
return GH2
elseif GE2(d3,d2,d1,d4,d5,d6,d7,d8)then
return GZ2
elseif GE2(d4,d2,d3,d1,d5,d6,d7,d8)then
return GV2
elseif GE2(d5,d2,d3,d4,d1,d6,d7,d8)then
return GW2
elseif GE2(d6,d2,d3,d4,d5,d1,d7,d8)then
return GX2
elseif GE2(d7,d2,d3,d4,d5,d6,d1,d8)then
return GY2
elseif GE2(d8,d2,d3,d4,d5,d6,d7,d1)then
return GJ2
endif
return null
endfunction
function GK2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local real GL2=12
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer GM2=40+15*WTI
if GetTriggerEvalCount(t)>21 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SaveInteger(ZY,(GetHandleId((XTI))),((4260)),(2))
call XNI(XSI,XTI,1,I2R(GM2))
call SetUnitState(XTI,UNIT_STATE_MANA,YQI(GetUnitState(XTI,UNIT_STATE_MANA)-GM2,0))
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",x,y))
call KCI(x,y,150)
if((LoadInteger(ZY,(GetHandleId((XTI))),((4261))))==1)==false then
call SetUnitPosition(XTI,x+GL2*Cos(B92*bj_DEGTORAD),y+GL2*Sin(B92*bj_DEGTORAD))
endif
endif
set t=null
set XTI=null
return false
endfunction
function GN2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=GetEnumUnit()
local real x=TJ
local real y=RJ
local real d=PJ
local real B92=G92(XTI,x,y,d)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",XTI,"chest"))
call SaveInteger(ZY,(GetHandleId((XTI))),((4260)),(1))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveInteger(ZY,(V0I),(5),(MJ))
call SaveUnitHandle(ZY,(V0I),(2),(OK))
call TriggerRegisterTimerEvent(t,0.04,true)
call TriggerAddCondition(t,Condition(function GK2))
set t=null
set XTI=null
endfunction
function GS2 takes unit u,integer V0I returns boolean
local unit GT2=GF2(u,V0I)
local boolean RRI=true
if KMI(GT2)or(LoadInteger(ZY,(GetHandleId(GT2)),(156)))==1 then
set RRI=false
endif
call SaveInteger(ZY,(GetHandleId(GT2)),(156),(1))
call SetUnitVertexColor(GT2,25,25,25,175)
set GT2=null
return RRI
endfunction
function GR2 takes nothing returns nothing
if GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)>0 and IsUnitInGroup(GetEnumUnit(),EK)==false and((LoadInteger(ZY,(GetHandleId((GetEnumUnit()))),((4260))))==1)==false and GS2(GetEnumUnit(),UG0)then
call SaveInteger(ZY,(GetHandleId((GetEnumUnit()))),((4260)),(1))
call GroupAddUnit(FK,GetEnumUnit())
endif
endfunction
function GP2 takes trigger t,unit V8I,real x,real y,real d,integer WTI returns nothing
local integer V0I=GetHandleId(t)
local real GQ2=200
local rect r1=Rect(x-d,y-d,x+d,y+d)
local rect r2=Rect(x-d-GQ2,y-d-GQ2,x+d+GQ2,y+d+GQ2)
local group g1=ZJI()
local group g2=ZJI()
local group g3=ZJI()
set OK=V8I
call GroupEnumUnitsInRect(g1,r1,Condition(function SOI))
call GroupEnumUnitsInRect(g2,r2,Condition(function SOI))
set EK=g1
set FK=g3
set TJ=x
set RJ=y
set PJ=d
set UG0=V0I
call ForGroup(g2,function GR2)
set MJ=WTI
call ForGroup(g3,function GN2)
call ZYI(g1)
call ZYI(g2)
call ZYI(g3)
call RemoveRect(r1)
call RemoveRect(r2)
set g1=null
set g2=null
set g3=null
set r1=null
set r2=null
endfunction
function GU2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local boolean H02=(LoadBoolean(ZY,(V0I),(155)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if H02 then
call KZI(p,.2,x,y,500)
endif
set t=null
set p=null
return false
endfunction
function HI2 takes unit H12 returns nothing
local real x=GetUnitX(H12)
local real y=GetUnitY(H12)
local player p=GetOwningPlayer(H12)
local unit T0I=CreateUnit(p,1966092375,x,y,0)
call KillUnit(T0I)
set p=null
set T0I=null
endfunction
function HO2 takes integer V0I,real x,real y,boolean H02,player p returns nothing
local unit GG2=(LoadUnitHandle(ZY,(V0I),(1100+1)))
local unit GH2=(LoadUnitHandle(ZY,(V0I),(1100+2)))
local unit GZ2=(LoadUnitHandle(ZY,(V0I),(1100+3)))
local unit GV2=(LoadUnitHandle(ZY,(V0I),(1100+4)))
local unit GW2=(LoadUnitHandle(ZY,(V0I),(1100+5)))
local unit GX2=(LoadUnitHandle(ZY,(V0I),(1100+6)))
local unit GY2=(LoadUnitHandle(ZY,(V0I),(1100+7)))
local unit GJ2=(LoadUnitHandle(ZY,(V0I),(1100+8)))
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.1,false)
call TriggerAddCondition(t,Condition(function GU2))
call SaveReal(ZY,(GetHandleId(t)),(6),((x)*1.0))
call SaveReal(ZY,(GetHandleId(t)),(7),((y)*1.0))
call SavePlayerHandle(ZY,(GetHandleId(t)),(54),(p))
call SaveBoolean(ZY,(GetHandleId(t)),(155),(H02))
call HI2(GG2)
call RemoveUnit(GG2)
call HI2(GH2)
call RemoveUnit(GH2)
call HI2(GZ2)
call RemoveUnit(GZ2)
call HI2(GV2)
call RemoveUnit(GV2)
call HI2(GW2)
call RemoveUnit(GW2)
call HI2(GX2)
call RemoveUnit(GX2)
call HI2(GY2)
call RemoveUnit(GY2)
call HI2(GJ2)
call RemoveUnit(GJ2)
set GG2=null
set GH2=null
set GZ2=null
set GV2=null
set GW2=null
set GX2=null
set GY2=null
set GJ2=null
endfunction
function H22 takes unit H12,integer V0I,integer HWI,player p returns nothing
if IsUnitVisible(H12,p)then
call SaveBoolean(ZY,(V0I),(155),(true))
endif
call SaveUnitHandle(ZY,(V0I),(1100+HWI),(H12))
endfunction
function H32 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real SQI=(LoadReal(ZY,(V0I),(57)))
local integer ZLI=GetTriggerEvalCount(t)
if ZLI>R2I(SQI*10)then
call HO2(V0I,(LoadReal(ZY,(V0I),(6))),(LoadReal(ZY,(V0I),(7))),(LoadBoolean(ZY,(V0I),(155))),(LoadPlayerHandle(ZY,(V0I),(154))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call GP2(t,(LoadUnitHandle(ZY,(V0I),(14))),(LoadReal(ZY,(V0I),(6))),(LoadReal(ZY,(V0I),(7))),(LoadReal(ZY,(V0I),(138))),(LoadInteger(ZY,(V0I),(5))))
endif
set t=null
return false
endfunction
function H42 takes nothing returns nothing
call SetUnitX(GetEnumUnit(),GetUnitX(OK))
call SetUnitY(GetEnumUnit(),GetUnitY(OK))
endfunction
function H52 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=GetUnitAbilityLevel(V8I,1093687861)
local integer ID=1966092371
local real x1=GetUnitX(V8I)
local real y1=GetUnitY(V8I)
local real x2
local real y2
local real d=125
local unit H12
local real SQI=2+WTI
local real BufferDuration=5
local group g
local rect H62
local player MUO
if VLI(GetOwningPlayer(V8I))then
set MUO=DO[0]
else
set MUO=CO[0]
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveBoolean(ZY,(V0I),(155),(false))
set x2=x1+d
set y2=y1
set H12=CreateUnit(GetOwningPlayer(V8I),ID,x2,y2,0)
call SetUnitPosition(H12,x2,y2)
call H22(H12,V0I,1,MUO)
set x2=x1+d
set y2=y1+d
set H12=CreateUnit(GetOwningPlayer(V8I),ID,x2,y2,0)
call SetUnitPosition(H12,x2,y2)
call H22(H12,V0I,2,MUO)
set x2=x1
set y2=y1+d
set H12=CreateUnit(GetOwningPlayer(V8I),ID,x2,y2,0)
call SetUnitPosition(H12,x2,y2)
call H22(H12,V0I,3,MUO)
set x2=x1-d
set y2=y1+d
set H12=CreateUnit(GetOwningPlayer(V8I),ID,x2,y2,0)
call SetUnitPosition(H12,x2,y2)
call H22(H12,V0I,4,MUO)
set x2=x1-d
set y2=y1
set H12=CreateUnit(GetOwningPlayer(V8I),ID,x2,y2,0)
call SetUnitPosition(H12,x2,y2)
call H22(H12,V0I,5,MUO)
set x2=x1-d
set y2=y1-d
set H12=CreateUnit(GetOwningPlayer(V8I),ID,x2,y2,0)
call SetUnitPosition(H12,x2,y2)
call H22(H12,V0I,6,MUO)
set x2=x1
set y2=y1-d
set H12=CreateUnit(GetOwningPlayer(V8I),ID,x2,y2,0)
call SetUnitPosition(H12,x2,y2)
call H22(H12,V0I,7,MUO)
set x2=x1+d
set y2=y1-d
set H12=CreateUnit(GetOwningPlayer(V8I),ID,x2,y2,0)
call SetUnitPosition(H12,x2,y2)
call H22(H12,V0I,8,MUO)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function H32))
call SaveReal(ZY,(V0I),(57),((SQI)*1.0))
call SaveReal(ZY,(V0I),(6),((x1)*1.0))
call SaveReal(ZY,(V0I),(7),((y1)*1.0))
call SaveReal(ZY,(V0I),(138),((d)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SavePlayerHandle(ZY,(V0I),(154),(MUO))
set d=d+110
set g=ZJI()
set H62=Rect(x1-d,y1-d,x1+d,y1+d)
set OK=V8I
call GroupEnumUnitsInRect(g,H62,Condition(function SYI))
call ForGroup(g,function H42)
call ZYI(g)
set t=null
set g=null
set V8I=null
set H12=null
set H62=null
set MUO=null
return false
endfunction
function H72 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,0.1,false)
call TriggerAddCondition(t,Condition(function H52))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
set t=null
set V8I=null
endfunction
function H82 takes nothing returns boolean
if GetSpellAbilityId()==1093687861 then
call H72()
endif
return false
endfunction
function HE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H82))
set t=null
endfunction
function H92 takes unit XSI,unit XTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local integer WTI=GetUnitAbilityLevel(XSI,1093687864)
if WTI==0 then
set WTI=GetUnitAbilityLevel(XSI,1093747542)
endif
call KKI(T0I,1093687865)
call SetUnitAbilityLevel(T0I,1093687865,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
set T0I=null
endfunction
function HA2 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EK)==false then
call GroupAddUnit(EK,GetEnumUnit())
call H92(OK,GetEnumUnit())
endif
endfunction
function HB2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer HC2=(LoadInteger(ZY,(V0I),(18)))
local integer ZLI=GetTriggerEvalCount(t)
local unit HD2
local group HE2=(LoadGroupHandle(ZY,(V0I),(16)))
local group g
local real HF2=200
if XTI==null then
set HD2=(LoadUnitHandle(ZY,(V0I),(700+HC2+1-ZLI)))
call RemoveUnit(HD2)
else
set HD2=(LoadUnitHandle(ZY,(V0I),(700+ZLI)))
call SetUnitX(V8I,GetUnitX(HD2))
call SetUnitY(V8I,GetUnitY(HD2))
call RemoveUnit(HD2)
if ZLI==HC2 then
set HF2=225
endif
set g=ZJI()
set OK=V8I
set EK=HE2
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),HF2,Condition(function S4I))
call ForGroup(g,function HA2)
call ZYI(g)
endif
if ZLI==(HC2)then
if XTI!=null then
call PauseUnit(XTI,false)
endif
call KCI(GetUnitX(V8I),GetUnitY(V8I),100)
call ZYI(HE2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
set XTI=null
set HD2=null
set HE2=null
set g=null
return false
endfunction
function HG2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local integer HH2=(LoadInteger(ZY,(V0I),(12)))
local integer ZLI=GetTriggerEvalCount(t)
local real x=GetUnitX(V8I)+ZLI*50*Cos(B92*bj_DEGTORAD)
local real y=GetUnitY(V8I)+ZLI*50*Sin(B92*bj_DEGTORAD)
local boolean HZ2=(LoadBoolean(ZY,(V0I),(15)))
local unit HV2
local trigger HW2=(LoadTriggerHandle(ZY,(V0I),(11)))
local integer HX2=GetHandleId(HW2)
local group g=ZJI()
local unit XTI=null
local integer ID=1966092374
local real HF2=125
if ZLI==1 then
set HF2=100
endif
set OK=V8I
call GroupEnumUnitsInRange(g,x,y,HF2,Condition(function NPI))
call GroupRemoveUnit(g,V8I)
set XTI=GroupPickRandomUnit(g)
call ZYI(g)
if XTI!=null or ZLI==HH2 or ZLI==(HH2-1)or ZLI==(HH2-2)then
set ID=1966092373
endif
set HV2=CreateUnit(GetOwningPlayer(V8I),ID,x,y,B92)
call SaveUnitHandle(ZY,(HX2),(700+ZLI),(HV2))
if XTI!=null then
if(IsUnitAlly(XTI,GetOwningPlayer(V8I))==true and HZ2==false)or GetOwningPlayer(XTI)==EO or((LoadInteger(ZY,(GetHandleId((XTI))),((4259))))==1)==true then
set XTI=null
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if XTI!=null and IsUnitAlly(XTI,GetOwningPlayer(V8I))==false then
call PauseUnit(XTI,true)
endif
call TriggerRegisterTimerEvent(HW2,0.5/HH2,true)
call TriggerAddCondition(HW2,Condition(function HB2))
call SaveInteger(ZY,(HX2),(18),(ZLI))
call SaveUnitHandle(ZY,(HX2),(17),(XTI))
call SaveUnitHandle(ZY,(HX2),(14),(V8I))
call SaveGroupHandle(ZY,(HX2),(16),(ZJI()))
elseif ZLI>HH2 then
set XTI=null
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call TriggerRegisterTimerEvent(HW2,0.5/HH2,true)
call TriggerAddCondition(HW2,Condition(function HB2))
call SaveInteger(ZY,(HX2),(18),(ZLI))
call SaveUnitHandle(ZY,(HX2),(17),(XTI))
call SaveUnitHandle(ZY,(HX2),(14),(V8I))
call SaveGroupHandle(ZY,(HX2),(16),(ZJI()))
endif
set t=null
set V8I=null
set HV2=null
set HW2=null
set g=null
set XTI=null
return false
endfunction
function HY2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real B92=JPI(GetUnitX(V8I),GetUnitY(V8I),GetLocationX(l),GetLocationY(l))
local integer WTI=GetUnitAbilityLevel(V8I,1093687864)
local integer HJ2
local integer HH2
local boolean HZ2=false
local trigger HK2=CreateTrigger()
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093747542)
set HZ2=true
endif
set HJ2=1500+500*WTI
set HH2=HJ2/50
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveInteger(ZY,(V0I),(12),(HH2))
call SaveTriggerHandle(ZY,(V0I),(11),(HK2))
call SaveBoolean(ZY,(V0I),(15),(HZ2))
call TriggerRegisterTimerEvent(t,0.5/HH2,true)
call TriggerAddCondition(t,Condition(function HG2))
call RemoveLocation(l)
set t=null
set V8I=null
set l=null
endfunction
function HL2 takes nothing returns boolean
if GetSpellAbilityId()==1093687864 or GetSpellAbilityId()==1093747542 then
call HY2()
endif
return false
endfunction
function HG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HL2))
set t=null
endfunction
function HM2 takes unit XSI returns nothing
local group g=ZJI()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit XTI
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
local integer WTI=GetUnitAbilityLevel(XSI,1093687860)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,300,Condition(function S6I))
set XTI=GroupPickRandomUnit(g)
call ZYI(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",XSI,"origin"))
if XTI!=null then
call KKI(T0I,1093687863)
call SetUnitAbilityLevel(T0I,1093687863,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
endif
set g=null
set XTI=null
set T0I=null
endfunction
function HN2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if ZLI>14 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call HM2(V8I)
endif
set t=null
set V8I=null
return false
endfunction
function HS2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.75,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HN2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerEvaluate(t)
set t=null
set V8I=null
endfunction
function HT2 takes nothing returns boolean
if GetSpellAbilityId()==1093687860 then
call HS2()
endif
return false
endfunction
function HD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HT2))
set t=null
endfunction
function HR2 takes nothing returns nothing
call XNI(UH0,GetEnumUnit(),1,UZ0)
endfunction
function HP2 takes unit XSI,real x,real y,integer WTI returns nothing
local group g=ZJI()
if WTI==1 then
set UZ0=105
elseif WTI==2 then
set UZ0=170
elseif WTI==3 then
set UZ0=250
elseif WTI==4 then
set UZ0=310
endif
set UH0=XSI
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,190+24,Condition(function SOI))
call ForGroup(g,function HR2)
call ZYI(g)
set g=null
endfunction
function HQ2 takes nothing returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(OK),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call KKI(T0I,1093742676)
call IssueTargetOrder(T0I,"slow",GetEnumUnit())
set T0I=null
endfunction
function HU2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer Z02=ModuloInteger(GetTriggerEvalCount(t),4)+1
local real a
local real d
local real x
local real y
local group g=ZJI()
set OK=V8I
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),635+20,Condition(function SOI))
call ForGroup(g,function HQ2)
call ZYI(g)
if Z02==1 then
set a=GetRandomReal(0,90)
elseif Z02==2 then
set a=GetRandomReal(90,180)
elseif Z02==3 then
set a=GetRandomReal(180,270)
else
set a=GetRandomReal(270,360)
endif
set d=GetRandomReal(125,635)
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()==1093677906 or GetSpellAbilityId()==1093681494)then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call StopSound(AC,false,true)
else
set x=GetUnitX(V8I)+d*Cos(a*bj_DEGTORAD)
set y=GetUnitY(V8I)+d*Sin(a*bj_DEGTORAD)
call DestroyEffect(AddSpecialEffect("effects\\SnowyBlizzardTarget.mdx",x,y))
call HP2(V8I,x,y,WTI)
endif
set t=null
set V8I=null
return false
endfunction
function ZI2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI
call KEI(AC,GetUnitX(V8I),GetUnitY(V8I))
if GetSpellAbilityId()==1093677906 then
set WTI=GetUnitAbilityLevel(V8I,1093677906)
else
set WTI=GetUnitAbilityLevel(V8I,1093681494)+1
endif
call TriggerRegisterTimerEvent(t,0.10,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function HU2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(5),(WTI))
set t=null
set V8I=null
endfunction
function Z12 takes nothing returns boolean
if GetSpellAbilityId()==1093677906 or GetSpellAbilityId()==1093681494 then
call ZI2()
endif
return false
endfunction
function AO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z12))
call YVI(1093677912)
set t=null
endfunction
function ZO2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656899,x,y,0)
local integer WTI=GetUnitAbilityLevel(XSI,1093748025)
call KKI(T0I,1093677380)
call SetUnitAbilityLevel(T0I,1093677380,WTI)
call IssueTargetOrder(T0I,"frostnova",T0I)
call RemoveLocation(l)
call KKI(T0I,1097625443)
call UnitApplyTimedLife(T0I,1112820806,2)
set XSI=null
set T0I=null
set l=null
endfunction
function Z22 takes nothing returns boolean
if GetSpellAbilityId()==1093748025 then
call ZO2()
endif
return false
endfunction
function A11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z22))
set t=null
endfunction
function Z32 takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))
endfunction
function Z42 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1211117651 then
call Z32()
endif
return false
endfunction
function GY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Z42))
set t=null
endfunction
function Z52 takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call XNI(UV0,GetEnumUnit(),1,UW0)
endfunction
function Z62 takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer UX1=GetHandleId(t2)
local trigger t1=(LoadTriggerHandle(ZY,(UX1),(9)))
local integer Z72=GetHandleId(t1)
local unit Z82=(LoadUnitHandle(ZY,(UX1),(8)))
local group g
local integer WTI=(LoadInteger(ZY,(UX1),(5)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ShowUnit(Z82,false)
call KillUnit(Z82)
call FlushChildHashtable(ZY,(Z72))
call ZSI(t1)
call FlushChildHashtable(ZY,(UX1))
call ZSI(t2)
elseif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(Z82))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
set g=ZJI()
set OK=Z82
set UV0=Z82
set UW0=100+40*WTI
call GroupEnumUnitsInRange(g,GetUnitX(Z82),GetUnitY(Z82),285,Condition(function SOI))
call ForGroup(g,function Z52)
call ZYI(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(Z82),GetUnitY(Z82)))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(Z82),GetUnitY(Z82)))
call ShowUnit(Z82,false)
call KillUnit(Z82)
call FlushChildHashtable(ZY,(Z72))
call ZSI(t1)
call FlushChildHashtable(ZY,(UX1))
call ZSI(t2)
endif
set t1=null
set t2=null
set Z82=null
set g=null
return false
endfunction
function Z92 takes nothing returns boolean
local trigger t1=GetTriggeringTrigger()
local integer Z72=GetHandleId(t1)
local trigger t2
local integer UX1
local unit Z82
local integer WTI
local real x=(LoadReal(ZY,(Z72),(6)))
local real y=(LoadReal(ZY,(Z72),(7)))
local real I92
local integer ZLI=GetTriggerEvalCount(t1)
if ZLI==1 then
call DestroyEffect((LoadEffectHandle(ZY,(Z72),(3))))
elseif ZLI==2 then
call DestroyEffect((LoadEffectHandle(ZY,(Z72),(4))))
set t2=CreateTrigger()
set UX1=GetHandleId(t2)
set WTI=(LoadInteger(ZY,(Z72),(5)))
set I92=(LoadReal(ZY,(Z72),(1)))
set Z82=CreateUnit(GetOwningPlayer((LoadUnitHandle(ZY,(Z72),(2)))),1747990342,x,y,I92)
call SetUnitVertexColor(Z82,255,255,255,100)
call UnitApplyTimedLife(Z82,1112820806,12)
call SaveUnitHandle(ZY,(Z72),(8),(Z82))
call SaveUnitHandle(ZY,(UX1),(8),(Z82))
call SaveTriggerHandle(ZY,(UX1),(9),(t1))
call SaveInteger(ZY,(UX1),(5),(WTI))
call TriggerRegisterUnitInRange(t2,Z82,235,Condition(function K6I))
call TriggerRegisterUnitEvent(t2,Z82,EVENT_UNIT_DEATH)
call TriggerAddCondition(t2,Condition(function Z62))
call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",Z82,"origin"))
elseif ZLI>2 then
set Z82=(LoadUnitHandle(ZY,(Z72),(8)))
call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",Z82,"origin"))
endif
set t1=null
set Z82=null
return false
endfunction
function ZA2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t1=CreateTrigger()
local integer Z72=GetHandleId(t1)
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
call TriggerRegisterTimerEvent(t1,0.5,true)
call TriggerAddCondition(t1,Condition(function Z92))
call SaveReal(ZY,(Z72),(6),((x)*1.0))
call SaveReal(ZY,(Z72),(7),((y)*1.0))
call SaveInteger(ZY,(Z72),(5),(GetUnitAbilityLevel(XSI,1093743696)))
call SaveUnitHandle(ZY,(Z72),(2),(XSI))
call SaveReal(ZY,(Z72),(1),((GetUnitFacing(XSI))*1.0))
call SaveEffectHandle(ZY,(Z72),(3),(AddSpecialEffect("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",x,y)))
call SaveEffectHandle(ZY,(Z72),(4),(AddSpecialEffect("effects\\Static_Remnant_FX.mdx",x,y)))
set XSI=null
set t1=null
endfunction
function ZB2 takes nothing returns boolean
if GetSpellAbilityId()==1093743696 then
call ZA2()
endif
return false
endfunction
function GZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZB2))
set t=null
endfunction
function ZC2 takes nothing returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(UX0),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call KKI(T0I,1093686069)
call IssueTargetOrder(T0I,"slow",GetEnumUnit())
call XNI(UX0,GetEnumUnit(),1,UY0)
set T0I=null
endfunction
function ZD2 takes unit XSI,unit XTI returns nothing
local integer V0I=GetHandleId(XSI)
local group g=ZJI()
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(200))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(201))))
call SaveInteger(ZY,(GetHandleId((XSI))),((4264)),(2))
set OK=XSI
set UX0=XSI
set UY0=GetUnitAbilityLevel(XSI,1093685591)*15+15
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),300,Condition(function SOI))
call ForGroup(g,function ZC2)
call ZYI(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(XTI),GetUnitY(XTI)))
set g=null
endfunction
function ZE2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local trigger ZF2=(LoadTriggerHandle(ZY,(V0I),(202)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and((LoadInteger(ZY,(GetHandleId((XSI))),((4264))))==1)==true then
call DisableTrigger(t)
call ZD2(XSI,XTI)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call FlushChildHashtable(ZY,(GetHandleId(ZF2)))
call ZSI(ZF2)
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set XSI=null
set ZF2=null
return false
endfunction
function ZG2 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XTI=GetTriggerUnit()
local unit XSI=GetAttacker()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function ZE2))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveTriggerHandle(ZY,(V0I),(202),(GetTriggeringTrigger()))
set t=null
set XTI=null
set XSI=null
endfunction
function ZH2 takes nothing returns boolean
if GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
call ZG2()
endif
return false
endfunction
function ZZ2 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XSI=GetTriggerUnit()
local integer V0I=GetHandleId(XSI)
local string fx=""
if IsUnitAlly(XSI,GetLocalPlayer())or XJI(GetLocalPlayer())then
set fx="Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl"
endif
call SaveEffectHandle(ZY,(V0I),(200),(AddSpecialEffectTarget(fx,XSI,"right hand")))
call SaveEffectHandle(ZY,(V0I),(201),(AddSpecialEffectTarget(fx,XSI,"left hand")))
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function ZH2))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
set t=null
endfunction
function ZV2 takes nothing returns boolean
if(GetSpellAbilityId()==1093743695 or GetSpellAbilityId()==1093743696 or GetSpellAbilityId()==1093743698)and((LoadInteger(ZY,(GetHandleId((GetTriggerUnit()))),((4264))))==1)==false then
call SaveInteger(ZY,(GetHandleId((GetTriggerUnit()))),((4264)),(1))
call ZZ2()
endif
return false
endfunction
function ZW2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZV2))
set XSI=null
set t=null
endfunction
function ZX2 takes nothing returns boolean
if GetLearnedSkill()==1093685591 and GetUnitAbilityLevel(GetTriggerUnit(),1093685591)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call ZW2()
endif
return false
endfunction
function GW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ZX2))
set t=null
endfunction
function ZY2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real x=GetUnitX(XTI)-5*Cos(B92)
local real y=GetUnitY(XTI)-5*Sin(B92)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real x0=(LoadReal(ZY,(V0I),(6)))
local real y0=(LoadReal(ZY,(V0I),(7)))
if((x0-x)*(x0-x))+((y0-y)*(y0-y))<100 then
set x=x0
set y=y0
endif
call SetUnitX(XTI,x)
call SetUnitY(XTI,y)
if GetTriggerEvalCount(t)==(10+10*WTI)or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function ZJ2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1966092376,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
local integer WTI=GetUnitAbilityLevel(XSI,1093743698)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZY2))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(13),((Atan2(GetUnitY(XTI)-GetUnitY(XSI),GetUnitX(XTI)-GetUnitX(XSI)))*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XSI))*1.0))
call KKI(T0I,1093743697)
call SetUnitAbilityLevel(T0I,1093743697,WTI)
call IssueTargetOrder(T0I,"magicleash",XTI)
call UnitApplyTimedLife(T0I,1112820806,0.5+0.5*WTI)
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
call KKI(T0I,1093743699)
call IssueTargetOrder(T0I,"slow",XSI)
set XSI=null
set XTI=null
set T0I=null
set t=null
endfunction
function ZK2 takes nothing returns boolean
if GetSpellAbilityId()==1093743698 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and ZXI(GetSpellTargetUnit())==false then
call ZJ2()
endif
return false
endfunction
function GV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZK2))
set t=null
endfunction
function ZL2 takes nothing returns nothing
if(LoadBoolean(ZY,(UJ0),(GetHandleId(GetEnumUnit()))))==false then
call SaveBoolean(ZY,(UJ0),(GetHandleId(GetEnumUnit())),(true))
call XNI(UL0,GetEnumUnit(),1,UM0*(UK0*4+4)/100)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetEnumUnit(),"origin"))
endif
endfunction
function ZM2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit ZN2=(LoadUnitHandle(ZY,(V0I),(195)))
local integer GJO=(LoadInteger(ZY,(V0I),(194)))
local real J6I=(LoadReal(ZY,(V0I),(6)))
local real J7I=(LoadReal(ZY,(V0I),(7)))
local real DG2=GetUnitX(XSI)
local real DH2=GetUnitY(XSI)
local real B92=Atan2(J7I-DH2,J6I-DG2)
local real KUI=DG2+(25+25*WTI)*Cos(B92)
local real L0I=DH2+(25+25*WTI)*Sin(B92)
local lightning KII=(LoadLightningHandle(ZY,(V0I),(196)))
local real lx=(LoadReal(ZY,(V0I),(197)))
local real ly=(LoadReal(ZY,(V0I),(198)))
local real UT1=GetUnitState(XSI,UNIT_STATE_MANA)
local real ZS2=(25+25*WTI)*(10+0.01*GetUnitState(XSI,UNIT_STATE_MAX_MANA))/100
local group g=ZJI()
local real ZT2=(LoadReal(ZY,(V0I),(199)))
set ZT2=ZT2+25+25*WTI
call SaveReal(ZY,(V0I),(199),((ZT2)*1.0))
if GetTriggerEvalCount(t)>25 then
set lx=lx+(25+25*WTI)*Cos(B92)
set ly=ly+(25+25*WTI)*Sin(B92)
call SaveReal(ZY,(V0I),(197),((lx)*1.0))
call SaveReal(ZY,(V0I),(198),((ly)*1.0))
endif
call SetUnitState(XSI,UNIT_STATE_MANA,RMaxBJ(UT1-ZS2,0))
call MoveLightning(KII,true,lx,ly,KUI,L0I)
call SetUnitX(XSI,KUI)
call SetUnitY(XSI,L0I)
call SetUnitPosition(T0I,KUI,L0I)
call SetUnitPosition(ZN2,KUI,L0I)
set OK=XSI
set UL0=XSI
set UJ0=V0I
set UK0=WTI
set UM0=ZT2
call GroupEnumUnitsInRange(g,KUI,L0I,75+75*WTI,Condition(function SOI))
call ForGroup(g,function ZL2)
call ZYI(g)
set GJO=GJO-1
call SaveInteger(ZY,(V0I),(194),(GJO))
call SetUnitVertexColor(XSI,255,255,255,0)
if GJO==0 or GetUnitState(XSI,UNIT_STATE_MANA)<1 then
call DestroyLightning(KII)
call KCI(KUI,L0I,75)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call RemoveUnit(T0I)
call RemoveUnit(ZN2)
call SetUnitVertexColor(XSI,255,255,255,255)
call SetUnitPathing(XSI,true)
call SetUnitInvulnerable(XSI,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call KCI(KUI,L0I,75)
endif
set t=null
set T0I=null
set XSI=null
set KII=null
set g=null
set ZN2=null
return false
endfunction
function ZR2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local unit T0I
local unit ZN2
local location l
local real x
local real y
local trigger t
local integer V0I
local lightning KII
local integer WTI=GetUnitAbilityLevel(XSI,1093743695)
local real UT1=GetUnitState(XSI,UNIT_STATE_MANA)
local real ZS2=15+0.07*GetUnitState(XSI,UNIT_STATE_MAX_MANA)
call SetUnitState(XSI,UNIT_STATE_MANA,RMaxBJ(UT1-ZS2,0))
if GetUnitState(XSI,UNIT_STATE_MANA)>10 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
set T0I=CreateUnit(GetOwningPlayer(XSI),1865429296,J4I,J5I,0)
set ZN2=CreateUnit(GetOwningPlayer(XSI),1211119431,J4I,J5I,0)
set KII=AddLightning("FORK",true,J4I,J5I,J4I,J5I)
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
else
set x=GetUnitX(GetSpellTargetUnit())
set y=GetUnitY(GetSpellTargetUnit())
endif
call SetUnitVertexColor(XSI,255,255,255,0)
call SetUnitVertexColor(ZN2,255,255,255,0)
call SetUnitPathing(XSI,false)
call SetUnitPathing(T0I,false)
call SetUnitInvulnerable(XSI,true)
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(195),(ZN2))
call SaveLightningHandle(ZY,(V0I),(196),(KII))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveReal(ZY,(V0I),(197),((J4I)*1.0))
call SaveReal(ZY,(V0I),(198),((J5I)*1.0))
call SaveReal(ZY,(V0I),(199),((0)*1.0))
call SaveInteger(ZY,(V0I),(194),(YTI(R2I(SquareRoot((x-J4I)*(x-J4I)+(y-J5I)*(y-J5I))/(25+25*WTI)),1)))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",ZN2,"origin")))
call TriggerRegisterTimerEvent(t,0.04,true)
call TriggerAddCondition(t,Condition(function ZM2))
endif
set XSI=null
set T0I=null
set ZN2=null
set l=null
set t=null
set KII=null
endfunction
function ZP2 takes nothing returns boolean
if GetSpellAbilityId()==1093743695 then
call ZR2()
endif
return false
endfunction
function ZQ2 takes nothing returns boolean
if GetSpellAbilityId()==1093743695 then
if GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)<(15+0.07*GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848657720))
endif
endif
return false
endfunction
function GX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZP2))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZQ2))
set t=null
endfunction
function ZU2 takes nothing returns nothing
local unit u=GetTriggerUnit()
if GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1211117638 or GetUnitTypeId(u)==1211117637 then
call SetUnitAnimation(u,"stand")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"head"))
elseif GetUnitTypeId(u)==1215063922 then
call SetUnitAnimation(u,"stand defend")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"origin"))
endif
set u=null
endfunction
function V02 takes nothing returns boolean
if GetSpellAbilityId()==1093681490 then
call ZU2()
endif
return false
endfunction
function FE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V02))
set t=null
endfunction
constant function DragonsBlood_RawCode takes nothing returns integer
return 1093681996
endfunction
constant function DragonsBlood_ArmorCode takes nothing returns integer
return 1378889782
endfunction
function VI2 takes nothing returns boolean
return GetLearnedSkill()==(1093681996)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function V12 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
call SetPlayerTechResearched(GetOwningPlayer(V8I),(1378889782),GetPlayerTechCount(GetOwningPlayer(V8I),(1378889782),true)+1)
endfunction
function FD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function VI2))
call TriggerAddAction(t,function V12)
endfunction
function VO2 takes nothing returns boolean
if((GetSpellAbilityId()==1093686091))then
return true
endif
if((GetSpellAbilityId()==1093682252))then
return true
endif
if((GetSpellAbilityId()==1093682248))then
return true
endif
if((GetSpellAbilityId()==1093750594))then
return true
endif
return false
endfunction
function V22 takes nothing returns boolean
if(not(GetUnitAbilityLevelSwapped(1093682250,GetSpellAbilityUnit())>0))then
return false
endif
if(not VO2())then
return false
endif
return true
endfunction
function V32 takes nothing returns nothing
local location ER2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(GetTriggerUnit()),ER2,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093682249)
call SetUnitAbilityLevelSwapped(1093682249,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093682250,GetSpellAbilityUnit()))
call IssueImmediateOrder(bj_lastCreatedUnit,"stomp")
call RemoveLocation(ER2)
endfunction
function A41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V22))
call TriggerAddAction(t,function V32)
endfunction
function V42 takes nothing returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call KKI(T0I,1093686090)
call SetUnitAbilityLevel(T0I,1093686090,MJ)
call IssueTargetOrder(T0I,"thunderbolt",GetEnumUnit())
call XNI(GetTriggerUnit(),GetEnumUnit(),1,TJ)
set T0I=null
endfunction
function V52 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local location l=GetSpellTargetLoc()
local integer i=1
local real J4I=GetUnitX(V8I)
local real J5I=GetUnitY(V8I)
local real J6I
local real J7I
local real x
local real y
local real a
local group g=ZJI()
local group g2=ZJI()
if XTI==null then
set J6I=GetLocationX(l)
set J7I=GetLocationY(l)
else
set J6I=GetUnitX(XTI)
set J7I=GetUnitY(XTI)
endif
set a=bj_DEGTORAD*JPI(J4I,J5I,J6I,J7I)
call RemoveLocation(l)
loop
exitwhen i>20
set x=YEI(J4I+i*60*Cos(a))
set y=YHI(J5I+i*60*Sin(a))
call GroupEnumUnitsInRange(g2,x,y,250,Condition(function S0I))
call GroupAddGroup(g2,g)
call GroupClear(g2)
call LXI(CreateDestructable(1110454320,x,y,GetRandomReal(0,360),0.5,GetRandomInt(0,2)),8)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",x,y))
set i=i+1
endloop
set MJ=GetUnitAbilityLevel(V8I,1093686091)
set TJ=MJ*50+75
call ForGroup(g,function V42)
call ZYI(g)
call ZYI(g2)
set V8I=null
set l=null
endfunction
function V62 takes nothing returns boolean
if GetSpellAbilityId()==1093686091 then
call V52()
endif
return false
endfunction
function A31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V62))
call YVI(1093686090)
set t=null
endfunction
function V72 takes nothing returns boolean
if(not(UnitHasBuffBJ(GetAttacker(),1114795873)==true))then
return false
endif
return true
endfunction
function V82 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI then
call UnitRemoveAbility(XSI,1114795873)
endif
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function V92 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=GetTriggerUnit()
local unit XSI=GetAttacker()
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function V82))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function A61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function V72))
call TriggerAddAction(t,function V92)
endfunction
function VA2 takes nothing returns boolean
if(GetItemTypeId(GetManipulatedItem())==1227894859)then
if(GetUnitTypeId(GetTriggerUnit())==1333027688)then
return true
endif
endif
return false
endfunction
function VB2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
call KKI(T0I,1095332466)
call IssueImmediateOrder(T0I,"roar")
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
set T0I=null
return false
endfunction
function VC2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call UnitRemoveAbility(V8I,1110454608)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function VB2))
set t=null
set V8I=null
endfunction
function A51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function VA2))
call TriggerAddAction(t,function VC2)
endfunction
function VD2 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
call SetUnitX(UN0[id],x)
call SetUnitY(UN0[id],y)
call IssueImmediateOrder(UN0[id],"fanofknives")
endfunction
function VE2 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
call SetUnitX(UN0[id],x)
call SetUnitY(UN0[id],y)
call IssueImmediateOrder(UN0[id],"fanofknives")
endif
endfunction
function VF2 takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true and KMI(GetFilterUnit())==false
endfunction
function VG2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local group g=ZJI()
local integer id=GetPlayerId(GetOwningPlayer(XSI))
local integer WTI=GetUnitAbilityLevel(XSI,1093682248)
if WTI==0 then
set WTI=GetUnitAbilityLevel(XSI,1093750594)
endif
set UN0[id]=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
set US0[id]=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call SetUnitScale(UN0[id],0.25,0.25,0.25)
call KKI(UN0[id],1093682253)
call KKI(US0[id],1093748784)
call SetUnitAbilityLevel(UN0[id],1093682253,WTI)
call SetUnitAbilityLevel(US0[id],1093748784,WTI)
call GroupEnumUnitsInRange(g,x,y,575,Condition(function VF2))
call ForGroup(g,function VD2)
if GetUnitAbilityLevel(XSI,1093750594)>0 then
call ForGroup(g,function VE2)
endif
call ZYI(g)
set XSI=null
set g=null
endfunction
function VH2 takes nothing returns boolean
if GetSpellAbilityId()==1093682248 or GetSpellAbilityId()==1093750594 then
call VG2()
endif
return false
endfunction
function A21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VH2))
set t=null
call YVI(1093682253)
endfunction
constant function Untouchable_RawCode takes nothing returns integer
return 1093682263
endfunction
constant function Untouchable_EffectCode takes nothing returns integer
return 1093681712
endfunction
function VZ2 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
return GetUnitAbilityLevel(GetSpellTargetUnit(),(1093682263))>0
else
return GetUnitAbilityLevel(GetTriggerUnit(),(1093682263))>0
endif
endfunction
function VV2 takes nothing returns nothing
local unit XSI
local unit XTI
local unit T0I
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
set XSI=GetSpellTargetUnit()
set XTI=GetTriggerUnit()
else
set XSI=GetTriggerUnit()
set XTI=GetAttacker()
endif
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,(1093681712))
call SetUnitAbilityLevel(T0I,(1093681712),GetUnitAbilityLevel(XSI,(1093682263)))
call IssueTargetOrder(T0I,"acidbomb",XTI)
endfunction
function AA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VZ2))
call TriggerAddAction(t,function VV2)
endfunction
function VW2 takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)!=GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE)
endfunction
function VX2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer CI2=(LoadInteger(ZY,(V0I),(28)))
local group g
local unit OB1
if CI2>10 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SaveInteger(ZY,(V0I),(28),(CI2+1))
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),300,Condition(function VW2))
set OB1=GroupPickRandomUnit(g)
call ZYI(g)
call SetUnitState(OB1,UNIT_STATE_LIFE,GetUnitState(OB1,UNIT_STATE_LIFE)+10)
endif
set t=null
set XSI=null
set g=null
set OB1=null
return false
endfunction
function VY2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call AddUnitAnimationProperties(XSI,"alternate",false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function VJ2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer i=1
local trigger t
local integer V0I
loop
exitwhen i>(1+2*GetUnitAbilityLevel(XSI,1093677378))
set t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call SaveInteger(ZY,(GetHandleId(t)),(28),(0))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function VX2))
set i=i+1
endloop
if GetUnitTypeId(XSI)==1160786520 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function VY2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
endif
set t=null
set XSI=null
endfunction
function VK2 takes nothing returns boolean
if GetSpellAbilityId()==1093677378 then
call VJ2()
endif
return false
endfunction
function A81 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VK2))
set t=null
endfunction
function VL2 takes real x1,real y1,real x2,real y2 returns real
return SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))
endfunction
function VM2 takes unit u returns integer
local integer WTI=GetUnitAbilityLevel(u,1093682265)
if WTI>0 then
return WTI
endif
set WTI=GetUnitAbilityLevel(u,1093752642)
return WTI
endfunction
function VN2 takes nothing returns boolean
local real d
local real VS2
if GetUnitAbilityLevel(GetTriggerUnit(),1110455125)>0 and VM2(GetEventDamageSource())>0 and(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455125)
set VS2=RMinBJ(VL2(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitX(GetEventDamageSource()),GetUnitY(GetEventDamageSource())),2500)
set d=(0.10+0.05*I2R(VM2(GetEventDamageSource())))*VS2
call K3I("+"+I2S(R2I(d)),1,GetTriggerUnit(),0.023,3,216,216,216)
call DisableTrigger(GetTriggeringTrigger())
call XNI(GetEventDamageSource(),GetTriggerUnit(),3,d)
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function VT2 takes nothing returns nothing
local trigger t
local unit XTI
local unit XSI
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set XTI=GetSpellTargetUnit()
set XSI=GetTriggerUnit()
else
set XTI=GetTriggerUnit()
set XSI=GetAttacker()
endif
if IsUnitIllusion(XSI)==false then
set t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function VN2))
endif
set t=null
set XTI=null
set XSI=null
endfunction
function VR2 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if VM2(GetAttacker())>0 and(LoadBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))then
call VT2()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==OrderId("poisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263),(true))
elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263),(false))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093682265 or GetSpellAbilityId()==1093752642)then
call VT2()
endif
return false
endfunction
function VP2 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function VR2))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function VQ2 takes nothing returns boolean
if(GetLearnedSkill()==1093682265 or GetLearnedSkill()==1093752642)and IsUnitIllusion(GetTriggerUnit())==false and VM2(GetTriggerUnit())==1 then
call VP2()
endif
return false
endfunction
function A91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function VQ2))
set t=null
endfunction
function VU2 takes unit u returns boolean
return IsUnitType(u,UNIT_TYPE_HERO)==false and IsUnitType(u,UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(u)!=1848652101 and GetUnitTypeId(u)!=1848652089
endfunction
function W02 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call UnitRemoveAbility(XTI,1114860655)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XTI=null
return false
endfunction
function WI2 takes nothing returns nothing
local unit XTI=GetSpellTargetUnit()
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.01,false)
call TriggerAddCondition(t,Condition(function W02))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SetUnitOwner(XTI,GetOwningPlayer(XSI),true)
call UnitApplyTimedLife(XTI,1112820806,80)
call KKI(XTI,1097167976)
call KKI(XTI,1093743175)
call JBI(XTI)
set XTI=null
set XSI=null
endfunction
function W12 takes nothing returns boolean
if GetSpellAbilityId()==1093682264 and VU2(GetSpellTargetUnit())then
call WI2()
endif
return false
endfunction
function A71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W12))
set t=null
endfunction
function WO2 takes nothing returns boolean
if(not(GetSpellAbilityId()==1093681713))then
return false
endif
return true
endfunction
function W22 takes nothing returns nothing
local location ER2=GetUnitLoc(GetTriggerUnit())
local location W32=GetSpellTargetLoc()
call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetTriggerUnit()),ER2,W32)
call ShowUnitHide(bj_lastCreatedUnit)
call UnitApplyTimedLifeBJ(8.00,1112820806,bj_lastCreatedUnit)
call UnitAddAbility(bj_lastCreatedUnit,1093681714)
call SetUnitAbilityLevelSwapped(1093681714,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093681713,GetTriggerUnit()))
call IssuePointOrderLoc(bj_lastCreatedUnit,"deathanddecay",W32)
call RemoveLocation(ER2)
call RemoveLocation(W32)
endfunction
function AD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WO2))
call TriggerAddAction(t,function W22)
endfunction
function W42 takes unit XSI,unit XTI,integer WTI returns nothing
local real XPI
if WTI==1 then
set XPI=30
elseif WTI==2 then
set XPI=40
elseif WTI==3 then
set XPI=65
else
set XPI=80
endif
call SUI(XTI,XTI,1)
call XNI(XSI,XTI,1,XPI)
endfunction
function W52 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
call W42(XSI,XTI,WTI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function W62 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t
local integer V0I
local integer WTI=GetUnitAbilityLevel(XSI,1093683511)
call W42(XSI,XTI,WTI)
if WTI>1 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function W52))
endif
if WTI==4 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function W52))
endif
set t=null
set XSI=null
set XTI=null
endfunction
function W72 takes nothing returns boolean
if GetSpellAbilityId()==1093683511 and ZXI(GetSpellTargetUnit())==false then
call W62()
endif
return false
endfunction
function AC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W72))
endfunction
function DemonicConversion_Delayed takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
call KKI(T0I,1093744474)
call SetUnitAbilityLevel(T0I,1093744474,WTI)
call IssueImmediateOrder(T0I,"slimemonster")
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set T0I=null
return false
endfunction
function W82 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local integer WTI=GetUnitAbilityLevel(XSI,1093744688)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call SetUnitState(XTI,UNIT_STATE_LIFE,1)
call XNI(XSI,XTI,2,20)
call XNI(XSI,XTI,1,20)
call XNI(XSI,XTI,3,20)
call KKI(T0I,1093744474)
call SetUnitAbilityLevel(T0I,1093744474,WTI)
call IssueImmediateOrder(T0I,"lavamonster")
set XSI=null
set XTI=null
set T0I=null
endfunction
function W92 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WA2=GetUnitLevel(XTI)
if GetOwningPlayer(XTI)!=CO[0]and GetOwningPlayer(XTI)!=DO[0]and WA2>4 then
call Y8I(V8I)
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848656728))
endif
set V8I=null
set XTI=null
endfunction
function WB2 takes nothing returns boolean
if GetSpellAbilityId()==1093744688 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call W82()
else
call W92()
endif
endif
return false
endfunction
function DemonicConversion_Recolor takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
if id==1752654196 or id==1752658994 or id==1752658995 or id==1747988534 then
call SetUnitVertexColor(GetSummonedUnit(),0,0,50,255)
endif
return false
endfunction
function AE1 takes nothing returns nothing
local trigger t=CreateTrigger()
local region AOO=CreateRegion()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function WB2))
set t=null
endfunction
function WC2 takes real x returns real
local real YFI=GetRectMinX(bj_mapInitialPlayableArea)+150
if(x<YFI)then
return YFI
endif
set YFI=GetRectMaxX(bj_mapInitialPlayableArea)-150
if(x>YFI)then
return YFI
endif
return x
endfunction
function WD2 takes real y returns real
local real YFI=GetRectMinY(bj_mapInitialPlayableArea)+150
if(y<YFI)then
return YFI
endif
set YFI=GetRectMaxY(bj_mapInitialPlayableArea)-150
if(y>YFI)then
return YFI
endif
return y
endfunction
function WE2 takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1848651861 or GetUnitTypeId(GetFilterUnit())==1848651865 or GetUnitTypeId(GetFilterUnit())==1848651866 or GetUnitTypeId(GetFilterUnit())==1848658773 or GetUnitTypeId(GetFilterUnit())==1848658774 or GetUnitTypeId(GetFilterUnit())==1848658775 or XLI(GetUnitTypeId(GetFilterUnit())))and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer((LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(318)))))==true
endfunction
function WF2 takes nothing returns nothing
local location WG2=GetUnitLoc(GetEnumUnit())
local location WH2=GetUnitLoc((LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(318))))
local location WZ2=H2I(WH2,DistanceBetweenPoints(WH2,WG2)-2,AngleBetweenPoints(WH2,WG2))
call SetUnitFacing(GetEnumUnit(),AngleBetweenPoints(WH2,WG2))
call SetUnitPositionLoc(GetEnumUnit(),WZ2)
call RemoveLocation(WG2)
call RemoveLocation(WH2)
call RemoveLocation(WZ2)
endfunction
function WV2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local group U4I
local integer V0I=GetHandleId(t)
local unit WW2=(LoadUnitHandle(ZY,(V0I),(318)))
local unit T0I
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093747288 then
call KillUnit(WW2)
set T0I=(LoadUnitHandle(ZY,(V0I),(19)))
call UnitApplyTimedLife((LoadUnitHandle(ZY,(V0I),(250))),1112820806,1)
call UnitApplyTimedLife((LoadUnitHandle(ZY,(V0I),(251))),1112820806,1)
call UnitApplyTimedLife((LoadUnitHandle(ZY,(V0I),(252))),1112820806,1)
call UnitApplyTimedLife((LoadUnitHandle(ZY,(V0I),(253))),1112820806,1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(T0I)
elseif GetTriggerEvalCount(t)>90 then
set T0I=(LoadUnitHandle(ZY,(V0I),(19)))
call UnitApplyTimedLife((LoadUnitHandle(ZY,(V0I),(250))),1112820806,1)
call UnitApplyTimedLife((LoadUnitHandle(ZY,(V0I),(251))),1112820806,1)
call UnitApplyTimedLife((LoadUnitHandle(ZY,(V0I),(252))),1112820806,1)
call UnitApplyTimedLife((LoadUnitHandle(ZY,(V0I),(253))),1112820806,1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(WW2)
call KillUnit(T0I)
call Y8I((LoadUnitHandle(ZY,(V0I),(2))))
else
set x=GetUnitX(WW2)
set y=GetUnitY(WW2)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,400,Condition(function WE2))
call ForGroup(U4I,function WF2)
call ZYI(U4I)
endif
set T0I=null
set WW2=null
set t=null
return false
endfunction
function WX2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
local unit WW2=CreateUnit(GetOwningPlayer(XSI),1966092340,x,y,0)
call RemoveLocation(l)
call SetUnitAbilityLevel(WW2,1093681968,GetUnitAbilityLevel(XSI,1093747288))
if VNI(GetOwningPlayer(XSI))then
call KKI(T0I,1093687348)
else
call KKI(T0I,1093687347)
endif
call IssuePointOrder(T0I,"cloudoffog",x,y)
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(250),(CreateUnit(GetOwningPlayer(XSI),1747990098,x,y,0)))
call SaveUnitHandle(ZY,(V0I),(251),(CreateUnit(GetOwningPlayer(XSI),1747990098,x,y,0)))
call SaveUnitHandle(ZY,(V0I),(252),(CreateUnit(GetOwningPlayer(XSI),1747990098,x,y,0)))
call SaveUnitHandle(ZY,(V0I),(253),(CreateUnit(GetOwningPlayer(XSI),1747990098,x,y,0)))
call SaveUnitHandle(ZY,(V0I),(318),(WW2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function WV2))
set XSI=null
set WW2=null
set t=null
set l=null
endfunction
function WY2 takes nothing returns boolean
if GetSpellAbilityId()==1093747288 then
call WX2()
endif
return false
endfunction
function WJ2 takes nothing returns boolean
local location l
local real x
local real y
if GetSpellAbilityId()==1093747288 then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
set l=null
if(x!=WC2(x)and y!=WD2(y))or RectContainsCoords(IA,x,y)or RectContainsCoords(OA,x,y)or RectContainsCoords(BA,x,y)or RectContainsCoords(CA,x,y)or RectContainsCoords(DA,x,y)or RectContainsCoords(EA,x,y)then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),"Cannot cast Blackhole here")
endif
endif
return false
endfunction
function AB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WY2))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function WJ2))
call YVI(1093681968)
endfunction
function WK2 takes nothing returns nothing
call XNI(GetTriggerUnit(),GetEnumUnit(),1,TJ)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdx",GetEnumUnit(),"chest"))
endfunction
function WL2 takes nothing returns nothing
local group g=ZJI()
local unit V8I=GetTriggerUnit()
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local integer WTI=GetUnitAbilityLevel(V8I,1093686083)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,x,y,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdx",x,y))
call KKI(T0I,1093686084)
call SetUnitAbilityLevel(T0I,1093686084,WTI)
call IssuePointOrder(T0I,"silence",x,y)
set TJ=WTI*60
call GroupEnumUnitsInRange(g,x,y,425,Condition(function SII))
call ForGroup(g,function WK2)
call ZYI(g)
set T0I=null
set g=null
set V8I=null
endfunction
function WM2 takes nothing returns boolean
if GetSpellAbilityId()==1093686083 then
call WL2()
endif
return false
endfunction
function GS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WM2))
set t=null
endfunction
function WN2 takes unit XSI,unit XTI,integer WTI,integer N9O returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093686087)
call SetUnitAbilityLevel(T0I,1093686087,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
if N9O==1 then
call XNI(XSI,XTI,1,WTI*50+50)
else
call XNI(XSI,XTI,1,WTI*50+50+100)
endif
set T0I=null
endfunction
function WS2 takes unit XSI,unit XTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093686086)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
set T0I=null
endfunction
function WT2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer N9O=(LoadInteger(ZY,(V0I),(152)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local lightning KII=(LoadLightningHandle(ZY,(V0I),(196)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyLightning(KII)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call MoveLightning(KII,true,GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))
if JAI(GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))>600 then
call DestroyLightning(KII)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call WN2(XSI,XTI,WTI,N9O)
endif
endif
set t=null
set XSI=null
set XTI=null
set KII=null
return false
endfunction
function WR2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local lightning KII=AddLightning("HWPB",true,GetUnitX(UU0),GetUnitY(UU0),GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()))
call SetLightningColor(KII,0,.7,1,1)
call SaveLightningHandle(ZY,(V0I),(196),(KII))
call SaveUnitHandle(ZY,(V0I),(2),(UU0))
call SaveInteger(ZY,(V0I),(30),(ZZI(GetEnumUnit())))
call SaveInteger(ZY,(V0I),(5),(UT0))
call SaveInteger(ZY,(V0I),(152),(UR0))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,UU0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function WT2))
call XNI(GetTriggerUnit(),GetEnumUnit(),1,UP0)
call WS2(GetTriggerUnit(),GetEnumUnit())
set t=null
set KII=null
endfunction
function WP2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656917,x,y,0)
local group g=ZJI()
local integer WTI=GetUnitAbilityLevel(V8I,1093686072)
local real SQI=5
local integer N9O=1
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093751120)
set SQI=7
set N9O=2
endif
call RemoveLocation(l)
call SetUnitAnimation(T0I,"channel")
call M5I(T0I,SQI)
set UU0=T0I
set UQ0=SQI
set UP0=WTI*50+50
set UT0=WTI
set UR0=N9O
call GroupEnumUnitsInRange(g,x,y,400,Condition(function SXI))
call ForGroup(g,function WR2)
call ZYI(g)
set g=null
set T0I=null
set V8I=null
set l=null
endfunction
function WQ2 takes nothing returns boolean
if GetSpellAbilityId()==1093686072 or GetSpellAbilityId()==1093751120 then
call WP2()
endif
return false
endfunction
function GR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WQ2))
set t=null
endfunction
function WU2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI
local integer CI2
if(GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER and GetIssuedOrderId()!=String2OrderIdBJ("phaseshift"))or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetUnitInvulnerable(V8I,false)
call UnitRemoveAbility(V8I,1093678162)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set WTI=(LoadInteger(ZY,(V0I),(5)))
set CI2=(LoadInteger(ZY,(V0I),(28)))+1
call SaveInteger(ZY,(V0I),(28),(CI2))
if CI2>3*WTI or JAI(GetUnitX(V8I),GetUnitY(V8I),(LoadReal(ZY,(V0I),(6))),(LoadReal(ZY,(V0I),(7))))>125 then
call SetUnitInvulnerable(V8I,false)
call UnitRemoveAbility(V8I,1093678162)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
set t=null
set V8I=null
return false
endfunction
function X02 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SetUnitInvulnerable(V8I,true)
call KKI(V8I,1093678162)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(V8I,1093686082)))
call SaveInteger(ZY,(V0I),(28),(0))
call SaveReal(ZY,(V0I),(6),((GetUnitX(V8I))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(V8I))*1.0))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function WU2))
call V5I(V8I,4266,5.9)
set t=null
set V8I=null
endfunction
function XI2 takes nothing returns boolean
if GetIssuedOrderId()==String2OrderIdBJ("phaseshift")and IsUnitIllusion(GetTriggerUnit())==false and((LoadInteger(ZY,(GetHandleId((GetTriggerUnit()))),((4266))))==1)==false then
call X02()
endif
return false
endfunction
function GT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K9I(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function XI2))
set t=null
endfunction
function X12 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EK)==false then
call GroupAddUnit(EK,GetEnumUnit())
call XNI(OK,GetEnumUnit(),1,TJ)
endif
endfunction
function XO2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local group X22
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_DEATH then
set OK=CreateUnit(GetOwningPlayer(T0I),1747990095,GetUnitX((LoadUnitHandle(ZY,(V0I),(14)))),GetUnitY((LoadUnitHandle(ZY,(V0I),(14)))),0)
call SetUnitScale(OK,2.5,2.5,2.5)
call KillUnit(OK)
call SetUnitPosition((LoadUnitHandle(ZY,(V0I),(14))),GetUnitX(T0I),GetUnitY(T0I))
set I0I[GetPlayerId(GetOwningPlayer(T0I))]=null
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEvalCount(t)>120 then
set I0I[GetPlayerId(GetOwningPlayer(T0I))]=null
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitScale(T0I,2.5,2.5,2.5)
call KillUnit(T0I)
else
set x=GetUnitX(T0I)
set y=GetUnitY(T0I)
set X22=ZJI()
set EK=g
set OK=T0I
set TJ=WTI*70
call GroupEnumUnitsInRange(X22,x,y,225,Condition(function S7I))
call ForGroup(X22,function X12)
call ZYI(X22)
call SetUnitX(T0I,YEI(x+15*Cos(B92*bj_DEGTORAD)))
call SetUnitY(T0I,YHI(y+15*Sin(B92*bj_DEGTORAD)))
endif
set t=null
set g=null
set X22=null
set T0I=null
return false
endfunction
function X32 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local group g=ZJI()
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(V8I)
local real y1=GetUnitY(V8I)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real B92=JPI(x1,y1,x2,y2)
local integer WTI=GetUnitAbilityLevel(V8I,1093686073)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1747990095,x1,y1,B92)
call KEI(KC,x1,y1)
call KKI(GetTriggerUnit(),1093686081)
set I0I[GetPlayerId(GetOwningPlayer(V8I))]=T0I
call SetUnitScale(T0I,3.5,3.5,3.5)
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerRegisterUnitEvent(t,T0I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function XO2))
call RemoveLocation(l)
set t=null
set T0I=null
set g=null
set V8I=null
set l=null
endfunction
function X42 takes nothing returns nothing
local integer i=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if I0I[i]==null then
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652599))
else
call SetUnitScale(I0I[i],2.5,2.5,2.5)
call KillUnit(I0I[i])
endif
endfunction
function X52 takes nothing returns boolean
if GetSpellAbilityId()==1093686073 then
call X32()
endif
if GetSpellAbilityId()==1093686081 then
call X42()
endif
return false
endfunction
function IllusoryOrb_Learn takes nothing returns boolean
if GetLearnedSkill()==1093686073 and GetUnitAbilityLevel(GetTriggerUnit(),1093686073)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call KKI(GetTriggerUnit(),1093686081)
endif
return false
endfunction
function GN1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X52))
set t=null
endfunction
function X62 takes nothing returns boolean
return GetSpellAbilityId()==1093808453
endfunction
function X72 takes nothing returns nothing
call SetUnitX(GetEnumUnit(),III)
call SetUnitY(GetEnumUnit(),I1I)
endfunction
function X82 takes nothing returns nothing
local destructable array dx
local integer W5I
local integer W6I
local fogmodifier X92
local unit T0I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local location FV2
local real x
local real y
local group g=ZJI()
if XTI==null then
set FV2=GetSpellTargetLoc()
else
set FV2=GetUnitLoc(XTI)
endif
set x=GetLocationX(FV2)
set y=GetLocationY(FV2)
set III=x
set I1I=y
if IsUnitAlly(T0I,GetOwningPlayer(XTI))==true or ZXI(GetSpellTargetUnit())==false then
set OK=T0I
call GroupEnumUnitsInRange(g,x,y,150,Condition(function SOI))
call LZI(CreateFogModifierRadiusLocBJ(true,GetOwningPlayer(T0I),FOG_OF_WAR_VISIBLE,FV2,1000.00),2.25+0.75*GetUnitAbilityLevel(T0I,1093808453))
set W5I=1
set W6I=8
loop
exitwhen W5I>W6I
call LXI(CreateDestructableLoc(1110454325,H2I(FV2,150.00,(I2R(W5I)*45.00)),GetRandomReal(0,360),1,0),2.25+0.75*GetUnitAbilityLevel(T0I,1093808453))
set W5I=W5I+1
endloop
endif
call RemoveLocation(FV2)
call ForGroup(g,function X72)
call ZYI(g)
set X92=null
set T0I=null
set XTI=null
set FV2=null
set g=null
endfunction
function XA2 takes nothing returns nothing
if GetSpellAbilityId()==1093808453 and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endfunction
function AF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X62))
call TriggerAddAction(t,function X82)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddAction(t,function XA2)
endfunction
constant function Teleportation_AbilityCode takes nothing returns integer
return 1093677391
endfunction
function XB2 takes nothing returns boolean
return GetSpellAbilityId()==(1093677391)
endfunction
function XC2 takes nothing returns nothing
local location YV1=GetSpellTargetLoc()
local real x=GetLocationX(YV1)
local real y=GetLocationY(YV1)
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(GetTriggerUnit()))then
call PingMinimapEx(x,y,3,255,255,255,false)
endif
call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",x,y))
call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call RemoveLocation(YV1)
endfunction
function AG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function XB2))
call TriggerAddAction(t,function XC2)
endfunction
function XD2 takes unit XSI,real x,real y returns nothing
local unit XE2=CreateUnit(GetOwningPlayer(XSI),1701212014,x,y,0)
call UnitApplyTimedLife(XE2,1111844462,60)
call SetUnitVertexColor(XE2,175,255,175,175)
call SetUnitFlyHeight(XE2,0,0)
set XE2=null
endfunction
function XF2 takes nothing returns nothing
if(XCI(GetEnumDestructable())or GetDestructableTypeId(GetEnumDestructable())==1110454325)and IOI<=I2I and GetDestructableLife(GetEnumDestructable())>0 then
set IOI=IOI+1
call XD2(GetTriggerUnit(),GetDestructableX(GetEnumDestructable()),GetDestructableY(GetEnumDestructable()))
call KillDestructable(GetEnumDestructable())
endif
endfunction
function XG2 takes nothing returns nothing
local integer WTI=GetUnitAbilityLevel(GetTriggerUnit(),1095067246)
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real d=75+75*WTI+50
local rect r=Rect(x-d,y-d,x+d,y+d)
set IOI=0
set I2I=WTI
call EnumDestructablesInRect(r,Condition(function HRI),function XF2)
call RemoveRect(r)
call RemoveLocation(l)
set l=null
set r=null
endfunction
function ForceOfNature_Main takes nothing returns boolean
if GetSpellAbilityId()==1095067246 then
call XG2()
endif
return false
endfunction
function AH1 takes nothing returns nothing
endfunction
function XH2 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local real d=JAI(GetUnitX(XTI),GetUnitY(XTI),I5I,I6I)
if d<I4I and IsUnitVisible(XTI,GetOwningPlayer(I7I))==true then
set I3I=GetEnumUnit()
set I4I=d
endif
set XTI=null
endfunction
function XZ2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(GetTriggerUnit(),1093752632)
local integer LCI=1093678936
local group g
local unit T0I
if WTI==0 then
set WTI=GetUnitAbilityLevel(GetTriggerUnit(),1093752633)
set LCI=1093681484
endif
if XTI==null then
set I3I=null
set I7I=XSI
set I4I=999999
set I5I=GetSpellTargetX()
set I6I=GetSpellTargetY()
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function SOI))
call ForGroup(g,function XH2)
call ZYI(g)
set XTI=I3I
set g=null
endif
if XTI!=null then
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call KKI(T0I,LCI)
call SetUnitAbilityLevel(T0I,LCI,WTI)
call IssueTargetOrder(T0I,"chainlightning",XTI)
set T0I=null
endif
set XSI=null
set XTI=null
endfunction
function XV2 takes nothing returns boolean
if GetSpellAbilityId()==1093752632 or GetSpellAbilityId()==1093752633 then
call XZ2()
endif
return false
endfunction
function AZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XV2))
set t=null
endfunction
function XW2 takes unit XSI,unit XTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local integer WTI=GetUnitAbilityLevel(XSI,1093685586)
local real XX2
local real XY2=0.5
if WTI==0 then
set WTI=GetUnitAbilityLevel(XSI,1093747251)
set XY2=0.65
endif
call KKI(T0I,1093685589)
call SetUnitAbilityLevel(T0I,1093685589,WTI)
call IssueTargetOrder(T0I,"slow",XTI)
if WTI==1 then
set XX2=0.35
elseif WTI==2 then
set XX2=0.30
else
set XX2=0.25
endif
call XNI(XSI,XSI,1,GetUnitState(XSI,UNIT_STATE_LIFE)*XX2)
call XNI(XSI,XTI,1,GetUnitState(XTI,UNIT_STATE_LIFE)*XY2)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",XSI,"chest"))
call DestroyEffect(AddSpecialEffectTarget("effects\\LifeBreak.mdx",XTI,"chest"))
set XSI=null
set XTI=null
set T0I=null
endfunction
function XJ2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real x
local real y
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real B92=Atan2(J7I-J5I,J6I-J4I)
if GetUnitTypeId(XSI)==1160786520 then
call SetUnitAnimationByIndex(XSI,1)
else
call SetUnitAnimationByIndex(XSI,17)
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or JAI(DE2,DF2,J6I,J7I)>1400 or NVI(XSI)then
call SetUnitPathing(XSI,true)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call UnitRemoveAbility(XSI,1093686100)
call SetUnitTimeScale(XSI,1.0)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif JAI(J4I,J5I,J6I,J7I)<125 then
call SetUnitPathing(XSI,true)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call UnitRemoveAbility(XSI,1093686100)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitTimeScale(XSI,1.0)
if XTI!=null and KMI(XTI)==false then
call IssueTargetOrder(XSI,"attack",XTI)
call XW2(XSI,XTI)
endif
else
call SetUnitPathing(XSI,false)
set DE2=J6I
set DF2=J7I
call SaveReal(ZY,(V0I),(23),((DE2)*1.0))
call SaveReal(ZY,(V0I),(24),((DF2)*1.0))
set x=J4I+15*Cos(B92)
set y=J5I+15*Sin(B92)
call SetUnitPosition(XSI,x,y)
call SetUnitFacing(XSI,B92*bj_RADTODEG)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function XK2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.015,true)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerAddCondition(t,Condition(function XJ2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XTI))*1.0))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("war3mapImported\\LifeBreakCharge.mdx",XSI,"hand right alternate")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("war3mapImported\\LifeBreakCharge.mdx",XSI,"hand left alternate")))
call SetUnitPathing(XSI,false)
call KKI(XSI,1093686100)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093686100,false)
call SetUnitAnimationByIndex(XSI,17)
call SetUnitTimeScale(XSI,3.0)
set XSI=null
set XTI=null
set t=null
endfunction
function XL2 takes nothing returns boolean
if(GetSpellAbilityId()==1093685586 or GetSpellAbilityId()==1093747251)and ZXI(GetSpellTargetUnit())==false then
call XK2()
endif
return false
endfunction
function G71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XL2))
set t=null
call YVI(1093685589)
endfunction
function XM2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer XN2=V9I(XTI)
local real JOI=GetUnitState(XTI,UNIT_STATE_LIFE)
local real CZ2=GetUnitState(XTI,UNIT_STATE_MAX_LIFE)
local real XS2
if JOI/CZ2>0.4 then
set XS2=I2R(WTI)/4*0.2*XN2+2*WTI
else
set XS2=I2R(WTI)/4*0.6*XN2+2*WTI
endif
set XS2=XS2/8.0
if GetTriggerEvalCount(t)>16*8.0 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(31))))
call UnitRemoveAbility(XTI,1093685583)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitState(XTI,UNIT_STATE_LIFE,JOI+XS2)
endif
set XTI=null
set t=null
return false
endfunction
function XT2 takes nothing returns nothing
local unit XTI=GetSpellTargetUnit()
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093685584)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1/8.0,true)
call TriggerAddCondition(t,Condition(function XM2))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveEffectHandle(ZY,(V0I),(31),(AddSpecialEffectTarget("InnerVitality.mdx",XTI,"chest")))
call KKI(XTI,1093685583)
call SetUnitAbilityLevel(XTI,1093685583,WTI)
set XTI=null
set XSI=null
set t=null
endfunction
function XR2 takes nothing returns boolean
if GetSpellAbilityId()==1093685584 then
call XT2()
endif
return false
endfunction
function G41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XR2))
endfunction
function XP2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer UX1
local integer XQ2
local integer XU2
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEvalCount(t)>6 or KMI(XTI)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(31))))
call FlushChildHashtable(ZY,(V0I))
set UX1=GetHandleId(XSI)
set XQ2=6000+GetHandleId(XTI)
set XU2=(LoadInteger(ZY,(UX1),(XQ2)))
set XU2=XU2-1
if XU2==0 then
call SaveInteger(ZY,(UX1),(XQ2),(0))
else
call SaveInteger(ZY,(UX1),(XQ2),(XU2))
endif
call ZFI(XUI)
call ZSI(t)
else
call XNI(XSI,XTI,1,4*GetUnitAbilityLevel(XSI,1093685582))
endif
set t=null
set XTI=null
set XSI=null
return false
endfunction
function Y02 takes unit XSI,unit XTI returns nothing
local integer V0I=GetHandleId(XSI)
local integer UX1
local trigger t
local integer YI2=(LoadInteger(ZY,(V0I),(6000+GetHandleId(XTI))))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function XP2))
set UX1=GetHandleId(t)
call SaveUnitHandle(ZY,(UX1),(2),(XSI))
call SaveInteger(ZY,(UX1),(30),(ZZI(XTI)))
call SaveInteger(ZY,(V0I),(6000+GetHandleId(XTI)),(YI2+1))
call SaveEffectHandle(ZY,(UX1),(31),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",XTI,"chest")))
set t=null
endfunction
function Y12 takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetTriggerUnit(),1110456369)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093685582)>0 and(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,YQI(GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)-15,1))
call UnitRemoveAbility(GetTriggerUnit(),1110456369)
call Y02(GetEventDamageSource(),GetTriggerUnit())
call DisableTrigger(GetTriggeringTrigger())
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function YO2 takes nothing returns nothing
local trigger t
local unit XTI
local unit XSI
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set XTI=GetSpellTargetUnit()
set XSI=GetTriggerUnit()
else
set XTI=GetTriggerUnit()
set XSI=GetAttacker()
endif
if IsUnitIllusion(XSI)==false then
set t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function Y12))
endif
set t=null
set XTI=null
set XSI=null
endfunction
function Y22 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093685582)>0 and(LoadBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))then
call YO2()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==OrderId("poisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263),(true))
elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263),(false))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685582 then
call YO2()
endif
return false
endfunction
function Y32 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function Y22))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function Y42 takes nothing returns boolean
if GetLearnedSkill()==1093685582 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685582)==1 then
call Y32()
endif
return false
endfunction
function G51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Y42))
set t=null
endfunction
function Y52 takes nothing returns boolean
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real Y62=GetUnitState(V8I,UNIT_STATE_LIFE)
local real MaxHealth=GetUnitState(V8I,UNIT_STATE_MAX_LIFE)
local integer Y72
local integer Y82
local integer WTI=GetUnitAbilityLevel(V8I,1093685585)
local boolean Y92=(LoadBoolean(ZY,(V0I),(319)))
if IsUnitType(V8I,UNIT_TYPE_HERO)==true and WTI>0 then
set Y72=R2I(100*GetUnitState(V8I,UNIT_STATE_LIFE)/GetUnitState(V8I,UNIT_STATE_MAX_LIFE))
set Y82=YTI(YSI(R2I(100-Y72)/7,14),1)
if KMI(V8I)==false then
call PWI(V8I,WTI*Y82*2)
call PKI(V8I,WTI*Y82*3)
if Y72<40 then
if Y92==false then
call SaveBoolean(ZY,(V0I),(319),(true))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl",V8I,"left weapon")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("effects\\HeadhunterWEAPONSRight_NoSound.mdx",V8I,"right weapon")))
endif
else
if Y92==true then
call SaveBoolean(ZY,(V0I),(319),(false))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
endif
endif
endif
endif
set V8I=null
return false
endfunction
function YA2 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function Y52))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
call SaveBoolean(ZY,(GetHandleId(t)),(319),(false))
set t=null
endfunction
function YB2 takes nothing returns boolean
if GetLearnedSkill()==1093685585 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685585)==1 then
call YA2()
endif
return false
endfunction
function G61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function YB2))
set t=null
endfunction
function YC2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local integer id=GetPlayerId(GetOwningPlayer(XSI))
local integer ZLI=GetTriggerEvalCount(t)
local real KUI=x+150*ZLI*Cos(a)
local real L0I=y+150*ZLI*Sin(a)
local integer YD2=6
if GetUnitAbilityLevel(XSI,1093685045)==0 then
set YD2=9
endif
call IssuePointOrder(I8I[id],"flamestrike",KUI,L0I)
if ZLI==(YD2)then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitAnimation(XSI,"stand")
endif
set t=null
set XSI=null
return false
endfunction
function YE2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
local integer WTI=GetUnitAbilityLevel(XSI,1093685045)
local integer YF2=1093685061
if WTI==0 then
set WTI=GetUnitAbilityLevel(XSI,1093747249)
set YF2=1093747250
endif
call RemoveLocation(l)
call SetUnitAnimation(XSI,"spell")
set I8I[GetPlayerId(GetOwningPlayer(XSI))]=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call KKI(I8I[GetPlayerId(GetOwningPlayer(XSI))],YF2)
call SetUnitAbilityLevel(I8I[GetPlayerId(GetOwningPlayer(XSI))],YF2,WTI)
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XSI))*1.0))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
if YF2==1093685061 then
call TriggerRegisterTimerEvent(t,0.1,true)
else
call TriggerRegisterTimerEvent(t,0.05,true)
endif
call TriggerAddCondition(t,Condition(function YC2))
set t=null
set XSI=null
set l=null
endfunction
function YG2 takes nothing returns boolean
if GetSpellAbilityId()==1093685045 or GetSpellAbilityId()==1093747249 then
call YE2()
endif
return false
endfunction
function OY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YG2))
call YVI(1093685061)
set t=null
endfunction
function YH2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEvalCount(t)>10 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call UnitRemoveAbility(XTI,1093748533)
call UnitRemoveAbility(XTI,1093748531)
call UnitRemoveAbility(XTI,1093748534)
call UnitRemoveAbility(XTI,1093748532)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call XNI(XSI,XTI,1,(WTI*5+5)/2)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function YZ2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=IAI
local unit XSI=I9I
local unit XTI=GetEnumUnit()
if WTI==1 then
call KKI(XTI,1093748533)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093748533,false)
elseif WTI==2 then
call KKI(XTI,1093748531)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093748531,false)
elseif WTI==3 then
call KKI(XTI,1093748534)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093748534,false)
elseif WTI==4 then
call KKI(XTI,1093748532)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093748532,false)
endif
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",XTI,"chest")))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YH2))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",GetUnitX(XTI),GetUnitY(XTI)))
set t=null
set XSI=null
set XTI=null
endfunction
function YV2 takes unit XSI,unit XTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093685048)
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local group g=ZJI()
local group g2=ZJI()
set IAI=WTI
set I9I=XSI
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,200,Condition(function S8I))
call GroupEnumUnitsInRange(g2,x,y,200,Condition(function NUI))
call GroupAddGroup(g2,g)
call ForGroup(g,function YZ2)
call ZYI(g)
call ZYI(g2)
set t=null
set g=null
set g2=null
endfunction
function YW2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and(GetEventDamage()>40 or IsUnitType(XTI,UNIT_TYPE_STRUCTURE)==true or GetUnitTypeId(XTI)==1970107511 or GetUnitTypeId(XTI)==1700946284)and(LoadBoolean(ZY,(GetHandleId(XSI)),(312)))==true then
call YV2(XSI,XTI)
call SaveBoolean(ZY,(GetHandleId(XSI)),(312),(false))
call SaveReal(ZY,(GetHandleId(XSI)),(313),(((TimerGetElapsed(M)))*1.0))
call FlushChildHashtable(ZY,(GetHandleId((LoadTriggerHandle(ZY,(V0I),(35))))))
call ZSI((LoadTriggerHandle(ZY,(V0I),(35))))
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function YX2 takes nothing returns boolean
local trigger t
local integer V0I
local unit XTI
local unit XSI
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SaveBoolean(ZY,(GetHandleId(GetTriggerUnit())),(312),(false))
call SaveReal(ZY,(GetHandleId(GetTriggerUnit())),(313),(((TimerGetElapsed(M)))*1.0))
call UnitRemoveAbility(GetTriggerUnit(),1093748291)
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
elseif GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(320)))then
if IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
set XTI=GetTriggerUnit()
set XSI=GetAttacker()
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function YW2))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveTriggerHandle(ZY,(V0I),(35),(GetTriggeringTrigger()))
set XTI=null
set XSI=null
set t=null
endif
endif
return false
endfunction
function YY2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real JOI=(TimerGetElapsed(M))
local integer WTI=GetUnitAbilityLevel(V8I,1093685048)
local real AS2=(LoadReal(ZY,(GetHandleId(V8I)),(313)))
local boolean YJ2=(LoadBoolean(ZY,(GetHandleId(V8I)),(312)))
if JOI-AS2>25-WTI*5 and YJ2==false and GetUnitTypeId(V8I)==1160786000 and KMI(V8I)==false then
call SaveBoolean(ZY,(GetHandleId(V8I)),(312),(true))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YX2))
call SaveUnitHandle(ZY,(V0I),(320),(V8I))
call KKI(V8I,1093748291)
elseif YJ2==false then
call UnitRemoveAbility(V8I,1093748291)
endif
set t=null
set V8I=null
return false
endfunction
function YK2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerAddCondition(t,Condition(function YY2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(313),((0)*1.0))
set V8I=null
set t=null
endfunction
function YL2 takes nothing returns boolean
if GetLearnedSkill()==1093685048 and GetUnitAbilityLevel(GetTriggerUnit(),1093685048)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call YK2()
endif
return false
endfunction
function OW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function YL2))
set t=null
endfunction
function IP_RawAbil takes nothing returns integer
return 1093685046
endfunction
function IP_RawStunAbil takes nothing returns integer
return 1093685062
endfunction
function YM2 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetDyingUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))
endfunction
function YN2 takes nothing returns boolean
return GetUnitTypeId(GetDyingUnit())==1697657173
endfunction
function YS2 takes nothing returns nothing
local unit u=GetDyingUnit()
local integer FH2=GetUnitUserData(u)
local group g
local unit YT2
local unit YR2
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),175,Condition(function YM2))
loop
set YR2=FirstOfGroup(g)
exitwhen(YR2==null)
call GroupRemoveUnit(g,YR2)
set YT2=CreateUnit(GetOwningPlayer(u),1697656901,GetUnitX(YR2),GetUnitY(YR2),0)
call KKI(YT2,(1093685062))
call SetUnitAbilityLevel(YT2,(1093685062),FH2)
call IssueTargetOrder(YT2,"thunderbolt",YR2)
call UnitApplyTimedLife(YT2,1112820806,1)
call KKI(YT2,1097625443)
endloop
call ZYI(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(u),GetUnitY(u)))
endfunction
function YP2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=GetUnitAbilityLevel(V8I,(1093685046))
local real x=(LoadReal(ZY,(V0I),(321)))
local real y=(LoadReal(ZY,(V0I),(322)))
local real B92=(LoadReal(ZY,(V0I),(323)))
local unit YT2
local integer CI2=(LoadInteger(ZY,(V0I),(324)))
set x=x+100*Cos(B92*bj_DEGTORAD)
set y=y+100*Sin(B92*bj_DEGTORAD)
call SaveReal(ZY,(V0I),(321),((x)*1.0))
call SaveReal(ZY,(V0I),(322),((y)*1.0))
set YT2=CreateUnit(GetOwningPlayer(V8I),1697657173,x,y,GetRandomReal(0,359))
call UnitApplyTimedLife(YT2,1112820806,0.5)
call SetUnitUserData(YT2,WTI)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",x,y))
set CI2=CI2+1
call SaveInteger(ZY,(V0I),(324),(CI2))
if CI2>=10 then
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
call DestroyTimer(t)
endif
endfunction
function YQ2 takes nothing returns boolean
return GetSpellAbilityId()==(1093685046)
endfunction
function YU2 takes nothing returns nothing
local timer t=CreateTimer()
local unit V8I=GetTriggerUnit()
local location FV2=GetSpellTargetLoc()
local location J02=GetUnitLoc(V8I)
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(321),((GetUnitX(V8I))*1.0))
call SaveReal(ZY,(V0I),(322),((GetUnitY(V8I))*1.0))
call SaveReal(ZY,(V0I),(323),((AngleBetweenPoints(J02,FV2))*1.0))
call SaveInteger(ZY,(V0I),(324),(0))
call RemoveLocation(J02)
call RemoveLocation(FV2)
call TimerStart(t,0.05,true,function YP2)
endfunction
function OX1 takes nothing returns nothing
local trigger JI2=CreateTrigger()
local trigger t=CreateTrigger()
call K7I(JI2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(JI2,Condition(function YN2))
call TriggerAddAction(JI2,function YS2)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YQ2))
call TriggerAddAction(t,function YU2)
endfunction
function J12 takes real x1,real y1,real x2,real y2,real x3,real y3,real x,real y returns boolean
local real JO2=(y-y1)*(x2-x1)-(x-x1)*(y2-y1)
local real J22=(y-y3)*(x1-x3)-(x-x3)*(y1-y3)
local real J32=(y-y2)*(x3-x2)-(x-x2)*(y3-y2)
return(JO2*J22>0)and(J32*J22>0)
endfunction
function J42 takes nothing returns boolean
local real J52=TJ
local real J62=RJ
local real J72=PJ
local real J82=QJ
local real J92=UJ
local real JA2=IK
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and J12(J52,J62,J72,J82,J92,JA2,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
endfunction
function JB2 takes real JC2,real JD2,real JE2 returns nothing
local real JF2=550
local real JG2=200
local real JH2=250
local real JZ2=Asin((JH2-JG2)/JF2)
local real x=JG2/Sin(JZ2)
local real y=(JF2+JH2+x)*Tan(JZ2)
local real J52=JD2+x*Cos((JC2-180)*bj_DEGTORAD)
local real J62=JE2+x*Sin((JC2-180)*bj_DEGTORAD)
local real J72=(JD2+(JF2+JH2)*Cos(JC2*bj_DEGTORAD))+y*Cos((JC2-90)*bj_DEGTORAD)
local real J82=(JE2+(JF2+JH2)*Sin(JC2*bj_DEGTORAD))+y*Sin((JC2-90)*bj_DEGTORAD)
local real J92=(JD2+(JF2+JH2)*Cos(JC2*bj_DEGTORAD))+y*Cos((JC2+90)*bj_DEGTORAD)
local real JA2=(JE2+(JF2+JH2)*Sin(JC2*bj_DEGTORAD))+y*Sin((JC2+90)*bj_DEGTORAD)
set TJ=J52
set RJ=J62
set PJ=J72
set QJ=J82
set UJ=J92
set IK=JA2
endfunction
function JV2 takes nothing returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call KKI(T0I,1093685057)
call IssueTargetOrder(T0I,"frostnova",GetEnumUnit())
set T0I=null
endfunction
function JW2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit T0I
if GetTriggerEvalCount(t)>1 then
call SetUnitAnimation(V8I,"stand")
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitAnimation(V8I,"spell")
set T0I=CreateUnit(p,1697656901,x,y,0)
call KKI(T0I,1093685059)
call SetUnitAbilityLevel(T0I,1093685059,WTI)
call IssuePointOrder(T0I,"breathoffrost",J6I,J7I)
endif
set t=null
set p=null
set V8I=null
set T0I=null
return false
endfunction
function JX2 takes unit u,player p,integer WTI,location l,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SavePlayerHandle(ZY,(V0I),(54),(p))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveReal(ZY,(V0I),(47),((GetLocationX(l))*1.0))
call SaveReal(ZY,(V0I),(48),((GetLocationY(l))*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(14),(u))
call TriggerRegisterTimerEvent(t,0.3,true)
call TriggerAddCondition(t,Condition(function JW2))
set t=null
endfunction
function JY2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093685047)
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local location l
local unit T0I
local group g=ZJI()
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
else
set l=GetUnitLoc(GetSpellTargetUnit())
endif
call JB2(bj_RADTODEG*Atan2(GetLocationY(l)-y,GetLocationX(l)-x),x,y)
call GroupEnumUnitsInRange(g,x,y,2000,Condition(function J42))
call ForGroup(g,function JV2)
call ZYI(g)
set T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,x,y,0)
call KKI(T0I,1093685058)
call SetUnitAbilityLevel(T0I,1093685058,WTI)
call IssuePointOrder(T0I,"breathoffire",GetLocationX(l),GetLocationY(l))
call JX2(V8I,GetOwningPlayer(V8I),WTI,l,x+50*Cos(Atan2(GetLocationY(l)-y,GetLocationX(l)-x)),y+50*Sin(Atan2(GetLocationY(l)-y,GetLocationX(l)-x)))
call RemoveLocation(l)
set V8I=null
set l=null
set g=null
endfunction
function JJ2 takes nothing returns boolean
if GetSpellAbilityId()==1093685047 then
call JY2()
endif
return false
endfunction
function OV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JJ2))
call YVI(1093685058)
call YVI(1093685059)
call YVI(1093685057)
set t=null
endfunction
function JK2 takes unit V8I,unit XTI returns nothing
local real a=GetRandomReal(0,360)
local real x=GetUnitX(XTI)+50*Cos(a*bj_DEGTORAD)
local real y=GetUnitY(XTI)+50*Sin(a*bj_DEGTORAD)
local real JL2=GetRandomReal(150,250)
call SetUnitPosition(V8I,x,y)
call SetUnitFacing(V8I,bj_RADTODEG*Atan2(GetUnitY(XTI)-GetUnitY(V8I),GetUnitX(XTI)-GetUnitX(V8I)))
call SetUnitAnimation(V8I,"Attack")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",V8I,"chest"))
call XNI(V8I,XTI,2,JL2)
call IssueTargetOrder(V8I,"attack",XTI)
endfunction
function JM2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call JK2(V8I,XTI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
set XTI=null
return false
endfunction
function JN2 takes unit V8I returns nothing
local group g=ZJI()
set OK=V8I
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),450,Condition(function SNI))
set OK=GroupPickRandomUnit(g)
if OK!=null then
call JK2(V8I,OK)
endif
call ZYI(g)
set g=null
endfunction
function JS2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer JT2=(LoadInteger(ZY,(V0I),(216)))
local integer JR2=(LoadInteger(ZY,(V0I),(325)))
local integer CI2=(LoadInteger(ZY,(V0I),(28)))
local unit JP2
if CI2>JT2 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093678407,true)
call SetUnitPathing(V8I,true)
call SetUnitInvulnerable(V8I,false)
call SaveInteger(ZY,(GetHandleId((V8I))),((4253)),(2))
call SetUnitVertexColor(V8I,255,255,255,255)
else
call SaveInteger(ZY,(V0I),(28),(CI2+1))
call JN2(V8I)
if OK==null then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093678407,true)
call SetUnitPathing(V8I,true)
call SetUnitInvulnerable(V8I,false)
call SaveInteger(ZY,(GetHandleId((V8I))),((4253)),(2))
call SetUnitVertexColor(V8I,255,255,255,255)
endif
endif
set t=null
set V8I=null
set JP2=null
return false
endfunction
function JQ2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093684529)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer JR2=GetUnitAbilityLevel(V8I,1093678407)
local player p=GetOwningPlayer(V8I)
local integer JT2=3
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093747032)
if WTI==1 then
set JT2=5
elseif WTI==2 then
set JT2=7
elseif WTI==3 then
set JT2=10
endif
elseif WTI==2 then
set JT2=5
elseif WTI==3 then
set JT2=8
endif
call SetPlayerAbilityAvailable(p,1093678407,false)
call SetUnitVertexColor(V8I,255,255,255,125)
call SetUnitPathing(V8I,false)
call SetUnitInvulnerable(V8I,true)
call SaveInteger(ZY,(GetHandleId((V8I))),((4253)),(1))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function JM2))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(216),(JT2))
call SaveInteger(ZY,(V0I),(325),(JR2))
call SaveInteger(ZY,(V0I),(28),(2))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",V8I,"weapon")))
call TriggerRegisterTimerEvent(t,0.4,true)
call TriggerAddCondition(t,Condition(function JS2))
set V8I=null
set XTI=null
set t=null
set p=null
endfunction
function JU2 takes nothing returns boolean
if GetSpellAbilityId()==1093684529 or GetSpellAbilityId()==1093747032 then
call JQ2()
endif
return false
endfunction
function K02 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitAnimationByIndex(XSI,4)
set t=null
set XSI=null
return false
endfunction
function KI2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.01,false)
call TriggerAddCondition(t,Condition(function K02))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function K12 takes nothing returns boolean
if GetSpellAbilityId()==1093684529 or GetSpellAbilityId()==1093747032 then
call KI2()
endif
return false
endfunction
function AW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JU2))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function K12))
set t=null
endfunction
function KO2 takes nothing returns nothing
call XNI(IBI,GetEnumUnit(),1,(60.0+20.0*ICI)*0.25)
endfunction
function K22 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer ZLI=GetTriggerEvalCount(t)
local group g
if ZLI==20 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set OK=XSI
set IBI=XSI
set ICI=GetUnitAbilityLevel(XSI,1093678407)
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),275,Condition(function SOI))
call ForGroup(g,function KO2)
call ZYI(g)
set g=null
endif
set t=null
set XSI=null
return false
endfunction
function K32 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function K22))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call TriggerEvaluate(t)
call V5I(GetTriggerUnit(),4252,5)
endfunction
function K42 takes nothing returns boolean
if GetSpellAbilityId()==1093678407 then
call K32()
endif
return false
endfunction
function AX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K42))
set t=null
endfunction
function K52 takes nothing returns boolean
return GetUnitTypeId(GetSummonedUnit())==1865429059 or GetUnitTypeId(GetSummonedUnit())==1865429319 or GetUnitTypeId(GetSummonedUnit())==1865429320 or GetUnitTypeId(GetSummonedUnit())==1865429321
endfunction
function K62 takes nothing returns nothing
call SetUnitAbilityLevelSwapped(1093678392,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093678135,GetSummoningUnit()))
endfunction
function AV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function K52))
call TriggerAddAction(t,function K62)
endfunction
function K72 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real x1
local real y1
local real x2
local real y2
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>2 and VSI(GetOwningPlayer(GetEventDamageSource())))then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH then
set x1=GetUnitX(XSI)
set y1=GetUnitY(XSI)
set x2=GetUnitX(XTI)
set y2=GetUnitY(XTI)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",x1,y1))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",x2,y2))
call V5I(XTI,4410,1)
call SetUnitPosition(XTI,GetUnitX(XSI),GetUnitY(XSI))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function K82 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local real d=JAI(GetUnitX(XTI),GetUnitY(XTI),IFI,IGI)
if d<IEI then
set IDI=GetEnumUnit()
set IEI=d
endif
set XTI=null
endfunction
function K92 takes nothing returns nothing
local unit XTI=GetSpellTargetUnit()
local unit XSI=GetTriggerUnit()
local trigger t
local integer V0I
local real SQI
local group g
if XTI==null then
set IDI=null
set IEI=999999
set IFI=GetSpellTargetX()
set IGI=GetSpellTargetY()
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function SZI))
call GroupRemoveUnit(g,XSI)
call ForGroup(g,function K82)
call ZYI(g)
set XTI=IDI
set g=null
endif
if GetSpellAbilityId()==1093742677 then
set SQI=5
elseif GetSpellAbilityId()==1093742937 then
set SQI=4
elseif GetSpellAbilityId()==1093742938 then
set SQI=3
elseif GetSpellAbilityId()==1093750321 then
set SQI=3
endif
if XTI!=null then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,SQI,false)
call TriggerAddCondition(t,Condition(function K72))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",XSI,"origin")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",XTI,"origin")))
endif
set XTI=null
set XSI=null
set t=null
endfunction
function KA2 takes nothing returns boolean
if GetSpellAbilityId()==1093742677 or GetSpellAbilityId()==1093742937 or GetSpellAbilityId()==1093742938 then
call K92()
endif
return false
endfunction
function KB2 takes nothing returns boolean
if GetSpellAbilityId()==1093742677 or GetSpellAbilityId()==1093742937 or GetSpellAbilityId()==1093742938 then
if GetSpellTargetUnit()!=null and(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endif
return false
endfunction
function AL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KA2))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function KB2))
set t=null
endfunction
function KC2 takes integer WTI returns integer
if WTI==1 then
return 1093742682
elseif WTI==2 then
return 1093742897
elseif WTI==3 then
return 1093742681
elseif WTI==4 then
return 1093742896
endif
return 0
endfunction
function KD2 takes integer WTI returns integer
if WTI==1 then
return 1110456653
elseif WTI==2 then
return 1110456654
elseif WTI==3 then
return 1110456655
elseif WTI==4 then
return 1110456652
endif
return 0
endfunction
function KE2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local real d=SquareRoot((DE2-x)*(DE2-x)+(DF2-y)*(DF2-y))
local real KF2=(0.00030+WTI*0.00005)*d*GetUnitState(XTI,UNIT_STATE_MAX_MANA)
local integer PIO=GetTriggerEvalCount(t)
local unit T0I
if XDI(XTI)==true then
set KF2=0
endif
if d>300 then
set KF2=0
endif
if KF2>1 and ModuloInteger(GetTriggerEvalCount(t),3)==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",XTI,"chest"))
endif
if KF2>0 then
call SetUnitState(XTI,UNIT_STATE_MANA,GetUnitState(XTI,UNIT_STATE_MANA)-KF2)
endif
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
if GetTriggerEventId()==EVENT_UNIT_DEATH or PIO==(WTI+3)*10 then
call UnitRemoveAbility(XTI,KC2(WTI))
call UnitRemoveAbility(XTI,KD2(WTI))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetUnitState(XTI,UNIT_STATE_MANA)<1 then
call SUI((LoadUnitHandle(ZY,(V0I),(2))),XTI,1+0.25*WTI)
set T0I=null
call UnitRemoveAbility(XTI,KC2(WTI))
call UnitRemoveAbility(XTI,KD2(WTI))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function KG2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093742680)
call KKI(XTI,KC2(WTI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XTI))*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("effects\\BasicWaterFlash.mdx",XTI,"chest")))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function KE2))
set XSI=null
set XTI=null
set t=null
endfunction
function KH2 takes nothing returns boolean
if GetSpellAbilityId()==1093742680 and ZXI(GetSpellTargetUnit())==false then
call KG2()
endif
return false
endfunction
function AY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KH2))
set t=null
endfunction
function KZ2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit KV2=(LoadUnitHandle(ZY,(V0I),(19)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local integer KW2=(LoadInteger(ZY,(V0I),(34)))
local real KX2=GetUnitX(KV2)-50*Cos(B92)
local real KY2=GetUnitY(KV2)-50*Sin(B92)
local unit T0I=CreateUnit(GetOwningPlayer(KV2),1697656901,KX2,KY2,0)
local real x=GetUnitX(T0I)+50*Cos(B92)
local real y=GetUnitY(T0I)+50*Sin(B92)
local real x2=x+(300+50*KW2)*Cos(B92)
local real y2=y+(300+50*KW2)*Sin(B92)
call KKI(T0I,1093679159)
call SetUnitAbilityLevel(T0I,1093679159,KW2)
call IssuePointOrder(T0I,"breathoffire",x,y)
call KillUnit(KV2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set T0I=null
set t=null
return false
endfunction
function KJ2 takes unit KV2,integer KW2,real B92 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function KZ2))
call SaveUnitHandle(ZY,(V0I),(19),(KV2))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveInteger(ZY,(V0I),(34),(KW2))
set t=null
endfunction
function KK2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local integer KW2=ZLI-1
local real B92=(LoadReal(ZY,(V0I),(13)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer KL2=2+WTI*2
local boolean KM2=(LoadBoolean(ZY,(V0I),(240)))
local unit YT2
if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
call SaveInteger(ZY,(V0I),(34),(ZLI+1))
endif
call SetUnitScale(T0I,I2R(100+20*KW2)/100,I2R(100+20*KW2)/100,I2R(100+20*KW2)/100)
if(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and KM2==false)or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093743153)or KW2==KL2 then
if KM2 then
set YT2=(LoadUnitHandle(ZY,(V0I),(239)))
call ShowUnit(YT2,false)
call UnitApplyTimedLife(YT2,1112820806,1)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if(LoadInteger(ZY,(GetHandleId(V8I)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(V8I)),(704)))==1093679157 then
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093679157,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093743153,false)
call UnitRemoveAbility(V8I,1093743153)
call KJ2(T0I,KW2,B92)
endif
set T0I=CreateUnit(GetOwningPlayer(T0I),1747990093,GetUnitX(T0I)+150*(KW2)*Cos(B92),GetUnitY(T0I)+150*(KW2)*Sin(B92),0)
call UnitApplyTimedLife(T0I,1112820806,7)
set t=null
set T0I=null
set V8I=null
set YT2=null
return false
endfunction
function KN2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
call IssueImmediateOrder(V8I,"stop")
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function KS2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real B92=Atan2(GetLocationY(l)-GetUnitY(V8I),GetLocationX(l)-GetUnitX(V8I))
local real x
local real y
local unit T0I
local unit YT2
local boolean KM2=false
if GetLocationY(l)==GetUnitY(V8I)and GetLocationX(l)==GetUnitX(V8I)then
set B92=GetUnitFacing(V8I)*bj_DEGTORAD
endif
set x=GetUnitX(V8I)+150*Cos(B92)
set y=GetUnitY(V8I)+150*Sin(B92)
set T0I=CreateUnit(GetOwningPlayer(V8I),1966092362,x,y,B92*bj_RADTODEG)
call RemoveLocation(l)
if GetUnitTypeId(V8I)==1211119192 or GetUnitTypeId(V8I)==1211119193 or GetUnitTypeId(V8I)==1211119191 then
set KM2=true
endif
call SaveBoolean(ZY,(V0I),(240),(KM2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(34),(1))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(V8I,1093679157)))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function KK2))
if KM2 then
set YT2=CreateUnit(GetOwningPlayer(V8I),1747990106,GetUnitX(V8I),GetUnitY(V8I),B92*bj_RADTODEG)
call SetUnitX(YT2,GetUnitX(V8I))
call SetUnitY(YT2,GetUnitY(V8I))
call SetUnitAnimation(YT2,"spell")
call QueueUnitAnimation(YT2,"spell")
call QueueUnitAnimation(YT2,"spell")
call SetUnitVertexColor(YT2,255,255,255,75)
call SaveUnitHandle(ZY,(V0I),(239),(YT2))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function KN2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093679157,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093743153,true)
call MSI(V8I,1093743153,1,6)
set t=null
set V8I=null
set T0I=null
set YT2=null
set l=null
endfunction
function KT2 takes nothing returns boolean
if GetSpellAbilityId()==1093679157 then
call KS2()
endif
return false
endfunction
function AK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KT2))
set t=null
endfunction
function KR2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer SQI=(LoadInteger(ZY,(V0I),(188)))
local integer ZLI=GetTriggerEvalCount(t)
if ZLI==SQI or GetUnitTypeId(XSI)==1214409837 then
if(LoadReal(ZY,(GetHandleId(XSI)),(241)))<=(TimerGetElapsed(M))or GetUnitTypeId(XSI)==1214409837 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093742932,true)
else
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function KP2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093742932)
local integer SQI=40
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093742932,false)
call SaveReal(ZY,(GetHandleId(XSI)),(241),(((TimerGetElapsed(M))+SQI)*1.0))
call SaveInteger(ZY,(V0I),(188),(SQI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function KR2))
set t=null
set XSI=null
endfunction
function Ignis_Main takes nothing returns boolean
if GetSpellAbilityId()==1093742932 and GetUnitTypeId(GetTriggerUnit())==1214409837 then
call KP2()
endif
return false
endfunction
function AN1 takes nothing returns nothing
endfunction
function KQ2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real H1O=(LoadReal(ZY,(V0I),(242)))
call SetUnitState(XTI,UNIT_STATE_MANA,GetUnitState(XTI,UNIT_STATE_MANA)+H1O)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl",XTI,"origin"))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set XTI=null
set t=null
return false
endfunction
function KU2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(242),((75*GetUnitAbilityLevel(V8I,1093742898))*1.0))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function KQ2))
set t=null
set V8I=null
set XTI=null
endfunction
function L02 takes nothing returns boolean
if GetSpellAbilityId()==1093742898 then
call KU2()
endif
return false
endfunction
function AJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function L02))
set t=null
endfunction
function LI2 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local real a=Atan2(y-IVI,x-IZI)
set x=YEI(x+25*Cos(a))
set y=YHI(y+25*Sin(a))
call KCI(x,y,150)
call SetUnitX(XTI,x)
call SetUnitY(XTI,y)
set XTI=null
endfunction
function L12 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local unit T0I=CreateUnit(GK,1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093742679)
call SetUnitAbilityLevel(T0I,1093742679,IHI)
call IssueTargetOrder(T0I,"drunkenhaze",XTI)
set XTI=null
set T0I=null
endfunction
function LO2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local real J4I=(LoadReal(ZY,(V0I),(189)))
local real J5I=(LoadReal(ZY,(V0I),(190)))
local integer MMI=(LoadInteger(ZY,(V0I),(59)))
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
local integer ZLI=GetTriggerEvalCount(t)
set IZI=J4I
set IVI=J5I
call ForGroup(g,function LI2)
if ZLI==10 then
if MMI==1093742936 then
set IHI=1
elseif MMI==1093742934 then
set IHI=2
else
set IHI=3
endif
set GK=p
call ForGroup(g,function L12)
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set p=null
set g=null
return false
endfunction
function L22 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local real J4I=(LoadReal(ZY,(V0I),(189)))
local real J5I=(LoadReal(ZY,(V0I),(190)))
local integer MMI=(LoadInteger(ZY,(V0I),(59)))
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
call ZSI(t)
call FlushChildHashtable(ZY,(V0I))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.04,true)
call TriggerAddCondition(t,Condition(function LO2))
call SavePlayerHandle(ZY,(V0I),(54),(p))
call SaveReal(ZY,(V0I),(189),((J4I)*1.0))
call SaveReal(ZY,(V0I),(190),((J5I)*1.0))
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveInteger(ZY,(V0I),(59),(MMI))
set t=null
set p=null
set g=null
return false
endfunction
function L32 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local group g=ZJI()
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call KillUnit(CreateUnit(GetOwningPlayer(XSI),1747990096,x,y,0))
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,700,Condition(function S5I))
call TriggerRegisterTimerEvent(t,0.4,false)
call TriggerAddCondition(t,Condition(function L22))
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(GetTriggerUnit())))
call SaveReal(ZY,(V0I),(189),((x)*1.0))
call SaveReal(ZY,(V0I),(190),((y)*1.0))
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveInteger(ZY,(V0I),(59),(GetSpellAbilityId()))
set t=null
set g=null
set XSI=null
endfunction
function L42 takes nothing returns boolean
if GetSpellAbilityId()==1093742936 or GetSpellAbilityId()==1093742934 or GetSpellAbilityId()==1093742935 then
call L32()
endif
return false
endfunction
function AM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function L42))
set t=null
endfunction
function L52 takes unit V8I,integer WTI returns integer
local integer L62
local integer L72
if WTI==1 then
set L72=1110458929
set L62=1093744730
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
set L72=1110458928
set L62=1093744970
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
set L72=1110458713
set L62=1093744970
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
return 1093744729
elseif WTI==2 then
set L72=1110458936
set L62=1093744968
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
set L72=1110458935
set L62=1093744967
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
set L72=1110458930
set L62=1093744967
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
return 1093744969
elseif WTI==3 then
set L72=1110458931
set L62=1093744965
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
set L72=1110458937
set L62=1093744964
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
set L72=1110458934
set L62=1093744964
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
return 1093744971
elseif WTI==4 then
set L72=1110458933
set L62=1093744950
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
set L72=1110458932
set L62=1093744949
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
set L72=1110458945
set L62=1093744949
if GetUnitAbilityLevel(V8I,L72)>0 then
call UnitRemoveAbility(V8I,L72)
return L62
endif
return 1093744972
endif
return 0
endfunction
function L82 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093744728)
local integer L92=L52(V8I,WTI)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
call KKI(T0I,L92)
call IssueTargetOrder(T0I,"bloodlust",V8I)
set V8I=null
set T0I=null
endfunction
function LA2 takes nothing returns boolean
if GetSpellAbilityId()==1093677382 or GetSpellAbilityId()==1093677623 or GetSpellAbilityId()==1093677392 or GetSpellAbilityId()==1093679450 then
call L82()
endif
return false
endfunction
function LB2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LA2))
set t=null
set V8I=null
endfunction
function LC2 takes nothing returns boolean
if GetLearnedSkill()==1093744728 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093744728)==1 then
call LB2()
endif
return false
endfunction
function HL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function LC2))
set t=null
endfunction
function LD2 takes nothing returns boolean
if(GetSpellAbilityId()==1093677392 or GetSpellAbilityId()==1093679450)and XDI(GetSpellTargetUnit())then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))
endif
return false
endfunction
function HM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function LD2))
set t=null
endfunction
function LE2 takes nothing returns boolean
if GetLearnedSkill()==1093678129 then
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382378855,GetUnitAbilityLevel(GetTriggerUnit(),1093678129))
elseif GetLearnedSkill()==1093678642 then
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889801,1)
endif
return false
endfunction
function AT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function LE2))
set t=null
endfunction
function LF2 takes nothing returns boolean
if(GetUnitTypeId((GetFilterUnit()))==1966092345)or(XDI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))then
if(LoadInteger(ZY,(IWI),(GetHandleId(GetFilterUnit()))))<MJ then
return true
endif
endif
return false
endfunction
function LG2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer LH2=(LoadInteger(ZY,(V0I),(217)))
local integer JT2=(LoadInteger(ZY,(V0I),(216)))
local integer LZ2=(LoadInteger(ZY,(V0I),(218)))
local group g=ZJI()
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local unit XTI
local real r1=GetRandomInt(200,350)
local real r2=GetRandomInt(200,350)
if GetRandomInt(1,2)==1 then
set r1=-1*r1
set r2=-1*r2
endif
set OK=V8I
set MJ=LZ2
set IWI=GetHandleId(t)
call GroupEnumUnitsInRange(g,x,y,700,Condition(function LF2))
set XTI=GroupPickRandomUnit(g)
call ZYI(g)
if KMI(V8I)==false and XTI!=null and(GetUnitTypeId((XTI))==1966092345)==false then
call SaveInteger(ZY,(IWI),(GetHandleId(XTI)),((LoadInteger(ZY,(IWI),(GetHandleId(XTI))))+1))
call JWI("effects\\Eclipse.mdx",XTI,"origin",3)
call XNI(V8I,XTI,1,LH2*75)
elseif KMI(V8I)==false then
set x=x+GetRandomInt(-350,350)
set y=y+GetRandomInt(-350,350)
call JKI("effects\\Eclipse.mdx",x,y,1.5)
endif
if(GetTriggerEvalCount(t)+1)==JT2 or KMI(V8I)==true then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
set g=null
set XTI=null
return false
endfunction
function LV2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer JT2
local integer LH2=GetUnitAbilityLevel(V8I,1093678130)
local integer LZ2
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
if LH2==0 and GetUnitTypeId(V8I)!=1160785973 then
set LH2=4
endif
call KKI(T0I,1093751862)
if GetSpellAbilityId()==1093678388 then
set JT2=1+3*GetUnitAbilityLevel(V8I,1093678388)
set LZ2=4
else
set JT2=4*GetUnitAbilityLevel(V8I,1093677141)
set LZ2=6
endif
call SaveInteger(ZY,(V0I),(217),(LH2))
call SaveInteger(ZY,(V0I),(216),(JT2))
call SaveInteger(ZY,(V0I),(218),(LZ2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0.6,true)
call TriggerAddCondition(t,Condition(function LG2))
call TriggerEvaluate(t)
call IssueImmediateOrderById(T0I,852621)
set t=null
set V8I=null
set T0I=null
endfunction
function LW2 takes nothing returns boolean
if GetSpellAbilityId()==1093678388 or GetSpellAbilityId()==1093677141 then
call LV2()
endif
return false
endfunction
function AS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LW2))
set t=null
endfunction
function LX2 takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",GetEnumUnit(),"origin"))
endfunction
function LY2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
call XNI(V8I,XTI,1,GetUnitAbilityLevel(V8I,1093684054)*37.5)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
set XTI=null
return false
endfunction
function LJ2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local group g=ZJI()
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",XTI,"origin"))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ZYI(g)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(30),(XUI))
call TriggerRegisterTimerEvent(t,0.5,false)
call TriggerAddCondition(t,Condition(function LY2))
set t=null
set V8I=null
set g=null
set XTI=null
return false
endfunction
function LK2 takes nothing returns nothing
call XNI(IYI,GetEnumUnit(),1,IXI)
endfunction
function LL2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
set IXI=GetUnitAbilityLevel(V8I,1093684054)*75
set IYI=V8I
call ForGroup(g,function LK2)
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
set g=null
return false
endfunction
function LM2 takes nothing returns nothing
local real J3I=J8I(GetTriggerUnit(),GetEnumUnit())
if J3I>650 then
else
call GroupAddUnit(EK,GetEnumUnit())
endif
endfunction
function LN2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local group g=ZJI()
local unit XTI
set OK=V8I
set IYI=V8I
set EK=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),900,Condition(function S1I))
call ForGroup(g,function LM2)
call ZYI(g)
set g=EK
call ForGroup(g,function LX2)
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0.5,false)
call TriggerAddCondition(t,Condition(function LL2))
set IYI=V8I
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),200,Condition(function S1I))
set XTI=GroupPickRandomUnit(g)
call ZYI(g)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl",V8I,"origin")))
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function LJ2))
set t=null
set g=null
set V8I=null
set XTI=null
endfunction
function LS2 takes nothing returns boolean
if GetSpellAbilityId()==1093684054 then
call LN2()
endif
return false
endfunction
function FJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LS2))
set t=null
endfunction
constant function MoonlightShadow_RawCode takes nothing returns integer
return 1093684053
endfunction
constant function MoonlightShadow_InvisibilityAbility takes nothing returns integer
return 1093684052
endfunction
function LT2 takes nothing returns boolean
return GetSpellAbilityId()==(1093684053)
endfunction
function LR2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function LP2 takes nothing returns nothing
call KKI(GetEnumUnit(),(1093684052))
call SetUnitAbilityLevel(GetEnumUnit(),(1093684052),JO)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",GetEnumUnit(),"chest"))
endfunction
function LQ2 takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),(1093684052))
endfunction
function LU2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local group U4I=(LoadGroupHandle(ZY,(V0I),(220)))
call ForGroup(U4I,function LQ2)
call ZYI(U4I)
call JSI(t)
endfunction
function M02 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local group U4I=ZJI()
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(V8I,(1093684053))
local real SQI=11
set JO=WTI
call GroupEnumUnitsInRange(U4I,0,0,9999,Condition(function LR2))
call ForGroup(U4I,function LP2)
call SaveGroupHandle(ZY,(V0I),(220),(U4I))
call TimerStart(t,SQI,false,function LU2)
endfunction
function FY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LT2))
call TriggerAddAction(t,function M02)
endfunction
constant function Leap_RawCode takes nothing returns integer
return 1093684302
endfunction
constant function Leap_BonusCode takes nothing returns integer
return 1093684303
endfunction
function MI2 takes nothing returns boolean
return GetSpellAbilityId()==(1093684302)
endfunction
function M12 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(YO))
endfunction
function MO2 takes nothing returns nothing
local unit V8I=GetEnumUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697657170,0,0,0)
call KKI(T0I,(1093684303))
call SetUnitAbilityLevel(T0I,(1093684303),GetUnitAbilityLevel(YO,(1093684302)))
call UnitApplyTimedLife(T0I,1112820806,10)
endfunction
function M22 takes unit V8I returns nothing
local group U4I=ZJI()
set YO=V8I
call GroupEnumUnitsInRange(U4I,GetUnitX(V8I),GetUnitY(V8I),800,Condition(function M12))
call ForGroup(U4I,function MO2)
call ZYI(U4I)
endfunction
function M32 takes unit V8I returns nothing
local integer V0I=GetHandleId(V8I)
local string M42=(LoadStr(ZY,(V0I),(206)))
local string M52=OrderId2String((LoadInteger(ZY,(V0I),(211))))
local real J6I
local real J7I
local unit XTI
local trigger t=(LoadTriggerHandle(ZY,(V0I),(204)))
local boolean M62=not(LoadBoolean(ZY,(V0I),(207)))
local boolean M72=(LoadBoolean(ZY,(V0I),(208)))
call DisableTrigger(t)
call IssueImmediateOrder(V8I,"stop")
if M42=="Target"and(M62 or M72)then
set XTI=(LoadUnitHandle(ZY,(V0I),(215)))
call IssueTargetOrder(V8I,M52,XTI)
elseif M42=="Point"and(M62 or M72)then
set J6I=(LoadReal(ZY,(V0I),(209)))
set J7I=(LoadReal(ZY,(V0I),(210)))
call IssuePointOrder(V8I,M52,J6I,J7I)
elseif(M62 or M72)then
call IssueImmediateOrder(V8I,"OrderString")
endif
call SaveBoolean(ZY,(V0I),(208),(false))
call EnableTrigger(t)
endfunction
function M82 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real M92=(LoadReal(ZY,(V0I),(212)))
local real MA2=(LoadReal(ZY,(V0I),(213)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real KUI=GetUnitX(V8I)+30*Cos(B92*bj_DEGTORAD)
local real L0I=GetUnitY(V8I)+30*Sin(B92*bj_DEGTORAD)
local real MB2=200
local real MC2=(1-M92/MA2)*MB2*2
if MC2>MB2 then
set MC2=MB2*2-MC2
endif
call SetUnitFlyHeight(V8I,YQI(MC2,0),0)
call SetUnitX(V8I,YEI(KUI))
call SetUnitY(V8I,YHI(L0I))
call SetUnitFacing(V8I,B92)
call SaveReal(ZY,(V0I),(212),((M92-20)*1.0))
if MC2<1 and M92-MA2!=0 then
call SaveBoolean(ZY,(GetHandleId(V8I)),(214),(false))
call SetUnitFacing(V8I,B92)
call SetUnitAnimation(V8I,"stand")
call SetUnitPathing(V8I,true)
call M32(V8I)
call M22(V8I)
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
call DestroyTimer(t)
endif
endfunction
function MD2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,(1093684302))
local real J3I=350+50*WTI
local real B92=GetUnitFacing(V8I)
local real J4I=GetUnitX(V8I)
local real J5I=GetUnitY(V8I)
local real J6I=YEI(J4I+J3I*Cos(B92*bj_DEGTORAD))
local real J7I=YHI(J5I+J3I*Sin(B92*bj_DEGTORAD))
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
local trigger ME2=(LoadTriggerHandle(ZY,(GetHandleId(V8I)),(204)))
set J3I=SquareRoot((J4I-J6I)*(J4I-J6I)+(J5I-J7I)*(J5I-J7I))
if J3I>100 then
call KKI(V8I,1097691750)
call UnitRemoveAbility(V8I,1097691750)
call SetUnitPathing(V8I,false)
call SetUnitAnimationByIndex(V8I,6)
call DisableTrigger(ME2)
call IssueImmediateOrder(V8I,"stop")
call EnableTrigger(ME2)
call SaveReal(ZY,(V0I),(212),((J3I)*1.0))
call SaveReal(ZY,(V0I),(213),((J3I)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TimerStart(t,0.025,true,function M82)
call SaveBoolean(ZY,(GetHandleId(V8I)),(214),(true))
call SaveBoolean(ZY,(GetHandleId(V8I)),(208),(false))
endif
endfunction
function MF2 takes nothing returns boolean
return OrderId2String(GetIssuedOrderId())!="windwalk"
endfunction
function MG2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer V0I=GetHandleId(V8I)
local boolean MH2=(LoadBoolean(ZY,(V0I),(214)))
call SaveInteger(ZY,(V0I),(211),(GetIssuedOrderId()))
call SaveBoolean(ZY,(V0I),(207),(false))
if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
if MH2 or JTI(GetUnitX(V8I),GetUnitY(V8I),GetOrderPointX(),GetOrderPointY())>800 then
call SaveStr(ZY,(V0I),(206),("Point"))
call SaveReal(ZY,(V0I),(209),((GetOrderPointX())*1.0))
call SaveReal(ZY,(V0I),(210),((GetOrderPointY())*1.0))
else
call SaveBoolean(ZY,(V0I),(207),(true))
endif
else
call SaveStr(ZY,(V0I),(206),("Instant"))
endif
if MH2 then
call SaveBoolean(ZY,(V0I),(208),(true))
endif
endfunction
function MZ2 takes nothing returns nothing
local unit V8I=(LoadUnitHandle(ZY,(GetHandleId(GetExpiredTimer())),(14)))
local integer V0I=GetHandleId(V8I)
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local string M42=(LoadStr(ZY,(V0I),(206)))
if M42=="Point"and JTI(GetUnitX(V8I),GetUnitY(V8I),(LoadReal(ZY,(V0I),(209))),(LoadReal(ZY,(V0I),(210))))<100 then
call SaveBoolean(ZY,(V0I),(207),(true))
endif
endfunction
function MV2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local timer t2
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddAction(t,function MG2)
call TriggerAddCondition(t,Condition(function MF2))
call SaveTriggerHandle(ZY,(GetHandleId(V8I)),(204),(t))
set t2=CreateTimer()
call SaveUnitHandle(ZY,(GetHandleId(t2)),(14),(V8I))
call TimerStart(t2,0.3,true,function MZ2)
call SaveTimerHandle(ZY,(GetHandleId(V8I)),(205),(t2))
endfunction
function MW2 takes nothing returns nothing
if GetUnitAbilityLevel(GetTriggerUnit(),(1093684302))==1 then
call MV2()
endif
endfunction
function FL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MI2))
call TriggerAddAction(t,function MD2)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddAction(t,function MW2)
endfunction
constant function ElunesArrow_RawCode takes nothing returns integer
return 1093684280
endfunction
constant function ElunesArrow_ArrowUnit takes nothing returns integer
return 1747988533
endfunction
constant function ElunesArrow_StunCode takes nothing returns integer
return 1093684279
endfunction
function MX2 takes nothing returns boolean
return GetSpellAbilityId()==(1093684280)
endfunction
function MY2 takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(YO))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function MJ2 takes real G42,real G52,real J4I,real J5I returns integer
local real J3I=SquareRoot((J4I-G42)*(J4I-G42)+(J5I-G52)*(J5I-G52))
return YSI(R2I(J3I/150),10)
endfunction
function MK2 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real J4I=GetUnitX(KRI)
local real J5I=GetUnitY(KRI)
local real KUI=YEI(GetUnitX(KRI)+30*Cos(B92))
local real L0I=YHI(GetUnitY(KRI)+30*Sin(B92))
local boolexpr VE1=Condition(function MY2)
local group U4I=ZJI()
local unit T0I
local unit XTI
local real G42
local real G52
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
set YO=V8I
call GroupEnumUnitsInRange(U4I,KUI,L0I,140,VE1)
set XTI=FirstOfGroup(U4I)
call ZYI(U4I)
if XTI!=null then
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
set IJI[GetPlayerId(GetOwningPlayer(V8I))]=IJI[GetPlayerId(GetOwningPlayer(V8I))]+1
call P7I("AA_Hits"+I2S(GetPlayerId(GetOwningPlayer(V8I))),IJI[GetPlayerId(GetOwningPlayer(V8I))])
endif
set G42=(LoadReal(ZY,(V0I),(191)))
set G52=(LoadReal(ZY,(V0I),(192)))
set T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,J4I,J5I,0)
call KKI(T0I,(1093684279))
call SetUnitAbilityLevel(T0I,(1093684279),MJ2(G42,G52,J4I,J5I))
if IssueTargetOrder(T0I,"thunderbolt",XTI)then
endif
call UnitDamageTarget(V8I,XTI,90*GetUnitAbilityLevel(V8I,(1093684280)),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call KillUnit(KRI)
call JSI(t)
elseif(KUI-J6I)*(KUI-J6I)+(L0I-J7I)*(L0I-J7I)<1600 then
call KillUnit(KRI)
call JSI(t)
endif
endfunction
function ML2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local real J4I=YEI(GetUnitX(V8I))
local real J5I=YHI(GetUnitY(V8I))
local location FV2=GetSpellTargetLoc()
local real J6I=GetLocationX(FV2)
local real J7I=GetLocationY(FV2)
local real B92=Atan2(J7I-J5I,J6I-J4I)
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(V8I),(1747988533),J4I,J5I,B92*bj_RADTODEG)
set IKI[GetPlayerId(GetOwningPlayer(V8I))]=IKI[GetPlayerId(GetOwningPlayer(V8I))]+1
call P7I("AA_Total"+I2S(GetPlayerId(GetOwningPlayer(V8I))),IKI[GetPlayerId(GetOwningPlayer(V8I))])
call RemoveLocation(FV2)
call SetUnitFacing(KRI,B92*bj_RADTODEG)
call SetUnitPathing(KRI,false)
set J6I=YEI(J4I+3000*Cos(B92))
set J7I=YHI(J5I+3000*Sin(B92))
call SaveReal(ZY,(V0I),(191),((J4I)*1.0))
call SaveReal(ZY,(V0I),(192),((J5I)*1.0))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call TimerStart(t,0.035,true,function MK2)
endfunction
function MM2 takes nothing returns boolean
local integer MN2=IJI[GetPlayerId(GetTriggerPlayer())]
local integer J1I=IKI[GetPlayerId(GetTriggerPlayer())]
if GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])==1311781206 and J1I>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848657741)+" "+R2S(I2R(MN2)/I2R(J1I)*100)+"% ("+I2S(MN2)+"/"+I2S(J1I)+")")
endif
return false
endfunction
function FK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MX2))
call TriggerAddAction(t,function ML2)
call YVI((1093684279))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-st",true)
call TriggerAddCondition(t,Condition(function MM2))
set t=null
endfunction
function MS2 takes nothing returns boolean
return GetSpellAbilityId()==1093682766
endfunction
function MT2 takes nothing returns boolean
local unit MR2=GetFilterUnit()
if IsUnitInGroup(MR2,C2)then
return false
endif
if IsUnitEnemy(MR2,GetOwningPlayer(YO))and GetUnitAbilityLevel(MR2,1093678162)!=1 and GetUnitState(MR2,UNIT_STATE_LIFE)>0 and IsUnitType(MR2,UNIT_TYPE_STRUCTURE)==false then
return true
endif
return false
endfunction
function MP2 takes nothing returns nothing
call UnitDamageTarget(YO,GetEnumUnit(),KO,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function MQ2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit Y9I=(LoadUnitHandle(ZY,(V0I),(221)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local integer GJO=(LoadInteger(ZY,(V0I),(194)))
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local real DG2=GetUnitX(Y9I)
local real DH2=GetUnitY(Y9I)
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real KUI=DE2+1000*0.05*Cos(B92)
local real L0I=DF2+1000*0.05*Sin(B92)
local group U4I=ZJI()
call SaveReal(ZY,(V0I),(23),((KUI)*1.0))
call SaveReal(ZY,(V0I),(24),((L0I)*1.0))
set YO=Y9I
set KO=GetUnitAbilityLevel(Y9I,1093682766)*75+25
set C2=QY1
call GroupEnumUnitsInRange(U4I,DG2,DH2,280,Condition(function MT2))
call ForGroup(U4I,function MP2)
call GroupAddGroup(U4I,QY1)
call ZYI(U4I)
set GJO=GJO-1
call SaveInteger(ZY,(V0I),(194),(GJO))
call SetUnitX(Y9I,YEI(KUI))
call SetUnitY(Y9I,YHI(L0I))
call SetUnitPosition(T0I,KUI,L0I)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",DG2,DH2))
if GJO==0 then
call RemoveUnit(T0I)
call SetUnitVertexColor(Y9I,255,255,255,255)
call SaveBoolean(ZY,(GetHandleId(Y9I)),(225),(false))
call SetUnitInvulnerable(Y9I,false)
call SetUnitPathing(Y9I,true)
call ZYI(QY1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set Y9I=null
set T0I=null
set QY1=null
set U4I=null
set t=null
return false
endfunction
function MU2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local real J4I=GetUnitX(Y9I)
local real J5I=GetUnitY(Y9I)
local location FV2=GetSpellTargetLoc()
local real J6I=GetLocationX(FV2)
local real J7I=GetLocationY(FV2)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local group QY1=ZJI()
local unit T0I=CreateUnit(GetOwningPlayer(Y9I),1865429063,J4I,J5I,0)
local integer pid=GetPlayerId(GetOwningPlayer(Y9I))
call RemoveLocation(FV2)
if GetSpellTargetUnit()!=null then
set J6I=GetUnitX(GetSpellTargetUnit())
set J7I=GetUnitY(GetSpellTargetUnit())
endif
call SetUnitVertexColor(Y9I,255,255,255,0)
call SaveBoolean(ZY,(GetHandleId(Y9I)),(225),(true))
call SetUnitInvulnerable(Y9I,true)
call SetUnitPathing(Y9I,false)
call SetUnitPathing(T0I,false)
call SaveUnitHandle(ZY,(V0I),(221),(Y9I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveReal(ZY,(V0I),(23),((J4I)*1.0))
call SaveReal(ZY,(V0I),(24),((J5I)*1.0))
call SaveGroupHandle(ZY,(V0I),(133),(QY1))
call SaveReal(ZY,(V0I),(13),((Atan2(J7I-J5I,J6I-J4I))*1.0))
call SaveInteger(ZY,(V0I),(194),(YTI(R2I(SquareRoot((J6I-J4I)*(J6I-J4I)+(J7I-J5I)*(J7I-J5I))/50),1)))
call TriggerRegisterTimerEvent(t,0.04,true)
call TriggerAddCondition(t,Condition(function MQ2))
set t=null
endfunction
function AP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MS2))
call TriggerAddAction(t,function MU2)
endfunction
constant function ReplicateAbilityId takes nothing returns integer
return 1093683000
endfunction
constant function ReplicateMorphAbilityId takes nothing returns integer
return 1093683011
endfunction
constant function ReplicateMorphBuffId takes nothing returns integer
return 1110455088
endfunction
function N02 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))-1
local texttag tt
call SaveInteger(ZY,(V0I),(34),(ZLI))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set tt=CreateTextTag()
call SetTextTagText(tt,I2S(ZLI),0.03)
call SetTextTagPosUnit(tt,XSI,0)
call SetTextTagColorBJ(tt,0,29,255,15)
call SetTextTagVelocity(tt,0,0.035)
call SetTextTagFadepoint(tt,3)
call SetTextTagLifespan(tt,0.9)
call SetTextTagPermanent(tt,false)
call SetTextTagVisibility(tt,false)
if GetOwningPlayer(XSI)==GetLocalPlayer()then
call SetTextTagVisibility(tt,true)
endif
set tt=CreateTextTag()
call SetTextTagText(tt,I2S(ZLI),0.03)
call SetTextTagPosUnit(tt,XTI,0)
call SetTextTagColorBJ(tt,0,29,255,15)
call SetTextTagVelocity(tt,0,0.035)
call SetTextTagFadepoint(tt,3)
call SetTextTagLifespan(tt,0.9)
call SetTextTagPermanent(tt,false)
call SetTextTagVisibility(tt,false)
if GetOwningPlayer(XSI)==GetLocalPlayer()then
call SetTextTagVisibility(tt,true)
endif
endif
set t=null
set tt=null
set XSI=null
set XTI=null
return false
endfunction
function NI2 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit V8I=(LoadUnitHandle(ZY,(GetHandleId(t)),(14)))
local unit N12=(LoadUnitHandle(ZY,(GetHandleId(V8I)),(229)))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(N12),GetUnitY(N12)))
call RemoveUnit(N12)
call UnitRemoveAbility(V8I,(1093683011))
if(LoadInteger(ZY,(GetHandleId(V8I)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(V8I)),(704)))==(1093683000)then
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),(1093683000),true)
endif
call FlushChildHashtable(ZY,(GetHandleId(t)))
call ZSI((t))
set V8I=null
set N12=null
endfunction
function NO2 takes nothing returns boolean
if GetSpellAbilityId()==(1093683011)then
return true
endif
return false
endfunction
function N22 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer V0I=GetHandleId(V8I)
local unit N12=(LoadUnitHandle(ZY,(V0I),(229)))
local real x=GetUnitX(N12)
local real y=GetUnitY(N12)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(V8I),GetUnitY(V8I)))
call KillUnit(N12)
call SetUnitX(V8I,x)
call SetUnitY(V8I,y)
call PanCameraToTimedForPlayer(GetOwningPlayer(V8I),x,y,0)
call IssueImmediateOrder(V8I,"stop")
set V8I=null
set N12=null
endfunction
function N32 takes nothing returns boolean
return GetUnitAbilityLevel(GetSummonedUnit(),(1110455088))>0 and GetUnitState(GetSummonedUnit(),UNIT_STATE_LIFE)>0
endfunction
function N42 takes nothing returns nothing
local unit V8I=GetSummoningUnit()
local integer V0I=GetHandleId(V8I)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(228)))
local unit N12=GetSummonedUnit()
local trigger t
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),(1093683000),false)
call KKI(V8I,(1093683011))
call SetUnitColor(N12,GetPlayerColor(GetOwningPlayer(XTI)))
call SaveUnitHandle(ZY,(V0I),(229),(N12))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,N12,EVENT_UNIT_DEATH)
call TriggerAddAction(t,function NI2)
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(V8I))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,N12,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function N02))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(V8I))
call SaveUnitHandle(ZY,(GetHandleId(t)),(17),(N12))
call SaveInteger(ZY,(GetHandleId(t)),(34),(GetUnitAbilityLevel(V8I,(1093683000))*15+15-1))
set V8I=null
set XTI=null
set N12=null
set t=null
endfunction
function N52 takes nothing returns boolean
return GetSpellAbilityId()==(1093683000)
endfunction
function N62 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
call SaveUnitHandle(ZY,(GetHandleId(V8I)),(228),(XTI))
set V8I=null
set XTI=null
endfunction
function N72 takes nothing returns boolean
if GetSpellAbilityId()==(1093683000)then
if GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit())then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659014))
endif
endif
return false
endfunction
function B01 takes nothing returns nothing
local trigger t
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function N52))
call TriggerAddAction(t,function N62)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function N32))
call TriggerAddAction(t,function N42)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NO2))
call TriggerAddAction(t,function N22)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function N72))
set t=null
endfunction
function N82 takes unit V8I,integer N92,integer NA2 returns nothing
local integer NB2=GetHeroAgi(V8I,false)
local integer NC2=GetHeroStr(V8I,false)
local real UT1=GetUnitState(V8I,UNIT_STATE_MANA)
if N92==0 then
if UT1>=NA2 and NB2>2 and KMI(V8I)==false then
call SetUnitState(V8I,UNIT_STATE_MANA,UT1-NA2)
call SetHeroAgi(V8I,NB2-2,true)
call SetHeroStr(V8I,NC2+2,true)
endif
elseif N92==1 then
if UT1>=NA2 and NC2>2 and KMI(V8I)==false then
call SetUnitState(V8I,UNIT_STATE_MANA,UT1-NA2)
call SetHeroAgi(V8I,NB2+2,true)
call SetHeroStr(V8I,NC2-2,true)
endif
endif
endfunction
function ND2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=GetUnitAbilityLevel(V8I,1093684056)
call N82(V8I,1,20/WTI)
set t=null
set V8I=null
return false
endfunction
function NE2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=GetUnitAbilityLevel(V8I,1093684056)
call N82(V8I,0,20/WTI)
set t=null
set V8I=null
return false
endfunction
function NF2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local trigger NG2=(LoadTriggerHandle(ZY,(V0I),(226)))
local integer WTI=GetUnitAbilityLevel(V8I,1093684056)
local integer L=(LoadInteger(ZY,(V0I),(227)))
local real NH2=1.0/WTI
if GetIssuedOrderId()==852549 then
if NG2!=null then
call FlushChildHashtable(ZY,(GetHandleId(NG2)))
call ZSI(NG2)
endif
set NG2=CreateTrigger()
call TriggerRegisterTimerEvent(NG2,NH2,true)
call TriggerAddCondition(NG2,Condition(function ND2))
call SaveUnitHandle(ZY,(GetHandleId(NG2)),(14),(V8I))
call SaveTriggerHandle(ZY,(V0I),(226),(NG2))
call SaveInteger(ZY,(V0I),(227),(GetIssuedOrderId()))
call UnitAddAbility(V8I,1093808716)
call UnitRemoveAbility(V8I,1093808724)
elseif GetIssuedOrderId()==852546 then
if NG2!=null then
call FlushChildHashtable(ZY,(GetHandleId(NG2)))
call ZSI(NG2)
endif
set NG2=CreateTrigger()
call TriggerRegisterTimerEvent(NG2,NH2,true)
call TriggerAddCondition(NG2,Condition(function NE2))
call SaveUnitHandle(ZY,(GetHandleId(NG2)),(14),(V8I))
call SaveTriggerHandle(ZY,(V0I),(226),(NG2))
call SaveInteger(ZY,(V0I),(227),(GetIssuedOrderId()))
call UnitAddAbility(V8I,1093808724)
call UnitRemoveAbility(V8I,1093808716)
elseif GetIssuedOrderId()==852550 then
if NG2!=null then
call FlushChildHashtable(ZY,(GetHandleId(NG2)))
call ZSI(NG2)
endif
call SaveTriggerHandle(ZY,(V0I),(226),(null))
call SaveInteger(ZY,(V0I),(227),(GetIssuedOrderId()))
call UnitRemoveAbility(V8I,1093808716)
call UnitRemoveAbility(V8I,1093808724)
elseif GetIssuedOrderId()==852547 then
if NG2!=null then
call FlushChildHashtable(ZY,(GetHandleId(NG2)))
call ZSI(NG2)
endif
call SaveTriggerHandle(ZY,(V0I),(226),(null))
call SaveInteger(ZY,(V0I),(227),(GetIssuedOrderId()))
call UnitRemoveAbility(V8I,1093808716)
call UnitRemoveAbility(V8I,1093808724)
elseif GetIssuedOrderId()==852548 and L!=852546 and L!=852546 then
call N82(V8I,1,20/WTI)
elseif GetIssuedOrderId()==852545 and L!=852546 and L!=852546 then
call N82(V8I,0,20/WTI)
endif
set t=null
set V8I=null
set NG2=null
return false
endfunction
function NZ2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(GetTriggerUnit(),1093684056)
if WTI==1 then
call KKI(V8I,1093684055)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function NF2))
call SaveTriggerHandle(ZY,(V0I),(226),(null))
else
call SetUnitAbilityLevel(V8I,1093684055,WTI)
endif
set t=null
endfunction
function NV2 takes nothing returns boolean
if GetLearnedSkill()==1093684056 and IsUnitIllusion(GetTriggerUnit())==false then
call NZ2()
endif
return false
endfunction
function AQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function NV2))
set t=null
endfunction
function NW2 takes nothing returns nothing
local unit Y9I=(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(326)))
local real r
local real g
local real b
local integer NX2
local integer NY2
local real NJ2
local real NK2
if GetUnitTypeId(Y9I)!=1328558160 then
call DisableTrigger(GetTriggeringTrigger())
elseif KMI(Y9I)==false and(LoadBoolean(ZY,(GetHandleId(Y9I)),(225)))==false then
set NX2=GetHeroAgi(Y9I,true)
set NY2=GetHeroStr(Y9I,true)
set NJ2=RMaxBJ(75+2*(NX2-NY2),35)
set r=NJ2
set g=NJ2
set b=NJ2
call SetUnitVertexColorBJ(Y9I,r,g,b,GetRandomReal(0.00,10.00))
endif
endfunction
function NL2 takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==1328558160 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function NM2 takes nothing returns nothing
local trigger t
if((LoadBoolean(ZY,(GetHandleId(GetTriggerUnit())),(327)))==false)then
set t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(t)),(326),(GetTriggerUnit()))
call SaveTriggerHandle(ZY,(GetHandleId(GetTriggerUnit())),(328),(t))
call TriggerAddAction(t,function NW2)
call TriggerRegisterTimerEvent(t,1.0,true)
call SaveBoolean(ZY,(GetHandleId(GetTriggerUnit())),(327),(true))
call UnitAddItem(GetTriggerUnit(),CreateItem(1227894853,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
endfunction
function AR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function NL2))
call TriggerAddAction(t,function NM2)
endfunction
function NN2 takes nothing returns boolean
return GetSpellAbilityId()==1093682998 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and ZXI(GetSpellTargetUnit())==false
endfunction
function NS2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(Y9I,1093682998)
local unit T0I
local location NT2
local real B92
local integer NX2=GetHeroAgi(Y9I,true)
local integer NY2=GetHeroStr(Y9I,true)
local real NJ2=I2R(NX2)/I2R(NY2)
local real NK2=I2R(NY2)/I2R(NX2)
local real NR2
local real NP2
local real NQ2
local real VS2
local real NU2
local real S02
local integer i1
local integer i2
local integer i3
local string s1
local string s2
local string s3
if NJ2<0.5 then
set NR2=0.25
set NP2=20*WTI
elseif NJ2>1.5 then
set NR2=0.5*WTI
set NP2=20*WTI
else
set NR2=0.25+(NJ2-0.5)*(0.5*WTI-0.25)
set NP2=20*WTI
endif
if NK2<0.5 then
set NQ2=0.25
set VS2=100
elseif NK2>1.5 then
set NQ2=0.75*WTI
set VS2=300
else
set VS2=100+(NK2-0.5)*200
set NQ2=0.25+(NK2-0.5)*(0.75*WTI-0.25)
endif
set NU2=NP2+NR2*NX2
set S02=NQ2
set i1=R2I(S02)
set i2=R2I(10*S02-i1*10)
set i3=R2I(100*S02-i2*10-i1*100)
set s1=I2S(i1)
set s2=I2S(i2)
set s3=I2S(i3)
set B92=Atan2(GetUnitY(XTI)-GetUnitY(Y9I),GetUnitX(XTI)-GetUnitX(Y9I))
set NT2=Location(GetUnitX(XTI)+VS2*Cos(B92),GetUnitY(XTI)+VS2*Sin(B92))
call SetUnitPositionLoc(XTI,NT2)
call KCI(GetLocationX(NT2),GetLocationY(NT2),200)
call RemoveLocation(NT2)
call K3I("|c001ce6b9+"+I2S(R2I(NU2))+"|r |c00ff0303+"+s1+"."+s2+s3+"|r",1,XTI,0.023,255,255,255,216)
call XNI(Y9I,XTI,1,NU2)
call SUI(Y9I,XTI,S02)
set Y9I=null
set XTI=null
set T0I=null
set NT2=null
endfunction
function AU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NN2))
call TriggerAddAction(t,function NS2)
call YVI(1093687350)
endfunction
function SI2 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),ISI)==false then
call GroupAddUnit(ITI,GetEnumUnit())
call UnitRemoveAbility(GetEnumUnit(),1110454858)
call UnitRemoveAbility(GetEnumUnit(),1112896368)
call UnitRemoveAbility(GetEnumUnit(),1114993524)
endif
endfunction
function S12 takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1110454858)
call UnitRemoveAbility(GetEnumUnit(),1112896368)
call UnitRemoveAbility(GetEnumUnit(),1114993524)
endfunction
function SO2 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),INI)==false then
call GroupAddUnit(INI,GetEnumUnit())
call SetUnitOwner(IMI,GetOwningPlayer(GetEnumUnit()),false)
call IssueTargetOrder(IMI,"sleep",GetEnumUnit())
endif
endfunction
function S22 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local group g
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>140 or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093809221)then
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093678933 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093678933,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809221,false)
call ForGroup(BA2,function S12)
call ZYI(BA2)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set OK=XSI
set ILI=XSI
set IMI=T0I
set INI=BA2
call GroupEnumUnitsInRange(g,x,y,775,Condition(function NQI))
call ForGroup(g,function SO2)
set ISI=g
set ITI=ZJI()
call ForGroup(BA2,function SI2)
call GroupRemoveGroup(ITI,BA2)
call ZYI(g)
call ZYI(ITI)
endif
set t=null
set g=null
set XSI=null
set BA2=null
set T0I=null
return false
endfunction
function S32 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call KKI(XSI,1093809221)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093678933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809221,true)
call UnitAddAbility(T0I,1093678932)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S22))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\SongOfTheSiren_2.mdx",XSI,"origin")))
set t=null
set XSI=null
endfunction
function S42 takes nothing returns boolean
if GetSpellAbilityId()==1093678933 then
call S32()
endif
return false
endfunction
function BI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S42))
set t=null
endfunction
function S52 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=OK
local unit XTI=AK
local integer WTI=GetUnitAbilityLevel(XSI,1093808985)
local integer id=1093809204
call XNI(XSI,XTI,1,100+30*WTI)
if WTI==2 then
set id=1093809205
elseif WTI==3 then
set id=1093809206
elseif WTI==4 then
set id=1093809207
endif
if NKI(XTI)==false then
call MSI(XTI,id,1,8)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),id,false)
set XSI=null
set XTI=null
endfunction
function S62 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
local trigger t=LII(XSI,XTI,1747993653,"S52",1400)
local integer V0I=GetHandleId(t)
set XSI=null
set XTI=null
set t=null
endfunction
function S72 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=GetSpellTargetX()
local real J7I=GetSpellTargetY()
local real a=JPI(J4I,J5I,J6I,J7I)*bj_DEGTORAD
local real x
local real y
local real d
local group g1=ZJI()
local group g2=ZJI()
local integer i=0
loop
exitwhen i>7
set x=J4I+(300+i*50)*Cos(a)
set y=J5I+(300+i*50)*Sin(a)
set OK=XSI
call GroupEnumUnitsInRange(g2,x,y,375,Condition(function SOI))
call GroupAddGroup(g2,g1)
set i=i+1
endloop
call ForGroup(g1,function S62)
call ZYI(g1)
call ZYI(g2)
set t=null
set XSI=null
set g1=null
set g2=null
endfunction
function S82 takes nothing returns boolean
if GetSpellAbilityId()==1093808985 then
call S72()
endif
return false
endfunction
function B11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S82))
set t=null
endfunction
function S92 takes unit XSI,unit XTI,integer WTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call UnitAddAbility(T0I,1093681729)
call SetUnitAbilityLevel(T0I,1093681729,WTI)
call IssueTargetOrder(T0I,"ensnare",XTI)
set T0I=null
endfunction
function SA2 takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())==1212363833 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call S92(GetFilterUnit(),IPI,GetUnitAbilityLevel(GetTriggerUnit(),1093809220))
endif
return false
endfunction
function SB2 takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())==1212363833 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call SetUnitFacing(GetFilterUnit(),TJ)
call SetUnitAnimation(GetFilterUnit(),"spell")
endif
return false
endfunction
function SC2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local group g=ZJI()
set TJ=JPI(GetUnitX(V8I),GetUnitY(V8I),GetUnitX(IPI),GetUnitY(IPI))
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),700,Condition(function SB2))
call ZYI(g)
set V8I=null
set g=null
endfunction
function SD2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=IPI
local group g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),700,Condition(function SA2))
call ZYI(g)
set V8I=null
set g=null
endfunction
function SE2 takes nothing returns boolean
if GetSpellAbilityId()==1093809220 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if ZXI(GetSpellTargetUnit())==false then
set IRI=0
set IPI=GetSpellTargetUnit()
call S92(GetTriggerUnit(),IPI,GetUnitAbilityLevel(GetTriggerUnit(),1093809220))
call SD2()
endif
else
call SC2()
endif
endif
return false
endfunction
function BO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function SE2))
set t=null
endfunction
function SF2 takes unit VCI returns integer
local real r=GetRandomReal(0,100)
local integer WTI=GetUnitAbilityLevel(VCI,1093679160)
local boolean HZ2=REI(VCI,F20[Y20])!=null
local integer SG2=0
local integer id=GetPlayerId(GetOwningPlayer(VCI))
if WTI==1 then
set O1I[id]=O1I[id]+1
if HZ2 then
if r<30 then
set IUI[id]=IUI[id]+1
set SG2=3
elseif r<60 then
set IQI[id]=IQI[id]+1
set SG2=2
endif
else
if r<25 then
set SG2=2
set IQI[id]=IQI[id]+1
endif
endif
elseif WTI==2 then
set O1I[id]=O1I[id]+1
if HZ2 then
if r<17.5 then
set SG2=4
set O0I[id]=O0I[id]+1
elseif r<35 then
set SG2=3
set IUI[id]=IUI[id]+1
elseif r<70 then
set SG2=2
set IQI[id]=IQI[id]+1
endif
else
if r<20 then
set SG2=3
set IUI[id]=IUI[id]+1
elseif r<40 then
set SG2=2
set IQI[id]=IQI[id]+1
endif
endif
elseif WTI==3 then
set O1I[id]=O1I[id]+1
if HZ2 then
if r<10 then
set SG2=5
set OII[id]=OII[id]+1
elseif r<20 then
set SG2=4
set O0I[id]=O0I[id]+1
elseif r<40 then
set SG2=3
set IUI[id]=IUI[id]+1
elseif r<80 then
set SG2=2
set IQI[id]=IQI[id]+1
endif
else
if r<12.5 then
set SG2=4
set O0I[id]=O0I[id]+1
elseif r<25 then
set SG2=3
set IUI[id]=IUI[id]+1
elseif r<50 then
set SG2=2
set IQI[id]=IQI[id]+1
endif
endif
endif
return SG2
endfunction
function SH2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer SZ2=(LoadInteger(ZY,(V0I),(300)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer SV2=(LoadInteger(ZY,(V0I),(299)))
local unit T0I
if GetTriggerEvalCount(t)>SZ2 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,SV2)
call SetUnitAbilityLevel(T0I,SV2,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
endif
set t=null
set XTI=null
set XSI=null
set T0I=null
return false
endfunction
function SW2 takes integer r returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer SV2=GetSpellAbilityId()
local integer WTI=GetUnitAbilityLevel(XSI,SV2)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
if r==2 then
call K3I(GetObjectName(1848658743),5,GetTriggerUnit(),0.03,255,0,0,255)
elseif r==3 then
call K3I(GetObjectName(1848658516),5,GetTriggerUnit(),0.03,255,0,0,255)
elseif r==4 then
call K3I(GetObjectName(1848658744),5,GetTriggerUnit(),0.03,255,0,0,255)
elseif r==5 then
call K3I(GetObjectName(1848658511),5,GetTriggerUnit(),0.03,255,0,0,255)
endif
set r=r-1
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(300),(r))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(299),(SV2))
call TriggerRegisterTimerEvent(t,0.3,true)
call TriggerAddCondition(t,Condition(function SH2))
set t=null
set XTI=null
set XSI=null
endfunction
function SX2 takes nothing returns boolean
local integer r
if GetUnitAbilityLevel(GetTriggerUnit(),1093679160)>0 and ZXI(GetSpellTargetUnit())==false and(GetSpellAbilityId()==1093678167 or GetSpellAbilityId()==1093679172 or GetSpellAbilityId()==1093679169 or GetSpellAbilityId()==1093679161)then
set r=SF2(GetTriggerUnit())
if r>1 then
call SW2(r)
endif
endif
return false
endfunction
function SY2 takes nothing returns boolean
local integer id=GetPlayerId(GetTriggerPlayer())
local string s1
local string s2
local string s3
local string s4
local string s5
local string s6
if O1I[id]>0 then
set s1=GetObjectName(1848658504)+" "+I2S(O1I[id])
set s2=GetObjectName(1848658509)+" "+I2S(IQI[id]+IUI[id]+O0I[id]+OII[id])+" ("+I2S((IQI[id]+IUI[id]+O0I[id]+OII[id])*100/O1I[id])+"%)"
set s3=GetObjectName(1848658508)+" "+I2S(IQI[id])+" ("+I2S(100*IQI[id]/O1I[id])+"%)"
set s4=GetObjectName(1848658507)+" "+I2S(IUI[id])+" ("+I2S(100*IUI[id]/O1I[id])+"%)"
set s5=GetObjectName(1848658506)+" "+I2S(O0I[id])+" ("+I2S(100*O0I[id]/O1I[id])+"%)"
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,s1)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,s2)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,s3)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,s4)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,s5)
endif
return false
endfunction
function B21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SX2))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-st",true)
call TriggerAddCondition(t,Condition(function SY2))
set t=null
endfunction
function SJ2 takes nothing returns boolean
local unit MR2=GetFilterUnit()
local unit Y9I=GetTriggerUnit()
if IsUnitAlly(MR2,GetOwningPlayer(Y9I))and GetUnitState(MR2,UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(MR2,1113746543)==0 then
if(GetOwningPlayer(MR2)==CO[0]or GetOwningPlayer(MR2)==DO[0])then
if(GetUnitTypeId(MR2)==1969711215 or GetUnitTypeId(MR2)==1966092337 or GetUnitTypeId(MR2)==1970169187 or GetUnitTypeId(MR2)==1966092338)then
return true
endif
if(GetUnitTypeId(MR2)==1702061422 or GetUnitTypeId(MR2)==1697656918 or GetUnitTypeId(MR2)==1701081721 or GetUnitTypeId(MR2)==1697656919)then
return true
endif
return false
elseif IsUnitType(MR2,UNIT_TYPE_HERO)==true then
return true
endif
endif
return false
endfunction
function SK2 takes integer r returns nothing
local unit Y9I=GetTriggerUnit()
local integer WTI=r
local group U4I=ZJI()
local unit T0I
local unit OB1
local integer WWI=GetSpellAbilityId()
local integer W5I=1
if r==2 then
call K3I(GetObjectName(1848658743),5,GetTriggerUnit(),0.03,255,0,0,255)
elseif r==3 then
call K3I(GetObjectName(1848658516),5,GetTriggerUnit(),0.03,255,0,0,255)
elseif r==4 then
call K3I(GetObjectName(1848658744),5,GetTriggerUnit(),0.03,255,0,0,255)
elseif r==5 then
call K3I(GetObjectName(1848658511),5,GetTriggerUnit(),0.03,255,0,0,255)
endif
set r=r-1
call GroupEnumUnitsInRange(U4I,GetUnitX(Y9I),GetUnitY(Y9I),600,Condition(function SJ2))
if Y9I!=GetSpellTargetUnit()then
call GroupAddUnit(U4I,Y9I)
endif
loop
exitwhen W5I>WTI
set W5I=W5I+1
set T0I=CreateUnit(GetOwningPlayer(Y9I),1697656899,GetUnitX(Y9I),GetUnitY(Y9I),270)
call KKI(T0I,WWI)
call SetUnitAbilityLevel(T0I,WWI,GetUnitAbilityLevel(Y9I,WWI))
call UnitApplyTimedLife(T0I,1112820806,1.0)
set OB1=GroupPickRandomUnit(U4I)
call IssueTargetOrder(T0I,"bloodlust",OB1)
call SetUnitPathing(T0I,false)
call SetUnitInvulnerable(T0I,true)
call KKI(T0I,1097625443)
call GroupRemoveUnit(U4I,OB1)
endloop
call ZYI(U4I)
endfunction
function SL2 takes nothing returns boolean
local integer r
if GetUnitAbilityLevel(GetTriggerUnit(),1093679160)>0 and(GetSpellAbilityId()==1093679155 or GetSpellAbilityId()==1093679177 or GetSpellAbilityId()==1093679175 or GetSpellAbilityId()==1093679174)then
set r=SF2(GetTriggerUnit())
if r>1 then
call SK2(r)
endif
endif
return false
endfunction
function B31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SL2))
set t=null
endfunction
constant function Purification_RawCode takes nothing returns integer
return 1093679182
endfunction
function SM2 takes nothing returns boolean
return GetSpellAbilityId()==(1093679182)
endfunction
function SN2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function SS2 takes nothing returns nothing
call XNI(GetTriggerUnit(),GetEnumUnit(),3,KO)
endfunction
function ST2 takes nothing returns nothing
local boolexpr VE1=Condition(function SN2)
local group U4I=ZJI()
local real x=GetUnitX(GetSpellTargetUnit())
local real y=GetUnitY(GetSpellTargetUnit())
set KO=90*GetUnitAbilityLevel(GetTriggerUnit(),(1093679182))
if GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)>1 then
call SetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)+KO)
endif
call GroupEnumUnitsInRange(U4I,x,y,250,VE1)
call ForGroup(U4I,function SS2)
call ZYI(U4I)
endfunction
function B41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SM2))
call TriggerAddAction(t,function ST2)
endfunction
function SR2 takes nothing returns boolean
local unit SP2=GetSummonedUnit()
local unit T0I
local unit XTI
if GetUnitAbilityLevel(SP2,1110456632)>0 then
set T0I=GetSummoningUnit()
set XTI=(LoadUnitHandle(ZY,(GetHandleId(T0I)),(303)))
call SetUnitX(SP2,GetUnitX(XTI))
call SetUnitY(SP2,GetUnitY(XTI))
call IssueTargetOrder(SP2,"attack",XTI)
endif
set SP2=null
set T0I=null
set XTI=null
return false
endfunction
function SQ2 takes player p,unit XTI,integer WTI returns nothing
local unit T0I=CreateUnit(p,1697656901,GetUnitX(XTI),GetUnitX(XTI),0)
local integer KLI
call SaveUnitHandle(ZY,(GetHandleId(T0I)),(303),(XTI))
if WTI==1 then
set KLI=1093742664
elseif WTI==2 then
set KLI=1093742663
elseif WTI==3 then
set KLI=1093742665
else
set KLI=1093742662
endif
call KKI(T0I,KLI)
call IssueTargetOrderById(T0I,852274,L1[GetPlayerId(p)])
set T0I=null
endfunction
function SU2 takes player p,unit XTI,integer WTI,boolean T02,boolean TI2 returns nothing
local real XPI=50+50*WTI
local unit T0I
local integer KLI
if TI2 then
set T0I=CreateUnit(p,1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093742659)
call SetUnitAbilityLevel(T0I,1093742659,WTI)
call IssueTargetOrder(T0I,"cripple",XTI)
call XNI(T0I,XTI,1,XPI)
if T02 then
call SQ2(p,XTI,WTI)
endif
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",XTI,"origin"))
set T0I=null
endfunction
function T12 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local boolean T2I=(LoadBoolean(ZY,(V0I),(302)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real x=GetUnitX(KRI)
local real y=GetUnitY(KRI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real KPI=1000*0.035
local real KQI=JPI(x,y,J6I,J7I)
local real KUI=x+KPI*Cos(KQI*bj_DEGTORAD)
local real L0I=y+KPI*Sin(KQI*bj_DEGTORAD)
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
call SetUnitFacing(KRI,KQI)
if KAI(J6I,J7I,KUI,L0I)<=KPI then
call SU2(p,XTI,WTI,true,T2I)
call KillUnit(KRI)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set KRI=null
return false
endfunction
function TO2 takes unit XSI,integer WTI,unit XTI,boolean T2I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747990092,GetUnitX(XSI),GetUnitY(XSI),JPI(GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI)))
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(XSI)))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveBoolean(ZY,(V0I),(302),(T2I))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TriggerRegisterTimerEvent(t,0.035,true)
call TriggerAddCondition(t,Condition(function T12))
set t=null
endfunction
function T22 takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())==1332179560 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call TO2(GetFilterUnit(),GetUnitAbilityLevel(GetTriggerUnit(),1093742660),GetSpellTargetUnit(),false)
endif
return false
endfunction
function T32 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093742660)
local unit XTI=GetSpellTargetUnit()
local group g=ZJI()
local boolean T42=ZXI(GetSpellTargetUnit())
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),700,Condition(function T22))
if T42 then
call TO2(V8I,WTI,XTI,false)
else
call TO2(V8I,WTI,XTI,true)
endif
call ZYI(g)
set V8I=null
set XTI=null
set g=null
endfunction
function T52 takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())==1332179560 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call SetUnitFacing(GetFilterUnit(),TJ)
call SetUnitAnimation(GetFilterUnit(),"spell")
endif
return false
endfunction
function T62 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local group g=ZJI()
set TJ=JPI(GetUnitX(V8I),GetUnitY(V8I),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),700,Condition(function T52))
call ZYI(g)
set V8I=null
set g=null
endfunction
function T72 takes nothing returns boolean
if GetSpellAbilityId()==1093742660 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call T32()
else
call T62()
endif
endif
return false
endfunction
function B71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T72))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function T72))
call YVI(1093742659)
call YVI(1093742664)
call YVI(1093742663)
call YVI(1093742665)
call YVI(1093742662)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function SR2))
set t=null
endfunction
function T82 takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(),1110455106)>0 then
set MJ=MJ+1
endif
return false
endfunction
function T92 takes nothing returns nothing
local unit TA2=GetAttacker()
local group g=ZJI()
local integer WCI=GetRandomInt(1,100)
local integer TB2=GetUnitAbilityLevel(TA2,1093682242)
local integer TC2=GetUnitAbilityLevel(TA2,1093687627)
local unit T0I
local integer TD2=2+TB2
local integer TE2=12
set MJ=0
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(TA2),Condition(function T82))
call ZYI(g)
if MJ<TD2 then
if IsUnitIllusion(TA2)==false and WCI<=(TE2+2*TC2)then
set T0I=CreateUnit(GetOwningPlayer(TA2),1697656901,GetUnitX(TA2),GetUnitY(TA2),0)
call KKI(T0I,1093682244)
call IssueTargetOrderById(T0I,852274,TA2)
endif
if IsUnitIllusion(TA2)==true and WCI<=(1+2*TC2)and TC2>0 then
set T0I=CreateUnit(GetOwningPlayer(TA2),1697656901,GetUnitX(TA2),GetUnitY(TA2),0)
call KKI(T0I,1093682244)
call IssueTargetOrderById(T0I,852274,TA2)
endif
endif
set TA2=null
set g=null
set T0I=null
endfunction
function TF2 takes nothing returns boolean
if(GetUnitAbilityLevel(GetAttacker(),1110455106)>0 or GetUnitAbilityLevel(GetAttacker(),1110455105)>0)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==true then
call T92()
endif
return false
endfunction
function B61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function TF2))
set t=null
endfunction
function TG2 takes nothing returns nothing
local unit u=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(u),1697656901,GetUnitX(u),GetUnitY(u),0)
call KKI(T0I,1093682243)
call IssueTargetOrderById(T0I,852274,u)
set u=null
set T0I=null
endfunction
function TH2 takes nothing returns boolean
if GetSpellAbilityId()==1093682231 then
call TG2()
endif
return false
endfunction
function B81 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TH2))
set t=null
endfunction
function TZ2 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==D00[21]and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())and IsUnitIllusion(GetFilterUnit())==false then
set OK=GetFilterUnit()
endif
return false
endfunction
function TV2 takes nothing returns nothing
local unit SP2=GetTriggerUnit()
local unit XSI
local group g=ZJI()
local real x
local real y
set OK=null
call GroupEnumUnitsInRange(g,GetUnitX(SP2),GetUnitY(SP2),1000,Condition(function TZ2))
call ZYI(g)
set XSI=OK
if XSI!=null then
set x=GetUnitX(XSI)
set y=GetUnitY(XSI)
call SetUnitPosition(SP2,x,y)
endif
set x=GetUnitX(SP2)+600*Cos(GetUnitFacing(SP2)*bj_DEGTORAD)
set y=GetUnitY(SP2)+600*Sin(GetUnitFacing(SP2)*bj_DEGTORAD)
call IssuePointOrder(SP2,"move",x,y)
set SP2=null
set XSI=null
set g=null
endfunction
function TW2 takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),1110455105)>0 then
call TV2()
endif
return false
endfunction
function B51 takes nothing returns nothing
local trigger t=CreateTrigger()
local region r=CreateRegion()
call RegionAddRect(r,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,r,Condition(function HRI))
call TriggerAddCondition(t,Condition(function TW2))
set t=null
set r=null
endfunction
function TX2 takes nothing returns boolean
return GetSpellAbilityId()==1093678938
endfunction
function TY2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0
endfunction
function TJ2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(Y9I),1697657394,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),270)
call KKI(T0I,1093678676)
call SetUnitAbilityLevel(T0I,1093678676,GetUnitAbilityLevel(Y9I,1093678938))
call IssueTargetOrder(T0I,"entanglingroots",GetEnumUnit())
endfunction
function TK2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local group U4I=ZJI()
local boolexpr VE1=Condition(function TY2)
call GroupEnumUnitsInRange(U4I,GetUnitX(Y9I),GetUnitY(Y9I),650,VE1)
call ForGroup(U4I,function TJ2)
call ZYI(U4I)
endfunction
function B91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TX2))
call TriggerAddAction(t,function TK2)
endfunction
function TL2 takes unit XSI,integer WTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call KKI(T0I,1093748546)
call SetUnitAbilityLevel(T0I,1093748546,WTI)
call IssueTargetOrder(T0I,"invisibility",XSI)
call KKI(XSI,1093808975)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808975,false)
set T0I=null
endfunction
function TM2 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1747993172
endfunction
function TN2 takes unit V8I returns boolean
local group g=ZJI()
local boolean RRI=false
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),375,Condition(function TM2))
if FirstOfGroup(g)!=null then
set RRI=true
endif
call ZYI(g)
set g=null
return RRI
endfunction
function TS2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit V8I=ZGI(XUI)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real SV1=(LoadReal(ZY,(V0I),(442)))
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and(LoadBoolean(ZY,(V0I),(329)))and GetAttacker()==V8I then
call UnitRemoveAbility(V8I,1110454833)
call UnitRemoveAbility(V8I,1093748545)
call UnitRemoveAbility(V8I,1093808975)
call UnitRemoveAbility(V8I,1110459705)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED and GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093677402 and GetTriggerUnit()==V8I then
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M))+1.0)*1.0))
call DisableTrigger(GetTriggeringTrigger())
call TL2(V8I,WTI)
call EnableTrigger(GetTriggeringTrigger())
call SaveInteger(ZY,(V0I),(34),(0))
endif
if KWI(GetUnitX(V8I),GetUnitY(V8I),375)==false and TN2(V8I)==false then
if SV1<(TimerGetElapsed(M))or GetTriggerEvalCount(t)==1 then
call UnitRemoveAbility(V8I,1110454833)
call UnitRemoveAbility(V8I,1093748545)
call UnitRemoveAbility(V8I,1093808975)
call UnitRemoveAbility(V8I,1110459705)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
elseif(LoadBoolean(ZY,(V0I),(329)))and ZLI>(150*WTI)then
call UnitRemoveAbility(V8I,1110454833)
call UnitRemoveAbility(V8I,1093748545)
call UnitRemoveAbility(V8I,1093808975)
call UnitRemoveAbility(V8I,1110459705)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif(LoadBoolean(ZY,(V0I),(329)))and GetUnitAbilityLevel(V8I,1110454833)==0 and GetUnitAbilityLevel(V8I,1093748545)>0 then
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M))+1.0)*1.0))
call DisableTrigger(GetTriggeringTrigger())
call TL2(V8I,WTI)
call EnableTrigger(GetTriggeringTrigger())
elseif GetUnitAbilityLevel(V8I,1110454833)==0 then
call UnitRemoveAbility(V8I,1110454833)
call UnitRemoveAbility(V8I,1093748545)
call UnitRemoveAbility(V8I,1093808975)
call UnitRemoveAbility(V8I,1110459705)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M))+1.0)*1.0))
endif
endif
set t=null
set V8I=null
return false
endfunction
function TT2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
if GetUnitAbilityLevel(XSI,1110454833)>0 then
call KKI(XSI,1093748545)
endif
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function TR2 takes nothing returns nothing
local trigger t
local integer V0I
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveInteger(ZY,(V0I),(30),(ZZI(GetSpellTargetUnit())))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(GetTriggerUnit(),1093677402)))
call SaveInteger(ZY,(V0I),(34),(0))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M))+1.0)*1.0))
call TriggerAddCondition(t,Condition(function TS2))
call TriggerRegisterTimerEvent(t,0.1,true)
call KKI(GetSpellTargetUnit(),1093808975)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetSpellTargetUnit()),1093808975,false)
if GetTriggerUnit()==GetSpellTargetUnit()then
call SaveBoolean(ZY,(V0I),(329),(true))
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call TriggerAddCondition(t,Condition(function TT2))
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterDeathEvent(t,GetTriggerUnit())
endif
set t=null
endfunction
function TP2 takes nothing returns boolean
if GetSpellAbilityId()==1093677402 then
call TR2()
endif
return false
endfunction
function BA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TP2))
set t=null
endfunction
function TQ2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call SetUnitAnimationByIndex(XSI,6)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function TU2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093748535)
local location l=GetSpellTargetLoc()
local real x=YEI(GetLocationX(l))
local real y=YHI(GetLocationY(l))
local destructable d
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
local rect r1=Rect(-7840.0,2976.0,8032.0,7680.0)
local rect r2=Rect(-832.0,-832.0,8192.0,3040.0)
local rect r3=Rect(3232.0,-3136.0,8096.0,-480.0)
local rect r4=Rect(352.0,-1760.0,3296.0,512.0)
local rect r5=Rect(-2624.0,1376.0,-1120.0,2688.0)
local rect r6=Rect(-5024.0,2336.0,-2496.0,3488.0)
local region r=CreateRegion()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call RegionAddRect(r,r1)
call RegionAddRect(r,r2)
call RegionAddRect(r,r3)
call RegionAddRect(r,r4)
call RegionAddRect(r,r5)
call RegionAddRect(r,r6)
if IsPointInRegion(r,x,y)==true then
set d=CreateDestructable(1110454323,x,y,0,1,1)
else
set d=CreateDestructable(1110454322,x,y,0,1,1)
call KillDestructable(d)
call DestructableRestoreLife(d,GetDestructableMaxLife(d),true)
endif
call KKI(T0I,1093677398)
call SetUnitAbilityLevel(T0I,1093677398,WTI)
call IssueTargetOrder(T0I,"sentinel",d)
call SetUnitAnimationByIndex(XSI,6)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl",x,y))
call RemoveRegion(r)
call RemoveRect(r1)
call RemoveRect(r2)
call RemoveRect(r3)
call RemoveRect(r4)
call RemoveRect(r5)
call RemoveRect(r6)
call RemoveLocation(l)
call TriggerRegisterTimerEvent(t,0.1,false)
call TriggerAddCondition(t,Condition(function TQ2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
set l=null
set d=null
set T0I=null
set r=null
set r1=null
set r2=null
set r3=null
set r4=null
set r5=null
set r6=null
endfunction
function R02 takes nothing returns boolean
if GetSpellAbilityId()==1093748535 then
call TU2()
endif
return false
endfunction
function Register_EyesInTheForest takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R02))
set t=null
endfunction
function RI2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real R12=(LoadReal(ZY,(GetHandleId(XTI)),(686)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or R12<(TimerGetElapsed(M))or XDI(XTI)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SaveReal(ZY,(GetHandleId(XTI)),(686),((0)*1.0))
call UnitRemoveAbility(XTI,1093809232)
call UnitRemoveAbility(XTI,1093809232)
call UnitRemoveAbility(XTI,1093809232)
call UnitRemoveAbility(XTI,1093809232)
call UnitRemoveAbility(XTI,1110459719)
else
call XNI(XSI,XTI,1,15+15*WTI)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function RO2 takes unit XSI,unit XTI returns nothing
local trigger t
local integer V0I
local real R12=(LoadReal(ZY,(GetHandleId(XTI)),(686)))
local integer WTI=GetUnitAbilityLevel(XSI,1093748535)
if R12>(TimerGetElapsed(M))then
call SaveReal(ZY,(GetHandleId(XTI)),(686),(((TimerGetElapsed(M))+4)*1.0))
else
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveReal(ZY,(GetHandleId(XTI)),(686),(((TimerGetElapsed(M))+4)*1.0))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerAddCondition(t,Condition(function RI2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl",XTI,"overhead")))
if WTI==1 then
call KKI(XTI,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809232,false)
elseif WTI==2 then
call KKI(XTI,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809232,false)
elseif WTI==3 then
call KKI(XTI,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809232,false)
elseif WTI==4 then
call KKI(XTI,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809232,false)
endif
endif
set t=null
endfunction
function Sentinel_FindClosest takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(O2I)and(GetUnitTypeId(GetFilterUnit())==1747993172 or GetUnitTypeId(GetFilterUnit())==1747993173)then
if JAI(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),O3I,O4I)<O5I then
set OOI=GetFilterUnit()
set O5I=JAI(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),O3I,O4I)
endif
endif
return false
endfunction
function R22 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI
local group g
local real Q1I=(LoadReal(ZY,(V0I),(442)))
local real x
local real y
local integer WJI
local real hp
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_DEATH then
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
if GetTriggerUnit()==T0I then
call UnitRemoveAbility(T0I,1097886070)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
elseif GetUnitTypeId(T0I)==1747993172 then
set OK=T0I
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(T0I),GetUnitY(T0I),110,Condition(function SOI))
set XTI=N8I(g,GetUnitX(T0I),GetUnitY(T0I))
call ZYI(g)
if XTI!=null then
call RO2(XSI,XTI)
set x=GetUnitX(T0I)
set y=GetUnitY(T0I)
set hp=GetUnitState(T0I,UNIT_STATE_LIFE)
call ShowUnit(T0I,false)
call DisableTrigger(t)
call KillUnit(T0I)
call EnableTrigger(t)
set T0I=CreateUnit(GetOwningPlayer(XSI),1747993173,x,y,0)
call SetUnitState(T0I,UNIT_STATE_LIFE,hp)
call UnitApplyTimedLife(T0I,1112820806,480-((TimerGetElapsed(M))-Q1I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveReal(ZY,(V0I),(411),(((TimerGetElapsed(M))+4)*1.0))
endif
elseif GetUnitTypeId(T0I)==1747993173 and(LoadReal(ZY,(V0I),(411)))<(TimerGetElapsed(M))then
set x=GetUnitX(T0I)
set y=GetUnitY(T0I)
set hp=GetUnitState(T0I,UNIT_STATE_LIFE)
call ShowUnit(T0I,false)
call DisableTrigger(t)
call KillUnit(T0I)
call EnableTrigger(t)
set T0I=CreateUnit(GetOwningPlayer(XSI),1747993172,x,y,0)
call SetUnitState(T0I,UNIT_STATE_LIFE,hp)
call UnitApplyTimedLife(T0I,1112820806,480-((TimerGetElapsed(M))-Q1I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
set g=null
return false
endfunction
function R32 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093748535)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1747993172,x,y,0)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call UnitApplyTimedLife(T0I,1112820806,480)
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function R22))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M)))*1.0))
call SaveInteger(ZY,(V0I),(34),(0))
set t=null
set XSI=null
set T0I=null
endfunction
function R42 takes nothing returns boolean
if GetSpellAbilityId()==1093748535 then
call R32()
endif
return false
endfunction
function BC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R42))
set t=null
endfunction
function R52 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI
local player p
if XSI==null or KMI(XSI)then
call UnitRemoveAbility(T0I,1093809230)
call UnitRemoveAbility(T0I,1093809229)
call UnitRemoveAbility(T0I,1093809460)
call UnitRemoveAbility(T0I,1093809459)
call UnitRemoveAbility(T0I,1093810009)
call UnitRemoveAbility(T0I,1093810224)
call UnitRemoveAbility(T0I,1093810010)
call UnitRemoveAbility(T0I,1093810225)
else
if(VLI(GetOwningPlayer(XSI))==true and VLI(GetOwningPlayer(T0I))==false)or(VLI(GetOwningPlayer(XSI))==false and VLI(GetOwningPlayer(T0I))==true)then
if VLI(GetOwningPlayer(XSI))then
set p=CO[0]
else
set p=DO[0]
endif
call SetUnitOwner(T0I,p,false)
endif
set WTI=GetUnitAbilityLevel(XSI,1093809231)
if YAI()then
call UnitRemoveAbility(T0I,1093809230)
call UnitRemoveAbility(T0I,1093809229)
call UnitRemoveAbility(T0I,1093809460)
call UnitRemoveAbility(T0I,1093809459)
call UnitAddAbility(T0I,1093810224)
call UnitAddAbility(T0I,1093810009)
call UnitAddAbility(T0I,1093810225)
call UnitAddAbility(T0I,1093810010)
call SetUnitAbilityLevel(T0I,1093810224,WTI)
call SetUnitAbilityLevel(T0I,1093810009,WTI)
call SetUnitAbilityLevel(T0I,1093810225,WTI)
call SetUnitAbilityLevel(T0I,1093810010,WTI)
else
call UnitRemoveAbility(T0I,1093810009)
call UnitRemoveAbility(T0I,1093810224)
call UnitRemoveAbility(T0I,1093810010)
call UnitRemoveAbility(T0I,1093810225)
call UnitAddAbility(T0I,1093809229)
call UnitAddAbility(T0I,1093809230)
call UnitAddAbility(T0I,1093809459)
call UnitAddAbility(T0I,1093809460)
call SetUnitAbilityLevel(T0I,1093809229,WTI)
call SetUnitAbilityLevel(T0I,1093809230,WTI)
call SetUnitAbilityLevel(T0I,1093809459,WTI)
call SetUnitAbilityLevel(T0I,1093809460,WTI)
endif
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
endif
set t=null
set XSI=null
set T0I=null
return false
endfunction
function R62 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local player p
local unit T0I
if VLI(GetOwningPlayer(XSI))then
set p=CO[0]
else
set p=DO[0]
endif
set T0I=CreateUnit(p,1697657174,0,0,0)
call KKI(XSI,1093810483)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function R52))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
set T0I=null
endfunction
function R72 takes nothing returns boolean
if GetLearnedSkill()==1093809231 and GetUnitAbilityLevel(GetTriggerUnit(),1093809231)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call R62()
endif
return false
endfunction
function BB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function R72))
call YVI(1093809229)
call YVI(1093809459)
call YVI(1093810224)
call YVI(1093810225)
call YVI(1093809230)
call YVI(1093809460)
call YVI(1093810009)
call YVI(1093810010)
set t=null
endfunction
function R82 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=OK
local unit XTI=AK
local real R92=(LoadReal(ZY,(V0I),(21)))
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)+R92)
set XSI=null
set XTI=null
endfunction
function RA2 takes nothing returns nothing
local trigger t=LII(O6I,GetEnumUnit(),1747993656,"R82",400)
local integer V0I=GetHandleId(t)
call SaveReal(ZY,(V0I),(21),((O7I)*1.0))
set t=null
endfunction
function RB2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group g
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1093809971)
call UnitRemoveAbility(XTI,1110459724)
else
if GetTriggerEvalCount(t)>3 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1093809971)
call UnitRemoveAbility(XTI,1110459724)
endif
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl",XTI,"origin"))
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),525,Condition(function SEI))
set O6I=XTI
set O7I=15+15*WTI
call ForGroup(g,function RA2)
call ZYI(g)
call XNI(XSI,XTI,1,O7I)
endif
set t=null
set XSI=null
set XTI=null
set g=null
return false
endfunction
function RC2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093809742)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KKI(XTI,1093809971)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809971,false)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function RB2))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M)))*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
set t=null
set XSI=null
endfunction
function LeechSeed takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
call LII(XSI,XTI,1747993657,"RC2",600)
set XSI=null
set XTI=null
endfunction
function RD2 takes nothing returns boolean
if GetSpellAbilityId()==1093809742 and ZXI(GetSpellTargetUnit())==false then
call RC2()
endif
return false
endfunction
function BD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RD2))
set t=null
endfunction
function RE2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,1093684547)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if KMI(XSI)==false and KMI(XTI)==false then
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function RF2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local integer WTI=GetUnitAbilityLevel(XSI,1093684547)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if KMI(XSI)==false and KMI(XTI)==false then
call KKI(T0I,1093684307)
call SetUnitAbilityLevel(T0I,1093684307,WTI)
call IssueTargetOrder(T0I,"soulburn",XTI)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerAddCondition(t,Condition(function RE2))
call TriggerRegisterTimerEvent(t,0.01,false)
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call SaveUnitHandle(ZY,(GetHandleId(t)),(17),(XTI))
call SaveInteger(ZY,(GetHandleId(t)),(5),(WTI))
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
return false
endfunction
function RG2 takes integer id returns boolean
return id==1093682265 or id==1093752642 or id==1093677622 or id==1093679446 or id==1095263841 or id==1093684314 or id==1093685582 or id==1093685065
endfunction
function RH2 takes nothing returns boolean
local unit XTI=GetTriggerUnit()
local unit XSI=(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))
local trigger t
if GetUnitAbilityLevel(GetTriggerUnit(),1110455638)>0 and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 and I41(GetSpellAbilityId())==false and GetSpellAbilityId()!=1095328363 and GetSpellAbilityId()!=1093678426 and GetSpellAbilityId()!=1093682768 and GetSpellAbilityId()!=1093685593 and GetSpellAbilityId()!=1093678680 and GetSpellAbilityId()!=1093681489 and GetSpellAbilityId()!=1093808472 and GetSpellAbilityId()!=1093808471 and GetSpellAbilityId()!=1093808470 and GetSpellAbilityId()!=1093743191 and GetSpellAbilityId()!=1093678667 and GetSpellAbilityId()!=1097163124 and GetSpellAbilityId()!=1093683801 and GetSpellAbilityId()!=1093682767 and GetSpellAbilityId()!=1093750345 and GetSpellAbilityId()!=1093750089 and GetSpellAbilityId()!=1093751096 and GetSpellAbilityId()!=1093751361 and GetSpellAbilityId()!=1093751126 and GetSpellAbilityId()!=1093808473 and GetSpellAbilityId()!=1093748565 and GetSpellAbilityId()!=1093753177 and RG2(GetSpellAbilityId())==false then
if WEI(XSI)==false and NVI(XSI)==false and IsUnitEnemy(XTI,GetOwningPlayer(XSI))==true then
if((LoadInteger(ZY,(GetHandleId((XTI))),((4305))))==1)==false then
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function RF2))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call SaveUnitHandle(ZY,(GetHandleId(t)),(17),(XTI))
set t=null
endif
endif
endif
set XTI=null
set XSI=null
return false
endfunction
function RZ2 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=AK
local real XPI=(LoadReal(ZY,(V0I),(20)))
call SetHeroInt(XSI,GetHeroInt(XSI,false)+1,true)
call K3I("+1 "+GetObjectName(1848658512),3,XSI,0.023,0,255,0,230)
set XSI=null
endfunction
function RV2 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=AK
local real XPI=(LoadReal(ZY,(V0I),(20)))
call SetHeroInt(XSI,GetHeroInt(XSI,false)+2,true)
call K3I("+2 "+GetObjectName(1848658512),3,XSI,0.023,0,255,0,230)
set XSI=null
endfunction
function RW2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit WQ1=GetTriggerUnit()
if IsUnitType(WQ1,UNIT_TYPE_HERO)==true and GetUnitTypeId(WQ1)!=1211117642 and IsUnitIllusion(WQ1)==false and IsUnitInRange(XSI,WQ1,850)and KMI(XSI)==false and IsUnitAlly(XSI,GetOwningPlayer(WQ1))==false then
if XSI==GetKillingUnit()then
set O8I[GetPlayerId(GetOwningPlayer(XSI))]=O8I[GetPlayerId(GetOwningPlayer(XSI))]+2
call K3I("-2 "+GetObjectName(1848658512),3,WQ1,0.023,255,0,0,230)
call SetHeroInt(WQ1,GetHeroInt(WQ1,false)-2,true)
call LII(WQ1,XSI,1747993424,"RV2",450)
else
set O8I[GetPlayerId(GetOwningPlayer(XSI))]=O8I[GetPlayerId(GetOwningPlayer(XSI))]+1
call K3I("-1 "+GetObjectName(1848658512),3,WQ1,0.023,255,0,0,230)
call SetHeroInt(WQ1,GetHeroInt(WQ1,false)-1,true)
call LII(WQ1,XSI,1747993424,"RZ2",450)
endif
endif
set t=null
set XSI=null
set WQ1=null
return false
endfunction
function RX2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RH2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RW2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
set t=null
endfunction
function RY2 takes nothing returns boolean
if GetLearnedSkill()==1093684547 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684547)==1 then
call RX2()
endif
return false
endfunction
function RJ2 takes nothing returns boolean
local integer J1I=O8I[GetPlayerId(GetTriggerPlayer())]
if GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])==1311781185 and J1I>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848657997)+" "+I2S(J1I))
endif
return false
endfunction
function BG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RY2))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-st",true)
call TriggerAddCondition(t,Condition(function RJ2))
set t=null
endfunction
function RK2 takes nothing returns boolean
return GetSpellAbilityId()==1093684275
endfunction
function RL2 takes nothing returns boolean
call ZSI(GetTriggeringTrigger())
call VolumeGroupReset()
return false
endfunction
function RM2 takes nothing returns nothing
local location YV1=GetUnitLoc(GetTriggerUnit())
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,GetUnitAbilityLevel(GetTriggerUnit(),1093684275)+2,false)
call TriggerAddCondition(t,Condition(function RL2))
call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call ShowUnitHide(bj_lastCreatedUnit)
call UnitApplyTimedLifeBJ(5.00,1112820806,bj_lastCreatedUnit)
call UnitAddAbility(bj_lastCreatedUnit,1093684274)
call SetUnitAbilityLevelSwapped(1093684274,bj_lastCreatedUnit,GetUnitAbilityLevel(GetTriggerUnit(),1093684275))
call IssuePointOrderLoc(bj_lastCreatedUnit,"silence",YV1)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITSOUNDS,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_COMBAT,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_SPELLS,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_MUSIC,.0)
call RemoveLocation(YV1)
set t=null
set YV1=null
endfunction
function GS takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RK2))
call TriggerAddAction(t,function RM2)
endfunction
function RN2 takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetTriggerUnit(),1110455640)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093684314)>0 and(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455640)
set d=(0.2+0.1*I2R(GetUnitAbilityLevel(GetEventDamageSource(),1093684314)))*GetHeroInt(GetEventDamageSource(),true)
call K3I("+"+I2S(R2I(d)),1,GetTriggerUnit(),0.023,3,216,216,216)
call DisableTrigger(GetTriggeringTrigger())
call XNI(GetEventDamageSource(),GetTriggerUnit(),3,d)
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function RS2 takes nothing returns nothing
local trigger t
local unit XTI
local unit XSI
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set XTI=GetSpellTargetUnit()
set XSI=GetTriggerUnit()
else
set XTI=GetTriggerUnit()
set XSI=GetAttacker()
endif
if IsUnitIllusion(XSI)==false then
set t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function RN2))
endif
set t=null
set XTI=null
set XSI=null
endfunction
function RT2 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093684314)>0 and(LoadBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))then
call RS2()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==OrderId("poisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263),(true))
elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263),(false))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093684314 then
call RS2()
endif
return false
endfunction
function RR2 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function RT2))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function RP2 takes nothing returns boolean
if GetLearnedSkill()==1093684314 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684314)==1 then
call RR2()
endif
return false
endfunction
function BF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RP2))
set t=null
endfunction
function RQ2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and ZLI<(4+WTI)then
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
call SetUnitState(XTI,UNIT_STATE_MANA,GetUnitState(XTI,UNIT_STATE_MANA)-5-5*WTI)
call XNI(XSI,XTI,1,10+10*WTI)
elseif ZLI>=(4+WTI)or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()!=1093743191 and GetSpellAbilityId()!=1093682767 and GetSpellAbilityId()!=1093750095 and GetSpellAbilityId()!=1093747504 and GetSpellAbilityId()!=1093753417 and GetSpellAbilityId()!=1093810265 and I41(GetSpellAbilityId())==false and(WVI(GetSpellAbilityId())or GetSpellAbilityId()==1093678667))then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call UnitRemoveAbility(XTI,1093750867)
call UnitRemoveAbility(XTI,1110459217)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function RU2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093743692)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KKI(XTI,1093750867)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function RQ2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareTarget.mdl",XTI,"overhead")))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(34),(0))
set XSI=null
set XTI=null
set t=null
endfunction
function P02 takes nothing returns nothing
local group g=ZJI()
local location l=GetSpellTargetLoc()
set OK=GetTriggerUnit()
set O9I=GetTriggerUnit()
call GroupEnumUnitsInRange(g,GetLocationX(l),GetLocationY(l),375,Condition(function SWI))
call ForGroup(g,function RU2)
call JKI("war3mapImported\\CotS.mdx",GetLocationX(l),GetLocationY(l),5)
call ZYI(g)
call RemoveLocation(l)
set g=null
set l=null
endfunction
function PI2 takes nothing returns boolean
if GetSpellAbilityId()==1093743692 then
call P02()
endif
return false
endfunction
function BE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PI2))
set t=null
endfunction
function P12 takes nothing returns boolean
return GetLearnedSkill()==1093677909
endfunction
function PO2 takes nothing returns nothing
call SetPlayerTechResearchedSwap(1378889781,GetUnitAbilityLevelSwapped(1093677909,GetTriggerUnit()),GetOwningPlayer(GetLearningUnit()))
endfunction
function BV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function P12))
call TriggerAddAction(t,function PO2)
endfunction
function P22 takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call XNI(OAI,GetEnumUnit(),1,OCI)
call IssueTargetOrder(OBI,"slow",GetEnumUnit())
else
call XNI(OAI,GetEnumUnit(),1,OCI/3)
call IssueTargetOrder(OBI,"slow",GetEnumUnit())
endif
endfunction
function P32 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group g=ZJI()
local real d
local real a
local real x2
local real y2
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,350,Condition(function S8I))
set OAI=XSI
set OCI=WTI*12
set OBI=T0I
call ForGroup(g,function P22)
call ZYI(g)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(309))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(178))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(179))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(180))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(330))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(331))))
if GetTriggerEvalCount(t)==8 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set d=0
set a=0
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(309),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
set d=150
set a=45
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
set d=275
set a=90
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
set d=150
set a=135
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(177),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
set d=275
set a=180
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(178),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
set d=150
set a=225
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(179),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
set d=275
set a=270
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(180),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
set d=150
set a=305
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(330),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
set d=275
set a=360
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(331),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))
endif
set t=null
set XSI=null
set T0I=null
set g=null
return false
endfunction
function P42 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093678644)
local real x1=(LoadReal(ZY,(V0I),(6)))
local real y1=(LoadReal(ZY,(V0I),(7)))
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x1,y1,0)
local real x2
local real y2
local real d
local real a
local integer i
call KKI(T0I,1093744966)
call SetUnitAbilityLevel(T0I,1093744966,WTI)
if GetTriggerEvalCount(t)==1 then
set i=1
loop
exitwhen i>10
set d=GetRandomReal(0,450)
set a=GetRandomReal(0,360)
set x2=x1+d*Cos(a*bj_DEGTORAD)
set y2=y1+d*Sin(a*bj_DEGTORAD)
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656906,GetUnitX(XSI),GetUnitY(XSI),90)
call IssuePointOrder(T0I,"attackground",x2,y2)
call UnitApplyTimedLife(T0I,1112820806,0.5)
set i=i+1
endloop
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveReal(ZY,(V0I),(6),((x1)*1.0))
call SaveReal(ZY,(V0I),(7),((y1)*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function P32))
call TriggerEvaluate(t)
endif
set XSI=null
set T0I=null
set t=null
return false
endfunction
function P52 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call TriggerRegisterTimerEvent(t,0.4,true)
call TriggerAddCondition(t,Condition(function P42))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call RemoveLocation(l)
set t=null
set XSI=null
set l=null
endfunction
function P62 takes nothing returns boolean
if GetSpellAbilityId()==1093678644 then
call P52()
endif
return false
endfunction
function BH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P62))
call YVI(1093744966)
set t=null
endfunction
function P72 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local effect FX=(LoadEffectHandle(ZY,(V0I),(32)))
local player p=GetOwningPlayer(V8I)
call UnitShareVision(XTI,p,false)
call DestroyEffect(FX)
call RemoveUnit(T0I)
call UnitRemoveAbility(XTI,1110455880)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
set T0I=null
set XTI=null
set FX=null
set p=null
return false
endfunction
function P82 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local player p=GetOwningPlayer(V8I)
local unit T0I
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local string s="effects\\Snipe Target.mdx"
if IsPlayerAlly(GetLocalPlayer(),p)==false and XJI(GetLocalPlayer())==false then
set s=""
endif
call UnitShareVision(XTI,p,true)
set T0I=CreateUnit(GetOwningPlayer(XTI),1697657170,0,0,0)
call KKI(T0I,1093684809)
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget(s,XTI,"overhead")))
call TriggerRegisterTimerEvent(t,4,false)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function P72))
set t=null
set V8I=null
set XTI=null
set T0I=null
set p=null
endfunction
function P92 takes nothing returns boolean
if GetSpellAbilityId()==1093678160 or GetSpellAbilityId()==1093747029 then
call P82()
endif
return false
endfunction
function BZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function P92))
set t=null
endfunction
function PA2 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656883,x,y,0)
local integer WTI=GetUnitAbilityLevel(V8I,1093685831)
local real PB2=(83+17*WTI)*0.01
call SetUnitVertexColor(T0I,255,255,255,150)
call UnitApplyTimedLife(T0I,1112820806,6)
call SetUnitScale(T0I,PB2,PB2,PB2)
if VNI(GetOwningPlayer(V8I))then
call KKI(T0I,1093677369)
call SetUnitAbilityLevel(T0I,1093677369,WTI)
else
call KKI(T0I,1093682487)
call SetUnitAbilityLevel(T0I,1093682487,WTI)
endif
call IssuePointOrder(T0I,"cloudoffog",x,y)
call RemoveLocation(l)
set V8I=null
set l=null
set T0I=null
endfunction
function PC2 takes nothing returns boolean
if GetSpellAbilityId()==1093685831 then
call PA2()
endif
return false
endfunction
function BX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PC2))
endfunction
function PD2 takes nothing returns boolean
return GetLearnedSkill()==1093677130 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function PE2 takes nothing returns nothing
if(GetUnitAbilityLevel(GetTriggerUnit(),1093684546)==0)then
call KKI(GetTriggerUnit(),1093684546)
endif
call SetUnitAbilityLevel(GetTriggerUnit(),1093684546,GetUnitAbilityLevel(GetTriggerUnit(),1093677130))
endfunction
function II takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function PD2))
call TriggerAddAction(t,function PE2)
endfunction
function PF2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real XPI=30*GetUnitAbilityLevel(XSI,1093684025)
local trigger t
local integer V0I
local real x=GetUnitX(XTI)-75*Cos(GetUnitFacing(XTI)*bj_DEGTORAD)
local real y=GetUnitY(XTI)-75*Sin(GetUnitFacing(XTI)*bj_DEGTORAD)
call SetUnitX(XSI,x)
call SetUnitY(XSI,y)
call SetUnitFacing(XSI,GetUnitFacing(XTI))
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",x,y))
if IsUnitEnemy(XTI,GetOwningPlayer(XSI))then
call XNI(XSI,XTI,1,XPI)
call SaveBoolean(ZY,(GetHandleId(XSI)),(332),(true))
call IssueTargetOrder(XSI,"attack",XTI)
endif
set XSI=null
set XTI=null
set t=null
endfunction
function PG2 takes nothing returns boolean
if GetSpellAbilityId()==1093684025 then
call PF2()
endif
return false
endfunction
function PH2 takes nothing returns boolean
if GetSpellAbilityId()==1093684025 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
return false
endfunction
function BY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PG2))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function PH2))
set t=null
endfunction
function PZ2 takes nothing returns nothing
local unit XSI=GetAttacker()
local unit XTI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093682266)
local boolean PV2=(LoadBoolean(ZY,(GetHandleId(XSI)),(332)))
local real d=RAbsBJ(GetUnitFacing(XTI)-GetUnitFacing(XSI))
if d>180 then
set d=360-d
endif
if d<=105 or PV2 then
call SaveBoolean(ZY,(GetHandleId(XSI)),(332),(false))
if GetUnitAbilityLevel(XTI,1093678162)==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",XTI,"chest"))
call XNI(XSI,XTI,2,GetHeroAgi(XSI,true)*0.25*WTI)
endif
endif
set XSI=null
set XTI=null
endfunction
function PW2 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093682266)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false then
call PZ2()
endif
return false
endfunction
function BW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function PW2))
set t=null
endfunction
function PX2 takes nothing returns nothing
if NKI(GetEnumUnit())then
return
endif
call MQI(GetEnumUnit(),ODI,1,6,1110458966)
call UnitMakeAbilityPermanent(GetEnumUnit(),true,ODI)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),ODI,false)
endfunction
function PY2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093746997)
local group g=ZJI()
if WTI==1 then
set ODI=1093748278
elseif WTI==2 then
set ODI=1093748279
elseif WTI==3 then
set ODI=1093748275
elseif WTI==4 then
set ODI=1093748277
endif
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),725,Condition(function SBI))
call ForGroup(g,function PX2)
call ZYI(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",XSI,"overhead"))
set XSI=null
set g=null
endfunction
function PJ2 takes nothing returns boolean
if GetSpellAbilityId()==1093746997 then
call PY2()
endif
return false
endfunction
function HO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PJ2))
set t=null
endfunction
function PK2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
endif
if(GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT and ZLI>1)or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and TKI(GetSpellAbilityId())and GetSpellTargetUnit()==V8I)then
if KMI(V8I)==false then
call UnitRemoveAbility(V8I,1093687119)
call UnitRemoveAbility(V8I,1110454329)
call UnitRemoveAbility(V8I,1110459472)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BattleCryCaster.mdx",V8I,"overhead"))
call KKI(V8I,1093687119)
call SetUnitAbilityLevel(V8I,1093687119,GetUnitAbilityLevel(V8I,1093752648))
call UnitMakeAbilityPermanent(V8I,true,1093687119)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093687119,false)
endif
set t=null
set V8I=null
return false
endfunction
function PL2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,25,false)
call TriggerRegisterTimerEvent(t,0.31,false)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PK2))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(34),(0))
set t=null
set V8I=null
endfunction
function PM2 takes nothing returns boolean
if GetSpellAbilityId()==1093752648 and GetUnitTypeId(GetTriggerUnit())==1211117617 then
call PL2()
endif
return false
endfunction
function H21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PM2))
set t=null
endfunction
function PN2 takes nothing returns nothing
call IssueTargetOrder(OEI,"thunderbolt",GetEnumUnit())
endfunction
function PS2 takes player p,unit XTI,integer WTI returns nothing
local unit T0I=CreateUnit(p,1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local integer KLI
local group g=ZJI()
call KKI(T0I,1093685850)
call SetUnitAbilityLevel(T0I,1093685850,WTI)
set OK=L1[GetPlayerId(p)]
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),280,Condition(function SOI))
call GroupAddUnit(g,XTI)
set OEI=T0I
call ForGroup(g,function PN2)
call ZYI(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",XTI,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",XTI,"origin"))
set T0I=null
set g=null
endfunction
function PT2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real x=GetUnitX(KRI)
local real y=GetUnitY(KRI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real KPI=1000*0.035
local real KQI=JPI(x,y,J6I,J7I)
local real KUI=x+KPI*Cos(KQI*bj_DEGTORAD)
local real L0I=y+KPI*Sin(KQI*bj_DEGTORAD)
local boolean SR1=(LoadBoolean(ZY,(V0I),(249)))
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
call SetUnitFacing(KRI,KQI)
if KAI(J6I,J7I,KUI,L0I)<=KPI then
if SR1 then
call PS2(p,XTI,WTI)
endif
call KillUnit(KRI)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set KRI=null
return false
endfunction
function PR2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093744944)
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747990353,GetUnitX(XSI),GetUnitY(XSI),JPI(GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI)))
local boolean SR1=ZXI(GetSpellTargetUnit())==false
call SaveBoolean(ZY,(V0I),(249),(SR1))
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(XSI)))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TriggerRegisterTimerEvent(t,0.035,true)
call TriggerAddCondition(t,Condition(function PT2))
set t=null
set XSI=null
set XTI=null
set KRI=null
endfunction
function PP2 takes nothing returns boolean
if GetSpellAbilityId()==1093744944 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetTriggerUnit(),"weapon"))
else
call PR2()
endif
endif
return false
endfunction
function H11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function PP2))
set t=null
endfunction
function PQ2 takes nothing returns boolean
if((GetUnitTypeId(GetFilterUnit())==1848652103))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652099))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652088))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651828))then
return true
endif
return false
endfunction
function PU2 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit SC1
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
local integer WTI=GetUnitAbilityLevel(XSI,GetSpellAbilityId())
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(XSI),Condition(function PQ2))
set SC1=FirstOfGroup(g)
call ZYI(g)
if GetSpellAbilityId()==1093748038 then
call KKI(T0I,1093681473)
call SetUnitAbilityLevel(T0I,1093681473,WTI)
elseif GetSpellAbilityId()==1093748037 then
call KKI(T0I,1093681474)
call SetUnitAbilityLevel(T0I,1093681474,WTI)
elseif GetSpellAbilityId()==1093748040 then
call KKI(T0I,1093681475)
call SetUnitAbilityLevel(T0I,1093681475,WTI)
elseif GetSpellAbilityId()==1093748041 then
call KKI(T0I,1093681476)
call SetUnitAbilityLevel(T0I,1093681476,WTI)
elseif GetSpellAbilityId()==1093748039 then
call KKI(T0I,1093681477)
call SetUnitAbilityLevel(T0I,1093681477,WTI)
endif
call IssueTargetOrder(T0I,"bloodlust",XSI)
if SC1!=null and KMI(SC1)==false then
call IssueTargetOrder(T0I,"bloodlust",SC1)
endif
set g=null
set XSI=null
set SC1=null
set T0I=null
endfunction
function Q02 takes nothing returns boolean
if GetSpellAbilityId()==1093748038 or GetSpellAbilityId()==1093748037 or GetSpellAbilityId()==1093748040 or GetSpellAbilityId()==1093748041 or GetSpellAbilityId()==1093748039 then
call PU2()
endif
return false
endfunction
function BJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q02))
set t=null
endfunction
function QI2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit SC1=(LoadUnitHandle(ZY,(V0I),(2)))
local real Q12
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and VSI(GetOwningPlayer(GetEventDamageSource()))then
call SaveReal(ZY,(V0I),(714),(((TimerGetElapsed(M)))*1.0))
endif
endif
set Q12=(LoadReal(ZY,(V0I),(714)))
if Q12+3<(TimerGetElapsed(M))then
if(LoadInteger(ZY,(V0I),(34)))==2 then
call SaveInteger(ZY,(V0I),(34),(1))
call SetPlayerAbilityAvailable(GetOwningPlayer(SC1),1093681463,true)
endif
else
if(LoadInteger(ZY,(V0I),(34)))==1 then
call SaveInteger(ZY,(V0I),(34),(2))
call SetPlayerAbilityAvailable(GetOwningPlayer(SC1),1093681463,false)
endif
endif
set t=null
set SC1=null
return false
endfunction
function QO2 takes unit SC1 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerRegisterUnitEvent(t,SC1,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,SC1,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QI2))
call SaveUnitHandle(ZY,(V0I),(2),(SC1))
call SaveReal(ZY,(V0I),(714),((0)*1.0))
call SaveInteger(ZY,(V0I),(34),(1))
call SetPlayerAbilityAvailable(GetOwningPlayer(SC1),1093681463,true)
set t=null
endfunction
function Q22 takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110459185)>0
endfunction
function Q32 takes nothing returns nothing
call XNI(OFI,GetEnumUnit(),2,30)
endfunction
function Q42 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit SC1=(LoadUnitHandle(ZY,(V0I),(53)))
local group g=ZJI()
set OK=SC1
set OFI=SC1
call GroupEnumUnitsInRange(g,GetUnitX(SC1),GetUnitY(SC1),2000,Condition(function Q22))
call ForGroup(g,function Q32)
call ZYI(g)
set t=null
set g=null
set SC1=null
return false
endfunction
function Q52 takes nothing returns nothing
local unit SC1=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function Q42))
call SaveUnitHandle(ZY,(V0I),(53),(SC1))
set SC1=null
set t=null
endfunction
function Q62 takes nothing returns boolean
return GetLearnedSkill()==1093681461 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function Q72 takes nothing returns boolean
if KMI(GetFilterUnit())then
return false
endif
if((GetUnitTypeId(GetFilterUnit())==1848652099))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652088))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651828))then
return true
endif
return false
endfunction
function Q82 takes nothing returns nothing
local integer V0I=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local unit Q92=(LoadUnitHandle(ZY,(V0I),(334)))
local unit SC1=(LoadUnitHandle(ZY,(V0I),(333)))
if Q92!=null and X0==false then
call UnitAddItem(SC1,UnitRemoveItemFromSlot(Q92,0))
call UnitAddItem(SC1,UnitRemoveItemFromSlot(Q92,1))
call UnitAddItem(SC1,UnitRemoveItemFromSlot(Q92,2))
call UnitAddItem(SC1,UnitRemoveItemFromSlot(Q92,3))
call UnitAddItem(SC1,UnitRemoveItemFromSlot(Q92,4))
call UnitAddItem(SC1,UnitRemoveItemFromSlot(Q92,5))
endif
endfunction
function QA2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local player VRI=GetOwningPlayer(Y9I)
local location YV1=GetUnitLoc(Y9I)
local boolexpr VE1=Condition(function Q72)
local group U4I=ZJI()
local integer WTI=GetUnitAbilityLevel(Y9I,1093681461)
local integer V0I=GetHandleId(VRI)
local integer QB2
local unit SC1
local real Y72
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(Y9I),VE1)
call DestroyBoolExpr(VE1)
if(WTI==1)then
call Q52()
endif
set QB2=CountUnitsInGroup(U4I)
if(QB2==1)then
set SC1=FirstOfGroup(U4I)
set Y72=GetUnitLifePercent(SC1)
set YV1=GetUnitLoc(SC1)
call ShowUnit(SC1,false)
call KillUnit(SC1)
if(WTI==2)then
call CreateNUnitsAtLoc(1,1848652088,GetOwningPlayer(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call QO2(bj_lastCreatedUnit)
elseif(WTI==3)then
call CreateNUnitsAtLoc(1,1848652099,GetOwningPlayer(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call QO2(bj_lastCreatedUnit)
elseif(WTI==4)then
call CreateNUnitsAtLoc(1,1848652103,GetOwningPlayer(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call QO2(bj_lastCreatedUnit)
endif
call SetUnitLifePercentBJ(bj_lastCreatedUnit,Y72)
call SaveUnitHandle(ZY,(V0I),(333),(bj_lastCreatedUnit))
call Q82()
endif
call ZYI(U4I)
endfunction
function BN1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Q62))
call TriggerAddAction(t,function QA2)
endfunction
function QC2 takes nothing returns boolean
return GetLearnedSkill()==1093681464 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function QD2 takes nothing returns nothing
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889776,GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),1378889776,true)+1)
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889777,GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),1378889777,true)+1)
endfunction
function BS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function QC2))
call TriggerAddAction(t,function QD2)
endfunction
function QE2 takes nothing returns boolean
return GetSpellAbilityId()==1093681461
endfunction
function QF2 takes nothing returns boolean
if KMI(GetFilterUnit())then
return false
endif
if((GetUnitTypeId(GetFilterUnit())==1848652103))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652099))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652088))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651828))then
return true
endif
return false
endfunction
function QG2 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local player VRI=GetOwningPlayer(Y9I)
local location YV1=GetUnitLoc(Y9I)
local boolexpr VE1=Condition(function QF2)
local group U4I=ZJI()
local integer WTI=GetUnitAbilityLevel(Y9I,1093681461)
local integer V0I=GetHandleId(VRI)
local boolean QH2
local unit SC1
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(Y9I),VE1)
set QH2=CountUnitsInGroup(U4I)==0
if(WTI==1 and QH2)then
call CreateNUnitsAtLoc(1,1848651828,GetOwningPlayer(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call SaveUnitHandle(ZY,(V0I),(333),(bj_lastCreatedUnit))
call Q82()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call QO2(bj_lastCreatedUnit)
elseif(WTI==2 and QH2)then
call CreateNUnitsAtLoc(1,1848652088,GetOwningPlayer(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call SaveUnitHandle(ZY,(V0I),(333),(bj_lastCreatedUnit))
call Q82()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call QO2(bj_lastCreatedUnit)
elseif(WTI==3 and QH2)then
call CreateNUnitsAtLoc(1,1848652099,GetOwningPlayer(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call SaveUnitHandle(ZY,(V0I),(333),(bj_lastCreatedUnit))
call Q82()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call QO2(bj_lastCreatedUnit)
elseif(WTI==4 and QH2)then
call CreateNUnitsAtLoc(1,1848652103,GetOwningPlayer(GetTriggerUnit()),YV1,bj_UNIT_FACING)
call SaveUnitHandle(ZY,(V0I),(333),(bj_lastCreatedUnit))
call Q82()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call QO2(bj_lastCreatedUnit)
elseif QH2==false then
set SC1=FirstOfGroup(U4I)
call AddSpecialEffectTargetUnitBJ("chest",SC1,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call SetUnitState(SC1,UNIT_STATE_LIFE,GetUnitState(SC1,UNIT_STATE_MAX_LIFE))
call SetUnitPosition(SC1,GetUnitX(Y9I),GetUnitY(Y9I))
set SC1=null
endif
call SetUnitAbilityLevel(bj_lastCreatedUnit,1093679449,WTI)
call ZYI(U4I)
call RemoveLocation(YV1)
set Y9I=null
set VRI=null
set YV1=null
set U4I=null
endfunction
function Trig_Summon_Spirit_Bear_PreActions takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local player VRI=GetOwningPlayer(Y9I)
local location YV1=GetUnitLoc(Y9I)
local boolexpr VE1=Condition(function QF2)
local group U4I=ZJI()
local integer WTI=GetUnitAbilityLevel(Y9I,1093681461)
local integer V0I=GetHandleId(VRI)
local boolean QH2
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(Y9I),VE1)
set QH2=CountUnitsInGroup(U4I)==0
if QH2==false then
call Y8I(Y9I)
call Y3I(VRI,GetObjectName(1848652621))
endif
call ZYI(U4I)
call RemoveLocation(YV1)
endfunction
function BL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QE2))
call TriggerAddAction(t,function QG2)
endfunction
function QZ2 takes nothing returns boolean
return GetSpellAbilityId()==1093681463
endfunction
function QV2 takes nothing returns nothing
local unit SC1=GetTriggerUnit()
local unit SD1=L1[GetPlayerId(GetOwningPlayer(SC1))]
call SetUnitX(SC1,GetUnitX(SD1)+GetRandomReal(25,50)*Cos(GetRandomReal(0,360)))
call SetUnitY(SC1,GetUnitY(SD1)+GetRandomReal(25,50)*Sin(GetRandomReal(0,360)))
endfunction
function BM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QZ2))
call TriggerAddAction(t,function QV2)
endfunction
function QW2 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1311781171 or GetUnitTypeId(GetTriggerUnit())==1311781199 or GetUnitTypeId(GetTriggerUnit())==1311781173 or GetUnitTypeId(GetTriggerUnit())==1311781172)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function QX2 takes nothing returns nothing
local unit SC1=(LoadUnitHandle(ZY,(GetHandleId(GetOwningPlayer(GetTriggerUnit()))),(333)))
call KillUnit(SC1)
endfunction
function BR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QW2))
call TriggerAddAction(t,function QX2)
endfunction
function QY2 takes nothing returns boolean
return GetUnitTypeId(GetAttacker())==1848652103 or GetUnitTypeId(GetAttacker())==1848652099 or GetUnitTypeId(GetAttacker())==1848652088 or GetUnitTypeId(GetAttacker())==1848651828
endfunction
function QJ2 takes nothing returns nothing
local unit SC1=GetAttacker()
local unit SD1=L1[GetPlayerId(GetOwningPlayer(SC1))]
if((GetUnitX(SD1)-GetUnitX(SC1))*(GetUnitX(SD1)-GetUnitX(SC1))+(GetUnitY(SD1)-GetUnitY(SC1))*(GetUnitY(SD1)-GetUnitY(SC1))>=(1100*1100))then
call IssueImmediateOrder(SC1,"stop")
endif
endfunction
function BK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function QY2))
call TriggerAddAction(t,function QJ2)
endfunction
function QK2 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1848652103 or GetUnitTypeId(GetTriggerUnit())==1848652099 or GetUnitTypeId(GetTriggerUnit())==1848652088 or GetUnitTypeId(GetTriggerUnit())==1848651828)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function QL2 takes nothing returns nothing
local location WJ1
if VLI(GetOwningPlayer(GetTriggerUnit()))then
set WJ1=GetRectCenter(A4)
else
set WJ1=GetRectCenter(T3)
endif
if RMI(GetEnumItem())==false then
call SetItemPositionLoc(GetEnumItem(),WJ1)
endif
call RemoveLocation(WJ1)
set WJ1=null
endfunction
function QM2 takes nothing returns nothing
local integer V0I=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local unit Q92=(LoadUnitHandle(ZY,(V0I),(334)))
local unit SC1=(LoadUnitHandle(ZY,(V0I),(333)))
local integer x
local integer y
if Q92==null then
if VLI(GetOwningPlayer(SC1))then
set x=-6390
set y=-5615
else
set x=5875
set y=5000
endif
set Q92=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697657158,x,y,0)
call SaveUnitHandle(ZY,(V0I),(334),(Q92))
endif
if RMI(GetEnumItem())==false then
call UnitAddItem(Q92,GetEnumItem())
endif
call ShowUnit(Q92,true)
endfunction
function QN2 takes nothing returns nothing
local integer TTI=TQI(GetEnumItem())
if GetWidgetLife(GetEnumItem())>0 and TTI!=ZX0 then
if X0==true then
call QL2()
else
call QM2()
endif
else
endif
endfunction
function QS2 takes nothing returns nothing
local location YV1=GetUnitLoc(GetTriggerUnit())
local rect QT2=RectFromCenterSizeBJ(YV1,400.00,400.00)
local unit SD1=L1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
call SetHeroXP(SD1,(GetHeroXP(SD1)-(GetHeroXP(SD1)/(125-(25*GetUnitAbilityLevel(SD1,1093681461))))),false)
call UnitDamageTargetBJ(GetKillingUnit(),SD1,(100.00*I2R(GetUnitAbilityLevel(SD1,1093681461))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call EnumItemsInRectBJ(QT2,function QN2)
call RemoveLocation(YV1)
call RemoveRect(QT2)
endfunction
function BT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QK2))
call TriggerAddAction(t,function QS2)
endfunction
function QR2 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if VSI(GetOwningPlayer(GetEventDamageSource()))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true and OQI==false then
if OUI==false then
call UnitRemoveAbility(GetTriggerUnit(),1110458957)
call ZSI(GetTriggeringTrigger())
endif
endif
if OUI==true then
set OUI=false
endif
if OQI==true then
set OQI=false
endif
else
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function QP2 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function QR2))
set XTI=null
set t=null
endfunction
function QQ2 takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1110458957)>0 and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function QU2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group g=ZJI()
call GroupEnumUnitsInRange(g,x,y,1000,Condition(function QQ2))
call ForGroup(g,function QP2)
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set g=null
return false
endfunction
function UI2 takes nothing returns nothing
if OGI==1 or OGI==2 then
call XNI(GetTriggerUnit(),GetEnumUnit(),2,80)
endif
if OGI==1 or OGI==3 then
call XNI(GetTriggerUnit(),GetEnumUnit(),1,80)
endif
endfunction
function U12 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1747990362,x,y,0)
local group g=ZJI()
local unit u
set OHI=GetUnitAbilityLevel(XSI,1093747009)
if((LoadInteger(ZY,(GetHandleId((XSI))),((4270))))==1)==false then
call SetUnitTimeScale(T0I,2.5)
call UnitApplyTimedLife(T0I,1112820806,2)
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call KKI(T0I,1093747001)
call SetUnitAbilityLevel(T0I,1093747001,GetUnitAbilityLevel(XSI,1093747009))
call IssueImmediateOrder(T0I,"stomp")
call GroupEnumUnitsInRange(g,x,y,500,Condition(function S0I))
set OGI=1
call ForGroup(g,function UI2)
call ZYI(g)
call TriggerRegisterTimerEvent(t,0.65,false)
call TriggerAddCondition(t,Condition(function QU2))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
else
call SetUnitTimeScale(T0I,2.5)
call UnitApplyTimedLife(T0I,1112820806,2)
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call KKI(T0I,1093747001)
call SetUnitAbilityLevel(T0I,1093747001,GetUnitAbilityLevel(XSI,1093747009))
call IssueImmediateOrder(T0I,"stomp")
call GroupEnumUnitsInRange(g,x,y,500,Condition(function S0I))
set OGI=2
call ForGroup(g,function UI2)
call TriggerRegisterTimerEvent(t,0.65,false)
call TriggerAddCondition(t,Condition(function QU2))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
set t=CreateTrigger()
set V0I=GetHandleId(t)
set u=(OPI[GetPlayerId(GetOwningPlayer((XSI)))])
set x=GetUnitX(u)
set y=GetUnitY(u)
set T0I=CreateUnit(GetOwningPlayer(XSI),1747990362,x,y,0)
call SetUnitTimeScale(T0I,2.5)
call UnitApplyTimedLife(T0I,1112820806,2)
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call KKI(T0I,1093747001)
call SetUnitAbilityLevel(T0I,1093747001,GetUnitAbilityLevel(XSI,1093747009))
call IssueImmediateOrder(T0I,"stomp")
call GroupEnumUnitsInRange(g,x,y,500,Condition(function S0I))
set OGI=3
call ForGroup(g,function UI2)
call ZYI(g)
call TriggerRegisterTimerEvent(t,0.65,false)
call TriggerAddCondition(t,Condition(function QU2))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SetUnitAnimationByIndex(u,3)
endif
set t=null
set XSI=null
set T0I=null
set g=null
endfunction
function UO2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit SP2=(LoadUnitHandle(ZY,(V0I),(335)))
local boolean U22=(LoadBoolean(ZY,(V0I),(336)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call SaveInteger(ZY,(GetHandleId((XSI))),((4269)),(2))
call SaveBoolean(ZY,(GetHandleId(SP2)),(337),(true))
if U22 then
call ShowUnit(SP2,false)
call KillUnit(SP2)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if U22 then
call SetUnitFacing(SP2,GetUnitFacing(XSI))
endif
endif
set t=null
set SP2=null
return false
endfunction
function U32 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit SP2
local boolean KillImage
call SaveBoolean(ZY,(V0I),(336),(false))
if((LoadInteger(ZY,(GetHandleId((XSI))),((4270))))==1)==false then
call SaveBoolean(ZY,(V0I),(336),(true))
set SP2=CreateUnit(GetOwningPlayer(XSI),1747990357,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
call KKI(SP2,1097625443)
call KKI(SP2,1097167980)
call SetUnitPosition(SP2,GetUnitX(XSI),GetUnitY(XSI))
call SetUnitScale(SP2,1.4,1.4,1.4)
else
set SP2=(OPI[GetPlayerId(GetOwningPlayer((XSI)))])
endif
call IssueImmediateOrder(SP2,"stop")
call SaveInteger(ZY,(GetHandleId((XSI))),((4269)),(1))
call SetUnitAnimation(SP2,"spell slam")
call QueueUnitAnimation(SP2,"spell slam")
call SaveUnitHandle(ZY,(V0I),(335),(SP2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function UO2))
call SaveUnitHandle(ZY,(V0I),(335),(SP2))
set t=null
set XSI=null
set SP2=null
endfunction
function U42 takes nothing returns boolean
local integer J51
if GetSpellAbilityId()==1093747009 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_FINISH then
call U12()
endif
call U32()
endif
return false
endfunction
function Z01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function U42))
set t=null
endfunction
function U52 takes nothing returns nothing
if NKI(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747521)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747521)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747513)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747513)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747522)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747522)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747523)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747523)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
call PMI(GetEnumUnit(),0)
endfunction
function U62 takes nothing returns nothing
if NKI(GetEnumUnit())then
return
endif
if OZI==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747521)==0 then
call KKI(GetEnumUnit(),1093747521)
endif
elseif OZI==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747513)==0 then
call KKI(GetEnumUnit(),1093747513)
endif
elseif OZI==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747522)==0 then
call KKI(GetEnumUnit(),1093747522)
endif
elseif OZI==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747523)==0 then
call KKI(GetEnumUnit(),1093747523)
endif
endif
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
call PMI(GetEnumUnit(),R2I((I2R(GetHeroAgi(GetEnumUnit(),true))/7)*I2R(OZI)/5))
endif
endfunction
function U72 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group U82=(LoadGroupHandle(ZY,(V0I),(340)))
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local group g=ZJI()
local group g2
if XSI==null or GetUnitTypeId(XSI)!=1328558389 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ZYI(U82)
call ZYI(g)
return false
endif
set OK=XSI
set OZI=GetUnitAbilityLevel(XSI,1093747524)
call GroupEnumUnitsInRange(g,x,y,300,Condition(function SOI))
if((LoadInteger(ZY,(GetHandleId((XSI))),((4270))))==1)==true then
set g2=ZJI()
call GroupEnumUnitsInRange(g2,GetUnitX((OPI[GetPlayerId(GetOwningPlayer((XSI)))])),GetUnitY((OPI[GetPlayerId(GetOwningPlayer((XSI)))])),300,Condition(function SOI))
call GroupAddGroup(g2,g)
call ZYI(g2)
set g2=null
endif
call GroupRemoveGroup(g,U82)
call ForGroup(U82,function U52)
if KMI(XSI)==false then
call ForGroup(g,function U62)
endif
call SaveGroupHandle(ZY,(V0I),(340),(g))
call ZYI(U82)
set t=null
set XSI=null
set U82=null
return false
endfunction
function U92 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local integer i
local player p
call KKI(XSI,1093747537)
call TriggerRegisterTimerEvent(t,0.3,true)
call TriggerAddCondition(t,Condition(function U72))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveGroupHandle(ZY,(V0I),(340),(ZJI()))
call SaveTriggerHandle(ZY,(GetHandleId(XSI)),(338),(t))
call SaveBoolean(ZY,(GetHandleId(XSI)),(339),(true))
set i=0
loop
exitwhen i>5
set p=CO[i]
call SetPlayerAbilityAvailable(p,1093747521,false)
call SetPlayerAbilityAvailable(p,1093747513,false)
call SetPlayerAbilityAvailable(p,1093747522,false)
call SetPlayerAbilityAvailable(p,1093747523,false)
set p=DO[i]
call SetPlayerAbilityAvailable(p,1093747521,false)
call SetPlayerAbilityAvailable(p,1093747513,false)
call SetPlayerAbilityAvailable(p,1093747522,false)
call SetPlayerAbilityAvailable(p,1093747523,false)
set i=i+1
endloop
set t=null
set XSI=null
endfunction
function UA2 takes nothing returns boolean
if GetLearnedSkill()==1093747524 and GetUnitAbilityLevel(GetTriggerUnit(),1093747524)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call U92()
endif
return false
endfunction
function HU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function UA2))
set t=null
endfunction
function UB2 takes nothing returns nothing
local real x1=OXI
local real y1=OYI
local real x2=OJI
local real y2=OKI
local real x3=GetUnitX(GetEnumUnit())
local real y3=GetUnitY(GetEnumUnit())
local real u=((x3-x1)*(x2-x1)+(y3-y1)*(y2-y1))/((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))
local real x4=x1+u*(x2-x1)
local real y4=y1+u*(y2-y1)
local real JL2=GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*0.35/2
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
call SetUnitPosition(GetEnumUnit(),x4,y4)
else
call SetUnitX(GetEnumUnit(),x4)
call SetUnitY(GetEnumUnit(),y4)
endif
call IssueTargetOrder(OVI,"slow",GetEnumUnit())
call XNI(OWI,GetEnumUnit(),1,JL2)
call XNI(OWI,GetEnumUnit(),2,JL2)
endfunction
function UC2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x0=(LoadReal(ZY,(V0I),(282)))
local real y0=(LoadReal(ZY,(V0I),(283)))
local real a0=(LoadReal(ZY,(V0I),(341)))
local integer i=0
local real x
local real y
local group g=ZJI()
local group BA2=ZJI()
local integer WTI=GetUnitAbilityLevel(XSI,1093746993)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set OK=XSI
set OWI=XSI
set OVI=CreateUnit(GetOwningPlayer(XSI),1697656901,x0,y0,0)
call KKI(OVI,1093747525)
call SetUnitAbilityLevel(OVI,1093747525,WTI)
loop
exitwhen i>11
set x=x0+i*200*Cos(a0)
set y=y0+i*200*Sin(a0)
call JKI("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",x,y,1.6)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y-250))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x+250,y))
call KCI(x,y,300)
call GroupEnumUnitsInRange(g,x,y,325,Condition(function SOI))
call GroupAddGroup(g,BA2)
call GroupClear(g)
set i=i+1
endloop
set OXI=x0
set OYI=y0
set OJI=x
set OKI=y
call ForGroup(BA2,function UB2)
call ZYI(BA2)
call ZYI(g)
set t=null
set XSI=null
return false
endfunction
function UD2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real x0=(LoadReal(ZY,(V0I),(282)))
local real y0=(LoadReal(ZY,(V0I),(283)))
local real a0
local real UE2
local real UF2
local real UG2
local real UH2
local real UZ2
local real UV2
local real UW2
local real UX2
local real UY2
local real UJ2
local real UK2
local real UL2
local real x
local real y
local ubersplat N5I
local integer ZLI=GetTriggerEvalCount(t)
set x=x0+200*ZLI*Cos(a)
set y=y0+200*ZLI*Sin(a)
set N5I=CreateUbersplat(x,y,"THNE",255,255,255,255,false,false)
call SetUbersplatRenderAlways(N5I,true)
set UE2=x+250*Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))
set UF2=y+250*Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))
set UG2=x+250*Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))
set UH2=y+250*Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))
set UZ2=x-125*Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))
set UV2=y-125*Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))
set UW2=x-125*Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))
set UX2=y-125*Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))
set UY2=x
set UJ2=y
set UK2=x
set UL2=y
call KZI(GetOwningPlayer(XSI),4,x,y,500)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",UE2,UF2))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",UG2,UH2))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",UZ2,UV2))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",UW2,UX2))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",UY2,UJ2))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",UK2,UL2))
if GetTriggerEvalCount(t)>11 then
set x0=(LoadReal(ZY,(V0I),(282)))
set y0=(LoadReal(ZY,(V0I),(283)))
set a0=(LoadReal(ZY,(V0I),(341)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,false)
call TriggerAddCondition(t,Condition(function UC2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(282),((x0)*1.0))
call SaveReal(ZY,(V0I),(283),((y0)*1.0))
call SaveReal(ZY,(V0I),(341),((a0)*1.0))
endif
set t=null
set XSI=null
return false
endfunction
function UM2 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
call TriggerRegisterTimerEvent(t,0.22,true)
call TriggerAddCondition(t,Condition(function UD2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XSI))*1.0))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveReal(ZY,(V0I),(282),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(283),((GetUnitY(XSI))*1.0))
call SaveReal(ZY,(V0I),(341),((a)*1.0))
set t=null
set XSI=null
endfunction
function UN2 takes nothing returns boolean
if GetSpellAbilityId()==1093746993 then
call UM2()
endif
return false
endfunction
function HP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UN2))
set t=null
endfunction
function US2 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call PWI(XSI,0)
set t=null
set XSI=null
return false
endfunction
function UT2 takes unit XSI,unit SP2,integer UR2,integer UP2 returns nothing
local trigger t
local integer V0I
local unit T0I
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",SP2,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",XSI,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",XSI,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",XSI,"hand,left"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",XSI,"hand,right"))
call ShowUnit(SP2,false)
call KillUnit(SP2)
call SaveInteger(ZY,(GetHandleId((XSI))),((4270)),(2))
if UP2>0 or UR2>0 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,9.1,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function US2))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call KKI(T0I,1093748537)
call SetUnitAbilityLevel(T0I,1093748537,UP2)
call IssueTargetOrder(T0I,"bloodlust",XSI)
call PWI(XSI,UR2)
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\RadianceHands.mdx",XSI,"weapon")))
endif
set t=null
set T0I=null
endfunction
function UQ2 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),OLI)==false then
if IsUnitIllusion(GetEnumUnit())==false then
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
set OTI=OTI+(OSI*10)
set ORI=ORI+5
else
set OTI=OTI+(OSI*3)
set ORI=ORI+1
endif
endif
call GroupAddUnit(OLI,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",GetEnumUnit(),"chest"))
set OQI=true
set OUI=true
call XNI(OMI,GetEnumUnit(),1,ONI)
set OQI=false
set OUI=false
endif
endfunction
function UU2 takes real I03,real II3,real I13,real IO3,real I23,real I33 returns real
local real I43
local real I53
local real I63
local real I73
local real I83
local real I93
local real IA3
local real REFLECTED_SCALED_V_X
local real REFLECTED_SCALED_V_Y
local real IB3
local real IC3
local real ID3
local real IE3
local real IF3
local real IG3
local real IH3
local real IZ3
set ID3=I13-I23
set IE3=IO3-I33
set IF3=-1*IE3
set IG3=ID3
set IH3=SquareRoot(IF3*IF3+IG3*IG3)
set IF3=IF3/IH3
set IG3=IG3/IH3
set I43=I03-I13
set I53=II3-IO3
set I63=SquareRoot(I43*I43+I53*I53)
set I73=I43/I63
set I83=I53/I63
set IZ3=I43*IF3+I53*IG3
set I93=-1*I03+2*I13+2*IF3*IZ3
set IA3=-1*II3+2*IO3+2*IG3*IZ3
set IB3=I23+I13-I93
set IC3=I33+IO3-IA3
return IB3
endfunction
function IV3 takes real I03,real II3,real I13,real IO3,real I23,real I33 returns real
local real I43
local real I53
local real I63
local real I73
local real I83
local real I93
local real IA3
local real REFLECTED_SCALED_V_X
local real REFLECTED_SCALED_V_Y
local real IB3
local real IC3
local real ID3
local real IE3
local real IF3
local real IG3
local real IH3
local real IZ3
set ID3=I13-I23
set IE3=IO3-I33
set IF3=-1*IE3
set IG3=ID3
set IH3=SquareRoot(IF3*IF3+IG3*IG3)
set IF3=IF3/IH3
set IG3=IG3/IH3
set I43=I03-I13
set I53=II3-IO3
set I63=SquareRoot(I43*I43+I53*I53)
set I73=I43/I63
set I83=I53/I63
set IZ3=I43*IF3+I53*IG3
set I93=-1*I03+2*I13+2*IF3*IZ3
set IA3=-1*II3+2*IO3+2*IG3*IZ3
set IB3=I23+I13-I93
set IC3=I33+IO3-IA3
return IC3
endfunction
function IW3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit SP2=(LoadUnitHandle(ZY,(V0I),(335)))
local real x0=(LoadReal(ZY,(V0I),(282)))
local real y0=(LoadReal(ZY,(V0I),(283)))
local real x1=GetUnitX(XSI)
local real y1=GetUnitY(XSI)
local real x2=GetUnitX(SP2)
local real y2=GetUnitY(SP2)
local real x3
local real y3
local real a
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local group g
local real d
local integer WTI=GetUnitAbilityLevel(XSI,1093747000)
local real IX3=(LoadReal(ZY,(V0I),(342)))
local real Q1I=(TimerGetElapsed(M))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ShowUnit(SP2,false)
call KillUnit(SP2)
call SaveInteger(ZY,(GetHandleId((XSI))),((4270)),(2))
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093747000 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093747000,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808458,false)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093808458 then
call SaveBoolean(ZY,(V0I),(249),(true))
call SetUnitAnimationByIndex(SP2,3)
endif
elseif JAI(x1,y1,x2,y2)<100 then
call UT2(XSI,SP2,(LoadInteger(ZY,(V0I),(344))),(LoadInteger(ZY,(V0I),(345))))
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093747000 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093747000,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808458,false)
elseif GetTriggerEvalCount(t)>400 or(LoadBoolean(ZY,(V0I),(249)))==true then
if GetTriggerEvalCount(t)==401 and(LoadBoolean(ZY,(V0I),(249)))==false then
call SetUnitAnimationByIndex(SP2,3)
endif
set g=ZJI()
set OSI=WTI
set OTI=(LoadInteger(ZY,(V0I),(344)))
set ORI=(LoadInteger(ZY,(V0I),(345)))
set ONI=80+40*WTI
set OMI=XSI
set OK=XSI
set OLI=BA2
call GroupEnumUnitsInRange(g,GetUnitX(SP2),GetUnitY(SP2),300,Condition(function SOI))
call ForGroup(g,function UQ2)
call ZYI(g)
set g=null
call SaveInteger(ZY,(V0I),(344),(OTI))
call SaveInteger(ZY,(V0I),(345),(ORI))
if((LoadInteger(ZY,(GetHandleId((XSI))),((4269))))==1)==false then
set a=Atan2(y1-y2,x1-x2)
call SetUnitFacing(SP2,a*bj_RADTODEG)
set x3=GetUnitX(SP2)+12*Cos(a)
set y3=GetUnitY(SP2)+12*Sin(a)
call SetUnitX(SP2,YEI(x3))
call SetUnitY(SP2,YHI(y3))
call SaveReal(ZY,(V0I),(282),((x1)*1.0))
call SaveReal(ZY,(V0I),(283),((y1)*1.0))
endif
else
set g=ZJI()
set OSI=WTI
set OTI=(LoadInteger(ZY,(V0I),(344)))
set ORI=(LoadInteger(ZY,(V0I),(345)))
set ONI=80+40*WTI
set OMI=XSI
set OK=XSI
set OLI=BA2
call GroupEnumUnitsInRange(g,GetUnitX(SP2),GetUnitY(SP2),300,Condition(function SOI))
call ForGroup(g,function UQ2)
call ZYI(g)
set g=null
call SaveInteger(ZY,(V0I),(344),(OTI))
call SaveInteger(ZY,(V0I),(345),(ORI))
if x0!=x1 or y0!=y1 then
set IX3=Q1I
call SaveReal(ZY,(V0I),(342),((IX3)*1.0))
endif
if((LoadInteger(ZY,(GetHandleId((XSI))),((4269))))==1)==false then
if IX3==Q1I then
set x3=UU2(x0,y0,x1,y1,x2,y2)
set y3=IV3(x0,y0,x1,y1,x2,y2)
set a=Atan2(y3-y2,x3-x2)*bj_RADTODEG
call SetUnitFacing(SP2,a)
call SetUnitX(SP2,YEI(x3))
call SetUnitY(SP2,YHI(y3))
call SaveReal(ZY,(V0I),(282),((x1)*1.0))
call SaveReal(ZY,(V0I),(283),((y1)*1.0))
endif
if(IX3+0.3)<Q1I then
call SaveInteger(ZY,(V0I),(343),(1))
call SetUnitAnimationByIndex(SP2,2)
elseif(IX3+0.3)>Q1I and(LoadInteger(ZY,(V0I),(343)))==1 then
call SaveInteger(ZY,(V0I),(343),(2))
call SetUnitAnimationByIndex(SP2,3)
elseif(LoadInteger(ZY,(V0I),(343)))==3 then
call SetUnitAnimationByIndex(SP2,2)
call SaveInteger(ZY,(V0I),(343),(1))
endif
else
call SaveInteger(ZY,(V0I),(343),(3))
endif
endif
set t=null
set XSI=null
set SP2=null
set BA2=null
return false
endfunction
function IY3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real x0=GetUnitX(XSI)
local real y0=GetUnitY(XSI)
local location l=GetSpellTargetLoc()
local real lx=GetLocationX(l)
local real ly=GetLocationY(l)
local real a=Atan2(ly-y0,lx-x0)
local real d=YQI(JAI(x0,y0,lx,ly),300)
local real x1=YEI(x0+d*Cos(a))
local real y1=YHI(y0+d*Sin(a))
local unit SP2=CreateUnit(GetOwningPlayer(XSI),1747990357,x1,y1,(a*bj_RADTODEG)-180)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",SP2,"chest"))
if GetUnitAbilityLevel(XSI,1093747524)>0 then
call KKI(SP2,1093747537)
endif
call UnitAddAbility(XSI,1093808458)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093747000,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808458,true)
call RemoveLocation(l)
set OPI[GetPlayerId(GetOwningPlayer(XSI))]=SP2
call SaveInteger(ZY,(GetHandleId((XSI))),((4270)),(1))
call KKI(SP2,1097625443)
call KKI(SP2,1097167980)
if(LoadBoolean(ZY,(GetHandleId(XSI)),(339)))==true then
call TriggerEvaluate((LoadTriggerHandle(ZY,(V0I),(338))))
endif
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IW3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(335),(SP2))
call SaveReal(ZY,(V0I),(282),((x0)*1.0))
call SaveReal(ZY,(V0I),(283),((y0)*1.0))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
call SaveInteger(ZY,(V0I),(343),(2))
call SaveReal(ZY,(V0I),(342),(((TimerGetElapsed(M))-5)*1.0))
call SaveBoolean(ZY,(V0I),(249),(false))
set t=null
set XSI=null
set SP2=null
endfunction
function IJ3 takes nothing returns boolean
if GetSpellAbilityId()==1093747000 then
call IY3()
endif
return false
endfunction
function HQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IJ3))
call YVI(1093748537)
set t=null
endfunction
function IK3 takes nothing returns nothing
local unit XTI=GetOrderTargetUnit()
local real x
local real y
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER then
set x=GetUnitX(GetOrderTargetUnit())
set y=GetUnitY(GetOrderTargetUnit())
else
set x=GetOrderPointX()
set y=GetOrderPointY()
endif
if JAI(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),x,y)<700 then
call KEI(FE,x,y)
endif
endfunction
function IL3 takes nothing returns boolean
if GetIssuedOrderId()==852040 then
call IK3()
endif
return false
endfunction
function IM3 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Condition(function K6I))
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function K6I))
call TriggerAddCondition(t,Condition(function IL3))
set t=null
endfunction
function IN3 takes nothing returns boolean
if GetLearnedSkill()==1093678658 and GetUnitAbilityLevel(GetTriggerUnit(),1093678658)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call IM3()
endif
return false
endfunction
function C01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function IN3))
set t=null
endfunction
function IS3 takes nothing returns boolean
return(GetLearnedSkill()==1093681483 or GetLearnedSkill()==1093748313)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function IT3 takes nothing returns nothing
if(GetUnitAbilityLevel(GetTriggerUnit(),1093681483)==1 or GetUnitAbilityLevel(GetTriggerUnit(),1093748313)==1)then
call KKI(GetTriggerUnit(),1093752646)
endif
endfunction
function BP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function IS3))
call TriggerAddAction(t,function IT3)
endfunction
function IR3 takes nothing returns boolean
if(GetSpellAbilityId()==1093681485 or GetSpellAbilityId()==1093681459 or GetSpellAbilityId()==1093681460 or GetSpellAbilityId()==1093677652 or GetSpellAbilityId()==1093748314 or GetSpellAbilityId()==1093752646)then
return true
elseif GetSpellAbilityId()==1093681483 or GetSpellAbilityId()==1093748313 then
if GetUnitAbilityLevel(GetTriggerUnit(),1093752646)==0 then
call KKI(GetTriggerUnit(),1093752646)
endif
endif
return false
endfunction
function IP3 takes nothing returns boolean
if(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)then
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)then
if(GetUnitAbilityLevelSwapped(1093678162,GetFilterUnit())==0)then
return true
endif
endif
endif
return false
endfunction
function IQ3 takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"locustswarm")
endfunction
function IU3 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),300.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
function O03 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),450.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
function OI3 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),600.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
function O13 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),750.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
function OO3 takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==A1I and GetUnitTypeId(GetFilterUnit())==AII and KMI(GetFilterUnit())==false
endfunction
function O23 takes player p,integer WJI,real x,real y returns nothing
local group g=ZJI()
set A1I=p
set AII=WJI
call GroupEnumUnitsInRange(g,x,y,716,Condition(function OO3))
call ForGroup(g,function IQ3)
call ZYI(g)
set g=null
endfunction
function O33 takes nothing returns nothing
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local group U4I
call DisableTrigger(A0I)
set CN=true
if(GetSpellAbilityId()==1093681485)then
call JKI("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call KZI(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,425,Condition(function IP3))
call ForGroup(U4I,function IU3)
call RemoveUnit(GetTriggerUnit())
call ZYI(U4I)
endif
if(GetSpellAbilityId()==1093681459)then
call JKI("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call KZI(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,435,Condition(function IP3))
call ForGroup(U4I,function O03)
call RemoveUnit(GetTriggerUnit())
call ZYI(U4I)
endif
if(GetSpellAbilityId()==1093681460)then
call JKI("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call KZI(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,450,Condition(function IP3))
call ForGroup(U4I,function OI3)
call RemoveUnit(GetTriggerUnit())
call ZYI(U4I)
endif
if(GetSpellAbilityId()==1093748314)then
call JKI("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call KZI(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,450,Condition(function IP3))
call ForGroup(U4I,function O13)
call RemoveUnit(GetTriggerUnit())
call ZYI(U4I)
endif
if(GetSpellAbilityId()==1093677652)then
set U4I=ZJI()
set bj_groupEnumTypeId=1865429304
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(GetTriggerUnit()),filterGetUnitsOfPlayerAndTypeId)
call ForGroup(U4I,function IQ3)
call ZYI(U4I)
set U4I=ZJI()
set bj_groupEnumTypeId=1865429042
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(GetTriggerUnit()),filterGetUnitsOfPlayerAndTypeId)
call ForGroup(U4I,function IQ3)
call ZYI(U4I)
set U4I=ZJI()
set bj_groupEnumTypeId=1865429058
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(GetTriggerUnit()),filterGetUnitsOfPlayerAndTypeId)
call ForGroup(U4I,function IQ3)
call ZYI(U4I)
set U4I=ZJI()
set bj_groupEnumTypeId=1865429314
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(GetTriggerUnit()),filterGetUnitsOfPlayerAndTypeId)
call ForGroup(U4I,function IQ3)
call ZYI(U4I)
endif
if(GetSpellAbilityId()==1093752646)then
set x=GetSpellTargetX()
set y=GetSpellTargetY()
call O23(GetOwningPlayer(GetTriggerUnit()),1865429304,x,y)
call O23(GetOwningPlayer(GetTriggerUnit()),1865429042,x,y)
call O23(GetOwningPlayer(GetTriggerUnit()),1865429058,x,y)
call O23(GetOwningPlayer(GetTriggerUnit()),1865429314,x,y)
endif
set CN=false
call EnableTrigger(A0I)
endfunction
function O43 takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local group U4I
if id==1865429304 then
call JKI("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,425,Condition(function IP3))
call ForGroup(U4I,function IU3)
call ZYI(U4I)
endif
if id==1865429042 then
call JKI("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,435,Condition(function IP3))
call ForGroup(U4I,function O03)
call ZYI(U4I)
endif
if id==1865429058 then
call JKI("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,450,Condition(function IP3))
call ForGroup(U4I,function OI3)
call ZYI(U4I)
endif
if id==1865429314 then
call JKI("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,450,Condition(function IP3))
call ForGroup(U4I,function O13)
call ZYI(U4I)
endif
endfunction
function O53 takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
if id==1865429304 or id==1865429042 or id==1865429058 or id==1865429314 then
call O43()
endif
return false
endfunction
function BQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddAction(t,function O33)
call TriggerAddCondition(t,Condition(function IR3))
call NOI("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav")
set A0I=CreateTrigger()
call K7I(A0I,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(A0I,Condition(function O53))
endfunction
function O63 takes nothing returns boolean
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0.5 and(GetUnitTypeId(GetFilterUnit())==1848651855 or GetUnitTypeId(GetFilterUnit())==1848651856 or GetUnitTypeId(GetFilterUnit())==1848651857 or GetUnitTypeId(GetFilterUnit())==1848651854)then
set AOI=AOI+1
endif
return false
endfunction
function O73 takes nothing returns boolean
local group g=ZJI()
set AOI=0
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function O63))
if AOI>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848657475)+": "+I2S(AOI))
endif
call ZYI(g)
set g=null
return false
endfunction
function O83 takes nothing returns boolean
if((GetUnitTypeId(GetTriggerUnit())==1848651855))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651856))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651857))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651854))then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==1865429304 or GetUnitTypeId(GetTriggerUnit())==1865429042 or GetUnitTypeId(GetTriggerUnit())==1865429058 or GetUnitTypeId(GetTriggerUnit())==1865429314 then
if SI0[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]then
endif
endif
return false
endfunction
function O93 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
if((GetUnitTypeId(GetFilterUnit())==1848651855))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651856))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651857))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651854))then
return true
endif
endif
return false
endfunction
function OA3 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1211117637 or GetUnitTypeId(GetFilterUnit())==1211117639 or GetUnitTypeId(GetFilterUnit())==1211117638 or GetUnitTypeId(GetFilterUnit())==1160786000 or GetUnitTypeId(GetFilterUnit())==1311780930 or GetUnitTypeId(GetFilterUnit())==1430468144 or GetUnitTypeId(GetFilterUnit())==1162032951 or GetUnitTypeId(GetFilterUnit())==1429221456 or GetUnitTypeId(GetFilterUnit())==1160786510 or GetUnitTypeId(GetFilterUnit())==1160786511 or GetUnitTypeId(GetFilterUnit())==1328558390 or GetUnitTypeId(GetFilterUnit())==1328558391 or GetUnitTypeId(GetFilterUnit())==1160786502)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(OK))
endfunction
function OB3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit OC3=(LoadUnitHandle(ZY,(V0I),(347)))
local group g
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(AddSpecialEffect("war3mapImported\\NewGroundEX.mdx",GetUnitX(OC3),GetUnitY(OC3)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set OK=OC3
call GroupEnumUnitsInRange(g,GetUnitX(OC3),GetUnitY(OC3),200,Condition(function OA3))
if FirstOfGroup(g)!=null then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitExploded(OC3,true)
call KillUnit(OC3)
endif
call ZYI(g)
endif
set t=null
set OC3=null
set g=null
return false
endfunction
function OD3 takes nothing returns nothing
local integer V0I=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local group U4I=ZJI()
local integer OE3=(LoadInteger(ZY,(V0I),(346)))
local integer OF3=0
local unit OG3
local integer OH3
local unit OB1
local integer OZ3
local integer W5I
local integer W6I
local trigger t=CreateTrigger()
call GroupEnumUnitsInRect(U4I,bj_mapInitialPlayableArea,Condition(function O93))
call TriggerRegisterTimerEvent(t,0.4,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function OB3))
call SaveUnitHandle(ZY,(GetHandleId(t)),(347),(GetTriggerUnit()))
set OE3=(OE3+1)
call StartTimerBJ((LoadTimerHandle(ZY,(V0I),(1500+OE3))),false,15000.00)
call SaveUnitHandle(ZY,(V0I),(1600+OE3),(GetTriggerUnit()))
set OF3=CountUnitsInGroup(U4I)
if(OF3>20)then
set OH3=99999
set W5I=1
set W6I=OE3
loop
exitwhen W5I>W6I
set OB1=(LoadUnitHandle(ZY,(V0I),(1600+W5I)))
set OZ3=R2I(TimerGetRemaining((LoadTimerHandle(ZY,(V0I),(1500+W5I)))))
if(GetUnitState(OB1,UNIT_STATE_LIFE)>0 and OZ3<OH3)then
set OG3=OB1
set OH3=OZ3
endif
set W5I=W5I+1
endloop
call ExplodeUnitBJ(OG3)
endif
call SaveInteger(ZY,(V0I),(346),(OE3))
call ZYI(U4I)
endfunction
function BU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-st",true)
call TriggerAddCondition(t,Condition(function O73))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function O83))
call TriggerAddAction(t,function OD3)
set t=null
endfunction
function OV3 takes nothing returns boolean
return GetSpellAbilityId()==1093678645
endfunction
function OW3 takes nothing returns nothing
local integer W5I=0
local integer W6I=5
local integer array OX3
local player array OY3
local integer TTI
local item P1I
set OX3[0]=0
set OX3[1]=0
set OX3[2]=0
set OX3[3]=0
set OX3[4]=0
set OX3[5]=0
call DisableTrigger(JX0)
loop
exitwhen W5I>W6I
set TTI=RWI(UnitItemInSlot(GetTriggerUnit(),W5I))
if TTI==ZF0 or TTI==ZG0 or TTI==ZH0 or TTI==ZZ0 or TTI==ZV0 or TTI==ZW0 or TTI==Z50 or TTI==ZR0 or TTI==ZP0 or TTI==ZQ0 or TTI==HL0 or TTI==VC0 or TTI==VG0 or TTI==W40 then
set OX3[W5I]=GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),W5I))
set OY3[W5I]=GetItemPlayer(UnitItemInSlot(GetTriggerUnit(),W5I))
call RemoveItem(UnitItemInSlot(GetTriggerUnit(),W5I))
endif
set W5I=W5I+1
endloop
call UnitResetCooldown(GetTriggerUnit())
set W5I=0
set W6I=5
loop
exitwhen W5I>W6I
if OX3[W5I]>0 then
set P1I=CreateItem(OX3[W5I],0,0)
call SetItemPlayer(P1I,OY3[W5I],false)
call SetItemUserData(P1I,1)
call UnitAddItem(GetTriggerUnit(),P1I)
endif
set W5I=W5I+1
endloop
call EnableTrigger(JX0)
set P1I=null
endfunction
function CO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(t,Condition(function OV3))
call TriggerAddAction(t,function OW3)
endfunction
function OJ3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer i=0
local real a=0
local real r=0
local integer WTI=GetUnitAbilityLevel(V8I,1093681745)
call KKI(T0I,1093678406)
call SetUnitAbilityLevel(T0I,1093678406,WTI)
loop
exitwhen i>40
exitwhen IssuePointOrder(T0I,"stampede",x+r*Cos(a),y+r*Sin(a))
set i=i+1
set a=a+0.4
set r=r+10
endloop
call RemoveLocation(l)
set V8I=null
set T0I=null
set l=null
endfunction
function OK3 takes nothing returns boolean
if GetSpellAbilityId()==1093681745 then
call OJ3()
endif
return false
endfunction
function CI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OK3))
set t=null
endfunction
function OL3 takes nothing returns boolean
return GetSpellAbilityId()==1093678137
endfunction
function OM3 takes nothing returns nothing
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),1093678137)*80,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function C11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OL3))
call TriggerAddAction(t,function OM3)
endfunction
function ON3 takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==true then
call XNI(A2I,GetEnumUnit(),1,A3I/3)
else
call XNI(A2I,GetEnumUnit(),1,A3I)
endif
endfunction
function OS3 takes unit XSI,real x,real y,real r,real d returns nothing
local group g=ZJI()
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,r,Condition(function S8I))
set A2I=XSI
set A3I=d
call ForGroup(g,function ON3)
call ZYI(g)
set g=null
endfunction
function OT3 takes nothing returns boolean
if((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and XBI(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit()))then
return true
endif
return false
endfunction
function OR3 takes unit V8I returns unit
local unit XSI=null
local group g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),275,Condition(function OT3))
call GroupRemoveUnit(g,V8I)
set XSI=GroupPickRandomUnit(g)
call ZYI(g)
set OK=XSI
set XSI=null
set g=null
return OK
endfunction
function OP3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local real x0=(LoadReal(ZY,(V0I),(282)))
local real y0=(LoadReal(ZY,(V0I),(283)))
local real x1=GetUnitX(XSI)
local real y1=GetUnitY(XSI)
local real x2=GetUnitX(XTI)
local real y2=GetUnitY(XTI)
local real B92
local real OQ3
local real GL2
local real AW2
local real KUI
local real L0I
local location l
if JAI(x0,y0,x2,y2)>1000 then
set x2=x0
set y2=y0
endif
set B92=JPI(x1,y1,x2,y2)
set OQ3=JAI(x1,y1,x2,y2)
set GL2=OQ3/IMaxBJ((51-ZLI),1)
set AW2=(ZLI-25)*(ZLI-25)
set KUI=x1+GL2*Cos(B92*bj_DEGTORAD)
set L0I=y1+GL2*Sin(B92*bj_DEGTORAD)
if ZLI<51 then
if XGI(XSI)==false then
call SetUnitFlyHeight(XSI,775-AW2,0)
endif
call SetUnitPosition(XSI,KUI,L0I)
else
if XGI(XSI)==false then
call SetUnitFlyHeight(XSI,GetUnitDefaultFlyHeight(XSI),0)
endif
call PauseUnit(XSI,false)
call SetUnitPathing(XSI,true)
call SetUnitPosition(XSI,x2,y2)
call SaveInteger(ZY,(GetHandleId((XSI))),((4268)),(2))
set l=Location(x2,y2)
call TerrainDeformationRippleBJ(0.2,true,l,1.00,300.00,96.00,1,64.00)
call RemoveLocation(l)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(XSI),GetUnitY(XSI)))
if IsUnitAlly(XSI,GetOwningPlayer(V8I))then
else
if(REI((V8I),F20[JO0])!=null)then
call XNI(V8I,XSI,1,(0.2+0.15*(GetUnitAbilityLevel(V8I,1093682009)+1))*75*GetUnitAbilityLevel(V8I,1093681754))
else
call XNI(V8I,XSI,1,(0.2+0.15*GetUnitAbilityLevel(V8I,1093682009))*75*GetUnitAbilityLevel(V8I,1093681754))
endif
endif
call KCI(x2,y2,300)
call OS3(V8I,x2,y2,300,75*GetUnitAbilityLevel(V8I,1093681754))
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
set XSI=null
set XTI=null
set l=null
return false
endfunction
function OU3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XSI=A4I
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SetUnitAnimationByIndex(V8I,4)
call PauseUnit(XSI,true)
call SetUnitPathing(XSI,false)
if XGI(XSI)==false then
call KKI(XSI,1097691750)
call UnitRemoveAbility(XSI,1097691750)
endif
call SaveInteger(ZY,(GetHandleId((XSI))),((4268)),(1))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",XSI,"origin")))
call SaveReal(ZY,(V0I),(282),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(283),((GetUnitY(XTI))*1.0))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function OP3))
set V8I=null
set XSI=null
set XTI=null
set t=null
endfunction
function A03 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XSI=OR3(V8I)
local unit XTI=GetSpellTargetUnit()
set A4I=XSI
if XSI==null then
call Y8I(V8I)
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848656961))
elseif GetOwningPlayer(XTI)==GetOwningPlayer(V8I)then
call Y8I(V8I)
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848656729))
endif
set V8I=null
set XSI=null
set XTI=null
endfunction
function AI3 takes nothing returns boolean
if GetSpellAbilityId()==1093681754 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call A03()
else
call OU3()
endif
endif
return false
endfunction
function C41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AI3))
set t=null
endfunction
function A13 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer AO3=(LoadInteger(ZY,(V0I),(375)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer ZLI
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and GetEventDamage()>20 then
set ZLI=(LoadInteger(ZY,(GetHandleId(XSI)),(674)))
if((LoadInteger(ZY,(GetHandleId((XSI))),((4297))))==1)==false then
call V5I(XSI,4297,0.1)
call SaveInteger(ZY,(GetHandleId(XSI)),(674),(ZLI+1))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function A23 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local trigger t2
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer ZLI=(LoadInteger(ZY,(GetHandleId(XSI)),(674)))
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and ZLI<6 then
if GetAttacker()==XSI and((LoadInteger(ZY,(GetHandleId((XSI))),((4297))))==1)==false then
set t2=CreateTrigger()
call TriggerRegisterUnitEvent(t2,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t2,1,false)
call TriggerAddCondition(t2,Condition(function A13))
call SaveUnitHandle(ZY,(GetHandleId(t2)),(2),(XSI))
endif
endif
if ZLI>5 then
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(674),(0))
call UnitRemoveAbility(XSI,1093752625)
if(LoadInteger(ZY,(V0I),(34)))==1 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED then
call SaveInteger(ZY,(V0I),(34),(1))
if ZLI>5 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
call UnitRemoveAbility(XSI,1093752391)
if(REI((XSI),F20[JO0])!=null)then
call KKI(XSI,1093752392)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093752392,true)
endif
set t=null
set XSI=null
return false
endfunction
function WarClub_Animation takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEvalCount(t)==1 then
call SetUnitTimeScalePercent(XSI,250)
else
call SetUnitTimeScalePercent(XSI,100)
call SetUnitAnimationByIndex(XSI,12)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
return false
endfunction
function A33 takes nothing returns boolean
local trigger t
if GetSpellAbilityId()==1093752392 then
call V5I(GetTriggerUnit(),4296,29.9)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752392,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752391,true)
call KKI(GetTriggerUnit(),1093752391)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752625,false)
call KKI(GetTriggerUnit(),1093752625)
call IssueTargetOrder(GetTriggerUnit(),"grabtree",GetSpellTargetDestructable())
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30,false)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function A23))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(GetTriggerUnit()))
call SaveInteger(ZY,(GetHandleId(t)),(34),(0))
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(674),(0))
set t=null
endif
return false
endfunction
function A43 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if(REI((XSI),F20[JO0])!=null)then
if((LoadInteger(ZY,(GetHandleId((XSI))),((4296))))==1)==false then
if GetUnitAbilityLevel(XSI,1093752392)==0 and GetUnitAbilityLevel(XSI,1093752391)==0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093752392,true)
call KKI(XSI,1093752392)
endif
endif
else
call UnitRemoveAbility(XSI,1093752392)
call UnitRemoveAbility(XSI,1093752391)
endif
set t=null
return false
endfunction
function K5O takes nothing returns nothing
local unit XSI=AM
local unit XTI=BM
local unit T0I=(LoadUnitHandle(ZY,(GetHandleId(XSI)),(297)))
call SaveUnitHandle(ZY,(GetHandleId(XTI)),(297),(T0I))
call SetUnitOwner(T0I,GetOwningPlayer(XTI),true)
set XSI=null
set XTI=null
set T0I=null
endfunction
function Y31 takes nothing returns nothing
local unit V8I=WK
local unit T0I=(LoadUnitHandle(ZY,(GetHandleId(V8I)),(297)))
if T0I!=null and GetUnitTypeId(T0I)==1697657174 then
call RemoveUnit(T0I)
endif
endfunction
function A53 takes nothing returns boolean
return GetLearnedSkill()==1093682009 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function A63 takes nothing returns nothing
local unit A73=(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(298)))
local integer WTI=GetUnitAbilityLevel(A73,1093682009)
if GetUnitState(A73,UNIT_STATE_LIFE)>1 then
call SetUnitScale(A73,0.5+0.25*WTI,0.5+0.25*WTI,0.5+0.25*WTI)
endif
endfunction
function A83 takes nothing returns boolean
local integer WTI
if IsUnitIllusion(GetTriggerUnit())and GetUnitTypeId(GetTriggerUnit())==1432580716 then
set WTI=GetUnitAbilityLevel((LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(298))),1093682009)
call SetUnitScale(GetTriggerUnit(),0.5+0.25*WTI,0.5+0.25*WTI,0.5+0.25*WTI)
endif
return false
endfunction
function A93 takes nothing returns nothing
local trigger t
local unit A73=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(A73,1093682009)
local unit T0I
local unit V8I=GetTriggerUnit()
local region AOO
if WTI==1 then
set T0I=CreateUnit(GetOwningPlayer(V8I),1697657174,0,0,0)
call KKI(T0I,1093742658)
call SaveUnitHandle(ZY,(GetHandleId(V8I)),(297),(T0I))
else
set T0I=(LoadUnitHandle(ZY,(GetHandleId(V8I)),(297)))
endif
if WTI==2 then
call UnitRemoveAbility(T0I,1093742658)
call KKI(T0I,1093742657)
elseif WTI==3 then
call UnitRemoveAbility(T0I,1093742658)
call UnitRemoveAbility(T0I,1093742657)
call KKI(T0I,1093687891)
endif
call SetPlayerTechResearched(GetOwningPlayer(A73),1378889797,WTI)
if WTI==1 then
set t=CreateTrigger()
call TriggerAddAction(t,function A63)
call TriggerRegisterTimerEvent(t,2.00,true)
call SaveUnitHandle(ZY,(GetHandleId(t)),(298),(A73))
call SetUnitScale(A73,0.5+0.25*WTI,0.5+0.25*WTI,0.5+0.25*WTI)
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,GetWorldBounds())
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
call TriggerAddCondition(t,Condition(function A83))
call SaveUnitHandle(ZY,(GetHandleId(t)),(298),(A73))
set t=null
set AOO=null
set t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(A73))
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function A43))
set t=null
endif
set V8I=null
set T0I=null
endfunction
function C21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function A53))
call TriggerAddAction(t,function A93)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function A33))
set t=null
endfunction
function AA3 takes nothing returns boolean
local unit XSI=GetTriggerUnit()
local unit XTI=GetAttacker()
local integer WTI=GetUnitAbilityLevel(XSI,1093744977)
local unit T0I
if GetRandomInt(1,100)<=WTI*6 and J8I(XSI,XTI)<325 then
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093681750)
call SetUnitAbilityLevel(T0I,1093681750,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
set T0I=null
endif
set XSI=null
set XTI=null
return false
endfunction
function AB3 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XSI=GetTriggerUnit()
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function AA3))
set t=null
set XSI=null
endfunction
function AC3 takes nothing returns boolean
if GetLearnedSkill()==1093744977 and GetUnitAbilityLevel(GetTriggerUnit(),1093744977)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call AB3()
endif
return false
endfunction
function C51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AC3))
set t=null
endfunction
function AD3 takes nothing returns boolean
if((LoadInteger(ZY,(GetHandleId((GetFilterUnit()))),((4268))))==1)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(A5I))==true then
call XNI(A5I,GetFilterUnit(),1,A6I)
endif
return false
endfunction
function AE3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,x,y,0)
local integer WTI=GetUnitAbilityLevel(V8I,1093684300)
local group g=ZJI()
call KKI(T0I,1093742666)
call SetUnitAbilityLevel(T0I,1093742666,WTI)
set A5I=V8I
if WTI==1 then
set A6I=25
elseif WTI==2 then
set A6I=45
elseif WTI==3 then
set A6I=65
elseif WTI==4 then
set A6I=75
endif
call GroupEnumUnitsInRange(g,x,y,275+24,Condition(function AD3))
call ZYI(g)
if GetTriggerEvalCount(t)>6 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
set T0I=null
set g=null
return false
endfunction
function AF3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
local integer WTI=GetUnitAbilityLevel(V8I,1093684300)
call KKI(T0I,1093742669)
call SetUnitAbilityLevel(T0I,1093742669,WTI)
call IssuePointOrder(T0I,"clusterrockets",GetLocationX(l),GetLocationY(l))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function AE3))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(6),((GetLocationX(l))*1.0))
call SaveReal(ZY,(V0I),(7),((GetLocationY(l))*1.0))
call TriggerEvaluate(t)
call RemoveLocation(l)
set V8I=null
set l=null
set t=null
set T0I=null
endfunction
function AG3 takes nothing returns boolean
if GetSpellAbilityId()==1093684300 then
call AF3()
endif
return false
endfunction
function C31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AG3))
set t=null
endfunction
function AH3 takes nothing returns nothing
if GetEnumUnit()==GetTriggerUnit()then
call MQI(GetEnumUnit(),1093687365,A8I,A7I*2,1110454338)
else
call MQI(GetEnumUnit(),1093687365,A8I,A7I,1110454338)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093687365,false)
endfunction
function AZ3 takes nothing returns nothing
local group g=ZJI()
set A8I=GetUnitAbilityLevel(GetTriggerUnit(),1093748042)
set A7I=5
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function SHI))
call ForGroup(g,function AH3)
call ZYI(g)
set g=null
endfunction
function AV3 takes nothing returns boolean
if GetSpellAbilityId()==1093748042 then
call AZ3()
endif
return false
endfunction
function CV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AV3))
set t=null
endfunction
function AW3 takes nothing returns boolean
return GetSpellAbilityId()==1093681733
endfunction
function AX3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitAbilityLevel(XSI,1093679429,GetUnitAbilityLevel(XSI,1093681733))
call UnitRemoveAbility(XSI,1110456665)
set t=null
set XSI=null
return false
endfunction
function AY3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function AX3))
set t=null
set XSI=null
endfunction
function CF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AW3))
call TriggerAddAction(t,function AY3)
endfunction
function AJ3 takes nothing returns boolean
return GetLearnedSkill()==1093681733 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function AK3 takes nothing returns nothing
call SetUnitAbilityLevel(GetTriggerUnit(),1093679429,GetUnitAbilityLevel(GetTriggerUnit(),1093681733))
endfunction
function CG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AJ3))
call TriggerAddAction(t,function AK3)
endfunction
constant function BeastRage_AbilityCode takes nothing returns integer
return 1093685040
endfunction
constant function BeastRage_EffectCode takes nothing returns integer
return 1093684826
endfunction
function AL3 takes nothing returns boolean
return GetUnitAbilityLevel(GetAttacker(),(1093685040))>0 and((LoadInteger(ZY,(GetHandleId((GetAttacker()))),((4271))))==1)==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function AM3 takes nothing returns nothing
local unit SF1=GetAttacker()
local unit XTI=GetTriggerUnit()
local integer V0I=GetHandleId(SF1)
local integer AN3=(LoadInteger(ZY,(V0I),(237)))
local unit AS3=ZGI(AN3)
local integer CI2=YTI((LoadInteger(ZY,(V0I),(236))),0)
local integer WTI=GetUnitAbilityLevel(SF1,(1093685040))
if AS3!=XTI then
set CI2=1
else
set CI2=YSI(CI2+1,2+WTI)
endif
call YLI(SF1,(1093684826),CI2)
call SaveInteger(ZY,(V0I),(236),(CI2))
if AS3!=XTI then
call ZFI(AN3)
set AN3=ZZI(XTI)
call SaveInteger(ZY,(V0I),(237),(AN3))
endif
call V5I(SF1,4271,0.4)
endfunction
function CH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function AL3))
call TriggerAddAction(t,function AM3)
call YVI((1093684826))
endfunction
function AT3 takes unit XSI,unit XTI,unit T0I,integer WTI returns nothing
call SetUnitOwner(T0I,GetOwningPlayer(XTI),false)
call SetUnitAbilityLevel(T0I,1093808463,WTI)
call IssueTargetOrder(T0I,"curse",XTI)
call XNI(XSI,XTI,1,75+50*WTI)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",XTI,"overhead"))
endfunction
function AR3 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),ACI)==false then
call GroupAddUnit(ACI,GetEnumUnit())
call AT3(A9I,GetEnumUnit(),AAI,ADI)
endif
endfunction
function AP3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit AQ3=(LoadUnitHandle(ZY,(V0I),(675)))
local unit AU3=(LoadUnitHandle(ZY,(V0I),(676)))
local real a=(LoadReal(ZY,(V0I),(13)))
local real d=(LoadReal(ZY,(V0I),(433)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local group g=ZJI()
if GetTriggerEvalCount(t)<=50 then
set a=a+20
set d=d+7
call SaveReal(ZY,(V0I),(13),((a)*1.0))
call SaveReal(ZY,(V0I),(433),((d)*1.0))
elseif GetTriggerEvalCount(t)<=100 then
set a=a+20
set d=d-7
call SaveReal(ZY,(V0I),(13),((a)*1.0))
call SaveReal(ZY,(V0I),(433),((d)*1.0))
endif
call SetUnitX(AQ3,YEI(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(AQ3,YHI(y+d*Sin(a*bj_DEGTORAD)))
set a=a+180
call SetUnitX(AU3,YEI(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(AU3,YHI(y+d*Sin(a*bj_DEGTORAD)))
set OK=XSI
set A9I=XSI
set AAI=T0I
set ACI=BA2
set ADI=WTI
call GroupEnumUnitsInRange(g,GetUnitX(AQ3),GetUnitY(AQ3),125,Condition(function SOI))
call ForGroup(g,function AR3)
set OK=XSI
call GroupEnumUnitsInRange(g,GetUnitX(AU3),GetUnitY(AU3),125,Condition(function SOI))
call ForGroup(g,function AR3)
call ZYI(g)
if GetTriggerEvalCount(t)>100 then
call KillUnit(AQ3)
call KillUnit(AU3)
call KillUnit(T0I)
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set AQ3=null
set AU3=null
set T0I=null
return false
endfunction
function B03 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit AQ3=CreateUnit(GetOwningPlayer(XSI),1697657433,x,y,0)
local unit AU3=CreateUnit(GetOwningPlayer(XSI),1697657433,x,y,0)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call UnitAddAbility(T0I,1093808463)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(675),(AQ3))
call SaveUnitHandle(ZY,(V0I),(676),(AU3))
call SaveReal(ZY,(V0I),(13),((0)*1.0))
call SaveReal(ZY,(V0I),(433),((0)*1.0))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(XSI,1093808462)))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function AP3))
set XSI=null
set AQ3=null
set AU3=null
set t=null
set T0I=null
endfunction
function BI3 takes unit XSI,unit XTI,unit T0I,integer WTI returns nothing
call SetUnitOwner(T0I,GetOwningPlayer(XTI),false)
call SetUnitAbilityLevel(T0I,1093808464,WTI)
call IssueTargetOrder(T0I,"slow",XTI)
call XNI(XSI,XTI,1,75)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",XTI,"overhead"))
endfunction
function B13 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),ACI)==false and ABI!=null and KMI(ABI)==false then
call GroupAddUnit(ACI,GetEnumUnit())
call BI3(A9I,GetEnumUnit(),AAI,ADI)
endif
endfunction
function BO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local unit AQ3=(LoadUnitHandle(ZY,(V0I),(393)))
local unit AU3=(LoadUnitHandle(ZY,(V0I),(394)))
local unit B23=(LoadUnitHandle(ZY,(V0I),(395)))
local unit B33=(LoadUnitHandle(ZY,(V0I),(396)))
local unit B43=(LoadUnitHandle(ZY,(V0I),(397)))
local real a=(LoadReal(ZY,(V0I),(13)))-12.5
local real d=(LoadReal(ZY,(V0I),(433)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit CN2
local group g
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
set d=d+900/20.0
call SaveReal(ZY,(V0I),(433),((d)*1.0))
call SetUnitX(AQ3,YEI(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(AQ3,YHI(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(AU3,YEI(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(AU3,YHI(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(B23,YEI(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(B23,YHI(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(B33,YEI(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(B33,YHI(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(B43,YEI(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(B43,YHI(y+d*Sin(a*bj_DEGTORAD)))
set A9I=XSI
set AAI=T0I
set ACI=BA2
set ADI=WTI
set CN2=AQ3
if CN2!=null and KMI(CN2)==false then
set x=GetUnitX(CN2)
set y=GetUnitY(CN2)
set ABI=CN2
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function SOI))
call ForGroup(g,function B13)
call ZYI(g)
endif
set CN2=AU3
if CN2!=null and KMI(CN2)==false then
set x=GetUnitX(CN2)
set y=GetUnitY(CN2)
set ABI=CN2
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function SOI))
call ForGroup(g,function B13)
call ZYI(g)
endif
set CN2=B23
if CN2!=null and KMI(CN2)==false then
set x=GetUnitX(CN2)
set y=GetUnitY(CN2)
set ABI=CN2
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function SOI))
call ForGroup(g,function B13)
call ZYI(g)
endif
set CN2=B33
if CN2!=null and KMI(CN2)==false then
set x=GetUnitX(CN2)
set y=GetUnitY(CN2)
set ABI=CN2
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function SOI))
call ForGroup(g,function B13)
call ZYI(g)
endif
set CN2=B43
if CN2!=null and KMI(CN2)==false then
set x=GetUnitX(CN2)
set y=GetUnitY(CN2)
set ABI=CN2
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function SOI))
call ForGroup(g,function B13)
call ZYI(g)
endif
if GetTriggerEvalCount(t)>20 then
call KillUnit(AQ3)
call KillUnit(AU3)
call KillUnit(B23)
call KillUnit(B33)
call KillUnit(B43)
call KillUnit(T0I)
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set AQ3=null
set AU3=null
set B23=null
set B33=null
set B43=null
set T0I=null
return false
endfunction
function B53 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x0=GetUnitX(XSI)
local real y0=GetUnitY(XSI)
local real x1=GetSpellTargetX()
local real y1=GetSpellTargetY()
local real a=JPI(x0,y0,x1,y1)
local unit AQ3=CreateUnit(GetOwningPlayer(XSI),1697657434,x0,y0,a-12.5)
local unit AU3=CreateUnit(GetOwningPlayer(XSI),1697657434,x0,y0,a-6.25)
local unit B23=CreateUnit(GetOwningPlayer(XSI),1697657434,x0,y0,a)
local unit B33=CreateUnit(GetOwningPlayer(XSI),1697657434,x0,y0,a+6.25)
local unit B43=CreateUnit(GetOwningPlayer(XSI),1697657434,x0,y0,a+12.5)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x0,y0,0)
call UnitAddAbility(T0I,1093808464)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(393),(AQ3))
call SaveUnitHandle(ZY,(V0I),(394),(AU3))
call SaveUnitHandle(ZY,(V0I),(395),(B23))
call SaveUnitHandle(ZY,(V0I),(396),(B33))
call SaveUnitHandle(ZY,(V0I),(397),(B43))
call SaveReal(ZY,(V0I),(6),((x0)*1.0))
call SaveReal(ZY,(V0I),(7),((y0)*1.0))
call SaveReal(ZY,(V0I),(433),((0)*1.0))
call SaveReal(ZY,(V0I),(13),((a)*1.0))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(XSI,1093808461)))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function BO3))
set XSI=null
set AQ3=null
set AU3=null
set B23=null
set B33=null
set B43=null
set t=null
set T0I=null
endfunction
function B63 takes nothing returns boolean
if GetSpellAbilityId()==1093808461 then
call B53()
elseif GetSpellAbilityId()==1093808462 then
call B03()
endif
return false
endfunction
function B73 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093808460)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
if GetUnitTypeId(XSI)==1311781175 or GetUnitTypeId(XSI)==1311781442 then
if((LoadInteger(ZY,(GetHandleId((XSI))),((4416))))==1)==false or p!=GetOwningPlayer(XSI)then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808462,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808461,false)
call SaveInteger(ZY,(GetHandleId((XSI))),((4416)),(1))
call SaveInteger(ZY,(GetHandleId((XSI))),((4417)),(2))
if p!=GetOwningPlayer(XSI)then
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(XSI)))
endif
endif
if GetUnitAbilityLevel(XSI,1093808462)!=WTI then
call SetUnitAbilityLevel(XSI,1093808462,WTI)
endif
elseif GetUnitTypeId(XSI)==1311781174 then
if((LoadInteger(ZY,(GetHandleId((XSI))),((4417))))==1)==false or p!=GetOwningPlayer(XSI)then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808462,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808461,true)
call SaveInteger(ZY,(GetHandleId((XSI))),((4417)),(1))
call SaveInteger(ZY,(GetHandleId((XSI))),((4416)),(2))
if p!=GetOwningPlayer(XSI)then
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(XSI)))
endif
endif
if GetUnitAbilityLevel(XSI,1093808461)!=WTI then
call SetUnitAbilityLevel(XSI,1093808461,WTI)
endif
endif
set t=null
set XSI=null
return false
endfunction
function B83 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call KKI(XSI,1093808462)
call KKI(XSI,1093808461)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808462,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808461,false)
call SaveInteger(ZY,(GetHandleId((XSI))),((4416)),(2))
call SaveInteger(ZY,(GetHandleId((XSI))),((4417)),(2))
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function B73))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(XSI)))
set t=null
set XSI=null
endfunction
function B93 takes nothing returns boolean
if GetLearnedSkill()==1093808460 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093808460)==1 then
call B83()
endif
return false
endfunction
function CZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function B93))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function B63))
set t=null
endfunction
function BA3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local integer HH2=2+WTI
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(XSI,1093750323)
call UnitRemoveAbility(XSI,1093750326)
call UnitRemoveAbility(XSI,1093750327)
call UnitRemoveAbility(XSI,1110459208)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetAttacker()==XSI then
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
if ZLI>=HH2 then
call UnitRemoveAbility(XSI,1093750323)
call UnitRemoveAbility(XSI,1093750326)
call UnitRemoveAbility(XSI,1093750327)
call UnitRemoveAbility(XSI,1110459208)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetTriggerUnit()==XSI and GetSpellAbilityId()==1093750324 and(TimerGetElapsed(M))>(LoadReal(ZY,(V0I),(442)))then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif TKI(GetSpellAbilityId())and XSI==GetSpellTargetUnit()then
call UnitRemoveAbility(XSI,1093750323)
call UnitRemoveAbility(XSI,1093750326)
call UnitRemoveAbility(XSI,1093750327)
call UnitRemoveAbility(XSI,1110459208)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call UnitRemoveAbility(XSI,1093750323)
call UnitRemoveAbility(XSI,1093750326)
call UnitRemoveAbility(XSI,1093750327)
call UnitRemoveAbility(XSI,1110459208)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function BB3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093750324)
call KKI(XSI,1093750323)
call KKI(XSI,1093750326)
call KKI(XSI,1093750327)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750326,false)
call TriggerRegisterTimerEvent(t,15,false)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BA3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(34),(0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M))+1)*1.0))
set t=null
set XSI=null
endfunction
function BC3 takes nothing returns boolean
if GetSpellAbilityId()==1093750324 then
call BB3()
endif
return false
endfunction
function C61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BC3))
call YVI(1093750323)
set t=null
endfunction
function BD3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093684291)
local integer Y0O
local integer BE3
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(XSI,1110454856)==0 or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and XSI==GetSpellTargetUnit()and TKI(GetSpellAbilityId()))then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XSI,1110454856)
call PWI(XSI,0)
else
set Y0O=R2I(GetUnitState(XSI,UNIT_STATE_LIFE)*(0.03+0.01*WTI))
set BE3=(LoadInteger(ZY,(V0I),(238)))
if Y0O!=BE3 then
call SaveInteger(ZY,(V0I),(238),(Y0O))
call PWI(XSI,Y0O)
endif
endif
set t=null
set XSI=null
return false
endfunction
function BF3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BD3))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call SaveInteger(ZY,(V0I),(238),(0))
set t=null
endfunction
function BG3 takes nothing returns boolean
if GetSpellAbilityId()==1093684291 then
call BF3()
endif
return false
endfunction
function BH3 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1110454856)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
endif
return false
endfunction
function C71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BG3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function BH3))
set t=null
endfunction
function BZ3 takes unit T0I,real x,real y,integer WTI returns nothing
call SetUnitPosition(T0I,x,y)
call IssueImmediateOrder(T0I,"howlofterror")
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\HowlOfTerror\\HowlCaster.mdl",x,y))
set T0I=null
endfunction
function BV3 takes nothing returns boolean
if(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),AEI)==false then
call GroupAddUnit(AEI,GetFilterUnit())
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>AGI then
call SetUnitState(GetFilterUnit(),UNIT_STATE_LIFE,GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)-(AGI*0.75))
else
call XNI(AFI,GetFilterUnit(),1,AGI)
endif
endif
return false
endfunction
function BW3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local group g
if GetTriggerEvalCount(t)>10 then
call ZYI(QY1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set AEI=QY1
set AFI=XSI
set AGI=WTI*25
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,325,Condition(function BV3))
call ZYI(g)
set g=null
call BZ3(T0I,x,y,WTI)
if ModuloInteger(GetTriggerEvalCount(t),2)==0 then
call KillUnit(CreateUnit(GetOwningPlayer(XSI),1697657409,x,y,0))
endif
set x=YEI(x+200*Cos(B92*bj_DEGTORAD))
set y=YHI(y+200*Sin(B92*bj_DEGTORAD))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
endif
set t=null
set XSI=null
set T0I=null
set QY1=null
return false
endfunction
function BX3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(XSI)
local real y1=GetUnitY(XSI)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real B92=JPI(x1,y1,x2,y2)
local integer WTI=GetUnitAbilityLevel(XSI,1093744463)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x1,y1,0)
call KKI(T0I,1093681488)
call SetUnitAbilityLevel(T0I,1093681488,WTI)
call RemoveLocation(l)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(6),((x1)*1.0))
call SaveReal(ZY,(V0I),(7),((y1)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveGroupHandle(ZY,(V0I),(133),(ZJI()))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function BW3))
set t=null
set XSI=null
set l=null
set T0I=null
endfunction
function BY3 takes nothing returns boolean
if GetSpellAbilityId()==1093744463 then
call BX3()
endif
return false
endfunction
function C91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BY3))
set t=null
endfunction
function BJ3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real x1=(LoadReal(ZY,(V0I),(64)))
local real x2=(LoadReal(ZY,(V0I),(66)))
local real y1=(LoadReal(ZY,(V0I),(65)))
local real y2=(LoadReal(ZY,(V0I),(67)))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",XSI,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",XTI,"origin"))
call SetUnitPosition(XSI,x2,y2)
call V5I(XTI,4407,1)
call SetUnitPosition(XTI,x1,y1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function BK3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real x1=GetUnitX(XSI)
local real y1=GetUnitY(XSI)
local real x2=GetUnitX(XTI)
local real y2=GetUnitY(XTI)
local trigger t
local integer V0I
if IsUnitAlly(XSI,GetOwningPlayer(XTI))==true or ZXI(GetSpellTargetUnit())==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(64),((x1)*1.0))
call SaveReal(ZY,(V0I),(66),((x2)*1.0))
call SaveReal(ZY,(V0I),(65),((y1)*1.0))
call SaveReal(ZY,(V0I),(67),((y2)*1.0))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function BJ3))
call JUI("SPLK",x1,y1,x2,y2,0.5,0,1,1,0.3)
call KCI(x1,y1,300)
call KCI(x2,y2,300)
endif
set XSI=null
set XTI=null
set t=null
endfunction
function BL3 takes nothing returns boolean
if GetSpellAbilityId()==1093683534 or GetSpellAbilityId()==1093747031 then
call BK3()
endif
return false
endfunction
function BM3 takes nothing returns nothing
if(IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652610))
endif
endfunction
function BN3 takes nothing returns boolean
if GetSpellAbilityId()==1093683534 or GetSpellAbilityId()==1093747031 then
call BM3()
endif
return false
endfunction
function CA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BL3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function BN3))
set t=null
endfunction
function MagicMissle takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",GetTriggerUnit(),"weapon"))
endfunction
function BS3 takes nothing returns boolean
if GetSpellAbilityId()==1093677633 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",GetTriggerUnit(),"weapon"))
endif
return false
endfunction
function C81 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function BS3))
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
set t=null
endfunction
function BT3 takes unit u returns nothing
local unit V8I=L1[GetPlayerId(GetOwningPlayer(u))]
local integer V0I=GetHandleId(V8I)
local integer BR3
local integer i
local integer x
local integer BP3
local unit BQ3
if GetUnitTypeId(V8I)!=1160786265 then
return
endif
set BR3=(LoadInteger(ZY,(V0I),(348)))
set i=1
loop
exitwhen i>BR3
set BP3=(LoadInteger(ZY,(V0I),(7000+i)))
set BQ3=ZGI(BP3)
if BQ3==u then
set x=i
loop
exitwhen x==BR3
call SaveInteger(ZY,(V0I),(7000+x),((LoadInteger(ZY,(V0I),(7000+x+1)))))
set x=x+1
endloop
set i=BR3
endif
set i=i+1
endloop
call SaveInteger(ZY,(V0I),(348),(BR3-1))
set BQ3=null
set V8I=null
endfunction
function BU3 takes unit u returns nothing
local unit V8I=L1[GetPlayerId(GetOwningPlayer(u))]
local integer V0I=GetHandleId(V8I)
local integer BR3=(LoadInteger(ZY,(V0I),(348)))
set BR3=BR3+1
call SaveInteger(ZY,(V0I),(7000+BR3),(ZZI(u)))
call SaveInteger(ZY,(V0I),(348),(BR3))
if SI0[GetPlayerId(GetOwningPlayer(V8I))]then
call SelectUnitAddForPlayer(u,GetOwningPlayer(V8I))
endif
set V8I=null
endfunction
function WardenTrap_DeathMain takes nothing returns nothing
call BT3(GetTriggerUnit())
endfunction
function C03 takes unit u returns nothing
local integer CI3=GetUnitAbilityLevel(u,1093685840)*3+2
local integer V0I=GetHandleId(u)
local integer BR3=(LoadInteger(ZY,(V0I),(348)))
local integer BP3=(LoadInteger(ZY,(V0I),(7000+1)))
local unit BQ3=ZGI(BP3)
if BR3>=CI3 then
call BT3(BQ3)
call RemoveUnit(BQ3)
endif
set BQ3=null
endfunction
function C13 takes nothing returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call KKI(T0I,1093685845)
call IssueTargetOrder(T0I,"slow",GetEnumUnit())
call KKI(T0I,1093686071)
set T0I=null
endfunction
function CO3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local group g=ZJI()
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",x,y))
call GroupEnumUnitsInRange(g,x,y,400,Condition(function S0I))
call ForGroup(g,function C13)
call ZYI(g)
call BT3(XSI)
call RemoveUnit(XSI)
set g=null
set XSI=null
endfunction
function C23 takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==GK and GetUnitTypeId(GetFilterUnit())==1697657392
endfunction
function C33 takes nothing returns nothing
local real C43=KAI(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),TJ,RJ)
local real C53=KAI(GetUnitX(OK),GetUnitY(OK),TJ,RJ)
if C43<C53 then
set OK=GetEnumUnit()
endif
endfunction
function C63 takes nothing returns nothing
local group g=ZJI()
set GK=GetOwningPlayer(GetTriggerUnit())
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),9000,Condition(function C23))
set OK=FirstOfGroup(g)
set TJ=GetUnitX(GetTriggerUnit())
set RJ=GetUnitY(GetTriggerUnit())
call ForGroup(g,function C33)
call IssueImmediateOrder((OK),"locustswarm")
call ZYI(g)
set g=null
endfunction
function WardenTrap_LearnMain takes nothing returns nothing
call KKI(GetTriggerUnit(),1093685844)
endfunction
function C73 takes nothing returns nothing
local location l=GetSpellTargetLoc()
call KKI(GetTriggerUnit(),1093685844)
call C03(GetTriggerUnit())
call BU3(CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697657392,GetLocationX(l),GetLocationY(l),0))
call RemoveLocation(l)
set l=null
endfunction
function C83 takes nothing returns boolean
if GetSpellAbilityId()==1093685840 then
call C73()
endif
if GetSpellAbilityId()==1093685844 then
call C63()
endif
return false
endfunction
function C93 takes nothing returns boolean
if GetSpellAbilityId()==1093685841 then
call CO3()
endif
return false
endfunction
function CA3 takes nothing returns boolean
if GetLearnedSkill()==1093685840 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685840)==1 then
call KKI(GetTriggerUnit(),1093685844)
endif
return false
endfunction
function CB3 takes nothing returns boolean
if GetUnitTypeId(GetDyingUnit())==1697657392 then
call BT3(GetTriggerUnit())
endif
return false
endfunction
function GM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C83))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function CB3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C93))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function CA3))
set t=null
endfunction
function CC3 takes unit u,real CD3,real CE3,real CF3,real CG3,real CH3 returns boolean
local real CZ3=CF3-CD3
local real CV3=CG3-CE3
local real CW3=GetUnitX(u)-CD3
local real CX3=GetUnitY(u)-CE3
return CH3>=RAbsBJ(CZ3*CX3-CV3*CW3)/RAbsBJ(Pow(Pow(CZ3,2)+Pow(CV3,2),0.5))
endfunction
function CY3 takes unit XSI,unit XTI,real XPI,real InitX,real InitY returns nothing
local integer WTI=GetUnitAbilityLevel(XSI,1093685839)
local real CJ3=(300+20*WTI)*2
local real CK3=80+25
local unit CL3
local real dx
local real dy
local real CM3
local real x
local real y
local group g=ZJI()
local boolean CN3
local boolean CS3
set dx=GetUnitX(XTI)-GetUnitX(XSI)
set dy=GetUnitY(XTI)-GetUnitY(XSI)
set CM3=Pow(Pow(dx,2)+Pow(dy,2),0.5)
set x=GetUnitX(XTI)+(CJ3/2)*(dx/CM3)
set y=GetUnitY(XTI)+(CJ3/2)*(dy/CM3)
set OK=XSI
set TJ=XPI
call GroupEnumUnitsInRange(g,x,y,Pow(Pow(CJ3/2,2)+Pow(CK3/2,2),0.5),Condition(function SOI))
call GroupRemoveUnit(g,XTI)
set CL3=FirstOfGroup(g)
loop
exitwhen CL3==null
set CN3=CC3(CL3,GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI),CK3/2)
set CS3=CC3(CL3,x,y,x-100,y+100*x*Pow(y,-1),0.01+CJ3/2)
if CN3 and CS3 then
call XNI(XSI,CL3,3,XPI)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",CL3,"chest"))
endif
call GroupRemoveUnit(g,CL3)
set CL3=FirstOfGroup(g)
endloop
call ZYI(g)
set CL3=null
set g=null
endfunction
function CT3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and GetEventDamage()>1 then
call DisableTrigger(t)
call CY3(XSI,XTI,GetEventDamage(),(LoadReal(ZY,(V0I),(349))),(LoadReal(ZY,(V0I),(350))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function CR3 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XTI=GetTriggerUnit()
local unit XSI=GetAttacker()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.0,false)
call TriggerAddCondition(t,Condition(function CT3))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(349),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(350),((GetUnitY(XSI))*1.0))
set XTI=null
set XSI=null
set t=null
endfunction
function CP3 takes nothing returns nothing
local unit XSI=GetAttacker()
if((LoadInteger(ZY,(GetHandleId((XSI))),((4272))))==1)==false then
call V5I(XSI,4272,0.4)
call CR3()
endif
endfunction
function CQ3 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093685839)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))then
call CP3()
endif
return false
endfunction
function CU3 takes nothing returns nothing
local trigger t
if GetUnitAbilityLevel(GetTriggerUnit(),1093685839)==1 then
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function CQ3))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
endif
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382379618,GetUnitAbilityLevel(GetTriggerUnit(),1093685839))
set t=null
endfunction
function D03 takes nothing returns boolean
if GetLearnedSkill()==1093685839 and IsUnitIllusion(GetTriggerUnit())==false then
call CU3()
endif
return false
endfunction
function GL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function D03))
set t=null
endfunction
function DI3 takes nothing returns boolean
local unit V8I=GetTriggerUnit()
local integer V0I=GetHandleId(V8I)
local integer GJO=(LoadInteger(ZY,(V0I),(352)))
if GJO>0 and GetTriggerEventId()!=EVENT_UNIT_DEATH then
if GetEventDamage()>5 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",V8I,"right hand"))
call JII(V8I,GetEventDamage())
call SaveInteger(ZY,(V0I),(352),(GJO-1))
endif
else
call UnitRemoveAbility(V8I,1093685838)
call UnitRemoveAbility(V8I,1110456394)
call SaveInteger(ZY,(V0I),(352),(0))
endif
set V8I=null
return false
endfunction
function D13 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit V8I=(LoadUnitHandle(ZY,(GetHandleId(t)),(14)))
local integer V0I=GetHandleId(V8I)
local integer GJO=(LoadInteger(ZY,(V0I),(351)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetAttacker()==V8I and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false)then
if GetTriggerEventId()!=EVENT_UNIT_DEATH and GJO>0 and GetEventDamage()>0 then
call SaveInteger(ZY,(V0I),(351),(GJO-1))
else
call UnitRemoveAbility(V8I,1093685830)
call UnitRemoveAbility(V8I,1093685837)
call SaveInteger(ZY,(V0I),(351),(0))
endif
endif
set t=null
set V8I=null
return false
endfunction
function DO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit V8I=(LoadUnitHandle(ZY,(GetHandleId(t)),(14)))
local integer V0I=GetHandleId(V8I)
call SaveInteger(ZY,(V0I),(352),(0))
call SaveInteger(ZY,(V0I),(351),(0))
call UnitRemoveAbility(V8I,1093685830)
call UnitRemoveAbility(V8I,1093685837)
call UnitRemoveAbility(V8I,1093685838)
call FlushChildHashtable(ZY,(GetHandleId(t)))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function D23 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer V0I=GetHandleId(V8I)
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,17,false)
call TriggerAddCondition(t,Condition(function DO3))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(V8I))
call KEI(CE,GetUnitX(V8I),GetUnitY(V8I))
call KKI(V8I,1093685838)
call SaveInteger(ZY,(V0I),(352),(GetUnitAbilityLevel(V8I,1093748033)+1))
call KKI(V8I,1093685830)
call SetUnitAbilityLevel(V8I,1093685830,GetUnitAbilityLevel(V8I,1093748033))
call KKI(V8I,1093685837)
call SaveInteger(ZY,(V0I),(351),(GetUnitAbilityLevel(V8I,1093748033)+1))
set V8I=null
endfunction
function D33 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function DI3))
call SaveInteger(ZY,(GetHandleId(V8I)),(352),(0))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function D13))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(V8I))
call SaveInteger(ZY,(GetHandleId(V8I)),(351),(0))
set t=null
set V8I=null
endfunction
function D43 takes nothing returns boolean
if GetLearnedSkill()==1093748033 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093748033)==1 then
call D33()
endif
return false
endfunction
function D53 takes nothing returns boolean
if GetSpellAbilityId()==1093748033 then
call D23()
endif
return false
endfunction
function GK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D53))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function D43))
set t=null
endfunction
function D63 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
call UnitRemoveAbility((LoadUnitHandle(ZY,(GetHandleId(t)),(14))),1093685827)
call FlushChildHashtable(ZY,(GetHandleId(t)))
call ZSI(t)
set t=null
return false
endfunction
function D73 takes unit XSI,unit XTI returns nothing
local trigger t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(XTI))
call TriggerRegisterTimerEvent(t,10,false)
call TriggerAddCondition(t,Condition(function D63))
call KKI(XTI,1093685827)
call SetUnitAbilityLevel(XTI,1093685827,GetUnitAbilityLevel(XSI,1093685846))
call XNI(XSI,XTI,2,50*GetUnitAbilityLevel(XSI,1093685846))
call K3I(I2S(50*GetUnitAbilityLevel(XSI,1093685846)),1,XTI,0.03,255,0,0,255)
call UnitRemoveAbility(XSI,1110456395)
set t=null
endfunction
function D83 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local trigger D93=(LoadTriggerHandle(ZY,(V0I),(353)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI then
call DisableTrigger(t)
call FlushChildHashtable(ZY,(GetHandleId(D93)))
call ZSI(D93)
call D73(XSI,XTI)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set XSI=null
set D93=null
return false
endfunction
function DA3 takes unit XSI,unit XTI,trigger D93 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.0,false)
call TriggerAddCondition(t,Condition(function D83))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveTriggerHandle(ZY,(V0I),(353),(D93))
set t=null
endfunction
function DB3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetAttacker()==V8I and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(V8I))==false)then
if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_SPELL_CAST and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false then
call DA3(V8I,GetTriggerUnit(),t)
call UnitRemoveAbility(V8I,1110456395)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_UNIT_SPELL_CAST then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
elseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED then
if x!=GetUnitX(V8I)or y!=GetUnitY(V8I)then
call UnitRemoveAbility(V8I,1110456395)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
set t=null
set V8I=null
return false
endfunction
function DC3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("effects\\PurpleAura.mdx",V8I,"origin"))
call KEI(RC,GetUnitX(V8I),GetUnitY(V8I))
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerAddCondition(t,Condition(function DB3))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(6),((GetUnitX(V8I))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(V8I))*1.0))
call IssueImmediateOrder(V8I,"holdposition")
set t=null
set V8I=null
endfunction
function DD3 takes nothing returns boolean
if GetSpellAbilityId()==1093685846 then
call DC3()
endif
return false
endfunction
function GJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DD3))
set t=null
endfunction
function DE3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer DF3=(LoadInteger(ZY,(V0I),(247)))
call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",GetUnitX(XSI),GetUnitY(XSI)))
if GetTriggerEvalCount(t)>10*(2+0.75*WTI)or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(XSI,DF3)
call UnitRemoveAbility(XSI,1110456663)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function DG3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093743689)
local integer DF3
if WTI==1 then
set DF3=1093743413
elseif WTI==2 then
set DF3=1093743183
elseif WTI==3 then
set DF3=1093743412
elseif WTI==4 then
set DF3=1093743417
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),DF3,false)
call MSI(XSI,DF3,1,2+0.75*WTI)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function DE3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(247),(DF3))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("effects\\Tornado.mdx",XSI,"hand,left")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("effects\\Tornado.mdx",XSI,"hand,right")))
set XSI=null
set t=null
endfunction
function DH3 takes nothing returns boolean
if GetSpellAbilityId()==1093743689 then
call DG3()
endif
return false
endfunction
function HY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DH3))
set t=null
endfunction
function DZ3 takes nothing returns nothing
local destructable XTI=GetEnumDestructable()
local real a=Atan2(GetDestructableY(XTI)-GetUnitY(OK),GetDestructableX(XTI)-GetUnitX(OK))
local real OVO=RAbsBJ((TJ-a)*bj_RADTODEG)
if(XCI(XTI)or GetDestructableTypeId(XTI)==1110454325)and GetDestructableLife(XTI)>1 and OVO<AVI and OVO<(AWI-5)then
set AVI=OVO
set AHI=XTI
endif
set XTI=null
endfunction
function DV3 takes unit KRI,unit XSI,real B92 returns destructable
local real x=GetUnitX(KRI)
local real y=GetUnitY(KRI)
local rect r=Rect(x-AYI,y-AYI,x+AYI,y+AYI)
set AVI=9999
set OK=KRI
set AHI=null
call EnumDestructablesInRect(r,Condition(function HRI),function DZ3)
call RemoveRect(r)
set r=null
return AHI
endfunction
function DW3 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local real a=Atan2(GetUnitY(XTI)-GetUnitY(OK),GetUnitX(XTI)-GetUnitX(OK))
local real OVO=RAbsBJ((TJ-a)*bj_RADTODEG)
if OVO<AVI and OVO<AWI and XTI!=AK then
set AVI=OVO
set AZI=XTI
endif
set XTI=null
endfunction
function DX3 takes unit KRI,unit XSI,real B92 returns unit
local group g=ZJI()
set AZI=null
set AVI=9999
set OK=KRI
set TJ=Atan2(GetUnitY(XSI)-AKI,GetUnitX(XSI)-AJI)
set AK=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),AXI,Condition(function S5I))
call ForGroup(g,function DW3)
call ZYI(g)
set g=null
return AZI
endfunction
function DY3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
if(LoadLightningHandle(ZY,(V0I),(196)))!=null then
call DestroyLightning((LoadLightningHandle(ZY,(V0I),(196))))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function DJ3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real DK3=(LoadReal(ZY,(V0I),(248)))
local real B92=Atan2(GetUnitY(XTI)-GetUnitY(KRI),GetUnitX(XTI)-GetUnitX(KRI))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real x=GetUnitX(KRI)+50*Cos(B92)
local real y=GetUnitY(KRI)+50*Sin(B92)
local unit DL3
local destructable d
local lightning KII
local unit T0I
local boolean SR1=(LoadBoolean(ZY,(V0I),(249)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(KRI)
else
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
call SetUnitFacing(KRI,B92*bj_RADTODEG)
if JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))<45 then
set AJI=(LoadReal(ZY,(V0I),(6)))
set AKI=(LoadReal(ZY,(V0I),(7)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetUnitTypeId(XTI)!=1848651852 and SR1 then
set DL3=DX3(KRI,XTI,DK3)
set d=DV3(KRI,XTI,DK3)
if DL3!=null then
set t=CreateTrigger()
set V0I=GetHandleId(t)
set T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093743177)
call SetUnitAbilityLevel(T0I,1093743177,WTI+1)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
set T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(DL3),GetUnitY(DL3),0)
call KKI(T0I,1093743177)
call SetUnitAbilityLevel(T0I,1093743177,WTI+1)
call IssueTargetOrder(T0I,"thunderbolt",DL3)
call TriggerRegisterTimerEvent(t,0.25+WTI*0.75,false)
call TriggerAddCondition(t,Condition(function DY3))
set KII=AddLightning("MFPB",true,GetUnitX(XTI),GetUnitY(XTI),GetUnitX(DL3),GetUnitY(DL3))
call SetLightningColor(KII,0.5,0.5,1,1)
call SaveLightningHandle(ZY,(V0I),(196),(KII))
elseif d!=null then
set t=CreateTrigger()
set V0I=GetHandleId(t)
set T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093743177)
call SetUnitAbilityLevel(T0I,1093743177,WTI+1)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
call TriggerRegisterTimerEvent(t,0.25+WTI*0.75,false)
call TriggerAddCondition(t,Condition(function DY3))
set KII=AddLightning("MFPB",true,GetUnitX(XTI),GetUnitY(XTI),GetDestructableX(d),GetDestructableY(d))
call SetLightningColor(KII,0.5,0.5,1,1)
call SaveLightningHandle(ZY,(V0I),(196),(KII))
call SetDestructableAnimation(d,"stand hit")
else
set T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093743177)
call SetUnitAbilityLevel(T0I,1093743177,1)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
endif
endif
call KillUnit(KRI)
endif
endif
set t=null
set KRI=null
set XTI=null
set KII=null
set DL3=null
set d=null
set T0I=null
return false
endfunction
function DM3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real B92=Atan2(GetUnitY(XTI)-GetUnitY(XSI),GetUnitX(XTI)-GetUnitX(XSI))
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747990327,GetUnitX(XSI),GetUnitY(XSI),B92*bj_RADTODEG)
local integer WTI=GetUnitAbilityLevel(XSI,1093743178)
local boolean SR1=ZXI(GetSpellTargetUnit())==false
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(248),((B92)*1.0))
call SaveBoolean(ZY,(V0I),(249),(SR1))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XSI))*1.0))
call TriggerRegisterTimerEvent(t,0.033,true)
call TriggerAddCondition(t,Condition(function DJ3))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
set XSI=null
set XTI=null
set t=null
endfunction
function DN3 takes nothing returns boolean
if GetSpellAbilityId()==1093743178 then
call DM3()
endif
return false
endfunction
function HX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DN3))
set t=null
endfunction
function DS3 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),ALI)==false and GetUnitAbilityLevel(GetEnumUnit(),1113815395)==0 then
call XNI((AMI),(GetEnumUnit()),1,(((ANI)*1.0))*Pow(0.9,(ATI))*Pow(0.99,(ASI)))
call GroupAddUnit(ALI,GetEnumUnit())
set ATI=ATI+1
endif
endfunction
function DT3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real XPI=(LoadReal(ZY,(V0I),(20)))
local integer DR3=(LoadInteger(ZY,(V0I),(354)))
local integer DP3=(LoadInteger(ZY,(V0I),(355)))
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local real x=YEI(GetUnitX(KRI)+(60*Pow(0.9,DP3)*Pow(0.99,DR3))*Cos(B92))
local real y=YHI(GetUnitY(KRI)+(60*Pow(0.9,DP3)*Pow(0.99,DR3))*Sin(B92))
local group g=ZJI()
local real d
if GetTriggerEvalCount(t)>2 then
set d=150
else
set d=75
endif
call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",x,y))
set DR3=DR3+KCI(x,y,75)
call SaveInteger(ZY,(V0I),(354),(DR3))
set ALI=BA2
set AMI=KRI
set ANI=XPI
set ASI=DR3
set ATI=DP3
set OK=KRI
call GroupEnumUnitsInRange(g,x,y,d,Condition(function SOI))
call ForGroup(g,function DS3)
call ZYI(g)
call SaveInteger(ZY,(V0I),(355),(ATI))
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
if GetTriggerEvalCount(t)>29 then
call KillUnit(KRI)
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set KRI=null
set BA2=null
set g=null
return false
endfunction
function DQ3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x2=(LoadReal(ZY,(GetHandleId(XSI)),(356)))
local real y2=(LoadReal(ZY,(GetHandleId(XSI)),(357)))
local real DU3=YPI((TimerGetElapsed(M))-(LoadReal(ZY,(GetHandleId(XSI)),(358))),1.0)
local real B92=Atan2(y2-GetUnitY(XSI),x2-GetUnitX(XSI))
local trigger t
local integer V0I
local unit KRI
local integer WTI=GetUnitAbilityLevel(XSI,1093743179)
local real XPI=(40+80*WTI)*(DU3)
set t=CreateTrigger()
set V0I=GetHandleId(t)
set KRI=CreateUnit(GetOwningPlayer(XSI),1747990328,GetUnitX(XSI),GetUnitY(XSI),B92*bj_RADTODEG)
set x2=GetUnitX(XSI)+1700*Cos(B92)
set y2=GetUnitY(XSI)+1700*Sin(B92)
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(47),((x2)*1.0))
call SaveReal(ZY,(V0I),(48),((y2)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
call SaveInteger(ZY,(V0I),(354),(0))
call SaveInteger(ZY,(V0I),(355),(0))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function DT3))
set XSI=null
set t=null
set KRI=null
endfunction
function E03 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
call SetUnitTimeScale(V8I,1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function EI3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call RemoveLocation(l)
call SaveReal(ZY,(GetHandleId(V8I)),(356),((x)*1.0))
call SaveReal(ZY,(GetHandleId(V8I)),(357),((y)*1.0))
call SaveReal(ZY,(GetHandleId(V8I)),(358),(((TimerGetElapsed(M)))*1.0))
call SetUnitTimeScale(V8I,0.75)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0.75,false)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function E03))
set t=null
set V8I=null
endfunction
function E13 takes nothing returns boolean
if GetSpellAbilityId()==1093743179 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call SaveBoolean(ZY,(GetHandleId(GetTriggerUnit())),(360),(false))
call EI3()
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call SaveBoolean(ZY,(GetHandleId(GetTriggerUnit())),(360),(true))
elseif(LoadBoolean(ZY,(GetHandleId(GetTriggerUnit())),(360)))==true then
call DQ3()
endif
endif
return false
endfunction
function HJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E13))
set t=null
endfunction
function EO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local real GL2=(LoadReal(ZY,(V0I),(193)))
local boolean HZ2=(LoadBoolean(ZY,(V0I),(15)))
if GetTriggerEvalCount(t)==1 then
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetAttacker()==XSI and GetTriggerUnit()==XTI then
call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",XSI,"hand,left"))
call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",XSI,"hand,right"))
elseif GetAttacker()==XSI and GetTriggerUnit()!=XTI then
call UnitRemoveAbility(XSI,1093743186)
call UnitRemoveAbility(XSI,1110456664)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XSI,1093748299)
call UnitRemoveAbility(XSI,1093748300)
call UnitRemoveAbility(XSI,1093748298)
endif
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and HZ2==false then
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)+(GL2)*GetEventDamage())
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093743184 or GetSpellAbilityId()==1093747766 then
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call UnitRemoveAbility(XSI,1093743186)
call UnitRemoveAbility(XSI,1110456664)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XSI,1093748299)
call UnitRemoveAbility(XSI,1093748300)
call UnitRemoveAbility(XSI,1093748298)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function E23 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093743184)
local real GL2=0.6-WTI*0.1
local boolean HZ2=false
call UnitRemoveAbility(XSI,1093743186)
call UnitRemoveAbility(XSI,1110456664)
if WTI==0 then
call UnitRemoveAbility(XSI,1093748299)
call UnitRemoveAbility(XSI,1093748300)
call UnitRemoveAbility(XSI,1093748298)
set HZ2=true
set WTI=GetUnitAbilityLevel(XSI,1093747766)
set GL2=0.6-WTI*0.15
if WTI==1 then
call KKI(XSI,1093748299)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093748299,false)
elseif WTI==2 then
call KKI(XSI,1093748300)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093748300,false)
elseif WTI==3 then
call KKI(XSI,1093748298)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093748298,false)
endif
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093743186,false)
call KKI(XSI,1093743186)
call IssueTargetOrder(XSI,"attack",XTI)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveBoolean(ZY,(V0I),(15),(HZ2))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveReal(ZY,(V0I),(193),((GL2)*1.0))
call SaveInteger(ZY,(V0I),(361),(0))
call TriggerRegisterTimerEvent(t,20,false)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function EO3))
set XSI=null
set XTI=null
set t=null
endfunction
function E33 takes nothing returns boolean
if GetSpellAbilityId()==1093743184 or GetSpellAbilityId()==1093747766 then
call E23()
endif
return false
endfunction
function HK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E33))
set t=null
endfunction
function E43 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetFilterUnit())!=1211117642 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(ARI))==true
endfunction
function E53 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local unit XFI=CreateUnit(GetOwningPlayer(ARI),1697656880,x,y,0)
call UnitAddAbility(XFI,1093678419)
call SetUnitAbilityLevel(XFI,1093678419,API)
call IssueTargetOrder(XFI,"chainlightning",GetEnumUnit())
call UnitApplyTimedLife(XFI,1112820806,3)
call UnitAddAbility(XFI,1097625443)
set XFI=null
endfunction
function E63 takes nothing returns nothing
local group g=ZJI()
set ARI=GetTriggerUnit()
if GetSpellAbilityId()==1093810503 then
set API=GetUnitAbilityLevel(GetTriggerUnit(),1093810503)+4
else
set API=GetUnitAbilityLevel(GetTriggerUnit(),1093810504)+7
endif
call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function E43))
call ForGroup(g,function E53)
call ZYI(g)
set g=null
endfunction
function E73 takes nothing returns boolean
if GetSpellAbilityId()==1093810503 or GetSpellAbilityId()==1093810504 then
call E63()
endif
return false
endfunction
function CC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E73))
set t=null
endfunction
constant function StaticField_RawCode takes nothing returns integer
return 1093684789
endfunction
constant function StaticField_LightningCode takes nothing returns integer
return 1093683779
endfunction
constant function StaticField_ArcLightningCode takes nothing returns integer
return 1093677616
endfunction
constant function StaticField_WrathOfGodCode takes nothing returns integer
return 1093810503
endfunction
constant function StaticField_WrathOfGod2Code takes nothing returns integer
return 1093810504
endfunction
function E83 takes nothing returns boolean
return(GetSpellAbilityId()==(1093683779)or GetSpellAbilityId()==(1093677616)or GetSpellAbilityId()==(1093810503)or GetSpellAbilityId()==(1093810504))and GetUnitAbilityLevel(GetTriggerUnit(),(1093684789))>0
endfunction
function E93 takes nothing returns nothing
local real EA3=GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)
local real EB3=0.03+0.02*GetUnitAbilityLevel(GetTriggerUnit(),(1093684789))
local real XPI=EA3*EB3
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),XPI,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ForkedLightning\\ForkedLightningTarget.mdl",GetEnumUnit(),"overhead"))
endfunction
function EC3 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function ED3 takes nothing returns nothing
local location YV1=GetUnitLoc(GetTriggerUnit())
local group U4I=ZJI()
local real x=GetLocationX(YV1)
local real y=GetLocationY(YV1)
local boolexpr VE1=Condition(function EC3)
call GroupEnumUnitsInRange(U4I,x,y,1025,VE1)
call ForGroup(U4I,function E93)
call RemoveLocation(YV1)
call ZYI(U4I)
endfunction
function CB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E83))
call TriggerAddAction(t,function ED3)
endfunction
constant function LightningBolt_RawCode takes nothing returns integer
return 1093683779
endfunction
constant function LightningBolt_CasterUnit takes nothing returns integer
return 1697656880
endfunction
constant function LightningBolt_EffectCode takes nothing returns integer
return 1093678419
endfunction
function EE3 takes nothing returns boolean
return GetSpellAbilityId()==(1093683779)and ZXI(GetSpellTargetUnit())==false
endfunction
function EF3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),(1697656880),GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,(1093678419))
call SetUnitAbilityLevel(T0I,(1093678419),GetUnitAbilityLevel(V8I,(1093683779)))
call IssueTargetOrder(T0I,"chainlightning",XTI)
call UnitApplyTimedLife(T0I,1112820806,3)
call SetUnitPathing(T0I,false)
call KKI(T0I,1097625443)
endfunction
function CD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EE3))
call TriggerAddAction(t,function EF3)
endfunction
function EG3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
if GetTriggerEvalCount(t)>80 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set T0I=null
return false
endfunction
function EH3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697657411,GetUnitX(XSI),GetUnitY(XSI),0)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KKI(T0I,1093748301)
call SetUnitAbilityLevel(T0I,1093748301,GetUnitAbilityLevel(XSI,1093677616))
call IssueTargetOrder(T0I,"chainlightning",XTI)
call UnitApplyTimedLife(T0I,1112820806,10)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function EG3))
set XSI=null
set XTI=null
set T0I=null
set t=null
endfunction
function EZ3 takes nothing returns boolean
if GetSpellAbilityId()==1093677616 and ZXI(GetSpellTargetUnit())==false then
call EH3()
endif
return false
endfunction
function CE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function EZ3))
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set t=null
endfunction
constant function DeathCoil_AbilityCode takes nothing returns integer
return 1093683507
endfunction
function EV3 takes nothing returns boolean
return GetSpellAbilityId()==(1093683507)and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or ZXI(GetSpellTargetUnit())==false)
endfunction
function EW3 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real XPI=(LoadReal(ZY,(V0I),(20)))
call UnitDamageTarget(V8I,V8I,XPI,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call FlushChildHashtable(ZY,(V0I))
call PauseTimer(t)
call DestroyTimer(t)
endfunction
function EX3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real XPI=25+25*GetUnitAbilityLevel(V8I,(1093683507))
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",XTI,"origin"))
if IsUnitAlly(XTI,GetOwningPlayer(V8I))and GetUnitState(XTI,UNIT_STATE_LIFE)>1.00 then
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)+2*XPI)
else
call UnitDamageTarget(V8I,XTI,2*XPI,false,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endif
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
call TimerStart(t,0,false,function EW3)
endfunction
function EQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EV3))
call TriggerAddAction(t,function EX3)
endfunction
function EY3 takes nothing returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(AQI),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call KKI(T0I,1093684554)
call SetUnitAbilityLevel(T0I,1093684554,AUI)
call IssueTargetOrder(T0I,"forkedlightning",GetEnumUnit())
set T0I=null
endfunction
function EJ3 takes unit XSI,unit XTI,integer WTI returns nothing
local group g=ZJI()
set OK=XSI
set AUI=WTI
set AQI=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),700,Condition(function S1I))
call ForGroup(g,function EY3)
call ZYI(g)
set g=null
endfunction
function EK3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real EL3=(LoadReal(ZY,(V0I),(362)))
local unit XSI
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local integer WTI
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if((LoadInteger(ZY,(GetHandleId((GetTriggerUnit()))),((4250))))==1)==false then
if EL3<GetEventDamage()then
set XSI=(LoadUnitHandle(ZY,(V0I),(2)))
set WTI=(LoadInteger(ZY,(V0I),(5)))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call SaveBoolean(ZY,(GetHandleId(XTI)),(363),(false))
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call JII(GetTriggerUnit(),EL3)
call EJ3(XSI,GetTriggerUnit(),WTI)
elseif GetEventDamage()>0 then
call JII(GetTriggerUnit(),GetEventDamage())
call SaveReal(ZY,(V0I),(362),((EL3-GetEventDamage())*1.0))
endif
endif
else
call SaveBoolean(ZY,(GetHandleId(XTI)),(363),(false))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
return false
endfunction
function EM3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=GetSpellTargetUnit()
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093684550)
local integer UX1=GetHandleId(XTI)
local real EL3
if(LoadBoolean(ZY,(UX1),(363)))==true then
call TriggerEvaluate((LoadTriggerHandle(ZY,(UX1),(364))))
endif
call UnitRemoveBuffs(XTI,false,true)
call TZI(XTI,0,0)
if WTI==1 then
set EL3=110
elseif WTI==2 then
set EL3=140
elseif WTI==3 then
set EL3=170
else
set EL3=200
endif
call SaveReal(ZY,(V0I),(362),((EL3)*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\Defensive Barrier big.mdx",XTI,"chest")))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,15,false)
call TriggerAddCondition(t,Condition(function EK3))
call SaveTriggerHandle(ZY,(UX1),(364),(t))
call SaveBoolean(ZY,(UX1),(363),(true))
set t=null
set XTI=null
set XSI=null
endfunction
function EN3 takes nothing returns boolean
if GetSpellAbilityId()==1093684550 then
call EM3()
endif
return false
endfunction
function ES3 takes nothing returns nothing
if GetUnitAbilityLevel(GetSpellTargetUnit(),1112433775)>0 then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652617))
endif
endfunction
function ET3 takes nothing returns boolean
if GetSpellAbilityId()==1093684550 then
call ES3()
endif
return false
endfunction
function F01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ET3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EN3))
set t=null
endfunction
function ER3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or IssueImmediateOrder(V8I,"windwalk")then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
return false
endfunction
function EP3 takes unit V8I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ER3))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
set t=null
endfunction
function EQ3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093684819)
local integer SQI
local real H1O
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093747777)+2
endif
set SQI=2+WTI
if GetTriggerEventId()==EVENT_UNIT_DAMAGED and((LoadInteger(ZY,(GetHandleId((V8I))),((4250))))==1)then
call JII(V8I,GetEventDamage())
call JII(V8I,GetEventDamage())
elseif(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093684819 or GetSpellAbilityId()==1093747777))or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and((LoadInteger(ZY,(GetHandleId((V8I))),((4251))))==1)==false and GetUnitState(V8I,UNIT_STATE_LIFE)<400)then
call TimerStart(E70[GetPlayerId(GetOwningPlayer(V8I))],60,false,null)
call V5I(V8I,4250,SQI)
call V5I(V8I,4251,60)
call UnitRemoveBuffs(V8I,false,true)
call TZI(V8I,0,0)
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call DisableTrigger(t)
set B0I=true
if IssueImmediateOrder(V8I,"windwalk")==false then
call EP3(V8I)
endif
set B0I=false
call EnableTrigger(t)
endif
call JWI("Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl",V8I,"origin",SQI)
endif
set t=null
set V8I=null
return false
endfunction
function EU3 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EQ3))
set t=null
endfunction
function F03 takes nothing returns boolean
if(GetLearnedSkill()==1093684819 or GetLearnedSkill()==1093747777)and IsUnitIllusion(GetTriggerUnit())==false and(GetUnitAbilityLevel(GetTriggerUnit(),1093684819)==1 or GetUnitAbilityLevel(GetTriggerUnit(),1093747777)==1)then
call EU3()
endif
return false
endfunction
function FI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function F03))
set t=null
endfunction
constant function MarkOfTheAbyss_AttackBuff takes nothing returns integer
return 1110455862
endfunction
constant function MarkOfTheAbyss_EffectCode takes nothing returns integer
return 1093684552
endfunction
constant function MarkOfTheAbyss_FrostmourneCode takes nothing returns integer
return 1093684551
endfunction
function FI3 takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),(1110455862))>0 or GetUnitAbilityLevel(GetAttacker(),(1093684551))>0
endfunction
function F13 takes nothing returns nothing
local unit SF1=GetAttacker()
local unit XTI=GetTriggerUnit()
local unit SourceHero
local integer WTI=GetUnitAbilityLevel(SF1,(1093684551))
local unit T0I=CreateUnit(GetOwningPlayer(SF1),1697656901,GetUnitX(SF1),GetUnitY(SF1),0)
if WTI>0 then
call SaveInteger(ZY,(GetHandleId(XTI)),(203),(WTI))
else
set WTI=(LoadInteger(ZY,(GetHandleId(XTI)),(203)))
endif
if IsUnitEnemy(XTI,GetOwningPlayer(SF1))==true then
call KKI(T0I,(1093684552))
call SetUnitAbilityLevel(T0I,(1093684552),WTI)
call IssueTargetOrder(T0I,"bloodlust",SF1)
endif
endfunction
function EU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function FI3))
call TriggerAddAction(t,function F13)
endfunction
function FO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local real XPI
local integer SQI
local unit F23
if WTI==1 then
set XPI=15
set SQI=10
elseif WTI==2 then
set XPI=21
set SQI=13
elseif WTI==3 then
set XPI=27
set SQI=16
elseif WTI==4 then
set XPI=33
set SQI=19
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetTriggerEvalCount(t)>1 and GetSpellAbilityId()==1093686065 and ZXI(GetSpellTargetUnit())==false and XTI==GetSpellTargetUnit()then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
set F23=GetKillingUnit()
if XEI(F23)then
set F23=(L1[GetPlayerId(GetOwningPlayer((F23)))])
endif
if GetTriggerUnit()==XTI or F23==XTI then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1093752627)
call UnitRemoveAbility(XTI,1110459471)
endif
else
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
if ZLI==SQI then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1093752627)
call UnitRemoveAbility(XTI,1110459471)
endif
call XNI(XSI,XTI,1,XPI)
endif
set t=null
set XSI=null
set XTI=null
set F23=null
return false
endfunction
function F33 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093686065)
local real XPI
local real SQI
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\ReviveDemon\\ReviveDemon.mdl",XTI,"overhead"))
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093752627,false)
call KKI(XTI,1093752627)
call TriggerRegisterTimerEvent(t,1,true)
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FO3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(34),(0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl",XTI,"overhead")))
set XSI=null
set XTI=null
set t=null
endfunction
function F43 takes nothing returns boolean
if GetSpellAbilityId()==1093686065 and ZXI(GetSpellTargetUnit())==false then
call F33()
endif
return false
endfunction
function CW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F43))
set t=null
endfunction
function F53 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110454328)==0 and GetUnitAbilityLevel(GetFilterUnit(),1113815395)==0
endfunction
function F63 takes integer V0I,integer F73 returns nothing
local integer i=1
loop
exitwhen i>F73
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(2700+i))))
set i=i+1
endloop
endfunction
function F83 takes nothing returns nothing
call UnitWakeUp(GetEnumUnit())
call IssueTargetOrder(GetEnumUnit(),"attack",BII)
endfunction
function F93 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local group g=(LoadGroupHandle(ZY,(V0I),(220)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer F73=(LoadInteger(ZY,(V0I),(365)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_ORDER then
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
if ZLI==(4+2*WTI)then
call UnitRemoveAbility(V8I,1093683509)
call ZYI(g)
call F63(V0I,F73)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call DisableTrigger(t)
set BII=V8I
call ForGroup(g,function F83)
call EnableTrigger(t)
endif
else
if IsUnitInGroup(GetTriggerUnit(),g)==true and UnitIsSleeping(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1110454328)==0 and GetIssuedOrderId()!=851973 and B0I==false then
call DisableTrigger(t)
call IssueTargetOrder(GetTriggerUnit(),"attack",V8I)
call EnableTrigger(t)
endif
endif
set t=null
set g=null
set V8I=null
return false
endfunction
function FA3 takes nothing returns nothing
set MJ=MJ+1
call SaveEffectHandle(ZY,(XK),(2700+MJ),(AddSpecialEffectTarget("Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnBirthMissile.mdl",GetEnumUnit(),"chest")))
endfunction
function FB3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093683510)
local group g=ZJI()
call KKI(V8I,1093683509)
call SetUnitAbilityLevel(V8I,1093683509,WTI)
set OK=V8I
set BII=V8I
set MJ=0
set XK=V0I
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),300,Condition(function F53))
call ForGroup(g,function FA3)
call ForGroup(g,function F83)
call SaveInteger(ZY,(V0I),(365),(MJ))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveGroupHandle(ZY,(V0I),(220),(g))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(34),(0))
call TriggerRegisterTimerEvent(t,0.25,true)
call K7I(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call K7I(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call K7I(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function F93))
set t=null
set g=null
set V8I=null
endfunction
function FC3 takes nothing returns boolean
if GetSpellAbilityId()==1093683510 then
call FB3()
endif
return false
endfunction
function CY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FC3))
set t=null
endfunction
function FD3 takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call XNI(GetTriggerUnit(),GetEnumUnit(),2,GetUnitAbilityLevel(GetTriggerUnit(),1093681974)*25+75)
endfunction
function FE3 takes nothing returns nothing
local group g=ZJI()
local unit V8I=GetTriggerUnit()
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),300,Condition(function SII))
call ForGroup(g,function FD3)
call SetUnitAnimation(V8I,"spin")
call LLI(V8I,0.6)
call V5I(V8I,4267,0.75-0.05*GetUnitAbilityLevel(GetTriggerUnit(),1093681974))
call ZYI(g)
set g=null
set V8I=null
endfunction
function FF3 takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),1110455120)>0 and IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetAttacker(),UNIT_TYPE_MECHANICAL)==false and GetUnitAbilityLevel(GetAttacker(),1093678162)==0 and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and GetRandomReal(0,100)<17 and((LoadInteger(ZY,(GetHandleId((GetTriggerUnit()))),((4267))))==1)==false then
call FE3()
endif
return false
endfunction
function CX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function FF3))
set t=null
endfunction
constant function CullingBlade_RawCode takes nothing returns integer
return 1093682482
endfunction
function FG3 takes nothing returns boolean
return GetSpellAbilityId()==(1093682482)or GetSpellAbilityId()==1093750098
endfunction
function FH3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real EL3=GetUnitState(XTI,UNIT_STATE_LIFE)
local integer WTI=GetUnitAbilityLevel(V8I,(1093682482))
local unit T0I
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093750098)
endif
if(EL3<=300 and WTI==1)or(EL3<=450 and WTI==2)or(EL3<=625 and WTI==3)then
call PlaySoundOnUnitBJ(CC,100,XTI)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",XTI,"overhead"))
set T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,0,0,0)
call UnitRemoveBuffs(XTI,true,true)
call UnitRemoveAbility(XTI,1097167980)
call UnitDamageTarget(T0I,XTI,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
endfunction
function CJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FG3))
call TriggerAddAction(t,function FH3)
endfunction
function FZ3 takes nothing returns boolean
return GetSpellAbilityId()==1093683019 and ZXI(GetSpellTargetUnit())==false
endfunction
function FV3 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019),ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)
if GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>1 then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019))
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetSpellTargetUnit(),"origin"))
endfunction
function FW3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit T0I
if GetUnitAbilityLevel(XTI,1110454854)==0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetTriggerUnit()==XTI then
call UnitRemoveAbility(XTI,1110454854)
set T0I=CreateUnit(p,1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093678169)
call SetUnitAbilityLevel(T0I,1093678169,WTI)
call IssueTargetOrder(T0I,"sleep",GetAttacker())
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitState(XTI,UNIT_STATE_LIFE)>21 then
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)-20)
else
call UnitRemoveAbility(XTI,1110454854)
call XNI(XSI,XTI,1,50)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
set t=null
set p=null
set T0I=null
set XTI=null
set XSI=null
return false
endfunction
function FX3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
set V0I=GetHandleId(t)
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(XSI)))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(XSI,1093678169)))
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function FW3))
set L80=true
call XNI(XSI,XTI,2,0)
set L80=false
set XSI=null
set XTI=null
set t=null
endfunction
function FY3 takes nothing returns boolean
if GetSpellAbilityId()==1093678169 and XBI(GetSpellTargetUnit())==false then
call FX3()
endif
return false
endfunction
function FJ3 takes nothing returns boolean
if GetSpellAbilityId()==1093678169 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
if GetOwningPlayer(GetTriggerUnit())!=GetOwningPlayer(GetSpellTargetUnit())and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endif
return false
endfunction
function CK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FY3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function FJ3))
set t=null
endfunction
function FK3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real H1O
local integer ZLI=6
local fogmodifier KHI=(LoadFogModifierHandle(ZY,(V0I),(42)))
if GetUnitAbilityLevel(XSI,1093747769)>0 then
set ZLI=7
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEvalCount(t)>ZLI then
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call Y8I(XSI)
else
set H1O=RMinBJ(0.05*GetUnitState(XTI,UNIT_STATE_MAX_MANA),GetUnitState(XTI,UNIT_STATE_MANA))
if GetUnitAbilityLevel(XSI,1093747769)>0 then
set H1O=RMinBJ(0.1*GetUnitState(XTI,UNIT_STATE_MAX_MANA),GetUnitState(XTI,UNIT_STATE_MANA))
endif
if H1O>0 then
call SetUnitState(XSI,UNIT_STATE_MANA,GetUnitState(XSI,UNIT_STATE_MANA)+H1O)
call SetUnitState(XTI,UNIT_STATE_MANA,GetUnitState(XTI,UNIT_STATE_MANA)-H1O)
endif
endif
set t=null
set XSI=null
set XTI=null
set KHI=null
return false
endfunction
function FL3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local fogmodifier KHI=CreateFogModifierRadius(GetOwningPlayer(XSI),FOG_OF_WAR_VISIBLE,GetUnitX(XTI),GetUnitY(XTI),350,true,true)
call FogModifierStart(KHI)
call UnitRemoveAbility(XTI,1110454854)
call UnitRemoveAbility(XTI,1112896368)
call UnitRemoveAbility(XTI,1114993524)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function FK3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveFogModifierHandle(ZY,(V0I),(42),(KHI))
set XSI=null
set XTI=null
set t=null
set KHI=null
endfunction
function FM3 takes nothing returns boolean
if GetSpellAbilityId()==1093677649 or GetSpellAbilityId()==1093747769 then
call FL3()
endif
return false
endfunction
function CL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FM3))
set t=null
endfunction
function FN3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetUnitAbilityLevel(XTI,1110454852)==0 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1093808689)
call UnitRemoveAbility(XTI,1093808691)
call UnitRemoveAbility(XTI,1093808692)
call UnitRemoveAbility(XTI,1093808690)
endif
set t=null
set XTI=null
return false
endfunction
function FS3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093678166)
if WTI==1 then
call KKI(XTI,1093808689)
call UnitRemoveAbility(XTI,1093808691)
call UnitRemoveAbility(XTI,1093808692)
call UnitRemoveAbility(XTI,1093808690)
elseif WTI==2 then
call KKI(XTI,1093808691)
call UnitRemoveAbility(XTI,1093808689)
call UnitRemoveAbility(XTI,1093808692)
call UnitRemoveAbility(XTI,1093808690)
elseif WTI==3 then
call KKI(XTI,1093808692)
call UnitRemoveAbility(XTI,1093808689)
call UnitRemoveAbility(XTI,1093808691)
call UnitRemoveAbility(XTI,1093808690)
elseif WTI==4 then
call KKI(XTI,1093808690)
call UnitRemoveAbility(XTI,1093808689)
call UnitRemoveAbility(XTI,1093808691)
call UnitRemoveAbility(XTI,1093808692)
endif
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FN3))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function FT3 takes nothing returns boolean
if GetSpellAbilityId()==1093678166 and ZXI(GetSpellTargetUnit())==false then
call FS3()
endif
return false
endfunction
function CM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FT3))
set t=null
endfunction
function FR3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer ZLI=(LoadInteger(ZY,(GetHandleId(XTI)),(281)))
local boolean FP3=(LoadBoolean(ZY,(V0I),(280)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetUnitTurnSpeed(XTI,GetUnitDefaultTurnSpeed(XTI))
call SaveInteger(ZY,(GetHandleId(XTI)),(281),(0))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call TZI(XTI,0,0)
elseif ZLI==0 then
call SetUnitTurnSpeed(XTI,GetUnitDefaultTurnSpeed(XTI))
call SaveInteger(ZY,(GetHandleId(XTI)),(281),(0))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and FP3==false then
if ZLI>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093748044)>0 and(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
call SaveBoolean(ZY,(V0I),(280),(true))
if BBI then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",XTI,"chest"))
call XNI(XSI,XTI,1,0.5*(5+5*GetUnitAbilityLevel(XSI,1093748044))*ZLI)
elseif(GetEventDamage()>33 and IsUnitType(XTI,UNIT_TYPE_HERO)==true)or(GetEventDamage()>40 and IsUnitType(XTI,UNIT_TYPE_HERO)==false)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",XTI,"chest"))
call XNI(XSI,XTI,1,(5+5*GetUnitAbilityLevel(XSI,1093748044))*ZLI)
endif
call SaveBoolean(ZY,(V0I),(280),(false))
endif
else
call SetUnitTurnSpeed(XTI,GetUnitDefaultTurnSpeed(XTI)*0.3)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function FQ3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real SV1=(LoadReal(ZY,(GetHandleId(XTI)),(675)))
local integer StickyCount=(LoadInteger(ZY,(GetHandleId(XTI)),(281)))
if(TimerGetElapsed(M))-SV1>=8 then
call SetUnitTurnSpeed(XTI,GetUnitDefaultTurnSpeed(XTI))
call SaveInteger(ZY,(GetHandleId(XTI)),(281),(0))
call TZI(XTI,0,0)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function FU3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
local trigger t
local integer V0I
local integer WTI=GetUnitAbilityLevel(XSI,1093748044)
local integer ZLI=IMinBJ((LoadInteger(ZY,(GetHandleId(XTI)),(281)))+1,10)
if XDI(XTI)then
set XSI=null
set XTI=null
return
endif
call TZI(XTI,WTI,ZLI)
call SaveInteger(ZY,(GetHandleId(XTI)),(281),(ZLI))
call SaveReal(ZY,(GetHandleId(XTI)),(675),(((TimerGetElapsed(M)))*1.0))
call SetUnitTurnSpeed(XTI,GetUnitDefaultTurnSpeed(XTI)*0.3)
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
call K5I(GetOwningPlayer(XSI),I2S(ZLI)+"!",2,XTI,0.026,50,0,255,216)
endif
if ZLI==1 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveBoolean(ZY,(V0I),(280),(false))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function FR3))
endif
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,8,false)
call TriggerAddCondition(t,Condition(function FQ3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function G03 takes nothing returns nothing
local group g=ZJI()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit XSI=GetTriggerUnit()
call GroupEnumUnitsInRange(g,x,y,400,Condition(function S0I))
call ForGroup(g,function FU3)
call KZI(GetOwningPlayer(XSI),2,x,y,500)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y+130))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y-130))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+130,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+130,y+130))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+130,y-130))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-130,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-130,y+130))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-130,y-130))
call RemoveLocation(l)
call ZYI(g)
set g=null
set l=null
set XSI=null
endfunction
function GI3 takes nothing returns boolean
if GetSpellAbilityId()==1093748044 then
call G03()
endif
return false
endfunction
function HN1 takes nothing returns nothing
local integer i
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GI3))
set B1I[1]=1093752899
set B1I[2]=1093752898
set B1I[3]=1093752884
set B1I[4]=1093752885
set B1I[5]=1093752886
set B1I[6]=1093752887
set B1I[7]=1093752897
set B1I[8]=1093752888
set B1I[9]=1093752889
set B1I[10]=1093752900
set BOI[1]=1093752909
set BOI[2]=1093752901
set BOI[3]=1093752902
set BOI[4]=1093752903
set BOI[5]=1093752904
set BOI[6]=1093752905
set BOI[7]=1093752906
set BOI[8]=1093752907
set BOI[9]=1093752910
set BOI[10]=1093752908
set B2I[1]=1093752911
set B2I[2]=1093752918
set B2I[3]=1093752919
set B2I[4]=1093752913
set B2I[5]=1093752914
set B2I[6]=1093752915
set B2I[7]=1093752920
set B2I[8]=1093752916
set B2I[9]=1093752917
set B2I[10]=1093752912
set B3I[1]=1093752921
set B3I[2]=1093752922
set B3I[3]=1093753141
set B3I[4]=1093753142
set B3I[5]=1093753143
set B3I[6]=1093753137
set B3I[7]=1093753138
set B3I[8]=1093753139
set B3I[9]=1093753140
set B3I[10]=1093753136
set i=1
loop
exitwhen i>10
call YVI(B1I[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>10
call YVI(BOI[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>10
call YVI(B2I[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>10
call YVI(B3I[i])
set i=i+1
endloop
set t=null
endfunction
function G13 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real d=(LoadReal(ZY,(V0I),(138)))
local real x1=(LoadReal(ZY,(V0I),(6)))
local real y1=(LoadReal(ZY,(V0I),(7)))
local real x2
local real y2
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>10 then
call KCI(GetUnitX(XTI),GetUnitY(XTI),200)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set x2=x1+d*Cos(a)
set y2=y1+d*Sin(a)
if(IsPointInRegion(ZN,((x2)*1.0),((y2)*1.0)))==false then
call SaveReal(ZY,(V0I),(6),((x2)*1.0))
call SaveReal(ZY,(V0I),(7),((y2)*1.0))
call SetUnitX(XTI,x2)
call SetUnitY(XTI,y2)
else
call SetUnitX(XTI,x1)
call SetUnitY(XTI,y1)
endif
endif
set t=null
set XTI=null
return false
endfunction
function GO3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093744982)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G13))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(137),((Atan2(GetUnitY(XTI)-B8I,GetUnitX(XTI)-B7I))*1.0))
call SaveReal(ZY,(V0I),(138),((YQI((400-JAI(B7I,B8I,GetUnitX(XTI),GetUnitY(XTI))),10)/10)*1.0))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XTI))*1.0))
set XSI=null
set XTI=null
set t=null
call XNI(B4I,GetEnumUnit(),1,B6I*75)
endfunction
function G23 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real a=(LoadReal(ZY,(V0I),(137)))
local group g=ZJI()
local unit XTI
local real x=GetUnitX(T0I)
local real y=GetUnitY(T0I)
set x=YEI(x+30*Cos(a))
set y=YHI(y+30*Sin(a))
call SetUnitX(T0I,x)
call SetUnitY(T0I,y)
set OK=T0I
call GroupEnumUnitsInRange(g,x,y,125,Condition(function SOI))
set XTI=FirstOfGroup(g)
call ZYI(g)
if GetTriggerEvalCount(t)>55 or XTI!=null then
set B4I=XSI
set B6I=(LoadInteger(ZY,(V0I),(5)))
set B5I=XTI
if XTI==null then
set B7I=x
set B8I=y
else
set B7I=GetUnitX(XTI)
set B8I=GetUnitY(XTI)
endif
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,400,Condition(function SOI))
if XTI!=null then
call GroupRemoveUnit(g,XTI)
call SUI(XSI,XTI,0.3)
call XNI(B4I,XTI,1,B6I*75)
endif
call ForGroup(g,function GO3)
call SetUnitScale(T0I,7,7,7)
call KillUnit(T0I)
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set T0I=null
set XSI=null
set g=null
return false
endfunction
function G33 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093744982)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1747990617,GetUnitX(XSI),GetUnitY(XSI),a*bj_RADTODEG)
call RemoveLocation(l)
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call TriggerRegisterTimerEvent(t,0.04,true)
call TriggerAddCondition(t,Condition(function G23))
set XSI=null
set T0I=null
set l=null
set t=null
endfunction
function G43 takes nothing returns boolean
if GetSpellAbilityId()==1093744982 then
call G33()
endif
return false
endfunction
function HS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G43))
set t=null
endfunction
function G53 takes nothing returns nothing
local unit XSI=B9I
local unit UO1=GetEnumUnit()
local unit XTI
local group g
if GetUnitCurrentOrder(UO1)==0 then
set g=ZJI()
set OK=UO1
call GroupEnumUnitsInRange(g,GetUnitX(UO1),GetUnitY(UO1),825,Condition(function SOI))
set XTI=FirstOfGroup(g)
if XTI!=null then
call GroupRemoveUnit(g,XTI)
endif
if FirstOfGroup(g)==null and XTI==XSI then
call IssueTargetOrder(UO1,"attack",XTI)
endif
call ZYI(g)
set XTI=null
set g=null
endif
set XSI=null
set UO1=null
endfunction
function G63 takes unit XSI returns nothing
local group g=ZJI()
set OK=XSI
set B9I=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),1000,Condition(function SRI))
call ForGroup(g,function G53)
call ZYI(g)
set g=null
endfunction
function G73 takes nothing returns nothing
call XNI(B9I,GetEnumUnit(),1,BCI*10)
endfunction
function G83 takes unit XSI,integer V0I,integer ZLI returns nothing
local group g1=ZJI()
local group g2=ZJI()
local integer i=0
set OK=XSI
loop
exitwhen i>ZLI
call GroupEnumUnitsInRange(g2,(LoadReal(ZY,(V0I),(2300+i))),(LoadReal(ZY,(V0I),(2500+i))),225,Condition(function SOI))
call GroupAddGroup(g2,g1)
call GroupClear(g2)
set i=i+1
endloop
call ZYI(g2)
if FirstOfGroup(g1)!=null then
set B9I=XSI
set BCI=GetUnitAbilityLevel(XSI,1093744986)
set BAI=CreateUnit(GetOwningPlayer(XSI),1697656901,0,0,0)
call KKI(BAI,1093744981)
call SetUnitAbilityLevel(BAI,1093744981,BCI)
call ForGroup(g1,function G73)
endif
call ZYI(g1)
set g1=null
set g2=null
endfunction
function G93 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local integer i
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>300 then
set i=0
loop
exitwhen i>ZLI
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(2700+i))))
set i=i+1
endloop
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set x=GetUnitX(XSI)
set y=GetUnitY(XSI)
if D2==true then
call G63(XSI)
endif
if JAI(x,y,DE2,DF2)>125 then
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
call SaveEffectHandle(ZY,(V0I),(2700+ZLI),(AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",x,y)))
call SaveReal(ZY,(V0I),(2300+ZLI),((x)*1.0))
call SaveReal(ZY,(V0I),(2500+ZLI),((y)*1.0))
endif
if ModuloInteger(GetTriggerEvalCount(t),10)==0 then
set BBI=true
call G83(XSI,V0I,ZLI)
set BBI=false
endif
call KCI(GetUnitX(XSI),GetUnitY(XSI),100)
endif
return false
endfunction
function GA3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G93))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveEffectHandle(ZY,(V0I),(2700),(AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",GetUnitX(XSI),GetUnitY(XSI))))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XSI))*1.0))
call SaveReal(ZY,(V0I),(2300),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(2500),((GetUnitY(XSI))*1.0))
set XSI=null
set t=null
endfunction
function GB3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if KMI(XSI)then
return false
endif
if GetUnitTypeId(XSI)==1328558390 then
call SetUnitFlyHeight(XSI,170,0)
elseif GetUnitTypeId(XSI)==1328558391 then
call SetUnitFlyHeight(XSI,220,0)
endif
set t=null
set XSI=null
return false
endfunction
function GC3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,2,true)
call TriggerAddCondition(t,Condition(function GB3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function GD3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function GE3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function GD3))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
set XSI=null
set t=null
endfunction
function GF3 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093744986 then
if GetUnitTypeId(GetTriggerUnit())==1328558390 then
call GA3()
elseif IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY)then
call GE3()
endif
endif
else
if GetLearnedSkill()==1093744986 and GetUnitAbilityLevel(GetTriggerUnit(),1093744986)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call GC3()
endif
endif
return false
endfunction
function HT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function GF3))
set t=null
endfunction
function GG3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local real d=JAI(GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))
local real a
local real SQI=(LoadReal(ZY,(V0I),(57)))
local real x0=(LoadReal(ZY,(V0I),(282)))
local real y0=(LoadReal(ZY,(V0I),(283)))
local real x1
local real y1
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>R2I(20*SQI)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(T0I)
call SetUnitPathing(XTI,true)
call KCI(GetUnitX(XTI),GetUnitY(XTI),175)
else
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
if JAI(x0,y0,GetUnitX(XSI),GetUnitY(XSI))>400 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(T0I)
call SetUnitPathing(XTI,true)
call KCI(GetUnitX(XTI),GetUnitY(XTI),175)
else
call SaveReal(ZY,(V0I),(282),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(283),((GetUnitY(XSI))*1.0))
if d>300 then
set a=Atan2(GetUnitY(XTI)-GetUnitY(XSI),GetUnitX(XTI)-GetUnitX(XSI))
set x1=GetUnitX(XSI)+300*Cos(a)
set y1=GetUnitY(XSI)+300*Sin(a)
if(IsPointInRegion(ZN,((x1)*1.0),((y1)*1.0)))==false then
call SetUnitX(XTI,x1)
call SetUnitY(XTI,y1)
endif
endif
endif
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
return false
endfunction
function GH3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1966092377,GetUnitX(XSI),GetUnitY(XSI),0)
local integer WTI=GetUnitAbilityLevel(XSI,1093744975)
if WTI==0 then
set WTI=GetUnitAbilityLevel(XSI,1093750102)+2
endif
call KKI(T0I,1093744974)
call SetUnitAbilityLevel(T0I,1093744974,GetUnitAbilityLevel(XSI,1093744975))
call IssueTargetOrder(T0I,"magicleash",XTI)
call SetUnitPathing(T0I,false)
call SetUnitPathing(XTI,false)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function GG3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveReal(ZY,(V0I),(57),((2.5+WTI*0.5)*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\AerialShackles\\AerialShacklesTarget.mdl",XTI,"chest")))
call SaveReal(ZY,(V0I),(282),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(283),((GetUnitY(XSI))*1.0))
set t=null
set XSI=null
set XTI=null
set T0I=null
endfunction
function GZ3 takes nothing returns boolean
if(GetSpellAbilityId()==1093744975 or GetSpellAbilityId()==1093750102)and ZXI(GetSpellTargetUnit())==false and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 then
call GH3()
endif
return false
endfunction
function HR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GZ3))
set t=null
endfunction
function GV3 takes unit XSI,unit XTI,real GL2 returns nothing
call SetUnitState(XSI,UNIT_STATE_LIFE,GetUnitState(XSI,UNIT_STATE_LIFE)+GetUnitState(XTI,UNIT_STATE_MAX_LIFE)*GL2)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl",XSI,"overhead"))
endfunction
function GW3 takes nothing returns boolean
if KMI(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1093684293)>0 and IsUnitEnemy(BDI,GetOwningPlayer(GetFilterUnit()))then
call GV3(GetFilterUnit(),BDI,GetUnitAbilityLevel(GetFilterUnit(),1093684293)*0.1*0.5)
endif
return false
endfunction
function GX3 takes unit XSI,unit XTI,integer WTI returns nothing
local group g=ZJI()
set BDI=XTI
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),250,Condition(function GW3))
call ZYI(g)
set BDI=null
set g=null
endfunction
function GY3 takes nothing returns boolean
local unit XSI=GetKillingUnit()
local unit XTI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093684293)
if IsUnitIllusion(XTI)==false and IsUnitType(XTI,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(XTI)!=1848651852 then
if IsUnitType(XTI,UNIT_TYPE_HERO)==false then
if WTI>0 then
call GV3(XSI,XTI,WTI*0.05+0.05)
endif
else
if WTI>0 then
call GV3(XSI,XTI,WTI*0.1)
else
call GX3(XSI,XTI,WTI)
endif
endif
endif
set XSI=null
set XTI=null
return false
endfunction
function CN1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function GY3))
set t=null
endfunction
function GJ3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local real d=SquareRoot((DE2-x)*(DE2-x)+(DF2-y)*(DF2-y))
local real JL2=0.2*WTI*d
local integer PIO=(LoadInteger(ZY,(V0I),(25)))
if d>1300 then
set JL2=0
endif
if JL2>5 then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",XTI,"origin"))
endif
if JL2>0 and KMI(XTI)==false then
call XNI(XSI,XTI,3,JL2)
endif
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
call SaveInteger(ZY,(V0I),(25),(PIO+1))
if KMI(XTI)then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif PIO>4*(3+2*WTI)then
call UnitRemoveAbility(XTI,1093683528)
call UnitRemoveAbility(XTI,1110456396)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function GK3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093684296)
call KKI(XTI,1093683528)
call SetUnitAbilityLevel(XTI,1093683528,WTI)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",XTI,"chest"))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XTI))*1.0))
call SaveInteger(ZY,(V0I),(25),(0))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function GJ3))
call XNI(XSI,XTI,3,50+100*WTI)
set XSI=null
set XTI=null
set t=null
endfunction
function GL3 takes nothing returns boolean
if GetSpellAbilityId()==1093684296 and ZXI(GetSpellTargetUnit())==false then
call GK3()
endif
return false
endfunction
function CS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GL3))
set t=null
endfunction
function GM3 takes nothing returns nothing
if KMI(BHI)==true or IsUnitInGroup(GetEnumUnit(),BGI)==false or GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)>0.4 then
call GroupRemoveUnit(BFI,GetEnumUnit())
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(BHI),false)
endif
endfunction
function GN3 takes nothing returns nothing
if KMI(BHI)==false and IsUnitInGroup(GetEnumUnit(),BFI)==false and IsUnitIllusion(GetEnumUnit())==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<0.4 then
call GroupAddUnit(BFI,GetEnumUnit())
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(BHI),true)
endif
endfunction
function GS3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group GT3=(LoadGroupHandle(ZY,(V0I),(22)))
local group g=ZJI()
local integer WTI=GetUnitAbilityLevel(XSI,1093683512)
set OK=XSI
set BHI=XSI
set BFI=GT3
set BZI=WTI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),25+1500*WTI,Condition(function SYI))
call ForGroup(g,function GN3)
set BGI=g
call ForGroup(BFI,function GM3)
if FirstOfGroup(BFI)==null then
call UnitRemoveAbility(XSI,BEI[1])
call UnitRemoveAbility(XSI,BEI[2])
call UnitRemoveAbility(XSI,BEI[3])
call UnitRemoveAbility(XSI,BEI[4])
call UnitRemoveAbility(XSI,1093808436)
else
if WTI==1 then
call UnitRemoveAbility(XSI,BEI[2])
call UnitRemoveAbility(XSI,BEI[3])
call UnitRemoveAbility(XSI,BEI[4])
call UnitRemoveAbility(XSI,1110459701)
call UnitRemoveAbility(XSI,1110459700)
call UnitRemoveAbility(XSI,1110459702)
elseif WTI==2 then
call UnitRemoveAbility(XSI,BEI[1])
call UnitRemoveAbility(XSI,BEI[3])
call UnitRemoveAbility(XSI,BEI[4])
call UnitRemoveAbility(XSI,1110455634)
call UnitRemoveAbility(XSI,1110459700)
call UnitRemoveAbility(XSI,1110459702)
elseif WTI==3 then
call UnitRemoveAbility(XSI,BEI[1])
call UnitRemoveAbility(XSI,BEI[2])
call UnitRemoveAbility(XSI,BEI[4])
call UnitRemoveAbility(XSI,1110455634)
call UnitRemoveAbility(XSI,1110459701)
call UnitRemoveAbility(XSI,1110459702)
elseif WTI==4 then
call UnitRemoveAbility(XSI,BEI[1])
call UnitRemoveAbility(XSI,BEI[2])
call UnitRemoveAbility(XSI,BEI[3])
call UnitRemoveAbility(XSI,1110455634)
call UnitRemoveAbility(XSI,1110459701)
call UnitRemoveAbility(XSI,1110459700)
endif
call KKI(XSI,BEI[WTI])
call KKI(XSI,1093808436)
call UnitMakeAbilityPermanent(XSI,true,BEI[WTI])
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),BEI[WTI],false)
endif
call ZYI(g)
set t=null
set XSI=null
set g=null
set GT3=null
return false
endfunction
function GR3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function GS3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveGroupHandle(ZY,(V0I),(22),(ZJI()))
set t=null
set XSI=null
endfunction
function GP3 takes nothing returns boolean
if GetLearnedSkill()==1093683512 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093683512)==1 then
call GR3()
endif
return false
endfunction
function CR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function GP3))
set BEI[1]=1093808432
set BEI[2]=1093808433
set BEI[3]=1093808434
set BEI[4]=1093808435
set t=null
endfunction
function GQ3 takes nothing returns boolean
if GetSpellAbilityId()==1093682499 and GetSpellTargetUnit()!=GetTriggerUnit()and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
return false
endfunction
function CT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function GQ3))
set t=null
endfunction
function GU3 takes nothing returns boolean
return GetUnitTypeId(GetSummonedUnit())==1865429043
endfunction
function H03 takes nothing returns nothing
local unit HI3=GetSummonedUnit()
local unit H13=GetSummoningUnit()
local integer V0I=GetHandleId(H13)
local integer WTI=GetUnitAbilityLevel(H13,1093681735)
local integer HO3=(LoadInteger(ZY,(V0I),(279)))
local unit H23=(LoadUnitHandle(ZY,(V0I),(1400+1)))
local integer x=1
set HO3=HO3+1
call SetUnitVertexColorBJ(HI3,100,100,100,80)
call KKI(HI3,1097625443)
call SaveUnitHandle(ZY,(V0I),(1400+HO3),(HI3))
if(HO3>WTI*2)then
call KillUnit(H23)
loop
exitwhen x==HO3
call SaveUnitHandle(ZY,(V0I),(1400+x),((LoadUnitHandle(ZY,(V0I),(1400+x+1)))))
set x=x+1
endloop
set HO3=HO3-1
endif
call SaveInteger(ZY,(V0I),(279),(HO3))
call SetUnitAbilityLevel(HI3,1093681734,WTI)
endfunction
function CP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function GU3))
call TriggerAddAction(t,function H03)
endfunction
function H33 takes unit H13 returns nothing
local integer V0I=GetHandleId(H13)
local integer WTI=GetUnitAbilityLevel(H13,1093681735)
local integer HO3=(LoadInteger(ZY,(V0I),(279)))
local integer x=1
local unit K3O
loop
exitwhen x>HO3
set K3O=(LoadUnitHandle(ZY,(V0I),(1400+x)))
call SetUnitAbilityLevel(K3O,1093681734,WTI)
set x=x+1
endloop
endfunction
function H43 takes nothing returns boolean
return GetLearnedSkill()==1093681735 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function H53 takes nothing returns nothing
local unit H13=(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(366)))
if H13==null then
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
else
if IsUnitType(H13,UNIT_TYPE_HERO)==true then
if GetUnitAbilityLevel(H13,1110454595)>0 then
call KKI(H13,1093677617)
else
call UnitRemoveAbility(H13,1093677617)
endif
else
if GetUnitAbilityLevel(H13,1110454595)>0 then
call KKI(H13,1093810499)
else
call UnitRemoveAbility(H13,1093810499)
endif
endif
endif
set H13=null
endfunction
function H63 takes unit XSI returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,1.50)
call TriggerAddAction(t,function H53)
call SaveUnitHandle(ZY,(GetHandleId(t)),(366),(XSI))
set t=null
endfunction
function H73 takes nothing returns boolean
if GetUnitTypeId(GetSummonedUnit())==1848652101 or GetUnitTypeId(GetSummonedUnit())==1848652089 then
call H63(GetSummonedUnit())
endif
return false
endfunction
function H83 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local trigger t
if(GetUnitAbilityLevel(Y9I,1093681735)==1)then
call H63(Y9I)
else
call H33(Y9I)
endif
set Y9I=null
endfunction
function CQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function H43))
call TriggerAddAction(t,function H83)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function H73))
endfunction
function H93 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and TKI(GetSpellAbilityId())and GetSpellTargetUnit()==V8I)then
if KMI(V8I)==false then
call UnitRemoveAbility(V8I,1093687122)
call UnitRemoveAbility(V8I,1110454597)
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
return false
endfunction
function HA3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,14,false)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H93))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl",V8I,"origin")))
call KKI(V8I,1093687122)
call SetUnitAbilityLevel(V8I,1093687122,GetUnitAbilityLevel(V8I,1093687121))
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093687122,false)
endfunction
function HB3 takes nothing returns boolean
if GetSpellAbilityId()==1093687121 then
call HA3()
endif
return false
endfunction
function CU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HB3))
set t=null
endfunction
function HC3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEvalCount(t)>300 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetUnitAbilityLevel(XTI,1110459703)>0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call XNI(XSI,XTI,1,GetUnitAbilityLevel(XSI,1093681736)*75)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function HD3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
call TriggerRegisterTimerEvent(t,0.01,true)
call TriggerAddCondition(t,Condition(function HC3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function HE3 takes nothing returns boolean
if GetSpellAbilityId()==1093681736 then
call HD3()
endif
return false
endfunction
function D01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HE3))
set t=null
endfunction
function HF3 takes nothing returns boolean
return GetSpellAbilityId()==1093678389
endfunction
function HG3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real XPI=(LoadReal(ZY,(V0I),(20)))
call XNI(XSI,XTI,1,XPI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function HH3 takes nothing returns nothing
local location YV1=GetUnitLoc(GetSpellTargetUnit())
local integer WTI=GetUnitAbilityLevel(GetTriggerUnit(),1093678389)
local integer HZ3=GetRandomInt(1,WTI+1)
local unit Y9I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real XPI=GetRandomReal(1,200)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local texttag tt=CreateTextTag()
if WTI==2 then
set XPI=GetRandomReal(50,225)
elseif WTI==3 then
set XPI=GetRandomReal(75,250)
elseif WTI==4 then
set XPI=GetRandomReal(100,275)
endif
call TriggerRegisterTimerEvent(t,J8I(Y9I,XTI)/1500,false)
call TriggerAddCondition(t,Condition(function HG3))
call SaveUnitHandle(ZY,(V0I),(2),(Y9I))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
if(WTI==4)then
set HZ3=GetRandomInt(2,4)
endif
call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(Y9I),YV1,bj_UNIT_FACING)
call KKI(bj_lastCreatedUnit,1093678165)
call SetUnitAbilityLevel(bj_lastCreatedUnit,1093678165,HZ3)
call IssueTargetOrder(bj_lastCreatedUnit,"thunderbolt",XTI)
call K3I(I2S(HZ3),HZ3,XTI,0.03,127,127,255,255)
call SetTextTagText(tt,"+"+I2S(R2I(XPI)),0.025)
call SetTextTagPosUnit(tt,XTI,10)
call SetTextTagColor(tt,255,0,0,255)
call SetTextTagVelocity(tt,0,0.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,2)
if IsUnitVisible(XTI,GetLocalPlayer())or XJI(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set t=null
set tt=null
endfunction
function D11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HF3))
call TriggerAddAction(t,function HH3)
endfunction
function HV3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call PWI(XSI,0)
set t=null
set XSI=null
return false
endfunction
function HW3 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(BYI)and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(BYI)and IsUnitIllusion(GetFilterUnit())==true then
call SetUnitX(GetFilterUnit(),BWI)
call SetUnitY(GetFilterUnit(),BXI)
call IssueTargetOrder(GetFilterUnit(),"attack",BJI)
endif
return false
endfunction
function HX3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real B92=JPI(J4I,J5I,J6I,J7I)
local real J3I=JAI(J4I,J5I,J6I,J7I)
local real d=GetRandomReal(J3I*0.3,J3I*0.8)
local integer WTI=GetUnitAbilityLevel(XSI,1093685847)
local real KUI=J4I+d*Cos(B92*bj_DEGTORAD)
local real L0I=J5I+d*Sin(B92*bj_DEGTORAD)
local unit u=CreateUnit(GetOwningPlayer(XSI),BVI,KUI,L0I,0)
local unit u2
local group g
local trigger t
local integer V0I
call SetUnitX(XSI,KUI)
call SetUnitY(XSI,L0I)
call SetUnitFacing(XSI,-B92)
call PlaySoundOnUnitBJ(OC,100,XTI)
if IsUnitEnemy(XTI,GetOwningPlayer(XSI))and GetUnitTypeId(XTI)!=1848651852 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.2,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HV3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
call PWI(XSI,25*WTI)
set KUI=J4I+(d-25)*Cos(B92*bj_DEGTORAD)
set L0I=J5I+(d-25)*Sin(B92*bj_DEGTORAD)
call V5I(XTI,4405,1)
call SetUnitX(XTI,KUI)
call SetUnitY(XTI,L0I)
call SetUnitFacing(XTI,B92)
call IssueTargetOrder(XSI,"attack",XTI)
set g=ZJI()
set BWI=KUI
set BXI=L0I
set BYI=XSI
set BJI=XTI
call GroupEnumUnitsInRange(g,J4I,J5I,1400,Condition(function HW3))
call ZYI(g)
set u2=CreateUnit(GetOwningPlayer(XSI),BVI,KUI,L0I,0)
call KillUnit(u2)
endif
call KillUnit(u)
set XSI=null
set XTI=null
set u=null
set u2=null
set g=null
endfunction
function HY3 takes nothing returns boolean
if GetSpellAbilityId()==1093685847 then
call HX3()
endif
return false
endfunction
function HJ3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit u=CreateUnit(GetOwningPlayer(V8I),BVI,GetUnitX(V8I),GetUnitY(V8I),0)
call PlaySoundOnUnitBJ(OC,100,V8I)
call KillUnit(u)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set u=null
set t=null
set V8I=null
return false
endfunction
function HK3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerAddCondition(t,Condition(function HJ3))
call TriggerRegisterTimerEvent(t,0.3,false)
call SaveUnitHandle(ZY,(V0I),(14),(GetTriggerUnit()))
set t=null
endfunction
function HL3 takes nothing returns boolean
if GetSpellAbilityId()==1093685847 then
call HK3()
endif
return false
endfunction
function DI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HY3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function HL3))
set t=null
endfunction
function HM3 takes nothing returns boolean
return GetLearnedSkill()==1095263841 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function HN3 takes nothing returns nothing
if(UnitHasBuffBJ(GetTriggerUnit(),1112504171))then
call UnitRemoveAbility(GetTriggerUnit(),1112504171)
endif
call DisableTrigger(GetTriggeringTrigger())
endfunction
function ER1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function HM3))
call TriggerAddAction(t,function HN3)
endfunction
function HS3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real HT3=GetUnitState(XSI,UNIT_STATE_LIFE)
call UnitRemoveAbility(XSI,1093751344)
call UnitRemoveAbility(XSI,1110459445)
call PWI(XSI,0)
call PYI(XSI,0)
call SetUnitState(XSI,UNIT_STATE_LIFE,HT3)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function HR3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093678161)
local real HP3=GetUnitState(XTI,UNIT_STATE_LIFE)
local real HT3=GetUnitState(XSI,UNIT_STATE_LIFE)
local integer HQ3=R2I((0.02+0.02*WTI)*HP3)
local integer HU3=R2I((0.4+0.1*WTI)*HP3)
call PWI(XSI,HQ3)
call PYI(XSI,HU3)
call KKI(XSI,1093751344)
call SetUnitState(XTI,UNIT_STATE_LIFE,1)
call XNI(XSI,XTI,2,20)
call XNI(XSI,XTI,1,20)
call XNI(XSI,XTI,3,20)
call SetUnitState(XSI,UNIT_STATE_LIFE,HT3+HU3)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",XTI,"chest"))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,35,false)
call TriggerAddCondition(t,Condition(function HS3))
set XSI=null
set XTI=null
set t=null
endfunction
function Z03 takes nothing returns boolean
if GetSpellAbilityId()==1093678161 and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>0.5 and XBI(GetSpellTargetUnit())==false then
call HR3()
endif
return false
endfunction
function EP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z03))
set t=null
endfunction
function ZI3 takes integer x returns boolean
return x==1093678680 or x==1093681489 or x==1093743695 or x==1093684805 or x==1093743695 or x==1093747504
endfunction
function Z13 takes nothing returns boolean
return(GetLearnedSkill()==1093683526)and(IsUnitIllusion(GetTriggerUnit())==false)
endfunction
function ZO3 takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1110455896)>0 and(WVI(GetSpellAbilityId())or GetSpellAbilityId()==1093685065)and ZI3(GetSpellAbilityId())==false and I41(GetSpellAbilityId())==false
endfunction
function Z23 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit Y9I=GetTriggerUnit()
local unit Z33=(LoadUnitHandle(ZY,(V0I),(254)))
local integer FH2=GetUnitAbilityLevel(Z33,1093683526)
if GetRandomInt(1,100)<=FH2*10 and J2I(Y9I,Z33,1400)then
call SetUnitState(Y9I,UNIT_STATE_MANA,GetUnitState(Y9I,UNIT_STATE_MANA)+0.25*GetUnitState(Y9I,UNIT_STATE_MAX_MANA))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",Y9I,"overhead"))
endif
endfunction
function Z43 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local integer FH2=GetUnitAbilityLevel(Y9I,1093683526)
local trigger t
if(FH2==1)then
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZO3))
call TriggerAddAction(t,function Z23)
call SaveUnitHandle(ZY,(GetHandleId(t)),(254),(Y9I))
endif
if(FH2==1)then
call KKI(Y9I,1093685068)
elseif(FH2==2)then
call KKI(Y9I,1093685069)
elseif(FH2==3)then
call KKI(Y9I,1093685070)
elseif(FH2==4)then
call KKI(Y9I,1093685064)
endif
endfunction
function F91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Z13))
call TriggerAddAction(t,function Z43)
endfunction
function Z53 takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetTriggerUnit(),1110455897)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093685065)>0 and(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455897)
set d=0.01*(5+GetUnitAbilityLevel(GetEventDamageSource(),1093685065))*(GetUnitState(GetEventDamageSource(),UNIT_STATE_MANA)+100)
if(IsUnitType(GetTriggerUnit(),UNIT_TYPE_SUMMONED)==true or IsUnitIllusion(GetTriggerUnit()))and GetUnitTypeId(GetTriggerUnit())!=1848651828 and GetUnitTypeId(GetTriggerUnit())!=1848652088 and GetUnitTypeId(GetTriggerUnit())!=1848652099 and GetUnitTypeId(GetTriggerUnit())!=1848652103 and GetUnitTypeId(GetTriggerUnit())!=1848651861 and GetUnitTypeId(GetTriggerUnit())!=1848651865 and GetUnitTypeId(GetTriggerUnit())!=1848651866 then
set d=d+100*GetUnitAbilityLevel(GetEventDamageSource(),1093685065)
endif
call K3I("+"+I2S(R2I(d)),1,GetTriggerUnit(),0.023,191,64,255,216)
if(GetRandomInt(1,100)<=GetUnitAbilityLevel(GetEventDamageSource(),1093683526)*10)and((LoadBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(264)))==false)then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_MANA,GetUnitState(GetEventDamageSource(),UNIT_STATE_MANA)+0.25*GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_MANA))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",GetEventDamageSource(),"overhead"))
endif
call DisableTrigger(GetTriggeringTrigger())
call XNI(GetEventDamageSource(),GetTriggerUnit(),3,d)
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function Z63 takes nothing returns nothing
local trigger t
local unit XTI
local unit XSI
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set XTI=GetSpellTargetUnit()
set XSI=GetTriggerUnit()
else
set XTI=GetTriggerUnit()
set XSI=GetAttacker()
endif
if IsUnitIllusion(XSI)==false then
set t=CreateTrigger()
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
call SaveBoolean(ZY,(GetHandleId(t)),(264),(true))
else
call SaveBoolean(ZY,(GetHandleId(t)),(264),(false))
endif
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function Z53))
endif
set t=null
set XTI=null
set XSI=null
endfunction
function Z73 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093685065)>0 and(LoadBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))then
call Z63()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==OrderId("poisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263),(true))
elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(263),(false))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685065 then
call Z63()
endif
return false
endfunction
function Z83 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function Z73))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function Z93 takes nothing returns boolean
if GetLearnedSkill()==1093685065 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685065)==1 then
call Z83()
endif
return false
endfunction
function FA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Z93))
set t=null
endfunction
function ZA3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer ZB3=(LoadInteger(ZY,(V0I),(262)))
call SetHeroInt(XTI,GetHeroInt(XTI,false)+ZB3,true)
call SetHeroInt(XSI,GetHeroInt(XSI,false)-ZB3,true)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function ZC3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call SaveInteger(ZY,(GetHandleId((XTI))),((4303)),(2))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call SetUnitInvulnerable(XTI,false)
call PauseUnit(XTI,false)
call ShowUnit(XTI,true)
call ClearSelectionForPlayer(GetOwningPlayer(XTI))
call SelectUnitAddForPlayer(XTI,GetOwningPlayer(XTI))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function ZD3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093685066)
local integer ZB3=YSI(GetHeroInt(XTI,false),WTI*2)
local trigger t
local integer V0I
local unit T0I=CreateUnit(GetOwningPlayer(XTI),1865429305,GetUnitX(XTI),GetUnitY(XTI),0)
call UnitApplyTimedLife(T0I,1112820806,WTI+1)
if(IsUnitEnemy(XTI,GetOwningPlayer(XSI)))==false or ZXI(GetSpellTargetUnit())==false then
call SaveInteger(ZY,(GetHandleId((XTI))),((4303)),(1))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SelectUnitRemoveForPlayer(XTI,GetOwningPlayer(XTI))
call SetUnitInvulnerable(XTI,true)
call PauseUnit(XTI,true)
call ShowUnit(XTI,false)
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect("Abilities\\Spells\\Demon\\DarkConversion\\ZombifyTarget.mdl",GetUnitX(XTI),GetUnitY(XTI))))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call TriggerRegisterTimerEvent(t,WTI,false)
call TriggerAddCondition(t,Condition(function ZC3))
if(IsUnitEnemy(XTI,GetOwningPlayer(XSI)))==true then
call SetHeroInt(XTI,GetHeroInt(XTI,false)-ZB3,true)
call SetHeroInt(XSI,GetHeroInt(XSI,false)+ZB3,true)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(262),(ZB3))
call TriggerRegisterTimerEvent(t,60,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZA3))
endif
endif
set XSI=null
set XTI=null
set t=null
endfunction
function ZE3 takes nothing returns boolean
if GetSpellAbilityId()==1093685066 then
call ZD3()
endif
return false
endfunction
function ZF3 takes nothing returns nothing
if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))and GetSpellTargetUnit()!=GetTriggerUnit()then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endfunction
function ZG3 takes nothing returns boolean
if GetSpellAbilityId()==1093685066 then
call ZF3()
endif
return false
endfunction
function FB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZE3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZG3))
set t=null
endfunction
function ZH3 takes nothing returns boolean
return GetSpellAbilityId()==1093685067 or GetSpellAbilityId()==1093752407
endfunction
function ZZ3 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local unit Z33=GetTriggerUnit()
local integer ZV3=GetHeroInt(Z33,true)-GetHeroInt(XTI,true)
local integer array ZW3
local integer WTI=GetUnitAbilityLevel(Z33,1093685067)
local integer ZX3=7+1*WTI
if WTI==0 then
set WTI=GetUnitAbilityLevel(Z33,1093752407)
set ZX3=7+1*WTI+1
endif
set ZW3[1]=10
set ZW3[2]=30
set ZW3[3]=50
if(ZV3>0)then
call UnitDamageTarget(Z33,XTI,ZV3*ZX3,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call K3I(I2S(R2I(ZV3*ZX3)),3,XTI,0.023,216,30,30,216)
if(ZV3<ZW3[WTI])then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",XTI,"overhead"))
call SetUnitState(XTI,UNIT_STATE_MANA,GetUnitState(XTI,UNIT_STATE_MANA)*.25)
endif
endif
endfunction
function ZY3 takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)then
if(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))then
return true
endif
endif
return false
endfunction
function ZJ3 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local integer FH2=GetUnitAbilityLevel(Y9I,1093685067)
local real x=GetLocationX(GetSpellTargetLoc())
local real y=GetLocationY(GetSpellTargetLoc())
local group U4I=ZJI()
local integer T8I=0
if FH2==0 then
set FH2=GetUnitAbilityLevel(Y9I,1093752407)
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x,y))
loop
exitwhen T8I>=360
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x+(200+FH2*50)*Cos(T8I*bj_DEGTORAD),y+(200+FH2*50)*Sin(T8I*bj_DEGTORAD)))
set T8I=T8I+45
endloop
call GroupEnumUnitsInRange(U4I,x,y,300+FH2*100,Condition(function ZY3))
call ForGroup(U4I,function ZZ3)
call ZYI(U4I)
endfunction
function FC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZH3))
call TriggerAddAction(t,function ZJ3)
endfunction
function ZK3 takes nothing returns nothing
call XNI(BKI,GetEnumUnit(),1,BLI)
endfunction
function ZL3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group g
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
if GetTriggerEvalCount(t)>150 or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEvalCount(t)>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685575 and GetSpellTargetUnit()==XTI)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(31))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
set g=ZJI()
set OK=XSI
set BKI=XSI
set BLI=1.5+1.5*GetUnitAbilityLevel(XSI,1093685575)
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),250,Condition(function SOI))
call GroupRemoveUnit(g,XTI)
call ForGroup(g,function ZK3)
call ZYI(g)
set XTI=null
endif
set t=null
set XSI=null
set g=null
return false
endfunction
function ZM3 takes nothing returns nothing
local trigger t=CreateTrigger()
local effect fx=AddSpecialEffectTarget("war3mapImported\\NewSoulArmor.mdx",GetSpellTargetUnit(),"chest")
local integer V0I=GetHandleId(t)
call KEI(LC,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call SaveUnitHandle(ZY,(V0I),(17),(GetSpellTargetUnit()))
call SaveEffectHandle(ZY,(V0I),(31),(fx))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZL3))
set t=null
set fx=null
endfunction
function ZN3 takes nothing returns boolean
if GetSpellAbilityId()==1093685575 then
call ZM3()
endif
return false
endfunction
function GO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZN3))
set t=null
endfunction
function ZS3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local integer WTI
local unit XSI
local unit XTI
local real x1
local real y1
local real d
local real a
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set XTI=(LoadUnitHandle(ZY,(V0I),(17)))
set d=(LoadReal(ZY,(V0I),(138)))
set x=(LoadReal(ZY,(V0I),(6)))
set y=(LoadReal(ZY,(V0I),(7)))
set a=(LoadReal(ZY,(V0I),(137)))
set x1=GetUnitX(XTI)+d/15*Cos(a)
set y1=GetUnitY(XTI)+d/15*Sin(a)
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
call SetUnitPosition(XTI,x1,y1)
else
call SetUnitX(XTI,x1)
call SetUnitY(XTI,y1)
endif
if GetTriggerEvalCount(t)>15 then
set XSI=(LoadUnitHandle(ZY,(V0I),(2)))
set WTI=(LoadInteger(ZY,(V0I),(5)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call XNI(XSI,XTI,1,WTI*40)
set XSI=null
endif
set XTI=null
endif
set t=null
return false
endfunction
function ZT3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function ZS3))
call SaveReal(ZY,(V0I),(6),((BMI)*1.0))
call SaveReal(ZY,(V0I),(7),((BNI)*1.0))
call SaveReal(ZY,(V0I),(138),((JAI(BMI,BNI,GetUnitX(XTI),GetUnitY(XTI)))*1.0))
call SaveReal(ZY,(V0I),(137),((Atan2(BNI-GetUnitY(XTI),BMI-GetUnitX(XTI)))*1.0))
call SaveInteger(ZY,(V0I),(5),(BSI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function ZR3 takes nothing returns nothing
local group g=ZJI()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer WTI=GetUnitAbilityLevel(GetTriggerUnit(),1093685573)
local real r=200+100*WTI
set OK=GetTriggerUnit()
call KEI(CE,x,y)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Star Aura.mdx",x,y))
call GroupEnumUnitsInRange(g,x,y,r,Condition(function S5I))
set BMI=x
set BNI=y
set BSI=WTI
call ForGroup(g,function ZT3)
call KCI(x,y,200)
call RemoveLocation(l)
call ZYI(g)
set l=null
set g=null
endfunction
function ZP3 takes nothing returns boolean
if GetSpellAbilityId()==1093685573 then
call ZR3()
endif
return false
endfunction
function ZQ3 takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
if KDI(x,y)==false or(IsPointInRegion(ZN,((x)*1.0),((y)*1.0)))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652619))
endif
call RemoveLocation(l)
set l=null
endfunction
function ZU3 takes nothing returns boolean
if GetSpellAbilityId()==1093685573 then
call ZQ3()
endif
return false
endfunction
function G11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZP3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZU3))
set t=null
endfunction
function V03 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call UnitRemoveAbility(XTI,1110456151)
call UnitRemoveAbility(XTI,1113746543)
call UnitRemoveAbility(XTI,1110455858)
call UnitRemoveAbility(XTI,1110455861)
call UnitRemoveAbility(XTI,1113813619)
call UnitRemoveAbility(XTI,1110454582)
call UnitRemoveAbility(XTI,1110455634)
return false
endfunction
function VI3 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,GetUnitAbilityLevel(GetTriggerUnit(),1093685815)*1.5+1.5,false)
call TriggerAddCondition(t,Condition(function V03))
call SaveUnitHandle(ZY,(GetHandleId(t)),(17),(GetSpellTargetUnit()))
call KEI(TD,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call DestroyEffect(AddSpecialEffectTarget("effects\\Surge.mdx",GetSpellTargetUnit(),"origin"))
endfunction
function V13 takes nothing returns boolean
if GetSpellAbilityId()==1093685815 then
call VI3()
endif
return false
endfunction
function G21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V13))
set t=null
endfunction
function VO3 takes boolean HZ2 returns boolean
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit V23=(LoadUnitHandle(ZY,(V0I),(259)))
local unit XTI=GetTriggerUnit()
local unit V33=CreateUnit(GetOwningPlayer(V23),1697657171,GetUnitX(XTI),GetUnitY(XTI),0)
local unit V8I=L1[GetPlayerId(GetOwningPlayer(V23))]
local integer WTI=GetUnitAbilityLevel(V8I,1093685579)
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093808465)
endif
call SetUnitAbilityLevel(V23,1093685580,WTI)
set BTI=GetUnitX(XTI)
set BRI=GetUnitY(XTI)
set BPI=XTI
if HZ2 and IsUnitAlly(XTI,GetOwningPlayer(V23))==true then
call SetUnitAbilityLevel(V23,1093685580,4)
call IssueTargetOrderById(V23,852274,XTI)
else
call IssueTargetOrderById(V23,852274,XTI)
call XNI(V23,XTI,1,150)
endif
call UnitApplyTimedLife(V33,1112820806,0.5)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(XTI),GetUnitY(XTI)))
set V23=null
set XTI=null
return false
endfunction
function V43 takes nothing returns boolean
local group g
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer((LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(259)))))and(GetUnitTypeId((GetFilterUnit()))==1211117642)==false then
set g=(LoadGroupHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(257)))
if IsUnitInGroup(GetFilterUnit(),g)==false then
call GroupAddUnit(g,GetFilterUnit())
call VO3(false)
endif
endif
set g=null
return false
endfunction
function V53 takes nothing returns boolean
local group g
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and(GetUnitTypeId((GetFilterUnit()))==1211117642)==false then
set g=(LoadGroupHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(257)))
if IsUnitInGroup(GetFilterUnit(),g)==false then
call GroupAddUnit(g,GetFilterUnit())
call VO3(true)
endif
endif
set g=null
return false
endfunction
function WallOfReplica_FindSource takes nothing returns nothing
if GetPlayerId(GetOwningPlayer(GetEnumUnit()))==MJ then
call GroupAddUnit(EK,GetEnumUnit())
endif
endfunction
function V63 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call GroupRemoveUnit((LoadGroupHandle(ZY,(V0I),(257))),(LoadUnitHandle(ZY,(V0I),(261))))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call FlushChildHashtable(ZY,(V0I))
call DisableTrigger(t)
set t=null
return false
endfunction
function V73 takes nothing returns boolean
local unit V23=GetSummoningUnit()
local unit SP2=GetSummonedUnit()
local integer V0I=GetHandleId(V23)
local integer V83=(LoadInteger(ZY,(V0I),(260)))
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,SP2,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function V63))
call SaveGroupHandle(ZY,(GetHandleId(t)),(257),((LoadGroupHandle(ZY,(V0I),(257)))))
call SaveUnitHandle(ZY,(GetHandleId(t)),(261),(BPI))
set V83=V83+1
call SaveInteger(ZY,(V0I),(260),(V83))
call SaveInteger(ZY,(V0I),(2800+V83),(ZZI(SP2)))
call SaveTriggerHandle(ZY,(V0I),(2900+V83),(t))
call SetUnitX(SP2,BTI)
call SetUnitY(SP2,BRI)
set V23=null
set SP2=null
return false
endfunction
function V93 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function VA3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer Z72=GetHandleId(t)
local trigger VB3=(LoadTriggerHandle(ZY,(Z72),(255)))
local integer UX1=GetHandleId(VB3)
local trigger VC3=(LoadTriggerHandle(ZY,(UX1),(256)))
local group VD3=(LoadGroupHandle(ZY,(UX1),(257)))
local group VE3=(LoadGroupHandle(ZY,(UX1),(258)))
local unit V23=(LoadUnitHandle(ZY,(UX1),(259)))
local integer VF3=GetHandleId(V23)
local integer V83=(LoadInteger(ZY,(VF3),(260)))
local integer VG3
local integer i
local unit u
call ForGroup(VE3,function V93)
set i=1
loop
exitwhen i>V83
set VG3=(LoadInteger(ZY,(VF3),(2800+i)))
set u=ZGI(VG3)
call FlushChildHashtable(ZY,(GetHandleId((LoadTriggerHandle(ZY,(VF3),(2900+i))))))
call ZSI((LoadTriggerHandle(ZY,(VF3),(2900+i))))
if IsUnitIllusion(u)then
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(u),GetUnitY(u)))
call RemoveUnit(u)
call ZFI(VG3)
endif
set i=i+1
endloop
call FlushChildHashtable(ZY,(Z72))
call FlushChildHashtable(ZY,(UX1))
call FlushChildHashtable(ZY,(VF3))
call RemoveUnit(V23)
call ZYI(VD3)
call ZYI(VE3)
call ZSI(VB3)
call ZSI(VC3)
call ZSI(t)
set t=null
set VB3=null
set VC3=null
set VD3=null
set VE3=null
set V23=null
set u=null
return false
endfunction
function VH3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real VZ3=GetUnitFacing(V8I)-45
local unit V23=CreateUnit(GetOwningPlayer(V8I),1747988559,x,y,VZ3)
local unit u
local real D22
local real D32
local integer i
local real T8I
local trigger t=CreateTrigger()
local group g1=ZJI()
local integer V0I=GetHandleId(t)
local group g2=ZJI()
local trigger VB3=t
local integer WTI=GetUnitAbilityLevel(V8I,1093685579)
local boolean HZ2=false
if WTI==0 then
set HZ2=true
set WTI=GetUnitAbilityLevel(V8I,1093808465)
endif
call SetUnitAbilityLevel(V23,1093685580,WTI)
call KEI(DE,x,y)
call SaveGroupHandle(ZY,(V0I),(257),(g1))
call SaveGroupHandle(ZY,(GetHandleId(V23)),(257),(g1))
call SaveGroupHandle(ZY,(V0I),(258),(g2))
call SaveUnitHandle(ZY,(V0I),(259),(V23))
call SaveInteger(ZY,(GetHandleId(V23)),(260),(0))
set i=0
loop
exitwhen i>39
set D22=x+(500-25*i)*Cos((VZ3-45)*bj_DEGTORAD)
set D32=y+(500-25*i)*Sin((VZ3-45)*bj_DEGTORAD)
set u=CreateUnit(GetOwningPlayer(V8I),1747988560,D22,D32,VZ3)
call GroupAddUnit(g2,u)
call TriggerRegisterUnitInRange(t,u,17,Condition(function HRI))
set i=i+1
endloop
if HZ2 then
call TriggerAddCondition(t,Condition(function V53))
else
call TriggerAddCondition(t,Condition(function V43))
endif
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,V23,EVENT_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function V73))
call SaveTriggerHandle(ZY,(V0I),(256),(t))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15*WTI,false)
call TriggerAddCondition(t,Condition(function VA3))
call SaveTriggerHandle(ZY,(GetHandleId(t)),(255),(VB3))
call RemoveLocation(l)
set V8I=null
set l=null
set u=null
set t=null
set VB3=null
set g1=null
set g2=null
set V23=null
endfunction
function VV3 takes nothing returns boolean
if GetSpellAbilityId()==1093685579 or GetSpellAbilityId()==1093808465 then
call VH3()
endif
return false
endfunction
function G31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VV3))
set t=null
endfunction
function VW3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer VX3=(LoadInteger(ZY,(V0I),(29)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(LoadBoolean(ZY,(V0I),(276)))==false and GetTriggerUnit()==(LoadUnitHandle(ZY,(V0I),(2)))then
call SaveBoolean(ZY,(V0I),(276),(true))
call SetHeroStr((LoadUnitHandle(ZY,(V0I),(2))),GetHeroStr((LoadUnitHandle(ZY,(V0I),(2))),false)-VX3,true)
elseif(LoadBoolean(ZY,(V0I),(277)))==false and GetTriggerUnit()==(LoadUnitHandle(ZY,(V0I),(17)))then
call SaveBoolean(ZY,(V0I),(277),(true))
call SetHeroStr((LoadUnitHandle(ZY,(V0I),(17))),GetHeroStr((LoadUnitHandle(ZY,(V0I),(17))),false)+VX3,true)
endif
else
if(LoadBoolean(ZY,(V0I),(276)))==false then
call SaveBoolean(ZY,(V0I),(276),(true))
call SetHeroStr((LoadUnitHandle(ZY,(V0I),(2))),GetHeroStr((LoadUnitHandle(ZY,(V0I),(2))),false)-VX3,true)
endif
if(LoadBoolean(ZY,(V0I),(277)))==false then
call SaveBoolean(ZY,(V0I),(277),(true))
call SetHeroStr((LoadUnitHandle(ZY,(V0I),(17))),GetHeroStr((LoadUnitHandle(ZY,(V0I),(17))),false)+VX3,true)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
return false
endfunction
function VY3 takes nothing returns nothing
local unit XSI=BQI
local unit XTI=GetEnumUnit()
local integer VX3
local integer WTI=BUI
local trigger t
local integer V0I
if IsUnitType(XTI,UNIT_TYPE_HERO)==true and GetUnitTypeId(XTI)!=1211117642 then
set VX3=IMinBJ(GetHeroStr(XTI,false)-1,4)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SetHeroStr(XSI,GetHeroStr(XSI,false)+VX3,true)
call SetHeroStr(XTI,GetHeroStr(XTI,false)-VX3,true)
call TriggerRegisterTimerEvent(t,18+3*WTI,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VW3))
call SaveBoolean(ZY,(V0I),(276),(false))
call SaveBoolean(ZY,(V0I),(277),(false))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(29),(VX3))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",XSI,"origin"))
endif
call XNI(XSI,XTI,1,40*WTI)
set XSI=null
set XTI=null
set t=null
endfunction
function VJ3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local group g=ZJI()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093743955)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1747990346,x,y,0)
call DestroyEffect(AddSpecialEffect("effects\\DecayGreen_Groundonly_1.mdx",x,y))
call RemoveLocation(l)
set OK=XSI
set BQI=XSI
set BUI=WTI
call GroupEnumUnitsInRange(g,x,y,325,Condition(function S5I))
call ForGroup(g,function VY3)
call ZYI(g)
call KillUnit(T0I)
set XSI=null
set l=null
set g=null
set t=null
set T0I=null
endfunction
function VK3 takes nothing returns boolean
if GetSpellAbilityId()==1093743955 then
call VJ3()
endif
return false
endfunction
function GE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VK3))
set t=null
endfunction
function VL3 takes nothing returns nothing
if COI<=C2I then
set COI=COI+1
call GroupAddUnit(C0I,GetEnumUnit())
endif
endfunction
function VM3 takes unit XSI,unit XTI returns nothing
call JUI("SPLK",GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI),0.1,0.6,0.44,.9,0.6)
endfunction
function VN3 takes nothing returns nothing
call SetUnitState(C1I,UNIT_STATE_LIFE,GetUnitState(C1I,UNIT_STATE_LIFE)+25)
if GetUnitTypeId(GetEnumUnit())!=1848657461 then
call MFI(GetEnumUnit(),25)
endif
call VM3(GetEnumUnit(),C1I)
endfunction
function VS3 takes nothing returns nothing
call XNI(CII,C1I,1,25)
if GetUnitTypeId(GetEnumUnit())!=1848657461 then
call MFI(GetEnumUnit(),25)
endif
call VM3(GetEnumUnit(),C1I)
endfunction
function VT3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local group g=ZJI()
local integer VR3=GetUnitAbilityLevel(V8I,1093685813)*5
set C0I=ZJI()
set COI=0
set C2I=VR3
set OK=V8I
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),1000,Condition(function SSI))
call GroupRemoveUnit(g,V8I)
call GroupRemoveUnit(g,GetSpellTargetUnit())
call ForGroup(g,function VL3)
call ZYI(g)
set g=C0I
set C1I=GetSpellTargetUnit()
set CII=V8I
if IsUnitAlly(C1I,GetOwningPlayer(V8I))then
call ForGroup(g,function VN3)
else
call ForGroup(g,function VS3)
endif
call ZYI(g)
set V8I=null
set g=null
endfunction
function VP3 takes nothing returns boolean
if GetSpellAbilityId()==1093685813 and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false or GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit()))then
call VT3()
endif
return false
endfunction
function GG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VP3))
set t=null
endfunction
function VQ3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit VU3=(LoadUnitHandle(ZY,(V0I),(269)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerUnit()==XTI then
call KillUnit(VU3)
endif
elseif U2==true then
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call PauseUnit(VU3,true)
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
call DisableTrigger(t)
call IssueTargetOrder(VU3,"attack",XTI)
call EnableTrigger(t)
elseif GetUnitState(XTI,UNIT_STATE_LIFE)<(100*C4I)and GetUnitAbilityLevel(VU3,1110458702)==0 then
call IssueTargetOrder(C5I[GetPlayerId(GetOwningPlayer(VU3))],"bloodlust",VU3)
elseif IsUnitVisible(XTI,GetOwningPlayer(VU3))==false then
if(LoadBoolean(ZY,(V0I),(270)))==true then
if(LoadBoolean(ZY,(V0I),(271)))==true then
if(LoadBoolean(ZY,(V0I),(272)))==true then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(VU3)
else
call SaveBoolean(ZY,(V0I),(272),(true))
endif
else
call SaveBoolean(ZY,(V0I),(271),(true))
endif
else
call SaveBoolean(ZY,(V0I),(270),(true))
endif
else
call SaveBoolean(ZY,(V0I),(270),(false))
call SaveBoolean(ZY,(V0I),(271),(false))
call SaveBoolean(ZY,(V0I),(272),(false))
endif
set t=null
set XTI=null
set VU3=null
return false
endfunction
function W03 takes nothing returns boolean
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=GetEnumUnit()
local unit VU3=CreateUnit(C3I,1848657461,GetUnitX(XTI),GetUnitY(XTI),0)
call IssueTargetOrder(VU3,"attack",XTI)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,VU3,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,VU3,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,VU3,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,VU3,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function VQ3))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(269),(VU3))
call SaveInteger(ZY,(V0I),(5),(C4I))
set t=null
set XTI=null
set VU3=null
return false
endfunction
function WI3 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1848657461 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function W13 takes player p returns nothing
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,p,Condition(function WI3))
call ZYI(g)
set g=null
endfunction
function WO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit W23=(LoadUnitHandle(ZY,(V0I),(266)))
local unit W33=(LoadUnitHandle(ZY,(V0I),(267)))
local unit W43=(LoadUnitHandle(ZY,(V0I),(268)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group g
local player MUO
if VLI(GetOwningPlayer(XSI))then
set MUO=DO[0]
else
set MUO=CO[0]
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(LoadBoolean(ZY,(V0I),(265)))then
call KZI(MUO,.4,GetUnitX(XSI),GetUnitY(XSI),600)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ShowUnit(XSI,false)
call RemoveUnit(W23)
call RemoveUnit(W33)
call RemoveUnit(W43)
call W13(GetOwningPlayer(XSI))
else
if IsUnitVisible(XSI,MUO)then
call SaveBoolean(ZY,(V0I),(265),(true))
endif
set g=ZJI()
set OK=XSI
set C3I=GetOwningPlayer(XSI)
set C4I=WTI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),25+200+200*WTI,Condition(function S1I))
if U2==false then
call ForGroup(g,function W03)
endif
call ZYI(g)
set g=null
endif
set t=null
set XSI=null
set W23=null
set W33=null
set W43=null
return false
endfunction
function W53 takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit XSI
local real D22
local real D32
local real W63
local unit W23
local unit W33
local unit W43
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(GetTriggerUnit(),1093743958)
local integer id
if WTI==1 then
set XSI=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657482,x,y,0)
elseif WTI==2 then
set XSI=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657481,x,y,0)
elseif WTI==3 then
set XSI=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657462,x,y,0)
else
set XSI=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657480,x,y,0)
endif
call KEI(NF,x,y)
set id=GetPlayerId(GetOwningPlayer(XSI))
if C5I[id]==null then
set C5I[id]=CreateUnit(GetOwningPlayer(XSI),1697657174,x,y,0)
call KKI(C5I[id],1093744438)
endif
call SetUnitPosition(XSI,YEI(x),YHI(y))
call UnitApplyTimedLife(XSI,1112820806,10+5*WTI)
call RemoveLocation(l)
call KCI(x,y,300)
set D22=x+200*Cos(0*bj_DEGTORAD)
set D32=y+200*Sin(0*bj_DEGTORAD)
set W63=JPI(D22,D32,x,y)
set W23=CreateUnit(GetOwningPlayer(XSI),1747990344,D22,D32,W63)
call SetUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
call QueueUnitAnimation(W23,"Stand Work Gold")
set D22=x+200*Cos(120*bj_DEGTORAD)
set D32=y+200*Sin(120*bj_DEGTORAD)
set W63=JPI(D22,D32,x,y)
set W33=CreateUnit(GetOwningPlayer(XSI),1747990344,D22,D32,W63)
call SetUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
call QueueUnitAnimation(W33,"Stand Work Gold")
set D22=x+200*Cos(240*bj_DEGTORAD)
set D32=y+200*Sin(240*bj_DEGTORAD)
set W63=JPI(D22,D32,x,y)
set W43=CreateUnit(GetOwningPlayer(XSI),1747990344,D22,D32,W63)
call SetUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call QueueUnitAnimation(W43,"Stand Work Gold")
call SetUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call QueueUnitAnimation(XSI,"Stand Work")
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,3,true)
call TriggerAddCondition(t,Condition(function WO3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(266),(W23))
call SaveUnitHandle(ZY,(V0I),(267),(W33))
call SaveUnitHandle(ZY,(V0I),(268),(W43))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveBoolean(ZY,(V0I),(265),(false))
call TriggerEvaluate(t)
set XSI=null
set W23=null
set W33=null
set W43=null
set l=null
endfunction
function W73 takes nothing returns boolean
if GetSpellAbilityId()==1093743958 then
call W53()
endif
return false
endfunction
function GF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W73))
set t=null
endfunction
function W83 takes unit VCI returns boolean
if REI(VCI,F20[Y30])!=null then
return true
endif
return false
endfunction
function FleshGolem_ValidCorpse takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==true then
set C6I=C6I+1
endif
return false
endfunction
function W93 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093743946)
call SetUnitAbilityLevel(XSI,1093743947,WTI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function WA3 takes nothing returns nothing
if IsUnitType(OK,UNIT_TYPE_HERO)==true then
if W83(AK)then
call SetUnitState(AK,UNIT_STATE_LIFE,GetUnitState(AK,UNIT_STATE_LIFE)+GetUnitState(AK,UNIT_STATE_MAX_LIFE)*0.10)
else
call SetUnitState(AK,UNIT_STATE_LIFE,GetUnitState(AK,UNIT_STATE_LIFE)+GetUnitState(AK,UNIT_STATE_MAX_LIFE)*0.06)
endif
else
if W83(AK)then
call SetUnitState(AK,UNIT_STATE_LIFE,GetUnitState(AK,UNIT_STATE_LIFE)+GetUnitState(AK,UNIT_STATE_MAX_LIFE)*0.03)
else
call SetUnitState(AK,UNIT_STATE_LIFE,GetUnitState(AK,UNIT_STATE_LIFE)+GetUnitState(AK,UNIT_STATE_MAX_LIFE)*0.02)
endif
endif
endfunction
function WB3 takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer UX1=GetHandleId(t2)
local trigger t1=(LoadTriggerHandle(ZY,(UX1),(274)))
local integer Z72=GetHandleId(t1)
local unit XSI=(LoadUnitHandle(ZY,(UX1),(2)))
local unit XTI
local real d
local real a
local boolean WC3=(LoadBoolean(ZY,(UX1),(273)))
if(GetTriggerEventId()==EVENT_UNIT_DEATH and GetTriggerUnit()==XSI)or(GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH)then
call FlushChildHashtable(ZY,(Z72))
call FlushChildHashtable(ZY,(UX1))
call ZSI(t1)
call ZSI(t2)
elseif GetTriggerEventId()==EVENT_UNIT_DEATH then
if IsUnitIllusion(GetDyingUnit())==false then
call LII(GetDyingUnit(),XSI,1747990361,"WA3",600)
endif
elseif WC3==false then
set XTI=GetTriggerUnit()
set d=J8I(XSI,XTI)
if d<775 and GetEventDamage()>4 then
if W83(XSI)then
set a=20+5*C7I
else
set a=15+5*C7I
endif
if d>200 then
set a=a-15*((d-150)/(775-150))
endif
call SaveBoolean(ZY,(UX1),(273),(true))
call XNI(GetEventDamageSource(),GetTriggerUnit(),3,GetEventDamage()*a/100)
call SaveBoolean(ZY,(UX1),(273),(false))
endif
endif
set t2=null
set t1=null
set XSI=null
set XTI=null
return false
endfunction
function WD3 takes nothing returns boolean
local trigger t1=GetTriggeringTrigger()
local integer Z72=GetHandleId(t1)
local trigger t2=(LoadTriggerHandle(ZY,(Z72),(275)))
local integer UX1=GetHandleId(t2)
local unit XTI=GetTriggerUnit()
local unit XSI=(LoadUnitHandle(ZY,(Z72),(2)))
if IsUnitEnemy(XSI,GetOwningPlayer(XTI))==true and IsUnitType(XTI,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(XTI,1093678162)==0 then
if(LoadBoolean(ZY,(UX1),(GetHandleId(XTI))))==false then
call TriggerRegisterUnitEvent(t2,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t2,XTI,EVENT_UNIT_DEATH)
call SaveBoolean(ZY,(UX1),(GetHandleId(XTI)),(true))
endif
endif
set t1=null
set t2=null
set XTI=null
set XSI=null
return false
endfunction
function WE3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t1=CreateTrigger()
local integer Z72=GetHandleId(t1)
local trigger t2=CreateTrigger()
local integer UX1=GetHandleId(t2)
local trigger t3=CreateTrigger()
local integer VF3=GetHandleId(t3)
local integer WTI=GetUnitAbilityLevel(XSI,1093743946)
set C7I=WTI
call TriggerRegisterUnitInRange(t1,XSI,750,Condition(function HRI))
call TriggerAddCondition(t1,Condition(function WD3))
call SaveTriggerHandle(ZY,(Z72),(275),(t2))
call SaveUnitHandle(ZY,(Z72),(2),(XSI))
call TriggerRegisterTimerEvent(t2,30,false)
call TriggerRegisterUnitEvent(t2,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t2,Condition(function WB3))
call SaveTriggerHandle(ZY,(UX1),(274),(t1))
call SaveUnitHandle(ZY,(UX1),(2),(XSI))
call SaveBoolean(ZY,(UX1),(273),(false))
call TriggerRegisterTimerEvent(t3,0.01,false)
call TriggerAddCondition(t3,Condition(function W93))
call SaveUnitHandle(ZY,(VF3),(2),(XSI))
set XSI=null
set t1=null
set t2=null
set t3=null
endfunction
function WF3 takes nothing returns boolean
if GetSpellAbilityId()==1093743946 and GetUnitTypeId(GetTriggerUnit())==1211117650 then
call WE3()
endif
return false
endfunction
function GH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WF3))
call YVI(1093743947)
set t=null
endfunction
function WG3 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),C9I)==false and XDI(GetEnumUnit())==false then
call GroupAddUnit(C9I,GetEnumUnit())
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),CAI,false)
call MQI(GetEnumUnit(),CAI,1,3,1110455633)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl",GetEnumUnit(),"overhead"))
endif
endfunction
function WH3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x2=(LoadReal(ZY,(V0I),(66)))
local real y2=(LoadReal(ZY,(V0I),(67)))
local real a=(LoadReal(ZY,(V0I),(137)))
local integer ZLI=GetTriggerEvalCount(t)
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local group g=ZJI()
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local integer WTI=GetUnitAbilityLevel(V8I,1093684299)
if JAI(x,y,x2,y2)<=C8I then
set x=x2
set y=y2
else
set x=DE2+65*Cos(a*bj_DEGTORAD)
set y=DF2+65*Sin(a*bj_DEGTORAD)
endif
if WTI==1 then
set CAI=1093810497
elseif WTI==2 then
set CAI=1093810489
elseif WTI==3 then
set CAI=1093810498
elseif WTI==4 then
set CAI=1093810488
endif
set OK=V8I
set C9I=BA2
call GroupEnumUnitsInRange(g,x,y,325,Condition(function SOI))
call ForGroup(g,function WG3)
call ZYI(g)
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
call SetUnitPosition(V8I,x,y)
if(x==x2 and y==y2)or ZLI>40 then
call SetUnitX(T0I,x)
call SetUnitY(T0I,y)
call IssueImmediateOrder(T0I,"thunderclap")
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitAnimation(V8I,"stand")
call SetUnitPathing(V8I,true)
call SetUnitInvulnerable(V8I,false)
if GetUnitTypeId(V8I)==1160786520 then
call SetUnitVertexColor(V8I,255,255,255,255)
else
call SetUnitVertexColor(V8I,0,255,150,255)
endif
call SaveInteger(ZY,(GetHandleId((V8I))),((4261)),(2))
endif
set t=null
set V8I=null
set T0I=null
return false
endfunction
function WZ3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location l
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real x1=GetUnitX(V8I)
local real y1=GetUnitY(V8I)
local real x2
local real y2
local real a
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,x1,y1,0)
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
else
set l=GetUnitLoc(GetSpellTargetUnit())
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=JPI(x1,y1,x2,y2)
call RemoveLocation(l)
call SetUnitAnimationByIndex(V8I,0)
call SetUnitPathing(V8I,false)
call SetUnitInvulnerable(V8I,true)
call SetUnitVertexColor(V8I,0,0,0,255)
call SaveInteger(ZY,(GetHandleId((V8I))),((4261)),(1))
call SaveReal(ZY,(V0I),(66),((x2)*1.0))
call SaveReal(ZY,(V0I),(67),((y2)*1.0))
call SaveReal(ZY,(V0I),(23),((x1)*1.0))
call SaveReal(ZY,(V0I),(24),((y1)*1.0))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
call KKI(T0I,1093684289)
call SetUnitAbilityLevel(T0I,1093684289,GetUnitAbilityLevel(V8I,1093684299))
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function WH3))
set V8I=null
set l=null
set t=null
set T0I=null
endfunction
function WV3 takes nothing returns boolean
if GetSpellAbilityId()==1093684299 then
call WZ3()
endif
return false
endfunction
function DO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WV3))
set t=null
endfunction
function WW3 takes nothing returns boolean
return GetLearnedSkill()==1093682010 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function WX3 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local real XPI=GetEventDamage()
if(XPI>0)and GetUnitState(Y9I,UNIT_STATE_LIFE)>1 then
if(GetRandomInt(1,100)<=(5+(5*GetUnitAbilityLevel(Y9I,1093682010))))then
call SetUnitState(Y9I,UNIT_STATE_LIFE,GetUnitState(Y9I,UNIT_STATE_LIFE)+XPI)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",Y9I,"hand,left"))
endif
endif
endfunction
function WY3 takes nothing returns nothing
local trigger t
if GetUnitAbilityLevel(GetTriggerUnit(),1093682010)==1 then
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerAddAction(t,function WX3)
endif
endfunction
function D31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function WW3))
call TriggerAddAction(t,function WY3)
endfunction
constant function Chronosphere_RawCode takes nothing returns integer
return 1093683761
endfunction
constant function Chronosphere_SphereCode takes nothing returns integer
return 1966092364
endfunction
function WJ3 takes nothing returns boolean
return GetSpellAbilityId()==(1093683761)or GetSpellAbilityId()==1093747767
endfunction
function WK3 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit WL3=(LoadUnitHandle(ZY,(V0I),(19)))
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
call DestroyTimer(t)
endfunction
function WM3 takes unit VCI returns boolean
local integer ID=GetUnitTypeId(VCI)
return ID==1869836340 or ID==1865429048 or ID==1865429049 or ID==1700946284 or ID==1697657398 or ID==1970107511 or ID==1966092370
endfunction
function WN3 takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())!=GetOwningPlayer(YO)and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or WM3(GetFilterUnit()))
endfunction
function WS3 takes nothing returns nothing
call PauseUnit(GetEnumUnit(),true)
call SetUnitTimeScale(GetEnumUnit(),0)
call UnitRemoveAbility(GetEnumUnit(),1112896364)
call UnitRemoveAbility(GetEnumUnit(),1112896368)
call UnitRemoveAbility(GetEnumUnit(),1112896372)
call SaveInteger(ZY,(GetHandleId((GetEnumUnit()))),((4306)),(1))
endfunction
function WT3 takes nothing returns nothing
call SaveInteger(ZY,(GetHandleId((GetEnumUnit()))),((4306)),(2))
call PauseUnit(GetEnumUnit(),false)
call SetUnitTimeScale(GetEnumUnit(),1)
endfunction
function WR3 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit WL3=(LoadUnitHandle(ZY,(V0I),(19)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group WP3=(LoadGroupHandle(ZY,(V0I),(220)))
local integer CI2=(LoadInteger(ZY,(V0I),(28)))
local real J6I=GetUnitX(WL3)
local real J7I=GetUnitY(WL3)
local boolexpr VE1=Condition(function WN3)
local group X22=ZJI()
local integer SQI=35+WTI*5
if GetUnitAbilityLevel(V8I,1093747767)>0 then
set SQI=30+WTI*10
endif
call ForGroup(WP3,function WT3)
set YO=V8I
call GroupEnumUnitsInRange(X22,J6I,J7I,425,VE1)
call GroupClear(WP3)
call GroupAddGroup(X22,WP3)
call ForGroup(X22,function WS3)
call ZYI(X22)
set CI2=CI2+1
call SaveInteger(ZY,(V0I),(28),(CI2))
if CI2>SQI then
if U2==false then
call ForGroup(WP3,function WT3)
endif
call RemoveUnit(WL3)
call ZYI(WP3)
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
call DestroyTimer(t)
endif
endfunction
function WQ3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,(1093683761))
local location XTI=GetSpellTargetLoc()
local real J6I=GetLocationX(XTI)
local real J7I=GetLocationY(XTI)
local unit WL3=CreateUnit(GetOwningPlayer(V8I),(1966092364),J6I,J7I,0)
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
local group WP3=ZJI()
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093747767)
endif
call SaveUnitHandle(ZY,(GetHandleId(t)),(19),(WL3))
call TimerStart(t,0.8,false,function WK3)
set t=CreateTimer()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(19),(WL3))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveGroupHandle(ZY,(V0I),(220),(WP3))
call SaveInteger(ZY,(V0I),(28),(0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TimerStart(t,0.1,true,function WR3)
call RemoveLocation(XTI)
endfunction
function D41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WJ3))
call TriggerAddAction(t,function WQ3)
endfunction
function WU3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(XSI,1110459186)==0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitTimeScale(XSI,1)
call SaveInteger(ZY,(GetHandleId((XSI))),((4280)),(2))
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",XSI,"origin"))
endif
set t=null
set XSI=null
return false
endfunction
function X03 takes unit XSI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SetUnitTimeScale(XSI,0)
call SaveInteger(ZY,(GetHandleId((XSI))),((4280)),(1))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function WU3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
endfunction
function XI3 takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(),1110459186)>0 and((LoadInteger(ZY,(GetHandleId((GetFilterUnit()))),((4280))))==1)==false then
call X03(GetFilterUnit())
endif
return false
endfunction
function X13 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group g=ZJI()
set CBI=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),450,Condition(function XI3))
call ZYI(g)
set t=null
set XSI=null
set g=null
return false
endfunction
function XO3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function X13))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function X23 takes nothing returns boolean
if GetLearnedSkill()==1093679153 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093679153)==1 then
call XO3()
endif
return false
endfunction
function D21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function X23))
set t=null
endfunction
function X33 takes unit u,real X43 returns nothing
local integer d=R2I(X43)
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer RVI
local real OVO
set CDI[0]=1093808968
set CDI[1]=1093808971
set CDI[2]=1093808972
set CDI[3]=1093808970
set CDI[4]=1093808969
set CDI[5]=1093808973
if d<1 then
call UnitRemoveAbility(u,CDI[0])
call UnitRemoveAbility(u,CDI[1])
call UnitRemoveAbility(u,CDI[2])
call UnitRemoveAbility(u,CDI[3])
call UnitRemoveAbility(u,CDI[4])
call UnitRemoveAbility(u,CDI[5])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set RVI=5
set i=0
loop
exitwhen i>RVI
if b[i]==1 then
call KKI(u,CDI[i])
call SetPlayerAbilityAvailable(GetOwningPlayer(u),CDI[i],false)
else
call UnitRemoveAbility(u,CDI[i])
endif
set i=i+1
endloop
endfunction
function X53 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,1093808967)
local real SV1=(LoadReal(ZY,(GetHandleId(XTI)),(682)))
local integer ZLI=(LoadInteger(ZY,(GetHandleId(XTI)),(683)))-1
call X33(XTI,ZLI*WTI)
call SaveInteger(ZY,(GetHandleId(XTI)),(683),(ZLI))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function X63 takes unit XSI,unit XTI returns nothing
local integer WTI=GetUnitAbilityLevel(XSI,1093808967)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=(LoadInteger(ZY,(GetHandleId(XTI)),(683)))+1
call X33(XTI,ZLI*WTI)
call SaveInteger(ZY,(GetHandleId(XTI)),(683),(ZLI))
call SaveReal(ZY,(GetHandleId(XTI)),(682),(((TimerGetElapsed(M))+CCI-0.01)*1.0))
call TriggerRegisterTimerEvent(t,CCI,false)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerAddCondition(t,Condition(function X53))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",XTI,"origin"))
set t=null
endfunction
function X73 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI then
call DisableTrigger(t)
if GetUnitAbilityLevel(XTI,1093678162)==0 then
call X63(XSI,XTI)
endif
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function X83 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XTI=GetTriggerUnit()
local unit XSI=GetAttacker()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function X73))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XTI=null
set XSI=null
set t=null
endfunction
function X93 takes nothing returns nothing
local unit XSI=GetAttacker()
if((LoadInteger(ZY,(GetHandleId((XSI))),((4307))))==1)==false then
call V5I(XSI,4307,0.3)
call X83()
endif
endfunction
function XA3 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093808967)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call X93()
endif
return false
endfunction
function XB3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function XA3))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function XC3 takes nothing returns boolean
if GetLearnedSkill()==1093808967 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093808967)==1 then
call XB3()
endif
return false
endfunction
function D51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function XC3))
set t=null
endfunction
function XD3 takes nothing returns nothing
local real XE3=YQI(YPI(GetUnitState(GetEnumUnit(),UNIT_STATE_MANA),CHI),0)
local real XF3=XE3*0.5
if XDI(GetEnumUnit())==false and XE3>0 then
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>XF3 then
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)-XF3)
else
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,1)
call XNI(CZI,GetEnumUnit(),1,XF3)
endif
call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)-XE3)
endif
endfunction
function XG3 takes unit XSI,integer XH3,integer XZ3 returns nothing
local group g=ZJI()
set CZI=XSI
set OK=XSI
set CHI=XH3*50+50
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),700,Condition(function SOI))
call ForGroup(g,function XD3)
call ZYI(g)
set g=null
endfunction
function XV3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit XW3
local real XX3=CGI-0.28*(LoadInteger(ZY,(V0I),(3000)))
local real XY3=CEI+(CFI-CEI)*ZLI/(XX3/0.05)
call SetUnitScale(T0I,XY3,XY3,XY3)
if ZLI>(XX3/0.05)then
call XG3(T0I,(LoadInteger(ZY,(V0I),(3000))),(LoadInteger(ZY,(V0I),(3002))))
set XW3=CreateUnit(GetOwningPlayer(T0I),1697657167,GetUnitX(T0I),GetUnitY(T0I),0)
call SetUnitTimeScale(XW3,0.3)
call RemoveUnit(T0I)
call KillUnit(XW3)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set T0I=null
set XW3=null
return false
endfunction
function XJ3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit XSI=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697657165,x,y,a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function XV3))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(3000),((LoadInteger(ZY,(GetHandleId(XSI)),(3000)))))
call SaveInteger(ZY,(V0I),(3001),((LoadInteger(ZY,(GetHandleId(XSI)),(3001)))))
call SaveInteger(ZY,(V0I),(3002),((LoadInteger(ZY,(GetHandleId(XSI)),(3002)))))
call RemoveLocation(l)
set t=null
set l=null
set XSI=null
endfunction
function XK3 takes nothing returns boolean
if GetSpellAbilityId()==1093686867 then
call XJ3()
endif
return false
endfunction
function XL3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XK3))
set t=null
endfunction
function XM3 takes unit XSI,unit XTI,integer XH3,integer XN3 returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local unit XS3=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local real XT3=0.5+0.3*XN3
if XN3==7 then
set XT3=2.5
endif
call KKI(T0I,1093687371)
call SetUnitAbilityLevel(T0I,1093687371,XN3)
call IssueTargetOrder(T0I,"cyclone",XTI)
call Y0I(XS3,XTI,1,77.5+(XH3+XN3)*23.0,XT3)
set T0I=null
set XS3=null
endfunction
function XR3 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EK)==false then
call GroupAddUnit(EK,GetEnumUnit())
call XM3(OK,GetEnumUnit(),MJ,NJ)
endif
endfunction
function XP3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local real x2=(LoadReal(ZY,(V0I),(66)))
local real y2=(LoadReal(ZY,(V0I),(67)))
local real a=(LoadReal(ZY,(V0I),(137)))
local integer XH3=(LoadInteger(ZY,(V0I),(3000)))
local integer XN3=(LoadInteger(ZY,(V0I),(3001)))
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
local real x=GetUnitX(T0I)+25*Cos(a)
local real y=GetUnitY(T0I)+25*Sin(a)
local group XQ3=ZJI()
local real J3I=JAI(x,y,x2,y2)
if J3I<=30 then
set x=x2
set y=y2
endif
call SetUnitX(T0I,YEI(x))
call SetUnitY(T0I,YEI(y))
set OK=T0I
set EK=g
set MJ=XH3
set NJ=XN3
call GroupEnumUnitsInRange(XQ3,x,y,200,Condition(function SOI))
call ForGroup(XQ3,function XR3)
call ZYI(XQ3)
if J3I<=30 or GetTriggerEvalCount(t)>125 then
call ZYI(g)
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set T0I=null
set g=null
set XQ3=null
return false
endfunction
function XU3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit XSI=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
local unit T0I
set x=GetUnitX(XSI)
set y=GetUnitY(XSI)
set T0I=CreateUnit(GetOwningPlayer(XSI),1848652117,x,y,a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function XP3))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveReal(ZY,(V0I),(66),((x+(400+400.0*(LoadInteger(ZY,(GetHandleId((XSI))),(3000))))*Cos(a))*1.0))
call SaveReal(ZY,(V0I),(67),((y+(400+400.0*(LoadInteger(ZY,(GetHandleId((XSI))),(3000))))*Sin(a))*1.0))
call SaveInteger(ZY,(V0I),(3000),((LoadInteger(ZY,(GetHandleId(XSI)),(3000)))))
call SaveInteger(ZY,(V0I),(3001),((LoadInteger(ZY,(GetHandleId(XSI)),(3001)))))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveGroupHandle(ZY,(V0I),(22),(ZJI()))
call RemoveLocation(l)
set t=null
set l=null
set XSI=null
endfunction
function Y03 takes nothing returns boolean
if GetSpellAbilityId()==1093686859 then
call XU3()
endif
return false
endfunction
function YI3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y03))
call YYI(1093687371,GetRandomReal(1,25))
set t=null
endfunction
function Y13 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call UnitRemoveAbility(XTI,1093686858)
call UnitRemoveAbility(XTI,1093742649)
if GetUnitAbilityLevel(XTI,1093686858)==0 or GetUnitAbilityLevel(XTI,1093742649)==0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function YO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1093686858)
call UnitRemoveAbility(XTI,1093742649)
if GetUnitAbilityLevel(XTI,1093686858)>0 or GetUnitAbilityLevel(XTI,1093742649)>0 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function Y13))
endif
set t=null
set XTI=null
return false
endfunction
function Y23 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer XH3=(LoadInteger(ZY,(GetHandleId(V8I)),(3000)))
local integer XZ3=(LoadInteger(ZY,(GetHandleId(V8I)),(3002)))
call KKI(XTI,1093686858)
call SetUnitAbilityLevel(XTI,1093686858,XH3)
call KKI(XTI,1093742649)
call SetUnitAbilityLevel(XTI,1093742649,XZ3)
call TriggerRegisterTimerEvent(t,9,false)
call TriggerAddCondition(t,Condition(function YO3))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsp\\SpeedTarget.mdl",XTI,"origin")))
set t=null
set V8I=null
set XTI=null
endfunction
function Y33 takes nothing returns boolean
if GetSpellAbilityId()==1093686865 then
call Y23()
endif
return false
endfunction
function Y43 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y33))
call YYI(1093686858,GetRandomReal(1,25))
call YYI(1093742649,GetRandomReal(1,25))
set t=null
endfunction
function Y53 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if GetUnitAbilityLevel(V8I,1110456408)==0 then
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitAbilityLevel(T0I,1093686856,(LoadInteger(ZY,(GetHandleId(V8I)),(3001))))
call SetUnitX(T0I,GetUnitX(V8I))
call SetUnitY(T0I,GetUnitY(V8I))
endif
set t=null
set T0I=null
set V8I=null
return false
endfunction
function Y63 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697657174,GetUnitX(V8I),GetUnitY(V8I),0)
call KKI(T0I,1093686856)
call SetUnitAbilityLevel(T0I,1093686856,(LoadInteger(ZY,(GetHandleId(V8I)),(3001))))
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function Y53))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
set t=null
set V8I=null
endfunction
function Y73 takes nothing returns boolean
if GetSpellAbilityId()==1093687372 then
call Y63()
endif
return false
endfunction
function Y83 takes unit V8I returns nothing
if GetUnitAbilityLevel(V8I,1093687372)>0 then
call SetUnitAbilityLevel(V8I,1093687372,(LoadInteger(ZY,(GetHandleId(V8I)),(3000))))
endif
endfunction
function Y93 takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false then
call Y83(GetTriggerUnit())
endif
return false
endfunction
function YA3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y73))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Y93))
call YYI(1093686856,GetRandomReal(1,25))
set t=null
endfunction
function YB3 takes unit XSI,unit XTI,integer XH3 returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093686868)
call SetUnitAbilityLevel(T0I,1093686868,XH3)
call IssueTargetOrder(T0I,"drunkenhaze",XTI)
set T0I=null
endfunction
function YC3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real GL2=(LoadReal(ZY,(V0I),(193)))
local integer XH3=(LoadInteger(ZY,(V0I),(3000)))
local integer XN3=(LoadInteger(ZY,(V0I),(3001)))
local integer HH2=XN3*25/3
local real x
local real y
local integer ZLI=GetTriggerEvalCount(t)
if ZLI>HH2/3 then
call SaveReal(ZY,(V0I),(193),((GL2*0.98)*1.0))
endif
if ZLI>HH2 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call YB3(XSI,XTI,XH3)
endif
else
set x=YEI(GetUnitX(XTI)+GL2*Cos(B92))
set y=YHI(GetUnitY(XTI)+GL2*Sin(B92))
call KCI(x,y,150)
call SetUnitPosition(XTI,x,y)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function YD3 takes unit XSI,unit XTI,integer XH3,integer XN3,integer XZ3 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real B92=Atan2(GetUnitY(XTI)-GetUnitY(XSI),GetUnitX(XTI)-GetUnitX(XSI))
call XNI(XSI,XTI,1,XZ3*40)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveReal(ZY,(V0I),(193),((6)*1.0))
call SaveInteger(ZY,(V0I),(3000),(XH3))
call SaveInteger(ZY,(V0I),(3001),(XN3))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YC3))
set t=null
endfunction
function YE3 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EK)==false and XDI(GetEnumUnit())==false then
call GroupAddUnit(EK,GetEnumUnit())
call YD3(OK,GetEnumUnit(),MJ,NJ,SJ)
endif
endfunction
function YF3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real x2=(LoadReal(ZY,(V0I),(66)))
local real y2=(LoadReal(ZY,(V0I),(67)))
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
local integer XH3=(LoadInteger(ZY,(V0I),(3000)))
local integer XN3=(LoadInteger(ZY,(V0I),(3001)))
local integer XZ3=(LoadInteger(ZY,(V0I),(3002)))
local real x=GetUnitX(T0I)
local real y=GetUnitY(T0I)
local group g2
if JAI(x,y,x2,y2)<100 then
set x=x2
set y=y2
else
set x=x+33*Cos(a)
set y=y+33*Sin(a)
endif
call SetUnitX(T0I,YEI(x))
call SetUnitY(T0I,YHI(y))
set g2=ZJI()
set OK=T0I
set EK=g
set MJ=XH3
set NJ=XN3
set SJ=XZ3
call GroupEnumUnitsInRange(g2,x,y,200,Condition(function SOI))
call ForGroup(g2,function YE3)
call ZYI(g2)
if(x==x2 and y==y2)or GetTriggerEvalCount(t)>35 then
set g2=ZJI()
set OK=T0I
set EK=g
set MJ=XH3
set NJ=XN3
set SJ=XZ3
call GroupEnumUnitsInRange(g2,x,y,250,Condition(function SOI))
call ForGroup(g2,function YE3)
call ZYI(g2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(T0I)
call ZYI(g)
endif
set t=null
set T0I=null
set g=null
set g2=null
return false
endfunction
function YG3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit XSI=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1848652120,GetUnitX(XSI),GetUnitY(XSI),a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function YF3))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveReal(ZY,(V0I),(66),((GetUnitX(XSI)+1000*Cos(a))*1.0))
call SaveReal(ZY,(V0I),(67),((GetUnitY(XSI)+1000*Sin(a))*1.0))
call SaveGroupHandle(ZY,(V0I),(22),(ZJI()))
call SaveInteger(ZY,(V0I),(3000),((LoadInteger(ZY,(GetHandleId(XSI)),(3000)))))
call SaveInteger(ZY,(V0I),(3001),((LoadInteger(ZY,(GetHandleId(XSI)),(3001)))))
call SaveInteger(ZY,(V0I),(3002),((LoadInteger(ZY,(GetHandleId(XSI)),(3002)))))
call RemoveLocation(l)
set t=null
set l=null
set XSI=null
endfunction
function YH3 takes nothing returns boolean
if GetSpellAbilityId()==1093686861 then
call YG3()
endif
return false
endfunction
function YZ3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YH3))
call YYI(1093686868,GetRandomReal(1,25))
set t=null
endfunction
function YV3 takes unit V8I returns real
local integer XZ3=(LoadInteger(ZY,(GetHandleId(V8I)),(3002)))
return(80+XZ3*30.0)/2
endfunction
function YW3 takes unit V8I returns real
local integer XH3=(LoadInteger(ZY,(GetHandleId(V8I)),(3000)))
local integer XN3=(LoadInteger(ZY,(GetHandleId(V8I)),(3001)))
local integer XZ3=(LoadInteger(ZY,(GetHandleId(V8I)),(3002)))
return 325+XH3*175.0
endfunction
function YX3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local real XPI=(LoadReal(ZY,(V0I),(20)))
local effect FX=(LoadEffectHandle(ZY,(V0I),(32)))
local integer ZLI=GetTriggerEvalCount(t)
call XNI(XSI,XTI,1,XPI)
if ZLI==3 then
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call DestroyEffect(FX)
endif
set t=null
set XSI=null
set XTI=null
set FX=null
return false
endfunction
function YY3 takes unit XSI,unit XTI,real XPI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Environment\\SmallBuildingFire\\SmallBuildingFire2.mdl",XTI,"chest")))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function YX3))
set t=null
endfunction
function YJ3 takes nothing returns nothing
call YY3(OK,GetEnumUnit(),TJ/5)
call XNI(OK,GetEnumUnit(),1,TJ)
endfunction
function YK3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local real a=(LoadReal(ZY,(V0I),(137)))
local integer ZLI=GetTriggerEvalCount(t)-30
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real KUI
local real L0I
local unit T0I
local group g
if ZLI==1 then
set T0I=CreateUnit(GetOwningPlayer(XSI),1697657164,x,y,a*bj_RADTODEG)
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
elseif ZLI>1 then
set T0I=(LoadUnitHandle(ZY,(V0I),(19)))
endif
if ZLI>0 then
set KUI=YEI(GetUnitX(T0I)+15*Cos(a))
set L0I=YHI(GetUnitY(T0I)+15*Sin(a))
call SetUnitX(T0I,KUI)
call SetUnitY(T0I,L0I)
if(ZLI>1 and ModuloInteger(ZLI,10)==0)or ZLI==1 then
set g=ZJI()
set OK=XSI
set TJ=YV3(XSI)
call GroupEnumUnitsInRange(g,KUI,L0I,300,Condition(function SOI))
call ForGroup(g,function YJ3)
call ZYI(g)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",KUI,L0I))
endif
if ZLI>YW3(XSI)/16.6 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(T0I)
endif
endif
set t=null
set g=null
set T0I=null
set XSI=null
return false
endfunction
function YL3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit XSI=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
local unit YM3=CreateUnit(GetOwningPlayer(XSI),1697657163,x,y,a*bj_RADTODEG)
call SetUnitTimeScale(YM3,0.5)
call UnitApplyTimedLife(YM3,1112820806,1.75)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function YK3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call RemoveLocation(l)
set t=null
set l=null
set XSI=null
endfunction
function YN3 takes nothing returns boolean
if GetSpellAbilityId()==1093686862 then
call YL3()
endif
return false
endfunction
function YS3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YN3))
set t=null
endfunction
function YT3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local real SV1=(LoadReal(ZY,(GetHandleId(XTI)),(3007)))
if SV1+5<=(TimerGetElapsed(M))then
call UnitRemoveAbility(XTI,1093686871)
endif
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XTI=null
return false
endfunction
function YR3 takes unit XTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XTI,1093686871)
if WTI==0 then
call KKI(XTI,1093686871)
endif
call SetUnitAbilityLevel(XTI,1093686871,WTI+1)
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveReal(ZY,(GetHandleId(XTI)),(3007),(((TimerGetElapsed(M)))*1.0))
call TriggerRegisterTimerEvent(t,5,false)
call TriggerAddCondition(t,Condition(function YT3))
set t=null
endfunction
function YP3 takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetTriggerUnit(),1110456625)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093686870)>0 and(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110456625)
call DisableTrigger(GetTriggeringTrigger())
call YR3(GetTriggerUnit())
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call ZSI(GetTriggeringTrigger())
endif
return false
endfunction
function YQ3 takes nothing returns nothing
local trigger t
local unit XTI
local unit XSI
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set XTI=GetSpellTargetUnit()
set XSI=GetTriggerUnit()
else
set XTI=GetTriggerUnit()
set XSI=GetAttacker()
endif
if IsUnitIllusion(XSI)==false then
set t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function YP3))
endif
set t=null
set XTI=null
set XSI=null
endfunction
function YU3 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093686870)>0 and(LoadBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(3008)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(2)))then
call YQ3()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==OrderId("poisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(3008),(true))
elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))then
call SaveBoolean(ZY,(GetHandleId(GetTriggeringTrigger())),(3008),(false))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093686870 then
call YQ3()
endif
return false
endfunction
function J03 takes unit XSI returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function YU3))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
call SaveBoolean(ZY,(GetHandleId(t)),(3008),(true))
set t=null
endfunction
function JI3 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function J13 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1848652343 then
return true
endif
return false
endfunction
function JO3 takes player p returns nothing
local group g=ZJI()
call GroupEnumUnitsOfPlayer(g,p,Condition(function J13))
call ForGroup(g,function JI3)
call ZYI(g)
set g=null
endfunction
function J23 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit T0I
local integer XN3=(LoadInteger(ZY,(GetHandleId(XSI)),(3001)))
local integer XZ3=(LoadInteger(ZY,(GetHandleId(XSI)),(3002)))
call JO3(GetOwningPlayer(XSI))
set T0I=CreateUnit(GetOwningPlayer(XSI),1848652343,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
call SetUnitColor(T0I,GetPlayerColor(CO[0]))
call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",T0I,"chest")
call UnitApplyTimedLife(T0I,1112820806,10+10*XN3)
call SetUnitAbilityLevel(T0I,1093686870,XZ3)
call J03(T0I)
if SI0[GetPlayerId(GetOwningPlayer(XSI))]then
call SelectUnitAddForPlayer(T0I,GetOwningPlayer(XSI))
endif
if XN3>3 and XZ3>3 then
set T0I=CreateUnit(GetOwningPlayer(XSI),1848652343,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
call SetUnitColor(T0I,GetPlayerColor(CO[0]))
call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",T0I,"chest")
call UnitApplyTimedLife(T0I,1112820806,10+10*XN3)
call SetUnitAbilityLevel(T0I,1093686870,XZ3)
call J03(T0I)
if SI0[GetPlayerId(GetOwningPlayer(XSI))]then
call SelectUnitAddForPlayer(T0I,GetOwningPlayer(XSI))
endif
endif
call SetPlayerTechResearched(GetOwningPlayer(XSI),1378889799,XZ3)
call SetPlayerTechResearched(GetOwningPlayer(XSI),1378889800,XN3)
set XSI=null
set T0I=null
endfunction
function J33 takes nothing returns boolean
if GetSpellAbilityId()==1093686863 then
call J23()
endif
return false
endfunction
function J43 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J33))
call YYI(1093686870,GetRandomReal(1,25))
call YYI(1093686871,GetRandomReal(1,25))
set t=null
endfunction
function J53 takes unit XSI returns integer
local integer WTI=(LoadInteger(ZY,(GetHandleId(XSI)),(3001)))
if WTI==1 then
return 1093808944
elseif WTI==2 then
return 1093808730
elseif WTI==3 then
return 1093808729
elseif WTI==4 then
return 1093808725
elseif WTI==5 then
return 1093808726
elseif WTI==6 then
return 1093808727
elseif WTI==7 then
return 1093808728
endif
return 1093808944
endfunction
function J63 takes unit XTI returns nothing
call UnitRemoveAbility(XTI,1093808944)
call UnitRemoveAbility(XTI,1093808730)
call UnitRemoveAbility(XTI,1093808729)
call UnitRemoveAbility(XTI,1093808725)
call UnitRemoveAbility(XTI,1093808726)
call UnitRemoveAbility(XTI,1093808727)
call UnitRemoveAbility(XTI,1093808728)
call UnitRemoveAbility(XTI,1110456410)
endfunction
function J73 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real R12=(LoadReal(ZY,(GetHandleId(XTI)),(681)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or R12<(TimerGetElapsed(M))then
call J63(XTI)
endif
set t=null
set XTI=null
return false
endfunction
function J83 takes nothing returns nothing
local unit XSI=OK
local unit XTI=GetEnumUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real R12=(LoadReal(ZY,(GetHandleId(XTI)),(681)))
if R12<(TimerGetElapsed(M))then
call KKI(XTI,J53(XSI))
endif
call SaveReal(ZY,(GetHandleId(XTI)),(681),(((TimerGetElapsed(M))+2)*1.0))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call TriggerRegisterTimerEvent(t,2.01,false)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerAddCondition(t,Condition(function J73))
set t=null
set XSI=null
endfunction
function J93 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real J4I=(LoadReal(ZY,(V0I),(6)))
local real J5I=(LoadReal(ZY,(V0I),(7)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real SQI=(LoadReal(ZY,(V0I),(57)))
local real x
local real y
local integer i=1
local integer ZLI=GetTriggerEvalCount(t)
local group g
if ZLI*0.1>SQI then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set OK=XSI
loop
exitwhen i>7
set x=J4I+80*i*Cos((a+90)*bj_DEGTORAD)
set y=J5I+80*i*Sin((a+90)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,105,Condition(function S5I))
call ForGroup(g,function J83)
set x=J4I+80*i*Cos((a-90)*bj_DEGTORAD)
set y=J5I+80*i*Sin((a-90)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,105,Condition(function S5I))
call ForGroup(g,function J83)
set i=i+1
endloop
call ZYI(g)
set g=null
endif
set t=null
set XSI=null
return false
endfunction
function JA3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real a=GetUnitFacing(XSI)
local integer i=1
local unit T0I
local real x
local real y
local real J4I=GetUnitX(XSI)+225*Cos(a*bj_DEGTORAD)
local real J5I=GetUnitY(XSI)+225*Sin(a*bj_DEGTORAD)
local integer XN3=(LoadInteger(ZY,(GetHandleId(XSI)),(3001)))
local integer XZ3=(LoadInteger(ZY,(GetHandleId(XSI)),(3002)))
local real SQI=1.5+1.5*XN3
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
loop
exitwhen i>7
set x=J4I+80*i*Cos((a+90)*bj_DEGTORAD)
set y=J5I+80*i*Sin((a+90)*bj_DEGTORAD)
set T0I=CreateUnit(GetOwningPlayer(XSI),1966092367,x,y,GetRandomReal(0,360))
call SetUnitAbilityLevel(T0I,1395667016,XN3)
call SetUnitAbilityLevel(T0I,1093687374,XZ3)
call SetUnitAnimation(T0I,"birth")
call QueueUnitAnimation(T0I,"stand")
call UnitApplyTimedLife(T0I,1112820806,SQI)
set x=J4I+80*i*Cos((a-90)*bj_DEGTORAD)
set y=J5I+80*i*Sin((a-90)*bj_DEGTORAD)
set T0I=CreateUnit(GetOwningPlayer(XSI),1966092367,x,y,GetRandomReal(0,360))
call SetUnitAbilityLevel(T0I,1395667016,XN3)
call SetUnitAbilityLevel(T0I,1093687374,XZ3)
call SetUnitAnimation(T0I,"birth")
call QueueUnitAnimation(T0I,"stand")
call UnitApplyTimedLife(T0I,1112820806,SQI)
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function J93))
call TriggerRegisterTimerEvent(t,0.1,true)
call SaveReal(ZY,(V0I),(6),((J4I)*1.0))
call SaveReal(ZY,(V0I),(7),((J5I)*1.0))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(57),((SQI)*1.0))
set T0I=null
set XSI=null
set t=null
endfunction
function JB3 takes nothing returns boolean
if GetSpellAbilityId()==1093686864 then
call JA3()
endif
return false
endfunction
function JC3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JB3))
call YYI(1395667016,GetRandomReal(1,25))
call YYI(1093687374,GetRandomReal(1,25))
set t=null
endfunction
function JD3 takes nothing returns nothing
if XBI(GetEnumUnit())==false then
call XNI(OK,GetEnumUnit(),1,TJ)
endif
endfunction
function JE3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real XPI=(LoadReal(ZY,(V0I),(20)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group g=ZJI()
local integer ZLI
set OK=V8I
call KZI(GetOwningPlayer(V8I),4,x,y,400)
call GroupEnumUnitsInRange(g,x,y,200,Condition(function SOI))
set ZLI=CountUnitsInGroup(g)
if ZLI<1 then
set ZLI=1
endif
set TJ=XPI/ZLI
call ForGroup(g,function JD3)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",x,y))
call ZYI(g)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
set g=null
return false
endfunction
function JF3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real XPI=(LoadInteger(ZY,(GetHandleId(V8I)),(3002)))*62.5+12.5+25
local string s=""
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(V8I))==true or(D2 and(GetLocalPlayer()==CS0 or GetLocalPlayer()==CT0))then
set s="Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl"
endif
call TriggerRegisterTimerEvent(t,1.7,false)
call TriggerAddCondition(t,Condition(function JE3))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect(s,x,y)))
call RemoveLocation(l)
set t=null
set V8I=null
set l=null
endfunction
function JG3 takes nothing returns boolean
if GetSpellAbilityId()==1093686855 then
call JF3()
endif
return false
endfunction
function JH3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JG3))
set t=null
endfunction
function JZ3 takes unit XSI,unit XTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093686857)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
if XDI(XTI)==false then
call XNI(XSI,XTI,1,30)
endif
set T0I=null
endfunction
function JV3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>10 and((LoadInteger(ZY,(GetHandleId((t))),((4263))))==1)==false and GetOwningPlayer(GetEventDamageSource())!=GetOwningPlayer(GetTriggerUnit())then
call DisableTrigger(t)
call JZ3(XSI,XTI)
call EnableTrigger(t)
call VII(t,4263,0.8-WTI*0.0285)
endif
else
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set XSI=null
return false
endfunction
function JW3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=(LoadInteger(ZY,(GetHandleId(V8I)),(3001)))
call TriggerRegisterTimerEvent(t,2.5+WTI*0.5,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function JV3))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(2),(V8I))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",XTI,"overhead")))
call JZ3(V8I,XTI)
set t=null
set V8I=null
set XTI=null
endfunction
function JX3 takes nothing returns boolean
if GetSpellAbilityId()==1093686874 then
call JW3()
endif
return false
endfunction
function JY3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JX3))
call YYI(1093686857,GetRandomReal(1,25))
set t=null
endfunction
function JJ3 takes unit V8I returns nothing
local integer V0I=GetHandleId(V8I)
local boolean JK3=(LoadBoolean(ZY,(V0I),(3003)))
local trigger t
if JK3 then
call SaveBoolean(ZY,(V0I),(3003),(false))
set t=(LoadTriggerHandle(ZY,(V0I),(3006)))
call FlushChildHashtable(ZY,(GetHandleId(t)))
call ZSI(t)
endif
set t=null
endfunction
function JL3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
call SetUnitState(V8I,UNIT_STATE_LIFE,GetUnitState(V8I,UNIT_STATE_LIFE)+WTI*1)
return false
endfunction
function JM3 takes unit V8I,integer WTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(V8I)
call SaveBoolean(ZY,(V0I),(3003),(true))
call SaveTriggerHandle(ZY,(V0I),(3006),(t))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(V8I))
call SaveInteger(ZY,(GetHandleId(t)),(5),(WTI))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function JL3))
set t=null
endfunction
function JN3 takes nothing returns nothing
local integer JS3=0
local unit V8I=GetTriggerUnit()
local integer V0I=GetHandleId(V8I)
local integer JT3=(LoadInteger(ZY,(V0I),(3013)))
local integer JR3=(LoadInteger(ZY,(V0I),(3014)))
local integer JP3=(LoadInteger(ZY,(V0I),(3015)))
local integer JQ3=(LoadInteger(ZY,(V0I),(3016)))
local integer JU3=(LoadInteger(ZY,(V0I),(3017)))
if JT3==3 and JR3==0 and JP3==0 then
set JS3=1
elseif JT3==2 and JR3==1 and JP3==0 then
set JS3=2
elseif JT3==2 and JR3==0 and JP3==1 then
set JS3=3
elseif JT3==1 and JR3==2 and JP3==0 then
set JS3=4
elseif JT3==1 and JR3==1 and JP3==1 then
set JS3=5
elseif JT3==1 and JR3==0 and JP3==2 then
set JS3=6
elseif JT3==0 and JR3==1 and JP3==2 then
set JS3=7
elseif JT3==0 and JR3==2 and JP3==1 then
set JS3=8
elseif JT3==0 and JR3==0 and JP3==3 then
set JS3=9
elseif JT3==0 and JR3==3 and JP3==0 then
set JS3=10
endif
if CVI[JS3]==JU3 then
return
endif
if GetUnitAbilityLevel(V8I,1093808473)==1 or GetUnitAbilityLevel(V8I,1093748565)==1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JU3,false)
set JU3=CVI[JS3]
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JU3,true)
else
if JQ3!=0 and JU3!=0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JQ3,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JU3,false)
set JQ3=JU3
set JU3=CVI[JS3]
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JQ3,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JU3,true)
elseif JQ3==0 and JU3!=0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JU3,false)
set JQ3=JU3
set JU3=CVI[JS3]
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JQ3,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JU3,true)
else
set JU3=CVI[JS3]
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),JU3,true)
endif
endif
call SaveInteger(ZY,(V0I),(3016),(JQ3))
call SaveInteger(ZY,(V0I),(3017),(JU3))
call Y83(V8I)
set V8I=null
endfunction
function K03 takes unit V8I returns nothing
local integer V0I=GetHandleId(V8I)
local integer JT3=(LoadInteger(ZY,(V0I),(3013)))
local integer JR3=(LoadInteger(ZY,(V0I),(3014)))
local integer JP3=(LoadInteger(ZY,(V0I),(3015)))
local integer XH3=GetUnitAbilityLevel(V8I,1093808472)
local integer XN3=GetUnitAbilityLevel(V8I,1093808471)
local integer XZ3=GetUnitAbilityLevel(V8I,1093808470)
call UnitRemoveAbility(V8I,1093687108)
call UnitRemoveAbility(V8I,1093686853)
call JJ3(V8I)
call UnitRemoveAbility(V8I,1093686839)
if JT3>0 then
call KKI(V8I,1093687108)
call KKI(V8I,1093686853)
call SetUnitAbilityLevel(V8I,1093687108,JT3*XH3)
call SetUnitAbilityLevel(V8I,1093686853,JT3*XH3)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093687108,false)
endif
if JR3>0 then
call JM3(V8I,JR3*XN3)
endif
if JP3>0 then
call KKI(V8I,1093686839)
call SetUnitAbilityLevel(V8I,1093686839,JP3*XZ3)
endif
endfunction
function KI3 takes unit V8I,integer JT3,integer JR3,integer JP3 returns nothing
local integer Orb1=0
local integer Orb2=0
local integer Orb3=0
local integer K13
local integer KO3
local integer K23
local integer K33
local integer K43
local integer K53
local integer K63
local integer K73
local integer K83
call UnitRemoveAbility(V8I,1093682254)
call UnitRemoveAbility(V8I,1093682247)
call UnitRemoveAbility(V8I,1093683544)
call UnitRemoveAbility(V8I,1093683505)
call UnitRemoveAbility(V8I,1093683504)
call UnitRemoveAbility(V8I,1093683290)
call UnitRemoveAbility(V8I,1093683523)
call UnitRemoveAbility(V8I,1093683522)
call UnitRemoveAbility(V8I,1093683524)
call UnitRemoveAbility(V8I,1093808707)
call UnitRemoveAbility(V8I,1093808708)
call UnitRemoveAbility(V8I,1093808709)
call UnitRemoveAbility(V8I,1093808710)
call UnitRemoveAbility(V8I,1093808711)
call UnitRemoveAbility(V8I,1093808712)
call UnitRemoveAbility(V8I,1093808713)
call UnitRemoveAbility(V8I,1093808714)
call UnitRemoveAbility(V8I,1093808715)
if RHI(V8I,YX0)==null then
set K13=1093682254
set KO3=1093682247
set K23=1093683544
set K33=1093683505
set K43=1093683504
set K53=1093683290
set K63=1093683523
set K73=1093683522
set K83=1093683524
else
set K13=1093808707
set KO3=1093808708
set K23=1093808709
set K33=1093808710
set K43=1093808711
set K53=1093808712
set K63=1093808713
set K73=1093808714
set K83=1093808715
endif
if JT3==1 and JR3==0 and JP3==0 then
call KKI(V8I,K13)
elseif JT3==0 and JR3==1 and JP3==0 then
call KKI(V8I,K33)
elseif JT3==0 and JR3==0 and JP3==1 then
call KKI(V8I,K63)
elseif JT3==2 and JR3==0 and JP3==0 then
call KKI(V8I,K13)
call KKI(V8I,KO3)
elseif JT3==1 and JR3==1 and JP3==0 then
call KKI(V8I,K13)
call KKI(V8I,K43)
elseif JT3==1 and JR3==0 and JP3==1 then
call KKI(V8I,K13)
call KKI(V8I,K73)
elseif JT3==0 and JR3==2 and JP3==0 then
call KKI(V8I,K33)
call KKI(V8I,K43)
elseif JT3==0 and JR3==1 and JP3==1 then
call KKI(V8I,K33)
call KKI(V8I,K73)
elseif JT3==0 and JR3==0 and JP3==2 then
call KKI(V8I,K63)
call KKI(V8I,K73)
elseif JT3==3 and JR3==0 and JP3==0 then
call KKI(V8I,K13)
call KKI(V8I,KO3)
call KKI(V8I,K23)
elseif JT3==2 and JR3==1 and JP3==0 then
call KKI(V8I,K13)
call KKI(V8I,KO3)
call KKI(V8I,K53)
elseif JT3==2 and JR3==0 and JP3==1 then
call KKI(V8I,K13)
call KKI(V8I,KO3)
call KKI(V8I,K83)
elseif JT3==1 and JR3==2 and JP3==0 then
call KKI(V8I,K13)
call KKI(V8I,K43)
call KKI(V8I,K53)
elseif JT3==1 and JR3==1 and JP3==1 then
call KKI(V8I,K13)
call KKI(V8I,K43)
call KKI(V8I,K83)
elseif JT3==1 and JR3==0 and JP3==2 then
call KKI(V8I,K13)
call KKI(V8I,K73)
call KKI(V8I,K83)
elseif JT3==0 and JR3==1 and JP3==2 then
call KKI(V8I,K63)
call KKI(V8I,K73)
call KKI(V8I,K53)
elseif JT3==0 and JR3==2 and JP3==1 then
call KKI(V8I,K33)
call KKI(V8I,K43)
call KKI(V8I,K83)
elseif JT3==0 and JR3==0 and JP3==3 then
call KKI(V8I,K63)
call KKI(V8I,K73)
call KKI(V8I,K83)
elseif JT3==0 and JR3==3 and JP3==0 then
call KKI(V8I,K33)
call KKI(V8I,K43)
call KKI(V8I,K53)
endif
endfunction
function K93 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer V0I=GetHandleId(V8I)
local integer KA3=GetSpellAbilityId()
local integer KB3=(LoadInteger(ZY,(V0I),(3010)))
local integer KC3=(LoadInteger(ZY,(V0I),(3011)))
local integer KD3=(LoadInteger(ZY,(V0I),(3012)))
local integer JT3=0
local integer JR3=0
local integer JP3=0
set KB3=KC3
set KC3=KD3
set KD3=KA3
if KB3==1093808472 then
set JT3=JT3+1
elseif KB3==1093808471 then
set JR3=JR3+1
elseif KB3==1093808470 then
set JP3=JP3+1
endif
if KC3==1093808472 then
set JT3=JT3+1
elseif KC3==1093808471 then
set JR3=JR3+1
elseif KC3==1093808470 then
set JP3=JP3+1
endif
if KD3==1093808472 then
set JT3=JT3+1
elseif KD3==1093808471 then
set JR3=JR3+1
elseif KD3==1093808470 then
set JP3=JP3+1
endif
call SaveInteger(ZY,(V0I),(3010),(KB3))
call SaveInteger(ZY,(V0I),(3011),(KC3))
call SaveInteger(ZY,(V0I),(3012),(KD3))
call SaveInteger(ZY,(V0I),(3013),(JT3))
call SaveInteger(ZY,(V0I),(3014),(JR3))
call SaveInteger(ZY,(V0I),(3015),(JP3))
call KI3(V8I,JT3,JR3,JP3)
call K03(V8I)
call Y83(V8I)
endfunction
function M71 takes nothing returns nothing
local unit V8I=OK
local integer V0I=GetHandleId(V8I)
local integer KB3=(LoadInteger(ZY,(V0I),(3010)))
local integer KC3=(LoadInteger(ZY,(V0I),(3011)))
local integer KD3=(LoadInteger(ZY,(V0I),(3012)))
local integer JT3=0
local integer JR3=0
local integer JP3=0
if KB3==1093808472 then
set JT3=JT3+1
elseif KB3==1093808471 then
set JR3=JR3+1
elseif KB3==1093808470 then
set JP3=JP3+1
endif
if KC3==1093808472 then
set JT3=JT3+1
elseif KC3==1093808471 then
set JR3=JR3+1
elseif KC3==1093808470 then
set JP3=JP3+1
endif
if KD3==1093808472 then
set JT3=JT3+1
elseif KD3==1093808471 then
set JR3=JR3+1
elseif KD3==1093808470 then
set JP3=JP3+1
endif
call KI3(V8I,JT3,JR3,JP3)
set V8I=null
endfunction
function KE3 takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false and(GetLearnedSkill()==1093808472 or GetLearnedSkill()==1093808471 or GetLearnedSkill()==1093808470)then
call K03(GetTriggerUnit())
if GetLearnedSkill()==1093808472 then
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+2,true)
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(3000),(GetUnitAbilityLevel(GetTriggerUnit(),1093808472)))
endif
if GetLearnedSkill()==1093808471 then
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+2,true)
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(3001),(GetUnitAbilityLevel(GetTriggerUnit(),1093808471)))
endif
if GetLearnedSkill()==1093808470 then
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+2,true)
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(3002),(GetUnitAbilityLevel(GetTriggerUnit(),1093808470)))
endif
endif
return false
endfunction
function KF3 takes nothing returns boolean
if GetSpellAbilityId()==1093808472 or GetSpellAbilityId()==1093808471 or GetSpellAbilityId()==1093808470 then
call K93()
elseif GetSpellAbilityId()==1093808473 or GetSpellAbilityId()==1093748565 then
call JN3()
endif
return false
endfunction
function VY1 takes nothing returns nothing
local unit V8I=OK
local integer i=1
local integer LCI
if GetUnitTypeId(V8I)!=1211117653 then
return
endif
loop
exitwhen i>11
set LCI=CVI[i]
call KKI(V8I,LCI)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),LCI,false)
set i=i+1
endloop
set V8I=null
endfunction
function KG3 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1211117653 and IsUnitIllusion(GetTriggerUnit())==false then
set OK=GetTriggerUnit()
call VY1()
elseif(GetUnitTypeId(GetTriggerUnit())==1432510828 or GetUnitTypeId(GetTriggerUnit())==1160786520)and IsUnitIllusion(GetTriggerUnit())==false then
set OK=GetTriggerUnit()
call ExecuteFunc("KH3")
elseif GetUnitTypeId(GetTriggerUnit())==1211117641 and IsUnitIllusion(GetTriggerUnit())==false then
set OK=GetTriggerUnit()
call ExecuteFunc("KZ3")
endif
return false
endfunction
function HI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YVI((CVI[1]))
call YVI((CVI[2]))
call YVI((CVI[3]))
call YVI((CVI[4]))
call YVI((CVI[5]))
call YVI((CVI[6]))
call YVI((CVI[7]))
call YVI((CVI[8]))
call YVI((CVI[9]))
call YVI((CVI[10]))
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KF3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function KE3))
set t=null
call JDI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653383))
call YYI(1093687375,GetRandomReal(1,25))
call YYI(1093687108,GetRandomReal(1,25))
call YYI(1093686853,GetRandomReal(1,25))
call YYI(1093686839,GetRandomReal(1,25))
call YYI(1093808470,GetRandomReal(1,25))
call YYI(1093808472,GetRandomReal(1,25))
call YYI(1093808471,GetRandomReal(1,25))
call XL3()
call YI3()
call Y43()
call YA3()
call YZ3()
call YS3()
call J43()
call JC3()
call JH3()
call JY3()
endfunction
function KV3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real XPI
if WTI==1 then
set XPI=15
elseif WTI==2 then
set XPI=30
elseif WTI==3 then
set XPI=40
elseif WTI==4 then
set XPI=50
endif
if GetTriggerEvalCount(t)==3 or GetTriggerEvalCount(t)==4 then
call XNI(XSI,XTI,1,XPI)
endif
if GetTriggerEvalCount(t)==4 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call UnitRemoveAbility(XTI,1093752403)
call UnitRemoveAbility(XTI,1110459470)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function KW3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,1095267426)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetEventDamageSource()==XSI and GetEventDamage()==0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function KV3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",XTI,"chest")))
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093752403,false)
call KKI(XTI,1093752403)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function KX3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real d=J8I(XSI,XTI)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function KW3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function KY3 takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"weapon"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"hand"))
endfunction
function KJ3 takes nothing returns boolean
if GetSpellAbilityId()==1095267426 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call KY3()
elseif ZXI(GetSpellTargetUnit())==false then
call KX3()
endif
endif
return false
endfunction
function HB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KJ3))
set t=null
endfunction
function KK3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call UnitAddAbility(T0I,1093809972)
call IssueImmediateOrder(T0I,"thunderclap")
call SelectUnitForPlayerSingle(XSI,GetOwningPlayer(XSI))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set T0I=null
return false
endfunction
function KL3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093677401)
if TimerGetRemaining(E70[GetPlayerId(GetOwningPlayer(XSI))])==0 and GetUnitState(XSI,UNIT_STATE_MANA)>=140 then
call TimerStart(E70[GetPlayerId(GetOwningPlayer(XSI))],380-80*WTI,false,null)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3+0.01,false)
call TriggerAddCondition(t,Condition(function KK3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
endif
set t=null
set XSI=null
return false
endfunction
function KM3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterDeathEvent(t,XSI)
call TriggerAddCondition(t,Condition(function KL3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function KN3 takes nothing returns boolean
if GetLearnedSkill()==1093677401 and GetUnitAbilityLevel(GetTriggerUnit(),1093677401)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call KM3()
endif
return false
endfunction
function HC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function KN3))
set t=null
endfunction
constant function Poof_RawCode takes nothing returns integer
return 1093684792
endfunction
constant function Poof_PrimaryUnitCode takes nothing returns integer
return 1211117641
endfunction
constant function Poof_SecondaryUnitCode takes nothing returns integer
return 1211117642
endfunction
function KS3 takes unit VCI returns boolean
return(GetUnitTypeId(VCI)==(1211117641)or GetUnitTypeId(VCI)==(1211117642)or GetUnitTypeId(VCI)==GetUnitTypeId(GetTriggerUnit()))and GetUnitState(VCI,UNIT_STATE_LIFE)>0.5 and GetOwningPlayer(VCI)==GetOwningPlayer(GetTriggerUnit())
endfunction
function KT3 takes nothing returns boolean
return GetSpellAbilityId()==(1093684792)
endfunction
function KR3 takes nothing returns boolean
return KS3(GetFilterUnit())
endfunction
function KP3 takes nothing returns nothing
local unit KXO=GetEnumUnit()
local real KQ3=J9I(KXO,Y3)
if KQ3<KO then
set KO=KQ3
set YO=KXO
endif
endfunction
function KU3 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function L03 takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",GetEnumUnit(),"origin"))
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),KO,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
endfunction
function LI3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local location FV2
local real x
local real y
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local group U4I
local boolexpr VE1
local boolean L13=false
if XTI!=null and KS3(XTI)then
set x=GetUnitX(XTI)
set y=GetUnitY(XTI)
set L13=true
else
set VE1=Condition(function KR3)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,0,0,999999,VE1)
if XTI!=null then
set FV2=GetUnitLoc(XTI)
else
set FV2=GetSpellTargetLoc()
endif
set YO=FirstOfGroup(U4I)
if YO!=null then
set L13=true
call GroupRemoveUnit(U4I,YO)
set KO=J9I(YO,FV2)
set Y3=FV2
call ForGroup(U4I,function KP3)
set XTI=YO
set x=GetUnitX(XTI)
set y=GetUnitY(XTI)
endif
call ZYI(U4I)
call RemoveLocation(FV2)
endif
if L13 then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",J4I,J5I))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",x,y))
call SetUnitX(XSI,x)
call SetUnitY(XSI,y)
set KO=20+GetUnitAbilityLevel(GetTriggerUnit(),(1093684792))*30
set VE1=Condition(function KU3)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,J4I,J5I,400,VE1)
call ForGroup(U4I,function L03)
call ZYI(U4I)
set U4I=ZJI()
call GroupEnumUnitsInRange(U4I,x,y,400,VE1)
call ForGroup(U4I,function L03)
call ZYI(U4I)
endif
endfunction
function LO3 takes nothing returns boolean
return GetSpellAbilityId()==(1093684792)
endfunction
function L23 takes nothing returns nothing
call SetUnitAnimationByIndex((LoadUnitHandle(ZY,(GetHandleId(GetExpiredTimer())),(221))),2)
endfunction
function L33 takes nothing returns nothing
local timer t=CreateTimer()
call SetUnitAnimationByIndex(GetTriggerUnit(),2)
call SaveUnitHandle(ZY,(GetHandleId(t)),(221),(GetTriggerUnit()))
call TimerStart(t,1,false,function L23)
endfunction
function FM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function LO3))
call TriggerAddAction(t,function L33)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KT3))
call TriggerAddAction(t,function LI3)
endfunction
constant function Trap_CastCode takes nothing returns integer
return 1093684802
endfunction
constant function Trap_EffectCode takes nothing returns integer
return 1093684803
endfunction
constant function Trap_Projectile takes nothing returns integer
return 1747988547
endfunction
constant function Trap_DummyNet takes nothing returns integer
return 1747988537
endfunction
constant function Trap_Radius takes nothing returns integer
return 245
endfunction
function L43 takes nothing returns boolean
return GetSpellAbilityId()==(1093684802)
endfunction
function L53 takes nothing returns boolean
return XDI(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(YO))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(YO))==true and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0.5 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitTypeId(GetFilterUnit())!=1848651852
endfunction
function L63 takes nothing returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(YO),1697656901,KO,J3,0)
call KKI(T0I,(1093684803))
call IssueTargetOrder(T0I,"ensnare",GetEnumUnit())
endfunction
function L73 takes unit KRI,real x,real y returns nothing
local boolexpr VE1=Condition(function L53)
local group U4I=ZJI()
set YO=KRI
call GroupEnumUnitsInRange(U4I,x,y,(245),VE1)
set KO=x
set J3=y
call ForGroup(U4I,function L63)
call ZYI(U4I)
endfunction
function L83 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real J4I=GetUnitX(KRI)
local real J5I=GetUnitY(KRI)
local real KUI=GetUnitX(KRI)+30*Cos(B92)
local real L0I=GetUnitY(KRI)+30*Sin(B92)
if(KUI-J6I)*(KUI-J6I)+(L0I-J7I)*(L0I-J7I)<1200 then
call SetUnitX(KRI,J6I)
call SetUnitY(KRI,J7I)
call L73(KRI,J6I,J7I)
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
call KillUnit(KRI)
call DestroyTimer(t)
else
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
endif
endfunction
function L93 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location FV2=GetSpellTargetLoc()
local real J6I=YEI(GetLocationX(FV2))
local real J7I=YHI(GetLocationY(FV2))
local real J4I=YEI(GetUnitX(V8I))
local real J5I=YHI(GetUnitY(V8I))
local unit KRI=CreateUnit(GetOwningPlayer(V8I),(1747988547),J4I,J5I,0)
local real B92=Atan2(J7I-J5I,J6I-J4I)
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
call SetUnitScale(KRI,2,2,2)
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call TimerStart(t,0.035,true,function L83)
call RemoveLocation(FV2)
endfunction
function FN1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function L93)
call TriggerAddCondition(t,Condition(function L43))
endfunction
function LA3 takes unit u returns boolean
return GetUnitTypeId(u)==1211117641 or GetUnitTypeId(u)==1211117642
endfunction
constant function DoubleTrouble_RawCode takes nothing returns integer
return 1093684567
endfunction
constant function DoubleTrouble_PrimaryUnitCode takes nothing returns integer
return 1211117641
endfunction
constant function DoubleTrouble_SecondaryUnitCode takes nothing returns integer
return 1211117642
endfunction
constant function DoubleTrouble_Ability1 takes nothing returns integer
return 1093684792
endfunction
constant function DoubleTrouble_Ability2 takes nothing returns integer
return 1093684802
endfunction
constant function DoubleTrouble_Ability3 takes nothing returns integer
return 1093684791
endfunction
constant function DoubleTrouble_Item7 takes nothing returns integer
return F20[W40]
endfunction
constant function DoubleTrouble_Item6 takes nothing returns integer
return F20[VR0]
endfunction
constant function DoubleTrouble_Item5 takes nothing returns integer
return F20[HY0]
endfunction
constant function DoubleTrouble_Item4 takes nothing returns integer
return F20[HJ0]
endfunction
constant function DoubleTrouble_Item3 takes nothing returns integer
return F20[HK0]
endfunction
constant function DoubleTrouble_Item2 takes nothing returns integer
return F20[HX0]
endfunction
constant function DoubleTrouble_Item1 takes nothing returns integer
return F20[FB0]
endfunction
function LB3 takes unit VCI returns boolean
return GetUnitTypeId(VCI)==(1211117641)or GetUnitTypeId(VCI)==(1211117642)
endfunction
function DoubleTrouble_IsKoboldCondition takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(YO)and GetFilterUnit()!=YO and(GetUnitTypeId(GetFilterUnit())==(1211117641)or GetUnitTypeId(GetFilterUnit())==(1211117642))
endfunction
function DoubleTrouble_UnshareXPCondition takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(YO))==true and LB3(GetFilterUnit())==false
endfunction
function DoubleTrouble_UnshareXPGive takes nothing returns nothing
call AddHeroXP(GetEnumUnit(),JO,true)
endfunction
function LC3 takes nothing returns nothing
local integer LD3=GetHandleId(GetTriggeringTrigger())
local player VRI=(LoadPlayerHandle(ZY,(LD3),(370)))
local integer LE3=GetHandleId(VRI)
local unit O01=(LoadUnitHandle(ZY,(LE3),(699)))
local unit OI1=(LoadUnitHandle(ZY,(LE3),(700)))
local unit O11=(LoadUnitHandle(ZY,(LE3),(701)))
local unit OO1=(LoadUnitHandle(ZY,(LE3),(702)))
local unit O21=(LoadUnitHandle(ZY,(LE3),(703)))
local integer LF3=GetUnitAbilityLevel(O01,1096904043)*2
local integer NX2=GetHeroAgi(O01,false)
local integer LG3=GetHeroAgi(O01,true)-NX2-LF3
local integer NY2=GetHeroStr(O01,false)
local integer LH3=GetHeroStr(O01,true)-NY2-LF3
local integer LZ3=GetHeroInt(O01,false)
local integer LV3=GetHeroInt(O01,true)-LZ3-LF3
local real LW3=0.25
local integer LX3=R2I(NX2+LG3*LW3)
local integer LY3=R2I(NY2+LH3*LW3)
local integer LJ3=R2I(LZ3+LV3*LW3)
if GetUnitState(O01,UNIT_STATE_LIFE)>1 then
if OI1!=null then
call SetHeroAgi(OI1,LX3,false)
call SetHeroStr(OI1,LY3,false)
call SetHeroInt(OI1,LJ3,false)
endif
if O11!=null then
call SetHeroAgi(O11,LX3,false)
call SetHeroStr(O11,LY3,false)
call SetHeroInt(O11,LJ3,false)
endif
if OO1!=null then
call SetHeroAgi(OO1,LX3,false)
call SetHeroStr(OO1,LY3,false)
call SetHeroInt(OO1,LJ3,false)
endif
if O21!=null then
call SetHeroAgi(O21,LX3,false)
call SetHeroStr(O21,LY3,false)
call SetHeroInt(O21,LJ3,false)
endif
endif
endfunction
function LK3 takes nothing returns nothing
local integer LD3=GetHandleId(GetTriggeringTrigger())
local player VRI=(LoadPlayerHandle(ZY,(LD3),(370)))
local integer LE3=GetHandleId(VRI)
local unit O01=(LoadUnitHandle(ZY,(LE3),(699)))
local unit OI1=(LoadUnitHandle(ZY,(LE3),(700)))
local unit O11=(LoadUnitHandle(ZY,(LE3),(701)))
local unit OO1=(LoadUnitHandle(ZY,(LE3),(702)))
local unit O21=(LoadUnitHandle(ZY,(LE3),(703)))
local integer LL3=GetHandleId(O01)
local integer LM3=GetHandleId(OI1)
local integer LN3=GetHandleId(O11)
local integer LS3=GetHandleId(OO1)
local integer LT3=GetHandleId(O21)
local integer LR3=(LoadInteger(ZY,(LL3),(367)))
local integer LP3=(LoadInteger(ZY,(LL3),(368)))
local integer LQ3=(LoadInteger(ZY,(LM3),(367)))
local integer LU3=(LoadInteger(ZY,(LM3),(368)))
local integer M03=(LoadInteger(ZY,(LN3),(367)))
local integer MI3=(LoadInteger(ZY,(LN3),(368)))
local integer M13=(LoadInteger(ZY,(LS3),(367)))
local integer MO3=(LoadInteger(ZY,(LS3),(368)))
local integer M23=(LoadInteger(ZY,(LT3),(367)))
local integer M33=(LoadInteger(ZY,(LT3),(368)))
local integer M43=GetHeroXP(O01)
local integer M53=GetHeroXP(OI1)
local integer M63=GetHeroXP(O11)
local integer M73=GetHeroXP(OO1)
local integer M83=GetHeroXP(O21)
local integer M93=M43-LR3-LP3
local integer MA3=M53-LQ3-LU3
local integer MB3=M63-M03-MI3
local integer MC3=M73-M13-MO3
local integer MD3=M83-M23-M33
if GetUnitState(O01,UNIT_STATE_LIFE)>1 then
set LR3=LR3+M93
set LQ3=LQ3+MA3
set M03=M03+MB3
set M13=M13+MC3
set M23=M23+MD3
if O01!=null then
call AddHeroXP(OI1,M93,false)
if GetHeroXP(OI1)!=M53 then
set LU3=LU3+M93
endif
call AddHeroXP(O11,M93,false)
if GetHeroXP(O11)!=M63 then
set MI3=MI3+M93
endif
call AddHeroXP(OO1,M93,false)
if GetHeroXP(OO1)!=M73 then
set MO3=MO3+M93
endif
call AddHeroXP(O21,M93,false)
if GetHeroXP(O21)!=M83 then
set M33=M33+M93
endif
endif
if OI1!=null then
call AddHeroXP(O01,MA3,false)
if GetHeroXP(O01)!=M43 then
set LP3=LP3+MA3
endif
call AddHeroXP(O11,MA3,false)
if GetHeroXP(O11)!=M63 then
set MI3=MI3+MA3
endif
call AddHeroXP(OO1,MA3,false)
if GetHeroXP(OO1)!=M73 then
set MO3=MO3+MA3
endif
call AddHeroXP(O21,MA3,false)
if GetHeroXP(O21)!=M83 then
set M33=M33+MA3
endif
endif
if O11!=null then
call AddHeroXP(OI1,MB3,false)
if GetHeroXP(OI1)!=M53 then
set LU3=LU3+MB3
endif
call AddHeroXP(O01,MB3,false)
if GetHeroXP(O01)!=M43 then
set LP3=LP3+MB3
endif
call AddHeroXP(OO1,MB3,false)
if GetHeroXP(OO1)!=M73 then
set MO3=MO3+MB3
endif
call AddHeroXP(O21,MB3,false)
if GetHeroXP(O21)!=M83 then
set M33=M33+MB3
endif
endif
if OO1!=null then
call AddHeroXP(OI1,MC3,false)
if GetHeroXP(OI1)!=M53 then
set LU3=LU3+MC3
endif
call AddHeroXP(O11,MC3,false)
if GetHeroXP(O11)!=M63 then
set MI3=MI3+MC3
endif
call AddHeroXP(O01,MC3,false)
if GetHeroXP(O01)!=M43 then
set LP3=LP3+MC3
endif
call AddHeroXP(O21,MC3,false)
if GetHeroXP(O21)!=M83 then
set M33=M33+MC3
endif
endif
if O21!=null then
call AddHeroXP(OI1,MD3,false)
if GetHeroXP(OI1)!=M53 then
set LU3=LU3+MD3
endif
call AddHeroXP(O11,MD3,false)
if GetHeroXP(O11)!=M63 then
set MI3=MI3+MD3
endif
call AddHeroXP(O01,MD3,false)
if GetHeroXP(O01)!=M43 then
set LP3=LP3+MD3
endif
call AddHeroXP(OO1,MD3,false)
if GetHeroXP(OO1)!=M73 then
set MO3=MO3+MD3
endif
endif
call SaveInteger(ZY,(LL3),(367),(LR3))
call SaveInteger(ZY,(LL3),(368),(LP3))
call SaveInteger(ZY,(LM3),(367),(LQ3))
call SaveInteger(ZY,(LM3),(368),(LU3))
call SaveInteger(ZY,(LN3),(367),(M03))
call SaveInteger(ZY,(LN3),(368),(MI3))
call SaveInteger(ZY,(LS3),(367),(M13))
call SaveInteger(ZY,(LS3),(368),(MO3))
call SaveInteger(ZY,(LT3),(367),(M23))
call SaveInteger(ZY,(LT3),(368),(M33))
endif
endfunction
function ME3 takes nothing returns boolean
return LB3(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function MF3 takes nothing returns nothing
local unit MKI=GetTriggerUnit()
local integer V0I=GetHandleId(GetOwningPlayer(MKI))
local unit O01=(LoadUnitHandle(ZY,(V0I),(699)))
local unit OI1=(LoadUnitHandle(ZY,(V0I),(700)))
local unit O11=(LoadUnitHandle(ZY,(V0I),(701)))
local unit OO1=(LoadUnitHandle(ZY,(V0I),(702)))
local unit O21=(LoadUnitHandle(ZY,(V0I),(703)))
local boolean WL1=false
call DisableTrigger(UF)
if O01!=null and O01!=MKI then
call KillUnit(O01)
endif
if OI1!=null and OI1!=MKI then
call KillUnit(OI1)
endif
if O11!=null and O11!=MKI then
call KillUnit(O11)
endif
if OO1!=null and OO1!=MKI then
call KillUnit(OO1)
endif
if O21!=null and O21!=MKI then
call KillUnit(O21)
endif
call EnableTrigger(UF)
endfunction
function MG3 takes nothing returns boolean
return LB3(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function MH3 takes unit MZ3,unit V8I returns nothing
local trigger t=(LoadTriggerHandle(ZY,(GetHandleId(GetOwningPlayer(V8I))),(369)))
local integer i=0
local boolean MV3=false
local boolean MW3=false
local boolean MX3=false
local boolean MY3=false
local boolean MJ3=false
local boolean MK3=false
local boolean ML3=false
call DisableTrigger(t)
call DisableTrigger(JX0)
loop
exitwhen i>5
if GetItemTypeId(UnitItemInSlot(V8I,i))==(F20[FB0])then
set MV3=true
endif
if GetItemTypeId(UnitItemInSlot(V8I,i))==(F20[HX0])then
set MW3=true
endif
if GetItemTypeId(UnitItemInSlot(V8I,i))==(F20[HK0])then
set MX3=true
endif
if GetItemTypeId(UnitItemInSlot(V8I,i))==(F20[HJ0])then
set MY3=true
endif
if GetItemTypeId(UnitItemInSlot(V8I,i))==(F20[HY0])then
set MJ3=true
endif
if GetItemTypeId(UnitItemInSlot(V8I,i))==(F20[VR0])then
set MK3=true
endif
if GetItemTypeId(UnitItemInSlot(V8I,i))==(F20[W40])then
set ML3=true
endif
set i=i+1
endloop
if ML3 then
call UnitAddItem(MZ3,CreateItem((F20[W40]),0,0))
elseif MK3 then
call UnitAddItem(MZ3,CreateItem((F20[VR0]),0,0))
elseif MJ3 then
call UnitAddItem(MZ3,CreateItem((F20[HY0]),0,0))
elseif MY3 then
call UnitAddItem(MZ3,CreateItem((F20[HJ0]),0,0))
elseif MX3 then
call UnitAddItem(MZ3,CreateItem((F20[HK0]),0,0))
elseif MW3 then
call UnitAddItem(MZ3,CreateItem((F20[HX0]),0,0))
elseif MV3 then
call UnitAddItem(MZ3,CreateItem((F20[FB0]),0,0))
endif
call EnableTrigger(t)
call EnableTrigger(JX0)
endfunction
function MM3 takes nothing returns nothing
local unit O31=GetTriggerUnit()
local integer i=0
local boolean MV3=false
local boolean MW3=false
local boolean MX3=false
local boolean MY3=false
local boolean MJ3=false
local boolean MK3=false
local boolean ML3=false
local integer LE3=GetHandleId(GetOwningPlayer(O31))
local unit O01=(LoadUnitHandle(ZY,(LE3),(699)))
local unit OI1=(LoadUnitHandle(ZY,(LE3),(700)))
local unit O11=(LoadUnitHandle(ZY,(LE3),(701)))
local unit OO1=(LoadUnitHandle(ZY,(LE3),(702)))
local unit O21=(LoadUnitHandle(ZY,(LE3),(703)))
local integer P1I
local boolean MN3=false
local integer MS3=0
local integer MT3=0
local integer MR3=0
local integer MP3=0
local integer MQ3=0
local integer MU3=0
local integer N03=0
call DisableTrigger(GetTriggeringTrigger())
if GetUnitTypeId(O31)==(1211117642)then
call UnitRemoveItemFromSlot(O31,0)
call EnableTrigger(GetTriggeringTrigger())
return
endif
if not(GetItemTypeId(GetManipulatedItem())==(F20[FB0])or GetItemTypeId(GetManipulatedItem())==(F20[HX0])or GetItemTypeId(GetManipulatedItem())==(F20[HK0])or GetItemTypeId(GetManipulatedItem())==(F20[HJ0])or GetItemTypeId(GetManipulatedItem())==(F20[HY0])or GetItemTypeId(GetManipulatedItem())==(F20[VR0])or GetItemTypeId(GetManipulatedItem())==(F20[W40]))then
call EnableTrigger(GetTriggeringTrigger())
return
endif
call DisableTrigger(JX0)
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM then
set MN3=true
endif
loop
exitwhen i>5
set P1I=GetItemTypeId(UnitItemInSlot(O31,i))
if P1I==(F20[FB0])then
set MS3=MS3+1
if(not(MN3 and P1I==GetItemTypeId(GetManipulatedItem())))or(MS3>1 and P1I==GetItemTypeId(GetManipulatedItem()))then
set MV3=true
endif
endif
if P1I==(F20[HX0])then
set MT3=MT3+1
if(not(MN3 and P1I==GetItemTypeId(GetManipulatedItem())))or(MT3>1 and P1I==GetItemTypeId(GetManipulatedItem()))then
set MW3=true
endif
endif
if P1I==(F20[HK0])then
set MR3=MR3+1
if(not(MN3 and P1I==GetItemTypeId(GetManipulatedItem())))or(MR3>1 and P1I==GetItemTypeId(GetManipulatedItem()))then
set MX3=true
endif
endif
if P1I==(F20[HJ0])then
set MP3=MP3+1
if(not(MN3 and P1I==GetItemTypeId(GetManipulatedItem())))or(MP3>1 and P1I==GetItemTypeId(GetManipulatedItem()))then
set MY3=true
endif
endif
if P1I==(F20[HY0])then
set MQ3=MQ3+1
if(not(MN3 and P1I==GetItemTypeId(GetManipulatedItem())))or(MQ3>1 and P1I==GetItemTypeId(GetManipulatedItem()))then
set MJ3=true
endif
endif
if P1I==(F20[VR0])then
set MU3=MU3+1
if(not(MN3 and P1I==GetItemTypeId(GetManipulatedItem())))or(MU3>1 and P1I==GetItemTypeId(GetManipulatedItem()))then
set MK3=true
endif
endif
if P1I==(F20[W40])then
set N03=N03+1
if(not(MN3 and P1I==GetItemTypeId(GetManipulatedItem())))or(N03>1 and P1I==GetItemTypeId(GetManipulatedItem()))then
set ML3=true
endif
endif
set i=i+1
endloop
call RemoveItem(UnitRemoveItemFromSlot(OI1,0))
if O11!=null then
call RemoveItem(UnitRemoveItemFromSlot(O11,0))
endif
if OO1!=null then
call RemoveItem(UnitRemoveItemFromSlot(OO1,0))
endif
if O21!=null then
call RemoveItem(UnitRemoveItemFromSlot(O21,0))
endif
if ML3 then
call UnitAddItem(OI1,CreateItem((F20[W40]),0,0))
if O11!=null then
call UnitAddItem(O11,CreateItem((F20[W40]),0,0))
endif
if OO1!=null then
call UnitAddItem(OO1,CreateItem((F20[W40]),0,0))
endif
elseif MK3 then
call UnitAddItem(OI1,CreateItem((F20[VR0]),0,0))
if O11!=null then
call UnitAddItem(O11,CreateItem((F20[VR0]),0,0))
endif
if OO1!=null then
call UnitAddItem(OO1,CreateItem((F20[VR0]),0,0))
endif
if O21!=null then
call UnitAddItem(O21,CreateItem((F20[VR0]),0,0))
endif
elseif MJ3 then
call UnitAddItem(OI1,CreateItem((F20[HY0]),0,0))
if O11!=null then
call UnitAddItem(O11,CreateItem((F20[HY0]),0,0))
endif
if OO1!=null then
call UnitAddItem(OO1,CreateItem((F20[HY0]),0,0))
endif
if O21!=null then
call UnitAddItem(O21,CreateItem((F20[HY0]),0,0))
endif
elseif MY3 then
call UnitAddItem(OI1,CreateItem((F20[HJ0]),0,0))
if O11!=null then
call UnitAddItem(O11,CreateItem((F20[HJ0]),0,0))
endif
if OO1!=null then
call UnitAddItem(OO1,CreateItem((F20[HJ0]),0,0))
endif
if O21!=null then
call UnitAddItem(O21,CreateItem((F20[HJ0]),0,0))
endif
elseif MX3 then
call UnitAddItem(OI1,CreateItem((F20[HK0]),0,0))
if O11!=null then
call UnitAddItem(O11,CreateItem((F20[HK0]),0,0))
endif
if OO1!=null then
call UnitAddItem(OO1,CreateItem((F20[HK0]),0,0))
endif
if O21!=null then
call UnitAddItem(O21,CreateItem((F20[HK0]),0,0))
endif
elseif MW3 then
call UnitAddItem(OI1,CreateItem((F20[HX0]),0,0))
if O11!=null then
call UnitAddItem(O11,CreateItem((F20[HX0]),0,0))
endif
if OO1!=null then
call UnitAddItem(OO1,CreateItem((F20[HX0]),0,0))
endif
if O21!=null then
call UnitAddItem(O21,CreateItem((F20[HX0]),0,0))
endif
elseif MV3 then
call UnitAddItem(OI1,CreateItem((F20[FB0]),0,0))
if O11!=null then
call UnitAddItem(O11,CreateItem((F20[FB0]),0,0))
endif
if OO1!=null then
call UnitAddItem(OO1,CreateItem((F20[FB0]),0,0))
endif
if O21!=null then
call UnitAddItem(O21,CreateItem((F20[FB0]),0,0))
endif
endif
call EnableTrigger(GetTriggeringTrigger())
call EnableTrigger(JX0)
endfunction
function NI3 takes unit N13,integer NO3 returns nothing
local integer LE3=GetHandleId(GetOwningPlayer(N13))
local unit O01=(LoadUnitHandle(ZY,(LE3),(699)))
local unit OI1=(LoadUnitHandle(ZY,(LE3),(700)))
local unit O11=(LoadUnitHandle(ZY,(LE3),(701)))
local unit OO1=(LoadUnitHandle(ZY,(LE3),(702)))
local unit O21=(LoadUnitHandle(ZY,(LE3),(703)))
if O01!=null and O01!=N13 then
call SelectHeroSkill(O01,NO3)
endif
if OI1!=null and OI1!=N13 then
call SelectHeroSkill(OI1,NO3)
endif
if O11!=null and O11!=N13 then
call SelectHeroSkill(O11,NO3)
endif
if OO1!=null and OO1!=N13 then
call SelectHeroSkill(OO1,NO3)
endif
if O21!=null and O21!=N13 then
call SelectHeroSkill(O21,NO3)
endif
endfunction
function N23 takes integer KLI,unit KZO,unit KVO returns nothing
local integer W5I=1
local integer W6I=GetUnitAbilityLevel(KZO,KLI)
loop
exitwhen W5I>W6I
call SelectHeroSkill(KVO,KLI)
set W5I=W5I+1
endloop
endfunction
function N33 takes unit MZ3,unit N43 returns nothing
call AddHeroXP(MZ3,GetHeroXP(N43),false)
call SaveInteger(ZY,(GetHandleId(MZ3)),(368),(GetHeroXP(N43)))
call SaveInteger(ZY,(GetHandleId(MZ3)),(367),(0))
call N23((1093684792),N43,MZ3)
call N23((1093684802),N43,MZ3)
call N23((1093684791),N43,MZ3)
call N23(1096904043,N43,MZ3)
call N23((1093684567),N43,MZ3)
call N23(1093809987,N43,MZ3)
endfunction
function N53 takes unit OI1,unit O11,integer NO3,integer MS3,integer MT3 returns nothing
if MS3>MT3 then
call SelectHeroSkill(O11,NO3)
elseif MT3>MS3 then
call SelectHeroSkill(OI1,NO3)
endif
endfunction
function N63 takes unit OI1,unit O11 returns nothing
local integer M53=GetHeroXP(OI1)
local integer M63=GetHeroXP(O11)
local integer LM3=GetHandleId(OI1)
local integer LN3=GetHandleId(O11)
local integer LU3=(LoadInteger(ZY,(LM3),(368)))
local integer MI3=(LoadInteger(ZY,(LN3),(368)))
local integer K3O
if M53>M63 then
set K3O=M53-M63
call AddHeroXP(O11,K3O,true)
if M63!=GetHeroXP(O11)then
call SaveInteger(ZY,(LN3),(368),(MI3+K3O))
endif
elseif M53<M63 then
set K3O=M63-M53
call AddHeroXP(OI1,K3O,true)
if M53!=GetHeroXP(OI1)then
call SaveInteger(ZY,(LM3),(368),(LU3+K3O))
endif
endif
endfunction
function N73 takes unit OI1,unit O11 returns nothing
local integer N83=GetUnitAbilityLevel(OI1,(1093684792))
local integer N93=GetUnitAbilityLevel(OI1,(1093684802))
local integer NA3=GetUnitAbilityLevel(OI1,(1093684791))
local integer NB3=GetUnitAbilityLevel(OI1,(1093684567))
local integer NC3=GetUnitAbilityLevel(OI1,1096904043)
local integer ND3=GetUnitAbilityLevel(OI1,1093809987)
local integer NE3=GetUnitAbilityLevel(O11,(1093684792))
local integer NF3=GetUnitAbilityLevel(O11,(1093684802))
local integer NG3=GetUnitAbilityLevel(O11,(1093684791))
local integer NH3=GetUnitAbilityLevel(O11,(1093684567))
local integer NZ3=GetUnitAbilityLevel(O11,1096904043)
local integer NV3=GetUnitAbilityLevel(O11,1093809987)
call N63(OI1,O11)
call N53(OI1,O11,(1093684792),N83,NE3)
call N53(OI1,O11,(1093684802),N93,NF3)
call N53(OI1,O11,(1093684791),NA3,NG3)
call N53(OI1,O11,(1093684567),NB3,NH3)
call N53(OI1,O11,1093809987,ND3,NV3)
call N53(OI1,O11,1096904043,NC3,NZ3)
endfunction
function NW3 takes unit OI1,unit O11 returns nothing
if OI1!=null and O11!=null then
call N73(OI1,O11)
endif
endfunction
function NX3 takes nothing returns nothing
local integer LE3=GetHandleId((LoadPlayerHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(370))))
local unit O01=(LoadUnitHandle(ZY,(LE3),(699)))
local unit OI1=(LoadUnitHandle(ZY,(LE3),(700)))
local unit O11=(LoadUnitHandle(ZY,(LE3),(701)))
local unit OO1=(LoadUnitHandle(ZY,(LE3),(702)))
local unit O21=(LoadUnitHandle(ZY,(LE3),(703)))
call DisableTrigger(CXI)
call NW3(O01,OI1)
call NW3(O01,O11)
call NW3(O01,OO1)
call NW3(O01,O21)
call NW3(OI1,O11)
call NW3(OI1,OO1)
call NW3(OI1,O21)
call NW3(O11,OO1)
call NW3(O11,O21)
call NW3(OO1,O21)
call EnableTrigger(CXI)
endfunction
function NY3 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerAddAction(t,function NX3)
call SavePlayerHandle(ZY,(GetHandleId(t)),(370),(GetOwningPlayer(GetTriggerUnit())))
endfunction
function NJ3 takes unit XSI returns nothing
local trigger t
call SaveUnitHandle(ZY,(GetHandleId(GetOwningPlayer(XSI))),(699),(XSI))
call SaveInteger(ZY,(GetHandleId(XSI)),(367),(GetHeroXP(XSI)))
call SaveInteger(ZY,(GetHandleId(XSI)),(368),(0))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddAction(t,function LK3)
call SavePlayerHandle(ZY,(GetHandleId(t)),(370),(GetOwningPlayer(XSI)))
call SaveTriggerHandle(ZY,(GetHandleId(GetOwningPlayer(XSI))),(371),(t))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.3,true)
call TriggerAddAction(t,function LC3)
call SavePlayerHandle(ZY,(GetHandleId(t)),(370),(GetOwningPlayer(XSI)))
call SaveTriggerHandle(ZY,(GetHandleId(GetOwningPlayer(XSI))),(372),(t))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function MF3)
call TriggerAddCondition(t,Condition(function ME3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call K7I(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddAction(t,function MM3)
call TriggerAddCondition(t,Condition(function MG3))
call SaveTriggerHandle(ZY,(GetHandleId(GetOwningPlayer(XSI))),(369),(t))
call ExecuteFunc("NY3")
endfunction
function NK3 takes unit XSI,boolean MK1 returns nothing
local player VRI=GetOwningPlayer(XSI)
local integer V0I=GetHandleId(VRI)
local unit MZ3
set CYI=CYI+1
if CYI==1 then
call NJ3(XSI)
endif
call TriggerExecute((LoadTriggerHandle(ZY,(GetHandleId(GetOwningPlayer(XSI))),(371))))
call TriggerExecute((LoadTriggerHandle(ZY,(GetHandleId(GetOwningPlayer(XSI))),(372))))
if MK1==false then
call NI3(XSI,1093684567)
call NI3(XSI,1093809987)
endif
set MZ3=CreateUnit(GetOwningPlayer(XSI),1211117642,GetUnitX(XSI),GetUnitY(XSI),0)
call N33(MZ3,XSI)
call MH3(MZ3,XSI)
call SaveUnitHandle(ZY,(V0I),(699+CYI),(MZ3))
endfunction
function P11 takes nothing returns nothing
if CJI==false then
set CJI=true
call DisableTrigger(CXI)
call NK3(OK,true)
call EnableTrigger(CXI)
endif
endfunction
function NL3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if IsUnitIllusion(GetTriggerUnit())==false and GetOwningPlayer(GetTriggerUnit())==GetOwningPlayer(XSI)and LA3(GetTriggerUnit())then
if GetLearnedSkill()==1093684567 or GetLearnedSkill()==1093809987 then
call DisableTrigger(GetTriggeringTrigger())
call NK3(GetTriggerUnit(),false)
call EnableTrigger(GetTriggeringTrigger())
elseif GetLearnedSkill()==1096904043 or GetLearnedSkill()==1093684792 or GetLearnedSkill()==1093684802 or GetLearnedSkill()==1093684791 then
call TriggerExecute((LoadTriggerHandle(ZY,(GetHandleId(GetOwningPlayer(GetTriggerUnit()))),(371))))
call TriggerExecute((LoadTriggerHandle(ZY,(GetHandleId(GetOwningPlayer(GetTriggerUnit()))),(372))))
call DisableTrigger(GetTriggeringTrigger())
call NI3(GetTriggerUnit(),GetLearnedSkill())
call EnableTrigger(GetTriggeringTrigger())
endif
endif
return false
endfunction
function KZ3 takes nothing returns nothing
local unit XSI=OK
local integer V0I
set CWI=CreateTrigger()
set CXI=CWI
set V0I=GetHandleId(CWI)
call K7I(CWI,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(CWI,Condition(function NL3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
endfunction
function NM3 takes nothing returns nothing
local location l=GetSpellTargetLoc()
call JKI("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",GetLocationX(l),GetLocationY(l),2)
call TerrainDeformationRippleBJ(0.3,false,l,0,300,100,0.4,20)
call RemoveLocation(l)
set l=null
endfunction
function NN3 takes nothing returns boolean
if GetSpellAbilityId()==1093678679 then
call NM3()
endif
return false
endfunction
function D61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NN3))
endfunction
function GenericCondition_BasicsAndStructureNoInvul takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false and NMI(GetFilterUnit())==false
endfunction
function NS3 takes nothing returns boolean
return IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false and NMI(GetFilterUnit())==false)
endfunction
function NT3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group g
local unit u
local real d
local real a
local real D22
local real D32
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
if GetTriggerEvalCount(t)>32 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set OK=V8I
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),500,Condition(function NS3))
set u=GroupPickRandomUnit(g)
if u==null then
set d=GetRandomReal(175,400)
set a=GetRandomReal(0,6)
set D22=GetUnitX(V8I)+d*Cos(a)
set D32=GetUnitY(V8I)+d*Sin(a)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",D22,D32))
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",u,"origin"))
call XNI(T0I,u,5,12.5*WTI)
endif
call ZYI(g)
endif
set u=null
set g=null
set t=null
set V8I=null
return false
endfunction
function NR3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl",V8I,"hand right"))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(V8I,1093808212)))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function NT3))
set t=null
set V8I=null
endfunction
function NP3 takes nothing returns boolean
if GetSpellAbilityId()==1093808212 then
call NR3()
endif
return false
endfunction
function D71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NP3))
endfunction
function NQ3 takes nothing returns nothing
local unit XSI=CKI
local unit XTI=GetEnumUnit()
call XNI(XSI,XTI,1,CLI)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",XTI,"origin"))
set XSI=null
set XTI=null
endfunction
function NU3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093808454)
local group g
if WTI!=0 then
if WTI==1 then
set CLI=66
elseif WTI==2 then
set CLI=100
else
set CLI=144
endif
else
set WTI=GetUnitAbilityLevel(XSI,1093808455)
if WTI==1 then
set CLI=88
elseif WTI==2 then
set CLI=133
else
set CLI=177
endif
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitState(XSI,UNIT_STATE_MANA)<20*WTI or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==-1 or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093808456 or GetSpellAbilityId()==1093809992))then
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093808454 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808454,true)
endif
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093808455 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808455,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808456,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call SetUnitState(XSI,UNIT_STATE_MANA,GetUnitState(XSI,UNIT_STATE_MANA)-20*WTI)
set OK=XSI
set CKI=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),425,Condition(function SOI))
call ForGroup(g,function NQ3)
call ZYI(g)
set g=null
endif
set t=null
return false
endfunction
function S03 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",XSI,"origin"))
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808454,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808455,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808456,true)
call UnitAddAbility(XSI,1093808456)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NU3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerEvaluate(t)
set XSI=null
set t=null
endfunction
function SI3 takes nothing returns boolean
if GetSpellAbilityId()==1093808454 or GetSpellAbilityId()==1093808455 then
call S03()
endif
return false
endfunction
function D81 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SI3))
set t=null
endfunction
function S13 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit KV2=(LoadUnitHandle(ZY,(V0I),(374)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer SO3=(LoadInteger(ZY,(V0I),(233)))
local integer HH2=(LoadInteger(ZY,(V0I),(12)))
local unit T0I
local group g
local real a
local real x
local real y
if JAI(GetUnitX(KV2),GetUnitY(KV2),GetUnitX(XTI),GetUnitY(XTI))>20 then
set a=JPI(GetUnitX(KV2),GetUnitY(KV2),GetUnitX(XTI),GetUnitY(XTI))
call SetUnitFacing(KV2,a)
set x=GetUnitX(KV2)+13.5*Cos(a*bj_DEGTORAD)
set y=GetUnitY(KV2)+13.5*Sin(a*bj_DEGTORAD)
call SetUnitX(KV2,x)
call SetUnitY(KV2,y)
else
if KMI(XTI)==false then
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093679409)
call SetUnitAbilityLevel(T0I,1093679409,WTI)
call IssueTargetOrder(T0I,"frostnova",XTI)
endif
if SO3>HH2 then
call RemoveUnit(KV2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set OK=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),600,Condition(function S1I))
call GroupRemoveUnit(g,XTI)
set XTI=GroupPickRandomUnit(g)
call ZYI(g)
if XTI==null then
call RemoveUnit(KV2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SaveInteger(ZY,(V0I),(233),(SO3+1))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
endif
endif
endif
set t=null
set XSI=null
set XTI=null
set KV2=null
set T0I=null
set g=null
return false
endfunction
function S23 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093678420)
local integer HH2=7
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KV2
if GetSpellAbilityId()==1093679176 then
set WTI=GetUnitAbilityLevel(XSI,1093679176)+1
set HH2=7
endif
set KV2=CreateUnit(GetOwningPlayer(XSI),1697656889,GetUnitX(XSI),GetUnitY(XSI),0)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(374),(KV2))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(233),(1))
call SaveInteger(ZY,(V0I),(12),(HH2))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function S13))
set XSI=null
set XTI=null
set KV2=null
set t=null
endfunction
function S33 takes nothing returns boolean
if GetSpellAbilityId()==1093678420 or GetSpellAbilityId()==1093679176 then
call S23()
endif
return false
endfunction
function D91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S33))
set t=null
endfunction
function S43 takes nothing returns nothing
local location l
local unit V8I=GetTriggerUnit()
local real x1=GetUnitX(V8I)
local real y1=GetUnitY(V8I)
local real a
local real x2
local real y2
local integer WTI=GetUnitAbilityLevel(V8I,1093687349)
local real XPI
local real SQI
local unit TEI=null
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=Atan2(y2-y1,x2-x1)
set x2=x1+700*Cos(a)
set y2=y1+700*Sin(a)
if WTI==1 then
set XPI=60
set SQI=0.5
elseif WTI==2 then
set XPI=130
set SQI=1
elseif WTI==3 then
set XPI=200
set SQI=1.5
elseif WTI==4 then
set XPI=260
set SQI=2
endif
if GetSpellTargetUnit()!=null and ZXI(GetSpellTargetUnit())then
set TEI=GetSpellTargetUnit()
endif
call TDI(V8I,TEI,XPI,SQI,0.52,x1,y1,x2,y2,150,null,true,1600)
call RemoveLocation(l)
set l=null
set V8I=null
endfunction
function S53 takes nothing returns boolean
if GetSpellAbilityId()==1093687349 then
call S43()
endif
return false
endfunction
function H31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S53))
call YVI(1093687350)
set t=null
endfunction
function S63 takes nothing returns boolean
if(GetSpellAbilityId()==1093679413 or GetSpellAbilityId()==1093679447)and XDI(GetSpellTargetUnit())then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))
endif
return false
endfunction
function H41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function S63))
set t=null
endfunction
function S73 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",V8I,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",V8I,"origin"))
call UnitRemoveAbility(V8I,1093687875)
call UnitRemoveAbility(V8I,1110454358)
set t=null
set V8I=null
return false
endfunction
function S83 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",V8I,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",V8I,"origin"))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,18-0.1,false)
call TriggerAddCondition(t,Condition(function S73))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
set t=null
set V8I=null
return false
endfunction
function S93 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697657174,0,0,0)
local real SQI=18
call KKI(T0I,1093687875)
call UnitApplyTimedLife(T0I,1112820806,SQI)
call MWI(V8I,SQI,175)
call TriggerRegisterTimerEvent(t,0.1,false)
call TriggerAddCondition(t,Condition(function S83))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
set t=null
set V8I=null
endfunction
function SA3 takes nothing returns boolean
if GetSpellAbilityId()==1093679411 and GetUnitTypeId(GetTriggerUnit())==1429221432 then
call S93()
endif
return false
endfunction
function H81 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SA3))
set t=null
endfunction
function K4O takes nothing returns nothing
local unit XSI=AM
local unit XTI=BM
local unit T0I=(LoadUnitHandle(ZY,(GetHandleId(XSI)),(219)))
call SaveUnitHandle(ZY,(GetHandleId(XSI)),(219),(T0I))
call SetUnitOwner(T0I,GetOwningPlayer(XTI),true)
set XSI=null
set XTI=null
set T0I=null
endfunction
function Y21 takes nothing returns nothing
local unit V8I=WK
local unit T0I=(LoadUnitHandle(ZY,(GetHandleId(V8I)),(219)))
if T0I!=null and GetUnitTypeId(T0I)==1697657174 then
call RemoveUnit(T0I)
endif
endfunction
function SB3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if T0I!=null and GetUnitTypeId(T0I)==1697657174 then
if KMI(XSI)==false then
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
endif
endif
set t=null
set T0I=null
set XSI=null
return false
endfunction
function SC3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093677893)
local unit T0I
local trigger t
local integer V0I
if WTI==1 then
set T0I=CreateUnit(GetOwningPlayer(V8I),1697657174,0,0,0)
call KKI(T0I,1093687882)
call SaveUnitHandle(ZY,(GetHandleId(V8I)),(219),(T0I))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerAddCondition(t,Condition(function SB3))
call TriggerRegisterTimerEvent(t,0.2,true)
call SaveUnitHandle(ZY,(V0I),(2),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
else
set T0I=(LoadUnitHandle(ZY,(GetHandleId(V8I)),(219)))
endif
if WTI==2 then
call UnitRemoveAbility(T0I,1093687882)
call KKI(T0I,1093687881)
elseif WTI==3 then
call UnitRemoveAbility(T0I,1093687882)
call UnitRemoveAbility(T0I,1093687881)
call KKI(T0I,1093687880)
elseif WTI==4 then
call UnitRemoveAbility(T0I,1093687882)
call UnitRemoveAbility(T0I,1093687881)
call UnitRemoveAbility(T0I,1093687880)
call KKI(T0I,1093687879)
endif
set V8I=null
set T0I=null
endfunction
function SD3 takes nothing returns boolean
if GetLearnedSkill()==1093677893 and IsUnitIllusion(GetTriggerUnit())==false then
call SC3()
endif
return false
endfunction
function H91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function SD3))
set t=null
endfunction
function SE3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit T0I
local integer i=1
local boolean X7I=VLI(GetOwningPlayer(V8I))
local player p
local integer SF3
local integer SG3
local integer WTI=GetUnitAbilityLevel(V8I,1093687878)
if WTI==1 then
set SF3=1093742644
set SG3=1093742647
elseif WTI==2 then
set SF3=1093742641
set SG3=1093742646
elseif WTI==3 then
set SF3=1093742642
set SG3=1093742645
elseif WTI==4 then
set SF3=1093742643
set SG3=1093742648
endif
loop
exitwhen i>5
if X7I then
set p=CO[i]
else
set p=DO[i]
endif
set T0I=CreateUnit(p,1697657174,0,0,0)
call KKI(T0I,SF3)
call KKI(T0I,SG3)
call UnitApplyTimedLife(T0I,1112820806,12)
set i=i+1
endloop
set V8I=null
set T0I=null
set p=null
endfunction
function SH3 takes nothing returns boolean
if GetSpellAbilityId()==1093687878 then
call SE3()
endif
return false
endfunction
function HA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SH3))
set t=null
endfunction
function SZ3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093679412)
local integer SV3=GetHeroLevel(XTI)
if ModuloInteger(SV3,7-WTI)==0 or SV3==25 then
call XNI(XSI,XTI,1,250)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl",XTI,"chest"))
endif
set XSI=null
set XTI=null
endfunction
function SW3 takes nothing returns boolean
if GetSpellAbilityId()==1093679412 then
call SZ3()
endif
return false
endfunction
function DA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SW3))
set t=null
endfunction
function SX3 takes unit XSI returns nothing
call UnitRemoveAbility(XSI,1093750609)
call UnitRemoveAbility(XSI,1093750610)
call UnitRemoveAbility(XSI,1093750611)
call UnitRemoveAbility(XSI,1093750612)
call UnitRemoveAbility(XSI,1093750613)
call UnitRemoveAbility(XSI,1093750614)
call UnitRemoveAbility(XSI,1093750615)
call UnitRemoveAbility(XSI,1093750616)
call UnitRemoveAbility(XSI,1093750617)
call UnitRemoveAbility(XSI,1395667021)
call UnitRemoveAbility(XSI,1093750618)
call UnitRemoveAbility(XSI,1395667022)
call UnitRemoveAbility(XSI,1093750832)
call UnitRemoveAbility(XSI,1093750833)
call UnitRemoveAbility(XSI,1093750839)
call UnitRemoveAbility(XSI,1093750849)
call UnitRemoveAbility(XSI,1093750835)
call UnitRemoveAbility(XSI,1093750836)
call UnitRemoveAbility(XSI,1093750837)
call UnitRemoveAbility(XSI,1093750838)
endfunction
function SY3 takes unit XSI,unit XTI returns nothing
local integer SJ3=GetUnitTypeId(XTI)
local integer SK3=0
local integer SL3=0
if SJ3==1848658008 then
set SK3=1093750609
elseif SJ3==1852796263 then
set SK3=1093750610
elseif SJ3==1852207221 then
set SK3=1093750611
elseif SJ3==1853060204 then
set SK3=1093750612
elseif SJ3==1853055348 then
set SK3=1093750613
elseif SJ3==1853060200 then
set SK3=1093750614
set SL3=1093750615
elseif SJ3==1848651859 then
set SK3=1093750616
set SL3=1093750617
elseif SJ3==1852534636 then
set SK3=1395667021
elseif SJ3==1852207976 then
set SK3=1093750618
elseif SJ3==1852010091 then
set SK3=1395667022
set SL3=1093750832
elseif SJ3==1852272243 then
set SK3=1093750833
elseif SJ3==1852270641 then
set SK3=1093750839
set SL3=1093750849
elseif SJ3==1852798821 then
set SK3=1093750835
set SL3=1093750836
elseif SJ3==1852077175 then
set SK3=1093750837
set SL3=1093750838
elseif SJ3==1853320295 then
set SK3=1093750617
endif
if SK3!=0 then
call SX3(XSI)
call KKI(XSI,SK3)
endif
if SL3!=0 then
call KKI(XSI,SL3)
endif
endfunction
function SM3 takes real SN3 returns string
local string c1="|c00ff0303"
local string c="||"
local string p=" "
local string s=c1+c+"|r"
local string RRI
if SN3>85 then
set RRI=s+p+s+p+s+p+s+p+s+p+s+p+s
elseif SN3>70 then
set RRI=s+p+s+p+s+p+s+p+s+p+s+p+c
elseif SN3>55 then
set RRI=s+p+s+p+s+p+s+p+s+p+c+p+c
elseif SN3>40 then
set RRI=s+p+s+p+s+p+s+p+c+p+c+p+c
elseif SN3>25 then
set RRI=s+p+s+p+s+p+c+p+c+p+c+p+c
elseif SN3>10 then
set RRI=s+p+s+p+c+p+c+p+c+p+c+p+c
elseif SN3>0 then
set RRI=s+p+c+p+c+p+c+p+c+p+c+p+c
else
set RRI=c+p+c+p+c+p+c+p+c+p+c+p+c
endif
return RRI
endfunction
function SS3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ST3=(LoadInteger(ZY,(V0I),(230)))
local real HP=(LoadReal(ZY,(V0I),(232)))
local texttag tt=(LoadTextTagHandle(ZY,(V0I),(231)))
local integer ZLI=GetTriggerEvalCount(t)
local real SR3=YQI(HP-ZLI,0)
local boolean SP3=true
call SetTextTagText(tt,SM3(100*SR3/HP),0.018)
call SetTextTagPosUnit(tt,V8I,0)
if IsUnitVisible(V8I,GetLocalPlayer())==false and XJI(GetLocalPlayer())==false then
set SP3=false
endif
call SetTextTagVisibility(tt,SP3)
if SR3==0 then
call M1I(GetOwningPlayer(V8I),V8I,20+20*WTI)
endif
if SR3==0 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093742674,true)
call UnitRemoveAbility(V8I,1093742675)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call DestroyTextTag(tt)
endif
set t=null
set V8I=null
return false
endfunction
function SQ3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093742674)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real HP=GetUnitState(XTI,UNIT_STATE_LIFE)
local integer WA2=GetUnitLevel(XTI)
local integer ST3=GetUnitTypeId(XTI)
local texttag tt=CreateTextTag()
local boolean SP3=true
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,0,0,0)
call JUI("SPLK",GetUnitX(V8I),GetUnitY(V8I),GetUnitX(XTI),GetUnitY(XTI),0.1,0.1,0.2,.9,0.5)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",GetUnitX(XTI),GetUnitY(XTI)))
if IsUnitVisible(V8I,GetLocalPlayer())==false then
set SP3=false
endif
call SY3(V8I,XTI)
call SetTextTagText(tt,SM3(100),0.018)
call SetTextTagPosUnit(tt,V8I,0)
call SetTextTagVisibility(tt,SP3)
call SetTextTagPermanent(tt,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093742674,false)
call KKI(V8I,1093742675)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveTextTagHandle(ZY,(V0I),(231),(tt))
call SaveInteger(ZY,(V0I),(230),(ST3))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(232),((HP)*1.0))
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SS3))
call ShowUnit(XTI,false)
call UnitRemoveBuffs(XTI,true,true)
call UnitRemoveAbility(XTI,1097167980)
call UnitDamageTarget(T0I,XTI,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set t=null
set V8I=null
set XTI=null
endfunction
function SU3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093742674)
local integer WA2=GetUnitLevel(XTI)
if(GetOwningPlayer(XTI)!=CO[0]and GetOwningPlayer(XTI)!=DO[0])and((WTI==1 and WA2>2)or(WTI==2 and WA2>4)or(WTI==3 and WA2>5)or(WTI==4 and WA2>6))then
call Y8I(V8I)
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848656728))
endif
set V8I=null
set XTI=null
endfunction
function T03 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer id=(LoadInteger(ZY,(V0I),(34)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function TI3 takes nothing returns nothing
local integer id=GetSpellAbilityId()
local trigger t
local integer V0I
if id==1093750609 or id==1093750610 or id==1093750611 or id==1093750612 or id==1093750613 or id==1093750614 or id==1093750615 or id==1093750616 or id==1093750617 or id==1395667021 or id==1093750618 or id==1395667022 or id==1093750832 or id==1093750833 or id==1093750834 or id==1093750835 or id==1093750836 or id==1093750837 or id==1093750838 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function T03))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call SaveInteger(ZY,(V0I),(34),(id))
set t=null
endif
endfunction
function T13 takes nothing returns boolean
if GetSpellAbilityId()==1093742674 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call SU3()
else
call SQ3()
endif
elseif GetUnitTypeId(GetTriggerUnit())==1430467634 then
call TI3()
endif
return false
endfunction
function DB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function T13))
set t=null
endfunction
function TO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call UnitRemoveAbility(XSI,1093750604)
call UnitRemoveAbility(XSI,1093750606)
call UnitRemoveAbility(XSI,1093750607)
call UnitRemoveAbility(XSI,1093750605)
call UnitRemoveAbility(XSI,1110455370)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function T23 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093750608)
if WTI==1 then
call KKI(XSI,1093750604)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750604,false)
elseif WTI==2 then
call KKI(XSI,1093750606)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750606,false)
elseif WTI==3 then
call KKI(XSI,1093750607)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750607,false)
elseif WTI==4 then
call KKI(XSI,1093750605)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750605,false)
endif
call TriggerRegisterTimerEvent(t,6+2*WTI,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TO3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
set t=null
endfunction
function T33 takes nothing returns boolean
if GetSpellAbilityId()==1093750608 then
call T23()
endif
return false
endfunction
function DC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T33))
set t=null
endfunction
function T43 takes nothing returns boolean
local real x
local real y
if(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))then
set x=CMI+GetRandomReal(20,70)*Cos(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)
set y=CNI+GetRandomReal(20,70)*Sin(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)
call SetUnitPosition(GetFilterUnit(),x,y)
endif
return false
endfunction
function T53 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local group g=ZJI()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,x,y,0)
local integer WTI=GetUnitAbilityLevel(V8I,1093810508)
set CMI=GetUnitX(V8I)+100*Cos(GetUnitFacing(V8I)*bj_DEGTORAD)
set CNI=GetUnitY(V8I)+100*Sin(GetUnitFacing(V8I)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,410+24,Condition(function T43))
call ZYI(g)
call KKI(T0I,1093678662)
call SetUnitAbilityLevel(T0I,1093678662,WTI)
call IssueImmediateOrder(T0I,"stomp")
set V8I=null
set g=null
endfunction
function T63 takes nothing returns boolean
if GetSpellAbilityId()==1093810508 then
call T53()
endif
return false
endfunction
function DD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T63))
set t=null
endfunction
function T73 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetUnitAbilityLevel(XTI,1110454357)==0 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(XTI,1093751088)
call UnitRemoveAbility(XTI,1093751089)
call UnitRemoveAbility(XTI,1093751090)
call UnitRemoveAbility(XTI,1093751091)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function T83 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093677879)
local integer LCI
if WTI==1 then
set LCI=1093751088
elseif WTI==2 then
set LCI=1093751089
elseif WTI==3 then
set LCI=1093751090
elseif WTI==4 then
set LCI=1093751091
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),LCI,false)
call KKI(XTI,LCI)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function T73))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function T93 takes nothing returns boolean
if GetSpellAbilityId()==1093677879 then
call T83()
endif
return false
endfunction
function DE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T93))
set t=null
endfunction
function TA3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call UnitRemoveAbility(XTI,1093751094)
call UnitRemoveAbility(XTI,1110459224)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XTI=null
return false
endfunction
function TB3 takes unit XSI,unit XTI,integer WTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SetUnitPathing(XTI,true)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TA3))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call KKI(XTI,1093751094)
call UnitMakeAbilityPermanent(XTI,true,1093751094)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093751094,false)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",XTI,"chest"))
call XNI(XSI,XTI,1,70*WTI)
set t=null
endfunction
function TC3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit TD3=(LoadUnitHandle(ZY,(V0I),(393)))
local unit TE3=(LoadUnitHandle(ZY,(V0I),(394)))
local unit TF3=(LoadUnitHandle(ZY,(V0I),(395)))
local unit TG3=(LoadUnitHandle(ZY,(V0I),(396)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real DG2=(LoadReal(ZY,(V0I),(6)))
local real DH2=(LoadReal(ZY,(V0I),(7)))
local real KUI=YGI(DG2+19*Cos(B92))
local real L0I=YZI(DH2+19*Sin(B92))
local group g
local integer TH3=(LoadInteger(ZY,(V0I),(12)))
local location l
call SetUnitPosition(XSI,KUI,L0I)
call SetUnitFacing(XSI,B92*bj_RADTODEG)
call SaveReal(ZY,(V0I),(6),((KUI)*1.0))
call SaveReal(ZY,(V0I),(7),((L0I)*1.0))
if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",KUI,L0I))
endif
if GetTriggerEvalCount(t)==2 then
call SetUnitAnimationByIndex(XSI,3)
endif
if TD3==null or TE3==null or TF3==null or TG3==null then
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,KUI,L0I,120,Condition(function SOI))
if FirstOfGroup(g)!=null then
if TD3!=null then
call GroupRemoveUnit(g,TD3)
endif
if TE3!=null then
call GroupRemoveUnit(g,TE3)
endif
if TF3!=null then
call GroupRemoveUnit(g,TF3)
endif
if FirstOfGroup(g)!=null then
if TD3==null then
set TD3=FirstOfGroup(g)
call SetUnitPathing(TD3,false)
call V5I(TD3,4404,5)
elseif TE3==null and WTI>1 then
set TE3=FirstOfGroup(g)
call SetUnitPathing(TE3,false)
call V5I(TE3,4404,5)
elseif TF3==null and WTI>2 then
set TF3=FirstOfGroup(g)
call SetUnitPathing(TF3,false)
call V5I(TF3,4404,5)
elseif TG3==null and WTI>3 then
set TG3=FirstOfGroup(g)
call SetUnitPathing(TG3,false)
call V5I(TG3,4404,5)
endif
endif
endif
call ZYI(g)
set g=null
endif
call SaveUnitHandle(ZY,(V0I),(393),(TD3))
call SaveUnitHandle(ZY,(V0I),(394),(TE3))
call SaveUnitHandle(ZY,(V0I),(395),(TF3))
call SaveUnitHandle(ZY,(V0I),(396),(TG3))
if TD3!=null then
call SetUnitPosition(TD3,KUI,L0I)
endif
if TE3!=null then
call SetUnitPosition(TE3,KUI,L0I)
endif
if TF3!=null then
call SetUnitPosition(TF3,KUI,L0I)
endif
if TG3!=null then
call SetUnitPosition(TG3,KUI,L0I)
endif
if ModuloInteger(GetTriggerEvalCount(t),3)==0 then
call KCI(KUI,L0I,200)
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>TH3 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call SetUnitAnimationByIndex(XSI,0)
call SetUnitTimeScale(XSI,1.0)
call SetUnitPathing(XSI,true)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if TD3!=null then
if IsPointInRegion(ZN,GetUnitX(TD3),GetUnitY(TD3))==true then
set l=NNI(GetUnitX(TD3),GetUnitY(TD3))
call SetUnitX(TD3,YGI(GetLocationX(l)))
call SetUnitY(TD3,YZI(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call TB3(XSI,TD3,WTI)
call KCI(GetUnitX(TD3),GetUnitY(TD3),300)
endif
if TE3!=null then
if IsPointInRegion(ZN,GetUnitX(TE3),GetUnitY(TE3))==true then
set l=NNI(GetUnitX(TE3),GetUnitY(TE3))
call SetUnitX(TE3,YGI(GetLocationX(l)))
call SetUnitY(TE3,YZI(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call TB3(XSI,TE3,WTI)
call KCI(GetUnitX(TE3),GetUnitY(TE3),300)
endif
if TF3!=null then
if IsPointInRegion(ZN,GetUnitX(TF3),GetUnitY(TF3))==true then
set l=NNI(GetUnitX(TF3),GetUnitY(TF3))
call SetUnitX(TF3,YGI(GetLocationX(l)))
call SetUnitY(TF3,YZI(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call TB3(XSI,TF3,WTI)
call KCI(GetUnitX(TF3),GetUnitY(TF3),300)
endif
if TG3!=null then
if IsPointInRegion(ZN,GetUnitX(TG3),GetUnitY(TG3))==true then
set l=NNI(GetUnitX(TG3),GetUnitY(TG3))
call SetUnitX(TG3,YGI(GetLocationX(l)))
call SetUnitY(TG3,YZI(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call TB3(XSI,TG3,WTI)
call KCI(GetUnitX(TG3),GetUnitY(TG3),300)
endif
if TD3!=null and KMI(TD3)==false then
call IssueTargetOrder(XSI,"attack",TD3)
elseif TE3!=null and KMI(TE3)==false then
call IssueTargetOrder(XSI,"attack",TE3)
elseif TF3!=null and KMI(TF3)==false then
call IssueTargetOrder(XSI,"attack",TF3)
elseif TG3!=null and KMI(TG3)==false then
call IssueTargetOrder(XSI,"attack",TG3)
endif
call KCI(KUI,L0I,375)
if IsPointInRegion(ZN,GetUnitX(XSI),GetUnitY(XSI))==true then
set l=NNI(GetUnitX(XSI),GetUnitY(XSI))
call SetUnitX(XSI,YGI(GetLocationX(l)))
call SetUnitY(XSI,YZI(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
endif
set t=null
set XSI=null
return false
endfunction
function TZ3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real J6I=YGI(GetSpellTargetX())
local real J7I=YZI(GetSpellTargetY())
local unit XSI=GetTriggerUnit()
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local integer WTI=GetUnitAbilityLevel(XSI,1093751364)
local real a=JPI(J4I,J5I,J6I,J7I)*bj_DEGTORAD
if JAI(J4I,J5I,J6I,J7I)>825 then
set J6I=YGI(J4I+825*Cos(a))
set J7I=YZI(J5I+825*Sin(a))
endif
call SetUnitPathing(XSI,false)
call SetUnitAnimationByIndex(XSI,3)
call SetUnitTimeScale(XSI,1.5)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TC3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(393),(null))
call SaveUnitHandle(ZY,(V0I),(394),(null))
call SaveUnitHandle(ZY,(V0I),(395),(null))
call SaveUnitHandle(ZY,(V0I),(396),(null))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveReal(ZY,(V0I),(6),((J4I)*1.0))
call SaveReal(ZY,(V0I),(7),((J5I)*1.0))
call SaveReal(ZY,(V0I),(13),((Atan2(J7I-J5I,J6I-J4I))*1.0))
call SaveInteger(ZY,(V0I),(12),(R2I(JAI(J4I,J5I,J6I,J7I)/19.0)))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("war3mapImported\\SkewerTuskGlow_1.mdx",XSI,"head")))
set t=null
set XSI=null
endfunction
function TV3 takes nothing returns boolean
if GetSpellAbilityId()==1093751364 then
call TZ3()
endif
return false
endfunction
function TW3 takes nothing returns boolean
if GetSpellAbilityId()==1093751364 then
call SetUnitAnimationByIndex(GetTriggerUnit(),7)
endif
return false
endfunction
function DF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TV3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function TW3))
set t=null
endfunction
function MysticSnake_DoNothing takes nothing returns nothing
endfunction
function TX3 takes nothing returns boolean
local real d
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(CTI))==true and IsUnitInGroup(GetFilterUnit(),CPI)==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(CRI))==true then
set d=JAI(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),GetUnitX(CTI),GetUnitY(CTI))
if d<CQI then
set CSI=GetFilterUnit()
set CQI=d
endif
endif
return false
endfunction
function TY3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local real TJ3=(LoadReal(ZY,(V0I),(222)))
local real TK3=(LoadReal(ZY,(V0I),(223)))
local real TL3=(LoadReal(ZY,(V0I),(224)))
local real H1O
local group g
local real a
local real x
local real y
set a=Atan2(GetUnitY(XTI)-GetUnitY(T0I),GetUnitX(XTI)-GetUnitX(T0I))
if XSI==XTI then
set x=GetUnitX(T0I)+25*Cos(a)
set y=GetUnitY(T0I)+25*Sin(a)
else
set x=GetUnitX(T0I)+15*Cos(a)
set y=GetUnitY(T0I)+15*Sin(a)
endif
call SetUnitX(T0I,x)
call SetUnitY(T0I,y)
if JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))<60 then
call SetUnitX(T0I,GetUnitX(XTI))
call SetUnitY(T0I,GetUnitY(XTI))
if XSI==XTI then
call SetUnitState(XSI,UNIT_STATE_MANA,GetUnitState(XSI,UNIT_STATE_MANA)+TJ3)
call KillUnit(T0I)
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if IsUnitVisible(XTI,GetOwningPlayer(T0I))==true then
call XNI(XSI,XTI,1,(40+40*WTI)+0.2*TL3*(40+40*WTI))
set TL3=TL3+1
if GetUnitState(XTI,UNIT_STATE_MANA)>0 then
set H1O=RMinBJ(GetUnitState(XTI,UNIT_STATE_MANA),(10+10*WTI)+0.2*TK3*(10+10*WTI))
call SetUnitState(XTI,UNIT_STATE_MANA,GetUnitState(XTI,UNIT_STATE_MANA)-H1O)
call KEI(NE,GetUnitX(XTI),GetUnitY(XTI))
set TJ3=TJ3+H1O
set TK3=TK3+1
endif
endif
call SaveReal(ZY,(V0I),(222),((TJ3)*1.0))
call SaveReal(ZY,(V0I),(224),((TL3)*1.0))
call SaveReal(ZY,(V0I),(223),((TK3)*1.0))
set g=ZJI()
set CSI=null
set CTI=XTI
set CPI=BA2
set CQI=99999
set CRI=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),500,Condition(function TX3))
call ZYI(g)
if CSI==null or TL3==(2+WTI)then
call SaveInteger(ZY,(V0I),(30),(ZZI(XSI)))
else
call SaveInteger(ZY,(V0I),(30),(ZZI(CSI)))
call GroupAddUnit(BA2,CSI)
endif
endif
call ZFI(XUI)
endif
set t=null
set XSI=null
set XTI=null
set g=null
return false
endfunction
function TM3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093682994)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local group g=ZJI()
local real TL3=0
local real TK3=0
local real H1O=0
local real TJ3=0
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1747990832,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
call KEI(ME,GetUnitX(XSI),GetUnitY(XSI))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function TY3))
call SaveGroupHandle(ZY,(V0I),(187),(g))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveInteger(ZY,(V0I),(34),(0))
call SaveReal(ZY,(V0I),(222),((TJ3)*1.0))
call SaveReal(ZY,(V0I),(224),((TL3)*1.0))
call SaveReal(ZY,(V0I),(223),((TK3)*1.0))
call GroupAddUnit(g,XTI)
set XSI=null
set XTI=null
set t=null
set g=null
endfunction
function TN3 takes nothing returns boolean
if GetSpellAbilityId()==1093682994 then
call TM3()
endif
return false
endfunction
function DH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TN3))
set t=null
endfunction
function TS3 takes nothing returns nothing
call IssueTargetOrder(CUI,"purge",GetEnumUnit())
endfunction
function TT3 takes unit XSI,unit XTI returns boolean
local real a=JRI(XTI,XSI)
local real JC2=GetUnitFacing(XTI)
local real c1
local real c2
local real d1=-1.0
local real d2=-1.0
local real e1
local real e2
local real f1=-1.0
local real f2=-1.0
if IsUnitVisible(XSI,GetOwningPlayer(XTI))==false then
return false
endif
set c1=RMaxBJ(JC2-75,0)
set c2=JC2
if JC2-75<=0 then
set d1=360-(75-(c2-c1))
set d2=360
endif
set e1=JC2
set e2=RMinBJ(JC2+75,360)
if JC2+75>=360 then
set f1=0
set f2=0+(75-(e2-e1))
endif
if a<0 then
set a=a+360
elseif a>360 then
set a=a-360
endif
if(a>c1 and a<c2)or(d1!=-1 and a>d1 and a<d2)or(a>e1 and a<e2)or(f1!=-1 and a>f1 and a<f2)then
return true
endif
return false
endfunction
function TR3 takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and TT3(OK,GetFilterUnit())and GetUnitAbilityLevel(GetFilterUnit(),1110458961)==0
endfunction
function TP3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093747028)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local group g=ZJI()
set CUI=T0I
set D0I=XSI
set OK=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),825,Condition(function TR3))
call ForGroup(g,function TS3)
call ZYI(g)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
if GetTriggerEvalCount(t)>6 then
call ZSI(t)
call FlushChildHashtable(ZY,(V0I))
else
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",XSI,"chest")))
endif
set XSI=null
set T0I=null
set g=null
set t=null
return false
endfunction
function TQ3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function TP3))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call KKI(T0I,1093677654)
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",GetTriggerUnit(),"chest")))
call SetUnitAbilityLevel(T0I,1093677654,GetUnitAbilityLevel(GetTriggerUnit(),1093747028))
call TriggerEvaluate(t)
set t=null
set T0I=null
endfunction
function TU3 takes nothing returns boolean
if GetSpellAbilityId()==1093747028 then
call TQ3()
endif
return false
endfunction
function DZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TU3))
set t=null
endfunction
function R03 takes nothing returns boolean
if GetSpellAbilityId()==1093747504 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748052,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748051,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748049,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748050,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093808966,false)
endif
return false
endfunction
function DG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R03))
set t=null
endfunction
function RI3 takes integer ZLI,unit XSI,unit XTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
if ZLI==0 then
call IssueTargetOrder(XSI,"attack",XTI)
elseif ZLI==1 then
call KKI(T0I,1093686344)
call SetUnitAbilityLevel(T0I,1093686344,1)
call IssueTargetOrder(T0I,"slow",XTI)
elseif ZLI==2 then
call KKI(T0I,1093686344)
call SetUnitAbilityLevel(T0I,1093686344,1)
call IssueTargetOrder(T0I,"slow",XTI)
elseif ZLI==3 then
call KKI(T0I,1093686344)
call SetUnitAbilityLevel(T0I,1093686344,2)
call IssueTargetOrder(T0I,"slow",XTI)
elseif ZLI==4 then
call KKI(T0I,1093686344)
call SetUnitAbilityLevel(T0I,1093686344,3)
call IssueTargetOrder(T0I,"slow",XTI)
elseif ZLI==5 then
call KKI(T0I,1093686344)
call SetUnitAbilityLevel(T0I,1093686344,4)
call IssueTargetOrder(T0I,"slow",XTI)
elseif ZLI==6 then
call KKI(T0I,1093686344)
call SetUnitAbilityLevel(T0I,1093686344,5)
call IssueTargetOrder(T0I,"slow",XTI)
endif
set T0I=null
endfunction
function R13 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local real XX2=(10.0+WTI*5.0)/100.0
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
set ZLI=ZLI+1
call RI3(ZLI,XSI,XTI)
if ZLI==9 then
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SaveInteger(ZY,(V0I),(34),(ZLI))
endif
elseif XHI(GetEventDamage())and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false then
if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)or GetUnitAbilityLevel(GetEventDamageSource(),1093678162)==0 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage()*XX2)
else
call SetUnitState(L1[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE,GetUnitState(L1[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE)+GetEventDamage()*XX2)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",GetEventDamageSource(),"origin"))
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function RO3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call RI3(0,XSI,XTI)
call SaveInteger(ZY,(V0I),(375),(0))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(XSI,1093744948)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterTimerEvent(t,0.01,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function R13))
set t=null
set XSI=null
set XTI=null
endfunction
function R23 takes nothing returns boolean
if GetSpellAbilityId()==1093744948 and ZXI(GetSpellTargetUnit())==false then
call RO3()
endif
return false
endfunction
function H01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R23))
set t=null
call YVI(1093686344)
endfunction
function Snatch_Damage takes nothing returns nothing
call XNI(DII,GetEnumUnit(),1,D1I*125+25)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl",GetEnumUnit(),"overhead"))
endfunction
function Snatch_Process takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=OK
local unit XTI=AK
local real XPI=(LoadReal(ZY,(V0I),(20)))
call XNI(XSI,XTI,1,XPI)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl",XTI,"overhead"))
set XSI=null
set XTI=null
endfunction
function R33 takes nothing returns nothing
local unit XSI=DII
local unit XTI=GetEnumUnit()
local integer WTI=D1I
local trigger t=LII(XSI,XTI,1747993670,"R43",600)
local integer V0I=GetHandleId(t)
call SaveReal(ZY,(V0I),(20),((WTI*125+25)*1.0))
set XSI=null
set XTI=null
endfunction
function R53 takes unit XSI,unit XTI,integer WTI returns nothing
local group g=ZJI()
set OK=XSI
set DII=XSI
set D1I=WTI
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),725,Condition(function SOI))
call ForGroup(g,function R33)
call ZYI(g)
set g=null
endfunction
function R63 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitShareVision(XTI,GetOwningPlayer(V8I),false)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(XTI),GetUnitY(XTI)))
call SetUnitPosition(V8I,GetUnitX(XTI),GetUnitY(XTI))
call PauseUnit(V8I,false)
call ShowUnit(V8I,true)
call SetUnitPathing(V8I,true)
call ClearSelectionForPlayer(GetOwningPlayer(V8I))
call SelectUnitForPlayerSingle(V8I,GetOwningPlayer(V8I))
call SetUnitInvulnerable(V8I,false)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call RemoveUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call R53(V8I,XTI,WTI)
call SaveInteger(ZY,(GetHandleId((V8I))),((4310)),(2))
elseif IsUnitType(XTI,UNIT_TYPE_HERO)==true and IsUnitEnemy(XTI,GetOwningPlayer(V8I))==true then
call UnitShareVision(XTI,GetOwningPlayer(V8I),false)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(XTI),GetUnitY(XTI)))
call SetUnitPosition(V8I,GetUnitX(XTI),GetUnitY(XTI))
call PauseUnit(V8I,false)
call ShowUnit(V8I,true)
call SetUnitPathing(V8I,true)
call ClearSelectionForPlayer(GetOwningPlayer(V8I))
call SelectUnitForPlayerSingle(V8I,GetOwningPlayer(V8I))
call SetUnitInvulnerable(V8I,false)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call RemoveUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call R53(V8I,XTI,WTI)
call SaveInteger(ZY,(GetHandleId((V8I))),((4310)),(2))
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093686104 then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(XTI),GetUnitY(XTI)))
if IsUnitEnemy(XTI,GetOwningPlayer(V8I))then
call SetUnitState(V8I,UNIT_STATE_LIFE,GetUnitState(V8I,UNIT_STATE_LIFE)+GetUnitState(XTI,UNIT_STATE_LIFE))
endif
call UnitShareVision(XTI,GetOwningPlayer(V8I),false)
call SetUnitPosition(V8I,GetUnitX(XTI),GetUnitY(XTI))
call PauseUnit(V8I,false)
call ShowUnit(V8I,true)
call SetUnitPathing(V8I,true)
call SetUnitAnimation(V8I,"Stand Victory")
call LLI(V8I,1.5)
call ClearSelectionForPlayer(GetOwningPlayer(V8I))
call SelectUnitForPlayerSingle(V8I,GetOwningPlayer(V8I))
call SetUnitInvulnerable(V8I,false)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call RemoveUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call R53(V8I,XTI,WTI)
if IsUnitEnemy(XTI,GetOwningPlayer(V8I))then
call UnitRemoveBuffs(XTI,true,true)
call TZI(XTI,0,0)
call XNI(V8I,XTI,1,100000)
call XNI(V8I,XTI,2,100000)
call XNI(V8I,XTI,3,100000)
endif
call SaveInteger(ZY,(GetHandleId((V8I))),((4310)),(2))
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELECTED and GetTriggerUnit()==XTI then
call ClearSelectionForPlayer(GetOwningPlayer(V8I))
call SelectUnitAddForPlayer(T0I,GetOwningPlayer(V8I))
else
call SetUnitPosition(V8I,GetUnitX(XTI),GetUnitY(XTI))
endif
set t=null
set XTI=null
set V8I=null
return false
endfunction
function R73 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697657136,7260,-7732,0)
local string R83="Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl"
local string R93="Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBase.mdl"
local string RA3="Abilities\\Spells\\Other\\Aneu\\AneuTarget.mdl"
if IsPlayerEnemy(GetLocalPlayer(),GetOwningPlayer(V8I))and XJI(GetLocalPlayer())==false then
set R83=""
set R93=""
set RA3=""
endif
call UnitRemoveBuffs(V8I,true,true)
call TZI(V8I,0,0)
call SetUnitInvulnerable(T0I,true)
call KKI(T0I,1093686104)
call ClearSelectionForPlayer(GetOwningPlayer(V8I))
call SelectUnitForPlayerSingle(T0I,GetOwningPlayer(V8I))
call UnitShareVision(XTI,GetOwningPlayer(V8I),true)
call SetUnitInvulnerable(V8I,true)
call ShowUnit(V8I,false)
call PauseUnit(V8I,true)
call SetUnitPathing(V8I,false)
call DestroyEffect(AddSpecialEffectTarget(R83,XTI,"overhead"))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget(R93,XTI,"overhead")))
call SaveEffectHandle(ZY,(V0I),(177),(AddSpecialEffectTarget(RA3,XTI,"overhead")))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(V8I,1093686103)))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(V8I),EVENT_PLAYER_UNIT_SELECTED,Condition(function HRI))
call TriggerRegisterUnitEvent(t,T0I,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerAddCondition(t,Condition(function R63))
call SaveInteger(ZY,(GetHandleId((V8I))),((4310)),(1))
set t=null
set V8I=null
set XTI=null
endfunction
function RB3 takes nothing returns boolean
if GetSpellAbilityId()==1093686103 then
call R73()
endif
return false
endfunction
function RC3 takes nothing returns boolean
if GetSpellAbilityId()==1093686103 and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetSpellTargetUnit()))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659030))
endif
return false
endfunction
function GU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RB3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function RC3))
set t=null
endfunction
function RD3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if GetUnitTypeId(V8I)==1160786520 then
call SetUnitVertexColor(V8I,255,255,255,255)
else
call SetUnitVertexColor(V8I,100,100,100,255)
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call UnitRemoveAbility(V8I,1093686098)
call UnitRemoveAbility(V8I,1093686100)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function RE3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093686322)
call SetUnitVertexColor(V8I,0,0,0,255)
call SetPlayerAbilityAvailable(GetOwningPlayer(V8I),1093686100,false)
call KKI(V8I,1093686100)
call KKI(V8I,1093686098)
call SetUnitAbilityLevel(V8I,1093686098,WTI)
call TZI(V8I,0,0)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",V8I,"right hand")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",V8I,"left hand")))
call TriggerRegisterTimerEvent(t,1.75+0.75*WTI,false)
call TriggerAddCondition(t,Condition(function RD3))
set V8I=null
set t=null
endfunction
function RF3 takes nothing returns boolean
if GetSpellAbilityId()==1093686322 then
call RE3()
endif
return false
endfunction
function GQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RF3))
set t=null
endfunction
function RG3 takes unit XSI,unit XTI returns nothing
local integer WTI=GetUnitAbilityLevel(XSI,1093686099)
local real XPI=(0.03+0.01*WTI)*GetUnitState(XTI,UNIT_STATE_LIFE)
if GetUnitAbilityLevel(XTI,1093678162)==0 then
call XNI(XSI,XTI,2,XPI)
call SetUnitState(XSI,UNIT_STATE_LIFE,XPI+GetUnitState(XSI,UNIT_STATE_LIFE))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",XSI,"origin"))
endif
endfunction
function RH3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI then
call DisableTrigger(t)
call RG3(XSI,XTI)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function RZ3 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XTI=GetTriggerUnit()
local unit XSI=GetAttacker()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function RH3))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XTI=null
set XSI=null
set t=null
endfunction
function RV3 takes nothing returns nothing
local unit XSI=GetAttacker()
if((LoadInteger(ZY,(GetHandleId((XSI))),((4274))))==1)==false then
call V5I(XSI,4274,0.4)
call RZ3()
endif
endfunction
function RW3 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093686099)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call RV3()
endif
return false
endfunction
function RX3 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function RW3))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function RY3 takes nothing returns boolean
if GetLearnedSkill()==1093686099 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093686099)==1 then
call RX3()
endif
return false
endfunction
function GP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RY3))
set t=null
endfunction
function RJ3 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local unit XSI=DOI
local real IIO=GetUnitState(XTI,UNIT_STATE_LIFE)
local real RK3=GetUnitState(XTI,UNIT_STATE_MAX_LIFE)
local real RL3=((0.002+0.002*D2I)*RK3)/2
if IIO<RL3 then
call SetUnitState(XTI,UNIT_STATE_LIFE,1)
call XNI(XSI,XTI,3,100)
call XNI(XSI,XTI,1,100)
call XNI(XSI,XTI,2,100)
else
call SetUnitState(XTI,UNIT_STATE_LIFE,YQI(GetUnitState(XTI,UNIT_STATE_LIFE)-RL3,1))
endif
set XTI=null
set XSI=null
endfunction
function RM3 takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110456372)>0
endfunction
function RN3 takes nothing returns boolean
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group g
if KMI(XSI)==false then
set g=ZJI()
set OK=XSI
set DOI=XSI
set D2I=GetUnitAbilityLevel(XSI,1093677390)
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),1025,Condition(function RM3))
call ForGroup(g,function RJ3)
call ZYI(g)
endif
set g=null
set XSI=null
return false
endfunction
function RS3 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function RN3))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(GetTriggerUnit()))
set t=null
endfunction
function RT3 takes nothing returns boolean
if GetLearnedSkill()==1093677390 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677390)==1 then
call RS3()
endif
return false
endfunction
function DY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RT3))
set t=null
endfunction
function RR3 takes nothing returns boolean
if(not(UnitHasBuffBJ(GetKillingUnit(),1110454866)==true))then
return false
endif
return true
endfunction
function RP3 takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",GetKillingUnit(),"origin"))
call SetUnitManaBJ(GetKillingUnit(),(GetUnitStateSwap(UNIT_STATE_MANA,GetKillingUnit())+(12.00*I2R(GetUnitAbilityLevelSwapped(1093678640,GetKillingUnit())))))
endfunction
function DV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RR3))
call TriggerAddAction(t,function RP3)
endfunction
function R43 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=OK
local unit XTI=AK
local real XPI=(LoadReal(ZY,(V0I),(20)))
local real R92=(LoadReal(ZY,(V0I),(21)))
if IsUnitAlly(XTI,GetOwningPlayer(XSI))then
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)+R92)
else
call XNI(XSI,XTI,1,XPI)
endif
set XSI=null
set XTI=null
endfunction
function RQ3 takes nothing returns nothing
local trigger t=LII(OK,GetEnumUnit(),1747988567,"R43",400)
local integer V0I=GetHandleId(t)
call SaveReal(ZY,(V0I),(20),((TJ)*1.0))
call SaveReal(ZY,(V0I),(21),((RJ)*1.0))
set t=null
endfunction
function RU3 takes nothing returns nothing
if IsUnitVisible(GetEnumUnit(),GetOwningPlayer(OK))then
call RQ3()
endif
endfunction
function P03 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local group g=ZJI()
local integer WTI=GetUnitAbilityLevel(V8I,D3I)
local real r
local real XPI
local real R92
if WTI==1 then
set XPI=75
set R92=50
set r=400
elseif WTI==2 then
set XPI=125
set R92=75
set r=450
elseif WTI==3 then
set XPI=200
set R92=100
set r=475
elseif WTI==4 then
set XPI=275
set R92=130
set r=500
endif
set OK=V8I
set TJ=XPI
set RJ=R92
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),r,Condition(function SLI))
call GroupRemoveUnit(g,V8I)
call ForGroup(g,function RU3)
call ZYI(g)
call SetUnitState(V8I,UNIT_STATE_LIFE,GetUnitState(V8I,UNIT_STATE_LIFE)+R92)
set V8I=null
set g=null
endfunction
function PI3 takes nothing returns boolean
if GetSpellAbilityId()==D3I then
call P03()
endif
return false
endfunction
function DW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PI3))
set t=null
endfunction
function P13 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real XX2=(LoadReal(ZY,(V0I),(680)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",XTI,"origin"))
call XNI(XSI,XTI,1,XX2*(GetUnitState(XTI,UNIT_STATE_MAX_LIFE)-GetUnitState(XTI,UNIT_STATE_LIFE)))
set t=null
set XSI=null
set XTI=null
return false
endfunction
function PO3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer P23=GetUnitAbilityLevel(XSI,1093678647)
local integer P33=GetUnitAbilityLevel(XSI,1093679184)
local real XX2
if P23==1 then
set XX2=0.4
elseif P23==2 or P33==1 then
set XX2=0.6
elseif P23==3 or P33==2 then
set XX2=0.9
elseif P33==3 then
set XX2=1.2
endif
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(680),((XX2)*1.0))
call TriggerRegisterTimerEvent(t,1.0,false)
call TriggerAddCondition(t,Condition(function P13))
set t=null
set XSI=null
set XTI=null
endfunction
function P43 takes nothing returns boolean
if(GetSpellAbilityId()==1093678647 or GetSpellAbilityId()==1093679184)and ZXI(GetSpellTargetUnit())==false then
call PO3()
endif
return false
endfunction
function DX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P43))
set t=null
endfunction
function P53 takes nothing returns nothing
local location l
local unit V8I=GetTriggerUnit()
local real x1=GetUnitX(V8I)
local real y1=GetUnitY(V8I)
local real a
local real x2
local real y2
local integer WTI=GetUnitAbilityLevel(V8I,1093687351)
local real XPI
local real SQI
local unit TEI=null
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=Atan2(y2-y1,x2-x1)
set x2=x1+700*Cos(a)
set y2=y1+700*Sin(a)
if WTI==1 then
set XPI=80
set SQI=0.75
elseif WTI==2 then
set XPI=140
set SQI=1.25
elseif WTI==3 then
set XPI=200
set SQI=1.75
elseif WTI==4 then
set XPI=260
set SQI=2.25
endif
if GetSpellTargetUnit()!=null and ZXI(GetSpellTargetUnit())then
set TEI=GetSpellTargetUnit()
endif
call TDI(V8I,TEI,XPI,SQI,0.52,x1,y1,x2,y2,150,null,true,1600)
call RemoveLocation(l)
set l=null
set V8I=null
endfunction
function P63 takes nothing returns boolean
if GetSpellAbilityId()==1093687351 then
call P53()
endif
return false
endfunction
function H51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P63))
call YVI(1093687350)
set t=null
endfunction
function P73 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real r=GetHeroInt(XTI,true)*4
local integer CA2=IMinBJ(R2I(r),R2I(GetUnitState(XTI,UNIT_STATE_MANA)))
call SetUnitState(XTI,UNIT_STATE_MANA,GetUnitState(XTI,UNIT_STATE_MANA)-CA2)
call XNI(XSI,XTI,1,CA2)
call N1I("MBUR",XSI,XTI,1,1,1,1,0.5)
call K3I("-"+I2S(CA2),3,XTI,0.023,82,82,255,255)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl",XTI,"chest"))
set XSI=null
set XTI=null
endfunction
function P83 takes nothing returns boolean
if GetSpellAbilityId()==1093748789 and ZXI(GetSpellTargetUnit())==false then
call P73()
endif
return false
endfunction
function H61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P83))
set t=null
endfunction
function P93 takes nothing returns nothing
call IssueTargetOrder(D4I,"soulburn",GetEnumUnit())
endfunction
function PA3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
local group g=ZJI()
set D4I=T0I
call KKI(T0I,1093748551)
call GroupEnumUnitsInRange(g,x,y,325,Condition(function S0I))
call ForGroup(g,function P93)
call ZYI(g)
call KillUnit(XSI)
call SetUnitAnimation(XSI,"death")
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadLargeDeathExplode\\UndeadLargeDeathExplode.mdl",x,y))
set XSI=null
set T0I=null
set g=null
endfunction
function PB3 takes nothing returns boolean
if GetSpellAbilityId()==1093748808 then
call PA3()
endif
return false
endfunction
function H71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PB3))
call YVI(1093748551)
set t=null
endfunction
function PC3 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=AK
local integer PD3=GetUnitAbilityLevel(XSI,1093682001)
local integer PE3
local integer WTI=GetUnitAbilityLevel(XSI,1093681746)
set PD3=PD3+1
if WTI==1 then
set PE3=8
elseif WTI==2 then
set PE3=15
elseif WTI==3 then
set PE3=23
else
set PE3=30
endif
set PE3=PE3+1
set PD3=IMinBJ(PE3,PD3)
call SetUnitAbilityLevel(XSI,1093682001,PD3)
call SaveInteger(ZY,(GetHandleId(XSI)),(710),(PD3))
set XSI=null
endfunction
function PF3 takes nothing returns nothing
local integer PD3
local integer WTI
local integer PE3
local trigger t
local integer V0I
local unit XSI=GetKillingUnit()
if GetUnitTypeId(XSI)==1697656899 then
set XSI=L1[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
endif
set PD3=GetUnitAbilityLevel(XSI,1093682001)
set WTI=GetUnitAbilityLevel(XSI,1093681746)
if WTI==1 then
set PE3=8
elseif WTI==2 then
set PE3=15
elseif WTI==3 then
set PE3=23
else
set PE3=30
endif
if PD3<=PE3 then
set t=LII(GetTriggerUnit(),XSI,1747993426,"PC3",500)
set V0I=GetHandleId(t)
set t=null
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
endfunction
function PG3 takes nothing returns nothing
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(710),(R2I(GetUnitAbilityLevel(GetTriggerUnit(),1093682001)*0.5)+1))
call SetUnitAbilityLevel(GetTriggerUnit(),1093682001,R2I(GetUnitAbilityLevel(GetTriggerUnit(),1093682001)*0.5)+1)
endfunction
function PH3 takes nothing returns boolean
if GetUnitAbilityLevel(GetKillingUnit(),1093681746)>0 and IsUnitIllusion(GetTriggerUnit())==false then
call PF3()
elseif GetUnitAbilityLevel(L1[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],1093681746)>0 and GetUnitTypeId(GetKillingUnit())==1697656899 then
call PF3()
endif
if GetUnitAbilityLevel(GetTriggerUnit(),1093681746)>0 and IsUnitIllusion(GetTriggerUnit())==false then
call PG3()
endif
return false
endfunction
function PZ3 takes nothing returns boolean
local unit V8I=L1[GetPlayerId(GetTriggerPlayer())]
local integer PV3=GetUnitAbilityLevel(V8I,1093682001)-1
local integer PW3=0
local integer WTI=GetUnitAbilityLevel(V8I,1093681746)
if WTI==1 then
set PW3=8
elseif WTI==2 then
set PW3=15
elseif WTI==3 then
set PW3=23
elseif WTI==4 then
set PW3=30
endif
set PV3=IMaxBJ(IMinBJ(PV3,PW3),0)
if GetUnitTypeId(V8I)==1315334514 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848658757)+" "+I2S(PV3)+"/"+I2S(PW3))
endif
return false
endfunction
function DJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function PH3))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-st",true)
call TriggerAddCondition(t,Condition(function PZ3))
set t=null
endfunction
constant function Shadowraze_RawCode1 takes nothing returns integer
return 1093682521
endfunction
constant function Shadowraze_RawCode2 takes nothing returns integer
return 1093682760
endfunction
constant function Shadowraze_RawCode3 takes nothing returns integer
return 1093682736
endfunction
constant function Shadowraze_Area takes nothing returns integer
return 275
endfunction
function PX3 takes nothing returns boolean
return GetSpellAbilityId()==(1093682521)or GetSpellAbilityId()==(1093682760)or GetSpellAbilityId()==(1093682736)
endfunction
function PY3 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1
endfunction
function PJ3 takes nothing returns nothing
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),75*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEATH,WEAPON_TYPE_WHOKNOWS)
endfunction
function PK3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit T0I
local group U4I=ZJI()
local boolexpr VE1=Condition(function PY3)
local real H5I=GetUnitFacing(V8I)
local real x
local real y
if GetSpellAbilityId()==(1093682521)then
set x=GetUnitX(V8I)+200*Cos(H5I*bj_DEGTORAD)
set y=GetUnitY(V8I)+200*Sin(H5I*bj_DEGTORAD)
set T0I=CreateUnit(GetOwningPlayer(V8I),1697656886,x,y,0)
call UnitApplyTimedLife(T0I,1112820806,2)
call GroupEnumUnitsInRange(U4I,x,y,(275),VE1)
call ForGroup(U4I,function PJ3)
call GroupClear(U4I)
endif
if GetSpellAbilityId()==(1093682760)then
set x=GetUnitX(V8I)+450*Cos(H5I*bj_DEGTORAD)
set y=GetUnitY(V8I)+450*Sin(H5I*bj_DEGTORAD)
set T0I=CreateUnit(GetOwningPlayer(V8I),1697656886,x,y,0)
call UnitApplyTimedLife(T0I,1112820806,2)
call GroupEnumUnitsInRange(U4I,x,y,(275),VE1)
call ForGroup(U4I,function PJ3)
call GroupClear(U4I)
endif
if GetSpellAbilityId()==(1093682736)then
set x=GetUnitX(V8I)+700*Cos(H5I*bj_DEGTORAD)
set y=GetUnitY(V8I)+700*Sin(H5I*bj_DEGTORAD)
set T0I=CreateUnit(GetOwningPlayer(V8I),1697656886,x,y,0)
call UnitApplyTimedLife(T0I,1112820806,2)
call GroupEnumUnitsInRange(U4I,x,y,(275),VE1)
call ForGroup(U4I,function PJ3)
call GroupClear(U4I)
endif
call ZYI(U4I)
endfunction
function DK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function PK3)
call TriggerAddCondition(t,Condition(function PX3))
endfunction
function PL3 takes nothing returns nothing
if(GetLearnedSkill()==1093682521)then
if(GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit())==1)then
call UnitAddAbility(GetTriggerUnit(),1093682736)
call UnitAddAbility(GetTriggerUnit(),1093682760)
else
call SetUnitAbilityLevelSwapped(1093682736,GetTriggerUnit(),GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit()))
call SetUnitAbilityLevelSwapped(1093682760,GetTriggerUnit(),GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit()))
endif
endif
if(GetLearnedSkill()==1093681746)then
if(GetUnitAbilityLevelSwapped(1093681746,GetTriggerUnit())==1)then
call UnitAddAbility(GetTriggerUnit(),1093682001)
endif
endif
endfunction
function NL takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddAction(t,function PL3)
endfunction
function PM3 takes nothing returns boolean
return GetSpellAbilityId()==1093810506 or GetSpellAbilityId()==1093750096
endfunction
function PN3 takes nothing returns nothing
local integer PD3=(LoadInteger(ZY,(GetHandleId(GetTriggerUnit())),(710)))
local integer PS3
local integer W6I
local unit Y9I=GetTriggerUnit()
local location YV1=GetUnitLoc(GetTriggerUnit())
local location ET2
local integer WTI=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())
if WTI==0 then
set WTI=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())+1
endif
set PD3=PD3/2
set PS3=1
set W6I=PD3
loop
exitwhen PS3>W6I
set ET2=H2I(YV1,50.00,(I2R(PS3)*(360/PD3)))
call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(Y9I),YV1,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093683271)
call SetUnitAbilityLevelSwapped(1093683271,bj_lastCreatedUnit,WTI)
call UnitApplyTimedLifeBJ(2.00,1112820806,bj_lastCreatedUnit)
call IssuePointOrderLoc(bj_lastCreatedUnit,"carrionswarm",ET2)
call SetUnitPathing(bj_lastCreatedUnit,false)
call SetUnitInvulnerable(bj_lastCreatedUnit,true)
call UnitAddAbility(bj_lastCreatedUnit,1097625443)
call RemoveLocation(ET2)
set PS3=PS3+1
endloop
call RemoveLocation(YV1)
endfunction
function DL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PM3))
call TriggerAddAction(t,function PN3)
endfunction
function PT3 takes nothing returns boolean
return GetSpellAbilityId()==1093810506 or GetSpellAbilityId()==1093750096
endfunction
function PR3 takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true)then
return false
endif
if(GetUnitAbilityLevelSwapped(1093678162,GetFilterUnit())==1)then
return false
endif
if(IsUnitAliveBJ(GetFilterUnit())==false)then
return false
endif
if(GetUnitTypeId(GetFilterUnit())==1865429043)then
return false
endif
if(IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==false)then
return false
endif
if(GetTriggerUnit()==GetFilterUnit())then
return false
endif
if(IsUnitVisible(GetFilterUnit(),GetTriggerPlayer())==false)then
return false
endif
return true
endfunction
function PP3 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local location YV1=GetUnitLoc(Y9I)
local integer WTI=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())
if WTI==0 then
set WTI=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())
endif
call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(Y9I),YV1,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093683272)
call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,WTI)
call UnitApplyTimedLifeBJ(2.00,1112820806,bj_lastCreatedUnit)
call IssueTargetOrder(bj_lastCreatedUnit,"cripple",GetEnumUnit())
call SetUnitPathing(bj_lastCreatedUnit,false)
call SetUnitInvulnerable(bj_lastCreatedUnit,true)
call UnitAddAbility(bj_lastCreatedUnit,1097625443)
call RemoveLocation(YV1)
endfunction
function PQ3 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local location YV1=GetUnitLoc(Y9I)
local integer WTI=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())
if WTI==0 then
set WTI=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())
endif
call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(Y9I),YV1,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093683272)
call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,WTI)
call UnitApplyTimedLifeBJ(2.00,1112820806,bj_lastCreatedUnit)
call IssueTargetOrder(bj_lastCreatedUnit,"cripple",GetEnumUnit())
call SetUnitPathing(bj_lastCreatedUnit,false)
call SetUnitInvulnerable(bj_lastCreatedUnit,true)
call UnitAddAbility(bj_lastCreatedUnit,1097625443)
call RemoveLocation(YV1)
endfunction
function PU3 takes nothing returns nothing
local unit Y9I=GetTriggerUnit()
local location YV1=GetUnitLoc(Y9I)
local integer WTI=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())
if WTI==0 then
set WTI=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())
endif
call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(Y9I),YV1,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093683272)
call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,WTI)
call UnitApplyTimedLifeBJ(2.00,1112820806,bj_lastCreatedUnit)
call IssueTargetOrder(bj_lastCreatedUnit,"cripple",GetEnumUnit())
call SetUnitPathing(bj_lastCreatedUnit,false)
call SetUnitInvulnerable(bj_lastCreatedUnit,true)
call UnitAddAbility(bj_lastCreatedUnit,1097625443)
call RemoveLocation(YV1)
endfunction
function Q03 takes nothing returns nothing
local location YV1=GetUnitLoc(GetTriggerUnit())
local unit Y9I=GetTriggerUnit()
local group U4I
set U4I=ZJI()
call GroupEnumUnitsInRangeOfLoc(U4I,YV1,700,Condition(function PR3))
call ForGroup(U4I,function PP3)
call ZYI(U4I)
set U4I=ZJI()
call GroupEnumUnitsInRangeOfLoc(U4I,YV1,400,Condition(function PR3))
call ForGroup(U4I,function PQ3)
call ZYI(U4I)
set U4I=ZJI()
call GroupEnumUnitsInRangeOfLoc(U4I,YV1,200,Condition(function PR3))
call ForGroup(U4I,function PU3)
call ZYI(U4I)
call RemoveLocation(YV1)
endfunction
function DM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PT3))
call TriggerAddAction(t,function Q03)
endfunction
function QI3 takes nothing returns boolean
return GetSpellAbilityId()==1093677640
endfunction
function Q13 takes nothing returns nothing
local unit T0I
if(YAI()==false)then
set T0I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)
call KKI(T0I,1093677650)
call IssueTargetOrder(T0I,"slow",GetSpellTargetUnit())
else
set T0I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)
call KKI(T0I,1093748785)
call IssueTargetOrder(T0I,"slow",GetSpellTargetUnit())
endif
endfunction
function DS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QI3))
call TriggerAddAction(t,function Q13)
endfunction
function QO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
call ResetUnitAnimation(XSI)
call RemoveUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set XSI=null
set T0I=null
set t=null
return false
endfunction
function Q23 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1966092617,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function QO3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SetUnitVertexColorBJ(T0I,0,0,0,75)
call SetUnitAnimation(T0I,"spell third")
set XSI=null
set T0I=null
set t=null
endfunction
function Q33 takes nothing returns boolean
if GetSpellAbilityId()==1093679171 and GetUnitAbilityLevel(GetTriggerUnit(),1093679171)<5 then
call Q23()
endif
return false
endfunction
function DT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function Q33))
set t=null
endfunction
function Q43 takes nothing returns boolean
return(GetLearnedSkill()==1093679158 or GetLearnedSkill()==1093679173)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function Q53 takes nothing returns boolean
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit Q63=(LoadUnitHandle(ZY,(V0I),(304)))
local unit Q73=(LoadUnitHandle(ZY,(V0I),(305)))
if Q63==null or KMI(Q63)or YAI()or REI(Q63,F20[YH0])==null then
call ShowUnit(Q73,false)
else
call ShowUnit(Q73,true)
call SetUnitX(Q73,GetUnitX(Q63))
call SetUnitY(Q73,GetUnitY(Q63))
endif
if GetOwningPlayer(Q73)!=GetOwningPlayer(Q63)then
call SetUnitOwner(Q73,GetOwningPlayer(Q63),true)
endif
return false
endfunction
function Q83 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit Q63=(LoadUnitHandle(ZY,(V0I),(304)))
if Q63!=null and YAI()and KMI(Q63)==false then
call UnitRemoveAbility(Q63,1093742902)
call UnitRemoveAbility(Q63,1093742903)
call SetUnitAbilityLevel(Q63,1395667009,5)
call SetUnitAbilityLevel(Q63,1093679171,5)
elseif Q63!=null and YAI()==false and KMI(Q63)==false then
call KKI(Q63,1093742902)
call KKI(Q63,1093742903)
call SetUnitAbilityLevel(Q63,1395667009,GetUnitAbilityLevel(Q63,1093679158))
call SetUnitAbilityLevel(Q63,1093679171,GetUnitAbilityLevel(Q63,1093679173))
endif
endfunction
function Q93 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggerUnit())
local trigger t
if((LoadBoolean(ZY,(V0I),(306)))==false)then
call SaveBoolean(ZY,(V0I),(306),(true))
set t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,2.00)
call TriggerRegisterGameStateEventTimeOfDay(t,LESS_THAN,6.00)
call TriggerRegisterGameStateEventTimeOfDay(t,GREATER_THAN,18.00)
call TriggerAddAction(t,function Q83)
call SaveUnitHandle(ZY,(GetHandleId(t)),(304),(GetTriggerUnit()))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function Q53))
call SaveUnitHandle(ZY,(V0I),(304),(GetTriggerUnit()))
call SaveUnitHandle(ZY,(V0I),(305),(CreateUnit(GetOwningPlayer(GetTriggerUnit()),1865429313,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)))
endif
if(GetLearnedSkill()==1093679158)then
call KKI(GetTriggerUnit(),1395667009)
if(YAI())then
call SetUnitAbilityLevel(GetTriggerUnit(),1395667009,5)
else
call SetUnitAbilityLevel(GetTriggerUnit(),1395667009,GetUnitAbilityLevel(GetTriggerUnit(),1093679158))
endif
endif
if(GetLearnedSkill()==1093679173)then
call UnitAddAbility(GetTriggerUnit(),1093679171)
if(YAI())then
call SetUnitAbilityLevel(GetTriggerUnit(),1093679171,5)
else
call SetUnitAbilityLevel(GetTriggerUnit(),1093679171,GetUnitAbilityLevel(GetTriggerUnit(),1093679173))
endif
endif
endfunction
function DN1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Q43))
call TriggerAddAction(t,function Q93)
endfunction
function QA3 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=OK
local unit XTI=AK
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real XPI=WTI*40
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093687628)
call SetUnitAbilityLevel(T0I,1093687628,WTI)
call IssueTargetOrder(T0I,"slow",XTI)
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
set XPI=XPI/2
endif
call XNI(XSI,XTI,3,XPI)
set XSI=null
set XTI=null
set T0I=null
endfunction
function QB3 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=LII(V8I,XTI,1747988784,"QA3",1200)
local integer V0I=GetHandleId(t)
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(V8I,1093687629)))
set V8I=null
set XTI=null
set t=null
endfunction
function QC3 takes nothing returns boolean
if GetSpellAbilityId()==1093687629 and ZXI(GetSpellTargetUnit())==false then
call QB3()
endif
return false
endfunction
function DP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QC3))
set t=null
endfunction
function QD3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(XSI,1093747535)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetTriggerUnit()!=XTI and GetAttacker()==XSI then
call UnitRemoveAbility(XSI,1093747535)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerUnit()==XTI and GetAttacker()==XSI then
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
if ZLI==4 then
call UnitRemoveAbility(XSI,1093747535)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
else
call UnitRemoveAbility(XSI,1093747535)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function QE3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093685324)
local trigger t
local integer V0I
call DestroyEffect(AddSpecialEffect("war3mapImported\\PhantomStrike.mdx",GetUnitX(XSI),GetUnitY(XSI)))
call SetUnitX(XSI,GetUnitX(XTI))
call SetUnitY(XSI,GetUnitY(XTI))
if IsUnitAlly(XSI,GetOwningPlayer(XTI))==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call KKI(XSI,1093747535)
call IssueTargetOrder(XSI,"attack",XTI)
call TriggerRegisterTimerEvent(t,3,false)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QD3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
endif
set XSI=null
set XTI=null
set t=null
endfunction
function QF3 takes nothing returns boolean
if GetSpellAbilityId()==1093685324 then
call QE3()
endif
return false
endfunction
function DQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QF3))
set t=null
endfunction
function QG3 takes unit XSI,boolean OE2 returns nothing
local integer WTI=GetUnitAbilityLevel(XSI,1093677904)
if OE2==false then
call UnitRemoveAbility(XSI,1093743430)
call UnitRemoveAbility(XSI,1110458674)
else
call KKI(XSI,1093743430)
endif
endfunction
function QH3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group g
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local boolean QZ3=(LoadBoolean(ZY,(V0I),(674)))
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
if XSI!=null and KMI(XSI)==false and GetUnitAbilityLevel(XSI,1093677904)>0 then
set OK=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),1625,Condition(function S3I))
if FirstOfGroup(g)==null then
if QZ3==true and ZLI>15 then
set QZ3=false
call SaveBoolean(ZY,(V0I),(674),(QZ3))
set ZLI=0
call SaveInteger(ZY,(V0I),(34),(ZLI))
endif
if QZ3==false then
set ZLI=0
call SaveInteger(ZY,(V0I),(34),(ZLI))
call SaveInteger(ZY,(GetHandleId((XSI))),((4302)),(2))
call QG3(XSI,false)
call SetUnitVertexColorBJ(XSI,100,100,100,0)
if GetUnitAbilityLevel(XSI,1093808211)==0 then
call UnitSetUsesAltIcon(XSI,false)
endif
endif
else
if QZ3==false and ZLI>15 then
set QZ3=true
set ZLI=0
call SaveBoolean(ZY,(V0I),(674),(QZ3))
call SaveInteger(ZY,(V0I),(34),(ZLI))
endif
if QZ3==true then
set ZLI=0
call SaveInteger(ZY,(V0I),(34),(ZLI))
call SaveInteger(ZY,(GetHandleId((XSI))),((4302)),(1))
call QG3(XSI,true)
call SetUnitVertexColorBJ(XSI,100,100,100,75)
if IsPlayerEnemy(GetOwningPlayer(XSI),GetLocalPlayer())==true and XJI(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(XSI,true)
else
call UnitSetUsesAltIcon(XSI,false)
endif
endif
endif
call ZYI(g)
set g=null
endif
set t=null
set XSI=null
return false
endfunction
function QV3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function QH3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(34),(0))
call SaveBoolean(ZY,(V0I),(674),(false))
set t=null
set XSI=null
endfunction
function QW3 takes nothing returns boolean
if GetLearnedSkill()==1093677904 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677904)==1 then
call QV3()
endif
return false
endfunction
function DR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function QW3))
set t=null
endfunction
function QX3 takes nothing returns nothing
local unit T0I
if IsUnitInGroup(GetEnumUnit(),EK)==false then
call GroupAddUnit(EK,GetEnumUnit())
set T0I=CreateUnit(GetOwningPlayer(D7I),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call KKI(T0I,1093685833)
call SetUnitAbilityLevel(T0I,1093685833,GetUnitAbilityLevel(D7I,1093685825))
call IssueTargetOrder(T0I,"ensnare",GetEnumUnit())
call XNI(D7I,GetEnumUnit(),1,100)
endif
set T0I=null
endfunction
function QY3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer i
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group T7I=ZJI()
local unit Y9I=(LoadUnitHandle(ZY,(V0I),(221)))
set OK=Y9I
set D7I=Y9I
call GroupEnumUnitsInRange(T7I,x,y,300,Condition(function SOI))
set EK=g
call ForGroup(T7I,function QX3)
call ZYI(T7I)
if GetTriggerEvalCount(t)>D5I*10 then
set i=1
loop
exitwhen i>16
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(2700+i))))
set i=i+1
endloop
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set g=null
set T7I=null
set Y9I=null
return false
endfunction
function QJ3 takes nothing returns nothing
local integer i=1
local location l=GetSpellTargetLoc()
local real QK3=GetLocationX(l)
local real QL3=GetLocationY(l)
local real x
local real y
local integer RDO=16
local string fx="Abilities\\Spells\\Undead\\Graveyard\\GraveMarker.mdl"
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local group g=ZJI()
call KZI(GetOwningPlayer(GetTriggerUnit()),D5I,QK3,QL3,D6I+500)
call KEI(BC,QK3,QL3)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function QY3))
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveUnitHandle(ZY,(V0I),(221),(GetTriggerUnit()))
call SaveReal(ZY,(V0I),(6),((QK3)*1.0))
call SaveReal(ZY,(V0I),(7),((QL3)*1.0))
call CreateCorpse(GetOwningPlayer(GetTriggerUnit()),1969711215,QK3,QL3,0)
loop
exitwhen i>RDO
set x=QK3+D6I*Cos(i*360/RDO*bj_DEGTORAD)
set y=QL3+D6I*Sin(i*360/RDO*bj_DEGTORAD)
call SaveEffectHandle(ZY,(V0I),(2700+i),(AddSpecialEffect(fx,x,y)))
if i==1 or i==5 or i==9 or i==13 then
set x=QK3+275*Cos(i*360/RDO*bj_DEGTORAD)
set y=QL3+275*Sin(i*360/RDO*bj_DEGTORAD)
call CreateCorpse(GetOwningPlayer(GetTriggerUnit()),1969711215,x,y,0)
endif
set i=i+1
endloop
set t=null
set g=null
endfunction
function QM3 takes nothing returns boolean
if GetSpellAbilityId()==1093685825 then
call QJ3()
endif
return false
endfunction
function GA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QM3))
set t=null
endfunction
function QN3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(393)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer CZ2=90
local integer ZLI=GetTriggerEvalCount(t)
if WTI==1 then
set CZ2=160
elseif WTI==2 then
set CZ2=120
endif
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
if ZLI>CZ2 then
call KillUnit(T0I)
call ZSI(t)
call FlushChildHashtable(ZY,(V0I))
elseif ZLI>30 then
call ShowUnit(T0I,true)
endif
set t=null
set T0I=null
set XSI=null
return false
endfunction
function QS3 takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call V5I(GetEnumUnit(),4406,1)
call SetUnitPosition(GetEnumUnit(),TJ,RJ)
call PanCameraToTimedForPlayer(GetOwningPlayer(GetEnumUnit()),TJ,RJ,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
endfunction
function QT3 takes unit XSI,unit XTI returns nothing
local group g=ZJI()
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(XSI),GetUnitY(XSI)))
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(XTI),GetUnitY(XTI)))
set TJ=GetUnitX(XTI)
set RJ=GetUnitY(XTI)
set OK=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),475,Condition(function SZI))
call ForGroup(g,function QS3)
call ZYI(g)
set g=null
endfunction
function QR3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
if GetTriggerEventId()==EVENT_UNIT_DEATH or XTI==null or KMI(XTI)then
call Y3I(GetOwningPlayer(XSI),GetObjectName(1848652614))
elseif XSI==null or KMI(XSI)then
call Y3I(GetOwningPlayer(XSI),GetObjectName(1848652615))
else
call QT3(XSI,XTI)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function QP3 takes nothing returns boolean
local real d
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false or GetUnitAbilityLevel(GetFilterUnit(),1093678162)>0 or GetOwningPlayer(GetFilterUnit())==Player(15)then
return false
endif
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)or(MJ>0 and VPO(GetFilterUnit()))then
set d=JAI(RJ,PJ,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<TJ then
set TJ=d
set OK=GetFilterUnit()
endif
endif
return false
endfunction
function QQ3 takes unit XSI returns unit
local location l
local group g
local real x
local real y
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
set g=ZJI()
set MJ=GetUnitAbilityLevel(XSI,1093685808)
set OK=null
set TJ=9999
set RJ=x
set PJ=y
call GroupEnumUnitsInRange(g,x,y,4000,Condition(function QP3))
call ZYI(g)
call RemoveLocation(l)
set l=null
set g=null
return OK
endfunction
function QU3 takes unit XSI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=GetSpellTargetUnit()
local real x
local real y
local unit u
if XTI==null then
set XTI=QQ3(XSI)
endif
if XTI==null then
call Y3I(GetOwningPlayer(XSI),GetObjectName(1848652616))
return
endif
call TriggerRegisterTimerEvent(t,6-GetUnitAbilityLevel(XSI,1093685808),false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QR3))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\DarkHands.mdl",XTI,"overhead")))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function QN3))
call SaveInteger(ZY,(V0I),(5),(GetUnitAbilityLevel(XSI,1093685808)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set u=CreateUnit(GetOwningPlayer(XSI),1747990840,GetUnitX(XSI),GetUnitY(XSI),0)
call SaveUnitHandle(ZY,(V0I),(393),(u))
call ShowUnit(u,false)
set t=null
set XTI=null
endfunction
function UI3 takes nothing returns nothing
local unit XTI=GetSpellTargetUnit()
local unit V8I=GetTriggerUnit()
if XTI!=null then
if IsUnitAlly(XTI,GetOwningPlayer(V8I))==false then
call Y8I(V8I)
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848652849))
elseif GetUnitAbilityLevel(V8I,1093685808)>0 and VPO(XTI)==false then
call Y8I(V8I)
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848652849))
endif
endif
if XTI==null then
set XTI=QQ3(V8I)
endif
if XTI==null then
call Y8I(V8I)
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848652848))
endif
set XTI=null
set V8I=null
endfunction
function U13 takes nothing returns boolean
if GetSpellAbilityId()==1093685808 then
call UI3()
endif
return false
endfunction
function UO3 takes nothing returns boolean
if GetSpellAbilityId()==1093685808 then
call QU3(GetTriggerUnit())
endif
return false
endfunction
function G81 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function U13))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UO3))
set t=null
call MGI(1747990836)
call MGI(1747990837)
call MGI(1747990838)
endfunction
function U23 takes nothing returns nothing
call XNI(D9I,GetEnumUnit(),1,D8I)
endfunction
function U33 takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+D8I*0.5)
endfunction
function U43 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group g=ZJI()
local real r1=600
local real r2=600
local unit U53
set x=GetUnitX(V8I)
set y=GetUnitY(V8I)
call GroupEnumUnitsInRange(g,x,y,r1,Condition(function STI))
set U53=FirstOfGroup(g)
call ZYI(g)
if U53==null then
if(LoadBoolean(ZY,(V0I),(307)))==true and(LoadBoolean(ZY,(V0I),(308)))==true then
call UnitRemoveAbility(V8I,1093810227)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if(LoadBoolean(ZY,(V0I),(307)))==false then
call SaveBoolean(ZY,(V0I),(307),(true))
else
call SaveBoolean(ZY,(V0I),(308),(true))
endif
endif
else
set x=GetUnitX(U53)
set y=GetUnitY(U53)
call SaveBoolean(ZY,(V0I),(307),(false))
call SaveBoolean(ZY,(V0I),(308),(false))
call FlushChildHashtable(ZY,(GetHandleId(U53)))
call DestroyEffect(AddSpecialEffect("war3mapImported\\CorpseExplosion.mdx",x,y))
call RemoveUnit(U53)
set g=ZJI()
set OK=V8I
set D9I=V8I
set D8I=20*GetUnitAbilityLevel(V8I,1093810232)
call GroupEnumUnitsInRange(g,x,y,r2,Condition(function SOI))
call ForGroup(g,function U23)
set OK=V8I
call GroupEnumUnitsInRange(g,x,y,r2,Condition(function SEI))
call ForGroup(g,function U33)
call ZYI(g)
endif
set g=null
set V8I=null
set U53=null
set t=null
return false
endfunction
function U63 takes nothing returns nothing
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KEI(RF,x,y)
call TriggerRegisterTimerEvent(t,1.25,true)
call TriggerAddCondition(t,Condition(function U43))
call KKI(GetTriggerUnit(),1093810227)
call SaveUnitHandle(ZY,(V0I),(14),(GetTriggerUnit()))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveBoolean(ZY,(V0I),(307),(false))
call SaveBoolean(ZY,(V0I),(308),(false))
set t=null
endfunction
function U73 takes nothing returns boolean
if GetSpellAbilityId()==1093810232 then
call U63()
endif
return false
endfunction
function G91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U73))
set t=null
endfunction
function U83 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
if GetSpellAbilityId()==1093809743 then
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set T0I=null
return false
endfunction
function U93 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local integer WTI=GetUnitAbilityLevel(XSI,1093809743)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function U83))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call KKI(T0I,1093809744)
call SetUnitAbilityLevel(T0I,1093809744,WTI)
call IssuePointOrder(T0I,"rainoffire",x,y)
set XSI=null
set T0I=null
endfunction
function UA3 takes nothing returns boolean
if GetSpellAbilityId()==1093809743 then
call U93()
endif
return false
endfunction
function GB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UA3))
set t=null
endfunction
function UB3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,1093809233)
local integer NH2
local real UC3
local real UD3=3+WTI
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>4*UD3 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1093809242)
call UnitRemoveAbility(XTI,1093809456)
call UnitRemoveAbility(XTI,1093809240)
call UnitRemoveAbility(XTI,1093809457)
call UnitRemoveAbility(XTI,1093809241)
call UnitRemoveAbility(XTI,1110459720)
else
set UC3=100*GetUnitState(XTI,UNIT_STATE_LIFE)/GetUnitState(XTI,UNIT_STATE_MAX_LIFE)
if UC3<20 then
set NH2=5
elseif UC3<40 then
set NH2=4
elseif UC3<60 then
set NH2=3
elseif UC3<80 then
set NH2=2
else
set NH2=1
endif
if NH2==1 then
if GetUnitAbilityLevel(XTI,1093809242)==0 then
call UnitRemoveAbility(XTI,1093809456)
call UnitRemoveAbility(XTI,1093809240)
call UnitRemoveAbility(XTI,1093809457)
call UnitRemoveAbility(XTI,1093809241)
call UnitRemoveAbility(XTI,1110459720)
call UnitAddAbility(XTI,1093809242)
endif
elseif NH2==2 then
if GetUnitAbilityLevel(XTI,1093809456)==0 then
call UnitRemoveAbility(XTI,1093809242)
call UnitRemoveAbility(XTI,1093809240)
call UnitRemoveAbility(XTI,1093809457)
call UnitRemoveAbility(XTI,1093809241)
call UnitRemoveAbility(XTI,1110459720)
call UnitAddAbility(XTI,1093809456)
endif
elseif NH2==3 then
if GetUnitAbilityLevel(XTI,1093809240)==0 then
call UnitRemoveAbility(XTI,1093809242)
call UnitRemoveAbility(XTI,1093809456)
call UnitRemoveAbility(XTI,1093809457)
call UnitRemoveAbility(XTI,1093809241)
call UnitRemoveAbility(XTI,1110459720)
call UnitAddAbility(XTI,1093809240)
endif
elseif NH2==4 then
if GetUnitAbilityLevel(XTI,1093809457)==0 then
call UnitRemoveAbility(XTI,1093809242)
call UnitRemoveAbility(XTI,1093809456)
call UnitRemoveAbility(XTI,1093809240)
call UnitRemoveAbility(XTI,1093809241)
call UnitRemoveAbility(XTI,1110459720)
call UnitAddAbility(XTI,1093809457)
endif
elseif NH2==5 then
if GetUnitAbilityLevel(XTI,1093809241)==0 then
call UnitRemoveAbility(XTI,1093809242)
call UnitRemoveAbility(XTI,1093809456)
call UnitRemoveAbility(XTI,1093809240)
call UnitRemoveAbility(XTI,1093809457)
call UnitRemoveAbility(XTI,1110459720)
call UnitAddAbility(XTI,1093809241)
endif
endif
call XNI(XSI,XTI,1,0.01*4*0.25*GetUnitState(XTI,UNIT_STATE_MAX_LIFE))
if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
call CreateCorpse(GetOwningPlayer(XSI),1969711215,GetUnitX(XTI),GetUnitY(XTI),0)
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function UE3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093809233)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("effects\\EntanglingBonesTarget.mdx",XTI,"chest")))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerAddCondition(t,Condition(function UB3))
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809242,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809456,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809240,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809457,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809241,false)
set XSI=null
set XTI=null
set t=null
endfunction
function UF3 takes nothing returns boolean
if GetSpellAbilityId()==1093809233 and ZXI(GetSpellTargetUnit())==false then
call UE3()
endif
return false
endfunction
function GC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UF3))
set t=null
endfunction
function UG3 takes unit XSI,integer UH3 returns nothing
call SaveInteger(ZY,(GetHandleId(XSI)),(687),(UH3))
call UnitRemoveAbility(XSI,1093809496)
call UnitRemoveAbility(XSI,1093809497)
call UnitRemoveAbility(XSI,1093809498)
call UnitRemoveAbility(XSI,1093809492)
call UnitRemoveAbility(XSI,1093809494)
call UnitRemoveAbility(XSI,1093809493)
call UnitRemoveAbility(XSI,1093809491)
call UnitRemoveAbility(XSI,1093809490)
call UnitRemoveAbility(XSI,1093809495)
call UnitRemoveAbility(XSI,1093809712)
call UnitRemoveAbility(XSI,1093809741)
call UnitRemoveAbility(XSI,1093809740)
call UnitRemoveAbility(XSI,1093809735)
call UnitRemoveAbility(XSI,1093809736)
call UnitRemoveAbility(XSI,1093809734)
call UnitRemoveAbility(XSI,1093809733)
call UnitRemoveAbility(XSI,1093809462)
call UnitRemoveAbility(XSI,1093809737)
call UnitRemoveAbility(XSI,1093809738)
call UnitRemoveAbility(XSI,1093809739)
call UnitRemoveAbility(XSI,1093809732)
if UH3==0 then
call UnitAddAbility(XSI,1093809741)
endif
if UH3==1 then
call KKI(XSI,1093809496)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809496,false)
call UnitAddAbility(XSI,1093809740)
elseif UH3==2 then
call KKI(XSI,1093809497)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809497,false)
call UnitAddAbility(XSI,1093809735)
elseif UH3==3 then
call KKI(XSI,1093809498)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809498,false)
call UnitAddAbility(XSI,1093809736)
elseif UH3==4 then
call KKI(XSI,1093809492)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809492,false)
call UnitAddAbility(XSI,1093809734)
elseif UH3==5 then
call KKI(XSI,1093809494)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809494,false)
call UnitAddAbility(XSI,1093809733)
elseif UH3==6 then
call KKI(XSI,1093809493)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809493,false)
call UnitAddAbility(XSI,1093809462)
elseif UH3==7 then
call KKI(XSI,1093809491)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809491,false)
call UnitAddAbility(XSI,1093809737)
elseif UH3==8 then
call KKI(XSI,1093809490)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809490,false)
call UnitAddAbility(XSI,1093809738)
elseif UH3==9 then
call KKI(XSI,1093809495)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809495,false)
call UnitAddAbility(XSI,1093809739)
elseif UH3==10 then
call KKI(XSI,1093809712)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809712,false)
call UnitAddAbility(XSI,1093809732)
endif
endfunction
function UZ3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer UH3=(LoadInteger(ZY,(GetHandleId(XSI)),(687)))
local group g
local unit U53
local integer WTI=GetUnitAbilityLevel(XSI,1093809713)
local integer UV3=2+2*WTI
if UH3<UV3 and KMI(XSI)==false then
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),925,Condition(function STI))
set U53=FirstOfGroup(g)
call ZYI(g)
if U53!=null then
set UH3=UH3+1
call UG3(XSI,UH3)
call LII((U53),(XSI),1747993654,"CorpseCollector_FX_Nothing",400)
call RemoveUnit(U53)
endif
endif
set t=null
set XSI=null
set U53=null
return false
endfunction
function UW3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,4,true)
call TriggerAddCondition(t,Condition(function UZ3))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function UX3 takes nothing returns nothing
call XNI(DAI,GetEnumUnit(),1,DBI)
endfunction
function UY3 takes unit XSI,integer WTI,real J6I,real J7I,integer UH3,boolean Y0O returns nothing
local group g=ZJI()
set DAI=XSI
set DBI=30*UH3
if Y0O then
set DBI=DBI+10*UH3
endif
set OK=XSI
call GroupEnumUnitsInRange(g,J6I,J7I,350,Condition(function SOI))
call ForGroup(g,function UX3)
call ZYI(g)
endfunction
function UJ3 takes unit XSI,real DG2,real DH2 returns boolean
local real J6I=(LoadReal(ZY,(GetHandleId(XSI)),(690)))
local real J7I=(LoadReal(ZY,(GetHandleId(XSI)),(691)))
if J6I==0 and J7I==0 then
return false
endif
if JAI(DG2,DH2,J6I,J7I)<425 then
return true
endif
return false
endfunction
function UK3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer UH3=(LoadInteger(ZY,(V0I),(34)))
local integer WTI=GetUnitAbilityLevel(XSI,1093809713)
local integer i=1
local unit T0I
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real x
local real y
local real a=(LoadReal(ZY,(V0I),(137)))
local boolean Y0O=(LoadBoolean(ZY,(V0I),(688)))
local boolean UL3=(LoadBoolean(ZY,(V0I),(689)))
local real UM3=(LoadReal(ZY,(V0I),(549)))
local real UN3=(LoadReal(ZY,(V0I),(567)))
set UM3=YEI(UM3+10*Cos(a))
set UN3=YHI(UN3+10*Sin(a))
call SaveReal(ZY,(V0I),(549),((UM3)*1.0))
call SaveReal(ZY,(V0I),(567),((UN3)*1.0))
if Y0O==false then
set Y0O=UJ3(XSI,UM3,UN3)
if Y0O==true then
call SaveBoolean(ZY,(V0I),(688),(Y0O))
endif
endif
if Y0O and UL3==false then
set UL3=true
call SaveBoolean(ZY,(V0I),(689),(UL3))
loop
exitwhen i>UH3
set T0I=(LoadUnitHandle(ZY,(V0I),(393+i)))
call SaveEffectHandle(ZY,(V0I),(609+i),(AddSpecialEffectTarget("war3mapImported\\CorpseFire.mdx",T0I,"origin")))
set i=i+1
endloop
endif
set i=1
if JAI(UM3,UN3,J6I,J7I)<15 then
loop
exitwhen i>UH3
if Y0O then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(609+i))))
endif
call KillUnit((LoadUnitHandle(ZY,(V0I),(393+i))))
set i=i+1
endloop
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UY3(XSI,WTI,J6I,J7I,UH3,Y0O)
else
loop
exitwhen i>UH3
set T0I=(LoadUnitHandle(ZY,(V0I),(393+i)))
set x=(LoadReal(ZY,(V0I),(549+i)))
set y=(LoadReal(ZY,(V0I),(567+i)))
set x=YEI(x+10*Cos(a))
set y=YHI(y+10*Sin(a))
call SaveReal(ZY,(V0I),(549+i),((x)*1.0))
call SaveReal(ZY,(V0I),(567+i),((y)*1.0))
call SetUnitX(T0I,x)
call SetUnitY(T0I,y)
set i=i+1
endloop
endif
set t=null
set T0I=null
set XSI=null
return false
endfunction
function US3 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real J6I=GetSpellTargetX()
local real J7I=GetSpellTargetY()
local integer WTI=GetUnitAbilityLevel(XSI,1093809713)
local integer UH3=(LoadInteger(ZY,(GetHandleId(XSI)),(687)))
local integer i=1
local unit T0I
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local real a=JPI(GetUnitX(XSI),GetUnitY(XSI),J6I,J7I)*bj_DEGTORAD
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(34),(UH3))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveReal(ZY,(V0I),(549),((x)*1.0))
call SaveReal(ZY,(V0I),(567),((y)*1.0))
call SaveBoolean(ZY,(V0I),(688),(false))
call SaveBoolean(ZY,(V0I),(689),(false))
loop
exitwhen i>UH3
set T0I=CreateUnit(GetOwningPlayer(XSI),1747993655,x+GetRandomInt(-200,200),y+GetRandomInt(-200,200),0)
call SaveUnitHandle(ZY,(V0I),(393+i),(T0I))
call SaveReal(ZY,(V0I),(549+i),((GetUnitX(T0I))*1.0))
call SaveReal(ZY,(V0I),(567+i),((GetUnitY(T0I))*1.0))
set i=i+1
endloop
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function UK3))
call UG3(XSI,0)
set XSI=null
set t=null
set T0I=null
endfunction
function UT3 takes nothing returns boolean
if GetSpellAbilityId()==1093809713 then
call US3()
endif
return false
endfunction
function UR3 takes nothing returns boolean
if GetLearnedSkill()==1093809713 and GetUnitAbilityLevel(GetTriggerUnit(),1093809713)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call UW3()
endif
return false
endfunction
function GD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UT3))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function UR3))
set t=null
endfunction
function UP3 takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1093678667)>0
endfunction
function UQ3 takes nothing returns nothing
if(GetIssuedOrderId()==String2OrderIdBJ("immolation"))then
call KKI(GetTriggerUnit(),1093681498)
endif
if(GetIssuedOrderId()==String2OrderIdBJ("unimmolation"))then
call UnitRemoveAbility(GetTriggerUnit(),1093681498)
endif
endfunction
function DU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K9I(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function UP3))
call TriggerAddAction(t,function UQ3)
endfunction
function UU3 takes nothing returns nothing
local integer V0I=GetHandleId(GetEnumUnit())
if GetTriggerUnit()!=GetEnumUnit()then
call SaveInteger(ZY,(V0I),(672),((LoadInteger(ZY,(V0I),(672)))+1))
endif
endfunction
function I04 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1429221446 and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function II4 takes nothing returns boolean
local group g
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetTriggerUnit())!=1211117642 and IsUnitIllusion(GetTriggerUnit())==false then
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),475,Condition(function I04))
if GetUnitTypeId(GetKillingUnit())==1429221446 then
call GroupAddUnit(g,GetKillingUnit())
endif
call ForGroup(g,function UU3)
call ZYI(g)
set g=null
endif
return false
endfunction
function I14 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEvalCount(t)==1 then
call ShowUnit(XSI,false)
elseif GetTriggerEvalCount(t)>80 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function IO4 takes nothing returns boolean
local unit T0I
local unit XSI
local unit WQ1
local trigger t
local integer V0I
if GetUnitTypeId(GetTriggerUnit())==1429221446 then
set XSI=GetTriggerUnit()
set WQ1=GetKillingUnit()
if XSI==WQ1 then
set T0I=CreateUnit(GetOwningPlayer(XSI),1747993154,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
call SetUnitTimeScale(T0I,0.75)
call UnitApplyTimedLife(T0I,1112820806,1.0)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodAbomination.mdl",T0I,"origin"))
set T0I=null
call SetSoundPosition(TE,GetUnitX(XSI),GetUnitY(XSI),50)
call SetSoundVolumeBJ(TE,100)
call PlaySoundBJ(TE)
call SetSoundPosition(PE,GetUnitX(XSI),GetUnitY(XSI),50)
call SetSoundVolumeBJ(PE,100)
call PlaySoundBJ(PE)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function I14))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
endif
set XSI=null
set WQ1=null
endif
return false
endfunction
function I24 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit XSI=(LoadUnitHandle(ZY,(GetHandleId(t)),(2)))
local integer V0I=GetHandleId(XSI)
local integer I34=(LoadInteger(ZY,(V0I),(672)))
local integer I44=(LoadInteger(ZY,(V0I),(673)))
local integer WTI=GetUnitAbilityLevel(XSI,1093678660)
local integer I54=R2I(I2R(I34)*(0.6+0.3*WTI))
if I54>I44 then
call ModifyHeroStat(0,XSI,0,I54-I44)
call SaveInteger(ZY,(V0I),(673),(I54))
endif
set t=null
set XSI=null
return false
endfunction
function I64 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function I24))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
set t=null
endfunction
function I74 takes nothing returns boolean
if GetLearnedSkill()==1093678660 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678660)==1 then
call I64()
endif
return false
endfunction
function I84 takes nothing returns boolean
if GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])==1429221446 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848654162)+" "+I2S((LoadInteger(ZY,(GetHandleId(L1[GetPlayerId(GetTriggerPlayer())])),(673))))+" "+GetObjectName(1848654163))
endif
return false
endfunction
function E01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function I74))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-st",true)
call TriggerAddCondition(t,Condition(function I84))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function IO4))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function II4))
set t=null
endfunction
function I94 takes unit XSI,unit XTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local unit XW3=CreateUnit(GetOwningPlayer(XSI),1697657409,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093685338)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
call UnitApplyTimedLife(T0I,1112820806,1)
call UnitApplyTimedLife(XW3,1112820806,1)
set T0I=null
set XW3=null
endfunction
function IA4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer IB4=(LoadInteger(ZY,(V0I),(376)))
local boolean IC4=(LoadBoolean(ZY,(V0I),(377)))
local unit XTI
local unit ID4=(LoadUnitHandle(ZY,(V0I),(2100+IB4)))
if IC4 then
set XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call SetUnitX(XTI,GetUnitX(ID4))
call SetUnitY(XTI,GetUnitY(ID4))
endif
call RemoveUnit(ID4)
set IB4=IB4-1
call SaveInteger(ZY,(V0I),(376),(IB4))
if IB4==0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
return false
endfunction
function IE4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer IB4=(LoadInteger(ZY,(V0I),(376)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local trigger HK2=(LoadTriggerHandle(ZY,(V0I),(11)))
local integer HX2=GetHandleId(HK2)
local group g
local unit u
local real x
local real y
local real z
if IB4<10+5*WTI then
set IB4=IB4+1
call SaveInteger(ZY,(V0I),(376),(IB4))
set x=GetUnitX(V8I)+IB4*40*Cos(B92*bj_DEGTORAD)
set y=GetUnitY(V8I)+IB4*40*Sin(B92*bj_DEGTORAD)
call SaveUnitHandle(ZY,(HX2),(2100+IB4),(CreateUnit(GetOwningPlayer(V8I),1966092360,x,y,B92)))
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function SKI))
call GroupRemoveUnit(g,V8I)
set u=GroupPickRandomUnit(g)
call ZYI(g)
if u!=null then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call TriggerRegisterTimerEvent(HK2,0.03,true)
call TriggerAddCondition(HK2,Condition(function IA4))
call SaveInteger(ZY,(HX2),(376),(IB4))
call SaveBoolean(ZY,(HX2),(377),(true))
call SaveUnitHandle(ZY,(HX2),(17),(u))
if IsUnitEnemy(u,GetOwningPlayer(V8I))then
if IsUnitType(u,UNIT_TYPE_HERO)==true then
call P7I("HA_Hits"+I2S(GetPlayerId(GetOwningPlayer(V8I))),DCI[GetPlayerId(GetOwningPlayer(V8I))])
set DCI[GetPlayerId(GetOwningPlayer(V8I))]=DCI[GetPlayerId(GetOwningPlayer(V8I))]+1
call V5I(V8I,4400,1.5)
endif
set DDI[GetPlayerId(GetOwningPlayer(V8I))]=DDI[GetPlayerId(GetOwningPlayer(V8I))]+1
call P7I("HA_Total"+I2S(GetPlayerId(GetOwningPlayer(V8I))),DDI[GetPlayerId(GetOwningPlayer(V8I))])
call I94(V8I,u)
call XNI(V8I,u,3,90*WTI)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",u,"origin"))
endif
endif
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set DDI[GetPlayerId(GetOwningPlayer(V8I))]=DDI[GetPlayerId(GetOwningPlayer(V8I))]+1
call TriggerRegisterTimerEvent(HK2,0.03,true)
call TriggerAddCondition(HK2,Condition(function IA4))
call SaveInteger(ZY,(HX2),(376),(IB4))
call SaveBoolean(ZY,(HX2),(377),(false))
endif
set t=null
set V8I=null
set HK2=null
set g=null
set u=null
return false
endfunction
function IF4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real B92=JPI(GetUnitX(V8I),GetUnitY(V8I),GetLocationX(l),GetLocationY(l))
local integer WTI=GetUnitAbilityLevel(V8I,1093678665)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveInteger(ZY,(V0I),(376),(0))
call SaveTriggerHandle(ZY,(V0I),(11),(CreateTrigger()))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function IE4))
call RemoveLocation(l)
set V8I=null
set l=null
set t=null
endfunction
function IG4 takes nothing returns boolean
if GetSpellAbilityId()==1093678665 then
call IF4()
endif
return false
endfunction
function IH4 takes nothing returns boolean
local integer MN2=DCI[GetPlayerId(GetTriggerPlayer())]
local integer J1I=DDI[GetPlayerId(GetTriggerPlayer())]
if GetUnitTypeId(L1[GetPlayerId(GetTriggerPlayer())])==1429221446 and J1I>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,I3,10.00,GetObjectName(1848657228)+" "+R2S(I2R(MN2)/I2R(J1I)*100)+"% ("+I2S(MN2)+"/"+I2S(J1I)+")")
endif
return false
endfunction
function EI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IG4))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-st",true)
call TriggerAddCondition(t,Condition(function IH4))
set t=null
endfunction
function IZ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real XPI=(25+50*WTI)+(0.75)*GetHeroStr(XSI,true)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093747544)then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
elseif GetTriggerEvalCount(t)>4 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call Y8I(XSI)
else
if WTI>0 then
set ZLI=ZLI+1
if(ZLI<4 and IsUnitType(XTI,UNIT_TYPE_HERO)==true)or(ZLI<8 and IsUnitType(XTI,UNIT_TYPE_HERO)==false)then
call SetUnitState(XSI,UNIT_STATE_LIFE,GetUnitState(XSI,UNIT_STATE_LIFE)+XPI)
call XNI(XSI,XTI,1,XPI)
endif
call SaveInteger(ZY,(V0I),(34),(ZLI))
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function IV4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093747544)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function IZ4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(34),(0))
call TriggerEvaluate(t)
set t=null
set XSI=null
set XTI=null
endfunction
function IW4 takes nothing returns boolean
if GetSpellAbilityId()==1093747544 and ZXI(GetSpellTargetUnit())==false then
call IV4()
endif
return false
endfunction
function E11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IW4))
set t=null
endfunction
function IX4 takes nothing returns boolean
if(GetUnitTypeId(GetSummonedUnit())==1865429068)then
return true
endif
if(GetUnitTypeId(GetSummonedUnit())==1865429069)then
return true
endif
if(GetUnitTypeId(GetSummonedUnit())==1865429070)then
return true
endif
if(GetUnitTypeId(GetSummonedUnit())==1865429071)then
return true
endif
return false
endfunction
function IY4 takes nothing returns nothing
call SetUnitAbilityLevelSwapped(1093679188,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093679428,GetSummoningUnit()))
call SetUnitAbilityLevelSwapped(1093681990,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093679428,GetSummoningUnit()))
call IssueImmediateOrder(GetSummonedUnit(),"manaflareon")
endfunction
function NW takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function IX4))
call TriggerAddAction(t,function IY4)
endfunction
function IJ4 takes unit XSI,unit XTI returns nothing
local real IK4=20+20*DFI
local real RVI=35+35*DFI
local real T2I=IK4+(RVI-IK4)*DHI/700
call XNI(XSI,XTI,1,T2I)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",XTI,"chest"))
endfunction
function IL4 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local group QY1=DEI
local unit XSI=DGI
if IsUnitInGroup(XTI,QY1)==false then
call GroupAddUnit(QY1,XTI)
call IJ4(XSI,XTI)
endif
set XTI=null
set QY1=null
set XSI=null
endfunction
function IM4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local effect fx
local integer ZLI=GetTriggerEvalCount(t)
local real x
local real x0=GetUnitX(XSI)
local real y
local real y0=GetUnitY(XSI)
local integer i
local integer d
local group g=ZJI()
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
set DEI=QY1
set DGI=XSI
set DFI=GetUnitAbilityLevel(XSI,1093748023)
if ZLI>20 then
set d=21*36+(20-ZLI)*36
set DHI=d
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/36*bj_DEGTORAD)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,100,Condition(function S7I))
call ForGroup(g,function IL4)
set i=i+1
endloop
else
set d=ZLI*36
set DHI=d
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/36*bj_DEGTORAD)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,100,Condition(function S7I))
call ForGroup(g,function IL4)
set i=i+1
endloop
endif
call ZYI(g)
if ZLI==40 then
call KillUnit(T0I)
call ZYI(QY1)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif ZLI==20 then
call GroupClear(QY1)
set fx=null
endif
set t=null
set T0I=null
set QY1=null
set XSI=null
set g=null
return false
endfunction
function IN4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1747990834,x,y,0)
local integer i=0
local integer MRO=36
local group QY1=ZJI()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",V8I,"origin")))
call SaveGroupHandle(ZY,(V0I),(133),(QY1))
call SaveUnitHandle(ZY,(V0I),(2),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call TriggerRegisterTimerEvent(t,0.06,true)
call TriggerAddCondition(t,Condition(function IM4))
set t=null
set T0I=null
set V8I=null
endfunction
function IS4 takes nothing returns boolean
if GetSpellAbilityId()==1093748023 then
call IN4()
endif
return false
endfunction
function FQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IS4))
set t=null
endfunction
function IT4 takes integer IR4 returns boolean
return IR4!=1093679446 and IR4!=1093677622 and IR4!=1093684314 and IR4!=1093685582 and IR4!=1093685065 and IR4!=1093682265 and IR4!=1093752642 and IR4!=1095263841
endfunction
function IP4 takes unit WRI,unit XSI,unit XTI,integer WTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(WRI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call KKI(T0I,1093747019)
call SetUnitAbilityLevel(T0I,1093747019,WTI)
call IssueTargetOrder(T0I,"chainlightning",XTI)
call KKI(T0I,1093744708)
call SetUnitAbilityLevel(T0I,1093744708,WTI)
call IssueTargetOrder(T0I,"purge",XTI)
set T0I=null
endfunction
function IQ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI
if GetSpellTargetUnit()==XSI and IT4(GetSpellAbilityId())==true and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(XSI))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
set WTI=GetUnitAbilityLevel(XSI,1093748022)
call IP4(XSI,XSI,GetTriggerUnit(),WTI)
endif
set t=null
set XSI=null
return false
endfunction
function IU4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IQ4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
set t=null
endfunction
function O04 takes nothing returns boolean
if GetLearnedSkill()==1093748022 and GetUnitAbilityLevel(GetTriggerUnit(),1093748022)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call IU4()
endif
return false
endfunction
function FU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function O04))
set t=null
endfunction
function OI4 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer RVI
if d<1 then
call UnitRemoveAbility(u,DZI[0])
call UnitRemoveAbility(u,DZI[1])
call UnitRemoveAbility(u,DZI[2])
call UnitRemoveAbility(u,DZI[3])
call UnitRemoveAbility(u,DZI[4])
call UnitRemoveAbility(u,DZI[5])
call UnitRemoveAbility(u,DZI[6])
call UnitRemoveAbility(u,DZI[7])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set RVI=i
set i=0
loop
exitwhen i>RVI
if b[i]==1 then
call KKI(u,DZI[i])
else
call UnitRemoveAbility(u,DZI[i])
endif
set i=i+1
endloop
endfunction
function O14 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer RVI
if d<1 then
call UnitRemoveAbility(u,DVI[0])
call UnitRemoveAbility(u,DVI[1])
call UnitRemoveAbility(u,DVI[2])
call UnitRemoveAbility(u,DVI[3])
call UnitRemoveAbility(u,DVI[4])
call UnitRemoveAbility(u,DVI[5])
call UnitRemoveAbility(u,DVI[6])
call UnitRemoveAbility(u,DVI[7])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set RVI=i
set i=0
loop
exitwhen i>RVI
if b[i]==1 then
call KKI(u,DVI[i])
else
call UnitRemoveAbility(u,DVI[i])
endif
set i=i+1
endloop
endfunction
function OO4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if GetTriggerUnit()==XSI then
call OI4(XSI,0)
call SaveUnitHandle(ZY,(V0I),(2),(null))
else
call O14(XTI,0)
call SaveUnitHandle(ZY,(V0I),(17),(null))
endif
else
if XSI!=null then
call OI4(XSI,0)
endif
if XTI!=null then
call O14(XTI,0)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function O24 takes unit XSI,unit XTI,unit BM2 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
if BM2==null then
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
elseif BM2==XTI then
call O14(XTI,0)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(null))
else
call OI4(XSI,0)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call SaveUnitHandle(ZY,(V0I),(2),(null))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
endif
call TriggerRegisterTimerEvent(t,13,false)
call TriggerAddCondition(t,Condition(function OO4))
endfunction
function O34 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local lightning KII=(LoadLightningHandle(ZY,(V0I),(196)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ZLI=GetTriggerEvalCount(t)
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
call MoveLightning(KII,true,GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))
call SetUnitX(T0I,GetUnitX(XTI))
call SetUnitY(T0I,GetUnitY(XTI))
if JAI(GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))>700 or GetTriggerEventId()==EVENT_UNIT_DEATH or IsUnitVisible(XTI,GetOwningPlayer(XSI))==false then
call DestroyLightning(KII)
call KillUnit(T0I)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call O24(XSI,XTI,GetTriggerUnit())
else
call O24(XSI,XTI,null)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif ZLI>160 then
call DestroyLightning(KII)
call KillUnit(T0I)
call O24(XSI,XTI,null)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif ModuloInteger(ZLI,20)==0 or ZLI==1 then
call OI4(XSI,(WTI*7)*R2I(ZLI/20))
call O14(XTI,(WTI*7)*R2I(ZLI/20))
endif
set t=null
set XSI=null
set XTI=null
set KII=null
set T0I=null
return false
endfunction
function O44 takes unit XSI,unit XTI,lightning KII,unit T0I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093747792)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function O34))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveLightningHandle(ZY,(V0I),(196),(KII))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
set t=null
endfunction
function O54 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local lightning KII=(LoadLightningHandle(ZY,(V0I),(196)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local real x0=GetUnitX(XSI)
local real y0=GetUnitY(XSI)
local real x1=(LoadReal(ZY,(V0I),(64)))
local real y1=(LoadReal(ZY,(V0I),(65)))
local real a=(LoadReal(ZY,(V0I),(137)))
local unit XTI=null
local group g=ZJI()
set x1=YEI(x1+25*Cos(a))
set y1=YHI(y1+25*Sin(a))
call SaveReal(ZY,(V0I),(64),((x1)*1.0))
call SaveReal(ZY,(V0I),(65),((y1)*1.0))
call MoveLightning(KII,true,x0,y0,x1,y1)
call SetUnitX(T0I,x1)
call SetUnitY(T0I,y1)
set OK=XSI
call GroupEnumUnitsInRange(g,x1,y1,225,Condition(function SYI))
set XTI=FirstOfGroup(g)
call ZYI(g)
if XTI!=null then
call O44(XSI,XTI,KII,T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEvalCount(t)>25 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyLightning(KII)
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set KII=null
set XTI=null
set g=null
set T0I=null
return false
endfunction
function O64 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t
local integer V0I
local location l
local lightning KII=AddLightning("CLSB",true,GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XSI),GetUnitY(XSI))
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1747990584,GetUnitX(XSI),GetUnitY(XSI),0)
call SetLightningColor(KII,0.3,0.5,1,1)
if XTI==null then
set l=GetSpellTargetLoc()
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function O54))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveLightningHandle(ZY,(V0I),(196),(KII))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveReal(ZY,(V0I),(137),((Atan2(GetLocationY(l)-GetUnitY(XSI),GetLocationX(l)-GetUnitX(XSI)))*1.0))
call SaveReal(ZY,(V0I),(64),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(65),((GetUnitY(XSI))*1.0))
call RemoveLocation(l)
set l=null
set t=null
else
call O44(XSI,XTI,KII,T0I)
endif
set XTI=null
endfunction
function O74 takes nothing returns boolean
if GetSpellAbilityId()==1093747792 then
call O64()
endif
return false
endfunction
function G01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function O74))
set t=null
set DZI[0]=1093747798
set DZI[1]=1093747793
set DZI[2]=1093747794
set DZI[3]=1093747795
set DZI[4]=1093747796
set DZI[5]=1093747797
set DZI[6]=1093747799
set DZI[7]=1093747800
set DVI[0]=1093748020
set DVI[1]=1093748019
set DVI[2]=1093748018
set DVI[3]=1093748017
set DVI[4]=1093748016
set DVI[5]=1093748021
set DVI[6]=1093747802
set DVI[7]=1093747801
endfunction
function O84 takes integer V0I returns nothing
local integer i=1
local integer BO2=(LoadInteger(ZY,(V0I),(136)))
local unit XTI
local integer XUI
if BO2==0 then
return
endif
loop
exitwhen i>BO2
set XUI=(LoadInteger(ZY,(V0I),(2200+i)))
set XTI=ZGI(XUI)
call ZFI(XUI)
call UnitRemoveAbility(XTI,DN[0])
call UnitRemoveAbility(XTI,DN[1])
call UnitRemoveAbility(XTI,DN[2])
call UnitRemoveAbility(XTI,DN[3])
call UnitRemoveAbility(XTI,DN[4])
call UnitRemoveAbility(XTI,DN[5])
set i=i+1
endloop
set XTI=null
endfunction
function O94 takes unit XTI,integer V0I returns nothing
local integer XUI=ZZI(XTI)
local integer BO2=(LoadInteger(ZY,(V0I),(136)))
set BO2=BO2+1
call SaveInteger(ZY,(V0I),(136),(BO2))
call SaveInteger(ZY,(V0I),(2200+BO2),(XUI))
endfunction
function OA4 takes unit u returns integer
return GetUnitAbilityLevel(u,DN[0])*1+GetUnitAbilityLevel(u,DN[1])*2+GetUnitAbilityLevel(u,DN[2])*4+GetUnitAbilityLevel(u,DN[3])*8+GetUnitAbilityLevel(u,DN[4])*16
endfunction
function OB4 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer RVI
if d<1 then
call UnitRemoveAbility(u,DN[0])
call UnitRemoveAbility(u,DN[1])
call UnitRemoveAbility(u,DN[2])
call UnitRemoveAbility(u,DN[3])
call UnitRemoveAbility(u,DN[4])
call UnitRemoveAbility(u,DN[5])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set RVI=i
set i=0
loop
exitwhen i>RVI
if b[i]==1 then
call KKI(u,DN[i])
else
call UnitRemoveAbility(u,DN[i])
endif
set i=i+1
endloop
endfunction
function OC4 takes unit u,integer d returns nothing
if IsUnitType(u,UNIT_TYPE_STRUCTURE)==false then
call OB4(u,d+OA4(u))
call O94(u,DKI)
endif
endfunction
function OD4 takes unit XSI,unit T0I,unit XTI,integer WTI returns nothing
call IssueTargetOrder(T0I,"chainlightning",XTI)
call Y0I(XSI,XTI,2,(50+25*WTI)/2,0.3)
call OC4(XTI,1)
endfunction
function OE4 takes nothing returns boolean
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!=1848651852 then
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<DJI then
set DJI=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
set DYI=GetFilterUnit()
endif
endif
return false
endfunction
function OF4 takes nothing returns boolean
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!=1701670775 and GetUnitTypeId(GetFilterUnit())!=1970956647 and GetUnitTypeId(GetFilterUnit())!=1848651852 then
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<DJI then
set DJI=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
set DYI=GetFilterUnit()
endif
endif
return false
endfunction
function OG4 takes unit XSI,unit T0I,integer WTI returns nothing
local group g=ZJI()
set DYI=null
set DJI=999999
set DWI=30+30*WTI
set DXI=XSI
set OK=XSI
if GetUnitAbilityLevel(XSI,1093752150)>0 then
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),525,Condition(function OF4))
else
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),525,Condition(function OE4))
endif
call ZYI(g)
if DYI!=null then
call OD4(XSI,T0I,DYI,WTI)
endif
set g=null
endfunction
function OH4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ZLI=GetTriggerEvalCount(t)
local integer NH2
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call O84(V0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerUnit()==XSI then
call KillUnit(T0I)
endif
else
if GetUnitAbilityLevel(XSI,1093752150)>0 then
if WTI==1 then
set NH2=14
elseif WTI==2 then
set NH2=12
else
set NH2=10
endif
else
if WTI==1 then
set NH2=17
elseif WTI==2 then
set NH2=15
else
set NH2=12
endif
endif
if ModuloInteger(ZLI,NH2)==0 or ZLI==1 then
set DKI=V0I
call OG4(XSI,T0I,WTI)
endif
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
endif
set t=null
set XSI=null
return false
endfunction
function OZ4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093747023)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1747990577,GetUnitX(XSI),GetUnitY(XSI),0)
if WTI==0 then
set WTI=GetUnitAbilityLevel(XSI,1093752150)
endif
call UnitApplyTimedLife(T0I,1112820806,15+5*WTI)
call SetUnitAbilityLevel(T0I,1093747786,WTI)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,T0I,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function OH4))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
set XSI=null
set t=null
endfunction
function OV4 takes nothing returns boolean
if GetSpellAbilityId()==1093747023 or GetSpellAbilityId()==1093752150 then
call OZ4()
endif
return false
endfunction
function GI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OV4))
set t=null
set DN[0]=1093747787
set DN[1]=1093747788
set DN[2]=1093747790
set DN[3]=1093747789
set DN[4]=1093747791
endfunction
function OW4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
call SetUnitPosition(V8I,x,y)
call SetUnitAnimation(V8I,"morph ALTERNATE")
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function OX4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093678671)
local location l
local real B92
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local real J6I
local real J7I
local real OY4
local real OJ4
local real CasterX
local real CasterY
local integer CasterAbility
local unit T0I
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real XPI
local real SQI=1.65
local unit TEI=null
if WTI==1 then
set XPI=100
elseif WTI==2 then
set XPI=160
elseif WTI==3 then
set XPI=220
elseif WTI==4 then
set XPI=280
endif
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set J6I=GetLocationX(l)
set J7I=GetLocationY(l)
call RemoveLocation(l)
set B92=JPI(x,y,J6I,J7I)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveReal(ZY,(V0I),(6),((J6I)*1.0))
call SaveReal(ZY,(V0I),(7),((J7I)*1.0))
call TriggerRegisterTimerEvent(t,JAI(x,y,J6I,J7I)/2000,false)
call TriggerAddCondition(t,Condition(function OW4))
if JAI(x,y,J6I,J7I)<150 then
set J6I=x+150*Cos(B92*bj_DEGTORAD)
set J7I=y+150*Sin(B92*bj_DEGTORAD)
endif
if GetSpellTargetUnit()!=null and ZXI(GetSpellTargetUnit())then
set TEI=GetSpellTargetUnit()
endif
call TDI(V8I,TEI,XPI,SQI,0.52,x,y,J6I,J7I,175,null,true,1600)
set T0I=null
set l=null
set V8I=null
set t=null
endfunction
function OK4 takes nothing returns boolean
if GetSpellAbilityId()==1093678671 then
call OX4()
endif
return false
endfunction
function EO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OK4))
call YVI(1093687350)
set t=null
endfunction
function OL4 takes nothing returns nothing
call XNI(DMI,GetEnumUnit(),1,110)
call IssueTargetOrder(DNI,"slow",GetEnumUnit())
endfunction
function OM4 takes unit XSI,real x,real y,integer WTI,integer ON4 returns nothing
local group g=ZJI()
local real r
local string fx
if ON4==8 then
set r=675
elseif ON4==9 then
set r=700
elseif ON4==10 then
set r=725
else
set r=250+50*ON4
endif
if ON4<4 then
set fx="war3mapImported\\EpiPulse_1_4.mdx"
elseif ON4<8 then
set fx="war3mapImported\\EpiPulse_5_8.mdx"
else
set fx="war3mapImported\\EpiPulse_9_12.mdx"
endif
call DestroyEffect(AddSpecialEffect(fx,x,y))
set OK=XSI
set DMI=XSI
set DNI=DLI[GetPlayerId(GetOwningPlayer(XSI))]
call GroupEnumUnitsInRange(g,x,y,r,Condition(function SOI))
call ForGroup(g,function OL4)
call ZYI(g)
call LMI(0.03,false,x,y,150+100*ON4,150+100*ON4,72,0.03,512)
set g=null
endfunction
function OS4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local boolean HZ2=(LoadBoolean(ZY,(V0I),(15)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer PIO=(LoadInteger(ZY,(V0I),(25)))
local integer OT4=4+WTI*2
local real x=DE2
local real y=DF2
if HZ2 then
set OT4=OT4+2
endif
if PIO>OT4 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if V8I!=null and KMI(V8I)==false then
set x=GetUnitX(V8I)
set y=GetUnitY(V8I)
endif
call OM4(V8I,x,y,WTI,PIO)
call SaveInteger(ZY,(V0I),(25),(PIO+1))
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
endif
set t=null
set p=null
set V8I=null
return false
endfunction
function OR4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local player p=GetOwningPlayer(V8I)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(V8I,1093678674)
local boolean HZ2=false
if WTI==0 then
set HZ2=true
set WTI=GetUnitAbilityLevel(V8I,1093747252)
endif
if VLI(p)then
set DLI[GetPlayerId(p)]=CreateUnit(DO[0],1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
else
set DLI[GetPlayerId(p)]=CreateUnit(CO[0],1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
endif
call KKI(DLI[GetPlayerId(p)],1093744450)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(V8I)))
call SaveReal(ZY,(V0I),(23),((GetUnitX(V8I))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(V8I))*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(25),(2))
call SaveBoolean(ZY,(V0I),(15),(HZ2))
call TriggerRegisterTimerEvent(t,0.35,true)
call TriggerAddCondition(t,Condition(function OS4))
call OM4(V8I,GetUnitX(V8I),GetUnitY(V8I),WTI,1)
set V8I=null
set t=null
endfunction
function OP4 takes nothing returns boolean
if GetSpellAbilityId()==1093678674 or GetSpellAbilityId()==1093747252 then
call OR4()
endif
return false
endfunction
function E21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(t,Condition(function OP4))
call YVI(1093744450)
set t=null
endfunction
function OQ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if((LoadInteger(ZY,(GetHandleId((V8I))),((4299))))==1)==false then
call UnitRemoveAbility(V8I,1110455378)
endif
call RemoveUnit((LoadUnitHandle(ZY,(V0I),(379))))
call RemoveUnit((LoadUnitHandle(ZY,(V0I),(380))))
call RemoveUnit((LoadUnitHandle(ZY,(V0I),(381))))
call RemoveUnit((LoadUnitHandle(ZY,(V0I),(382))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function OU4 takes unit V8I,integer WTI,unit A04,unit AI4,unit A14,unit AO4 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real SQI=WTI*0.3
if WTI==4 then
set SQI=1.5
endif
call SaveInteger(ZY,(GetHandleId((V8I))),((4299)),(2))
call TriggerRegisterTimerEvent(t,SQI,false)
call TriggerAddCondition(t,Condition(function OQ4))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(379),(A04))
call SaveUnitHandle(ZY,(V0I),(380),(AI4))
call SaveUnitHandle(ZY,(V0I),(381),(A14))
call SaveUnitHandle(ZY,(V0I),(382),(AO4))
set t=null
endfunction
function A24 takes nothing returns boolean
if(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))then
call XNI(OK,GetFilterUnit(),1,TJ)
endif
return false
endfunction
function A34 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit A04=(LoadUnitHandle(ZY,(V0I),(379)))
local unit AI4=(LoadUnitHandle(ZY,(V0I),(380)))
local unit A14=(LoadUnitHandle(ZY,(V0I),(381)))
local unit AO4=(LoadUnitHandle(ZY,(V0I),(382)))
local integer WTI=GetUnitAbilityLevel(V8I,1093683248)
local integer ZLI=GetTriggerEvalCount(t)
local group g
local integer A44=250+50*WTI
if WTI==4 then
set A44=550
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST or ZLI>WTI*20 then
call OU4(V8I,WTI,A04,AI4,A14,AO4)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set OK=V8I
set TJ=WTI*20
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),A44,Condition(function A24))
call ZYI(g)
endif
set t=null
set V8I=null
set A04=null
set AI4=null
set A14=null
set AO4=null
set g=null
return false
endfunction
function A54 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit A04=CreateUnit(GetOwningPlayer(V8I),1697656913,GetUnitX(V8I)+150,GetUnitY(V8I)+150,0)
local unit AI4=CreateUnit(GetOwningPlayer(V8I),1697656913,GetUnitX(V8I)+150,GetUnitY(V8I)-150,0)
local unit A14=CreateUnit(GetOwningPlayer(V8I),1697656913,GetUnitX(V8I)-150,GetUnitY(V8I)+150,0)
local unit AO4=CreateUnit(GetOwningPlayer(V8I),1697656913,GetUnitX(V8I)-150,GetUnitY(V8I)-150,0)
local integer WTI=GetUnitAbilityLevel(V8I,1093683248)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(V8I),GetUnitY(V8I),0)
call SaveInteger(ZY,(GetHandleId((V8I))),((4299)),(1))
call KKI(T0I,1093683279)
call SetUnitAbilityLevel(T0I,1093683279,WTI)
call IssueTargetOrder(T0I,"invisibility",V8I)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function A34))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(379),(A04))
call SaveUnitHandle(ZY,(V0I),(380),(AI4))
call SaveUnitHandle(ZY,(V0I),(381),(A14))
call SaveUnitHandle(ZY,(V0I),(382),(AO4))
call SetUnitTimeScale(A04,0)
call SetUnitTimeScale(AI4,0)
call SetUnitTimeScale(A14,0)
call SetUnitTimeScale(AO4,0)
set t=null
set V8I=null
set T0I=null
set A04=null
set AI4=null
set A14=null
set AO4=null
endfunction
function A64 takes nothing returns boolean
if GetSpellAbilityId()==1093683248 then
call A54()
endif
return false
endfunction
function E31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A64))
set t=null
endfunction
function A74 takes nothing returns nothing
call XNI(DSI,GetEnumUnit(),2,50*DTI)
endfunction
function A84 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,x,y,0)
local group g=ZJI()
local integer WTI=GetUnitAbilityLevel(XSI,1093810507)
call KKI(T0I,1093684537)
call SetUnitAbilityLevel(T0I,1093684537,WTI)
call IssueImmediateOrder(T0I,"thunderclap")
call KKI(T0I,1093677399)
call SetUnitAbilityLevel(T0I,1093677399,WTI)
call IssueImmediateOrder(T0I,"stomp")
set DSI=XSI
set DTI=WTI
call GroupEnumUnitsInRange(g,x,y,350+25,Condition(function S0I))
call ForGroup(g,function A74)
call ZYI(g)
set XSI=null
set T0I=null
set g=null
endfunction
function A94 takes nothing returns boolean
if GetSpellAbilityId()==1093810507 then
call A84()
endif
return false
endfunction
function E41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A94))
set t=null
endfunction
function SpectralDagger_CastCode takes nothing returns integer
return 1093683287
endfunction
function SpectralDagger_PositiveEffect takes nothing returns integer
return 1093683506
endfunction
function SpectralDagger_NegativeEffect takes nothing returns integer
return 1093683289
endfunction
function SpectralDagger_PositiveBuff takes nothing returns integer
return 1110455351
endfunction
function SpectralDagger_ShadowPathUnit takes nothing returns integer
return 1747988530
endfunction
function SpectralDagger_DaggerUnit takes nothing returns integer
return 1747988531
endfunction
function AA4 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit Y9I=(LoadUnitHandle(ZY,(V0I),(221)))
local unit AB4=(LoadUnitHandle(ZY,(V0I),(383)))
local unit T0I
local real SQI=(LoadReal(ZY,(V0I),(57)))
local integer WTI=GetUnitAbilityLevel(AB4,(1093683287))
local real AC4=(LoadReal(ZY,(V0I),(6)))
local real AD4=(LoadReal(ZY,(V0I),(7)))
local real KUI=GetUnitX(Y9I)
local real L0I=GetUnitY(Y9I)
if(KUI-AC4)*(KUI-AC4)+(L0I-AD4)*(L0I-AD4)>900 then
set T0I=CreateUnit(GetOwningPlayer(AB4),(1747988530),GetUnitX(Y9I),GetUnitY(Y9I),0)
call SetUnitAbilityLevel(T0I,(1093683506),WTI)
call SetUnitAbilityLevel(T0I,(1093683289),WTI)
call UnitApplyTimedLife(T0I,1112820806,7)
call SaveReal(ZY,(V0I),(6),((KUI)*1.0))
call SaveReal(ZY,(V0I),(7),((L0I)*1.0))
endif
set SQI=SQI+0.2
call SaveReal(ZY,(V0I),(57),((SQI)*1.0))
if SQI>7 or GetUnitState(Y9I,UNIT_STATE_LIFE)<1 then
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
endif
endfunction
function AE4 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local sound YOI
local timer t
local integer V0I
call UnitDamageTarget(YO,XTI,KO,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(C2,XTI)
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
set t=CreateTimer()
set V0I=GetHandleId(t)
set YOI=CreateSound("Sounds\\Spectral Dagger.mp3",false,true,true,10,10,"DefaultEAXON")
call SetSoundPosition(YOI,GetUnitX(XTI),GetUnitY(XTI),0)
call SetSoundDistanceCutoff(YOI,700)
call StartSound(YOI)
call KillSoundWhenDone(YOI)
call SaveUnitHandle(ZY,(V0I),(221),(XTI))
call SaveUnitHandle(ZY,(V0I),(383),(YO))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XTI))*1.0))
call TimerStart(t,0.2,true,function AA4)
endif
endfunction
function AF4 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(YO))and IsUnitInGroup(GetFilterUnit(),C2)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function AG4 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local group U4I=ZJI()
local boolexpr VE1=Condition(function AF4)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real J4I=GetUnitX(KRI)
local real J5I=GetUnitY(KRI)
local real B92=Atan2(J7I-J5I,J6I-J4I)
local real KUI=YEI(GetUnitX(KRI)+30*Cos(B92))
local real L0I=YHI(GetUnitY(KRI)+30*Sin(B92))
local unit T0I
local integer WTI=GetUnitAbilityLevel(V8I,(1093683287))
if(LoadBoolean(ZY,(V0I),(384)))then
call SaveBoolean(ZY,(V0I),(384),(false))
set T0I=CreateUnit(GetOwningPlayer(V8I),(1747988530),J4I,J5I,0)
call SetUnitAbilityLevel(T0I,(1093683506),WTI)
call SetUnitAbilityLevel(T0I,(1093683289),WTI)
call UnitApplyTimedLife(T0I,1112820806,12)
else
call SaveBoolean(ZY,(V0I),(384),(true))
endif
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
call SetUnitFacing(KRI,B92*bj_RADTODEG)
set C2=QY1
set YO=V8I
set KO=50*GetUnitAbilityLevel(V8I,(1093683287))
call GroupEnumUnitsInRange(U4I,KUI,L0I,150,VE1)
call ForGroup(U4I,function AE4)
call ZYI(U4I)
if(KUI-J6I)*(KUI-J6I)+(L0I-J7I)*(L0I-J7I)<1600 then
call PauseTimer(t)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call KillUnit(KRI)
call ZYI(QY1)
endif
endfunction
function AH4 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local group U4I=ZJI()
local boolexpr VE1=Condition(function AF4)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real J4I=GetUnitX(KRI)
local real J5I=GetUnitY(KRI)
local real B92=(LoadReal(ZY,(V0I),(13)))
local real KUI=YEI(GetUnitX(KRI)+30*Cos(B92))
local real L0I=YHI(GetUnitY(KRI)+30*Sin(B92))
local unit T0I
local integer WTI=GetUnitAbilityLevel(V8I,(1093683287))
if(LoadBoolean(ZY,(V0I),(384)))then
call SaveBoolean(ZY,(V0I),(384),(false))
set T0I=CreateUnit(GetOwningPlayer(V8I),(1747988530),J4I,J5I,0)
call SetUnitAbilityLevel(T0I,(1093683506),WTI)
call SetUnitAbilityLevel(T0I,(1093683289),WTI)
call UnitApplyTimedLife(T0I,1112820806,12)
else
call SaveBoolean(ZY,(V0I),(384),(true))
endif
call SetUnitX(KRI,KUI)
call SetUnitY(KRI,L0I)
set C2=QY1
set YO=V8I
set KO=50*GetUnitAbilityLevel(V8I,(1093683287))
call GroupEnumUnitsInRange(U4I,KUI,L0I,150,VE1)
call ForGroup(U4I,function AE4)
call ZYI(U4I)
if(KUI-J6I)*(KUI-J6I)+(L0I-J7I)*(L0I-J7I)<1600 then
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
call KillUnit(KRI)
call ZYI(QY1)
endif
endfunction
function AZ4 takes unit Y9I,integer HWI returns boolean
if(GetItemTypeId(UnitItemInSlot(Y9I,HWI))==1886613604)then
return true
endif
if(GetItemTypeId(UnitItemInSlot(Y9I,HWI))==1868983399)then
return true
endif
return false
endfunction
function AV4 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local real SQI=(LoadReal(ZY,(V0I),(57)))
local integer W5I=0
loop
exitwhen W5I>5
if AZ4(V8I,W5I)then
if GetUnitAbilityLevel(V8I,(1110455351))==0 then
call SetItemDropOnDeath(UnitItemInSlot(V8I,W5I),true)
if GetItemTypeId(UnitItemInSlot(V8I,W5I))==1868983399 then
call SetItemDroppable(UnitItemInSlot(V8I,W5I),true)
endif
else
call SetItemDropOnDeath(UnitItemInSlot(V8I,W5I),false)
if GetItemTypeId(UnitItemInSlot(V8I,W5I))==1868983399 then
call SetItemDroppable(UnitItemInSlot(V8I,W5I),false)
endif
endif
endif
set W5I=W5I+1
endloop
set SQI=SQI+0.2
call SaveReal(ZY,(V0I),(57),((SQI)*1.0))
if GetUnitAbilityLevel(V8I,(1110455351))==0 then
call SetUnitPathing(V8I,true)
else
call SetUnitPathing(V8I,false)
endif
if SQI>30 then
call PauseTimer(t)
call FlushChildHashtable(ZY,(V0I))
call SetUnitPathing(V8I,true)
set W5I=0
loop
exitwhen W5I>5
if AZ4(V8I,W5I)then
call SetItemDropOnDeath(UnitItemInSlot(V8I,W5I),true)
if GetItemTypeId(UnitItemInSlot(V8I,W5I))==1868983399 then
call SetItemDroppable(UnitItemInSlot(V8I,W5I),true)
endif
endif
set W5I=W5I+1
endloop
endif
endfunction
function AW4 takes nothing returns boolean
return GetSpellAbilityId()==(1093683287)
endfunction
function AX4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real J4I=YEI(GetUnitX(V8I))
local real J5I=YHI(GetUnitY(V8I))
local unit KRI=CreateUnit(GetOwningPlayer(V8I),(1747988531),J4I,J5I,0)
local timer t=CreateTimer()
local integer V0I=GetHandleId(t)
local group QY1=ZJI()
local location FV2
local real B92
local real J6I
local real J7I
call SetUnitPathing(KRI,false)
call SaveGroupHandle(ZY,(V0I),(133),(QY1))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
if XTI!=null then
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call TimerStart(t,0.035,true,function AG4)
else
set FV2=GetSpellTargetLoc()
set J6I=GetLocationX(FV2)
set J7I=GetLocationY(FV2)
set B92=Atan2(J7I-J5I,J6I-J4I)
call SetUnitFacing(KRI,B92*bj_RADTODEG)
set J6I=YEI(J4I+2100*Cos(B92))
set J7I=YHI(J5I+2100*Sin(B92))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call TimerStart(t,0.035,true,function AH4)
endif
set t=CreateTimer()
set V0I=GetHandleId(t)
call SetUnitPathing(V8I,false)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TimerStart(t,0.2,true,function AV4)
endfunction
function F11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AW4))
call TriggerAddAction(t,function AX4)
call CreateSound("Sounds\\Spectral Dagger.mp3",false,false,false,10,10,"DefaultEAXON")
call YVI((1093683506))
call YVI((1093683289))
endfunction
constant function Desolate_AbilityId takes nothing returns integer
return 1093682776
endfunction
function AY4 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitAbilityLevel(GetAttacker(),(1093682776))>0
endfunction
function AJ4 takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function AK4 takes nothing returns nothing
local unit SF1=GetAttacker()
local unit F12=GetTriggerUnit()
local group U4I=ZJI()
local boolexpr VE1=Condition(function AJ4)
local integer V0I
call GroupEnumUnitsInRange(U4I,GetUnitX(F12),GetUnitY(F12),350,VE1)
call GroupRemoveUnit(U4I,F12)
if FirstOfGroup(U4I)==null then
set V0I=GetHandleId(SF1)
if((LoadInteger(ZY,(GetHandleId((SF1))),((4275))))==1)==false then
call UnitDamageTarget(SF1,F12,10+10*GetUnitAbilityLevel(SF1,(1093682776)),true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl",F12,"overhead"))
call V5I(SF1,4275,0.3)
endif
endif
call ZYI(U4I)
endfunction
function FO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function AY4))
call TriggerAddAction(t,function AK4)
endfunction
function AL4 takes nothing returns nothing
local real d=J8I(GetTriggerUnit(),GetEnumUnit())-25
local real N8O=0
if d<300 then
set N8O=1
elseif d<1000 then
set N8O=(1000-d)/700
endif
if N8O>0 then
call XNI(GetTriggerUnit(),GetEnumUnit(),3,DRI*N8O)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function AM4 takes nothing returns boolean
local unit V8I=GetTriggerUnit()
local real XPI=GetEventDamage()
local integer WTI=GetUnitAbilityLevel(V8I,1093684801)
local group g
if XHI(XPI)then
set g=ZJI()
set DRI=XPI*(0.06+0.04*WTI)
call JII(V8I,DRI)
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),1025,Condition(function S0I))
call ForGroup(g,function AL4)
call ZYI(g)
endif
set V8I=null
set g=null
return false
endfunction
function AN4 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit V8I=GetTriggerUnit()
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function AM4))
set t=null
set V8I=null
endfunction
function AS4 takes nothing returns boolean
if GetLearnedSkill()==1093684801 and GetUnitAbilityLevel(GetTriggerUnit(),1093684801)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call AN4()
endif
return false
endfunction
function F21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AS4))
set t=null
endfunction
constant function Haunt_AbilityCode takes nothing returns integer
return 1093683257
endfunction
constant function Haunt_ImageCode takes nothing returns integer
return 1093684793
endfunction
constant function Haunt_ImageBuffCode takes nothing returns integer
return 1110455884
endfunction
constant function Haunt_RealityCode takes nothing returns integer
return 1093683265
endfunction
function AT4 takes nothing returns boolean
return GetSpellAbilityId()==(1093683257)
endfunction
function AR4 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local unit V8I=GetTriggerUnit()
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call SaveUnitHandle(ZY,(GetHandleId(T0I)),(387),(XTI))
call KKI(T0I,(1093684793))
call SetUnitAbilityLevel(T0I,(1093684793),GetUnitAbilityLevel(V8I,(1093683257)))
call IssueTargetOrderById(T0I,852274,V8I)
endfunction
function AP4 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function AQ4 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit SP2=(LoadUnitHandle(ZY,(V0I),(386)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(387)))
local integer AU4=(LoadInteger(ZY,(V0I),(385)))
if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER then
set AU4=AU4+1
call SaveInteger(ZY,(V0I),(385),(AU4))
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DisableTrigger(GetTriggeringTrigger())
call FlushChildHashtable(ZY,(GetHandleId(GetTriggeringTrigger())))
call SaveInteger(ZY,(V0I),(385),(AU4))
if XTI==GetTriggerUnit()then
call KillUnit(SP2)
endif
elseif IsUnitPaused(SP2)==false then
if AU4==2 then
call SetUnitVertexColor(SP2,255,255,255,255)
endif
if AU4>1 then
call DisableTrigger(GetTriggeringTrigger())
call IssueTargetOrder(SP2,"attack",XTI)
call EnableTrigger(GetTriggeringTrigger())
else
call DisableTrigger(GetTriggeringTrigger())
call IssueTargetOrderById(SP2,851986,XTI)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
endfunction
function B04 takes nothing returns boolean
return GetUnitAbilityLevel(GetSummonedUnit(),(1110455884))>0
endfunction
function BI4 takes nothing returns nothing
local unit T0I=GetSummoningUnit()
local unit SP2=GetSummonedUnit()
local unit XTI=(LoadUnitHandle(ZY,(GetHandleId(T0I)),(387)))
local trigger t=CreateTrigger()
call SaveUnitHandle(ZY,(GetHandleId(L1[GetPlayerId(GetOwningPlayer(T0I))])),(7100+GetHandleId(SP2)),(XTI))
call SetUnitPathing(SP2,false)
call SetUnitMoveSpeed(SP2,400)
call SetUnitX(SP2,GetUnitX(XTI))
call SetUnitY(SP2,GetUnitY(XTI))
call IssueTargetOrderById(SP2,851986,XTI)
call SetUnitVertexColor(SP2,255,255,255,50)
call TriggerRegisterUnitEvent(t,SP2,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,SP2,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,SP2,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddAction(t,function AQ4)
call DestroyEffect(AddSpecialEffect("units\\nightelf\\SpiritOfVengeance\\SpiritOfVengeance.mdl",GetUnitX(SP2),GetUnitY(SP2)))
call SaveUnitHandle(ZY,(GetHandleId(t)),(387),(XTI))
call SaveUnitHandle(ZY,(GetHandleId(t)),(386),(SP2))
call SaveInteger(ZY,(GetHandleId(t)),(385),(0))
call FlushChildHashtable(ZY,(GetHandleId(T0I)))
endfunction
function B14 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local group U4I=ZJI()
local boolexpr VE1=Condition(function AP4)
local sound YOI
call KKI(GetTriggerUnit(),(1093683265))
call SetUnitPathing(V8I,false)
call GroupEnumUnitsInRect(U4I,bj_mapInitialPlayableArea,VE1)
call ForGroup(U4I,function AR4)
call SetUnitPathing(V8I,true)
if FirstOfGroup(U4I)!=null then
set YOI=CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,10,10,"DefaultEAXON")
call StartSound(YOI)
call KillSoundWhenDone(YOI)
endif
call ZYI(U4I)
endfunction
function BO4 takes nothing returns boolean
return GetLearnedSkill()==(1093683257)and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),(1093683257))==1
endfunction
function B24 takes nothing returns nothing
call KKI(GetTriggerUnit(),(1093683265))
endfunction
function F31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AT4))
call TriggerAddAction(t,function B14)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function B04))
call TriggerAddAction(t,function BI4)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function BO4))
call TriggerAddAction(t,function B24)
call CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,10,10,"DefaultEAXON")
call YVI((1093684793))
endfunction
constant function Reality_AbilityCode takes nothing returns integer
return 1093683265
endfunction
constant function Reality_ImageBuffCode takes nothing returns integer
return 1110455884
endfunction
function B34 takes nothing returns boolean
return GetSpellAbilityId()==(1093683265)
endfunction
function B44 takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),(1110455884))>0
endfunction
function B54 takes nothing returns nothing
local unit Y9I
local real J3I=J9I(GetEnumUnit(),GetSpellTargetLoc())
if J3I<KO then
set YO=GetEnumUnit()
set KO=J3I
endif
endfunction
function B64 takes nothing returns unit
local group U4I=ZJI()
local boolexpr VE1=Condition(function B44)
set YO=null
set KO=9999999
call GroupEnumUnitsOfPlayer(U4I,GetOwningPlayer(GetTriggerUnit()),VE1)
call ForGroup(U4I,function B54)
set DPI=U4I
set U4I=null
return YO
endfunction
function B74 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function B84 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=B64()
local unit QP1=(LoadUnitHandle(ZY,(GetHandleId(V8I)),(7100+GetHandleId(XTI))))
local real J6I
local real J7I
if XTI==null then
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848652634))
else
set J6I=GetUnitX(XTI)
set J7I=GetUnitY(XTI)
call ForGroup(DPI,function B74)
call ZYI(DPI)
set DPI=null
call SetUnitX(V8I,J6I)
call SetUnitY(V8I,J7I)
if JAI(GetCameraEyePositionX(),GetCameraEyePositionY(),GetUnitX(XTI),GetUnitY(XTI))>1400 then
call PanCameraToTimedForPlayer(GetOwningPlayer(V8I),J6I,J7I,0)
endif
call IssueTargetOrder(V8I,"attack",QP1)
endif
endfunction
function Reality_CheckValid takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=B64()
if XTI==null then
call Y8I(V8I)
call Y3I(GetOwningPlayer(V8I),GetObjectName(1848652634))
endif
endfunction
function F41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function B34))
call TriggerAddAction(t,function B84)
endfunction
function B94 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093682515)
local integer Y0O
local integer BE3
if WTI>0 and KMI(XSI)==false then
set Y0O=R2I(GetUnitMoveSpeed(XSI)*0.04*WTI)
set BE3=(LoadInteger(ZY,(V0I),(238)))
if Y0O!=BE3 then
call SaveInteger(ZY,(V0I),(238),(Y0O))
call PWI(XSI,Y0O)
endif
endif
set t=null
set XSI=null
return false
endfunction
function BA4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function B94))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call SaveInteger(ZY,(V0I),(238),(0))
set t=null
endfunction
function BB4 takes nothing returns boolean
if GetLearnedSkill()==1093682515 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093682515)==1 then
call BA4()
endif
return false
endfunction
function E61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function BB4))
set t=null
endfunction
function BC4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real R12=(LoadReal(ZY,(GetHandleId(XSI)),(685)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if R12<(TimerGetElapsed(M))or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call SaveReal(ZY,(GetHandleId(XSI)),(685),((0)*1.0))
call UnitRemoveAbility(XSI,1093809224)
call UnitRemoveAbility(XSI,1110459715)
endif
set t=null
set XSI=null
return false
endfunction
function BD4 takes unit XSI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KKI(XSI,1093809224)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809224,false)
call SaveReal(ZY,(GetHandleId(XSI)),(685),(((TimerGetElapsed(M))+DQI-0.01)*1.0))
call TriggerRegisterTimerEvent(t,DQI,false)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerAddCondition(t,Condition(function BC4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
endfunction
function BE4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local integer ZLI=GetTriggerEvalCount(t)
local real GL2=(LoadReal(ZY,(V0I),(193)))
local integer HH2=(LoadInteger(ZY,(V0I),(12)))
if ZLI>35 then
call SaveReal(ZY,(V0I),(193),((GL2*0.98)*1.0))
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or ZLI>HH2 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
call KCI(x,y,150)
set x=YEI(x+GL2*Cos(B92))
set y=YHI(y+GL2*Sin(B92))
if(IsPointInRegion(ZN,((x)*1.0),((y)*1.0)))==false then
call SetUnitX(XTI,x)
call SetUnitY(XTI,y)
endif
if ZLI==1 and(LoadBoolean(ZY,(V0I),(698)))==false then
call IssueTargetOrder(XSI,"attack",XTI)
endif
endif
set t=null
set XTI=null
return false
endfunction
function BF4 takes unit XSI,unit XTI,boolean BG4,boolean BH4 returns nothing
local trigger t
local integer V0I
local real B92=Atan2(GetUnitY(XTI)-GetUnitY(XSI),GetUnitX(XTI)-GetUnitX(XSI))
local integer WTI=GetUnitAbilityLevel(XSI,1093682997)
local unit T0I
if BG4 then
endif
if WTI>0 then
set T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093752657)
call SetUnitAbilityLevel(T0I,1093752657,WTI)
if IssueTargetOrder(T0I,"thunderbolt",XTI)then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",XSI,"weapon"))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveReal(ZY,(V0I),(193),((2)*1.0))
call SaveBoolean(ZY,(V0I),(698),(BH4))
call SaveInteger(ZY,(V0I),(12),(75+20*WTI))
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,0.01,true)
call TriggerAddCondition(t,Condition(function BE4))
call XNI(XSI,XTI,1,25*WTI)
call BD4(XSI)
endif
if BH4==false then
call V5I(XSI,4276,1.5)
endif
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
endfunction
function BZ4 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093682997)>0 and IsUnitIllusion(GetAttacker())==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and GetRandomInt(1,100)<=17 and((LoadInteger(ZY,(GetHandleId((GetAttacker()))),((4276))))==1)==false then
call BF4(GetAttacker(),GetTriggerUnit(),false,false)
endif
return false
endfunction
function E71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function BZ4))
set t=null
endfunction
function BV4 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EOI)==false then
call GroupAddUnit(EOI,GetEnumUnit())
call BF4(E0I,GetEnumUnit(),false,true)
endif
endfunction
function BW4 takes integer id returns boolean
if id==1093750840 or id==1093682515 or id==1093682996 or id==1093747768 or id==1093682997 or id==1096904043 then
return true
endif
if id==852002 or id==852003 or id==852004 or id==852005 or id==852006 or id==852007 then
return true
endif
if id>1000000 then
return true
endif
return false
endfunction
function BX4 takes nothing returns boolean
if(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(E0I))==true then
if J8I(EII,GetFilterUnit())<E1I then
set E1I=J8I(EII,GetFilterUnit())
set DUI=GetFilterUnit()
endif
endif
return false
endfunction
function BY4 takes unit XSI,unit XTI returns unit
local group g=ZJI()
set OK=XSI
set E0I=XSI
set DUI=null
set E1I=999999
set EII=XTI
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),4000,Condition(function BX4))
call ZYI(g)
set g=null
return DUI
endfunction
function BJ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real NA2=(350+75*WTI)*0.02
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real x
local real y
local real a
local real d
local string fx
local group g
if(GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==XSI)or GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or NWI(XSI)or(LoadReal(ZY,(V0I),(442)))<(TimerGetElapsed(M))then
if(GetTriggerEventId()!=EVENT_UNIT_ISSUED_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER)or((GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)and BW4(GetIssuedOrderId())==false)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call UnitRemoveAbility(XTI,1093809228)
call UnitRemoveAbility(XTI,1110459716)
call ZYI((LoadGroupHandle(ZY,(V0I),(187))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitTimeScale(XSI,1)
call KillUnit(T0I)
call SetUnitPathing(XSI,true)
call SetUnitVertexColor(XSI,255,255,255,255)
call UnitRemoveAbility(XSI,1093744441)
call KCI(GetUnitX(XSI),GetUnitY(XSI),200)
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
call ResetUnitAnimation(XSI)
endif
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==XTI then
set fx=""
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(XSI))or XJI(GetLocalPlayer())then
set fx="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"
endif
call UnitRemoveAbility(XTI,1093809228)
call UnitRemoveAbility(XTI,1110459716)
set XTI=BY4(XSI,XTI)
if XTI!=null then
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget(fx,XTI,"overhead")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget(fx,XTI,"overhead")))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M))+50)*1.0))
call TriggerRegisterDeathEvent(t,XTI)
else
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call UnitRemoveAbility(XTI,1093809228)
call UnitRemoveAbility(XTI,1110459716)
call ZYI((LoadGroupHandle(ZY,(V0I),(187))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitTimeScale(XSI,1)
call KillUnit(T0I)
call SetUnitPathing(XSI,true)
call ResetUnitAnimation(XSI)
call SetUnitVertexColor(XSI,255,255,255,255)
call UnitRemoveAbility(XSI,1093744441)
call SetUnitPosition(XSI,GetUnitX(XSI),GetUnitY(XSI))
call KCI(GetUnitX(XSI),GetUnitY(XSI),500)
endif
else
set d=JAI(GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))
if d<100 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(177))))
call UnitRemoveAbility(XTI,1093809228)
call UnitRemoveAbility(XTI,1110459716)
call ZYI((LoadGroupHandle(ZY,(V0I),(187))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitTimeScale(XSI,1)
call KillUnit(T0I)
set T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call UnitAddAbility(T0I,1093683027)
call SetUnitAbilityLevel(T0I,1093683027,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
call SetUnitPathing(XSI,true)
call SetUnitVertexColor(XSI,255,255,255,255)
call UnitRemoveAbility(XSI,1093744441)
call SetUnitPosition(XSI,GetUnitX(XSI),GetUnitY(XSI))
call KCI(GetUnitX(XSI),GetUnitY(XSI),200)
set E2I=WTI
call IssueTargetOrder(XSI,"attack",XTI)
else
if GetTriggerEvalCount(t)==1 then
call DisableTrigger(t)
call IssueImmediateOrder(XSI,"holdposition")
call EnableTrigger(t)
endif
if ModuloInteger(GetTriggerEvalCount(t),65)==0 then
if GetUnitTypeId(XSI)==1160786520 then
call SetUnitAnimationByIndex(XSI,1)
else
call SetUnitAnimationByIndex(XSI,2)
endif
endif
set a=JRI(XSI,XTI)*bj_DEGTORAD
call SetUnitFacing(XSI,a*bj_RADTODEG)
set x=DE2+NA2*Cos(a)
set y=DF2+NA2*Sin(a)
call SetUnitX(XSI,x)
call SetUnitY(XSI,y)
call SetUnitX(T0I,GetUnitX(XTI))
call SetUnitY(T0I,GetUnitY(XTI))
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
set EOI=(LoadGroupHandle(ZY,(V0I),(187)))
set g=ZJI()
set OK=XSI
set E0I=XSI
call GroupEnumUnitsInRange(g,x,y,275,Condition(function SOI))
call GroupRemoveUnit(g,XTI)
set E2I=WTI
call ForGroup(g,function BV4)
call ZYI(g)
set g=null
if d<3000 and GetUnitAbilityLevel(XTI,1093809228)==0 then
call KKI(XTI,1093809228)
endif
endif
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
return false
endfunction
function BK4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1865429073,GetUnitX(XTI),GetUnitY(XTI),0)
local integer WTI=GetUnitAbilityLevel(XSI,1093750840)
local string fx=""
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(XSI))or XJI(GetLocalPlayer())then
set fx="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"
call PingMinimapEx(GetUnitX(XTI),GetUnitY(XTI),2,255,255,255,false)
endif
call IssueTargetOrder(XSI,"move",XTI)
call SetUnitPathing(XSI,false)
if GetUnitTypeId(XSI)==1160786520 then
call SetUnitAnimationByIndex(XSI,1)
else
call SetUnitAnimationByIndex(XSI,2)
endif
call SetUnitTimeScale(XSI,2.5)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093744441,false)
call SetUnitVertexColor(XSI,255,255,255,100)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(442),(((TimerGetElapsed(M))+50)*1.0))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XSI))*1.0))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget(fx,XTI,"overhead")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget(fx,XTI,"overhead")))
call SaveEffectHandle(ZY,(V0I),(177),(AddSpecialEffectTarget("war3mapImported\\ShockwaveMissilePurple.mdx",XSI,"origin")))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function BJ4))
set t=null
set XSI=null
set XTI=null
set T0I=null
endfunction
function BL4 takes nothing returns boolean
if GetSpellAbilityId()==1093750840 and ZXI(GetSpellTargetUnit())==false then
call BK4()
endif
return false
endfunction
function E51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BL4))
set t=null
call YVI(1093687350)
endfunction
function BM4 takes unit XSI,unit XTI returns nothing
local trigger t
local integer V0I
local real B92=Atan2(GetUnitY(XTI)-GetUnitY(XSI),GetUnitX(XTI)-GetUnitX(XSI))
local integer WTI=4
call BF4(XSI,XTI,true,true)
set t=null
endfunction
function BN4 takes nothing returns nothing
call BM4(E3I,GetEnumUnit())
endfunction
function BS4 takes unit XSI,unit Targer returns nothing
local group g=ZJI()
set OK=XSI
set E3I=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),275,Condition(function SOI))
call ForGroup(g,function BN4)
call ZYI(g)
set g=null
endfunction
function BT4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer ZLI=GetTriggerEvalCount(t)
local integer BR4
local integer WTI
local real B92
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local real d=JAI(x,y,DE2,DF2)
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
if GetTriggerEventId()==EVENT_UNIT_DEATH or ZLI==200 or d>1800 then
call SetUnitVertexColor(XSI,255,255,255,255)
call UnitShareVision(XTI,GetOwningPlayer(XSI),false)
call UnitRemoveAbility(XSI,1093744441)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if ZLI<100 then
set BR4=ZLI
else
set BR4=200-ZLI
endif
call SetUnitVertexColor(XSI,255,255,255,255*(100-BR4)/100)
if ZLI==100 then
set WTI=(LoadInteger(ZY,(V0I),(5)))
set B92=Atan2(GetUnitY(XTI)-GetUnitY(XSI),GetUnitX(XTI)-GetUnitX(XSI))
call SetUnitPosition(XSI,GetUnitX(XTI)+80*Cos(B92),GetUnitY(XTI)+80*Sin(B92))
call SetUnitAnimation(XSI,"attack")
call IssueTargetOrder(XSI,"attack",XTI)
if GetUnitAbilityLevel(XSI,1093682996)>0 then
call BM4(XSI,XTI)
else
call BS4(XSI,XTI)
endif
call XNI(XSI,XTI,1,100*WTI)
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function BP4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093682996)
if WTI==0 then
set WTI=GetUnitAbilityLevel(XSI,1093747768)
endif
call UnitShareVision(XTI,GetOwningPlayer(XSI),true)
call IssueImmediateOrder(XSI,"halt")
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XTI))*1.0))
call TriggerRegisterTimerEvent(t,0.01,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BT4))
call KKI(XSI,1093744441)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093744441,false)
set t=null
set XSI=null
set XTI=null
endfunction
function BQ4 takes nothing returns boolean
if(GetSpellAbilityId()==1093682996 or GetSpellAbilityId()==1093747768)and ZXI(GetSpellTargetUnit())==false then
call BP4()
endif
return false
endfunction
function E81 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BQ4))
set t=null
endfunction
function BU4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093809973)
if WTI==1 then
call KKI(XSI,1093809974)
elseif WTI==2 then
call UnitRemoveAbility(XSI,1093809974)
call KKI(XSI,1093809977)
elseif WTI==3 then
call UnitRemoveAbility(XSI,1093809974)
call UnitRemoveAbility(XSI,1093809977)
call KKI(XSI,1093809975)
elseif WTI==4 then
call UnitRemoveAbility(XSI,1093809974)
call UnitRemoveAbility(XSI,1093809977)
call UnitRemoveAbility(XSI,1093809975)
call KKI(XSI,1093809976)
endif
set XSI=null
endfunction
function C04 takes nothing returns boolean
if GetLearnedSkill()==1093809973 and IsUnitIllusion(GetTriggerUnit())==false then
call BU4()
endif
return false
endfunction
function EB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function C04))
set t=null
endfunction
function Sunder_SwitchConditions takes nothing returns boolean
return GetSpellAbilityId()==1093678930
endfunction
function CI4 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real C14=(LoadReal(ZY,(V0I),(295)))
local real CO4=(LoadReal(ZY,(V0I),(296)))
local integer WTI=GetUnitAbilityLevel(XSI,1093678929)
local real C24=0.33
if WTI==2 then
set C24=0.28
elseif WTI==3 then
set C24=0.23
endif
if GetSpellTargetUnit()==XSI then
call SetUnitState(XSI,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(XSI,UNIT_STATE_MAX_LIFE)*CO4*0.01,GetUnitState(XSI,UNIT_STATE_MAX_LIFE)*C24))
endif
if GetSpellTargetUnit()==XTI then
call SetUnitLifePercentBJ(XTI,C14)
if GetUnitLifePercent(XTI)<33.00 and WTI==1 and GetUnitState(XTI,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(XTI,33.00)
endif
if GetUnitLifePercent(XTI)<28.00 and WTI==2 and GetUnitState(XTI,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(XTI,28.00)
endif
if GetUnitLifePercent(XTI)<23.00 and WTI==3 and GetUnitState(XTI,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(XTI,23.00)
endif
endif
if GetTriggerEvalCount(t)==2 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set XSI=null
set XTI=null
set t=null
endfunction
function C34 takes nothing returns boolean
if GetSpellAbilityId()==1093678930 then
call CI4()
endif
return false
endfunction
function C44 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local unit T0I
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(295),((GetUnitLifePercent(XSI))*1.0))
call SaveReal(ZY,(V0I),(296),((GetUnitLifePercent(XTI))*1.0))
call TriggerAddCondition(t,Condition(function C34))
set T0I=CreateUnit(GetOwningPlayer(XTI),1697656921,GetUnitX(XTI),GetUnitY(XTI),0)
call TriggerRegisterUnitEvent(t,T0I,EVENT_UNIT_SPELL_EFFECT)
call KKI(T0I,1093678930)
call IssueTargetOrder(T0I,"thunderbolt",XSI)
call ShowUnit(T0I,false)
call SetUnitPathing(T0I,false)
call SetUnitInvulnerable(T0I,true)
call UnitApplyTimedLife(T0I,1112820806,0.2)
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656921,GetUnitX(XSI),GetUnitY(XSI),0)
call TriggerRegisterUnitEvent(t,T0I,EVENT_UNIT_SPELL_EFFECT)
call KKI(T0I,1093678930)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
call ShowUnit(T0I,false)
call SetUnitPathing(T0I,false)
call SetUnitInvulnerable(T0I,true)
call UnitApplyTimedLife(T0I,1112820806,0.2)
set t=null
set XSI=null
set XTI=null
set T0I=null
endfunction
function C54 takes nothing returns boolean
if GetSpellAbilityId()==1093678929 then
call C44()
endif
return false
endfunction
function E91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C54))
endfunction
function C64 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit SP2=(LoadUnitHandle(ZY,(V0I),(335)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerUnit()!=SP2 then
call KillUnit(SP2)
endif
else
call IssueTargetOrder(SP2,"attack",XTI)
endif
set t=null
set SP2=null
set XTI=null
return false
endfunction
function C74 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit SP2
if GetSummoningUnit()==T0I then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set SP2=GetSummonedUnit()
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterDeathEvent(t,SP2)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerAddCondition(t,Condition(function C64))
call SaveUnitHandle(ZY,(V0I),(335),(SP2))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call UnitAddAbility(SP2,1097625443)
call SetUnitPosition(SP2,GetUnitX(XTI)+100,GetUnitY(XTI)+100)
call IssueTargetOrder(SP2,"attack",XTI)
call SetUnitMoveSpeed(SP2,522)
call SetUnitVertexColorBJ(SP2,100,100,100,60)
endif
set t=null
set XTI=null
set XSI=null
set T0I=null
return false
endfunction
function C84 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093809985)
local integer id
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
local trigger t
local integer V0I
if WTI==1 then
set id=1093809752
elseif WTI==2 then
set id=1093809750
elseif WTI==3 then
set id=1093809753
elseif WTI==4 then
set id=1093809751
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),id,false)
if NKI(XTI)==false then
call MQI(XTI,id,1,4,1110459722)
endif
set t=CreateTrigger()
set V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function C74))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call KKI(T0I,1093809227)
call SetUnitAbilityLevel(T0I,1093809227,WTI)
call IssueTargetOrderById(T0I,852274,XTI)
set XSI=null
set XTI=null
set T0I=null
set t=null
endfunction
function C94 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local group g=ZJI()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call KZI(GetOwningPlayer(XSI),2.5,x,y,400)
call GroupEnumUnitsInRange(g,x,y,375,Condition(function S0I))
call ForGroup(g,function C84)
call ZYI(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlackChakraExplosion.mdx",x,y))
call KEI(KF,x,y)
set g=null
set XSI=null
endfunction
function CA4 takes nothing returns boolean
if GetSpellAbilityId()==1093809985 then
call C94()
endif
return false
endfunction
function EA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CA4))
set t=null
endfunction
function CB4 takes nothing returns nothing
local unit XSI=GetSummoningUnit()
local unit SP2=GetSummonedUnit()
call SelectUnitAddForPlayer(SP2,GetOwningPlayer(XSI))
set XSI=null
set SP2=null
endfunction
function CC4 takes nothing returns boolean
if GetUnitAbilityLevel(GetSummonedUnit(),1110459721)>0 then
call CB4()
endif
return false
endfunction
function CD4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I
local integer WTI=GetUnitAbilityLevel(XSI,1093751369)
if WTI>1 then
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call KKI(T0I,1093679185)
call SetUnitAbilityLevel(T0I,1093679185,WTI)
call IssueTargetOrderById(T0I,852274,XSI)
if WTI==4 then
call IssueTargetOrderById(T0I,852274,XSI)
endif
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set T0I=null
return false
endfunction
function CE4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.2,false)
call TriggerAddCondition(t,Condition(function CD4))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
set t=null
endfunction
function CF4 takes nothing returns boolean
if GetSpellAbilityId()==1093751369 and GetUnitTypeId(GetTriggerUnit())==1164277353 then
call CE4()
endif
return false
endfunction
function EC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CF4))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function CC4))
set t=null
endfunction
function CG4 takes nothing returns boolean
return GetSpellAbilityId()==1093678134 and ZXI(GetSpellTargetUnit())==false
endfunction
function CH4 takes nothing returns nothing
local unit t=GetSpellTargetUnit()
local real CZ4=(60.00+(50.00*I2R(GetUnitAbilityLevelSwapped(1093678134,GetTriggerUnit()))))
call UnitDamageTargetBJ(GetTriggerUnit(),t,CZ4,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_COLD)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",t,"chest"))
endfunction
function EE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CG4))
call TriggerAddAction(t,function CH4)
endfunction
function CV4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=GetEventDamageSource()
local real d=GetEventDamage()
local real J1I=(LoadReal(ZY,(V0I),(412)))
local real SV1=(LoadReal(ZY,(V0I),(411)))
if VSI(GetOwningPlayer(XTI))then
if(SV1+E4I)<(TimerGetElapsed(M))then
set J1I=0
endif
set SV1=(TimerGetElapsed(M))
set J1I=J1I+d
if J1I>E5I and GetUnitAbilityLevel(XSI,1112433775)==0 then
set J1I=0
call TYI(XSI)
call TZI(XSI,0,0)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",XSI,"origin"))
endif
call SaveReal(ZY,(V0I),(412),((J1I)*1.0))
call SaveReal(ZY,(V0I),(411),((SV1)*1.0))
endif
set t=null
set XSI=null
return false
endfunction
function CW4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function CV4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(412),((0)*1.0))
call SaveReal(ZY,(V0I),(411),(((TimerGetElapsed(M)))*1.0))
set t=null
set XSI=null
endfunction
function CX4 takes nothing returns boolean
if GetLearnedSkill()==1093678149 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678149)==1 then
call CW4()
endif
return false
endfunction
function ED1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function CX4))
set t=null
endfunction
function CY4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set g=null
return false
endfunction
function CJ4 takes group g returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveGroupHandle(ZY,(V0I),(22),(g))
call TriggerRegisterTimerEvent(t,10,false)
call TriggerAddCondition(t,Condition(function CY4))
set t=null
endfunction
function CK4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit T0I
local integer i=1
local real x1=GetUnitX(V8I)
local real y1=GetUnitY(V8I)
local real x2
local real y2
local real XPI
local real SQI
local integer WTI=GetUnitAbilityLevel(V8I,1093810505)
local group g=ZJI()
local real d=500
if WTI==1 then
set SQI=1.5
set XPI=250
elseif WTI==2 then
set SQI=1.8
set XPI=350
elseif WTI==3 then
set SQI=2.25
set XPI=450
endif
loop
exitwhen i>16
set x2=x1+(d+WTI*100)*Cos(22.5*i*bj_DEGTORAD)
set y2=y1+(d+WTI*100)*Sin(22.5*i*bj_DEGTORAD)
call TDI(V8I,null,XPI,SQI,0.52,x1,y1,x2,y2,250,g,false,900)
set i=i+1
endloop
call CJ4(g)
set V8I=null
set T0I=null
set g=null
endfunction
function CL4 takes nothing returns boolean
if GetSpellAbilityId()==1093810505 then
call CK4()
endif
return false
endfunction
function EF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CL4))
call YVI(1093687350)
set t=null
endfunction
function CM4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real R12=(LoadReal(ZY,(GetHandleId(XTI)),(715)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or R12<(TimerGetElapsed(M))then
call UnitRemoveAbility(XTI,1093808696)
call UnitRemoveAbility(XTI,1110459704)
endif
set t=null
set XTI=null
return false
endfunction
function CN4 takes unit XTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call KKI(XTI,1093808696)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function CM4))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(GetHandleId(XTI)),(715),((5.9+(TimerGetElapsed(M)))*1.0))
set t=null
endfunction
function CS4 takes nothing returns nothing
if NKI(GetEnumUnit())==false then
call CN4(GetEnumUnit())
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093808696,false)
call XNI(E6I,GetEnumUnit(),2,25+50*E7I)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",GetEnumUnit(),"chest"))
endfunction
function CT4 takes nothing returns nothing
local group g=ZJI()
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093808694)
set OK=XSI
set E7I=WTI
set E6I=XSI
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),425,Condition(function SOI))
call ForGroup(g,function CS4)
call ZYI(g)
set g=null
set XSI=null
endfunction
function CR4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SetUnitTimeScale(XSI,1)
set t=null
set XSI=null
return false
endfunction
function CP4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,0.3,false)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerAddCondition(t,Condition(function CR4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SetUnitTimeScale(XSI,2)
set t=null
set XSI=null
endfunction
function CQ4 takes nothing returns boolean
if GetSpellAbilityId()==1093808694 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call CT4()
else
call CP4()
endif
endif
return false
endfunction
function EG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function CQ4))
set t=null
endfunction
constant function Healing_RawCode takes nothing returns integer
return 1093685074
endfunction
function CU4 takes nothing returns boolean
return GetSpellAbilityId()==(1093685074)
endfunction
function D04 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(YO))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function DI4 takes nothing returns nothing
call XNI(YO,GetEnumUnit(),2,KO)
endfunction
function D14 takes unit XSI,unit XTI,real XPI returns nothing
local group U4I=ZJI()
local boolexpr VE1=Condition(function D04)
set YO=XSI
set KO=XPI
call GroupEnumUnitsInRange(U4I,GetUnitX(XTI),GetUnitY(XTI),195,VE1)
call ForGroup(U4I,function DI4)
call ZYI(U4I)
endfunction
function DO4 takes nothing returns boolean
return IsUnitInGroup(GetFilterUnit(),C2)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and KMI(GetFilterUnit())==false and GetFilterUnit()!=E8I
endfunction
function D24 takes group D34,unit D44,unit XSI,unit OriginalTargetreturns returns unit
local group U4I=ZJI()
local boolexpr VE1=Condition(function DO4)
local unit D54=null
local unit D64
set C2=D34
set YO=XSI
call GroupEnumUnitsInRange(U4I,GetUnitX(D44),GetUnitY(D44),500,VE1)
set D64=FirstOfGroup(U4I)
set D54=D64
loop
exitwhen D64==null
if GetUnitState(D64,UNIT_STATE_LIFE)!=GetUnitState(D64,UNIT_STATE_MAX_LIFE)then
if D64!=XSI and IsUnitType(D64,UNIT_TYPE_HERO)==true and IsUnitType(D54,UNIT_TYPE_HERO)==false then
set D54=D64
elseif D64!=XSI and GetUnitState(D64,UNIT_STATE_LIFE)<GetUnitState(D54,UNIT_STATE_LIFE)and IsUnitType(D64,UNIT_TYPE_HERO)==true and IsUnitType(D54,UNIT_TYPE_HERO)==true then
set D54=D64
elseif D64!=XSI and IsUnitType(D54,UNIT_TYPE_HERO)==false and GetUnitState(D64,UNIT_STATE_LIFE)<GetUnitState(D54,UNIT_STATE_LIFE)then
set D54=D64
elseif D64==XSI then
set D54=D64
endif
endif
call GroupRemoveUnit(U4I,D64)
set D64=FirstOfGroup(U4I)
endloop
call ZYI(U4I)
return D54
endfunction
function D74 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local string D84="Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl"
local string D94="origin"
local unit array DA4
local integer x
local integer i=1
local integer WTI=GetUnitAbilityLevel(V8I,(1093685074))
local real XPI=60+WTI*20
local group D34=ZJI()
local integer DB4
local boolean DC4=false
set E8I=V8I
if WTI==3 then
set DB4=4
elseif WTI==4 then
set DB4=5
else
set DB4=3
endif
call SetUnitState(V8I,UNIT_STATE_LIFE,GetUnitState(V8I,UNIT_STATE_LIFE)+XPI)
call D14(V8I,V8I,XPI)
call GroupAddUnit(D34,V8I)
call JWI(D84,V8I,D94,2)
if XTI==V8I then
set DA4[i]=D24(D34,V8I,V8I,XTI)
else
set DA4[i]=XTI
endif
if DA4[i]==null then
call ZYI(D34)
return
endif
call SetUnitState(DA4[i],UNIT_STATE_LIFE,GetUnitState(DA4[i],UNIT_STATE_LIFE)+XPI)
call D14(V8I,DA4[i],XPI)
call GroupAddUnit(D34,DA4[i])
call JWI(D84,DA4[i],D94,2)
call JUI("SPLK",GetUnitX(V8I),GetUnitY(V8I),GetUnitX(DA4[i]),GetUnitY(DA4[i]),0.3,0.5,0.9,1,0.7)
set i=2
loop
exitwhen i>DB4 or DC4
set DA4[i]=D24(D34,DA4[i-1],V8I,XTI)
if DA4[i]==null then
set DC4=true
else
call GroupAddUnit(D34,DA4[i])
call JWI(D84,DA4[i],D94,2)
call SetUnitState(DA4[i],UNIT_STATE_LIFE,GetUnitState(DA4[i],UNIT_STATE_LIFE)+XPI)
call D14(V8I,DA4[i],XPI)
call JUI("SPLK",GetUnitX(DA4[i-1]),GetUnitY(DA4[i-1]),GetUnitX(DA4[i]),GetUnitY(DA4[i]),0.3,0.5,0.9,1,0.7)
set i=i+1
endif
endloop
call ZYI(D34)
endfunction
function FS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CU4))
call TriggerAddAction(t,function D74)
endfunction
constant function BlowDart_RawCode takes nothing returns integer
return 1093684817
endfunction
constant function BlowDart_SlowCode takes nothing returns integer
return 1093684810
endfunction
constant function BlowDart_StunCode takes nothing returns integer
return 1093684811
endfunction
constant function BlowDart_IconCode takes nothing returns integer
return 1093685079
endfunction
function DD4 takes nothing returns boolean
return GetSpellAbilityId()==(1093684817)and ZXI(GetSpellTargetUnit())==false
endfunction
function DE4 takes unit XSI,unit XTI,integer WTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,(1093684810))
call SetUnitAbilityLevel(T0I,(1093684810),WTI)
call IssueTargetOrder(T0I,"slow",XTI)
endfunction
function DF4 takes unit XSI,unit XTI returns nothing
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,(1093684811))
call IssueTargetOrder(T0I,"thunderbolt",XTI)
endfunction
function DG4 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,(1093684817))
local integer PIO=GetTriggerExecCount(t)
local real XPI=8*WTI
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
if WTI==1 then
call KKI(XTI,(1093685079))
call XNI(T0I,XTI,2,XPI)
if PIO==8 then
call UnitRemoveAbility(XTI,(1093685079))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
if WTI==2 then
if PIO==1 then
call DE4(XSI,XTI,2)
endif
if PIO>1 then
call KKI(XTI,(1093685079))
call XNI(T0I,XTI,2,XPI)
endif
if PIO==9 then
call UnitRemoveAbility(XTI,(1093685079))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
if WTI==3 then
if PIO==1 then
call DE4(XSI,XTI,2)
endif
if PIO==2 then
call DF4(XSI,XTI)
endif
if PIO>2 then
call KKI(XTI,(1093685079))
call XNI(T0I,XTI,2,XPI)
endif
if PIO==10 then
call UnitRemoveAbility(XTI,(1093685079))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
if WTI==4 then
if PIO==1 then
call DE4(XSI,XTI,2)
endif
if PIO==2 then
call DF4(XSI,XTI)
endif
if PIO>2 then
call KKI(XTI,(1093685079))
call XNI(T0I,XTI,2,XPI)
endif
if PIO==10 then
call UnitRemoveAbility(XTI,(1093685079))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
set T0I=null
endfunction
function DH4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),0)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddAction(t,function DG4)
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call SaveUnitHandle(ZY,(V0I),(17),(GetSpellTargetUnit()))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call DE4(GetTriggerUnit(),GetSpellTargetUnit(),1)
set T0I=null
endfunction
function FT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DD4))
call TriggerAddAction(t,function DH4)
call YVI((1093684810))
call YVI((1093684811))
endfunction
function DZ4 takes nothing returns nothing
local unit XTI=GetEnumUnit()
if KMI(XTI)==false then
call UnitRemoveAbility(XTI,1093684821)
call UnitRemoveAbility(XTI,1093684823)
elseif IsUnitType(XTI,UNIT_TYPE_HERO)==true then
call LJI(XTI,1093684821,5.1)
call LJI(XTI,1093684823,5.1)
endif
set XTI=null
endfunction
function DV4 takes nothing returns nothing
local unit XTI=GetEnumUnit()
if KMI(XTI)==false then
if IsUnitAlly(XTI,GK)==false then
if MJ==0 then
call KKI(XTI,1093684821)
else
call SetUnitAbilityLevel(XTI,1093684821,MJ+1)
endif
else
if MJ==0 then
call KKI(XTI,1093684823)
else
call SetUnitAbilityLevel(XTI,1093684823,MJ+1)
endif
endif
endif
set XTI=null
endfunction
function DW4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
local player p=(LoadPlayerHandle(ZY,(V0I),(54)))
local integer ZLI=GetTriggerEvalCount(t)
local integer SQI=(LoadInteger(ZY,(V0I),(188)))
set GK=p
set MJ=ZLI
if ZLI==SQI then
call ForGroup(g,function DZ4)
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call ForGroup(g,function DV4)
endif
set t=null
set g=null
set p=null
return false
endfunction
function DX4 takes nothing returns nothing
call JWI(ZK,GetEnumUnit(),"chest",3)
call JWI(ZK,GetEnumUnit(),"chest",3)
call JWI(ZK,GetEnumUnit(),"right hand",3)
call JWI(ZK,GetEnumUnit(),"left hand",3)
endfunction
function DY4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local group g=ZJI()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(V8I,1093742673)
local integer SQI=6+6*WTI
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1747988535,x,y,0)
local integer a=0
local boolean HZ2=false
if WTI==0 then
set WTI=GetUnitAbilityLevel(V8I,1093747778)
set SQI=6+6*WTI+6
set HZ2=true
endif
call RemoveLocation(l)
set ZK=""
set MJ=SQI
set a=255
set ZK="Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl"
call SetUnitVertexColor(T0I,255,255,255,a)
call UnitApplyTimedLife(T0I,1112820806,5)
if HZ2 then
call GroupEnumUnitsInRange(g,x,y,800,Condition(function SMI))
else
call GroupEnumUnitsInRange(g,x,y,600,Condition(function SMI))
endif
call ForGroup(g,function DX4)
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SavePlayerHandle(ZY,(V0I),(54),(GetOwningPlayer(V8I)))
call SaveInteger(ZY,(V0I),(188),(SQI))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function DW4))
call TriggerEvaluate(t)
set V8I=null
set l=null
set g=null
set t=null
endfunction
function DJ4 takes nothing returns boolean
if GetSpellAbilityId()==1093742673 or GetSpellAbilityId()==1093747778 then
call DY4()
endif
return false
endfunction
function FR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DJ4))
call YVI(1093684821)
call YVI(1093684823)
set t=null
endfunction
function DK4 takes string KOI,unit XTI,unit V8I returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,KOI,0.033)
call SetTextTagPosUnit(tt,XTI,64)
call SetTextTagColor(tt,160,0,255,255)
call SetTextTagVelocity(tt,0,0.0355)
call SetTextTagFadepoint(tt,0.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,0.65)
if IsUnitAlly(V8I,GetLocalPlayer())or XJI(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function DL4 takes real SQI returns string
if SQI>4.5 then
return"5.0"
elseif SQI>4.0 then
return"4.5"
elseif SQI>3.5 then
return"4.0"
elseif SQI>3.0 then
return"3.5"
elseif SQI>2.5 then
return"3.0"
elseif SQI>2.0 then
return"2.5"
elseif SQI>1.5 then
return"2.0"
elseif SQI>1.0 then
return"1.5"
elseif SQI>0.5 then
return"1.0"
elseif SQI>0.0 then
return"0.5"
else
return"0.0"
endif
return" "
endfunction
function DM4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer ZLI=GetTriggerEvalCount(t)
if ZLI>11 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call DK4(DL4(5.5-0.5*ZLI),XTI,XTI)
endif
set t=null
set XTI=null
return false
endfunction
function DN4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real XPI=(LoadReal(ZY,(V0I),(20)))
local real DS4=YQI(GetUnitState(XTI,UNIT_STATE_LIFE)-XPI,1)
local real DT4=(LoadReal(ZY,(GetHandleId(XTI)),(243)))
call SetUnitState(XTI,UNIT_STATE_LIFE,DS4)
call SaveReal(ZY,(GetHandleId(XTI)),(243),((DT4-XPI)*1.0))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XTI=null
return false
endfunction
function DR4 takes unit XTI,real XPI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real DT4=(LoadReal(ZY,(GetHandleId(XTI)),(243)))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
call SaveReal(ZY,(GetHandleId(XTI)),(243),((DT4+XPI)*1.0))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function DN4))
set t=null
endfunction
function DP4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI
local real EL3
local real XPI
local integer ZLI=GetTriggerEvalCount(t)
local real DT4
local real DQ4=(LoadReal(ZY,(V0I),(389)))
local real DU4=(LoadReal(ZY,(V0I),(390)))
if DQ4!=(TimerGetElapsed(M))then
set DQ4=(TimerGetElapsed(M))
set DU4=0
call SaveReal(ZY,(V0I),(389),((DQ4)*1.0))
call SaveReal(ZY,(V0I),(390),((DU4)*1.0))
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set XTI=GetTriggerUnit()
set DT4=(LoadReal(ZY,(GetHandleId(XTI)),(243)))
set EL3=GetUnitState(XTI,UNIT_STATE_LIFE)
set XPI=GetEventDamage()
if((EL3-DT4-DU4)-XPI)<1 then
call SetUnitState(XTI,UNIT_STATE_LIFE,EL3+XPI+DU4)
call DR4(XTI,XPI)
else
set DU4=DU4+XPI
call SaveReal(ZY,(V0I),(390),((DU4)*1.0))
endif
else
call SaveInteger(ZY,(GetHandleId(((LoadUnitHandle(ZY,(V0I),(17)))))),((2485)),(2))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call UnitRemoveAbility((LoadUnitHandle(ZY,(V0I),(17))),1093808457)
call UnitRemoveAbility((LoadUnitHandle(ZY,(V0I),(17))),1110456132)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set XTI=null
set t=null
return false
endfunction
function E04 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
call KKI(XTI,1093808457)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function DP4))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\DarkHands.mdx",XTI,"overhead")))
call SaveReal(ZY,(GetHandleId(XTI)),(243),((0)*1.0))
call SaveReal(ZY,(V0I),(389),(((TimerGetElapsed(M)))*1.0))
call SaveReal(ZY,(V0I),(390),((0)*1.0))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(GetHandleId((XTI))),((2485)),(1))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function DM4))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function EI4 takes nothing returns boolean
if GetSpellAbilityId()==1093742668 then
call E04()
endif
return false
endfunction
function FP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EI4))
set t=null
endfunction
function E14 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EK)==false then
set E9I=CreateUnit(GetOwningPlayer(OK),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call KKI(E9I,1093744462)
call SetUnitAbilityLevel(E9I,1093744462,EAI)
call IssueTargetOrder(E9I,"shadowstrike",GetEnumUnit())
call GroupAddUnit(EK,GetEnumUnit())
endif
endfunction
function EO4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local group g=(LoadGroupHandle(ZY,(V0I),(22)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local group X22
local real x
local real y
local real E24
local real E34
local real GL2=30
set EAI=WTI
if GetTriggerEvalCount(t)>28 then
call ZYI(g)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ShowUnit(T0I,false)
call KillUnit(T0I)
else
set x=GetUnitX(T0I)
set y=GetUnitY(T0I)
set X22=ZJI()
set EK=g
set OK=T0I
set TJ=WTI*70
call GroupEnumUnitsInRange(X22,x,y,150,Condition(function S7I))
call ForGroup(X22,function E14)
call ZYI(X22)
set E24=YEI(x+GL2*Cos(B92*bj_DEGTORAD))
set E34=YHI(y+GL2*Sin(B92*bj_DEGTORAD))
call SetUnitX(T0I,E24)
call SetUnitY(T0I,E34)
endif
set t=null
set g=null
set X22=null
set T0I=null
return false
endfunction
function E44 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local group g=ZJI()
local unit V8I=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(V8I)
local real y1=GetUnitY(V8I)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real B92=JPI(x1,y1,x2,y2)
local integer WTI=GetUnitAbilityLevel(V8I,1093744435)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),1747990347,x1,y1,B92)
call KEI(GE,x1,y1)
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0.025,true)
call TriggerAddCondition(t,Condition(function EO4))
call RemoveLocation(l)
set t=null
set T0I=null
set g=null
set V8I=null
set l=null
endfunction
function E54 takes nothing returns boolean
if GetSpellAbilityId()==1093744435 then
call E44()
endif
return false
endfunction
function EH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E54))
set t=null
endfunction
function E64 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local integer E74
local integer i=1
local real x=GetUnitX(V8I)
local real y=GetUnitY(V8I)
local unit T0I
if GetSpellAbilityId()==1093677363 then
set E74=GetUnitAbilityLevel(V8I,1093677363)
else
set E74=GetUnitAbilityLevel(V8I,1093681462)+1
endif
loop
exitwhen i>18
set T0I=CreateUnit(GetOwningPlayer(V8I),1697657143,x,y,0)
call KKI(T0I,1093678391)
call SetUnitAbilityLevel(T0I,1093678391,E74)
call IssuePointOrder(T0I,"move",x+675*Cos(i*20*bj_DEGTORAD),y+675*Sin(i*20*bj_DEGTORAD))
call UnitApplyTimedLife(T0I,1112820806,1.15)
set i=i+1
endloop
set V8I=null
set T0I=null
endfunction
function E84 takes nothing returns boolean
if GetSpellAbilityId()==1093677363 or GetSpellAbilityId()==1093681462 then
call E64()
endif
return false
endfunction
function EZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E84))
set t=null
endfunction
function E94 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call PWI(XSI,0)
call SaveInteger(ZY,(GetHandleId((XSI))),((4277)),(2))
set t=null
set XSI=null
return false
endfunction
function EA4 takes unit SF1,unit XTI returns nothing
local real SN3=100*GetUnitState(XTI,UNIT_STATE_LIFE)/GetUnitState(XTI,UNIT_STATE_MAX_LIFE)
local integer Y0O=2*GetUnitAbilityLevel(SF1,1093746995)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveInteger(ZY,(GetHandleId((SF1))),((4277)),(1))
call TriggerRegisterTimerEvent(t,0.35,false)
call TriggerAddCondition(t,Condition(function E94))
call SaveUnitHandle(ZY,(V0I),(2),(SF1))
if IsUnitType(XTI,UNIT_TYPE_HERO)==false then
set Y0O=Y0O/2
endif
if SN3>80 then
call PWI(SF1,Y0O)
elseif SN3>60 then
call PWI(SF1,Y0O*2)
elseif SN3>40 then
call PWI(SF1,Y0O*2*2)
elseif SN3>20 then
call PWI(SF1,Y0O*2*2*2)
else
call PWI(SF1,Y0O*2*2*2*2)
endif
set t=null
endfunction
function EB4 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
if GetSpellAbilityId()==1093679446 and GetUnitAbilityLevel(GetTriggerUnit(),1093746995)>0 then
call EA4(GetTriggerUnit(),GetSpellTargetUnit())
endif
else
if GetUnitAbilityLevel(GetAttacker(),1093746995)>0 and IsUnitIllusion(GetAttacker())==false and IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true and((LoadInteger(ZY,(GetHandleId((GetAttacker()))),((4277))))==1)==false then
call EA4(GetAttacker(),GetTriggerUnit())
endif
endif
return false
endfunction
function EV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function EB4))
set t=null
endfunction
function EC4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real R12=(LoadReal(ZY,(GetHandleId(XTI)),(684)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or R12<(TimerGetElapsed(M))or XDI(XTI)then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SaveReal(ZY,(GetHandleId(XTI)),(684),((0)*1.0))
call UnitRemoveAbility(XTI,1093808983)
call UnitRemoveAbility(XTI,1093808981)
call UnitRemoveAbility(XTI,1093808982)
call UnitRemoveAbility(XTI,1093808984)
call UnitRemoveAbility(XTI,1110459713)
else
call XNI(XSI,XTI,1,5+5*WTI)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function ED4 takes nothing returns nothing
local trigger t
local integer V0I
local unit XSI=GetTriggerUnit()
local unit XTI=GetAttacker()
local real R12=(LoadReal(ZY,(GetHandleId(XTI)),(684)))
local integer WTI=GetUnitAbilityLevel(XSI,1093684557)
if R12>(TimerGetElapsed(M))then
call SaveReal(ZY,(GetHandleId(XTI)),(684),(((TimerGetElapsed(M))+3)*1.0))
else
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveReal(ZY,(GetHandleId(XTI)),(684),(((TimerGetElapsed(M))+3)*1.0))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerAddCondition(t,Condition(function EC4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
if NKI(XTI)==false then
if WTI==1 then
call KKI(XTI,1093808983)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093808983,false)
elseif WTI==2 then
call KKI(XTI,1093808981)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093808981,false)
elseif WTI==3 then
call KKI(XTI,1093808982)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093808982,false)
elseif WTI==4 then
call KKI(XTI,1093808984)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093808984,false)
endif
endif
endif
set t=null
set XSI=null
set XTI=null
endfunction
function EE4 takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),1093684557)>0 and GetUnitAbilityLevel(GetAttacker(),1093678162)==0 and IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and XDI(GetAttacker())==false then
call ED4()
endif
return false
endfunction
function EW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function EE4))
set t=null
endfunction
function EF4 takes nothing returns nothing
local unit XTI=GetSpellTargetUnit()
call UnitRemoveAbility(XTI,1111847784)
call UnitRemoveAbility(XTI,1110458705)
set XTI=null
endfunction
function EG4 takes nothing returns boolean
if GetSpellAbilityId()==1093679152 or GetSpellAbilityId()==1093752154 then
call EF4()
endif
return false
endfunction
function EX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EG4))
set t=null
endfunction
function EH4 takes nothing returns boolean
return GetSpellAbilityId()==1093679192
endfunction
function EZ4 takes nothing returns nothing
local location YV1=GetUnitLoc(GetSpellAbilityUnit())
call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetSpellAbilityUnit()),YV1,YV1)
call RemoveLocation(YV1)
call UnitAddAbility(bj_lastCreatedUnit,1093679427)
call SetUnitAbilityLevelSwapped(1093679427,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093679192,GetSpellAbilityUnit()))
call IssueTargetOrder(bj_lastCreatedUnit,"bloodlust",GetSpellAbilityUnit())
endfunction
function EJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EH4))
call TriggerAddAction(t,function EZ4)
endfunction
function EV4 takes unit XTI,integer EW4 returns nothing
call UnitRemoveAbility(XTI,1093750067)
call UnitRemoveAbility(XTI,1093750068)
call UnitRemoveAbility(XTI,1093750083)
call UnitRemoveAbility(XTI,1093750071)
call UnitRemoveAbility(XTI,1093750072)
call UnitRemoveAbility(XTI,1093750073)
call UnitRemoveAbility(XTI,1093750081)
call UnitRemoveAbility(XTI,1093750069)
call UnitRemoveAbility(XTI,1093750082)
call UnitRemoveAbility(XTI,1093750070)
if EW4==1 then
call KKI(XTI,1093750067)
elseif EW4==2 then
call KKI(XTI,1093750068)
elseif EW4==3 then
call KKI(XTI,1093750083)
elseif EW4==4 then
call KKI(XTI,1093750071)
elseif EW4==5 then
call KKI(XTI,1093750072)
elseif EW4==6 then
call KKI(XTI,1093750073)
elseif EW4==7 then
call KKI(XTI,1093750081)
elseif EW4==8 then
call KKI(XTI,1093750069)
elseif EW4==9 then
call KKI(XTI,1093750082)
elseif EW4==10 then
call KKI(XTI,1093750070)
endif
endfunction
function GravekeepersCloakEnemy_Decay takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer EW4
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set V0I=GetHandleId(XTI)
set EW4=(LoadInteger(ZY,(V0I),(427)))
set EW4=YTI(EW4-1,0)
call SaveInteger(ZY,(V0I),(427),(EW4))
call EV4(XTI,EW4)
set t=null
set XTI=null
return false
endfunction
function EX4 takes unit XSI,integer WTI,integer EY4 returns nothing
call UnitRemoveAbility(XSI,1093749586)
call UnitRemoveAbility(XSI,1093749587)
call UnitRemoveAbility(XSI,1093749585)
call UnitRemoveAbility(XSI,1093749584)
call UnitRemoveAbility(XSI,1093749553)
call UnitRemoveAbility(XSI,1093749591)
call UnitRemoveAbility(XSI,1093749592)
call UnitRemoveAbility(XSI,1093749593)
call UnitRemoveAbility(XSI,1093749812)
call UnitRemoveAbility(XSI,1093749811)
call UnitRemoveAbility(XSI,1093749810)
call UnitRemoveAbility(XSI,1093749809)
call UnitRemoveAbility(XSI,1093749816)
call UnitRemoveAbility(XSI,1093749815)
call UnitRemoveAbility(XSI,1093749817)
call UnitRemoveAbility(XSI,1093749826)
if WTI==1 then
if EY4==1 then
call KKI(XSI,1093749586)
elseif EY4==2 then
call KKI(XSI,1093749587)
elseif EY4==3 then
call KKI(XSI,1093749585)
elseif EY4==4 then
call KKI(XSI,1093749584)
endif
elseif WTI==2 then
if EY4==1 then
call KKI(XSI,1093749553)
elseif EY4==2 then
call KKI(XSI,1093749591)
elseif EY4==3 then
call KKI(XSI,1093749592)
elseif EY4==4 then
call KKI(XSI,1093749593)
endif
elseif WTI==3 then
if EY4==1 then
call KKI(XSI,1093749812)
elseif EY4==2 then
call KKI(XSI,1093749811)
elseif EY4==3 then
call KKI(XSI,1093749810)
elseif EY4==4 then
call KKI(XSI,1093749809)
endif
elseif WTI==4 then
if EY4==1 then
call KKI(XSI,1093749816)
elseif EY4==2 then
call KKI(XSI,1093749815)
elseif EY4==3 then
call KKI(XSI,1093749817)
elseif EY4==4 then
call KKI(XSI,1093749826)
endif
endif
endfunction
function EJ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer EK4=(LoadInteger(ZY,(V0I),(426)))
local unit XSI=(LoadUnitHandle(ZY,(EK4),(2)))
local integer EY4=(LoadInteger(ZY,(EK4),(425)))
local integer WTI=GetUnitAbilityLevel(XSI,1093686872)
set EY4=YSI(EY4+1,4)
call SaveInteger(ZY,(EK4),(425),(EY4))
call EX4(XSI,WTI,EY4)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function EL4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer EY4=(LoadInteger(ZY,(V0I),(425)))
local integer WTI=GetUnitAbilityLevel(GetTriggerUnit(),1093686872)
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and VSI(GetOwningPlayer(GetEventDamageSource()))then
if EY4>0 then
endif
set EY4=YTI(EY4-1,0)
call SaveInteger(ZY,(V0I),(425),(EY4))
call EX4(XSI,WTI,EY4)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,16-2*WTI,false)
call TriggerAddCondition(t,Condition(function EJ4))
call SaveInteger(ZY,(V0I),(426),(GetHandleId(GetTriggeringTrigger())))
endif
set t=null
set XSI=null
return false
endfunction
function EM4 takes nothing returns nothing
local trigger t
local integer V0I
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(GetTriggerUnit(),1093686872)
if WTI==1 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function EL4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(425),(4))
endif
call EX4(XSI,WTI,4)
set t=null
set XSI=null
endfunction
function EN4 takes nothing returns boolean
if GetLearnedSkill()==1093686872 and IsUnitIllusion(GetTriggerUnit())==false then
call EM4()
endif
return false
endfunction
function ES4 takes player p returns nothing
call SetPlayerAbilityAvailable(p,1093749586,false)
call SetPlayerAbilityAvailable(p,1093749587,false)
call SetPlayerAbilityAvailable(p,1093749585,false)
call SetPlayerAbilityAvailable(p,1093749584,false)
call SetPlayerAbilityAvailable(p,1093749589,false)
call SetPlayerAbilityAvailable(p,1093749590,false)
call SetPlayerAbilityAvailable(p,1093749553,false)
call SetPlayerAbilityAvailable(p,1093749591,false)
call SetPlayerAbilityAvailable(p,1093749592,false)
call SetPlayerAbilityAvailable(p,1093749593,false)
call SetPlayerAbilityAvailable(p,1093749594,false)
call SetPlayerAbilityAvailable(p,1093749588,false)
call SetPlayerAbilityAvailable(p,1093749812,false)
call SetPlayerAbilityAvailable(p,1093749811,false)
call SetPlayerAbilityAvailable(p,1093749810,false)
call SetPlayerAbilityAvailable(p,1093749809,false)
call SetPlayerAbilityAvailable(p,1093749808,false)
call SetPlayerAbilityAvailable(p,1093749813,false)
call SetPlayerAbilityAvailable(p,1093749816,false)
call SetPlayerAbilityAvailable(p,1093749815,false)
call SetPlayerAbilityAvailable(p,1093749817,false)
call SetPlayerAbilityAvailable(p,1093749826,false)
call SetPlayerAbilityAvailable(p,1093749825,false)
call SetPlayerAbilityAvailable(p,1093749814,false)
call SetPlayerAbilityAvailable(p,1093749832,false)
call SetPlayerAbilityAvailable(p,1093750067,false)
call SetPlayerAbilityAvailable(p,1093750068,false)
call SetPlayerAbilityAvailable(p,1093750083,false)
call SetPlayerAbilityAvailable(p,1093750071,false)
call SetPlayerAbilityAvailable(p,1093750072,false)
call SetPlayerAbilityAvailable(p,1093750073,false)
call SetPlayerAbilityAvailable(p,1093750081,false)
call SetPlayerAbilityAvailable(p,1093750069,false)
call SetPlayerAbilityAvailable(p,1093750082,false)
call SetPlayerAbilityAvailable(p,1093750070,false)
endfunction
function EL1 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
local player p
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function EN4))
loop
exitwhen i>5
set p=CO[i]
call ES4(p)
set p=DO[i]
call ES4(p)
set i=i+1
endloop
set t=null
endfunction
function ET4 takes nothing returns nothing
local integer WTI
local unit XSI=GetTriggerUnit()
local unit T0I
if GetUnitTypeId(XSI)==1966092599 or GetUnitTypeId(XSI)==1966092601 or GetUnitTypeId(XSI)==1966092600 or GetUnitTypeId(XSI)==1966092609 or GetUnitTypeId(XSI)==1966092610 or GetUnitTypeId(XSI)==1966092611 then
return
endif
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
if GetUnitTypeId(XSI)==1966092596 or GetUnitTypeId(XSI)==1966092612 then
set WTI=1
elseif GetUnitTypeId(XSI)==1966092597 or GetUnitTypeId(XSI)==1966092613 then
set WTI=2
else
set WTI=3
endif
call KKI(T0I,1093750342)
call SetUnitAbilityLevel(T0I,1093750342,WTI)
call IssueImmediateOrder(T0I,"stomp")
set XSI=null
set T0I=null
endfunction
function ER4 takes unit EP4,integer GJO,integer WTI returns nothing
local integer EQ4
if WTI==1 then
set EQ4=8
elseif WTI==2 then
set EQ4=14
elseif WTI==3 then
set EQ4=22
endif
call PWI(EP4,GJO*EQ4)
endfunction
function EU4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit EP4=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XSI=EP4
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer CI2=(LoadInteger(ZY,(V0I),(28)))
local integer GJO=(LoadInteger(ZY,(V0I),(194)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetAttacker()==EP4 then
set GJO=IMaxBJ(GJO-1,0)
call SaveInteger(ZY,(V0I),(194),(GJO))
call ER4(EP4,GJO,WTI)
endif
else
set CI2=CI2+1
call SaveInteger(ZY,(V0I),(28),(CI2))
if ModuloInteger(CI2,15)==0 then
set GJO=IMinBJ(GJO+1,7)
call SaveInteger(ZY,(V0I),(194),(GJO))
endif
if GetUnitTypeId(XSI)==1966092599 or GetUnitTypeId(XSI)==1966092601 or GetUnitTypeId(XSI)==1966092600 or GetUnitTypeId(XSI)==1966092609 or GetUnitTypeId(XSI)==1966092610 or GetUnitTypeId(XSI)==1966092611 then
set GJO=7
call SaveInteger(ZY,(V0I),(194),(GJO))
endif
call ER4(EP4,GJO,WTI)
if GetUnitTypeId(EP4)==1966092599 or GetUnitTypeId(EP4)==1966092601 or GetUnitTypeId(EP4)==1966092600 or GetUnitTypeId(EP4)==1966092609 or GetUnitTypeId(EP4)==1966092610 or GetUnitTypeId(EP4)==1966092611 then
call SetUnitState(EP4,UNIT_STATE_LIFE,GetUnitState(EP4,UNIT_STATE_LIFE)+31.25+18.75*WTI)
endif
endif
set t=null
set EP4=null
return false
endfunction
function F04 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1966092596 or GetUnitTypeId(GetFilterUnit())==1966092597 or GetUnitTypeId(GetFilterUnit())==1966092598 or GetUnitTypeId(GetFilterUnit())==1966092612 or GetUnitTypeId(GetFilterUnit())==1966092613 or GetUnitTypeId(GetFilterUnit())==1966092614 or GetUnitTypeId(GetFilterUnit())==1966092599 or GetUnitTypeId(GetFilterUnit())==1966092601 or GetUnitTypeId(GetFilterUnit())==1966092600 or GetUnitTypeId(GetFilterUnit())==1966092609 or GetUnitTypeId(GetFilterUnit())==1966092610 or GetUnitTypeId(GetFilterUnit())==1966092611 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function FI4 takes nothing returns nothing
local group g=ZJI()
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local integer WTI=GetUnitAbilityLevel(XSI,1093750341)
local unit F14
local unit FO4
local trigger t
local integer V0I
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(XSI),Condition(function F04))
call ZYI(g)
if WTI==1 then
set F14=CreateUnit(GetOwningPlayer(XSI),1966092596,x+75,y+75,GetUnitFacing(XSI))
set FO4=CreateUnit(GetOwningPlayer(XSI),1966092612,x-75,y-75,GetUnitFacing(XSI))
elseif WTI==2 then
set F14=CreateUnit(GetOwningPlayer(XSI),1966092597,x+75,y+75,GetUnitFacing(XSI))
set FO4=CreateUnit(GetOwningPlayer(XSI),1966092613,x-75,y-75,GetUnitFacing(XSI))
elseif WTI==3 then
set F14=CreateUnit(GetOwningPlayer(XSI),1966092598,x+75,y+75,GetUnitFacing(XSI))
set FO4=CreateUnit(GetOwningPlayer(XSI),1966092614,x-75,y-75,GetUnitFacing(XSI))
endif
call SelectUnitAddForPlayer(F14,GetOwningPlayer(XSI))
call SelectUnitAddForPlayer(FO4,GetOwningPlayer(XSI))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",F14,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",FO4,"origin"))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,F14,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function EU4))
call SaveUnitHandle(ZY,(V0I),(2),(F14))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(28),(0))
call SaveInteger(ZY,(V0I),(194),(7))
call ER4(F14,7,WTI)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,FO4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function EU4))
call SaveUnitHandle(ZY,(V0I),(2),(FO4))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(28),(0))
call SaveInteger(ZY,(V0I),(194),(7))
call ER4(FO4,7,WTI)
set g=null
set XSI=null
set F14=null
set FO4=null
endfunction
function F24 takes nothing returns boolean
if GetSpellAbilityId()==1093750341 then
call FI4()
elseif GetSpellAbilityId()==1093750338 or GetSpellAbilityId()==1093750339 or GetSpellAbilityId()==1093750340 or GetSpellAbilityId()==1093750348 or GetSpellAbilityId()==1093750349 or GetSpellAbilityId()==1093750350 then
call ET4()
endif
return false
endfunction
function EY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F24))
set t=null
endfunction
function F34 takes unit XSI,integer F44,integer F54 returns nothing
local string c1="|c0000cc00"
local string c="||"
local string p=" "
local string s=c1+"|||r"
local string RRI
local boolean SP3=false
local texttag tt=(LoadTextTagHandle(ZY,(GetHandleId(XSI)),(451)))
if F44==0 then
set RRI=" "
elseif F54==1 then
if F44==0 then
set RRI=c+p+c+p+c
elseif F44==1 then
set RRI=s+p+c+p+c
elseif F44==2 then
set RRI=s+p+s+p+c
elseif F44==3 then
set RRI=s+p+s+p+s
endif
elseif F54==2 then
if F44==0 then
set RRI=c+p+c+p+c+p+c
elseif F44==1 then
set RRI=s+p+c+p+c+p+c
elseif F44==2 then
set RRI=s+p+s+p+c+p+c
elseif F44==3 then
set RRI=s+p+s+p+s+p+c
elseif F44==4 then
set RRI=s+p+s+p+s+p+s
endif
elseif F54==3 then
if F44==0 then
set RRI=c+p+c+p+c+p+c+p+c
elseif F44==1 then
set RRI=s+p+c+p+c+p+c+p+c
elseif F44==2 then
set RRI=s+p+s+p+c+p+c+p+c
elseif F44==3 then
set RRI=s+p+s+p+s+p+c+p+c
elseif F44==4 then
set RRI=s+p+s+p+s+p+s+p+c
elseif F44==5 then
set RRI=s+p+s+p+s+p+s+p+s
endif
elseif F54==4 then
if F44==0 then
set RRI=c+p+c+p+c+p+c+p+c+p+c
elseif F44==1 then
set RRI=s+p+c+p+c+p+c+p+c+p+c
elseif F44==2 then
set RRI=s+p+s+p+c+p+c+p+c+p+c
elseif F44==3 then
set RRI=s+p+s+p+s+p+c+p+c+p+c
elseif F44==4 then
set RRI=s+p+s+p+s+p+s+p+c+p+c
elseif F44==5 then
set RRI=s+p+s+p+s+p+s+p+s+p+c
elseif F44==6 then
set RRI=s+p+s+p+s+p+s+p+s+p+s
endif
endif
call SetTextTagText(tt,RRI,0.023)
if GetOwningPlayer(XSI)==GetLocalPlayer()then
set SP3=true
endif
if KMI(XSI)then
set SP3=false
endif
call SetTextTagPosUnit(tt,XSI,0)
call SetTextTagVisibility(tt,SP3)
call SetTextTagPermanent(tt,true)
endfunction
function F64 takes unit V8I,integer WTI returns nothing
local integer F54=GetUnitAbilityLevel(V8I,1093750337)
call F34(V8I,WTI,F54)
if WTI==0 or((LoadInteger(ZY,(GetHandleId((V8I))),((2484))))==1)==true then
call UnitRemoveAbility(V8I,1093750583)
call UnitRemoveAbility(V8I,1093750584)
call UnitRemoveAbility(V8I,1093750585)
call KKI(V8I,1093750577)
call UnitRemoveAbility(V8I,1093750578)
call UnitRemoveAbility(V8I,1093750362)
call UnitRemoveAbility(V8I,1093750329)
call UnitRemoveAbility(V8I,1093750361)
call UnitRemoveAbility(V8I,1093750576)
call UnitRemoveAbility(V8I,1093750579)
call UnitRemoveAbility(V8I,1093684306)
call UnitRemoveAbility(V8I,1093687632)
call UnitRemoveAbility(V8I,1093685063)
call UnitRemoveAbility(V8I,1093687631)
call UnitRemoveAbility(V8I,1093684806)
call UnitRemoveAbility(V8I,1093684548)
elseif WTI==1 then
call UnitRemoveAbility(V8I,1093750583)
call UnitRemoveAbility(V8I,1093750584)
call UnitRemoveAbility(V8I,1093750585)
call UnitRemoveAbility(V8I,1093750577)
call KKI(V8I,1093750578)
call UnitRemoveAbility(V8I,1093750362)
call UnitRemoveAbility(V8I,1093750329)
call UnitRemoveAbility(V8I,1093750361)
call UnitRemoveAbility(V8I,1093750576)
call UnitRemoveAbility(V8I,1093750579)
call KKI(V8I,1093684306)
call UnitRemoveAbility(V8I,1093687632)
call UnitRemoveAbility(V8I,1093685063)
call UnitRemoveAbility(V8I,1093687631)
call UnitRemoveAbility(V8I,1093684806)
call UnitRemoveAbility(V8I,1093684548)
elseif WTI==2 then
call UnitRemoveAbility(V8I,1093750583)
call UnitRemoveAbility(V8I,1093750584)
call UnitRemoveAbility(V8I,1093750585)
call UnitRemoveAbility(V8I,1093750577)
call UnitRemoveAbility(V8I,1093750578)
call KKI(V8I,1093750362)
call UnitRemoveAbility(V8I,1093750329)
call UnitRemoveAbility(V8I,1093750361)
call UnitRemoveAbility(V8I,1093750576)
call UnitRemoveAbility(V8I,1093750579)
call UnitRemoveAbility(V8I,1093684306)
call KKI(V8I,1093687632)
call UnitRemoveAbility(V8I,1093685063)
call UnitRemoveAbility(V8I,1093687631)
call UnitRemoveAbility(V8I,1093684806)
call UnitRemoveAbility(V8I,1093684548)
elseif WTI==3 then
call UnitRemoveAbility(V8I,1093750583)
call UnitRemoveAbility(V8I,1093750584)
call UnitRemoveAbility(V8I,1093750585)
call UnitRemoveAbility(V8I,1093684306)
call UnitRemoveAbility(V8I,1093687632)
call KKI(V8I,1093685063)
call UnitRemoveAbility(V8I,1093687631)
call UnitRemoveAbility(V8I,1093684806)
call UnitRemoveAbility(V8I,1093684548)
call UnitRemoveAbility(V8I,1093750577)
call UnitRemoveAbility(V8I,1093750578)
call UnitRemoveAbility(V8I,1093750362)
call UnitRemoveAbility(V8I,1093750329)
call UnitRemoveAbility(V8I,1093750361)
call UnitRemoveAbility(V8I,1093750576)
call UnitRemoveAbility(V8I,1093750579)
if F54==1 then
call KKI(V8I,1093750583)
else
call KKI(V8I,1093750329)
endif
elseif WTI==4 then
call UnitRemoveAbility(V8I,1093750583)
call UnitRemoveAbility(V8I,1093750584)
call UnitRemoveAbility(V8I,1093750585)
call UnitRemoveAbility(V8I,1093684306)
call UnitRemoveAbility(V8I,1093687632)
call UnitRemoveAbility(V8I,1093685063)
call KKI(V8I,1093687631)
call UnitRemoveAbility(V8I,1093684806)
call UnitRemoveAbility(V8I,1093684548)
call UnitRemoveAbility(V8I,1093750577)
call UnitRemoveAbility(V8I,1093750578)
call UnitRemoveAbility(V8I,1093750362)
call UnitRemoveAbility(V8I,1093750329)
call UnitRemoveAbility(V8I,1093750361)
call UnitRemoveAbility(V8I,1093750576)
call UnitRemoveAbility(V8I,1093750579)
if F54==2 then
call KKI(V8I,1093750584)
else
call KKI(V8I,1093750361)
endif
elseif WTI==5 then
call UnitRemoveAbility(V8I,1093750583)
call UnitRemoveAbility(V8I,1093750584)
call UnitRemoveAbility(V8I,1093750585)
call UnitRemoveAbility(V8I,1093750577)
call UnitRemoveAbility(V8I,1093750578)
call UnitRemoveAbility(V8I,1093750362)
call UnitRemoveAbility(V8I,1093750329)
call UnitRemoveAbility(V8I,1093750361)
call KKI(V8I,1093750576)
call UnitRemoveAbility(V8I,1093750579)
call UnitRemoveAbility(V8I,1093684306)
call UnitRemoveAbility(V8I,1093687632)
call UnitRemoveAbility(V8I,1093685063)
call UnitRemoveAbility(V8I,1093687631)
call KKI(V8I,1093684806)
call UnitRemoveAbility(V8I,1093684548)
call UnitRemoveAbility(V8I,1093750577)
call UnitRemoveAbility(V8I,1093750578)
call UnitRemoveAbility(V8I,1093750362)
call UnitRemoveAbility(V8I,1093750329)
call UnitRemoveAbility(V8I,1093750361)
call UnitRemoveAbility(V8I,1093750576)
call UnitRemoveAbility(V8I,1093750579)
if F54==3 then
call KKI(V8I,1093750585)
else
call KKI(V8I,1093750576)
endif
elseif WTI==6 then
call UnitRemoveAbility(V8I,1093750583)
call UnitRemoveAbility(V8I,1093750584)
call UnitRemoveAbility(V8I,1093750585)
call UnitRemoveAbility(V8I,1093750577)
call UnitRemoveAbility(V8I,1093750578)
call UnitRemoveAbility(V8I,1093750362)
call UnitRemoveAbility(V8I,1093750329)
call UnitRemoveAbility(V8I,1093750361)
call UnitRemoveAbility(V8I,1093750576)
call KKI(V8I,1093750579)
call UnitRemoveAbility(V8I,1093684306)
call UnitRemoveAbility(V8I,1093687632)
call UnitRemoveAbility(V8I,1093685063)
call UnitRemoveAbility(V8I,1093687631)
call UnitRemoveAbility(V8I,1093684806)
call KKI(V8I,1093684548)
endif
if(GetUnitAbilityLevel(V8I,1093750337)+2)==WTI then
call KKI(V8I,1093750346)
else
call UnitRemoveAbility(V8I,1093750346)
endif
endfunction
function F74 takes unit XSI,real XPI returns nothing
local integer WTI=0
local real F84=110
if XPI>F84*6 then
set WTI=6
elseif XPI>F84*5 then
set WTI=5
elseif XPI>F84*4 then
set WTI=4
elseif XPI>F84*3 then
set WTI=3
elseif XPI>F84*2 then
set WTI=2
elseif XPI>F84*1 then
set WTI=1
endif
set WTI=YSI(WTI,2+GetUnitAbilityLevel(XSI,1093750337))
call SaveInteger(ZY,(GetHandleId(XSI)),(450),(WTI))
call F64(XSI,WTI)
endfunction
function F94 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer F54=GetUnitAbilityLevel(XSI,1093750337)
call F34(XSI,(LoadInteger(ZY,(GetHandleId((XSI))),(450))),F54)
call F74(XSI,(LoadReal(ZY,(GetHandleId(XSI)),(443))))
set t=null
set XSI=null
return false
endfunction
function FA4 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=OK
local unit XTI=AK
local real XPI=(LoadReal(ZY,(V0I),(20)))
if IsUnitAlly(XTI,GetOwningPlayer(XSI))==false then
set ECI=true
call XNI(XSI,XTI,1,XPI)
set ECI=false
else
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)+XPI)
endif
set XSI=null
set XTI=null
endfunction
function FB4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call F74(XSI,(LoadReal(ZY,(GetHandleId(XSI)),(443))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function FC4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=(LoadInteger(ZY,(GetHandleId((XSI))),(450)))
local trigger t=LII(XSI,XTI,1747993157,"FA4",1000)
local integer V0I=GetHandleId(t)
call SaveReal(ZY,(V0I),(20),((20+WTI*60)*1.0))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AntiMagicShell\\AntiMagicShell.mdl",XSI,"chest"))
call SaveReal(ZY,(GetHandleId(XSI)),(443),((0)*1.0))
call F74(XSI,0)
call V5I(XSI,2484,4)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerAddCondition(t,Condition(function FB4))
call TriggerRegisterTimerEvent(t,4,false)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
set XTI=null
set t=null
endfunction
function FD4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real XPI=(LoadReal(ZY,(V0I),(20)))
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093750337)then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call SaveReal(ZY,(GetHandleId(XSI)),(443),(((LoadReal(ZY,(GetHandleId(XSI)),(443)))-XPI)*1.0))
endif
call F74(XSI,(LoadReal(ZY,(GetHandleId(XSI)),(443))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function FE4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer V0I=GetHandleId(XSI)
local texttag tt=CreateTextTag()
local boolean SP3=false
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function F94))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(XSI))
if GetOwningPlayer(XSI)==GetLocalPlayer()then
set SP3=true
endif
call SetTextTagText(tt," ",0.023)
call SetTextTagPosUnit(tt,XSI,0)
call SetTextTagVisibility(tt,SP3)
call SetTextTagPermanent(tt,true)
set EBI[GetPlayerId(GetOwningPlayer(XSI))]=XSI
call SaveReal(ZY,(V0I),(443),((0)*1.0))
call F74(XSI,0)
call SaveTextTagHandle(ZY,(V0I),(451),(tt))
set XSI=null
set t=null
set tt=null
endfunction
function FF4 takes unit FG4,unit FH4 returns nothing
local real XPI=GetEventDamage()
local integer WTI=GetUnitAbilityLevel(FG4,1093750337)
local real FZ4=(LoadReal(ZY,(GetHandleId(FG4)),(443)))
local trigger t
local integer V0I
if J8I(FG4,FH4)<1400 and ECI==false then
if XHI(XPI)and GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and(VSI(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())==1848651852)then
set FZ4=FZ4+XPI
call SaveReal(ZY,(GetHandleId(FG4)),(443),((FZ4)*1.0))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(FG4))
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
call TriggerRegisterTimerEvent(t,6,false)
call TriggerRegisterUnitEvent(t,FG4,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,FG4,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FD4))
call F74(FG4,FZ4)
endif
endif
set t=null
endfunction
function FV4 takes nothing returns nothing
local integer i=0
loop
exitwhen i>12
if EBI[i]!=null then
call FF4(EBI[i],GetTriggerUnit())
endif
set i=i+1
endloop
endfunction
function FW4 takes nothing returns boolean
if GetLearnedSkill()==1093750337 and GetUnitAbilityLevel(GetTriggerUnit(),1093750337)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call FE4()
endif
return false
endfunction
function FX4 takes nothing returns boolean
if GetSpellAbilityId()==1093750337 then
call FC4()
endif
return false
endfunction
function EK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function FW4))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FX4))
set t=null
call GRO("FV4")
endfunction
constant function Upheaval_RawCode takes nothing returns integer
return 1093678672
endfunction
constant function Upheaval_EffectCode takes nothing returns integer
return 1093683781
endfunction
constant function Upheaval_EffectModel takes nothing returns integer
return 1697657159
endfunction
function FY4 takes nothing returns boolean
return GetSpellAbilityId()==(1093678672)
endfunction
function FJ4 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(YO))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1
endfunction
function FK4 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local unit T0I=CreateUnit(GetOwningPlayer(YO),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,(1093683781))
call SetUnitAbilityLevel(T0I,(1093683781),JO)
call IssueTargetOrder(T0I,"slow",XTI)
endfunction
function FL4 takes unit T0I,unit V8I returns nothing
local group U4I=ZJI()
local boolexpr VE1=Condition(function FJ4)
set YO=V8I
call GroupEnumUnitsInRange(U4I,GetUnitX(T0I),GetUnitY(T0I),675,VE1)
call ForGroup(U4I,function FK4)
call ZYI(U4I)
endfunction
function FM4 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI((t))
elseif GetTriggerEvalCount(t)>22 then
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI((t))
call Y8I((LoadUnitHandle(ZY,(V0I),(14))))
else
call SetUnitAnimation(T0I,"birth")
set V8I=(LoadUnitHandle(ZY,(V0I),(14)))
set JO=GetTriggerExecCount(t)*GetUnitAbilityLevel(V8I,(1093678672))/2
call FL4(T0I,V8I)
endif
set t=null
set T0I=null
set V8I=null
endfunction
function FN4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local location YV1=GetSpellTargetLoc()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real x=GetLocationX(YV1)
local real y=GetLocationY(YV1)
local unit T0I=CreateUnit(GetOwningPlayer(V8I),(1697657159),x,y,0)
call RemoveLocation(YV1)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddAction(t,function FM4)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
endfunction
function FZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function FN4)
call TriggerAddCondition(t,Condition(function FY4))
call YVI((1093683781))
endfunction
constant function FatalBonds_RawCode takes nothing returns integer
return 1093683765
endfunction
constant function FatalBonds_IconAbility takes nothing returns integer
return 1093683769
endfunction
constant function FatalBonds_Icon takes nothing returns integer
return 1093685298
endfunction
function FS4 takes nothing returns boolean
return GetSpellAbilityId()==(1093683765)
endfunction
function FT4 takes nothing returns nothing
call KKI(GetEnumUnit(),(1093685298))
endfunction
function FR4 takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),(1093685298))
endfunction
function FP4 takes unit FQ4,unit FU4 returns nothing
if FQ4!=null and FU4!=null then
call JUI("CLPB",GetUnitX(FQ4),GetUnitY(FQ4),GetUnitX(FU4),GetUnitY(FU4),0.7,0.1,0.9,1,0.3)
endif
endfunction
function G04 takes nothing returns nothing
local unit V8I=(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))
local real XPI=0.2*GetEventDamage()
set XPI=YPI(XPI,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE))
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>1 and GetEnumUnit()!=GetTriggerUnit()then
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<XPI then
call XNI(V8I,GetEnumUnit(),3,XPI)
else
call MFI(GetEnumUnit(),XPI)
endif
endif
endfunction
function GI4 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local group U4I=(LoadGroupHandle(ZY,(V0I),(220)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call ForGroup(U4I,function FR4)
call FlushChildHashtable(ZY,(V0I))
call ZYI(U4I)
call ZSI((t))
elseif GetEventDamage()>10 and GetEventDamage()<6000 then
call DisableTrigger(t)
call ForGroup(U4I,function G04)
call EnableTrigger(t)
endif
endfunction
function G14 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1
endfunction
function GO4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local group U4I=ZJI()
local integer WTI=GetUnitAbilityLevel(V8I,(1093683765))
local boolexpr VE1=Condition(function G14)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer i=2
local group XQ3=ZJI()
local unit array G24
local string G34="Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl"
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call FP4(V8I,XTI)
call JWI(G34,XTI,"overhead",25)
set G24[1]=XTI
call SaveUnitHandle(ZY,(V0I),(246),(G24[1]))
call TriggerRegisterUnitEvent(t,G24[1],EVENT_UNIT_DAMAGED)
call GroupEnumUnitsInRange(U4I,GetUnitX(XTI),GetUnitY(XTI),600,VE1)
call GroupRemoveUnit(U4I,XTI)
call GroupAddUnit(XQ3,XTI)
call SaveGroupHandle(ZY,(V0I),(220),(XQ3))
loop
exitwhen i>(2+WTI)or FirstOfGroup(U4I)==null
set G24[i]=FirstOfGroup(U4I)
call FP4(G24[i-1],G24[i])
call TriggerRegisterUnitEvent(t,G24[i],EVENT_UNIT_DAMAGED)
call GroupAddUnit(XQ3,G24[i])
call GroupRemoveUnit(U4I,G24[i])
call JWI(G34,G24[i],"overhead",25)
set i=i+1
endloop
call SaveInteger(ZY,(V0I),(245),(i-1))
set JO=GetUnitAbilityLevel(V8I,(1093683765))
call ForGroup(XQ3,function FT4)
call TriggerRegisterTimerEvent(t,25,false)
call TriggerAddAction(t,function GI4)
call ZYI(U4I)
endfunction
function FV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FS4))
call TriggerAddAction(t,function GO4)
call YVI((1093683769))
endfunction
function G44 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,1093681491)
if GetTriggerEvalCount(t)>8 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call UnitRemoveAbility(XTI,1093744459)
call UnitRemoveAbility(XTI,1110458704)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call XNI(XSI,XTI,1,WTI*10)
endif
set XSI=null
set XTI=null
set t=null
return false
endfunction
function G54 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,1093681491)
if GetTriggerEvalCount(t)>8 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call UnitRemoveAbility(XTI,1093685296)
call UnitRemoveAbility(XTI,1110456115)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call JGI(XTI,WTI*10)
endif
set XSI=null
set XTI=null
set t=null
return false
endfunction
function G64 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
if IsUnitAlly(XTI,GetOwningPlayer(XSI))then
call TriggerAddCondition(t,Condition(function G54))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl",XTI,"chest")))
call KKI(XTI,1093685296)
elseif ZXI(GetSpellTargetUnit())==false then
call TriggerAddCondition(t,Condition(function G44))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl",XTI,"overhead")))
call KKI(XTI,1093744459)
endif
set XSI=null
set XTI=null
set t=null
endfunction
function G74 takes nothing returns boolean
if GetSpellAbilityId()==1093681491 then
call G64()
endif
return false
endfunction
function FW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G74))
call YVI(1093685296)
call YVI(1093744459)
set t=null
endfunction
function G84 takes nothing returns nothing
call XNI(EDI,GetEnumUnit(),1,10+10*EEI)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl",GetEnumUnit(),"head"))
endfunction
function G94 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI
local integer WJI=GetUnitTypeId(XSI)
local group g
if WJI==1848651861 or WJI==1848658773 then
set WTI=1
elseif WJI==1848651865 or WJI==1848658774 then
set WTI=2
elseif WJI==1848651866 or WJI==1848658775 then
set WTI=3
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set OK=XSI
set EDI=XSI
set EEI=WTI
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),275,Condition(function SOI))
call ForGroup(g,function G84)
call ZYI(g)
set g=null
endif
set t=null
set XSI=null
return false
endfunction
function GA4 takes unit u returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G94))
call SaveUnitHandle(ZY,(V0I),(2),(u))
set t=null
endfunction
function GB4 takes nothing returns boolean
local integer WJI=GetUnitTypeId(GetTriggerUnit())
if WJI==1848651861 or WJI==1848658773 or WJI==1848651865 or WJI==1848658774 or WJI==1848651866 or WJI==1848658775 then
call GA4(GetTriggerUnit())
endif
return false
endfunction
function GC4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local real G42=(LoadReal(ZY,(V0I),(191)))
local real G52=(LoadReal(ZY,(V0I),(192)))
local integer WTI=GetUnitAbilityLevel(XSI,1395667029)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,G42,G52,0)
call KKI(T0I,1395667029)
call SetUnitAbilityLevel(T0I,1395667029,WTI)
call IssuePointOrderById(T0I,852224,x,y)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set XSI=null
set T0I=null
set t=null
return false
endfunction
function GD4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.3,false)
call TriggerAddCondition(t,Condition(function GC4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((GetSpellTargetX())*1.0))
call SaveReal(ZY,(V0I),(7),((GetSpellTargetY())*1.0))
call SaveReal(ZY,(V0I),(191),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(192),((GetUnitY(XSI))*1.0))
set XSI=null
set t=null
endfunction
function GE4 takes nothing returns boolean
if GetSpellAbilityId()==1395667029 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call GD4()
endif
return false
endfunction
function FX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GE4))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function GB4))
set t=null
endfunction
function GF4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if GetUnitAbilityLevel(V8I,1112041075)==0 then
call UnitRemoveAbility(V8I,1093681977)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set V8I=null
return false
endfunction
function GG4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=GetTriggerUnit()
call KKI(V8I,1093681977)
call SetUnitAbilityLevel(V8I,1093681977,GetUnitAbilityLevel(V8I,1093681985))
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerAddCondition(t,Condition(function GF4))
set V8I=null
set t=null
endfunction
function GH4 takes nothing returns boolean
if GetSpellAbilityId()==1093681985 then
call GG4()
endif
return false
endfunction
function EM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GH4))
endfunction
function GZ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
call SetUnitState((LoadUnitHandle(ZY,(V0I),(26))),UNIT_STATE_MANA,(LoadReal(ZY,(V0I),(242))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
return false
endfunction
function GV4 takes unit u,real GW4 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function GZ4))
call SaveUnitHandle(ZY,(V0I),(26),(u))
call SaveReal(ZY,(V0I),(242),((GW4)*1.0))
set t=null
endfunction
function GX4 takes nothing returns boolean
return GetSpellAbilityId()==1093682004
endfunction
function GY4 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggerUnit())
local real EL3=YQI((LoadReal(ZY,(V0I),(7200+1))),1)
local real H1O=YQI((LoadReal(ZY,(V0I),(7250+1))),1)
local real x=(LoadReal(ZY,(V0I),(7300+1)))
local real y=(LoadReal(ZY,(V0I),(7350+1)))
local unit Y9I=GetTriggerUnit()
if(LoadReal(ZY,(V0I),(7200+1)))>1 and GetUnitState(Y9I,UNIT_STATE_LIFE)>1 then
call AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",GetUnitX(Y9I),GetUnitY(Y9I))
call SetUnitX(Y9I,x)
call SetUnitY(Y9I,y)
call SetUnitState(Y9I,UNIT_STATE_LIFE,EL3)
call SetUnitState(Y9I,UNIT_STATE_MANA,H1O)
call UnitRemoveBuffs(Y9I,false,true)
call TYI(Y9I)
call GV4(Y9I,H1O)
endif
endfunction
function EN1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GX4))
call TriggerAddAction(t,function GY4)
endfunction
function GJ4 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit Y9I=(LoadUnitHandle(ZY,(GetHandleId(t)),(221)))
local integer V0I=GetHandleId(Y9I)
local integer W5I=1
local integer W6I=10
loop
exitwhen W5I>W6I
call SaveReal(ZY,(V0I),(7300+(W5I-1)),(((LoadReal(ZY,(V0I),(7300+(W5I)))))*1.0))
call SaveReal(ZY,(V0I),(7350+(W5I-1)),(((LoadReal(ZY,(V0I),(7350+(W5I)))))*1.0))
call SaveReal(ZY,(V0I),(7200+(W5I-1)),(((LoadReal(ZY,(V0I),(7200+(W5I)))))*1.0))
call SaveReal(ZY,(V0I),(7250+(W5I-1)),(((LoadReal(ZY,(V0I),(7250+(W5I)))))*1.0))
set W5I=W5I+1
endloop
call SaveReal(ZY,(V0I),(7300+10),((GetUnitX(Y9I))*1.0))
call SaveReal(ZY,(V0I),(7350+10),((GetUnitY(Y9I))*1.0))
call SaveReal(ZY,(V0I),(7200+10),((GetUnitState(Y9I,UNIT_STATE_LIFE))*1.0))
call SaveReal(ZY,(V0I),(7250+10),((GetUnitState(Y9I,UNIT_STATE_MANA))*1.0))
endfunction
function TimeLapseLearn_Conditions takes nothing returns boolean
return GetLearnedSkill()==1093682004 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function KH3 takes nothing returns nothing
local unit Y9I=OK
local integer WTI=GetUnitAbilityLevel(Y9I,1093682004)
local trigger t
set t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,0.50)
call TriggerAddAction(t,function GJ4)
call SaveUnitHandle(ZY,(GetHandleId(t)),(221),(Y9I))
endfunction
function ES1 takes nothing returns nothing
endfunction
function GK4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real d=(LoadReal(ZY,(V0I),(138)))
local real GL4=(LoadReal(ZY,(GetHandleId(XSI)),(508)))-d
local fogmodifier KHI=(LoadFogModifierHandle(ZY,(V0I),(42)))
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
call SaveReal(ZY,(GetHandleId(XSI)),(508),((GL4)*1.0))
call PWI(XSI,R2I(GL4/100.0*(0.3*GetUnitAbilityLevel(XSI,1093751095))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function GM4 takes unit XSI,real d returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real GL4=(LoadReal(ZY,(GetHandleId(XSI)),(508)))+d
local fogmodifier KHI=CreateFogModifierRadius(GetOwningPlayer(XSI),FOG_OF_WAR_VISIBLE,GetUnitX(XSI),GetUnitY(XSI),400,true,true)
call FogModifierStart(KHI)
call SaveReal(ZY,(GetHandleId(XSI)),(508),((GL4)*1.0))
call PWI(XSI,R2I(GL4/100.0*(0.6*GetUnitAbilityLevel(XSI,1093751095))))
call TriggerRegisterTimerEvent(t,10,false)
call TriggerAddCondition(t,Condition(function GK4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(138),((d)*1.0))
call SaveFogModifierHandle(ZY,(V0I),(42),(KHI))
set t=null
endfunction
function GN4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real DG2=GetUnitX(XSI)
local real DH2=GetUnitY(XSI)
local real d=JAI(DE2,DF2,DG2,DH2)
if d<1500 then
call GM4(XSI,d)
else
call GM4(XSI,1500)
endif
call SaveReal(ZY,(V0I),(23),((DG2)*1.0))
call SaveReal(ZY,(V0I),(24),((DH2)*1.0))
set t=null
set XSI=null
return false
endfunction
function GS4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function GN4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XSI))*1.0))
call SaveReal(ZY,(GetHandleId(XSI)),(508),((0)*1.0))
set t=null
set XSI=null
endfunction
function GT4 takes nothing returns boolean
if GetLearnedSkill()==1093751095 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093751095)==1 then
call GS4()
endif
return false
endfunction
function Register_EchoStep takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function GT4))
set t=null
endfunction
function GR4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(XTI,1093751130)
call SaveInteger(ZY,(GetHandleId((XTI))),((4290)),(2))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerUnit()==XTI then
call KillUnit(XSI)
endif
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI then
call SetUnitAbilityLevel(XTI,1093751130,GetUnitAbilityLevel(XTI,1093751130)+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",XTI,"chest"))
endif
else
call SetUnitX(XSI,GetUnitX(XTI)-40)
call SetUnitY(XSI,GetUnitY(XTI)-40)
if NSI(XTI)and IsUnitVisible(XTI,GetOwningPlayer(XSI))==false then
call KillUnit(XSI)
elseif ModuloInteger(GetTriggerEvalCount(t),5)==0 then
call IssueTargetOrder(XSI,"attack",XTI)
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function GP4 takes unit GQ4,unit XTI,integer WTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call UnitRemoveAbility(GQ4,1098282348)
call SaveUnitHandle(ZY,(V0I),(2),(GQ4))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call KKI(XTI,1093751130)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,GQ4,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function GR4))
call TriggerEvaluate(t)
call UnitApplyTimedLife(GQ4,1112820806,4+4*WTI)
set t=null
endfunction
function GU4 takes nothing returns boolean
return(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and((LoadInteger(ZY,(GetHandleId((GetFilterUnit()))),((4290))))==1)==false and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(OK))==true or NSI(GetFilterUnit())==false)
endfunction
function H04 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local group g
local integer i=1
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local real a=(LoadReal(ZY,(V0I),(137)))
local unit GQ4
local unit XTI
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
set x=YEI(x+18*Cos(a))
set y=YHI(y+18*Sin(a))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
if GetTriggerEvalCount(t)>166 then
loop
exitwhen i>12
if(LoadBoolean(ZY,(V0I),(511+i-1)))==false then
call KillUnit((LoadUnitHandle(ZY,(V0I),(393+i-1))))
endif
set i=i+1
endloop
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,400,Condition(function GU4))
loop
exitwhen i>12
if(LoadBoolean(ZY,(V0I),(511+i-1)))==false then
set GQ4=(LoadUnitHandle(ZY,(V0I),(393+i-1)))
set x=(LoadReal(ZY,(V0I),(549+i-1)))
set y=(LoadReal(ZY,(V0I),(567+i-1)))
set x=YEI(x+18*Cos(a))
set y=YHI(y+18*Sin(a))
call SaveReal(ZY,(V0I),(549+i-1),((x)*1.0))
call SaveReal(ZY,(V0I),(567+i-1),((y)*1.0))
call SetUnitX(GQ4,x)
call SetUnitY(GQ4,y)
set XTI=FirstOfGroup(g)
if XTI!=null then
call GroupRemoveUnit(g,XTI)
call SaveInteger(ZY,(GetHandleId((XTI))),((4290)),(1))
call SaveBoolean(ZY,(V0I),(511+i-1),(true))
call GP4(GQ4,XTI,GetUnitAbilityLevel(XSI,1093751127))
endif
endif
set i=i+1
endloop
call ZYI(g)
set g=null
set GQ4=null
set XTI=null
endif
set t=null
set XSI=null
return false
endfunction
function HI4 takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real J6I=GetLocationX(l)
local real J7I=GetLocationY(l)
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local real a=JPI(x,y,J6I,J7I)*bj_DEGTORAD
local unit T0I
local real KUI=YEI(x+3000*Cos(a))
local real L0I=YHI(y+3000*Sin(a))
local integer i=1
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real T8I
local integer WTI=GetUnitAbilityLevel(XSI,1093751127)
local integer WJI
call RemoveLocation(l)
if WTI==1 then
set WJI=1966092619
elseif WTI==2 then
set WJI=1966092616
elseif WTI==3 then
set WJI=1966092618
elseif WTI==4 then
set WJI=1966092620
endif
loop
exitwhen i>12
set T0I=CreateUnit(GetOwningPlayer(XSI),WJI,x+GetRandomInt(-300,300),y+GetRandomInt(-300,300),a*bj_RADTODEG)
call SaveUnitHandle(ZY,(V0I),(393+i-1),(T0I))
call SaveBoolean(ZY,(V0I),(511+i-1),(false))
call SaveReal(ZY,(V0I),(549+i-1),((GetUnitX(T0I))*1.0))
call SaveReal(ZY,(V0I),(567+i-1),((GetUnitY(T0I))*1.0))
set i=i+1
endloop
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function H04))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveReal(ZY,(V0I),(47),((KUI)*1.0))
call SaveReal(ZY,(V0I),(48),((L0I)*1.0))
set XSI=null
set T0I=null
set l=null
set t=null
endfunction
function H14 takes nothing returns boolean
if GetSpellAbilityId()==1093751127 then
call HI4()
endif
return false
endfunction
function ET1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H14))
call MGI(1966092619)
call MGI(1966092616)
call MGI(1966092618)
call MGI(1966092620)
call YVI(1093751130)
set t=null
endfunction
function HO4 takes unit XSI,unit RZ1,unit H24,integer WTI,boolean H34 returns real
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(RZ1),GetUnitY(RZ1),0)
if H34 then
call KKI(T0I,1093687129)
else
call KKI(T0I,1093684812)
endif
call IssueTargetOrder(T0I,"thunderbolt",H24)
if IsUnitType(H24,UNIT_TYPE_HERO)==false then
call Y0I(XSI,H24,1,50+25*WTI,0.4)
else
call Y0I(XSI,H24,1,50,0.4)
endif
if H34 then
return((GetUnitX(H24)-GetUnitX(RZ1))*(GetUnitX(H24)-GetUnitX(RZ1))+(GetUnitY(H24)-GetUnitY(RZ1))*(GetUnitY(H24)-GetUnitY(RZ1)))/1000000
endif
return((GetUnitX(H24)-GetUnitX(RZ1))*(GetUnitX(H24)-GetUnitX(RZ1))+(GetUnitY(H24)-GetUnitY(RZ1))*(GetUnitY(H24)-GetUnitY(RZ1)))/360000
endfunction
function H44 takes unit XSI,unit RZ1 returns unit
local group g=ZJI()
set OK=XSI
call GroupEnumUnitsInRange(g,GetUnitX(RZ1),GetUnitY(RZ1),600,Condition(function S1I))
call GroupRemoveUnit(g,RZ1)
set OK=GroupPickRandomUnit(g)
call ZYI(g)
set g=null
return OK
endfunction
function H54 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer H64=(LoadInteger(ZY,(V0I),(391)))
local unit RZ1=ZGI(H64)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local unit H24
local real H1I
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if ZLI<(WTI*2+1)then
set H24=H44(XSI,RZ1)
if H24!=null then
set H1I=HO4(XSI,RZ1,H24,WTI,false)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(391),(ZZI(H24)))
call SaveInteger(ZY,(V0I),(34),(ZLI+1))
call TriggerRegisterTimerEvent(t,H1I+0.4,false)
call TriggerAddCondition(t,Condition(function H54))
endif
endif
call ZFI(H64)
set t=null
set XSI=null
set RZ1=null
set H24=null
return false
endfunction
function H74 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local unit H84=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(V8I,1093684813)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real H1I=HO4(V8I,V8I,H84,WTI,true)
call SaveUnitHandle(ZY,(V0I),(2),(V8I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveInteger(ZY,(V0I),(391),(ZZI(H84)))
call SaveInteger(ZY,(V0I),(34),(1))
call TriggerRegisterTimerEvent(t,H1I,false)
call TriggerAddCondition(t,Condition(function H54))
set V8I=null
set H84=null
set t=null
endfunction
function H94 takes nothing returns boolean
if GetSpellAbilityId()==1093684813 and ZXI(GetSpellTargetUnit())==false then
call H74()
endif
return false
endfunction
function F51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H94))
set t=null
endfunction
function HA4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
local integer WTI=GetUnitAbilityLevel(V8I,1093684805)
call UnitRemoveAbility(V8I,1093684805)
call KKI(V8I,1093684805)
call SetUnitAbilityLevel(V8I,1093684805,WTI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set V8I=null
return false
endfunction
function HB4 takes unit XTI,integer WTI returns nothing
local real XS2=(8+WTI*8)/3
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)+XS2)
endfunction
function HC4 takes nothing returns boolean
if(IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))then
call HB4(GetFilterUnit(),MJ)
endif
return false
endfunction
function HD4 takes unit V8I returns nothing
local integer WTI=GetUnitAbilityLevel(V8I,1093684805)
local group g=ZJI()
set OK=V8I
set MJ=WTI
call GroupEnumUnitsInRange(g,GetUnitX(V8I),GetUnitY(V8I),375,Condition(function HC4))
call ZYI(g)
set g=null
endfunction
function HE4 takes unit V8I returns nothing
local integer WTI=GetUnitAbilityLevel(V8I,1093684805)
local real HF4=2+6*WTI
call SetUnitState(V8I,UNIT_STATE_MANA,GetUnitState(V8I,UNIT_STATE_MANA)-(HF4/3))
if GetUnitState(V8I,UNIT_STATE_MANA)<HF4 then
if((LoadInteger(ZY,(GetHandleId((V8I))),((4265))))==1)==false then
call IssueImmediateOrder(V8I,"unimmolation")
endif
endif
endfunction
function HG4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit V8I=(LoadUnitHandle(ZY,(V0I),(14)))
if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==852178 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function HA4))
endif
else
call HD4(V8I)
call HE4(V8I)
endif
set t=null
return false
endfunction
function HH4 takes nothing returns nothing
local unit V8I=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(14),(V8I))
call TriggerRegisterTimerEvent(t,0.33,true)
call TriggerRegisterUnitEvent(t,V8I,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function HG4))
set V8I=null
set t=null
endfunction
function HZ4 takes nothing returns boolean
if GetSpellAbilityId()==1093684805 then
call HH4()
endif
return false
endfunction
function F71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HZ4))
set t=null
endfunction
function HV4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,1093684815)
local integer ZLI=GetTriggerEvalCount(t)
local real HW4=(LoadReal(ZY,(V0I),(392)))
local real HQ3=0
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if ZLI==4 or ZLI==8 or ZLI==12 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
if ZLI==12 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif ZLI==4 or ZLI==8 then
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("effects\\NetherInferno.mdx",XTI,"origin")))
endif
set HQ3=WTI*0.1*YQI(HW4-GetUnitState(XTI,UNIT_STATE_LIFE),0)
if HQ3>0 then
call K3I("+"+I2S(R2I(HQ3)),2,XTI,0.023,68,0,187,216)
endif
endif
call XNI(XSI,XTI,1,WTI*5+HQ3)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function HX4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
call DestroyEffect(AddSpecialEffectTarget("effects\\NetherInferno.mdx",XTI,"origin"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HV4))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(392),((GetUnitState(XTI,UNIT_STATE_LIFE))*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("effects\\NetherInferno.mdx",XTI,"origin")))
set t=null
set XSI=null
set XTI=null
endfunction
function HY4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local group g=ZJI()
local integer WTI=GetUnitAbilityLevel(XSI,1093684815)
call GroupEnumUnitsInRange(g,x,y,175,Condition(function SVI))
call ForGroup(g,function HX4)
call ZYI(g)
call RemoveLocation(l)
set l=null
set g=null
endfunction
function HJ4 takes nothing returns boolean
if GetSpellAbilityId()==1093684815 then
call HY4()
endif
return false
endfunction
function F61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HJ4))
set t=null
endfunction
function HK4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
call Y8I(XSI)
endif
set XSI=null
set t=null
return false
endfunction
function HL4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,10,false)
call TriggerAddCondition(t,Condition(function HK4))
set t=null
set XSI=null
endfunction
function HM4 takes nothing returns boolean
if GetSpellAbilityId()==1093684820 or GetSpellAbilityId()==1093684824 then
call HL4()
endif
return false
endfunction
function HN4 takes nothing returns boolean
if GetUnitTypeId(GetSummonedUnit())==1865429040 or GetUnitTypeId(GetSummonedUnit())==1865429041 or GetUnitTypeId(GetSummonedUnit())==1865429057 or GetUnitTypeId(GetSummonedUnit())==1865429080 then
call V5I(GetSummoningUnit(),4265,8)
endif
return false
endfunction
function F81 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function HN4))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HM4))
set t=null
endfunction
function HS4 takes nothing returns boolean
local integer id=0
local unit XTI
local real Q1I=(TimerGetElapsed(M))
local real mp
local real hp
loop
exitwhen id>12
set XTI=L1[id]
if XTI!=null and GetUnitAbilityLevel(XTI,1110459204)==0 and EFI[id]>Q1I then
set EFI[id]=0
endif
if XTI!=null and GetUnitAbilityLevel(XTI,1110459204)>0 then
if EFI[id]>Q1I and KMI(XTI)==false then
if IsUnitInRegion(LK,XTI)==true then
set hp=GetUnitState(XTI,UNIT_STATE_LIFE)
set mp=GetUnitState(XTI,UNIT_STATE_MANA)
set EGI[id]=hp
set EHI[id]=mp
else
set hp=GetUnitState(XTI,UNIT_STATE_LIFE)
set mp=GetUnitState(XTI,UNIT_STATE_MANA)
if hp<EGI[id]then
set EGI[id]=hp
else
endif
if mp<EHI[id]then
set EHI[id]=mp
else
endif
call SetUnitState(XTI,UNIT_STATE_LIFE,EGI[id])
endif
set EVI[id]=EVI[id]+1
if EVI[id]==10 then
set EVI[id]=0
if EWI[id]==1 then
call XNI(EZI[id],XTI,1,12.5)
elseif EWI[id]==2 then
call XNI(EZI[id],XTI,1,20)
elseif EWI[id]==3 then
call XNI(EZI[id],XTI,1,32)
endif
endif
elseif EFI[id]>Q1I and KMI(XTI)==true then
set EFI[id]=0
set EGI[id]=9999
set EHI[id]=9999
endif
if(GetUnitAbilityLevel(XTI,1110459204)>0 and EFI[id]<Q1I)then
call UnitRemoveAbility(XTI,1093749313)
call UnitRemoveAbility(XTI,1110459204)
call UnitRemoveAbility(XTI,1093749828)
endif
endif
set id=id+1
endloop
set XTI=null
return false
endfunction
function HT4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit T0I
if GetUnitAbilityLevel(XTI,1110459204)==0 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetOwningPlayer(XTI)!=GetOwningPlayer(GetEventDamageSource())and GetUnitState(XTI,UNIT_STATE_MAX_LIFE)*(0.09+0.01*WTI)>GetUnitState(XTI,UNIT_STATE_LIFE)and((LoadInteger(ZY,(GetHandleId((XTI))),((2485))))==1)==false then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1093749313)
call UnitRemoveAbility(XTI,1110459204)
call UnitRemoveAbility(XTI,1093749828)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"origin"))
set T0I=CreateUnit(GetOwningPlayer(GetEventDamageSource()),1697656901,0,0,0)
call UnitRemoveBuffs(XTI,true,true)
call UnitRemoveAbility(XTI,1097167980)
call UnitDamageTarget(T0I,XTI,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set T0I=null
endif
set t=null
set XTI=null
return false
endfunction
function HR4 takes unit XSI,unit XTI returns nothing
local integer WTI=GetUnitAbilityLevel(XSI,1093750089)
local integer id=GetPlayerId(GetOwningPlayer(XTI))
local trigger t
local integer V0I
if WTI>0 and IsUnitType(XTI,UNIT_TYPE_HERO)==true and IsUnitIllusion(XTI)==false and GetUnitTypeId(XTI)!=1211117642 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function HT4))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call KKI(XTI,1093749313)
call KKI(XTI,1093749828)
set EFI[id]=(TimerGetElapsed(M))+7+WTI
set EGI[id]=GetUnitState(XTI,UNIT_STATE_LIFE)
set EHI[id]=GetUnitState(XTI,UNIT_STATE_MANA)
set EZI[id]=XSI
set EWI[id]=WTI
endif
set t=null
endfunction
function HP4 takes nothing returns nothing
local unit XSI=OK
local unit XTI=GetEnumUnit()
local integer id=GetPlayerId(GetOwningPlayer(XTI))
local integer WTI=GetUnitAbilityLevel(XSI,1093750089)
local trigger t
local integer V0I
if IsUnitType(XTI,UNIT_TYPE_HERO)==true and IsUnitIllusion(XTI)==false and GetUnitAbilityLevel(XTI,1110459204)==0 and GetUnitTypeId(XTI)!=1211117642 then
set EFI[id]=(TimerGetElapsed(M))+7+WTI
call KKI(XTI,1093749313)
call KKI(XTI,1093749828)
set EGI[id]=GetUnitState(XTI,UNIT_STATE_LIFE)
set EHI[id]=GetUnitState(XTI,UNIT_STATE_MANA)
set EZI[id]=XSI
set EWI[id]=WTI
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function HT4))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
set t=null
endif
set XSI=null
set XTI=null
endfunction
function HQ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x0=(LoadReal(ZY,(V0I),(282)))
local real y0=(LoadReal(ZY,(V0I),(283)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group g=ZJI()
set OK=XSI
call GroupEnumUnitsInRange(g,x0,y0,825,Condition(function SYI))
call ForGroup(g,function HP4)
call ZYI(g)
if GetTriggerEvalCount(t)>120 then
call KillUnit((LoadUnitHandle(ZY,(V0I),(434))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set g=null
return false
endfunction
function Gust takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real B92=GetUnitFacing(XSI)
local real x2
local real y2
local unit HU4
local unit XW3
local unit Z04
local unit ZI4
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093750089)
call RemoveLocation(l)
set x2=x+350*Cos(B92*bj_DEGTORAD)
set y2=y+350*Sin(B92*bj_DEGTORAD)
set HU4=CreateUnit(GetOwningPlayer(XSI),1747993139,x,y,B92)
set x2=x+350*Cos(B92*bj_DEGTORAD)
set y2=y-350*Sin(B92*bj_DEGTORAD)
set x2=x-350*Cos(B92*bj_DEGTORAD)
set y2=y+350*Sin(B92*bj_DEGTORAD)
set x2=x-350*Cos(B92*bj_DEGTORAD)
set y2=y-350*Sin(B92*bj_DEGTORAD)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function HQ4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(282),((x)*1.0))
call SaveReal(ZY,(V0I),(283),((y)*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(434),(HU4))
set l=null
set XSI=null
set HU4=null
set XW3=null
set Z04=null
set ZI4=null
set t=null
endfunction
function Gust_Main takes nothing returns boolean
if GetSpellAbilityId()==1093750328 then
endif
return false
endfunction
function Z21 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer id=0
local integer i=0
local player p
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function HS4))
loop
exitwhen id>12
set EGI[id]=9999
set EHI[id]=9999
set id=id+1
endloop
loop
exitwhen i>5
set p=CO[i]
call SetPlayerAbilityAvailable(p,1093749828,false)
set p=DO[i]
call SetPlayerAbilityAvailable(p,1093749828,false)
set i=i+1
endloop
set t=null
endfunction
function Z14 takes nothing returns nothing
if NKI(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093748826)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093748826)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749044)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749044)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749043)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749043)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749046)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749046)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
endfunction
function ZO4 takes nothing returns nothing
if NKI(GetEnumUnit())then
return
endif
if XDI(GetEnumUnit())==false then
if EXI==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093748826)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call KKI(GetEnumUnit(),1093748826)
endif
elseif EXI==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749044)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call KKI(GetEnumUnit(),1093749044)
endif
elseif EXI==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749043)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call KKI(GetEnumUnit(),1093749043)
endif
elseif EXI==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749046)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call KKI(GetEnumUnit(),1093749046)
endif
endif
endif
endfunction
function Z24 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local group U82=(LoadGroupHandle(ZY,(V0I),(340)))
local real x=GetUnitX(T0I)
local real y=GetUnitY(T0I)
local group g=ZJI()
local group g2
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ForGroup(U82,function Z14)
call ZYI(g)
call ZYI(U82)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ShowUnit(T0I,false)
set t=null
set XSI=null
set T0I=null
set U82=null
return false
endif
set EYI=XSI
set EXI=GetUnitAbilityLevel(XSI,1093748819)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,300,Condition(function SOI))
call GroupRemoveGroup(g,U82)
call ForGroup(U82,function Z14)
call ForGroup(g,function ZO4)
call SaveGroupHandle(ZY,(V0I),(340),(g))
call ZYI(U82)
set t=null
set XSI=null
set T0I=null
set U82=null
return false
endfunction
function Z34 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer WTI=GetUnitAbilityLevel(XSI,1093748819)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1848658001,x,y,0)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call UnitApplyTimedLife(T0I,1112820806,12)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,T0I,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Z24))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveGroupHandle(ZY,(V0I),(340),(ZJI()))
call RemoveLocation(l)
set XSI=null
set l=null
endfunction
function Z44 takes nothing returns boolean
if GetSpellAbilityId()==1093748819 then
call Z34()
endif
return false
endfunction
function ZI1 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
local player p
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z44))
set t=null
loop
exitwhen i>5
set p=CO[i]
call SetPlayerAbilityAvailable(p,1093748826,false)
call SetPlayerAbilityAvailable(p,1093749044,false)
call SetPlayerAbilityAvailable(p,1093749043,false)
call SetPlayerAbilityAvailable(p,1093749046,false)
set p=DO[i]
call SetPlayerAbilityAvailable(p,1093748826,false)
call SetPlayerAbilityAvailable(p,1093749044,false)
call SetPlayerAbilityAvailable(p,1093749043,false)
call SetPlayerAbilityAvailable(p,1093749046,false)
set i=i+1
endloop
endfunction
function Z54 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit T0I
local real XPI=(100+50*WTI)/4
if GetTriggerEventId()==EVENT_UNIT_DEATH or JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))>765 or GetUnitAbilityLevel(XTI,1110459203)==0 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call UnitRemoveAbility(XTI,1093749305)
call UnitRemoveAbility(XTI,1110459203)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEvalCount(t)==(10*0.8)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",XTI,"overhead")))
call XNI(XSI,XTI,1,XPI)
elseif GetTriggerEvalCount(t)==(10*1.6)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",XTI,"overhead")))
call XNI(XSI,XTI,1,XPI)
elseif GetTriggerEvalCount(t)==(10*2.5)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",XTI,"overhead")))
call XNI(XSI,XTI,1,XPI)
elseif GetTriggerEvalCount(t)==(10*3.4)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call XNI(XSI,XTI,1,XPI)
elseif GetTriggerEvalCount(t)>(10*3.9)then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call UnitRemoveAbility(XTI,1093749305)
call UnitRemoveAbility(XTI,1110459203)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093750090)
call SetUnitAbilityLevel(T0I,1093750090,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
set T0I=null
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function Z64 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093750087)
local string s="Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl"
if GetLocalPlayer()==GetOwningPlayer(XTI)then
endif
call KKI(XTI,1093749305)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XTI))*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",XTI,"overhead")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffect(s,GetUnitX(XTI),GetUnitY(XTI))))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Z54))
set XSI=null
set XTI=null
set t=null
endfunction
function Z74 takes nothing returns boolean
if GetSpellAbilityId()==1093750087 and ZXI(GetSpellTargetUnit())==false then
call Z64()
endif
return false
endfunction
function Z11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z74))
set t=null
endfunction
function Z84 takes nothing returns nothing
local unit XSI=EKI
local unit XTI=GetEnumUnit()
local integer WTI=EJI
call HR4(XSI,XTI)
call XNI(XSI,XTI,1,150+100*WTI)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\PlasmaShot.mdl",XTI,"chest"))
set XSI=null
set XTI=null
endfunction
function Z94 takes nothing returns nothing
local unit XSI=EKI
local unit XTI=GetEnumUnit()
local integer WTI=EJI
call HR4(XSI,XTI)
set XSI=null
set XTI=null
endfunction
function ZA4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real HF2=(LoadReal(ZY,(V0I),(432)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real x=GetUnitX(KRI)+30*Cos(B92)
local real y=GetUnitY(KRI)+30*Sin(B92)
local group g
local fogmodifier KHI
if JAI(x,y,J6I,J7I)<35 or x!=YEI(x)or y!=YHI(y)then
set x=J6I
set y=J7I
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
set KHI=(LoadFogModifierHandle(ZY,(V0I),(440)))
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
set KHI=null
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call KillUnit(KRI)
set OK=XSI
set EKI=XSI
set EJI=WTI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,HF2+25,Condition(function SOI))
call ForGroup(g,function Z84)
call ZYI(g)
set g=null
else
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
set OK=XSI
set EKI=XSI
set EJI=WTI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,300,Condition(function SOI))
call ForGroup(g,function Z94)
call ZYI(g)
set g=null
endif
set t=null
set KRI=null
set XSI=null
return false
endfunction
function ZB4 takes unit XSI,real x,real y,real DU3,effect FX,fogmodifier KHI returns nothing
local real B92=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747993142,GetUnitX(XSI),GetUnitY(XSI),B92*bj_RADTODEG)
local integer WTI=GetUnitAbilityLevel(XSI,1093750089)
local real HF2=YPI(225+25*DU3*2,1000)
local real J3I=JAI(GetUnitX(XSI),GetUnitY(XSI),x,y)
if IsUnitEnemy(KRI,GetLocalPlayer())and XJI(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(KRI,true)
endif
call TriggerRegisterTimerEvent(t,YPI(2.0/(J3I/30),0.04),true)
call TriggerAddCondition(t,Condition(function ZA4))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(47),((x)*1.0))
call SaveReal(ZY,(V0I),(48),((y)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveReal(ZY,(V0I),(432),((HF2)*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveFogModifierHandle(ZY,(V0I),(440),(KHI))
call SaveEffectHandle(ZY,(V0I),(32),(FX))
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750089,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750094,false)
set t=null
set KRI=null
endfunction
function ZC4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real x
local real y
local real DU3=(TimerGetElapsed(M))-(LoadReal(ZY,(V0I),(431)))
local string s
local fogmodifier KHI
local effect FX
local real ZD4=GetUnitX(KRI)+30*Cos(B92)
local real ZE4=GetUnitY(KRI)+30*Sin(B92)
set x=YEI(ZD4)
set y=YHI(ZE4)
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093750094)or x!=ZD4 or y!=ZE4 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call RemoveUnit(KRI)
set s=""
if IsPlayerAlly(GetOwningPlayer(XSI),GetLocalPlayer())or XJI(GetLocalPlayer())then
set s="war3mapImported\\IceWindGroundFX.mdl"
endif
set KHI=CreateFogModifierRadius(GetOwningPlayer(XSI),FOG_OF_WAR_VISIBLE,x,y,500,true,true)
call FogModifierStart(KHI)
set FX=AddSpecialEffect(s,x,y)
call ZB4(XSI,x,y,DU3,FX,KHI)
set KHI=null
set FX=null
endif
set t=null
set KRI=null
set XSI=null
return false
endfunction
function ZF4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(XSI),x-GetUnitX(XSI))
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1211122232,GetUnitX(XSI),GetUnitY(XSI),a*bj_RADTODEG)
if IsUnitEnemy(KRI,GetLocalPlayer())and XJI(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(KRI,true)
endif
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(13),((a)*1.0))
call SaveReal(ZY,(V0I),(431),(((TimerGetElapsed(M)))*1.0))
call TriggerRegisterTimerEvent(t,0.02,true)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZC4))
call SetUnitColor(KRI,GetPlayerColor(Player(14)))
call RemoveLocation(l)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750089,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093750094,true)
call KKI(XSI,1093750094)
set XSI=null
set l=null
set t=null
set KRI=null
endfunction
function ZG4 takes nothing returns boolean
if GetSpellAbilityId()==1093750089 then
call ZF4()
endif
return false
endfunction
function ZO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZG4))
set t=null
endfunction
function ZH4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local integer ZZ4=(LoadInteger(ZY,(GetHandleId(XSI)),(449)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and GetEventDamage()>1 then
call DisableTrigger(t)
if ZZ4>0 then
call SaveInteger(ZY,(GetHandleId(XSI)),(449),(ZZ4-1))
call K3I("+"+I2S(30+10*WTI),1,XSI,0.024,100,200,255,255)
call XNI(XSI,XTI,1,30+10*WTI)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function ZV4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED or(LoadInteger(ZY,(GetHandleId(XSI)),(449)))==0 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call SaveInteger(ZY,(GetHandleId(XSI)),(449),(0))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XSI,1093748814)
call UnitRemoveAbility(XSI,1110459210)
call UnitRemoveAbility(XSI,1093749072)
elseif GetAttacker()==XSI and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and((LoadInteger(ZY,(GetHandleId((XSI))),((4289))))==1)==false then
call V5I(XSI,4289,0.4)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.0,false)
call TriggerAddCondition(t,Condition(function ZH4))
call SaveUnitHandle(ZY,(V0I),(17),(GetTriggerUnit()))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
endif
set t=null
set XSI=null
return false
endfunction
function ZW4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093748817)
call KKI(XTI,1093748814)
call KKI(XTI,1093749072)
call SaveInteger(ZY,(GetHandleId(XTI)),(449),(1+WTI))
call SaveUnitHandle(ZY,(V0I),(2),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("war3mapImported\\FrostHands.mdx",XTI,"right,hand")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("war3mapImported\\FrostHands.mdx",XTI,"left,hand")))
call TriggerRegisterTimerEvent(t,40,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function ZV4))
set XSI=null
set XTI=null
set t=null
endfunction
function ZX4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local group g=ZJI()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call RemoveLocation(l)
call DestroyEffect(AddSpecialEffect("war3mapImported\\IcyWind.mdl",x,y))
call GroupEnumUnitsInRange(g,x,y,475,Condition(function SFI))
call ForGroup(g,function ZW4)
call ZYI(g)
set XSI=null
set g=null
set l=null
endfunction
function ZY4 takes nothing returns boolean
if GetSpellAbilityId()==1093748817 then
call ZX4()
endif
return false
endfunction
function Z31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZY4))
set t=null
endfunction
function ZJ4 takes nothing returns nothing
call XNI(ELI,GetEnumUnit(),1,(GetUnitAbilityLevel(ELI,1093749069)*75)/10)
endfunction
function ZK4 takes unit XSI returns nothing
local real T2I=(GetUnitAbilityLevel(XSI,1093749069)*75)/2
set T2I=T2I/10.0
if GetUnitState(XSI,UNIT_STATE_LIFE)<=T2I*0.75 then
set T2I=GetUnitState(XSI,UNIT_STATE_LIFE)/0.75-10
endif
call XNI(XSI,XSI,1,T2I)
endfunction
function ZL4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local group g
local real T2I
local unit T0I
local integer WTI=0
local integer ZLI=GetTriggerEvalCount(t)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
return false
else
if GetTriggerEvalCount(t)==1 then
set T0I=CreateUnit(GetOwningPlayer(XSI),1747993138,x,y,0)
call UnitApplyTimedLife(T0I,1112820806,1)
set T0I=null
call TriggerRegisterTimerEvent(t,0.1,true)
set g=ZJI()
set ELI=XSI
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,350,Condition(function SOI))
call ForGroup(g,function ZJ4)
call ZK4(XSI)
call ZYI(g)
else
if ZLI==10 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set g=ZJI()
set ELI=XSI
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,350,Condition(function SOI))
call ForGroup(g,function ZJ4)
call ZK4(XSI)
call ZYI(g)
call TYI(XSI)
call TZI(XSI,0,0)
endif
endif
set t=null
set g=null
set XSI=null
return false
endfunction
function ZM4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real T2I=(GetUnitAbilityLevel(XSI,1093749069)*75)/2
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZL4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function ZN4 takes nothing returns boolean
if GetSpellAbilityId()==1093749069 then
call ZM4()
endif
return false
endfunction
function Z71 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZN4))
set t=null
endfunction
function ZS4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local player MUO
local integer WTI=GetUnitAbilityLevel(XSI,1093749070)
local integer MainLevel=GetUnitAbilityLevel(XSI,1093749070)
local real Q1I=(TimerGetElapsed(M))
local real ZT4=(LoadReal(ZY,(V0I),(415)))
local real ZR4=(LoadReal(ZY,(V0I),(416)))
if KMI(XSI)then
set t=null
set XSI=null
return false
endif
if VLI(GetOwningPlayer(XSI))then
set MUO=DO[1]
else
set MUO=CO[1]
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetOwningPlayer(GetEventDamageSource())==EO then
if GetUnitAbilityLevel(XSI,1093749061)>0 then
call UnitRemoveAbility(XSI,1093749061)
call UnitRemoveAbility(XSI,1110459193)
endif
if GetUnitAbilityLevel(XSI,1093749062)>0 then
call UnitRemoveAbility(XSI,1093749062)
call UnitRemoveAbility(XSI,1110459193)
endif
if GetUnitAbilityLevel(XSI,1093749063)>0 then
call UnitRemoveAbility(XSI,1093749063)
call UnitRemoveAbility(XSI,1110459193)
endif
call SaveReal(ZY,(V0I),(414),((Q1I+2)*1.0))
set t=null
set XSI=null
return false
endif
if(LoadReal(ZY,(V0I),(414)))>Q1I then
set t=null
set XSI=null
return false
endif
if IsUnitVisible(XSI,MUO)or GetUnitAbilityLevel(XSI,1112433775)>0 then
set ZR4=0
if GetUnitAbilityLevel(XSI,1093749061)>0 or GetUnitAbilityLevel(XSI,1093749062)>0 or GetUnitAbilityLevel(XSI,1093749063)>0 then
set ZT4=ZT4+0.1
if ZT4>0.6 then
set ZT4=0
if GetUnitAbilityLevel(XSI,1093749061)>0 then
call UnitRemoveAbility(XSI,1093749061)
call UnitRemoveAbility(XSI,1110459193)
endif
if GetUnitAbilityLevel(XSI,1093749062)>0 then
call UnitRemoveAbility(XSI,1093749062)
call UnitRemoveAbility(XSI,1110459193)
endif
if GetUnitAbilityLevel(XSI,1093749063)>0 then
call UnitRemoveAbility(XSI,1093749063)
call UnitRemoveAbility(XSI,1110459193)
endif
endif
endif
call SaveReal(ZY,(V0I),(415),((ZT4)*1.0))
call SaveReal(ZY,(V0I),(416),((ZR4)*1.0))
elseif IsUnitVisible(XSI,MUO)==false then
set ZT4=0
if(WTI==1 and GetUnitAbilityLevel(XSI,1093749061)==0)or(WTI==2 and GetUnitAbilityLevel(XSI,1093749062)==0)or(WTI==3 and GetUnitAbilityLevel(XSI,1093749063)==0)then
set ZR4=ZR4+0.1
if ZR4>0.6 then
set ZR4=0
if WTI==1 then
if GetUnitAbilityLevel(XSI,1093749061)==0 then
call KKI(XSI,1093749061)
endif
endif
if WTI==2 then
if GetUnitAbilityLevel(XSI,1093749061)>0 then
call UnitRemoveAbility(XSI,1093749061)
call UnitRemoveAbility(XSI,1110459193)
endif
if GetUnitAbilityLevel(XSI,1093749062)==0 then
call KKI(XSI,1093749062)
endif
endif
if WTI==3 then
if GetUnitAbilityLevel(XSI,1093749061)>0 then
call UnitRemoveAbility(XSI,1093749061)
call UnitRemoveAbility(XSI,1110459193)
endif
if GetUnitAbilityLevel(XSI,1093749062)>0 then
call UnitRemoveAbility(XSI,1093749062)
call UnitRemoveAbility(XSI,1110459193)
endif
if GetUnitAbilityLevel(XSI,1093749063)==0 then
call KKI(XSI,1093749063)
endif
endif
endif
endif
call SaveReal(ZY,(V0I),(415),((ZT4)*1.0))
call SaveReal(ZY,(V0I),(416),((ZR4)*1.0))
endif
set t=null
set XSI=null
return false
endfunction
function ZP4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveReal(ZY,(V0I),(415),((0)*1.0))
call SaveReal(ZY,(V0I),(416),((0)*1.0))
call SaveReal(ZY,(V0I),(414),(((TimerGetElapsed(M)))*1.0))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function ZS4))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093749061,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093749062,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093749063,false)
set t=null
endfunction
function ZQ4 takes nothing returns boolean
if GetLearnedSkill()==1093749070 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093749070)==1 then
call ZP4()
endif
return false
endfunction
function Z61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ZQ4))
set t=null
endfunction
function ZU4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=GetDyingUnit()
if GetOwningPlayer(GetKillingUnit())==GetOwningPlayer(XSI)and IsUnitType(XTI,UNIT_TYPE_HERO)==true and IsUnitIllusion(XTI)==false then
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function V04 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer VI4=(LoadInteger(ZY,(V0I),(422)))
local integer V14=(LoadInteger(ZY,(V0I),(423)))
local integer ZB3=(LoadInteger(ZY,(V0I),(424)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(LoadBoolean(ZY,(V0I),(276)))==false and GetTriggerUnit()==XSI then
call SaveBoolean(ZY,(V0I),(276),(true))
call SetHeroAgi(XSI,GetHeroAgi(XSI,false)-VI4-V14-ZB3,true)
elseif(LoadBoolean(ZY,(V0I),(277)))==false and GetTriggerUnit()==XTI then
call SaveBoolean(ZY,(V0I),(277),(true))
call SetHeroAgi(XTI,GetHeroAgi(XTI,false)+VI4,true)
call SetHeroStr(XTI,GetHeroStr(XTI,false)+V14,true)
call SetHeroInt(XTI,GetHeroInt(XTI,false)+ZB3,true)
endif
else
if(LoadBoolean(ZY,(V0I),(276)))==false then
call SaveBoolean(ZY,(V0I),(276),(true))
call SetHeroAgi(XSI,GetHeroAgi(XSI,false)-VI4-V14-ZB3,true)
endif
if(LoadBoolean(ZY,(V0I),(277)))==false then
call SaveBoolean(ZY,(V0I),(277),(true))
call SetHeroAgi(XTI,GetHeroAgi(XTI,false)+VI4,true)
call SetHeroStr(XTI,GetHeroStr(XTI,false)+V14,true)
call SetHeroInt(XTI,GetHeroInt(XTI,false)+ZB3,true)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function VO4 takes unit XSI,unit XTI returns nothing
local integer WTI=GetUnitAbilityLevel(XSI,1093748818)
local integer N9O=V7I(XTI)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer VI4
local integer V14
local integer ZB3
local real SQI
if N9O==2 then
set VI4=IMinBJ(GetHeroAgi(XTI,false)-1,1)
set V14=IMinBJ(GetHeroStr(XTI,false)-1,1)
set ZB3=IMinBJ(GetHeroInt(XTI,false)-1,1)
elseif N9O==3 then
set VI4=IMinBJ(GetHeroAgi(XTI,false)-1,1)
set V14=IMinBJ(GetHeroStr(XTI,false)-1,1)
set ZB3=IMinBJ(GetHeroInt(XTI,false)-1,1)
elseif N9O==1 then
set VI4=IMinBJ(GetHeroAgi(XTI,false)-1,1)
set V14=IMinBJ(GetHeroStr(XTI,false)-1,1)
set ZB3=IMinBJ(GetHeroInt(XTI,false)-1,1)
endif
call SetHeroAgi(XSI,GetHeroAgi(XSI,false)+VI4+ZB3+V14,true)
call SetHeroAgi(XTI,GetHeroAgi(XTI,false)-VI4,true)
call SetHeroStr(XTI,GetHeroStr(XTI,false)-V14,true)
call SetHeroInt(XTI,GetHeroInt(XTI,false)-ZB3,true)
call SaveInteger(ZY,(V0I),(422),(VI4))
call SaveInteger(ZY,(V0I),(424),(ZB3))
call SaveInteger(ZY,(V0I),(423),(V14))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveBoolean(ZY,(V0I),(276),(false))
call SaveBoolean(ZY,(V0I),(277),(false))
if WTI==1 then
set SQI=15
elseif WTI==2 then
set SQI=30
elseif WTI==3 then
set SQI=60
elseif WTI==4 then
set SQI=120
endif
call TriggerRegisterTimerEvent(t,SQI,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function V04))
set t=null
endfunction
function V24 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call VO4(XSI,XTI)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function V34 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer XUI=(LoadInteger(ZY,(V0I),(30)))
local unit XTI=ZGI(XUI)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI then
call DisableTrigger(t)
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.01,false)
call TriggerAddCondition(t,Condition(function V24))
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
endif
else
call ZFI(XUI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function V44 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit XTI=GetTriggerUnit()
local unit XSI=GetAttacker()
local integer V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function V34))
call SaveInteger(ZY,(V0I),(30),(ZZI(XTI)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XTI=null
set XSI=null
set t=null
endfunction
function V54 takes nothing returns nothing
local unit XSI=GetAttacker()
if((LoadInteger(ZY,(GetHandleId((XSI))),((4274))))==1)==false then
call V5I(XSI,4274,0.45-GetUnitAbilityLevel(GetAttacker(),1093748818)*0.05)
call V44()
endif
endfunction
function V64 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093748818)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(ZY,(GetHandleId(GetTriggeringTrigger())),(14)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call V54()
endif
return false
endfunction
function V74 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function V64))
call SaveUnitHandle(ZY,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZU4))
call SaveUnitHandle(ZY,(V0I),(2),(GetTriggerUnit()))
set t=null
endfunction
function V84 takes nothing returns boolean
if GetLearnedSkill()==1093748818 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093748818)==1 then
call V74()
endif
return false
endfunction
function Z41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function V84))
set t=null
endfunction
function V94 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
if GetTriggerEvalCount(t)>(5.5)/0.03 then
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call SetUnitX(T0I,GetUnitX(XSI))
call SetUnitY(T0I,GetUnitY(XSI))
endif
set t=null
set XSI=null
set T0I=null
return false
endfunction
function VA4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093749070)
local real d=5.5
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1747993137,GetUnitX(XSI),GetUnitY(XSI),0)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call MSI(XSI,1093748823,1,d)
call MSI(XSI,1093748824,1,d)
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function V94))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
set XSI=null
endfunction
function VB4 takes nothing returns boolean
if GetSpellAbilityId()==1093749070 then
call VA4()
endif
return false
endfunction
function Z51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VB4))
set t=null
endfunction
function VC4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local lightning KII=(LoadLightningHandle(ZY,(V0I),(196)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real J4I=(LoadReal(ZY,(V0I),(189)))
local real J5I=(LoadReal(ZY,(V0I),(190)))
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real KUI
local real L0I
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real B92
local real J3I=JAI(DE2,DF2,J6I,J7I)
call SaveReal(ZY,(V0I),(23),((J6I)*1.0))
call SaveReal(ZY,(V0I),(24),((J7I)*1.0))
if J3I>100 or ZLI>(3.5/.03)or XDI(XTI)==true then
call DestroyLightning(KII)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call MoveLightning(KII,true,J4I,J5I,J6I,J7I)
if JAI(J4I,J5I,J6I,J7I)>325 then
set B92=Atan2(J7I-J5I,J6I-J4I)
set KUI=J4I+(325)*Cos(B92)
set L0I=J5I+(325)*Sin(B92)
call SetUnitX(XTI,KUI)
call SetUnitY(XTI,L0I)
endif
endif
set t=null
set XSI=null
set XTI=null
set KII=null
return false
endfunction
function VD4 takes unit XSI,unit XTI,integer WTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local lightning KII=AddLightning("PONC",true,GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))
call SetLightningColor(KII,1,1,1,1)
call SaveLightningHandle(ZY,(V0I),(196),(KII))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(189),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(190),((GetUnitY(XSI))*1.0))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XTI))*1.0))
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VC4))
call XNI(XSI,XTI,1,40*WTI)
call IssueTargetOrder(XSI,"attack",XTI)
set t=null
set KII=null
endfunction
function VE4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real B92=(LoadReal(ZY,(V0I),(13)))
local real G42=(LoadReal(ZY,(V0I),(189)))
local real G52=(LoadReal(ZY,(V0I),(190)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real KUI=G42+(30*(20+4*2)/30)*ZLI*Cos(B92*bj_DEGTORAD)
local real L0I=G52+(30*(20+4*2)/30)*ZLI*Sin(B92*bj_DEGTORAD)
local real M92=SquareRoot((KUI-J6I)*(KUI-J6I)+(L0I-J7I)*(L0I-J7I))
local real MA2=300+100*WTI
local real MB2=175
local real MC2=(1-M92/MA2)*MB2*2
local group g=ZJI()
local unit XTI
if ZLI==1 then
call SetUnitAnimationByIndex(XSI,5)
call SetUnitTimeScale(XSI,1.5)
endif
if MC2>MB2 then
call SetUnitAnimationByIndex(XSI,5)
set MC2=MB2*2-MC2
endif
call SetUnitFlyHeight(XSI,YQI(MC2,0),0)
call SetUnitX(XSI,YEI(KUI))
call SetUnitY(XSI,YHI(L0I))
call SetUnitFacing(XSI,B92)
set OK=XSI
call GroupEnumUnitsInRange(g,KUI,L0I,120,Condition(function SJI))
set XTI=FirstOfGroup(g)
call ZYI(g)
if M92<30 or XTI!=null or GetTriggerEvalCount(t)>75 then
call SetUnitFlyHeight(XSI,0,0)
call SetUnitFacing(XSI,B92)
call SetUnitTimeScale(XSI,1)
call SetUnitAnimation(XSI,"stand")
call SetUnitPathing(XSI,true)
call UnitRemoveAbility(XSI,1093749302)
call KCI(GetUnitX(XSI),GetUnitY(XSI),100)
if XTI!=null and XDI(XTI)==false then
call V5I(XTI,4408,5)
call VD4(XSI,XTI,WTI)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function VF4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093749303)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real J3I=300+100*WTI
local real B92=GetUnitFacing(XSI)
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=YEI(J4I+J3I*Cos(B92*bj_DEGTORAD))
local real J7I=YHI(J5I+J3I*Sin(B92*bj_DEGTORAD))
call KKI(XSI,1097691750)
call UnitRemoveAbility(XSI,1097691750)
call SetUnitPathing(XSI,false)
call KKI(XSI,1093749302)
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function VE4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveReal(ZY,(V0I),(189),((J4I)*1.0))
call SaveReal(ZY,(V0I),(190),((J5I)*1.0))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
set XSI=null
set t=null
endfunction
function VG4 takes nothing returns boolean
if GetSpellAbilityId()==1093749303 then
call VF4()
endif
return false
endfunction
function Z81 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VG4))
set t=null
endfunction
function VH4 takes nothing returns nothing
local integer V0I=GetHandleId(GetTriggeringTrigger())
local unit XSI=OK
local unit XTI=AK
local real XPI=(LoadReal(ZY,(V0I),(20)))
call XNI(XSI,XTI,1,XPI)
set XSI=null
set XTI=null
endfunction
function VZ4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetEnumUnit()
local trigger t=LII(XSI,XTI,1747993168,"VH4",700)
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093678145)
local real XPI
if WTI==1 then
set XPI=85
elseif WTI==2 then
set XPI=165
elseif WTI==3 then
set XPI=225
elseif WTI==4 then
set XPI=300
endif
call SaveReal(ZY,(V0I),(20),((XPI)*1.0))
set XSI=null
set XTI=null
set t=null
endfunction
function VV4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local group g=ZJI()
local integer WTI=GetUnitAbilityLevel(XSI,1093678145)
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),25+375+25*WTI,Condition(function S0I))
call ForGroup(g,function VZ4)
call ZYI(g)
call PlaySoundOnUnitBJ(UE,100,XSI)
set XSI=null
endfunction
function VW4 takes nothing returns boolean
if GetSpellAbilityId()==1093678145 then
call VV4()
endif
return false
endfunction
function Z91 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VW4))
set t=null
endfunction
function VX4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call Y8I(XSI)
endif
set t=null
set XSI=null
return false
endfunction
function VY4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093677136)
call TriggerRegisterTimerEvent(t,1+1.75+0.75*WTI,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function VX4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set XSI=null
set t=null
endfunction
function VJ4 takes nothing returns boolean
if GetSpellAbilityId()==1093677136 then
call VY4()
endif
return false
endfunction
function ZA1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VJ4))
set t=null
endfunction
function VK4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>(15+5*WTI)or XDI(XSI)then
call SaveInteger(ZY,(GetHandleId((XSI))),((4311)),(2))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
if((LoadInteger(ZY,(GetHandleId((XSI))),((4312))))==1)==false then
call UnitRemoveAbility(XSI,1096971630)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function VL4 takes unit XSI,integer WTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call UnitAddAbility(XSI,1096971630)
call UnitMakeAbilityPermanent(XSI,true,1096971630)
call SaveInteger(ZY,(GetHandleId((XSI))),((4311)),(1))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VK4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",XSI,"overhead")))
set t=null
endfunction
function VM4 takes nothing returns boolean
if IsUnitInGroup(GetEnumUnit(),EMI)==false and XDI(GetEnumUnit())==false then
call GroupAddUnit(EMI,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireBlast.mdx",GetEnumUnit(),"chest"))
call XNI(ESI,GetEnumUnit(),1,50+50*ENI)
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
call VL4(GetEnumUnit(),ENI)
endif
endif
return false
endfunction
function VN4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real J4I=(LoadReal(ZY,(V0I),(189)))
local real J5I=(LoadReal(ZY,(V0I),(190)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real a=(LoadReal(ZY,(V0I),(13)))
local real VS4=(1-I2R(ZLI)/50)*bj_PI
local real VT4=1400/2*Cos(VS4)
local real VR4=500/2*Sin(VS4)
local real x=YEI(J6I+VT4*Cos(a)-VR4*Sin(a))
local real y=YHI(J7I+VT4*Sin(a)+VR4*Cos(a))
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local group g
local integer WTI=GetUnitAbilityLevel(XSI,1093751370)
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and ZLI>0)or ZLI>100 or NWI(XSI)then
call KCI(x,y,300)
call SetUnitVertexColor(XSI,255,255,255,255)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093751370 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093751370,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808206,false)
call SetUnitPathing(XSI,true)
call ZYI(QY1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if ModuloInteger(ZLI,10)==0 then
call KCI(x,y,200)
endif
call SaveInteger(ZY,(V0I),(34),(ZLI+1))
call SetUnitX(XSI,x)
call SetUnitY(XSI,y)
call SetUnitFacing(XSI,(a+VS4-bj_PI/2)*bj_RADTODEG)
set g=ZJI()
set EMI=QY1
set OK=XSI
set ESI=XSI
set ENI=GetUnitAbilityLevel(XSI,1093751370)
call GroupEnumUnitsInRange(g,x,y,325,Condition(function S5I))
call ForGroup(g,function VM4)
call ZYI(g)
endif
set t=null
set XSI=null
set g=null
set QY1=null
return false
endfunction
function VP4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real a=JPI(J4I,J5I,GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
local real J6I=J4I+1400/2*Cos(a)
local real J7I=J5I+1400/2*Sin(a)
call SetUnitState(XSI,UNIT_STATE_LIFE,GetUnitState(XSI,UNIT_STATE_LIFE)-GetUnitState(XSI,UNIT_STATE_LIFE)*0.1)
call V5I(XSI,4301,2)
call V5I(XSI,4415,2)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VN4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(189),((J4I)*1.0))
call SaveReal(ZY,(V0I),(190),((J5I)*1.0))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveReal(ZY,(V0I),(13),((a)*1.0))
call SaveGroupHandle(ZY,(V0I),(133),(ZJI()))
call SetUnitPathing(XSI,false)
call SetUnitVertexColor(XSI,255,255,255,50)
call KKI(XSI,1093808206)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093751370,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808206,true)
set t=null
set XSI=null
endfunction
function VQ4 takes nothing returns boolean
if GetSpellAbilityId()==1093751370 then
call VP4()
endif
return false
endfunction
function ZB1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VQ4))
set t=null
endfunction
function VU4 takes nothing returns nothing
local unit XSI=ETI
local unit XTI=GetEnumUnit()
call XNI(XSI,XTI,1,40+20*ERI)
call JWI("Doodads\\Cinematic\\FireTrapUp\\FireTrapUp.mdl",XTI,"origin",1)
set XSI=null
set XTI=null
endfunction
function W04 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093751371)
local group g
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set OK=XSI
set ETI=XSI
set ERI=WTI
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XSI),GetUnitY(XSI),1025,Condition(function SOI))
call ForGroup(g,function VU4)
call ZYI(g)
set g=null
endif
set t=null
set XSI=null
return false
endfunction
function WI4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit W14=(LoadUnitHandle(ZY,(V0I),(589)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if IsUnitIllusion(GetEventDamageSource())==true then
call JII(W14,GetEventDamage())
endif
else
if GetUnitX(W14)!=x or GetUnitY(W14)!=y then
call SetUnitPosition(W14,x,y)
endif
if GetUnitY(XSI)!=x or GetUnitY(XSI)!=y then
call SetUnitPosition(XSI,x,y)
endif
endif
if GetTriggerEvalCount(t)==1 then
call PauseUnit(XSI,true)
endif
set t=null
set W14=null
set XSI=null
return false
endfunction
function WO4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit W24=(LoadUnitHandle(ZY,(V0I),(588)))
local unit W14=(LoadUnitHandle(ZY,(V0I),(589)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local unit YT2=(LoadUnitHandle(ZY,(V0I),(239)))
local integer WTI=GetUnitAbilityLevel(XSI,1093751371)
local group g
local unit T0I
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call StopSound(OF,false,false)
call ShowUnit(W24,false)
call ShowUnit(YT2,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ShowUnit(XSI,true)
call UnitRemoveAbility(XSI,1093678162)
call SetUnitInvulnerable(XSI,false)
call PauseUnit(XSI,false)
if GetLocalPlayer()==GetOwningPlayer(XSI)then
call ClearSelection()
call SelectUnit(XSI,true)
endif
call SetUnitState(XSI,UNIT_STATE_LIFE,1)
set T0I=CreateUnit(GetOwningPlayer(GetKillingUnit()),1697656901,0,0,0)
call UnitRemoveBuffs(XSI,true,true)
call UnitRemoveAbility(XSI,1097167980)
call UnitDamageTarget(T0I,XSI,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set T0I=null
else
if GetTriggerEvalCount(t)==1 then
call SetUnitFlyHeight(W14,0,200)
elseif GetTriggerEvalCount(t)==2 then
call PauseUnit(W14,false)
call UnitApplyTimedLife(W14,1112820806,0.1)
call StopSound(OF,false,false)
call StartSound(AF)
call DestroyEffect(AddSpecialEffect("war3mapImported\\FireNova2.mdx",GetUnitX(W24),GetUnitY(W24)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ShowUnit(XSI,true)
call UnitRemoveAbility(XSI,1093678162)
call SetUnitInvulnerable(XSI,false)
call SetUnitAnimationByIndex(XSI,8)
call QueueUnitAnimation(XSI,"idle")
call PauseUnit(XSI,false)
if GetLocalPlayer()==GetOwningPlayer(XSI)then
call ClearSelection()
call SelectUnit(XSI,true)
endif
call ShowUnit(W24,false)
call ShowUnit(YT2,false)
call SetUnitState(XSI,UNIT_STATE_LIFE,GetUnitState(XSI,UNIT_STATE_MAX_LIFE))
call SetUnitState(XSI,UNIT_STATE_MANA,GetUnitState(XSI,UNIT_STATE_MAX_MANA))
set T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call KKI(T0I,1093753428)
call SetUnitAbilityLevel(T0I,1093753428,WTI)
call IssueImmediateOrder(T0I,"stomp")
set T0I=null
endif
endif
set t=null
set XSI=null
set W24=null
set YT2=null
set W14=null
return false
endfunction
function W34 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local unit W24
local unit W14
local unit YT2=CreateUnit(GetOwningPlayer(XSI),1747993420,GetUnitX(XSI),GetUnitY(XSI),0)
local integer WTI=GetUnitAbilityLevel(XSI,1093751371)
local unit T0I
set W24=CreateUnit(GetOwningPlayer(XSI),1747993176,x,y,0)
if WTI==1 then
set W14=CreateUnit(GetOwningPlayer(XSI),1747993430,x,y,0)
elseif WTI==2 then
set W14=CreateUnit(GetOwningPlayer(XSI),1747993432,x,y,0)
elseif WTI==3 then
set W14=CreateUnit(GetOwningPlayer(XSI),1747993431,x,y,0)
endif
call AddSpecialEffectTarget("war3mapImported\\PhoenixDown_2.mdl",W24,"origin")
if GetLocalPlayer()==GetOwningPlayer(XSI)then
call ClearSelection()
call SelectUnit(W14,true)
endif
call KCI(x,y,400)
call ShowUnit(XSI,false)
call KKI(XSI,1093678162)
call TZI(XSI,0,0)
call SetUnitInvulnerable(XSI,true)
call UnitRemoveBuffs(XSI,true,true)
call StartSound(OF)
call UnitRemoveAbility(W14,1098015094)
call UnitApplyTimedLife(W24,1112820806,6.1)
call UnitApplyTimedLife(YT2,1112820806,6.1)
call UnitApplyTimedLife(W14,1112820806,6.1)
call TriggerRegisterTimerEvent(t,5.2,false)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function WO4))
call TriggerRegisterUnitEvent(t,W14,EVENT_UNIT_DEATH)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(588),(W24))
call SaveUnitHandle(ZY,(V0I),(589),(W14))
call SaveUnitHandle(ZY,(V0I),(239),(YT2))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XSI))*1.0))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,W14,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function W04))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,W14,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,W14,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function WI4))
call SaveUnitHandle(ZY,(V0I),(589),(W14))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XSI))*1.0))
set t=null
set XSI=null
set W24=null
set W14=null
endfunction
function W44 takes nothing returns boolean
if GetSpellAbilityId()==1093751371 then
call W34()
endif
return false
endfunction
function ZG1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W44))
call YVI(1093687350)
call YVI(1093753428)
set t=null
endfunction
function W54 takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+EPI)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BirdShitTarget_1.mdx",GetEnumUnit(),"origin"))
endfunction
function W64 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group g
local integer WTI=GetUnitAbilityLevel(XSI,1093809986)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",x,y))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set g=ZJI()
set EPI=50+75*WTI
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,425,Condition(function SEI))
call ForGroup(g,function W54)
call ZYI(g)
set t=null
set XSI=null
set g=null
return false
endfunction
function W74 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call TriggerRegisterTimerEvent(t,3,false)
call TriggerAddCondition(t,Condition(function W64))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
if IsPlayerAlly(GetOwningPlayer(XSI),GetLocalPlayer())or XJI(GetLocalPlayer())then
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect("war3mapImported\\BirdShit_1.mdx",x,y)))
else
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect("",x,y)))
endif
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(XSI))or XJI(GetLocalPlayer())then
call PingMinimapEx(x,y,3,255,0,0,false)
call KEI(YF,x,y)
endif
call KZI(GetOwningPlayer(XSI),4,x,y,500)
call SetUnitState(XSI,UNIT_STATE_LIFE,GetUnitState(XSI,UNIT_STATE_LIFE)*0.9)
set t=null
set XSI=null
endfunction
function W84 takes nothing returns boolean
if GetSpellAbilityId()==1093809986 then
call W74()
endif
return false
endfunction
function ZC1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W84))
set t=null
endfunction
function W94 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call UnitRemoveAbility(XTI,1093809968)
call UnitRemoveAbility(XTI,1110459723)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEvalCount(t)>4 then
call UnitRemoveAbility(XTI,1093809968)
call UnitRemoveAbility(XTI,1110459723)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call XNI(XSI,XTI,1,16+12*WTI)
else
call XNI(XSI,XTI,1,16+12*WTI)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function WA4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real x=DE2+12*Cos(a)
local real y=DF2+12*Sin(a)
call SetUnitX(XTI,x)
call SetUnitY(XTI,y)
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
if GetTriggerEvalCount(t)>25 then
call KCI(x,y,100)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function WB4 takes unit XSI,unit XTI,real x,real y,real a returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093809969)
call SetUnitPosition(XTI,GetUnitX(XTI),GetUnitY(XTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(137),((a*bj_DEGTORAD)*1.0))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XTI))*1.0))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerAddCondition(t,Condition(function WA4))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",XTI,"chest")))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerAddCondition(t,Condition(function W94))
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093809968,false)
call KKI(XTI,1093809968)
set t=null
endfunction
function WC4 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EQI)==false then
if J8I(F0I,GetEnumUnit())<24 or RAbsBJ(Cos(JRI(F0I,GetEnumUnit())-FOI))<0.26 then
call GroupAddUnit(EQI,GetEnumUnit())
if Sin((JRI(F0I,GetEnumUnit())-FOI)*bj_DEGTORAD)<0 then
call WB4(EUI,GetEnumUnit(),FII,F1I,FOI-90)
else
call WB4(EUI,GetEnumUnit(),FII,F1I,FOI+90)
endif
endif
endif
endfunction
function WD4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local group g
if GetTriggerEvalCount(t)>125 then
call KillUnit(KRI)
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set x=x+8*Cos(a)
set y=y+8*Sin(a)
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
set OK=XSI
set FII=x
set F1I=y
set FOI=a*bj_RADTODEG
set EQI=BA2
set EUI=XSI
set F0I=KRI
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,225,Condition(function SOI))
call ForGroup(g,function WC4)
call ZYI(g)
endif
set t=null
set XSI=null
return false
endfunction
function WE4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real J6I=GetSpellTargetX()
local real J7I=GetSpellTargetY()
local real B92=Atan2(J7I-GetUnitY(XSI),J6I-GetUnitX(XSI))
local integer WTI=GetUnitAbilityLevel(XSI,1093809969)
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747993665,GetUnitX(XSI),GetUnitY(XSI),B92*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,0.01,true)
call TriggerAddCondition(t,Condition(function WD4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(137),((B92)*1.0))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XSI))*1.0))
call SaveInteger(ZY,(V0I),(5),(WTI))
call SaveGroupHandle(ZY,(V0I),(187),(ZJI()))
set t=null
set XSI=null
endfunction
function WF4 takes nothing returns boolean
if GetSpellAbilityId()==1093809969 then
call WE4()
endif
return false
endfunction
function ZF1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WF4))
set t=null
endfunction
function WG4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real Q1I=(LoadReal(ZY,(GetHandleId(XSI)),(681)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if((TimerGetElapsed(M))-Q1I<0.249)==false or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(XSI,1093753396)
call UnitRemoveAbility(XSI,1093753409)
call UnitRemoveAbility(XSI,1093753410)
call UnitRemoveAbility(XSI,1093753401)
call UnitRemoveAbility(XSI,1110459478)
endif
set t=null
set XSI=null
return false
endfunction
function WH4 takes unit XSI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WZ4
call TriggerRegisterTimerEvent(t,0.25,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function WG4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(GetHandleId(XSI)),(681),(((TimerGetElapsed(M)))*1.0))
if F6I==1 then
set WZ4=1093753396
call UnitRemoveAbility(XSI,1093753409)
call UnitRemoveAbility(XSI,1093753410)
call UnitRemoveAbility(XSI,1093753401)
elseif F6I==2 then
set WZ4=1093753409
call UnitRemoveAbility(XSI,1093753396)
call UnitRemoveAbility(XSI,1093753410)
call UnitRemoveAbility(XSI,1093753401)
elseif F6I==3 then
set WZ4=1093753410
call UnitRemoveAbility(XSI,1093753396)
call UnitRemoveAbility(XSI,1093753409)
call UnitRemoveAbility(XSI,1093753401)
elseif F6I==4 then
set WZ4=1093753401
call UnitRemoveAbility(XSI,1093753396)
call UnitRemoveAbility(XSI,1093753409)
call UnitRemoveAbility(XSI,1093753410)
endif
call KKI(XSI,WZ4)
call UnitMakeAbilityPermanent(XSI,true,WZ4)
set t=null
endfunction
function WV4 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local real XPI=(15*F6I+0.06*GetUnitState(XTI,UNIT_STATE_MAX_LIFE))/5
if F7I==XTI then
elseif IsUnitType(XTI,UNIT_TYPE_HERO)==false then
call XNI(F7I,XTI,3,XPI)
else
call XNI(F7I,XTI,3,XPI)
if XDI(XTI)==false then
call WH4(XTI)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireRayTarget.mdx",XTI,"origin"))
call KZI(GetOwningPlayer(XTI),2,GetUnitX(F7I),GetUnitY(F7I),500)
endif
set XTI=null
endfunction
function WW4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real WX4=GetUnitFacing(XSI)
local real a=WX4*bj_DEGTORAD
local location l1=GetUnitLoc(XSI)
local real WY4=GetLocationZ(l1)
local location l2=Location(GetUnitX(XSI)+F2I*Cos(a),GetUnitY(XSI)+F2I*Sin(a))
local real WJ4=GetLocationZ(l2)
local lightning WK4=(LoadLightningHandle(ZY,(V0I),(676)))
local lightning WL4=(LoadLightningHandle(ZY,(V0I),(677)))
local lightning WM4=(LoadLightningHandle(ZY,(V0I),(678)))
local lightning WN4=(LoadLightningHandle(ZY,(V0I),(679)))
local lightning WS4=(LoadLightningHandle(ZY,(V0I),(680)))
local real WT4=1
local real J4I
local real J5I
local real WR4
local real WP4
local real WQ4
local real WU4
local real X04
local real XI4
local real X14
local real XO4
local real X24
local real X34
local real X44
local real X54
local real X64
local real X74
local real X84
local real X94
local real XA4
local real XB4
local real XC4
local real XD4
local real XE4
local real XF4
local real XG4
local real XH4
local real XZ4
local real XV4
local real XW4
local real XX4
local real XY4
local real XJ4
local real XK4
local group g
local real x
local real y
local integer i
local real XL4
local real XM4
local real XN4
local boolean XS4=FALSE
local boolean XT4=false
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit XR4=null
local unit DriftTarget=null
local real XP4
local real XQ4
local real XU4
local real Y04=(LoadReal(ZY,(V0I),(688)))
local boolean YI4=(LoadBoolean(ZY,(V0I),(689)))
local boolean Y14=(LoadBoolean(ZY,(V0I),(672)))
local real YO4
local ubersplat N5I
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
if GetUnitCurrentOrder(XSI)==852001 then
call DisableTrigger(t)
call Y8I(XSI)
call EnableTrigger(t)
endif
call RemoveLocation(l1)
call RemoveLocation(l2)
if IsUnitPaused(XSI)==false and(GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)then
set J4I=GetUnitX(XSI)
set J5I=GetUnitY(XSI)
if GetIssuedOrderId()!=852490 and GetIssuedOrderId()!=852185 and GetIssuedOrderId()!=852600 then
call DisableTrigger(t)
call Y8I(XSI)
call EnableTrigger(t)
endif
if GetIssuedOrderId()==851971 then
if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
set x=GetUnitX(GetOrderTargetUnit())
set y=GetUnitY(GetOrderTargetUnit())
else
set x=GetOrderPointX()
set y=GetOrderPointY()
endif
set XL4=JPI(x,y,J4I,J5I)
if XL4<0 then
set XL4=XL4+360
endif
set XN4=WX4-XL4
if XN4<0 then
set XN4=XN4+360
endif
if XN4<180 then
set XS4=true
set XM4=WX4+6
else
set XT4=true
set XM4=WX4-6
endif
set Y04=JPI(x,y,J4I,J5I)+180
call SaveReal(ZY,(V0I),(688),((Y04)*1.0))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT or GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitState(XSI,UNIT_STATE_MANA)<10 or NVI(XSI)or WEI(XSI)or IsUnitPaused(XSI)or XKI(XSI)or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==-1 then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093753395 or GetSpellAbilityId()==1093751371 or GetSpellAbilityId()==1093809992))then
call SaveInteger(ZY,(GetHandleId((XSI))),((4312)),(2))
if((LoadInteger(ZY,(GetHandleId((XSI))),((4311))))==1)==false then
call UnitRemoveAbility(XSI,1096971630)
endif
call SetUnitPathing(XSI,true)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XSI,1093808181)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753395,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808181,false)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093753177 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753177,true)
endif
call DestroyLightning(WK4)
call DestroyLightning(WL4)
call DestroyLightning(WM4)
call DestroyLightning(WN4)
call DestroyLightning(WS4)
call StopSound(XF,false,true)
endif
if GetUnitState(XSI,UNIT_STATE_LIFE)<50 then
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==String2OrderIdBJ("immolation")then
set YI4=true
endif
if GetIssuedOrderId()==String2OrderIdBJ("unimmolation")then
set YI4=false
endif
call SaveBoolean(ZY,(V0I),(689),(YI4))
else
set XL4=WX4-Y04
if XL4<-180 then
set XL4=XL4+360
elseif XL4>180 then
set XL4=XL4-360
endif
set YO4=1
if ZLI<35 and Y14==true then
set YO4=7
endif
if XL4<(-1*YO4)then
set WX4=WX4+YO4
elseif XL4>YO4 then
set WX4=WX4-YO4
else
set Y14=false
call SaveBoolean(ZY,(V0I),(672),(Y14))
set WX4=Y04
endif
if((LoadInteger(ZY,(GetHandleId((XSI))),((4301))))==1)==false then
call SetUnitFacing(XSI,WX4)
endif
set a=WX4*bj_DEGTORAD
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
set WR4=F2I
set J4I=GetUnitX(XSI)+50*Cos(a)
set J5I=GetUnitY(XSI)+50*Sin(a)
call KCI(J4I,J5I,200)
set F8I=ZJI()
set OK=XSI
set i=0
loop
exitwhen i*50>F2I or XR4!=null
set x=J4I+i*50*Cos(a)
set y=J5I+i*50*Sin(a)
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,100,Condition(function SOI))
call GroupAddGroup(g,F8I)
call GroupEnumUnitsInRange(g,x,y,100,Condition(function SYI))
set XR4=FirstOfGroup(g)
call ZYI(g)
if ModuloInteger(ZLI,10)==0 then
if ModuloInteger(i,3)==0 then
call KZI(GetOwningPlayer(XSI),2,x,y,225)
endif
endif
set i=i+1
endloop
if YI4 and NZI(XSI)==false then
set XU4=a
set XP4=YEI(GetUnitX(XSI)+5*Cos(XU4))
set XQ4=YHI(GetUnitY(XSI)+5*Sin(XU4))
call KCI(XP4,XQ4,200)
call SetUnitX(XSI,XP4)
call SetUnitY(XSI,XQ4)
endif
set F7I=XSI
set F6I=GetUnitAbilityLevel(XSI,1093753177)
call RemoveSavedHandle(ZY,(V0I),(17))
set XTI=XR4
if XTI!=null then
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
endif
set F9I=(10+5*F6I)+(2+2*F6I)*GetHeroLevel(XSI)
set F9I=F9I/5
if ModuloInteger(ZLI,10)==0 then
call SetUnitState(XSI,UNIT_STATE_MANA,GetUnitState(XSI,UNIT_STATE_MANA)-(0.04*GetUnitState(XSI,UNIT_STATE_MAX_MANA)/5.0))
if XTI!=null then
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),200,Condition(function SOI))
call GroupAddGroup(g,F8I)
call ZYI(g)
endif
call ForGroup(F8I,function WV4)
endif
call ZYI(F8I)
set g=null
set F8I=null
if KMI(XSI)==false then
if XTI!=null then
set WR4=J8I(XSI,XTI)
endif
set WP4=J4I
set WQ4=J5I
set WU4=WY4+200
set X04=WP4+WR4*Cos(a)
set XI4=WQ4+WR4*Sin(a)
set X14=WJ4
set XO4=J4I+F3I*Cos((WX4-90)*bj_DEGTORAD)
set X24=J5I+F4I*Cos((WX4-90)*bj_DEGTORAD)
set X34=WY4+200
set X44=XO4+WR4*Cos(a)
set X54=X24+WR4*Sin(a)
set X64=WJ4
set X74=J4I+F3I*Cos((WX4+90)*bj_DEGTORAD)
set X84=J5I+F4I*Cos((WX4+90)*bj_DEGTORAD)
set X94=WY4+200
set XA4=X74+WR4*Cos(a)
set XB4=X84+WR4*Sin(a)
set XC4=WJ4
set XD4=J4I
set XE4=J5I
set XF4=WY4+200+F5I
set XG4=XD4+WR4*Cos(a)
set XH4=XE4+WR4*Sin(a)
set XZ4=WJ4
set XV4=J4I
set XW4=J5I
set XX4=WY4+200-F5I
set XY4=XV4+WR4*Cos(a)
set XJ4=XW4+WR4*Sin(a)
set XK4=WJ4
if ModuloInteger(ZLI,10)==0 and WR4==F2I then
set x=GetUnitX(XSI)+(F2I)*Cos(a)
set y=GetUnitY(XSI)+(F2I)*Sin(a)
call DestroyEffect(AddSpecialEffect("war3mapImported\\FireRayTarget.mdx",x,y))
endif
if ModuloInteger(ZLI,10)==0 then
call SetSoundPosition(XF,GetUnitX(XSI),GetUnitY(XSI),100)
set x=GetUnitX(XSI)+(WR4)*Cos(a)
set y=GetUnitY(XSI)+(WR4)*Sin(a)
set N5I=CreateUbersplat(x,y,"SRAY",255,255,255,255,false,false)
call SetUbersplatRenderAlways(N5I,true)
call N6I(N5I,10)
set N5I=null
endif
call MoveLightningEx(WK4,false,WP4,WQ4,WU4,X04,XI4,X14)
call MoveLightningEx(WL4,false,XO4,X24,X34,X44,X54,X64)
call MoveLightningEx(WM4,false,X74,X84,X94,XA4,XB4,XC4)
call MoveLightningEx(WN4,false,XD4,XE4,XF4,XG4,XH4,XZ4)
call MoveLightningEx(WS4,false,XV4,XW4,XX4,XY4,XJ4,XK4)
if XJI(GetLocalPlayer())then
set WT4=1
endif
call SetLightningColor(WK4,1.00,1.00,1.00,WT4)
call SetLightningColor(WL4,1.00,1.00,1.00,WT4)
call SetLightningColor(WM4,1.00,1.00,1.00,WT4)
call SetLightningColor(WN4,1.00,1.00,1.00,WT4)
call SetLightningColor(WS4,1.00,1.00,1.00,WT4)
endif
endif
set t=null
set XSI=null
set WK4=null
set WL4=null
set WM4=null
set WN4=null
set WS4=null
set l1=null
set l2=null
return false
endfunction
function Y24 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real a=JPI(GetUnitX(XSI),GetUnitY(XSI),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
local real J6I=YEI(GetUnitX(XSI)+F2I*Cos(a))
local real J7I=YHI(GetUnitY(XSI)+F2I*Sin(a))
local lightning WK4=AddLightning("SRAY",false,GetUnitX(XSI),GetUnitY(XSI),J6I,J7I)
local lightning WL4=AddLightning("SRAY",false,GetUnitX(XSI),GetUnitY(XSI),J6I,J7I)
local lightning WM4=AddLightning("SRAY",false,GetUnitX(XSI),GetUnitY(XSI),J6I,J7I)
local lightning WN4=AddLightning("SRAY",false,GetUnitX(XSI),GetUnitY(XSI),J6I,J7I)
local lightning WS4=AddLightning("SRAY",false,GetUnitX(XSI),GetUnitY(XSI),J6I,J7I)
call SetUnitState(XSI,UNIT_STATE_LIFE,GetUnitState(XSI,UNIT_STATE_LIFE)-GetUnitState(XSI,UNIT_STATE_LIFE)*0.25)
call SetUnitFacing(XSI,a*bj_RADTODEG)
call StartSound(XF)
call SetSoundPosition(XF,GetUnitX(XSI),GetUnitY(XSI),100)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WW4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(13),((a)*1.0))
call SaveReal(ZY,(V0I),(688),((a*bj_RADTODEG)*1.0))
call SaveLightningHandle(ZY,(V0I),(676),(WK4))
call SaveLightningHandle(ZY,(V0I),(677),(WL4))
call SaveLightningHandle(ZY,(V0I),(678),(WM4))
call SaveLightningHandle(ZY,(V0I),(679),(WN4))
call SaveLightningHandle(ZY,(V0I),(680),(WS4))
call SaveBoolean(ZY,(V0I),(689),(false))
call SaveBoolean(ZY,(V0I),(672),(true))
call SaveReal(ZY,(V0I),(688),((a*bj_RADTODEG)*1.0))
call SaveReal(ZY,(V0I),(23),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(XSI))*1.0))
call KKI(XSI,1096971630)
call SaveInteger(ZY,(GetHandleId((XSI))),((4312)),(1))
call SetUnitPathing(XSI,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753395,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093808181,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753177,false)
call KKI(XSI,1093753395)
call UnitMakeAbilityPermanent(XSI,true,1093753395)
call KKI(XSI,1093808181)
call UnitMakeAbilityPermanent(XSI,true,1093808181)
call TriggerEvaluate(t)
set t=null
set XSI=null
set XSI=null
set WK4=null
set WL4=null
set WM4=null
set WN4=null
set WS4=null
endfunction
function Y34 takes nothing returns boolean
if GetSpellAbilityId()==1093753177 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
else
call Y24()
endif
endif
return false
endfunction
function ZE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function Y34))
call N9I(1093753396)
call N9I(1093753409)
call N9I(1093753410)
call N9I(1093753401)
set t=null
endfunction
function Y44 takes nothing returns nothing
call XNI(FAI,GetEnumUnit(),1,FCI)
endfunction
function Y54 takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+FCI)
endfunction
function Y64 takes unit XSI,unit KRI,real UC3,unit T0I,unit XTI returns nothing
local group g=ZJI()
local group g1=ZJI()
local group g2=ZJI()
local real x=GetUnitX(KRI)
local real y=GetUnitY(KRI)
set FAI=XSI
set FBI=T0I
set FCI=(GetUnitAbilityLevel(XSI,1093753176)*20+10)*UC3
set OK=XSI
call GroupEnumUnitsInRange(g1,x,y,425,Condition(function SOI))
if XSI!=XTI then
call GroupEnumUnitsInRange(g2,GetUnitX(XSI),GetUnitY(XSI),425,Condition(function SOI))
endif
call GroupAddGroup(g1,g)
call GroupAddGroup(g2,g)
call ForGroup(g,function Y44)
call GroupClear(g)
call GroupClear(g1)
call GroupClear(g2)
set OK=XSI
call GroupEnumUnitsInRange(g1,x,y,425,Condition(function SEI))
if XSI!=XTI then
call GroupEnumUnitsInRange(g2,GetUnitX(XSI),GetUnitY(XSI),425,Condition(function SEI))
endif
call GroupAddGroup(g1,g)
call GroupAddGroup(g2,g)
call ForGroup(g,function Y54)
call ZYI(g)
call ZYI(g1)
call ZYI(g2)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",x,y))
if XSI!=XTI then
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",GetUnitX(XSI),GetUnitY(XSI)))
endif
call KillUnit(KRI)
call ShowUnit(KRI,false)
set g=null
set g1=null
set g2=null
endfunction
function Y74 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local unit Y84=(LoadUnitHandle(ZY,(V0I),(393)))
local real UC3=(LoadReal(ZY,(V0I),(685)))
local real J6I
local real J7I
local real x
local real y
local real a
local real r=12
local integer WTI=GetUnitAbilityLevel(XSI,1093753176)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
set J6I=GetUnitX(XTI)
set J7I=GetUnitY(XTI)
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call RemoveSavedHandle(ZY,(V0I),(17))
call SaveUnitHandle(ZY,(V0I),(17),(null))
elseif XTI==null then
set J6I=(LoadReal(ZY,(V0I),(47)))
set J7I=(LoadReal(ZY,(V0I),(48)))
else
set J6I=GetUnitX(XTI)
set J7I=GetUnitY(XTI)
endif
set a=JPI(GetUnitX(Y84),GetUnitY(Y84),J6I,J7I)
call SetUnitFacing(Y84,a)
set x=GetUnitX(Y84)+r*Cos(a*bj_DEGTORAD)
set y=GetUnitY(Y84)+r*Sin(a*bj_DEGTORAD)
call SetUnitX(Y84,x)
call SetUnitY(Y84,y)
if JAI(x,y,J6I,J7I)<r*2 then
call Y64(XSI,Y84,UC3,T0I,XTI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
set Y84=null
set T0I=null
return false
endfunction
function Y94 takes unit XSI,unit Y84,unit XTI,real UC3,unit T0I returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local group g
local unit XR4
call SetUnitVertexColor(Y84,255,255,255,255)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Y74))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(393),(Y84))
call SaveReal(ZY,(V0I),(47),((0)*1.0))
call SaveReal(ZY,(V0I),(48),((0)*1.0))
call SaveReal(ZY,(V0I),(685),((UC3)*1.0))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
set t=null
endfunction
function YA4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local unit YB4=(LoadUnitHandle(ZY,(V0I),(393)))
local unit YC4=(LoadUnitHandle(ZY,(V0I),(394)))
local unit YD4=(LoadUnitHandle(ZY,(V0I),(395)))
local unit YE4=(LoadUnitHandle(ZY,(V0I),(396)))
local integer WTI=GetUnitAbilityLevel(XSI,1093753176)
local real a=GetUnitFacing(XSI)
local real x
local real y
local group g
local group g2
local real NA2=-1*360*0.02/4
local real a2
local real T8I
local real UC3=(LoadReal(ZY,(V0I),(685)))
local real PB2
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093753394 then
call Y94(XSI,YB4,GetSpellTargetUnit(),UC3,T0I)
call RemoveSavedHandle(ZY,(V0I),(393))
call Y94(XSI,YC4,GetSpellTargetUnit(),UC3,T0I)
call RemoveSavedHandle(ZY,(V0I),(394))
call Y94(XSI,YD4,GetSpellTargetUnit(),UC3,T0I)
call RemoveSavedHandle(ZY,(V0I),(395))
call Y94(XSI,YE4,GetSpellTargetUnit(),UC3,T0I)
call RemoveSavedHandle(ZY,(V0I),(396))
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753394,false)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753176,true)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetSpellAbilityId()==1093751371 then
if YB4!=null and KMI(YB4)==false then
call Y94(XSI,YB4,XSI,UC3,T0I)
endif
if YC4!=null and KMI(YC4)==false then
call Y94(XSI,YC4,XSI,UC3,T0I)
endif
if YD4!=null and KMI(YD4)==false then
call Y94(XSI,YD4,XSI,UC3,T0I)
endif
if YE4!=null and KMI(YE4)==false then
call Y94(XSI,YE4,XSI,UC3,T0I)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753394,false)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753176,true)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
if YB4!=null and KMI(YB4)==false then
set T8I=360*4/4.0
set a2=T8I+NA2*ZLI
set x=YEI(J4I+200*Cos(a2*bj_DEGTORAD))
set y=YHI(J5I+200*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(YB4,a2-90)
call SetUnitX(YB4,x)
call SetUnitY(YB4,y)
endif
if YC4!=null and KMI(YC4)==false then
set T8I=360*3/4.0
set a2=T8I+NA2*ZLI
set x=YEI(J4I+200*Cos(a2*bj_DEGTORAD))
set y=YHI(J5I+200*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(YC4,a2-90)
call SetUnitX(YC4,x)
call SetUnitY(YC4,y)
endif
if YD4!=null and KMI(YD4)==false then
set T8I=360*2/4.0
set a2=T8I+NA2*ZLI
set x=YEI(J4I+200*Cos(a2*bj_DEGTORAD))
set y=YHI(J5I+200*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(YD4,a2-90)
call SetUnitX(YD4,x)
call SetUnitY(YD4,y)
endif
if YE4!=null and KMI(YE4)==false then
set T8I=360*1/4.0
set a2=T8I+NA2*ZLI
set x=YEI(J4I+200*Cos(a2*bj_DEGTORAD))
set y=YHI(J5I+200*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(YE4,a2-90)
call SetUnitX(YE4,x)
call SetUnitY(YE4,y)
endif
if ZLI>625 or GetTriggerEventId()==EVENT_UNIT_DEATH then
if YB4!=null and KMI(YB4)==false then
call Y94(XSI,YB4,XSI,UC3,T0I)
endif
if YC4!=null and KMI(YC4)==false then
call Y94(XSI,YC4,XSI,UC3,T0I)
endif
if YD4!=null and KMI(YD4)==false then
call Y94(XSI,YD4,XSI,UC3,T0I)
endif
if YE4!=null and KMI(YE4)==false then
call Y94(XSI,YE4,XSI,UC3,T0I)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753394,false)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753176,true)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set UC3=RMinBJ(0.25+0.75*(I2R(ZLI)/500.0),1)
call SaveReal(ZY,(V0I),(685),((UC3)*1.0))
set PB2=0.25+(UC3-0.2)*2.5
call SetUnitScale(YB4,PB2,PB2,PB2)
call SetUnitScale(YC4,PB2,PB2,PB2)
call SetUnitScale(YD4,PB2,PB2,PB2)
call SetUnitScale(YE4,PB2,PB2,PB2)
if ZLI==450 then
call M7I(YF,GetOwningPlayer(XSI))
endif
if ZLI>425 then
if ModuloInteger(ZLI,10)==0 or ModuloInteger(ZLI,10)==1 or ModuloInteger(ZLI,10)==2 or ModuloInteger(ZLI,10)==3 or ModuloInteger(ZLI,10)==4 then
call SetUnitVertexColor(YB4,255,0,0,255)
call SetUnitVertexColor(YC4,255,0,0,255)
call SetUnitVertexColor(YD4,255,0,0,255)
call SetUnitVertexColor(YE4,255,0,0,255)
else
call SetUnitVertexColor(YB4,255,255,255,255)
call SetUnitVertexColor(YC4,255,255,255,255)
call SetUnitVertexColor(YD4,255,255,255,255)
call SetUnitVertexColor(YE4,255,255,255,255)
endif
endif
endif
endif
set t=null
set XSI=null
set YB4=null
set YC4=null
set YD4=null
set YE4=null
set T0I=null
return false
endfunction
function YF4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real x
local real y
local unit YB4
local unit YC4
local unit YD4
local unit YE4
local real a=GetUnitFacing(XSI)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,J4I,J5I,0)
call UnitAddAbility(T0I,1093808469)
call SetUnitState(XSI,UNIT_STATE_LIFE,GetUnitState(XSI,UNIT_STATE_LIFE)-GetUnitState(XSI,UNIT_STATE_LIFE)*0.1)
call KKI(XSI,1093753394)
call UnitMakeAbilityPermanent(XSI,true,1093753394)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753394,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093753176,false)
set x=GetUnitX(XSI)+200*Cos(bj_DEGTORAD*360*4/4.0*-1.0)
set y=GetUnitY(XSI)+200*Sin(bj_DEGTORAD*360*4/4.0*-1.0)
set YB4=CreateUnit(GetOwningPlayer(XSI),1747993429,x,y,360*4/4.0*-1.0)
set x=GetUnitX(XSI)+200*Cos(bj_DEGTORAD*360*3/4.0*-1.0)
set y=GetUnitY(XSI)+200*Sin(bj_DEGTORAD*360*3/4.0*-1.0)
set YC4=CreateUnit(GetOwningPlayer(XSI),1747993429,x,y,360*3/4.0*-1.0)
set x=GetUnitX(XSI)+200*Cos(bj_DEGTORAD*360*2/4.0*-1.0)
set y=GetUnitY(XSI)+200*Sin(bj_DEGTORAD*360*2/4.0*-1.0)
set YD4=CreateUnit(GetOwningPlayer(XSI),1747993429,x,y,360*2/4.0*-1.0)
set x=GetUnitX(XSI)+200*Cos(bj_DEGTORAD*360*1/4.0*-1.0)
set y=GetUnitY(XSI)+200*Sin(bj_DEGTORAD*360*1/4.0*-1.0)
set YE4=CreateUnit(GetOwningPlayer(XSI),1747993429,x,y,360*1/4.0*-1.0)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YA4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(393),(YB4))
call SaveUnitHandle(ZY,(V0I),(394),(YC4))
call SaveUnitHandle(ZY,(V0I),(395),(YD4))
call SaveUnitHandle(ZY,(V0I),(396),(YE4))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
set XSI=null
set YB4=null
set YC4=null
set YD4=null
set YE4=null
set T0I=null
endfunction
function YG4 takes nothing returns boolean
if GetSpellAbilityId()==1093753176 then
call YF4()
endif
return false
endfunction
function ZD1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YG4))
set t=null
endfunction
function YH4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer ZLI=(LoadInteger(ZY,(GetHandleId(XTI)),(627)))
local real YZ4=(LoadReal(ZY,(GetHandleId(XTI)),(628)))
local integer WTI=GetUnitAbilityLevel(XSI,1093751604)
local real XPI=(5+WTI*15)*Pow(2,IMinBJ(ZLI,4)-1)
set XPI=XPI+IMaxBJ(ZLI-4,0)*50
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
call KillUnit((LoadUnitHandle(ZY,(V0I),(45))))
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SaveInteger(ZY,(GetHandleId(XTI)),(627),(0))
call SaveReal(ZY,(GetHandleId(XTI)),(628),((0)*1.0))
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093751609 then
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
call KillUnit((LoadUnitHandle(ZY,(V0I),(45))))
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SaveInteger(ZY,(GetHandleId(XTI)),(627),(0))
call SaveReal(ZY,(GetHandleId(XTI)),(628),((0)*1.0))
if((LoadInteger(ZY,(GetHandleId((XTI))),((4293))))==1)then
call SetUnitInvulnerable(XTI,false)
endif
call XNI(XSI,XTI,1,XPI)
if((LoadInteger(ZY,(GetHandleId((XTI))),((4293))))==1)then
call SetUnitInvulnerable(XTI,true)
endif
call K3I(I2S(R2I(XPI))+"!",2,XTI,0.025,100,0,200,216)
endif
elseif(TimerGetElapsed(M))>YZ4 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
call KillUnit((LoadUnitHandle(ZY,(V0I),(45))))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SaveInteger(ZY,(GetHandleId(XTI)),(627),(0))
call SaveReal(ZY,(GetHandleId(XTI)),(628),((0)*1.0))
if((LoadInteger(ZY,(GetHandleId((XTI))),((4293))))==1)then
call SetUnitInvulnerable(XTI,false)
endif
call XNI(XSI,XTI,1,XPI)
if((LoadInteger(ZY,(GetHandleId((XTI))),((4293))))==1)then
call SetUnitInvulnerable(XTI,true)
endif
call K3I(I2S(R2I(XPI))+"!",2,XTI,0.025,100,0,200,216)
else
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
call SetUnitX((LoadUnitHandle(ZY,(V0I),(45))),GetUnitX(XTI))
call SetUnitY((LoadUnitHandle(ZY,(V0I),(45))),GetUnitY(XTI))
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function YV4 takes unit XSI,unit XTI returns nothing
local trigger t
local integer V0I
local integer WTI=GetUnitAbilityLevel(XSI,1093751604)
local unit KRI
if(LoadInteger(ZY,(GetHandleId(XTI)),(627)))>0 then
call SaveInteger(ZY,(GetHandleId(XTI)),(627),((LoadInteger(ZY,(GetHandleId(XTI)),(627)))+1))
call SaveReal(ZY,(GetHandleId(XTI)),(628),(((TimerGetElapsed(M))+8)*1.0))
else
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
set KRI=CreateUnit(GetOwningPlayer(XSI),1865429305,GetUnitX(XTI),GetUnitY(XTI),0)
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
endif
call SaveInteger(ZY,(GetHandleId(XTI)),(627),(1))
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\shamanyouranus-ShadowyMissile.mdl",XTI,"chest")))
else
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\shamanyouranus-ShadowyMissile.mdl",XTI,"origin")))
endif
call SaveReal(ZY,(GetHandleId(XTI)),(628),(((TimerGetElapsed(M))+10)*1.0))
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YH4))
set KRI=null
endif
call K3I("+"+I2S((LoadInteger(ZY,(GetHandleId(XTI)),(627)))),3,XTI,0.025,100,0,200,216)
call XNI(XSI,XTI,1,50)
set t=null
endfunction
function YW4 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),FEI)==false then
call GroupAddUnit(FEI,GetEnumUnit())
call YV4(FDI,GetEnumUnit())
endif
endfunction
function YX4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local integer ZLI=GetTriggerEvalCount(t)
local real a=(LoadReal(ZY,(V0I),(137)))
local real x=YEI(GetUnitX(KRI)+(20)*Cos(a))
local real y=YHI(GetUnitY(KRI)+(20)*Sin(a))
local group g
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local unit XTI
if ZLI==75 then
call ZYI(QY1)
call KillUnit(KRI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set OK=XSI
set FDI=XSI
set FEI=QY1
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,175,Condition(function S5I))
call ForGroup(g,function YW4)
set XTI=FirstOfGroup(g)
call ZYI(g)
endif
set t=null
set XSI=null
set KRI=null
set g=null
set XTI=null
set QY1=null
return false
endfunction
function YY4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=JPI(GetUnitX(XSI),GetUnitY(XSI),x,y)*bj_DEGTORAD
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747993394,GetUnitX(XSI),GetUnitY(XSI),a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function YX4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveGroupHandle(ZY,(V0I),(133),(ZJI()))
call KKI(XSI,1093751609)
set t=null
set XSI=null
set KRI=null
endfunction
function YJ4 takes nothing returns boolean
if GetSpellAbilityId()==1093751604 then
call YY4()
endif
return false
endfunction
function ZH1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YJ4))
set t=null
endfunction
function YK4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit YL4=GetSummonedUnit()
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SUMMON then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetUnitAbilityLevel(YL4,1110459457)>0 and GetOwningPlayer(GetSummoningUnit())==GetOwningPlayer(XSI)then
if IsUnitAlly(XTI,GetOwningPlayer(XSI))==true then
call SelectUnitAddForPlayer(YL4,GetOwningPlayer(XSI))
else
call IssueTargetOrder(YL4,"attack",XTI)
endif
endif
set t=null
set XSI=null
set XTI=null
set YL4=null
return false
endfunction
function YM4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call SaveInteger(ZY,(GetHandleId((XTI))),((4293)),(2))
call SetUnitInvulnerable(XTI,false)
call PauseUnit(XTI,false)
call ShowUnit(XTI,true)
call RemoveSavedHandle(ZY,(GetHandleId(XTI)),(673))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call ClearSelectionForPlayer(GetOwningPlayer(XTI))
call SelectUnitAddForPlayer(XTI,GetOwningPlayer(XTI))
call KEI(BF,GetUnitX(XTI),GetUnitY(XTI))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function YK4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call KKI(T0I,1093751605)
call SetUnitAbilityLevel(T0I,1093751605,GetUnitAbilityLevel(XSI,1093751608))
call IssueTargetOrderById(T0I,852274,XTI)
call IssueTargetOrderById(T0I,852274,XTI)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function YN4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093751608)
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit T0I=CreateUnit(GetOwningPlayer(XTI),1865429305,GetUnitX(XTI),GetUnitY(XTI),0)
call UnitApplyTimedLife(T0I,1112820806,2.6)
if IsUnitAlly(XTI,GetOwningPlayer(XSI))==false then
set T0I=CreateUnit(GetOwningPlayer(XSI),1865429305,GetUnitX(XTI),GetUnitY(XTI),0)
call UnitApplyTimedLife(T0I,1112820806,2.6)
endif
call SetUnitInvulnerable(XTI,true)
call PauseUnit(XTI,true)
call ShowUnit(XTI,false)
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect("war3mapImported\\WILLTHEALMIGHTY-Void5.mdx",GetUnitX(XTI),GetUnitY(XTI))))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YM4))
call SaveUnitHandle(ZY,(GetHandleId(XSI)),(673),(XTI))
call SaveInteger(ZY,(GetHandleId((XTI))),((4293)),(1))
set XSI=null
set XTI=null
set t=null
set T0I=null
endfunction
function YS4 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093751608 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true or ZXI(GetSpellTargetUnit())==false)then
call YN4()
endif
else
if GetSpellAbilityId()==1093751608 and GetSpellTargetUnit()!=GetTriggerUnit()and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true and(LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endif
return false
endfunction
function ZZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function YS4))
set t=null
endfunction
function YT4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=GetUnitAbilityLevel(XSI,1093751618)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetEventDamage()>5 then
call DisableTrigger(t)
call XNI(GetEventDamageSource(),GetTriggerUnit(),3,(0.1+0.1*WTI)*GetEventDamage())
call EnableTrigger(t)
endif
set XSI=null
set t=null
return false
endfunction
function YR4 takes nothing returns nothing
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local group g=ZJI()
local unit XSI=GetTriggerUnit()
local integer WTI=GetUnitAbilityLevel(XSI,1093751618)
local unit XTI
local trigger t
local integer V0I
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,475,Condition(function S5I))
set XTI=(LoadUnitHandle(ZY,(GetHandleId(XSI)),(673)))
if XTI!=null then
if JAI(GetUnitX(XTI),GetUnitY(XTI),x,y)<475 and IsUnitEnemy(XTI,GetOwningPlayer(XSI))==true then
call GroupAddUnit(g,XTI)
endif
endif
set XTI=GroupPickRandomUnit(g)
call ZYI(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Desecrate.mdx",x,y))
if XTI!=null then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,12,false)
call TriggerAddCondition(t,Condition(function YT4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\void.mdx",XTI,"chest")))
endif
set g=null
set XSI=null
set XTI=null
set t=null
endfunction
function YP4 takes nothing returns boolean
if GetSpellAbilityId()==1093751618 then
call YR4()
endif
return false
endfunction
function ZV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YP4))
set t=null
endfunction
function YQ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer ZLI=GetTriggerEvalCount(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093751617)
if ZLI==5 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if((LoadInteger(ZY,(GetHandleId((XTI))),((4293))))==1)then
call SetUnitInvulnerable(XTI,false)
endif
call XNI(XSI,XTI,1,4*(25+25*WTI))
if((LoadInteger(ZY,(GetHandleId((XTI))),((4293))))==1)then
call SetUnitInvulnerable(XTI,true)
endif
else
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function YU4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function YQ4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call TriggerEvaluate(t)
set t=null
set XSI=null
set XTI=null
endfunction
function J04 takes nothing returns boolean
if GetSpellAbilityId()==1093751617 and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true and ZXI(GetSpellTargetUnit())==false then
call YU4()
endif
return false
endfunction
function ZW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J04))
set t=null
endfunction
function JI4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call UnitRemoveAbility(XSI,1093751632)
set t=null
set XSI=null
return false
endfunction
function J14 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call KKI(XSI,1093751632)
call UnitMakeAbilityPermanent(XSI,true,1093751632)
call SetUnitAbilityLevel(XSI,1093751632,GetUnitAbilityLevel(XSI,1093751631))
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function JI4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function JO4 takes nothing returns boolean
if GetSpellAbilityId()==1093751631 then
call J14()
endif
return false
endfunction
function ZX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JO4))
set t=null
endfunction
function J24 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer ZLI=GetTriggerEvalCount(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real x
local real y
local real d
local real T2I
local real DE2=(LoadReal(ZY,(V0I),(23)))
local real DF2=(LoadReal(ZY,(V0I),(24)))
local real a=JPI(DE2,DF2,GetUnitX(XTI),GetUnitY(XTI))*bj_DEGTORAD
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitShareVision(KRI,GetOwningPlayer(XTI),false)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if GetTriggerUnit()!=KRI then
call KillUnit(KRI)
endif
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call UnitRemoveBuffs(KRI,true,true)
elseif ZLI<3/0.02 then
call SetUnitFacing(KRI,a*bj_RADTODEG)
else
if ZLI==4/0.02 then
call UnitShareVision(KRI,GetOwningPlayer(XTI),true)
endif
call SetUnitFacing(KRI,a*bj_RADTODEG)
set x=DE2+(280+FFI*ZLI*0.02)*0.02*Cos(a)
set y=DF2+(280+FFI*ZLI*0.02)*0.02*Sin(a)
call SetUnitPosition(KRI,x,y)
call SaveReal(ZY,(V0I),(23),((x)*1.0))
call SaveReal(ZY,(V0I),(24),((y)*1.0))
if JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))<20 then
set d=RMinBJ(JAI(x,y,(LoadReal(ZY,(V0I),(6))),(LoadReal(ZY,(V0I),(7)))),2000)
set T2I=d/2000*(100*GetUnitAbilityLevel(XSI,1093751633))
set T2I=RMaxBJ(T2I,50)
call KillUnit(KRI)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if NSI(XTI)==false or IsUnitVisible(XTI,GetOwningPlayer(XSI))==true then
call XNI(XSI,XTI,1,T2I)
call SUI(XSI,XTI,2.5)
endif
endif
endif
set t=null
set XSI=null
set XTI=null
set KRI=null
return false
endfunction
function J34 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real a=JPI(GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))*bj_DEGTORAD
local real x=YEI(GetUnitX(XSI)+150*Cos(a))
local real y=YHI(GetUnitY(XSI)+150*Sin(a))
local integer WTI=GetUnitAbilityLevel(XSI,1093751633)
local unit KRI
local integer WJI
local string s="effects\\Snipe Target.mdx"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(XSI))==false and XJI(GetLocalPlayer())==false then
set s=""
endif
if WTI==1 then
set WJI=1747993415
elseif WTI==2 then
set WJI=1747993393
elseif WTI==3 then
set WJI=1747993414
elseif WTI==4 then
set WJI=1747993416
endif
set KRI=CreateUnit(GetOwningPlayer(XSI),WJI,x,y,a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,KRI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,KRI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function J24))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(6),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(7),((GetUnitY(XSI))*1.0))
call SaveReal(ZY,(V0I),(23),((GetUnitX(KRI))*1.0))
call SaveReal(ZY,(V0I),(24),((GetUnitY(KRI))*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget(s,XTI,"overhead")))
set t=null
set XSI=null
set KRI=null
endfunction
function J44 takes nothing returns boolean
if GetSpellAbilityId()==1093751633 and ZXI(GetSpellTargetUnit())==false then
call J34()
endif
return false
endfunction
function ZY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J44))
call YVI(1093687350)
set t=null
endfunction
function J54 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1110459461)
call UnitRemoveAbility(XTI,1093751635)
set t=null
set XTI=null
return false
endfunction
function J64 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XTI,1110459463)
call UnitRemoveAbility(XTI,1093751860)
set t=null
set XTI=null
return false
endfunction
function J74 takes nothing returns nothing
local trigger t
local integer V0I
local integer WTI=GetUnitAbilityLevel(FGI,1093751861)
local boolean HZ2=false
if WTI==0 then
set WTI=GetUnitAbilityLevel(FGI,1093808949)
set HZ2=true
endif
if NKI(GetEnumUnit())==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function J54))
call SaveUnitHandle(ZY,(V0I),(17),(GetEnumUnit()))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093751635,false)
call KKI(GetEnumUnit(),1093751635)
endif
call XNI(FGI,GetEnumUnit(),1,WTI*50+200)
set t=null
endfunction
function J84 takes nothing returns nothing
local trigger t
local integer V0I
local integer WTI=GetUnitAbilityLevel(FGI,1093751861)
local boolean HZ2=false
if WTI==0 then
set WTI=GetUnitAbilityLevel(FGI,1093808949)
set HZ2=true
endif
if NKI(GetEnumUnit())==false then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function J64))
call SaveUnitHandle(ZY,(V0I),(17),(GetEnumUnit()))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093751860,false)
call KKI(GetEnumUnit(),1093751860)
endif
if HZ2 then
call XNI(FGI,GetEnumUnit(),1,WTI*50+50+75)
else
call XNI(FGI,GetEnumUnit(),1,WTI*50+50)
endif
set t=null
endfunction
function J94 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real x=(LoadReal(ZY,(V0I),(6)))
local real y=(LoadReal(ZY,(V0I),(7)))
local group g
local integer ZLI=GetTriggerEvalCount(t)
local fogmodifier KHI=(LoadFogModifierHandle(ZY,(V0I),(42)))
if ZLI==1 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",XSI,"chest"))
elseif ZLI==2 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",XSI,"chest"))
elseif ZLI==3 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",x,y))
elseif ZLI==4 then
set g=ZJI()
set OK=XSI
set FGI=XSI
call GroupEnumUnitsInRange(g,x,y,425,Condition(function SOI))
call ForGroup(g,function J74)
call ZYI(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))
elseif ZLI==5 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",x,y))
elseif ZLI==6 then
set g=ZJI()
set OK=XSI
set FGI=XSI
call GroupEnumUnitsInRange(g,x,y,425,Condition(function SOI))
call ForGroup(g,function J84)
call ZYI(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set g=null
return false
endfunction
function JA4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local string s=""
local fogmodifier KHI=CreateFogModifierRadius(GetOwningPlayer(XSI),FOG_OF_WAR_VISIBLE,x,y,350,true,true)
call FogModifierStart(KHI)
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(XSI))==true or XJI(GetLocalPlayer())then
set s="war3mapImported\\CallDown_4.mdx"
endif
call TriggerRegisterTimerEvent(t,0.1,false)
call TriggerRegisterTimerEvent(t,0.8,false)
call TriggerRegisterTimerEvent(t,1.6,false)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterTimerEvent(t,3.6,false)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function J94))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect(s,x,y)))
call SaveFogModifierHandle(ZY,(V0I),(42),(KHI))
set t=null
set XSI=null
endfunction
function JB4 takes nothing returns boolean
if GetSpellAbilityId()==1093751861 or GetSpellAbilityId()==1093808949 then
call JA4()
endif
return false
endfunction
function ZJ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JB4))
set t=null
endfunction
function JC4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer AO3=(LoadInteger(ZY,(V0I),(375)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer ZLI
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and(GetEventDamage()>20 or IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==true)then
set ZLI=(LoadInteger(ZY,(AO3),(34)))
if ZLI>0 then
call SaveInteger(ZY,(AO3),(34),(ZLI+1))
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function JD4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
if XMI(XSI)==false then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XSI,1093808951)
call UnitAddAbility(XSI,1093808706)
call UnitRemoveAbility(XSI,1093808706)
if(REI((XSI),F20[J50])!=null)then
call UnitAddAbility(XSI,1093808951)
endif
endif
set t=null
set XSI=null
return false
endfunction
function JE4 takes unit XSI returns nothing
local trigger t
local integer V0I
if XMI(XSI)==false then
call UnitRemoveAbility(XSI,1093808951)
call UnitAddAbility(XSI,1093808706)
call UnitRemoveAbility(XSI,1093808706)
if(REI((XSI),F20[J50])!=null)then
call UnitAddAbility(XSI,1093808951)
endif
else
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function JD4))
set t=null
endif
endfunction
function JF4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local integer WTI=GetUnitAbilityLevel(XSI,1093808697)
local integer AO3=V0I
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if IsUnitIllusion(GetAttacker())==true and GetUnitAbilityLevel(GetAttacker(),1093751895)>0 then
call JE4(GetAttacker())
call UnitRemoveAbility(GetAttacker(),1093751895)
endif
if GetAttacker()==XSI then
set ZLI=ZLI+1
if ZLI>3+WTI then
call UnitRemoveAbility(XSI,1093751895)
call UnitRemoveAbility(XSI,1110459466)
call JE4(XSI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function JC4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(375),(AO3))
endif
endif
else
call UnitRemoveAbility(XSI,1093751895)
call UnitRemoveAbility(XSI,1110459466)
call JE4(XSI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function JG4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,15,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function JF4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(34),(1))
call UnitRemoveAbility(XSI,1093808951)
call UnitAddAbility(XSI,1093808705)
call UnitRemoveAbility(XSI,1093808705)
if(REI((XSI),F20[J50])!=null)then
call UnitAddAbility(XSI,1093808951)
endif
set t=null
set XSI=null
endfunction
function JH4 takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==true and GetUnitTypeId(GetTriggerUnit())==1160786511 then
call JE4(GetTriggerUnit())
endif
return false
endfunction
function JZ4 takes nothing returns boolean
if GetSpellAbilityId()==1093808697 and GetUnitTypeId(GetTriggerUnit())==1160786510 then
call JG4()
endif
return false
endfunction
function ZK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JZ4))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function JH4))
set t=null
endfunction
function JV4 takes nothing returns boolean
local unit XTI=GetFilterUnit()
local unit XSI=FHI
local real J4I=FZI
local real J5I=FVI
local real DG2=FWI
local real DH2=FXI
local real x
local real y
local real a
local real d
if(XDI(GetFilterUnit())==false and IsUnitEnemy(OK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))then
set d=JAI(J4I,J5I,GetUnitX(XTI),GetUnitY(XTI))
set a=JPI(J4I,J5I,GetUnitX(XTI),GetUnitY(XTI))*bj_DEGTORAD
if d>FYI then
set x=GetUnitX(XTI)+11*Cos(a)
set y=GetUnitY(XTI)+11*Sin(a)
else
set x=GetUnitX(XTI)-11*Cos(a)
set y=GetUnitY(XTI)-11*Sin(a)
endif
call SetUnitX(XTI,x)
call SetUnitY(XTI,y)
endif
set XTI=null
set XSI=null
return false
endfunction
function JW4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real J4I=(LoadReal(ZY,(V0I),(6)))
local real J5I=(LoadReal(ZY,(V0I),(7)))
local real x
local real y
local integer i=0
local group g
if GetTriggerEvalCount(t)>(50*(2+0.5*GetUnitAbilityLevel(XSI,1093751637)))then
loop
exitwhen i>16
set i=i+1
endloop
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set FZI=J4I
set FVI=J5I
set FHI=XSI
set OK=XSI
loop
exitwhen i>16
set x=J4I+FYI*Cos(bj_DEGTORAD*360.0*i/16.0)
set y=J5I+FYI*Sin(bj_DEGTORAD*360.0*i/16.0)
set FWI=x
set FXI=y
call GroupEnumUnitsInRange(g,x,y,75,Condition(function JV4))
set i=i+1
endloop
call ZYI(g)
set g=null
endif
set t=null
set XSI=null
return false
endfunction
function JX4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real J4I=(LoadReal(ZY,(V0I),(6)))
local real J5I=(LoadReal(ZY,(V0I),(7)))
local real x
local real y
local integer i=0
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
loop
exitwhen i>16
set x=J4I+FYI*Cos(bj_DEGTORAD*360.0*i/16.0)
set y=J5I+FYI*Sin(bj_DEGTORAD*360.0*i/16.0)
set i=i+1
endloop
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect("war3mapImported\\KineticField_FX_Stand.mdx",J4I,J5I)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((J4I)*1.0))
call SaveReal(ZY,(V0I),(7),((J5I)*1.0))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function JW4))
set t=null
set XSI=null
return false
endfunction
function JY4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real J4I=GetSpellTargetX()
local real J5I=GetSpellTargetY()
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect("war3mapImported\\KineticField_FX_Start.mdx",J4I,J5I)))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(6),((J4I)*1.0))
call SaveReal(ZY,(V0I),(7),((J5I)*1.0))
call TriggerRegisterTimerEvent(t,1.2,false)
call TriggerAddCondition(t,Condition(function JX4))
call KZI(GetOwningPlayer(XSI),5.5,J4I,J5I,300)
set t=null
set XSI=null
endfunction
function JJ4 takes nothing returns boolean
if GetSpellAbilityId()==1093751637 then
call JY4()
endif
return false
endfunction
function ZL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JJ4))
set t=null
endfunction
function JK4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real J6I=(LoadReal(ZY,(V0I),(6)))
local real J7I=(LoadReal(ZY,(V0I),(7)))
local real x=GetUnitX(KRI)
local real y=GetUnitY(KRI)
local real a=JPI(x,y,J6I,J7I)
local real d=JAI(x,y,J6I,J7I)
local real r=(LoadReal(ZY,(V0I),(671)))
call SetUnitFacing(KRI,a)
set x=x+r*Cos(a*bj_DEGTORAD)
set y=y+r*Sin(a*bj_DEGTORAD)
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
if d<40 then
call KillUnit(KRI)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call V5I(XTI,4411,1)
call SetUnitPosition(XTI,J6I,J7I)
call PanCameraToTimedForPlayer(GetOwningPlayer(XTI),J6I,J7I,0)
elseif XDI(XTI)then
call KillUnit(KRI)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XTI=null
set KRI=null
return false
endfunction
function JL4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local real x=(LoadReal(ZY,(GetHandleId(XTI)),(7400)))
local real y=(LoadReal(ZY,(GetHandleId(XTI)),(7500)))
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747993398,GetUnitX(XTI),GetUnitY(XTI),0)
local real d=JAI(x,y,GetUnitX(XTI),GetUnitY(XTI))
local real r=0.02*(RMaxBJ(d/1.8,600))
call TriggerAddCondition(t,Condition(function JK4))
call TriggerRegisterTimerEvent(t,0.02,true)
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(6),((x)*1.0))
call SaveReal(ZY,(V0I),(7),((y)*1.0))
call SaveReal(ZY,(V0I),(671),((r)*1.0))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",XTI,"overhead")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffect("effects\\Lightning_Ball_Tail_FX.mdx",x,y)))
call TriggerEvaluate(t)
set XSI=null
set XTI=null
endfunction
function JM4 takes nothing returns boolean
if GetSpellAbilityId()==1093751639 and ZXI(GetSpellTargetUnit())==false then
if IsUnitIllusion(GetSpellTargetUnit())then
call KillUnit(GetSpellTargetUnit())
else
call JL4()
endif
endif
return false
endfunction
function JN4 takes nothing returns nothing
local unit XTI=GetEnumUnit()
local integer V0I=GetHandleId(XTI)
local integer i=1
loop
exitwhen i>14
call SaveReal(ZY,(V0I),(7400+i-1),(((LoadReal(ZY,(V0I),(7400+i))))*1.0))
call SaveReal(ZY,(V0I),(7500+i-1),(((LoadReal(ZY,(V0I),(7500+i))))*1.0))
set i=i+1
endloop
call SaveReal(ZY,(V0I),(7400+14),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(7500+14),((GetUnitY(XTI))*1.0))
set XTI=null
endfunction
function JS4 takes nothing returns boolean
local group g=ZJI()
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function SMI))
call ForGroup(g,function JN4)
call ZYI(g)
set g=null
return false
endfunction
function ZN1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JM4))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function JS4))
set t=null
endfunction
function JT4 takes nothing returns nothing
if FJI!=GetEnumUnit()then
call XNI(FKI,GetEnumUnit(),1,FLI*25+25)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function JR4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local group g
local integer ZLI=GetTriggerEvalCount(t)
local unit YT2=null
call SetUnitX(T0I,GetUnitX(XTI))
call SetUnitY(T0I,GetUnitY(XTI))
if ZLI==1 or ZLI==100 or ZLI==200 then
set g=ZJI()
if KMI(XTI)then
set YT2=CreateUnit(GetOwningPlayer(XTI),1697656899,GetUnitX(XTI),GetUnitY(XTI),0)
call UnitApplyTimedLife(YT2,1112820806,0.2)
call IssueTargetOrder(T0I,"chainlightning",YT2)
else
call IssueTargetOrder(T0I,"chainlightning",XTI)
endif
call JWI("war3mapImported\\ThunderStorm_Groundeffect.mdx",XTI,"origin",0.6)
set OK=XSI
set FKI=XSI
set FJI=XTI
set FLI=WTI
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),225,Condition(function SOI))
call ForGroup(g,function JT4)
call ZYI(g)
if GetTriggerEvalCount(t)==200 then
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
return false
endfunction
function JP4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093751894)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697657424,GetUnitX(XTI),GetUnitY(XTI),0)
call KKI(T0I,1093752119)
call SetUnitAbilityLevel(T0I,1093752119,WTI)
call KKI(T0I,1097625443)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function JR4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(5),(WTI))
set XSI=null
set XTI=null
set t=null
endfunction
function JQ4 takes nothing returns boolean
if GetSpellAbilityId()==1093751894 and ZXI(GetSpellTargetUnit())==false then
call JP4()
endif
return false
endfunction
function ZS1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JQ4))
set t=null
endfunction
function JU4 takes nothing returns nothing
call XNI(FNI,GetEnumUnit(),1,FMI)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Purge_NoBirth.mdx",GetEnumUnit(),"origin"))
endfunction
function K04 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
local group g
local integer ZLI=GetTriggerEvalCount(t)
if ZLI>20 then
call StopSound(CF,false,true)
call KillUnit(KRI)
call ShowUnit(KRI,false)
call KillUnit(T0I)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set g=ZJI()
set OK=XSI
set FNI=XSI
set FMI=0.25*(130+40*WTI)*(ZLI/20.0)
set FSI=false
if ModuloInteger(ZLI,4)==0 then
set FSI=true
endif
call GroupEnumUnitsInRange(g,GetUnitX(KRI),GetUnitY(KRI),400,Condition(function S7I))
call ForGroup(g,function JU4)
call ZYI(g)
set g=null
endif
set t=null
set XSI=null
set KRI=null
set T0I=null
return false
endfunction
function KI4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local real J6I=GetSpellTargetX()
local real J7I=GetSpellTargetY()
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747993419,J6I,J7I,0)
local integer WTI=GetUnitAbilityLevel(XSI,1093752118)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,J6I,J7I,0)
call SetSoundVolume(CF,200)
call StartSound(CF)
call SetSoundPosition(CF,J6I,J7I,100)
if VNI(GetOwningPlayer(XSI))then
call KKI(T0I,1093752117)
else
call KKI(T0I,1093752116)
endif
call IssuePointOrder(T0I,"cloudoffog",J6I,J7I)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
call SaveInteger(ZY,(V0I),(5),(WTI))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function K04))
set t=null
set XSI=null
endfunction
function K14 takes nothing returns boolean
if GetSpellAbilityId()==1093752118 then
call KI4()
endif
return false
endfunction
function ZM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K14))
set t=null
endfunction
function KO4 takes nothing returns nothing
local integer K24=G0I
local unit XTI=GetEnumUnit()
local integer K34=662-1+K24
local real K44=(LoadReal(ZY,(GetHandleId(XTI)),(K34)))
local real ZPI=(TimerGetElapsed(M))
if K44<ZPI then
call SaveReal(ZY,(GetHandleId(XTI)),(K34),((ZPI+2)*1.0))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call XNI(FTI,XTI,1,2+6*FUI)
else
endif
endif
set XTI=null
endfunction
function Spirits_DamageHeroes takes nothing returns nothing
local integer K24=G0I
local unit XTI=GetEnumUnit()
local integer K34=662-1+K24
local real K44=(LoadReal(ZY,(GetHandleId(XTI)),(K34)))
local real ZPI=(TimerGetElapsed(M))
if K44<ZPI then
call SaveReal(ZY,(GetHandleId(XTI)),(K34),((ZPI+2)*1.0))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call XNI(FTI,XTI,1,15+10*FUI)
else
endif
endif
set XTI=null
endfunction
function K54 takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call XNI(FTI,GetEnumUnit(),1,FPI)
else
endif
endfunction
function K64 takes unit XSI,unit K74 returns nothing
local group g=ZJI()
set OK=XSI
set FPI=25*FUI
set FTI=XSI
set FRI=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(K74),GetUnitY(K74),0)
call GroupEnumUnitsInRange(g,GetUnitX(K74),GetUnitY(K74),325,Condition(function SAI))
call KKI(FRI,1093751887)
call ForGroup(g,function K54)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(K74),GetUnitY(K74)))
call KillUnit(K74)
call ZYI(g)
set g=null
endfunction
function K84 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit TD3=(LoadUnitHandle(ZY,(V0I),(393)))
local unit TE3=(LoadUnitHandle(ZY,(V0I),(394)))
local unit TF3=(LoadUnitHandle(ZY,(V0I),(395)))
local unit TG3=(LoadUnitHandle(ZY,(V0I),(396)))
local unit K94=(LoadUnitHandle(ZY,(V0I),(397)))
local real x
local real y
local real a
local real d=(LoadReal(ZY,(V0I),(138)))
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real NA2
local integer ZLI=GetTriggerEvalCount(t)
local real T8I
local group g
local integer KA4=0
local real YJI=2.25
local real KB4
if KMI(TD3)==false then
set KA4=KA4+1
endif
if KMI(TE3)==false then
set KA4=KA4+1
endif
if KMI(TF3)==false then
set KA4=KA4+1
endif
if KMI(TG3)==false then
set KA4=KA4+1
endif
if KMI(K94)==false then
set KA4=KA4+1
endif
if KA4==5 then
set YJI=2.25
elseif KA4==4 then
set YJI=2.1
elseif KA4==3 then
set YJI=1.95
elseif KA4==2 then
set YJI=1.8
elseif KA4==1 then
set YJI=1.65
endif
set NA2=-1*360*0.02/YJI
set KB4=(LoadReal(ZY,(V0I),(137)))+NA2
call SaveReal(ZY,(V0I),(137),((KB4)*1.0))
set FUI=GetUnitAbilityLevel(XSI,1093751864)
set FTI=XSI
if ZLI==50 then
call ShowUnit(TE3,true)
call SaveBoolean(ZY,(V0I),(512),(true))
call KKI(TE3,1097625443)
endif
if ZLI==100 then
call ShowUnit(TF3,true)
call SaveBoolean(ZY,(V0I),(513),(true))
call KKI(TF3,1097625443)
endif
if ZLI==150 then
call ShowUnit(TG3,true)
call SaveBoolean(ZY,(V0I),(514),(true))
call KKI(TG3,1097625443)
endif
if ZLI==200 then
call ShowUnit(K94,true)
call SaveBoolean(ZY,(V0I),(515),(true))
call KKI(K94,1097625443)
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093809217 then
if(LoadBoolean(ZY,(V0I),(655)))==true then
call SaveBoolean(ZY,(V0I),(655),(false))
call SaveBoolean(ZY,(V0I),(656),(false))
else
call SaveBoolean(ZY,(V0I),(655),(true))
call SaveBoolean(ZY,(V0I),(656),(false))
endif
elseif GetSpellAbilityId()==1093809218 then
if(LoadBoolean(ZY,(V0I),(656)))==true then
call SaveBoolean(ZY,(V0I),(655),(false))
call SaveBoolean(ZY,(V0I),(656),(false))
else
call SaveBoolean(ZY,(V0I),(655),(false))
call SaveBoolean(ZY,(V0I),(656),(true))
endif
endif
endif
if(LoadBoolean(ZY,(V0I),(655)))then
set d=RMaxBJ(d-5,100)
call SaveReal(ZY,(V0I),(138),((d)*1.0))
elseif(LoadBoolean(ZY,(V0I),(656)))then
set d=RMinBJ(d+5,875)
call SaveReal(ZY,(V0I),(138),((d)*1.0))
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or ZLI==950 or(KMI(TD3)and KMI(TE3)and KMI(TF3)and KMI(TG3)and KMI(K94))or(ZLI>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093751864)then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call UnitRemoveAbility(XSI,1093809217)
call UnitRemoveAbility(XSI,1093809218)
endif
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if KMI(TD3)==false then
call K64(XSI,TD3)
endif
if KMI(TE3)==false then
call K64(XSI,TE3)
endif
if KMI(TF3)==false then
call K64(XSI,TF3)
endif
if KMI(TG3)==false then
call K64(XSI,TG3)
endif
if KMI(K94)==false then
call K64(XSI,K94)
endif
else
set g=ZJI()
if KMI(TD3)==false and(LoadBoolean(ZY,(V0I),(511)))then
set T8I=360*5/5.0
set a=T8I+KB4
set x=YEI(J4I+d*Cos(a*bj_DEGTORAD))
set y=YHI(J5I+d*Sin(a*bj_DEGTORAD))
call SetUnitX(TD3,x)
call SetUnitY(TD3,y)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,95,Condition(function SJI))
if FirstOfGroup(g)!=null then
call K64(XSI,TD3)
endif
call GroupClear(g)
set FQI=TD3
set G0I=1
set FTI=XSI
call GroupEnumUnitsInRange(g,x,y,175,Condition(function S9I))
call ForGroup(g,function KO4)
call GroupClear(g)
endif
if KMI(TE3)==false and(LoadBoolean(ZY,(V0I),(512)))then
set T8I=360*4/5.0
set a=T8I+KB4
set x=YEI(J4I+d*Cos(a*bj_DEGTORAD))
set y=YHI(J5I+d*Sin(a*bj_DEGTORAD))
call SetUnitX(TE3,x)
call SetUnitY(TE3,y)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,95,Condition(function SJI))
if FirstOfGroup(g)!=null then
call K64(XSI,TE3)
endif
call GroupClear(g)
set FQI=TE3
set G0I=2
set FTI=XSI
call GroupEnumUnitsInRange(g,x,y,175,Condition(function S9I))
call ForGroup(g,function KO4)
call GroupClear(g)
endif
if KMI(TF3)==false and(LoadBoolean(ZY,(V0I),(513)))then
set T8I=360*3/5.0
set a=T8I+KB4
set x=YEI(J4I+d*Cos(a*bj_DEGTORAD))
set y=YHI(J5I+d*Sin(a*bj_DEGTORAD))
call SetUnitX(TF3,x)
call SetUnitY(TF3,y)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,95,Condition(function SJI))
if FirstOfGroup(g)!=null then
call K64(XSI,TF3)
endif
call GroupClear(g)
set FQI=TF3
set G0I=3
set FTI=XSI
call GroupEnumUnitsInRange(g,x,y,175,Condition(function S9I))
call ForGroup(g,function KO4)
call GroupClear(g)
endif
if KMI(TG3)==false and(LoadBoolean(ZY,(V0I),(514)))then
set T8I=360*2/5.0
set a=T8I+KB4
set x=YEI(J4I+d*Cos(a*bj_DEGTORAD))
set y=YHI(J5I+d*Sin(a*bj_DEGTORAD))
call SetUnitX(TG3,x)
call SetUnitY(TG3,y)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,95,Condition(function SJI))
if FirstOfGroup(g)!=null then
call K64(XSI,TG3)
endif
call GroupClear(g)
set FQI=TG3
set G0I=4
set FTI=XSI
call GroupEnumUnitsInRange(g,x,y,175,Condition(function S9I))
call ForGroup(g,function KO4)
call GroupClear(g)
endif
if KMI(K94)==false and(LoadBoolean(ZY,(V0I),(515)))then
set T8I=360*1/5.0
set a=T8I+KB4
set x=YEI(J4I+d*Cos(a*bj_DEGTORAD))
set y=YHI(J5I+d*Sin(a*bj_DEGTORAD))
call SetUnitX(K94,x)
call SetUnitY(K94,y)
set OK=XSI
call GroupEnumUnitsInRange(g,x,y,95,Condition(function SJI))
if FirstOfGroup(g)!=null then
call K64(XSI,K94)
endif
call GroupClear(g)
set FQI=K94
set G0I=5
set FTI=XSI
call GroupEnumUnitsInRange(g,x,y,175,Condition(function S9I))
call ForGroup(g,function KO4)
call GroupClear(g)
endif
call ZYI(g)
endif
set t=null
set XSI=null
set TD3=null
set TE3=null
set TF3=null
set TG3=null
set K94=null
return false
endfunction
function KC4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit TD3
local unit TE3
local unit TF3
local unit TG3
local unit K94
local real x
local real y
set x=GetUnitX(XSI)+250*Cos(bj_DEGTORAD*360*5/5.0*-1.0)
set y=GetUnitY(XSI)+250*Sin(bj_DEGTORAD*360*5/5.0*-1.0)
set TD3=CreateUnit(GetOwningPlayer(XSI),1747993418,x,y,360*5/5.0*-1.0)
call KKI(TD3,1097625443)
set x=GetUnitX(XSI)+250*Cos(bj_DEGTORAD*360*4/5.0*-1.0)
set y=GetUnitY(XSI)+250*Sin(bj_DEGTORAD*360*4/5.0*-1.0)
set TE3=CreateUnit(GetOwningPlayer(XSI),1747993418,x,y,360*4/5.0*-1.0)
call ShowUnit(TE3,false)
call SetUnitInvulnerable(TE3,true)
set x=GetUnitX(XSI)+250*Cos(bj_DEGTORAD*360*3/5.0*-1.0)
set y=GetUnitY(XSI)+250*Sin(bj_DEGTORAD*360*3/5.0*-1.0)
set TF3=CreateUnit(GetOwningPlayer(XSI),1747993418,x,y,360*3/5.0*-1.0)
call ShowUnit(TF3,false)
call SetUnitInvulnerable(TE3,true)
set x=GetUnitX(XSI)+250*Cos(bj_DEGTORAD*360*2/5.0*-1.0)
set y=GetUnitY(XSI)+250*Sin(bj_DEGTORAD*360*2/5.0*-1.0)
set TG3=CreateUnit(GetOwningPlayer(XSI),1747993418,x,y,360*2/5.0*-1.0)
call ShowUnit(TG3,false)
call SetUnitInvulnerable(TG3,true)
set x=GetUnitX(XSI)+250*Cos(bj_DEGTORAD*360*1/5.0*-1.0)
set y=GetUnitY(XSI)+250*Sin(bj_DEGTORAD*360*1/5.0*-1.0)
set K94=CreateUnit(GetOwningPlayer(XSI),1747993418,x,y,360*1/5.0*-1.0)
call ShowUnit(K94,false)
call SetUnitInvulnerable(K94,true)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(393),(TD3))
call SaveUnitHandle(ZY,(V0I),(394),(TE3))
call SaveUnitHandle(ZY,(V0I),(395),(TF3))
call SaveUnitHandle(ZY,(V0I),(396),(TG3))
call SaveUnitHandle(ZY,(V0I),(397),(K94))
call SaveBoolean(ZY,(V0I),(511),(true))
call SaveBoolean(ZY,(V0I),(512),(false))
call SaveBoolean(ZY,(V0I),(513),(false))
call SaveBoolean(ZY,(V0I),(514),(false))
call SaveBoolean(ZY,(V0I),(515),(false))
call SaveBoolean(ZY,(V0I),(655),(false))
call SaveBoolean(ZY,(V0I),(656),(false))
call SaveReal(ZY,(V0I),(138),((150)*1.0))
call KKI(XSI,1093809218)
call KKI(XSI,1093809217)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K84))
set XSI=null
set t=null
set TD3=null
set TE3=null
set TF3=null
set TG3=null
set K94=null
endfunction
function KD4 takes nothing returns boolean
if GetSpellAbilityId()==1093751864 then
call KC4()
endif
return false
endfunction
function ZT1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KD4))
set t=null
endfunction
function KE4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
call JII(XSI,GetEventDamage()*0.05*WTI)
set t=null
set XSI=null
return false
endfunction
function KF4 takes unit u returns nothing
local trigger t
call UnitRemoveAbility(u,1093751891)
call UnitRemoveAbility(u,1093751890)
call UnitRemoveAbility(u,1093751892)
call UnitRemoveAbility(u,1093751888)
if(LoadBoolean(ZY,(GetHandleId(u)),(708)))then
call SaveBoolean(ZY,(GetHandleId(u)),(708),(false))
set t=(LoadTriggerHandle(ZY,(GetHandleId(u)),(709)))
call FlushChildHashtable(ZY,(GetHandleId(t)))
call ZSI(t)
call RemoveSavedHandle(ZY,(GetHandleId(u)),(709))
set t=null
endif
endfunction
function KG4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call KF4(XSI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
return false
endfunction
function KH4 takes unit u,integer i returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(u))
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function KG4))
if i==1 then
call KKI(u,1093751891)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751891,false)
elseif i==2 then
call KKI(u,1093751890)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751890,false)
elseif i==3 then
call KKI(u,1093751892)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751892,false)
elseif i==4 then
call KKI(u,1093751888)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751888,false)
endif
if(LoadBoolean(ZY,(GetHandleId(u)),(708)))==false then
call SaveBoolean(ZY,(GetHandleId(u)),(708),(true))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function KE4))
call SaveTriggerHandle(ZY,(GetHandleId(u)),(709),(t))
call SaveUnitHandle(ZY,(GetHandleId(t)),(2),(u))
call SaveInteger(ZY,(GetHandleId(t)),(5),(i))
endif
set t=null
endfunction
function KZ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local integer WTI=GetUnitAbilityLevel(XSI,1093810257)
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit KV4=(LoadUnitHandle(ZY,(GetHandleId(XSI)),(652)))
local boolean SR1=false
local real KW4=0.2*(GetUnitState(XSI,UNIT_STATE_LIFE)*0.025)
local real KX4=0.2*(GetUnitState(XSI,UNIT_STATE_MANA)*0.025)
if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==String2OrderIdBJ("manashieldon")then
call KH4(XSI,WTI)
elseif GetIssuedOrderId()==String2OrderIdBJ("manashieldoff")then
call KF4(XSI)
endif
endif
if GetUnitAbilityLevel(XSI,1093751891)>0 or GetUnitAbilityLevel(XSI,1093751890)>0 or GetUnitAbilityLevel(XSI,1093751892)>0 or GetUnitAbilityLevel(XSI,1093751888)>0 then
set SR1=true
call SetUnitState(XSI,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(XSI,UNIT_STATE_LIFE)-KW4,1))
call SetUnitState(XSI,UNIT_STATE_MANA,RMaxBJ(GetUnitState(XSI,UNIT_STATE_MANA)-KX4,1))
endif
if KV4==null then
if XTI!=null then
call KF4(XTI)
set XTI=null
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
endif
else
if XTI==null then
set XTI=KV4
if SR1 then
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call KH4(XTI,WTI)
else
call KF4(XTI)
endif
elseif XTI!=KV4 then
call KF4(XTI)
if SR1 then
set XTI=KV4
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call KH4(XTI,WTI)
endif
elseif SR1==false then
call KF4(XTI)
elseif XTI==KV4 then
if SR1 then
set XTI=KV4
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call KH4(XTI,WTI)
endif
endif
endif
set t=null
set XSI=null
set XTI=null
set KV4=null
return false
endfunction
function KY4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093810257)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(null))
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function KZ4))
set XSI=null
set t=null
endfunction
function KJ4 takes nothing returns boolean
if GetLearnedSkill()==1093810257 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093810257)==1 then
call KY4()
endif
return false
endfunction
function ZR1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function KJ4))
set t=null
endfunction
function KK4 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),G1I)==false then
call GroupAddUnit(G1I,GetEnumUnit())
call SUI(GII,GetEnumUnit(),0.25+0.5*G2I)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function KL4 takes unit XSI,unit XTI,group QY1 returns nothing
local real x1=GetUnitX(XSI)
local real y1=GetUnitY(XSI)
local real x2=GetUnitX(XTI)
local real y2=GetUnitY(XTI)
local real a=JPI(x1,y1,x2,y2)*bj_DEGTORAD
local real x
local real y
local real d=JAI(x1,y1,x2,y2)
local group g=ZJI()
local integer i=1
set G1I=QY1
set GII=XSI
set G2I=GetUnitAbilityLevel(XSI,1093751873)
set GOI=G2I*50+50
loop
exitwhen i>8
set OK=XSI
set x=x1+d*i/8*Cos(a)
set y=y1+d*i/8*Sin(a)
call GroupEnumUnitsInRange(g,x,y,100,Condition(function SOI))
call ForGroup(g,function KK4)
call GroupClear(g)
set i=i+1
endloop
call ZYI(g)
set g=null
endfunction
function KM4 takes unit XSI,unit XTI returns boolean
return((LoadInteger(ZY,(GetHandleId((XSI))),((4294))))==1)
endfunction
function KN4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real d=J8I(XSI,XTI)
local real a=JRI(XSI,XTI)*bj_DEGTORAD
local real x=GetUnitX(XSI)+20*Cos(a)
local real y=GetUnitY(XSI)+20*Sin(a)
local location l
if d<300 or d>2150 then
set l=NNI(x,y)
set x=GetLocationX(l)
set y=GetLocationY(l)
call SetUnitX(XSI,x)
call SetUnitY(XSI,y)
call KCI(x,y,350)
call RemoveLocation(l)
set l=null
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call SaveInteger(ZY,(GetHandleId((XSI))),((4295)),(2))
else
call SetUnitX(XSI,x)
call SetUnitY(XSI,y)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function KS4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local lightning KII=(LoadLightningHandle(ZY,(V0I),(196)))
local integer ZLI=GetTriggerEvalCount(t)
local real d=J8I(XSI,XTI)
local real a=1
local real Y62=GetUnitState(XSI,UNIT_STATE_LIFE)
local real UT1=GetUnitState(XSI,UNIT_STATE_MANA)
local real KT4=(LoadReal(ZY,(V0I),(670)))
local real KR4=(LoadReal(ZY,(V0I),(667)))
local real KP4
local real KQ4
if XTI==null or XSI==null or KMI(XSI)==true or(ZLI>600 and KM4(XSI,XTI)==false and((LoadInteger(ZY,(GetHandleId((XSI))),((4295))))==1)==false)or(d>925 and((LoadInteger(ZY,(GetHandleId((XSI))),((4295))))==1)==false)or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093751893)then
call ZYI(QY1)
call DestroyLightning(KII)
call UnitRemoveAbility(XTI,1093751880)
call UnitRemoveAbility(XTI,1093751881)
call UnitRemoveAbility(XTI,1093751879)
call UnitRemoveAbility(XTI,1093751882)
call UnitRemoveAbility(XTI,1110459464)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call UnitRemoveAbility(XSI,1093751880)
call UnitRemoveAbility(XSI,1093751881)
call UnitRemoveAbility(XSI,1093751879)
call UnitRemoveAbility(XSI,1093751882)
call UnitRemoveAbility(XSI,1110459464)
call UnitRemoveAbility(XSI,1093751893)
if(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==0 or(LoadInteger(ZY,(GetHandleId(XSI)),(704)))==1093751873 then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093751873,true)
endif
call RemoveSavedHandle(ZY,GetHandleId(XSI),652)
else
set KP4=Y62/GetUnitState(XSI,UNIT_STATE_MAX_LIFE)
set KQ4=UT1/GetUnitState(XSI,UNIT_STATE_MAX_MANA)
if KP4-KT4>0 and(KP4-KT4)<0.5 then
if((LoadInteger(ZY,(GetHandleId((XSI))),((4298))))==1)==false then
call SetUnitState(XTI,UNIT_STATE_LIFE,GetUnitState(XTI,UNIT_STATE_LIFE)+(KP4-KT4)*GetUnitState(XSI,UNIT_STATE_MAX_LIFE))
endif
endif
if KQ4-KR4>0 and(KP4-KT4)<0.5 then
call SetUnitState(XTI,UNIT_STATE_MANA,GetUnitState(XTI,UNIT_STATE_MANA)+(KQ4-KR4)*GetUnitState(XSI,UNIT_STATE_MAX_MANA))
endif
call SaveReal(ZY,(V0I),(670),((GetUnitState(XSI,UNIT_STATE_LIFE)/GetUnitState(XSI,UNIT_STATE_MAX_LIFE))*1.0))
call SaveReal(ZY,(V0I),(667),((GetUnitState(XSI,UNIT_STATE_MANA)/GetUnitState(XSI,UNIT_STATE_MAX_MANA))*1.0))
call MoveLightning(KII,true,GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))
call KL4(XSI,XTI,QY1)
if IsUnitVisible(XSI,GetLocalPlayer())==false and IsUnitVisible(XTI,GetLocalPlayer())==false then
set a=0
endif
if XJI(GetLocalPlayer())then
set a=1
endif
if d<700 or((LoadInteger(ZY,(GetHandleId((XSI))),((4295))))==1)==true then
call SetLightningColor(KII,0.00,1.00,1.00,a)
else
call SetLightningColor(KII,0.80,0.70,0.40,a)
endif
endif
set t=null
set XSI=null
set XTI=null
set QY1=null
set KII=null
return false
endfunction
function KU4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local lightning KII=AddLightning("CHIM",true,GetUnitX(XSI),GetUnitY(XSI),GetUnitX(XTI),GetUnitY(XTI))
local integer WTI=GetUnitAbilityLevel(XSI,1093751873)
local integer L62
local real d=J8I(XSI,XTI)
local real a=JRI(XSI,XTI)*bj_DEGTORAD
local location l
local real x
local real y
call SetLightningColor(KII,0.00,1.00,1.00,1)
call KKI(XSI,1093751893)
if WTI==1 then
set L62=1093751880
elseif WTI==2 then
set L62=1093751881
elseif WTI==3 then
set L62=1093751879
elseif WTI==4 then
set L62=1093751882
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093751873,false)
call KKI(XSI,L62)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),L62,false)
call KKI(XTI,L62)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),L62,false)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveGroupHandle(ZY,(V0I),(133),(ZJI()))
call SaveLightningHandle(ZY,(V0I),(196),(KII))
call SaveReal(ZY,(V0I),(670),((GetUnitState(XSI,UNIT_STATE_LIFE)/GetUnitState(XSI,UNIT_STATE_MAX_LIFE))*1.0))
call SaveReal(ZY,(V0I),(667),((GetUnitState(XSI,UNIT_STATE_MANA)/GetUnitState(XSI,UNIT_STATE_MAX_MANA))*1.0))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KS4))
call SaveUnitHandle(ZY,(GetHandleId(XSI)),(652),(XTI))
if d>700 then
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",XSI,"chest")))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function KN4))
call SaveInteger(ZY,(GetHandleId((XSI))),((4295)),(1))
endif
set XSI=null
set t=null
endfunction
function L04 takes nothing returns boolean
if GetSpellAbilityId()==1093751873 then
call KU4()
endif
return false
endfunction
function ZP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function L04))
set t=null
endfunction
function LI4 takes unit XSI,real x,real y returns boolean
local boolean RRI=false
local player p=GetOwningPlayer(XSI)
local unit T0I=CreateUnit(p,1697657425,GetUnitX(XSI),GetUnitY(XSI),0)
call KKI(T0I,1093752372)
if IssuePointOrder(T0I,"blink",x,y)==true then
call KillUnit(T0I)
set T0I=null
return true
else
call KillUnit(T0I)
set T0I=null
return false
endif
endfunction
function L14 takes string KOI,unit XTI returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,KOI,0.033)
call SetTextTagPosUnit(tt,XTI,64)
call SetTextTagColor(tt,0,50,255,255)
call SetTextTagVelocity(tt,0,0.0355)
call SetTextTagFadepoint(tt,0.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,0.85)
call SetTextTagVisibility(tt,true)
set tt=null
endfunction
function LO4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer ZLI=GetTriggerEvalCount(t)
if KMI(XSI)==false and ZLI<12 then
call L14(I2S(12-ZLI),XSI)
endif
if ZLI==12 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function L24 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(GetHandleId(XSI)),(652)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real J4I=(LoadReal(ZY,(V0I),(189)))
local real J5I=(LoadReal(ZY,(V0I),(190)))
local fogmodifier KHI=(LoadFogModifierHandle(ZY,(V0I),(42)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SaveInteger(ZY,(GetHandleId((XSI))),((4294)),(2))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
call KCI(J6I,J7I,250)
call KCI(J4I,J5I,250)
if GetTriggerEvalCount(t)==1 then
if KMI(XSI)==false then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(XSI),GetUnitY(XSI)))
call SetUnitPosition(XSI,J6I,J7I)
call PanCameraToTimedForPlayer(GetOwningPlayer(XSI),J6I,J7I,0)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(XSI),GetUnitY(XSI)))
endif
if XTI!=null and KMI(XTI)==false and GetOwningPlayer(XTI)!=CO[0]and GetOwningPlayer(XTI)!=DO[0]and((LoadBoolean(ZY,(GetHandleId(GetOwningPlayer((XTI)))),(139)))==false)then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(XTI),GetUnitY(XTI)))
call V5I(XTI,4402,1)
call SetUnitPosition(XTI,J6I,J7I)
if IsUnitType(XTI,UNIT_TYPE_HERO)==true and KMI(XTI)==false then
call PanCameraToTimedForPlayer(GetOwningPlayer(XTI),J6I,J7I,0)
endif
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(XTI),GetUnitY(XTI)))
endif
else
if KMI(XSI)==false then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(XSI),GetUnitY(XSI)))
call SetUnitPosition(XSI,J4I,J5I)
call PanCameraToTimedForPlayer(GetOwningPlayer(XSI),J4I,J5I,0)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(XSI),GetUnitY(XSI)))
endif
if XTI!=null and KMI(XTI)==false and GetOwningPlayer(XTI)!=CO[0]and GetOwningPlayer(XTI)!=DO[0]and((LoadBoolean(ZY,(GetHandleId(GetOwningPlayer((XTI)))),(139)))==false)then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(XTI),GetUnitY(XTI)))
call V5I(XTI,4402,1)
call SetUnitPosition(XTI,J4I,J5I)
if IsUnitType(XTI,UNIT_TYPE_HERO)==true and KMI(XTI)==false then
call PanCameraToTimedForPlayer(GetOwningPlayer(XTI),J4I,J5I,0)
endif
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(XTI),GetUnitY(XTI)))
endif
call SaveInteger(ZY,(GetHandleId((XSI))),((4294)),(2))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FogModifierStop(KHI)
call DestroyFogModifier(KHI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
set t=null
set XSI=null
set XTI=null
set KHI=null
return false
endfunction
function L34 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local fogmodifier KHI
local integer WTI=GetUnitAbilityLevel(XSI,1093751874)
if NVI(XSI)or NZI(XSI)or KMI(XSI)then
call SaveInteger(ZY,(GetHandleId((XSI))),((4294)),(2))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEvalCount(t)==(2.75-0.25*WTI)/.05 then
set KHI=CreateFogModifierRadius(GetOwningPlayer(XSI),FOG_OF_WAR_VISIBLE,GetUnitX(XSI),GetUnitY(XSI),400,true,true)
call FogModifierStart(KHI)
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterTimerEvent(t,0.01,false)
call TriggerRegisterTimerEvent(t,12,false)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function L24))
call SaveReal(ZY,(V0I),(189),((GetUnitX(XSI))*1.0))
call SaveReal(ZY,(V0I),(190),((GetUnitY(XSI))*1.0))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",GetUnitX(XSI),GetUnitY(XSI))))
call SaveFogModifierHandle(ZY,(V0I),(42),(KHI))
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function LO4))
endif
set XSI=null
set t=null
set KHI=null
return false
endfunction
function L44 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit XTI=(LoadUnitHandle(ZY,(GetHandleId(XSI)),(652)))
local integer id=GetPlayerId(GetOwningPlayer(XSI))
local integer WTI=GetUnitAbilityLevel(XSI,1093751874)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",XSI,"chest"))
if XTI!=null then
endif
call PingMinimapEx(x,y,4.0,255,0,0,false)
call KZI(CO[1],2.5,x,y,300)
call KZI(DO[1],2.5,x,y,300)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function L34))
call SaveReal(ZY,(V0I),(47),((x)*1.0))
call SaveReal(ZY,(V0I),(48),((y)*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",x,y)))
call SaveInteger(ZY,(GetHandleId((XSI))),((4294)),(1))
set XSI=null
set t=null
endfunction
function L54 takes nothing returns boolean
if GetSpellAbilityId()==1093751874 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call L44()
else
if LI4(GetTriggerUnit(),GetSpellTargetX(),GetSpellTargetY())==false then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658776))
else
if VLI(GetOwningPlayer(GetTriggerUnit()))then
if IsPointInRegion(G4I,GetSpellTargetX(),GetSpellTargetY())==true then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652633))
endif
else
if IsPointInRegion(G3I,GetSpellTargetX(),GetSpellTargetY())==true then
call Y8I(GetTriggerUnit())
call Y3I(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652633))
endif
endif
endif
endif
endif
return false
endfunction
function ZQ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call K7I(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function L54))
set G3I=CreateRegion()
call RegionAddRect(G3I,G4)
call RegionAddRect(G3I,H5)
set G4I=CreateRegion()
call RegionAddRect(G4I,F4)
call RegionAddRect(G4I,Z5)
set t=null
endfunction
function L64 takes unit XSI,unit XTI,real J4I,real J5I,real a2 returns nothing
local integer i=0
local real J6I
local real J7I=GetUnitY(XTI)
local real a
local real x
local real y
local real L74
if XTI!=null then
set J6I=GetUnitX(XTI)
set J7I=GetUnitY(XTI)
set a=JPI(J4I,J5I,J6I,J7I)
else
set a=a2
set J6I=J4I+50*Cos(a*bj_DEGTORAD)
set J7I=J5I+50*Sin(a*bj_DEGTORAD)
endif
set L74=a
set x=J6I+200*Cos(L74*bj_DEGTORAD)
set y=J7I+200*Sin(L74*bj_DEGTORAD)
call LXI(CreateDestructable(1110454326,x,y,-1*L74,0.6,1),5)
call KCI(x,y,300)
set L74=a-40
set x=J6I+200*Cos(L74*bj_DEGTORAD)
set y=J7I+200*Sin(L74*bj_DEGTORAD)
call LXI(CreateDestructable(1110454326,x,y,-1*L74,0.6,1),5)
call KCI(x,y,300)
set L74=a-80
set x=J6I+200*Cos(L74*bj_DEGTORAD)
set y=J7I+200*Sin(L74*bj_DEGTORAD)
call LXI(CreateDestructable(1110454326,x,y,-1*L74,0.6,1),5)
call KCI(x,y,300)
set L74=a+40
set x=J6I+200*Cos(L74*bj_DEGTORAD)
set y=J7I+200*Sin(L74*bj_DEGTORAD)
call LXI(CreateDestructable(1110454326,x,y,-1*L74,0.6,1),5)
call KCI(x,y,300)
set L74=a+80
set x=J6I+200*Cos(L74*bj_DEGTORAD)
set y=J7I+200*Sin(L74*bj_DEGTORAD)
call LXI(CreateDestructable(1110454326,x,y,-1*L74,0.6,1),5)
call KCI(x,y,300)
if XTI!=null then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",XTI,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",XTI,"chest"))
call XNI(G5I,XTI,1,G7I*70)
endif
endfunction
function L84 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),G8I)==false then
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==false then
call GroupAddUnit(G8I,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",GetEnumUnit(),"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetEnumUnit(),"chest"))
call XNI(G5I,GetEnumUnit(),1,G7I*70)
else
set G6I=GetEnumUnit()
endif
endif
endfunction
function L94 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit LA4=(LoadUnitHandle(ZY,(V0I),(45)))
local real OY4=(LoadReal(ZY,(V0I),(683)))
local real OJ4=(LoadReal(ZY,(V0I),(684)))
local real J4I=GetUnitX(LA4)
local real J5I=GetUnitY(LA4)
local real B92=Atan2(OJ4-J5I,OY4-J4I)
local real KUI=J4I+18*Cos(B92)
local real L0I=J5I+18*Sin(B92)
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local integer WTI=GetUnitAbilityLevel(XSI,1093753167)
local group g=ZJI()
set OK=XSI
set G5I=XSI
set G8I=QY1
set G7I=WTI
set G6I=null
call GroupEnumUnitsInRange(g,KUI,L0I,225,Condition(function SOI))
call ForGroup(g,function L84)
call ZYI(g)
call SetUnitPosition(LA4,KUI,L0I)
if JAI(KUI,L0I,OY4,OJ4)<40 or G6I!=null then
call KCI(KUI,L0I,300)
call KillUnit(LA4)
call ShowUnit(LA4,false)
call SetUnitPathing(LA4,true)
if G6I!=null then
call L64(XSI,G6I,KUI,L0I,B92*bj_RADTODEG)
else
call L64(XSI,null,KUI,L0I,B92*bj_RADTODEG)
endif
call ZYI(QY1)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set LA4=null
set QY1=null
set g=null
return false
endfunction
function LB4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit LA4=CreateUnit(GetOwningPlayer(XSI),1747993427,GetUnitX(XSI),GetUnitY(XSI),0)
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=GetSpellTargetX()
local real J7I=GetSpellTargetY()
local real B92=Atan2(J7I-J5I,J6I-J4I)
local real OY4=YEI(J4I+1600*Cos(B92))
local real OJ4=YHI(J5I+1600*Sin(B92))
call SetUnitFacing(LA4,B92*bj_RADTODEG)
call SetUnitPathing(LA4,false)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function L94))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveReal(ZY,(V0I),(683),((OY4)*1.0))
call SaveReal(ZY,(V0I),(684),((OJ4)*1.0))
call SaveReal(ZY,(V0I),(13),((B92)*1.0))
call SaveUnitHandle(ZY,(V0I),(45),(LA4))
call SaveGroupHandle(ZY,(V0I),(133),(ZJI()))
set XSI=null
set LA4=null
set t=null
endfunction
function LC4 takes nothing returns boolean
if GetSpellAbilityId()==1093753167 then
call LB4()
endif
return false
endfunction
function ZU1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LC4))
set t=null
endfunction
function LD4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer WTI=GetUnitAbilityLevel(XSI,1093753169)
local integer ZLI=GetTriggerEvalCount(t)
local real y=(ZLI-50)*(ZLI-50)/4.3
local real XPI
if WTI==1 then
set XPI=75
elseif WTI==2 then
set XPI=150
else
set XPI=225
endif
if ZLI==1 then
call IssueTargetOrder(XSI,"attack",XTI)
endif
if ZLI<50 then
if XGI(XTI)==false then
call SetUnitFlyHeight(XTI,700*ZLI/50,0)
endif
elseif ZLI<100 then
if XGI(XTI)==false then
call SetUnitFlyHeight(XTI,700-700*(ZLI-50)/50,0)
endif
else
if XGI(XTI)==false then
call SetUnitFlyHeight(XTI,GetUnitDefaultFlyHeight(XTI),0)
endif
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(175))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call MQI(XTI,1093808180,1,1+WTI,1110459481)
call SetPlayerAbilityAvailable(GetOwningPlayer(XTI),1093808180,false)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function LE4 takes unit XSI,unit XTI returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093753169)
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call K3I("WALRUS PUNCH !!",3.5,XSI,0.03,255,0,0,255)
call KEI(WF,GetUnitX(XTI),GetUnitY(XTI))
call KKI(T0I,1093752144)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
if XGI(XTI)==false then
call KKI(XTI,1097691750)
call UnitRemoveAbility(XTI,1097691750)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"head"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"left,hand"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"right,hand"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",XTI,"origin"))
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function LD4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveEffectHandle(ZY,(V0I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",XTI,"chest")))
set t=null
endfunction
function LF4 takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer UX1=GetHandleId(t2)
local unit XSI=(LoadUnitHandle(ZY,(UX1),(2)))
local unit XTI=(LoadUnitHandle(ZY,(UX1),(17)))
local effect LG4=(LoadEffectHandle(ZY,(UX1),(32)))
local trigger t=(LoadTriggerHandle(ZY,(UX1),(35)))
local integer V0I=(LoadInteger(ZY,(UX1),(375)))
if GetTriggerEvalCount(t2)==1 then
call IssueTargetOrder(XSI,"attack",XTI)
else
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==XSI and GetEventDamage()>30 then
call MSI(XSI,1093752136,1,0.1)
call MSI(XSI,1093752137,1,0.1)
call DestroyEffect(LG4)
call ZSI(t2)
call FlushChildHashtable(ZY,(UX1))
call ZSI(t)
call FlushChildHashtable(ZY,(V0I))
call LE4(XSI,XTI)
endif
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetAttacker()==XSI and GetTriggerUnit()!=XTI then
call FlushChildHashtable(ZY,(UX1))
call ZSI(t2)
endif
else
call UnitRemoveAbility(XSI,1093752136)
call UnitRemoveAbility(XSI,1093752137)
call RemoveSavedHandle(ZY,(V0I),(17))
call FlushChildHashtable(ZY,(UX1))
call ZSI(t2)
endif
endif
set t2=null
set t=null
set XSI=null
set XTI=null
set LG4=null
return false
endfunction
function LH4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI
local effect LG4=(LoadEffectHandle(ZY,(V0I),(32)))
local trigger t2
local integer UX1
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED then
call DestroyEffect(LG4)
call UnitRemoveAbility(XSI,1093752136)
call UnitRemoveAbility(XSI,1093752137)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetAttacker()==XSI and GetTriggerUnit()!=(LoadUnitHandle(ZY,(V0I),(17)))and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(XSI))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false then
set XTI=GetTriggerUnit()
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call UnitRemoveAbility(XSI,1093752136)
call UnitRemoveAbility(XSI,1093752137)
if GetUnitState(XTI,UNIT_STATE_LIFE)/GetUnitState(XTI,UNIT_STATE_MAX_LIFE)>0.5 then
call KKI(XSI,1093752136)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093752136,false)
else
call KKI(XSI,1093752137)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093752137,false)
endif
call IssueImmediateOrder(XSI,"stop")
set t2=CreateTrigger()
set UX1=GetHandleId(t2)
call TriggerRegisterTimerEvent(t2,0,false)
call TriggerRegisterTimerEvent(t2,2,false)
call TriggerRegisterUnitEvent(t2,XTI,EVENT_UNIT_DAMAGED)
call K7I(t2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t2,Condition(function LF4))
call SaveUnitHandle(ZY,(UX1),(2),(XSI))
call SaveUnitHandle(ZY,(UX1),(17),(XTI))
call SaveEffectHandle(ZY,(UX1),(32),(LG4))
call SaveInteger(ZY,(UX1),(375),(V0I))
call SaveTriggerHandle(ZY,(UX1),(35),(t))
endif
set t=null
set XSI=null
set XTI=null
set LG4=null
return false
endfunction
function LZ4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,10,false)
call TriggerAddCondition(t,Condition(function LH4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(null))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\WalrusPunchWeaponFX.mdx",XSI,"weapon")))
set t=null
set XSI=null
endfunction
function LV4 takes nothing returns boolean
if GetSpellAbilityId()==1093753169 then
call LZ4()
endif
return false
endfunction
function V01 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LV4))
set t=null
endfunction
function LW4 takes nothing returns nothing
call ShowUnit(GetEnumUnit(),true)
call UnitRemoveAbility(GetEnumUnit(),1093678162)
call SetUnitInvulnerable(GetEnumUnit(),false)
call PauseUnit(GetEnumUnit(),false)
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
call SetUnitPosition(GetEnumUnit(),GEI,GFI)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetOwningPlayer(GetEnumUnit()))
else
call SetUnitX(GetEnumUnit(),GEI)
call SetUnitY(GetEnumUnit(),GFI)
endif
if GetEnumUnit()==GAI and GBI!=null then
call IssueTargetOrder(GAI,"attack",GBI)
endif
call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
endfunction
function Snowball_Slow takes nothing returns nothing
local integer LCI
if GDI==1 then
set LCI=1093808198
elseif GDI==2 then
set LCI=1093808197
elseif GDI==3 then
set LCI=1093751628
elseif GDI==4 then
set LCI=1093808196
endif
if IsUnitInGroup(GetEnumUnit(),G9I)==false then
call GroupAddUnit(G9I,GetEnumUnit())
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),LCI,false)
call MQI(GetEnumUnit(),LCI,1,5,1110459459)
endif
endfunction
function LX4 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),G9I)==false then
call GroupAddUnit(G9I,GetEnumUnit())
if GetEnumUnit()==GBI then
call XNI(GAI,GetEnumUnit(),1,40*GDI+40)
call SetUnitAbilityLevel(GCI,1093687350,SPI(0.25*GDI+0.25))
else
call XNI(GAI,GetEnumUnit(),1,40*GDI)
call SetUnitAbilityLevel(GCI,1093687350,SPI(0.25*GDI))
endif
call SetUnitX(GCI,GetUnitX(GetEnumUnit()))
call SetUnitY(GCI,GetUnitY(GetEnumUnit()))
call IssueTargetOrder(GCI,"thunderbolt",GetEnumUnit())
endif
endfunction
function LY4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit KRI=(LoadUnitHandle(ZY,(V0I),(45)))
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real r=(LoadReal(ZY,(V0I),(671)))
local real a=JPI(GetUnitX(KRI),GetUnitY(KRI),J6I,J7I)*bj_DEGTORAD
local real x=GetUnitX(KRI)+r*Cos(a)
local real y=GetUnitY(KRI)+r*Sin(a)
local group QY1=(LoadGroupHandle(ZY,(V0I),(133)))
local group g
local integer ZLI=GetTriggerEvalCount(t)
local real PB2=RMinBJ(2.5+(ZLI*0.02),10)
local real HF2=225+40*(ZLI*0.02)
set GDI=GetUnitAbilityLevel(XSI,1093751607)
set OK=XSI
set G9I=QY1
set GAI=XSI
set GBI=XTI
set GCI=(LoadUnitHandle(ZY,(V0I),(19)))
call SetUnitX(KRI,x)
call SetUnitY(KRI,y)
call SetUnitFacing(KRI,a*bj_RADTODEG-180)
call SetUnitScale(KRI,PB2,PB2,PB2)
if JAI(x,y,J6I,J7I)<r*2 or ZLI==150 then
call KCI(x,y,300)
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,HF2,Condition(function SOI))
call ForGroup(g,function LX4)
call ZYI(g)
set g=null
set GEI=x
set GFI=y
call ForGroup((LoadGroupHandle(ZY,(V0I),(22))),function LW4)
call ZYI((LoadGroupHandle(ZY,(V0I),(22))))
call ZYI(QY1)
call KillUnit(KRI)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
if ModuloInteger(GetTriggerEvalCount(t),5)==0 then
call KCI(x,y,300)
set g=ZJI()
call GroupEnumUnitsInRange(g,x,y,HF2,Condition(function SOI))
call ForGroup(g,function LX4)
call ZYI(g)
set g=null
endif
endif
set t=null
set XSI=null
set KRI=null
set QY1=null
return false
endfunction
function LJ4 takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call ShowUnit(GetEnumUnit(),false)
call KKI(GetEnumUnit(),1093678162)
call SetUnitInvulnerable(GetEnumUnit(),true)
call PauseUnit(GetEnumUnit(),true)
if GAI!=GetEnumUnit()then
set GHI=GHI+1
endif
endfunction
function LK4 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and KMI(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or NTI(GetFilterUnit())))and((LoadBoolean(ZY,(GetHandleId(GetOwningPlayer(GetFilterUnit()))),(139)))==false or GAI==GetFilterUnit())
endfunction
function LL4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real J4I=GetUnitX(XSI)
local real J5I=GetUnitY(XSI)
local real J6I=GetUnitX(XTI)
local real J7I=GetUnitY(XTI)
local real a=JPI(J4I,J5I,J6I,J7I)*bj_DEGTORAD
local unit KRI=CreateUnit(GetOwningPlayer(XSI),1747993395,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
local group g=ZJI()
set GGI=0
set GHI=1
set GAI=XSI
set GGI=1.5*RMaxBJ(133,GetUnitMoveSpeed(XSI))
call GroupEnumUnitsInRange(g,J4I,J5I,255,Condition(function LK4))
call ForGroup(g,function LJ4)
set GCI=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call KKI(GCI,1093687350)
call SetUnitTimeScale(KRI,2)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function LY4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(19),(GCI))
call SaveUnitHandle(ZY,(V0I),(45),(KRI))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveReal(ZY,(V0I),(671),((GGI*0.02)*1.0))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveGroupHandle(ZY,(V0I),(22),(g))
call SaveGroupHandle(ZY,(V0I),(133),(ZJI()))
set t=null
set XSI=null
set KRI=null
set g=null
endfunction
function LM4 takes nothing returns boolean
if GetSpellAbilityId()==1093751607 then
call LL4()
endif
return false
endfunction
function VI1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LM4))
call YVI(1093687350)
set t=null
endfunction
function LN4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call IssueTargetOrder(XSI,"move",XTI)
set t=null
set XSI=null
set XTI=null
return false
endfunction
function LS4 takes nothing returns nothing
local unit XSI=GetSummonedUnit()
local unit XTI=GetSummoningUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerAddCondition(t,Condition(function LN4))
call TriggerRegisterTimerEvent(t,0.2,false)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function LT4 takes nothing returns boolean
local integer id=GetUnitTypeId(GetSummonedUnit())
if id==1865429322 or id==1865429323 or id==1865429324 or id==1865429325 then
call LS4()
endif
return false
endfunction
function V11 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function LT4))
endfunction
function LR4 takes integer WJI returns boolean
if WJI==1852862003 or WJI==1852862006 or WJI==1848652080 or WJI==1848657754 then
return true
endif
if WJI==1852862002 or WJI==1852862006 or WJI==1848652082 or WJI==1848657969 then
return true
endif
if WJI==1852862001 or WJI==1852862004 or WJI==1848652081 or WJI==1848657968 then
return true
endif
return false
endfunction
function LP4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local unit T0I=(LoadUnitHandle(ZY,(V0I),(19)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set GZI=GetEventDamageSource()
else
call SetUnitX(XSI,GetUnitX(XTI))
call SetUnitY(XSI,GetUnitY(XTI))
call SetUnitX(T0I,GetUnitX(XTI))
call SetUnitY(T0I,GetUnitY(XTI))
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
return false
endfunction
function LQ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set GZI=GetEventDamageSource()
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function LU4 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetSummoningUnit()
local unit XTI=GetSummonedUnit()
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),0)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function LP4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(19),(T0I))
if TPI(XSI,1227899192)then
call UnitAddAbility(T0I,1093678153)
endif
set t=null
set XSI=null
set XTI=null
set T0I=null
endfunction
function M04 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetSummoningUnit()
local unit XTI=GetSummonedUnit()
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function LQ4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
set t=null
set XSI=null
set XTI=null
endfunction
function MI4 takes nothing returns boolean
local integer WJI=GetUnitTypeId(GetSummonedUnit())
if WJI==1852862003 or WJI==1852862006 or WJI==1848652080 or WJI==1848657754 then
call LU4()
elseif LR4(WJI)then
call M04()
endif
return false
endfunction
function VO1 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function MI4))
set t=null
endfunction
function M14 takes nothing returns nothing
call SUI(GVI,GetEnumUnit(),0.75+0.25*GetUnitAbilityLevel(GVI,1093809990))
endfunction
function MO4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local real a=(LoadReal(ZY,(V0I),(137)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local real J4I=(LoadReal(ZY,(V0I),(189)))
local real J5I=(LoadReal(ZY,(V0I),(190)))
local group g
local real d=JAI(J4I,J5I,J6I,J7I)/25
local location l
local integer ZLI=GetTriggerEvalCount(t)
local real x=J4I+d*ZLI*Cos(a)
local real y=J5I+d*ZLI*Sin(a)
call SetUnitX(XTI,YEI(x))
call SetUnitY(XTI,YHI(y))
if XGI(XTI)==false then
call SetUnitFlyHeight(XTI,325-13*ZLI,0)
endif
if ZLI==25 then
call SetUnitX(XTI,YEI(J6I))
call SetUnitY(XTI,YHI(J7I))
if IsPointInRegion(ZN,GetUnitX(XTI),GetUnitY(XTI))==true then
set l=NNI(GetUnitX(XTI),GetUnitY(XTI))
call SetUnitX(XTI,YGI(GetLocationX(l)))
call SetUnitY(XTI,YZI(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
set OK=XSI
set GVI=XSI
set g=ZJI()
call GroupEnumUnitsInRange(g,GetUnitX(XTI),GetUnitY(XTI),350,Condition(function SOI))
call GroupRemoveUnit(g,XTI)
call ForGroup(g,function M14)
call ZYI(g)
call KCI(GetUnitX(XTI),GetUnitY(XTI),150)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(XTI),GetUnitY(XTI)))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
if XGI(XTI)==false then
call SetUnitFlyHeight(XTI,GetUnitDefaultFlyHeight(XTI),0)
endif
call SetUnitPathing(XTI,true)
endif
set t=null
set XSI=null
set XTI=null
set g=null
return false
endfunction
function M24 takes unit XSI,unit XTI,unit Target2,real M34,real M44,effect FX,effect M54 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local real J6I=M34
local real J7I=M44
local real a=JPI(GetUnitX(XTI),GetUnitY(XTI),M34,M44)*bj_DEGTORAD
if JAI(GetUnitX(XTI),GetUnitY(XTI),M34,M44)>375 then
set J6I=GetUnitX(XTI)+375*Cos(a)
set J7I=GetUnitY(XTI)+375*Sin(a)
endif
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveReal(ZY,(V0I),(137),((a)*1.0))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveReal(ZY,(V0I),(189),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(190),((GetUnitY(XTI))*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(FX))
call SaveEffectHandle(ZY,(V0I),(176),(M54))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function MO4))
set t=null
endfunction
function M64 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local integer HH2=(LoadInteger(ZY,(V0I),(12)))
local real J6I=(LoadReal(ZY,(V0I),(47)))
local real J7I=(LoadReal(ZY,(V0I),(48)))
local integer M74=(LoadInteger(ZY,(V0I),(706)))
local real a
if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and NVI(XTI)==false)then
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809990,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093810008,false)
call M24(XSI,XTI,(LoadUnitHandle(ZY,(V0I),(711))),J6I,J7I,(LoadEffectHandle(ZY,(V0I),(32))),(LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093810008 then
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(176))))
set a=JPI(GetUnitX(XTI),GetUnitY(XTI),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
if JAI(GetUnitX(XTI),GetUnitY(XTI),GetSpellTargetX(),GetSpellTargetY())>375 then
set J6I=GetUnitX(XTI)+375*Cos(a)
set J7I=GetUnitY(XTI)+375*Sin(a)
else
set J6I=GetSpellTargetX()
set J7I=GetSpellTargetY()
endif
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",J6I,J7I)))
call SaveReal(ZY,(V0I),(47),((J6I)*1.0))
call SaveReal(ZY,(V0I),(48),((J7I)*1.0))
call SaveUnitHandle(ZY,(V0I),(711),(GetSpellTargetUnit()))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetSpellTargetUnit(),"origin")))
endif
else
set ZLI=ZLI+1
call SaveInteger(ZY,(V0I),(34),(ZLI))
call SetUnitPathing(XTI,false)
if(LoadInteger(ZY,(V0I),(707)))==1 then
set M74=M74+3
else
set M74=M74-3
endif
call SaveInteger(ZY,(V0I),(706),(M74))
if M74==30 then
call SaveInteger(ZY,(V0I),(707),(-1))
elseif M74==-30 then
call SaveInteger(ZY,(V0I),(707),(1))
endif
if XGI(XTI)==false then
if ZLI<15 then
call SetUnitFlyHeight(XTI,ZLI*20,0)
else
call SetUnitFlyHeight(XTI,300+M74,0)
endif
endif
if ZLI>(HH2-25)then
if XGI(XTI)==false then
call SetUnitFlyHeight(XTI,300,0)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809990,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093810008,false)
call M24(XSI,XTI,(LoadUnitHandle(ZY,(V0I),(711))),J6I,J7I,(LoadEffectHandle(ZY,(V0I),(32))),(LoadEffectHandle(ZY,(V0I),(176))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function M84 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local integer WTI=GetUnitAbilityLevel(XSI,1093809990)
local unit T0I=CreateUnit(GetOwningPlayer(XTI),1697656901,GetUnitX(XTI),GetUnitY(XTI),0)
call UnitAddAbility(T0I,1093810226)
call SetUnitAbilityLevel(T0I,1093810226,WTI)
call IssueTargetOrder(T0I,"thunderbolt",XTI)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093809990,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),1093810008,true)
call UnitAddAbility(XSI,1093810008)
call SetUnitPathing(XTI,false)
if XGI(XTI)==false then
call KKI(XTI,1097691750)
call UnitRemoveAbility(XTI,1097691750)
endif
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveUnitHandle(ZY,(V0I),(711),(XTI))
call SaveInteger(ZY,(V0I),(12),(R2I((1.25+0.25*WTI)/.02)))
call SaveInteger(ZY,(V0I),(34),(0))
call SaveInteger(ZY,(V0I),(706),(0))
call SaveInteger(ZY,(V0I),(707),(1))
call SaveReal(ZY,(V0I),(47),((GetUnitX(XTI))*1.0))
call SaveReal(ZY,(V0I),(48),((GetUnitY(XTI))*1.0))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget("war3mapImported\\AntiGravityTarget.mdx",XTI,"origin")))
call SaveEffectHandle(ZY,(V0I),(176),(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetUnitX(XTI),GetUnitY(XTI))))
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function M64))
set XSI=null
set XTI=null
endfunction
function M94 takes nothing returns boolean
if GetSpellAbilityId()==1093809990 and ZXI(GetSpellTargetUnit())==false then
call M84()
endif
return false
endfunction
function V21 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function M94))
call YVI(1093687350)
call YVI(1093810226)
set t=null
endfunction
function MA4 takes unit XSI,unit XTI returns nothing
local integer WTI=GetUnitAbilityLevel(XSI,1093809991)
if IsUnitType(XTI,UNIT_TYPE_HERO)==true then
if WTI==1 then
call MSI(XTI,1093810007,1,10)
elseif WTI==2 then
call MSI(XTI,1093810230,1,10)
elseif WTI==3 then
call MSI(XTI,1093810229,1,10)
elseif WTI==4 then
call MSI(XTI,1093810231,1,10)
endif
else
if WTI==1 then
call MSI(XTI,1093810481,1,10)
elseif WTI==2 then
call MSI(XTI,1093810266,1,10)
elseif WTI==3 then
call MSI(XTI,1093810482,1,10)
elseif WTI==4 then
call MSI(XTI,1093810480,1,10)
endif
endif
call KEI(TF,GetUnitX(XTI),GetUnitY(XTI))
endfunction
function MB4 takes nothing returns nothing
local real d
if IsUnitInGroup(GetEnumUnit(),GYI)==false then
set d=J8I(GetEnumUnit(),GXI)
if d<GJI then
set GJI=d
set GWI=GetEnumUnit()
endif
endif
endfunction
function MC4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local group BA2=(LoadGroupHandle(ZY,(V0I),(187)))
local real x=GetUnitX(XTI)
local real y=GetUnitY(XTI)
local group g=ZJI()
call GroupAddUnit(BA2,XTI)
call MA4(XSI,XTI)
set OK=XSI
set GWI=null
set GXI=XTI
set GYI=BA2
set GJI=999999
call GroupEnumUnitsInRange(g,x,y,525,Condition(function S6I))
call ForGroup(g,function MB4)
call ZYI(g)
if GWI==null or GetTriggerEvalCount(t)>26 then
call ZYI(BA2)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
else
set XTI=GWI
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
endif
set g=null
set t=null
set XSI=null
set XTI=null
set BA2=null
return false
endfunction
function MD4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local group BA2=ZJI()
local unit T0I=CreateUnit(GetOwningPlayer(XSI),1697656901,GetUnitX(XSI),GetUnitY(XSI),GetUnitFacing(XSI))
call KEI(TF,GetUnitX(XSI),GetUnitY(XSI))
call KKI(T0I,1093810228)
call SetUnitAbilityLevel(T0I,1093810228,GetUnitAbilityLevel(XSI,1093809991))
call IssueTargetOrder(T0I,"chainlightning",XTI)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveGroupHandle(ZY,(V0I),(187),(BA2))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function MC4))
set XSI=null
set XTI=null
set t=null
set T0I=null
endfunction
function ME4 takes nothing returns boolean
if GetSpellAbilityId()==1093809991 and ZXI(GetSpellTargetUnit())==false then
call MD4()
endif
return false
endfunction
function V31 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ME4))
set t=null
endfunction
function MF4 takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill())==1 then
if GetLearnedSkill()==1093809990 then
call UnitRemoveAbility(GetTriggerUnit(),1093809993)
elseif GetLearnedSkill()==1093809991 then
call UnitRemoveAbility(GetTriggerUnit(),1093809995)
elseif GetLearnedSkill()==1093810006 then
call UnitRemoveAbility(GetTriggerUnit(),1093809994)
endif
endif
return false
endfunction
function MG4 takes integer id returns nothing
set GKI[GLI]=id
set GLI=GLI+1
endfunction
function MH4 takes integer id returns boolean
local integer i=0
loop
exitwhen i==GLI
if id==GKI[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function MZ4 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and MH4(GetSpellAbilityId())==false then
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(705),(GetSpellAbilityId()))
call SaveInteger(ZY,(GetHandleId(GetTriggerUnit())),(712),(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())))
endif
return false
endfunction
function MV4 takes unit u returns nothing
call UnitRemoveAbility(u,1093743428)
call UnitRemoveAbility(u,1093808458)
call UnitRemoveAbility(u,1093751126)
call UnitRemoveAbility(u,1093751893)
call UnitRemoveAbility(u,1093809217)
call UnitRemoveAbility(u,1093809218)
call UnitRemoveAbility(u,1093750344)
call UnitRemoveAbility(u,1093808206)
call UnitRemoveAbility(u,1093753394)
call UnitRemoveAbility(u,1093753395)
call UnitRemoveAbility(u,1093808181)
call UnitRemoveAbility(u,1093752405)
call UnitRemoveAbility(u,1093683011)
call UnitRemoveAbility(u,1093809221)
call UnitRemoveAbility(u,1093685844)
call UnitRemoveAbility(u,1093751361)
call UnitRemoveAbility(u,1093683265)
call UnitRemoveAbility(u,1093686081)
call UnitRemoveAbility(u,1093743153)
call UnitRemoveAbility(u,1093752646)
call UnitRemoveAbility(u,1093677652)
call UnitRemoveAbility(u,1093751609)
call UnitRemoveAbility(u,1093808456)
call UnitRemoveAbility(u,1093750094)
call UnitRemoveAbility(u,1093678667)
call UnitRemoveAbility(u,1093684805)
call UnitRemoveAbility(u,1093684560)
endfunction
function MW4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer MX4=(LoadInteger(ZY,(V0I),(704)))
local integer XT3=(LoadInteger(ZY,(V0I),(713)))
if MX4==(LoadInteger(ZY,(GetHandleId(XSI)),(704)))then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
elseif GetTriggerEvalCount(t)>(15-XT3)and KMI(XSI)==false then
call UnitRemoveAbility(XSI,MX4)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
return false
endfunction
function MY4 takes unit XSI,integer MX4,real SV1 returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function MW4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(704),(MX4))
call SaveInteger(ZY,(GetHandleId(XSI)),(704),(-1))
call SaveInteger(ZY,(V0I),(713),(R2I((TimerGetElapsed(M))-SV1)))
set t=null
endfunction
function MJ4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local integer MX4=(LoadInteger(ZY,(V0I),(704)))
local integer ZLI=(LoadInteger(ZY,(V0I),(34)))
local integer WTI=GetUnitAbilityLevel(XSI,1093809992)
local real SV1=(LoadReal(ZY,(V0I),(411)))
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and GetTriggerEventId()!=EVENT_WIDGET_DEATH then
if ZLI==0 then
call SaveInteger(ZY,(V0I),(34),(1))
call DisplayTimedTextToPlayer(GetOwningPlayer(XSI),0,0,10,"|c00ff0303"+GetObjectName(1848659031)+"|r")
else
call MV4(XSI)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),MX4,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call MY4(XSI,MX4,SV1)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093809992 then
call MV4(XSI)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),MX4,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call MY4(XSI,MX4,SV1)
elseif GetSpellAbilityId()==MX4 then
call SaveReal(ZY,(V0I),(411),(((TimerGetElapsed(M)))*1.0))
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
call MV4(XSI)
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),MX4,false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call MY4(XSI,MX4,SV1)
endif
set t=null
set XSI=null
return false
endfunction
function MK4 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
local integer MX4=(LoadInteger(ZY,(V0I),(704)))
local integer WTI=(LoadInteger(ZY,(V0I),(5)))
local real ML4=60*(2+GetUnitAbilityLevel(XSI,1093809992))
if(LoadInteger(ZY,(GetHandleId(XTI)),(3000)))>0 then
call SaveInteger(ZY,(GetHandleId(XSI)),(3000),((LoadInteger(ZY,(GetHandleId(XTI)),(3000)))))
endif
if(LoadInteger(ZY,(GetHandleId(XTI)),(3001)))>0 then
call SaveInteger(ZY,(GetHandleId(XSI)),(3001),((LoadInteger(ZY,(GetHandleId(XTI)),(3001)))))
endif
if(LoadInteger(ZY,(GetHandleId(XTI)),(3002)))>0 then
call SaveInteger(ZY,(GetHandleId(XSI)),(3002),((LoadInteger(ZY,(GetHandleId(XTI)),(3002)))))
endif
if(LoadInteger(ZY,(GetHandleId(XTI)),(710)))>0 then
call SaveInteger(ZY,(GetHandleId(XSI)),(710),((LoadInteger(ZY,(GetHandleId(XTI)),(710)))))
endif
call KEI(MF,GetUnitX(XSI),GetUnitY(XSI))
call K3I(GetObjectName(MX4),3.5,XSI,0.024,170,0,255,216)
call SaveInteger(ZY,(GetHandleId(XSI)),(704),(MX4))
call SetPlayerAbilityAvailable(GetOwningPlayer(XSI),MX4,true)
call KKI(XSI,MX4)
call SetUnitAbilityLevel(XSI,MX4,WTI)
set t=CreateTrigger()
set V0I=GetHandleId(t)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveInteger(ZY,(V0I),(34),(0))
call SaveInteger(ZY,(V0I),(704),(MX4))
call TriggerRegisterUnitEvent(t,XSI,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,ML4,false)
call TriggerRegisterDeathEvent(t,XSI)
call TriggerRegisterTimerEvent(t,ML4-20,false)
call TriggerAddCondition(t,Condition(function MJ4))
set t=null
set XSI=null
set XTI=null
endfunction
function MM4 takes unit XSI,unit XTI,integer MX4,integer WTI returns nothing
local trigger t=LII(XTI,XSI,1747993666,"MK4",900)
local integer V0I=GetHandleId(t)
call KEI(LF,GetUnitX(XTI),GetUnitY(XTI))
call K3I(GetObjectName(MX4),3.75,XTI,0.024,170,0,255,216)
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveInteger(ZY,(V0I),(704),(MX4))
call SaveInteger(ZY,(V0I),(5),(WTI))
set t=null
endfunction
function MN4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local unit XTI=(LoadUnitHandle(ZY,(V0I),(17)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if MH4(GetSpellAbilityId())==true then
else
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
else
call DestroyEffect((LoadEffectHandle(ZY,(V0I),(32))))
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
endif
set t=null
set XSI=null
set XTI=null
return false
endfunction
function MS4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
if(LoadInteger(ZY,(GetHandleId(XTI)),(705)))!=0 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Nebula.mdx",XTI,"origin"))
call MM4(XSI,XTI,(LoadInteger(ZY,(GetHandleId(XTI)),(705))),(LoadInteger(ZY,(GetHandleId(XTI)),(712))))
endif
set XSI=null
set XTI=null
endfunction
function SpellSteal takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local unit XTI=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local string fx=""
if IsPlayerAlly(GetOwningPlayer(XSI),GetLocalPlayer())or XJI(GetLocalPlayer())then
set fx="war3mapImported\\Nebula.mdx"
endif
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveUnitHandle(ZY,(V0I),(17),(XTI))
call SaveEffectHandle(ZY,(V0I),(32),(AddSpecialEffectTarget(fx,XTI,"origin")))
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterDeathEvent(t,XTI)
call TriggerRegisterUnitEvent(t,XTI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MN4))
set XSI=null
set XTI=null
endfunction
function MT4 takes nothing returns boolean
if GetSpellAbilityId()==1093809992 and ZXI(GetSpellTargetUnit())==false then
call MS4()
endif
return false
endfunction
function MR4 takes nothing returns nothing
call MG4(1093752648)
call MG4(1095656306)
call MG4(1093677895)
call MG4(1093679411)
call MG4(1093743946)
call MG4(1093681479)
call MG4(1093681733)
call MG4(1093751896)
call MG4(1093808697)
call MG4(1093751369)
call MG4(1093747504)
call MG4(1093742932)
call MG4(1093744986)
call MG4(1093743428)
call MG4(1093808458)
call MG4(1093751126)
call MG4(1093751893)
call MG4(1093809217)
call MG4(1093809218)
call MG4(1093750344)
call MG4(1093808206)
call MG4(1093753394)
call MG4(1093753395)
call MG4(1093808181)
call MG4(1093752405)
call MG4(1093683011)
call MG4(1093809221)
call MG4(1093685844)
call MG4(1093751361)
call MG4(1093683265)
call MG4(1093686081)
call MG4(1093743153)
call MG4(1093752646)
call MG4(1093677652)
call MG4(1093751609)
call MG4(1093808456)
call MG4(1093750094)
call MG4(1093684056)
call MG4(1093684055)
call MG4(1093681461)
call MG4(1093681735)
call MG4(1093808471)
call MG4(1093808472)
call MG4(1093808470)
call MG4(1093808473)
call MG4(1093748565)
call MG4(1093752392)
call MG4(1093752391)
call MG4(1093685582)
call MG4(1093677622)
call MG4(1095263841)
call MG4(1093679446)
call MG4(1093682265)
call MG4(1093752642)
call MG4(1093684314)
call MG4(1093685065)
call MG4(1093750337)
call MG4(1093748033)
call MG4(1093684819)
call MG4(1093747777)
call MG4(1093810257)
call MG4(1093687121)
call MG4(1093751864)
call MG4(1093742674)
call MG4(1093742926)
call MG4(1093682521)
call MG4(1093682760)
call MG4(1093686859)
call MG4(1093686865)
call MG4(1093678899)
call MG4(1093677898)
call MG4(1093678154)
call MG4(1093678157)
call MG4(1093678158)
call MG4(1093809990)
call MG4(1093810008)
call MG4(1093809991)
call MG4(1093809992)
call MG4(1093685557)
call MG4(1093686347)
call MG4(1095328363)
call MG4(1093683801)
call MG4(1093747011)
call MG4(1095331948)
call MG4(1095331954)
call MG4(1097163124)
call MG4(1093684016)
call MG4(1093683255)
call MG4(1093683254)
call MG4(1093682767)
call MG4(1093677656)
call MG4(1095332727)
call MG4(1095332962)
call MG4(1093681718)
call MG4(1093751349)
call MG4(1093808182)
call MG4(1093748292)
call MG4(1093748303)
call MG4(1093748305)
call MG4(1093749071)
call MG4(1093681720)
call MG4(1093752645)
call MG4(1093686328)
call MG4(1093686327)
call MG4(1093677367)
call MG4(1093751108)
call MG4(1093748304)
call MG4(1093683788)
call MG4(1094935400)
call MG4(1095333995)
call MG4(1095331943)
call MG4(1093742918)
call MG4(1093742917)
call MG4(1093686067)
call MG4(1093742916)
call MG4(1093742919)
call MG4(1093742920)
call MG4(1093686329)
call MG4(1093743959)
call MG4(1094936696)
call MG4(1093682756)
call MG4(1093686341)
call MG4(1093751863)
call MG4(1093744973)
call MG4(1093677647)
call MG4(1093679193)
call MG4(1093679194)
call MG4(1093679408)
call MG4(1093679410)
call MG4(1093683266)
call MG4(1093682227)
call MG4(1093682246)
call MG4(1093677655)
call MG4(1093681995)
call MG4(1093684023)
call MG4(1093683796)
call MG4(1095328865)
call MG4(1093809721)
call MG4(1093752655)
call MG4(1093748055)
call MG4(1093750095)
call MG4(1093753417)
call MG4(1093753416)
call MG4(1093753431)
call MG4(1093808945)
call MG4(1093743191)
call MG4(1093743681)
call MG4(1093751096)
call MG4(1093810265)
call MG4(1093810244)
call MG4(1093810246)
endfunction
function V41 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MT4))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MZ4))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function MF4))
set t=null
call MR4()
endfunction
function MP4 takes nothing returns nothing
if NKI(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810003)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810001)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810001)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810002)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810002)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810004)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810004)
endif
endfunction
function MQ4 takes nothing returns nothing
if NKI(GetEnumUnit())then
return
endif
if GMI==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810003)==0 then
call KKI(GetEnumUnit(),1093810003)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810003,false)
endif
elseif GMI==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810001)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call KKI(GetEnumUnit(),1093810001)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810001,false)
endif
elseif GMI==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810002)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call UnitRemoveAbility(GetEnumUnit(),1093810001)
call KKI(GetEnumUnit(),1093810002)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810002,false)
endif
elseif GMI==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810004)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call UnitRemoveAbility(GetEnumUnit(),1093810001)
call UnitRemoveAbility(GetEnumUnit(),1093810002)
call KKI(GetEnumUnit(),1093810004)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810004,false)
endif
endif
endfunction
function MU4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
local group U82=(LoadGroupHandle(ZY,(V0I),(340)))
local real x=GetUnitX(XSI)
local real y=GetUnitY(XSI)
local group g=ZJI()
if XSI==null or GetUnitTypeId(XSI)!=1160786520 then
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
call ForGroup(U82,function MP4)
call ZYI(U82)
call ZYI(g)
return false
endif
set OK=XSI
set GMI=GetUnitAbilityLevel(XSI,1093810006)
if KMI(XSI)==false then
call GroupEnumUnitsInRange(g,x,y,925,Condition(function SZI))
endif
call GroupRemoveGroup(g,U82)
call ForGroup(U82,function MP4)
if KMI(XSI)==false then
call ForGroup(g,function MQ4)
endif
call SaveGroupHandle(ZY,(V0I),(340),(g))
call ZYI(U82)
set t=null
set XSI=null
set U82=null
set g=null
return false
endfunction
function N04 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=GetTriggerUnit()
local integer i
local player p
call TriggerRegisterTimerEvent(t,0.3,true)
call TriggerAddCondition(t,Condition(function MU4))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
call SaveGroupHandle(ZY,(V0I),(340),(ZJI()))
set i=0
loop
exitwhen i>5
set p=CO[i]
call SetPlayerAbilityAvailable(p,1093810003,false)
call SetPlayerAbilityAvailable(p,1093810001,false)
call SetPlayerAbilityAvailable(p,1093810002,false)
call SetPlayerAbilityAvailable(p,1093810004,false)
set p=DO[i]
call SetPlayerAbilityAvailable(p,1093810003,false)
call SetPlayerAbilityAvailable(p,1093810001,false)
call SetPlayerAbilityAvailable(p,1093810002,false)
call SetPlayerAbilityAvailable(p,1093810004,false)
set i=i+1
endloop
set t=null
set XSI=null
endfunction
function NI4 takes nothing returns boolean
if GetLearnedSkill()==1093810006 and GetUnitAbilityLevel(GetTriggerUnit(),1093810006)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call N04()
endif
return false
endfunction
function V51 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function NI4))
set t=null
endfunction
function N14 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V0I=GetHandleId(t)
local unit XSI=(LoadUnitHandle(ZY,(V0I),(2)))
call AddUnitAnimationProperties(XSI,"alternate",false)
call FlushChildHashtable(ZY,(V0I))
call ZSI(t)
set t=null
set XSI=null
return false
endfunction
function NO4 takes nothing returns nothing
local unit XSI=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function N14))
call SaveUnitHandle(ZY,(V0I),(2),(XSI))
set t=null
set XSI=null
endfunction
function N24 takes nothing returns boolean
if(GetSpellAbilityId()==1093678899 or GetSpellAbilityId()==1093677898 or GetSpellAbilityId()==1093678154 or GetSpellAbilityId()==1093678157 or GetSpellAbilityId()==1093678158)and GetUnitTypeId(GetTriggerUnit())==1160786520 then
call NO4()
endif
return false
endfunction
function V61 takes nothing returns nothing
local trigger t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function N24))
set t=null
endfunction
function InitCustomTeams takes nothing returns nothing
call SetPlayerTeam(Player(1),0)
call SetPlayerTeam(Player(2),0)
call SetPlayerTeam(Player(3),0)
call SetPlayerTeam(Player(4),0)
call SetPlayerTeam(Player(5),0)
call SetPlayerTeam(Player(7),1)
call SetPlayerTeam(Player(8),1)
call SetPlayerTeam(Player(9),1)
call SetPlayerTeam(Player(10),1)
call SetPlayerTeam(Player(11),1)
endfunction
function main takes nothing returns nothing
local weathereffect we
local integer i
local player p
local unit u
local integer unitID
local trigger t
local real life
local integer HWI
local integer HXI
local version v
local integer HBI
local real QDI
local real QEI
local real QFI
local real QGI
local real QHI
local real QZI
local real QVI
local real QWI
local real QXI
local real QYI
local real QJI
local real QKI
local real QLI
local real QMI
local real QNI
local real QSI
local real QTI
local real QRI
local real QPI
local real QQI
local integer QUI
local player VRI
local real UGI
local real UHI
local real UZI
local real UVI
local real UWI
local real UXI
local real UYI
local real UJI
local real UKI
local real ULI
local real UMI
local real UNI
local real USI
local real UTI
local real URI
local real UPI
local real UQI
local real UUI
local real I01
local real II1
local real I11
local real IO1
local real I21
local real I31
local location YV1
local region AOO
local real d
local integer V0I
call SetCameraBounds(-7552.0+GetCameraMargin(CAMERA_MARGIN_LEFT),-7936.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM),7552.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),7424.0-GetCameraMargin(CAMERA_MARGIN_TOP),-7552.0+GetCameraMargin(CAMERA_MARGIN_LEFT),7424.0-GetCameraMargin(CAMERA_MARGIN_TOP),7552.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),-7936.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCFelwood\\DNCFelwoodTerrain\\DNCFelwoodTerrain.mdl","Environment\\DNC\\DNCFelwood\\DNCFelwoodUnit\\DNCFelwoodUnit.mdl")
call SetWaterBaseColor(0,0,255,255)
call NewSoundEnvironment("Default")
call SetAmbientDaySound("FelwoodDay")
call SetAmbientNightSound("FelwoodNight")
call SetMapMusic("Music",true,0)
set IC=CreateSound("Abilities\\Spells\\Human\\Avatar\\Avatar.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(IC,"Avatar")
call SetSoundDuration(IC,3199)
set OC=CreateSound("Abilities\\Spells\\NightElf\\Blink\\BlinkArrival1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(OC,"BlinkTarget")
call SetSoundDuration(OC,1466)
call SetSoundPitch(OC,1.6)
set AC=CreateSound("Abilities\\Spells\\Human\\Blizzard\\BlizzardLoop1.wav",true,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(AC,"BlizzardLoop")
call SetSoundDuration(AC,4000)
set BC=CreateSound("Buildings\\Undead\\TempleOfTheDamned\\TempleOfTheDamnedWhat.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(BC,"TempleOfTheDamnedWhat")
call SetSoundDuration(BC,3518)
call SetSoundDistanceCutoff(BC,2000.0)
set CC=CreateSound("Abilities\\Spells\\Human\\Flare\\FlareTarget2.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(CC,"Flare2")
call SetSoundDuration(CC,1344)
call SetSoundDistanceCutoff(CC,2000.0)
set DC=CreateSound("Sounds\\Dominating.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(DC,1802)
call SetSoundChannel(DC,0)
call SetSoundVolume(DC,127)
call SetSoundPitch(DC,1.0)
set EC=CreateSound("Sounds\\Double_Kill.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(EC,2012)
call SetSoundChannel(EC,0)
call SetSoundVolume(EC,127)
call SetSoundPitch(EC,1.0)
set FC=CreateSound("Sounds\\firstblood.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(FC,1567)
call SetSoundChannel(FC,0)
call SetSoundVolume(FC,127)
call SetSoundPitch(FC,1.0)
set GC=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperPissed1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(GC,"GoblinSapperPissed")
call SetSoundDuration(GC,1515)
call SetSoundChannel(GC,0)
set HC=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav",false,false,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(HC,"GoblinSapperYesAttack")
call SetSoundDuration(HC,813)
call SetSoundChannel(HC,0)
set ZC=CreateSound("Sounds\\GodLike.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(ZC,1828)
call SetSoundChannel(ZC,0)
call SetSoundVolume(ZC,127)
call SetSoundPitch(ZC,1.0)
set VC=CreateSound("Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav",false,true,true,10,10,"HeroAcksEAX")
call SetSoundParamsFromLabel(VC,"HeroBladeMasterPissed")
call SetSoundDuration(VC,2235)
set WC=CreateSound("Sounds\\HolyShit.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(WC,2325)
call SetSoundChannel(WC,0)
call SetSoundVolume(WC,127)
call SetSoundPitch(WC,1.0)
set KC=CreateSound("Buildings\\NightElf\\MoonWell\\MoonWellWhat1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(KC,"MoonWellWhat")
call SetSoundDuration(KC,2972)
call SetSoundDistances(KC,600.0,10000.0)
call SetSoundDistanceCutoff(KC,2000.0)
set LC=CreateSound("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaos.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(LC,"MarkOfChaos")
call SetSoundDuration(LC,4000)
set MC=CreateSound("Sounds\\Killing_Spree.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(MC,2377)
call SetSoundChannel(MC,0)
call SetSoundVolume(MC,127)
call SetSoundPitch(MC,1.0)
set NC=CreateSound("Sound\\Buildings\\Death\\NightElfBuildingDeathSmall1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(NC,"DeathNightElfBuildingCancel")
call SetSoundDuration(NC,3675)
set TC=CreateSound("Sounds\\MegaKill.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(TC,2612)
call SetSoundChannel(TC,0)
call SetSoundVolume(TC,127)
call SetSoundPitch(TC,1.0)
set RC=CreateSound("Abilities\\Spells\\NightElf\\ShadowMeld\\ShadowMeld1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(RC,"ShadowMeld")
call SetSoundDuration(RC,941)
set PC=CreateSound("Sounds\\MonsterKill.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(PC,3344)
call SetSoundChannel(PC,0)
call SetSoundVolume(PC,127)
call SetSoundPitch(PC,1.0)
set AD=CreateSound("Units\\Creeps\\Ogre\\OgrePissed1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(AD,"OgrePissed")
call SetSoundDuration(AD,3309)
set WD=CreateSound("Sounds\\Ownage.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(WD,2586)
call SetSoundChannel(WD,0)
call SetSoundVolume(WD,127)
call SetSoundPitch(WD,1.0)
set XD=CreateSound("Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed1.wav",false,true,true,10,10,"HeroAcksEAX")
call SetSoundParamsFromLabel(XD,"PandarenBrewmasterPissed")
call SetSoundDuration(XD,2316)
set YD=CreateSound("Abilities\\Spells\\Human\\Polymorph\\PolymorphDone.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(YD,"PolymorphDone")
call SetSoundDuration(YD,1498)
set JD=CreateSound("Buildings\\Naga\\TempleofTides\\TempleOfTidesWhat1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(JD,"TempleOfTidesWhat")
call SetSoundDuration(JD,3483)
call SetSoundDistanceCutoff(JD,2000.0)
set KD=CreateSound("Buildings\\Undead\\TombOfRelics\\TombOfRelicsWhat1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(KD,"TombOfRelicsWhat")
call SetSoundDuration(KD,3065)
call SetSoundDistanceCutoff(KD,2000.0)
set LD=CreateSound("Abilities\\Spells\\Orc\\Disenchant\\Disenchant.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(LD,"Disenchant")
call SetSoundDuration(LD,2043)
set MD=CreateSound("Sound\\Interface\\Rescue.wav",false,false,false,10,10,"")
call SetSoundParamsFromLabel(MD,"Rescue")
call SetSoundDuration(MD,3796)
set ND=CreateSound("Abilities\\Spells\\Undead\\Sleep\\SleepBirth1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(ND,"Sleep")
call SetSoundDuration(ND,3203)
set TD=CreateSound("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagic.wav",false,true,true,10,10,"MissilesEAX")
call SetSoundParamsFromLabel(TD,"DevourMagicLaunch")
call SetSoundDuration(TD,1225)
set PD=CreateSound("Abilities\\Spells\\Other\\BlackArrow\\TheBlackArrow.wav",false,true,true,10,10,"MissilesEAX")
call SetSoundParamsFromLabel(PD,"BlackArrowHit")
call SetSoundDuration(PD,1776)
call SetSoundVolume(PD,50)
set QD=CreateSound("Sound\\Ambient\\DoodadEffects\\TheHornOfCenarius.wav",false,false,false,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(QD,"HornOfCenariusSound")
call SetSoundDuration(QD,12121)
call SetSoundVolume(QD,115)
set UD=CreateSound("Sounds\\triple_kill.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(UD,1907)
call SetSoundChannel(UD,0)
call SetSoundVolume(UD,127)
call SetSoundPitch(UD,1.0)
set BE=CreateSound("Sounds\\Unstoppable.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(BE,2038)
call SetSoundChannel(BE,0)
call SetSoundVolume(BE,127)
call SetSoundPitch(BE,1.0)
set CE=CreateSound("Abilities\\Spells\\Human\\DivineShield\\PaladinDivineShieldDeath1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(CE,"DivineShieldDeath")
call SetSoundDuration(CE,1043)
call SetSoundDistanceCutoff(CE,1500.0)
set DE=CreateSound("Abilities\\Spells\\Items\\AIso\\SoulGem.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(DE,"SoulGem")
call SetSoundDuration(DE,4474)
set EE=CreateSound("Sounds\\WhickedSick.mp3",false,false,false,10,10,"DefaultEAXON")
call SetSoundDuration(EE,2612)
call SetSoundChannel(EE,0)
call SetSoundVolume(EE,127)
call SetSoundPitch(EE,1.0)
set FE=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack4.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(FE,"GoblinSapperYesAttack")
call SetSoundDuration(FE,1091)
call SetSoundChannel(FE,0)
set GE=CreateSound("Abilities\\Spells\\NightElf\\shadowstrike\\ShadowStrikeBirth1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(GE,"ShadowStrikeBirth")
call SetSoundDuration(GE,2194)
call SetSoundPitch(GE,1.2)
set HE=CreateSound("Abilities\\Spells\\Other\\BlackArrow\\TheBlackArrow.wav",false,true,true,10,10,"MissilesEAX")
call SetSoundParamsFromLabel(HE,"BlackArrowHit")
call SetSoundDuration(HE,1776)
call SetSoundPitch(HE,1.6)
set ZE=CreateSound("Abilities\\Spells\\NightElf\\CorrosiveBreath\\CorrosiveBreathMissileLaunch1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(ZE,"CorrosiveBreathMissileLaunch")
call SetSoundDuration(ZE,1301)
call SetSoundPitch(ZE,1.2)
set VE=CreateSound("Sound\\Interface\\Warning\\NightElf\\SentinelAllyHeroDies1.wav",false,false,false,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(VE,"AllyHeroDiesNightElf")
call SetSoundDuration(VE,1963)
call SetSoundVolume(VE,127)
set WE=CreateSound("Sound\\Interface\\Warning\\Undead\\NecromancerAllyHeroDies1.wav",false,false,false,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(WE,"AllyHeroDiesUndead")
call SetSoundDuration(WE,1933)
call SetSoundVolume(WE,127)
set XE=CreateSound("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.wav",false,false,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(XE,"ReviveHuman")
call SetSoundDuration(XE,3196)
call SetSoundChannel(XE,8)
set YE=CreateSound("Sound\\Interface\\SecretFound.wav",false,false,false,10,10,"")
call SetSoundParamsFromLabel(YE,"SecretFound")
call SetSoundDuration(YE,2525)
set JE=CreateSound("Sounds\\UltraKill.mp3",false,false,false,10,10,"")
call SetSoundDuration(JE,2484)
call SetSoundChannel(JE,0)
call SetSoundVolume(JE,127)
call SetSoundPitch(JE,1.0)
set KE=CreateSound("Sounds\\Rampage.mp3",false,false,false,10,10,"")
call SetSoundDuration(KE,1872)
call SetSoundChannel(KE,0)
call SetSoundVolume(KE,127)
call SetSoundPitch(KE,1.0)
set LE=CreateSound("Buildings\\NightElf\\AltarOfElders\\AltarOfEldersWhat1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(LE,"AltarOfEldersWhat")
call SetSoundDuration(LE,3496)
set ME=CreateSound("Units\\Orc\\AncestralGuardian\\AncestralGuardianAttack1.wav",false,true,true,10,10,"CombatSoundsEAX")
call SetSoundParamsFromLabel(ME,"AncestralGuardianAttack1")
call SetSoundDuration(ME,1181)
set NE=CreateSound("Abilities\\Spells\\Human\\Feedback\\Feedback.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(NE,"Feedback")
call SetSoundDuration(NE,1222)
set SE=CreateSound("war3mapImported\\SotS2.mp3",false,false,false,10,10,"")
call SetSoundDuration(SE,6824)
call SetSoundChannel(SE,0)
call SetSoundVolume(SE,127)
call SetSoundPitch(SE,1.0)
set TE=CreateSound("Units\\Undead\\Abomination\\AbominationPissed5.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(TE,"AbominationPissed")
call SetSoundDuration(TE,1735)
set RE=CreateSound("Units\\Undead\\Abomination\\AbominationDeath1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(RE,"AbominationDeath")
call SetSoundDuration(RE,2455)
set PE=CreateSound("Sound\\Units\\Death\\ArtilleryCorpseExplodeDeath1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(PE,"ArtilleryExplodeDeath")
call SetSoundDuration(PE,1486)
set QE=CreateSound("Units\\Undead\\CryptFiend\\CryptFiendPissed2.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(QE,"CryptFiendPissed")
call SetSoundDuration(QE,3541)
set UE=CreateSound("Units\\Undead\\Banshee\\BansheeDeath.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(UE,"BansheeDeath")
call SetSoundDuration(UE,2380)
set IF=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(IF,"FlameStrikeTarget")
call SetSoundDuration(IF,1927)
set OF=CreateSound("Abilities\\Spells\\Other\\Volcano\\VolcanoLoop.wav",false,false,false,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(OF,"VolcanoLoop")
call SetSoundDuration(OF,7616)
set AF=CreateSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav",false,false,false,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(AF,"ThunderClap")
call SetSoundDuration(AF,3451)
set BF=CreateSound("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImage.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(BF,"MirrorImage")
call SetSoundDuration(BF,1756)
set CF=CreateSound("Abilities\\Spells\\Human\\CloudOfFog\\CloudOfFogLoop1.wav",true,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(CF,"CloudOfFogLoop")
call SetSoundDuration(CF,2038)
call SetSoundPitch(CF,0.9)
set DF=CreateSound("Units\\Human\\Gyrocopter\\GyrocopterPissed1.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(DF,"GyrocopterPissed")
call SetSoundDuration(DF,3913)
set ZF=CreateSound("Sound\\Interface\\SecretFound.wav",false,false,false,10,10,"")
call SetSoundParamsFromLabel(ZF,"SecretFound")
call SetSoundDuration(ZF,2525)
set VF=CreateSound("Sound\\Interface\\Hint.wav",false,false,false,10,10,"")
call SetSoundParamsFromLabel(VF,"Hint")
call SetSoundDuration(VF,2006)
set WF=CreateSound("war3mapImported\\pl_impact_stun.mp3",false,true,true,10,10,"SpellsEAX")
call SetSoundDuration(WF,2299)
call SetSoundChannel(WF,11)
call SetSoundVolume(WF,127)
call SetSoundPitch(WF,1.0)
call SetSoundDistances(WF,600.0,10000.0)
call SetSoundDistanceCutoff(WF,2000.0)
call SetSoundConeAngles(WF,0.0,0.0,127)
call SetSoundConeOrientation(WF,0.0,0.0,0.0)
set XF=CreateSound("Sound\\Buildings\\Fire\\OrcHumanLargeBuildingFire1.wav",true,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(XF,"HumanFireLarge")
call SetSoundDuration(XF,3471)
set YF=CreateSound("Units\\Human\\Phoenix\\PhoenixEggWhat1.wav",false,false,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(YF,"PhoenixEggWhat")
call SetSoundDuration(YF,1579)
call SetSoundChannel(YF,0)
set JF=CreateSound("Abilities\\Spells\\NightElf\\BattleRoar\\BattleRoar.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(JF,"BattleRoar")
call SetSoundDuration(JF,1991)
set KF=CreateSound("Buildings\\Undead\\Ziggurat\\ZigguratUpgrade.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(KF,"ZigguratUpgradeWhat")
call SetSoundDuration(KF,4203)
call SetSoundDistances(KF,600.0,10000.0)
call SetSoundDistanceCutoff(KF,3000.0)
set LF=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(LF,"SpellStealMissileLaunch")
call SetSoundDuration(LF,1541)
set MF=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealTarget.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(MF,"SpellStealTarget")
call SetSoundDuration(MF,984)
set NF=CreateSound("Abilities\\Spells\\Undead\\UndeadMine\\AcolyteMining.wav",false,true,true,10,10,"DefaultEAXON")
call SetSoundParamsFromLabel(NF,"AcolyteMining")
call SetSoundDuration(NF,4233)
call SetSoundChannel(NF,0)
set SF=CreateSound("Abilities\\Weapons\\AvengerMissile\\DestroyerMissile.wav",false,true,true,10,10,"MissilesEAX")
call SetSoundParamsFromLabel(SF,"DestroyerMissileLaunch")
call SetSoundDuration(SF,817)
set TF=CreateSound("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouch.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(TF,"SpiritTouch")
call SetSoundDuration(TF,2043)
call SetSoundChannel(TF,11)
set RF=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(RF,"FlameStrikeTarget")
call SetSoundDuration(RF,1927)
set M3=Rect(6176.0,3136.0,6400.0,3392.0)
set N3=Rect(3616.0,3584.0,3872.0,3872.0)
set S3=Rect(2304.0,5280.0,2752.0,5728.0)
set T3=Rect(6176.0,5952.0,6624.0,6240.0)
set R3=Rect(-4224.0,-6848.0,-3968.0,-6592.0)
set P3=Rect(-6304.0,-4384.0,-6080.0,-4224.0)
set Q3=Rect(-4928.0,-5760.0,-4736.0,-5536.0)
set U3=Rect(6048.0,3424.0,6304.0,3776.0)
set I4=Rect(4128.0,3776.0,4352.0,4032.0)
set O4=Rect(2752.0,5408.0,3040.0,5632.0)
set A4=Rect(-7040.0,-6912.0,-6688.0,-6656.0)
set B4=Rect(-3648.0,-6880.0,-3424.0,-6688.0)
set C4=Rect(-6336.0,-4224.0,-5984.0,-3904.0)
set D4=Rect(-4896.0,-5504.0,-4608.0,-5184.0)
set E4=Rect(2912.0,-2944.0,3104.0,-2720.0)
set F4=Rect(5696.0,5504.0,7296.0,7392.0)
set G4=Rect(-7680.0,-8032.0,-6176.0,-6240.0)
set H4=Rect(-2464.0,1536.0,-2240.0,1760.0)
set Z4=Rect(4288.0,-2688.0,4544.0,-2400.0)
set V4=Rect(-3328.0,-416.0,-3104.0,-96.0)
set W4=Rect(1440.0,-4096.0,1728.0,-3872.0)
set X4=Rect(-4576.0,3328.0,-4448.0,3488.0)
set Y4=Rect(-3264.0,4192.0,-2912.0,4320.0)
set J4=Rect(2848.0,-5088.0,3072.0,-4928.0)
set K4=Rect(-1824.0,2240.0,-1472.0,2464.0)
set L4=Rect(3008.0,-3776.0,3136.0,-3648.0)
set M4=Rect(1184.0,2976.0,1280.0,3104.0)
set N4=Rect(-512.0,-3648.0,-320.0,-3520.0)
set S4=Rect(-7104.0,6656.0,-6848.0,6912.0)
set T4=Rect(-7104.0,6656.0,-6880.0,6880.0)
set R4=Rect(-5952.0,-6432.0,-5248.0,-5728.0)
set P4=Rect(5088.0,7488.0,5792.0,8192.0)
set Q4=Rect(2304.0,-672.0,2592.0,-384.0)
set U4=Rect(3872.0,-3008.0,4928.0,-1952.0)
set I5=Rect(-3552.0,-768.0,-2528.0,320.0)
set O5=Rect(1056.0,-5216.0,2368.0,-3744.0)
set A5=Rect(-5120.0,3008.0,-3648.0,4320.0)
set B5=Rect(-3456.0,3808.0,-2656.0,4864.0)
set C5=Rect(2272.0,-6080.0,3776.0,-4928.0)
set D5=Rect(-1888.0,2208.0,-992.0,3040.0)
set E5=Rect(416.0,2624.0,1632.0,3648.0)
set F5=Rect(2592.0,-4800.0,3744.0,-3328.0)
set G5=Rect(-1024.0,-3808.0,192.0,-2752.0)
set H5=Rect(-7936.0,-7776.0,-5920.0,-5760.0)
set Z5=Rect(5504.0,5184.0,7744.0,7136.0)
set V5=Rect(-800.0,3072.0,64.0,4032.0)
set W5=Rect(-384.0,3392.0,-192.0,3520.0)
set X5=Rect(-1728.0,-5056.0,-768.0,-3840.0)
set Y5=Rect(-1152.0,-4704.0,-960.0,-4480.0)
set J5=Rect(-480.0,-800.0,-256.0,-512.0)
set K5=Rect(2112.0,-1280.0,3072.0,-288.0)
set L5=Rect(7264.0,-5504.0,7488.0,-5280.0)
set M5=Rect(-8160.0,6848.0,-7968.0,7040.0)
set N5=Rect(2112.0,-736.0,2752.0,-160.0)
set S5=Rect(2112.0,-960.0,2720.0,-640.0)
set T5=Rect(2112.0,-1088.0,2720.0,-864.0)
set R5=Rect(2656.0,-1120.0,2784.0,-416.0)
set P5=Rect(2752.0,-1248.0,2880.0,-544.0)
set Q5=Rect(2848.0,-1344.0,2912.0,-640.0)
set U5=Rect(2912.0,-1408.0,2976.0,-704.0)
set I6=Rect(2208.0,-1216.0,2816.0,-992.0)
set O6=Rect(2464.0,-1472.0,3200.0,-1152.0)
set A6=Rect(-8160.0,-8192.0,-3712.0,-4352.0)
set B6=Rect(-8192.0,-4960.0,-4640.0,-3552.0)
set C6=Rect(-4000.0,-7744.0,-3072.0,-5152.0)
set D6=Rect(2304.0,4064.0,8032.0,7776.0)
set E6=Rect(4640.0,1952.0,8000.0,4384.0)
set F6=Rect(3136.0,2816.0,5216.0,4960.0)
set G6=Rect(-7968.0,5216.0,-7456.0,5920.0)
set H6=Rect(-8064.0,2880.0,-7648.0,4512.0)
set Z6=Rect(-3296.0,3712.0,-2688.0,3968.0)
set V6=Rect(-2400.0,2016.0,-1952.0,2624.0)
set W6=Rect(-2016.0,1600.0,-1216.0,2048.0)
set X6=Rect(-2144.0,2528.0,-1888.0,2944.0)
set Y6=Rect(-1280.0,1728.0,-736.0,2176.0)
set J6=Rect(-1696.0,-768.0,-1376.0,-448.0)
set K6=Rect(-576.0,0.0,-352.0,256.0)
set L6=Rect(3104.0,-2784.0,3680.0,-2304.0)
set M6=Rect(3264.0,-3040.0,3872.0,-2656.0)
set N6=Rect(4960.0,-3104.0,5632.0,-2816.0)
set S6=Rect(4896.0,-3744.0,5280.0,-3456.0)
set T6=Rect(7488.0,-3520.0,8192.0,-2336.0)
set R6=Rect(6656.0,-3328.0,7808.0,-2656.0)
set P6=Rect(7104.0,-8192.0,8192.0,-5920.0)
set Q6=Rect(5952.0,-8192.0,7200.0,-7712.0)
set U6=Rect(7168.0,-6240.0,8128.0,-5184.0)
set I7=Rect(5824.0,-8032.0,6400.0,-7776.0)
set O7=Rect(6976.0,-6560.0,7488.0,-5920.0)
set A7=Rect(-5856.0,2944.0,-5600.0,3200.0)
set B7=Rect(6784.0,-7776.0,7264.0,-7456.0)
set C7=Rect(-8128.0,-8192.0,5536.0,-7744.0)
set D7=Rect(2368.0,-7904.0,2688.0,-7584.0)
set E7=Rect(-1664.0,-7808.0,-1344.0,-7552.0)
set F7=Rect(-2944.0,-8192.0,-1664.0,-7680.0)
set G7=Rect(-4000.0,-8192.0,-3168.0,-7616.0)
set H7=Rect(-5760.0,-8000.0,-5184.0,-7584.0)
set Z7=Rect(-3296.0,3744.0,-3104.0,3872.0)
set V7=Rect(-8192.0,-8192.0,-6720.0,-7744.0)
set W7=Rect(-8192.0,-6432.0,-7456.0,-4928.0)
set X7=Rect(-8192.0,-8128.0,-7904.0,8160.0)
set Y7=Rect(-7744.0,3936.0,-7328.0,5600.0)
set J7=Rect(-7680.0,1984.0,-6560.0,2816.0)
set K7=Rect(-7776.0,1696.0,-6944.0,2176.0)
set L7=Rect(-8032.0,-3040.0,-7680.0,-2720.0)
set M7=Rect(-7904.0,-2656.0,-7552.0,-2336.0)
set N7=Rect(-3936.0,-2720.0,-3584.0,-2400.0)
set S7=Rect(-3168.0,-1952.0,-2912.0,-1696.0)
set T7=Rect(-4128.0,-1632.0,-3776.0,-1152.0)
set R7=Rect(-4992.0,-1792.0,-3968.0,-1440.0)
set P7=Rect(-5536.0,-1664.0,-4832.0,-1280.0)
set Q7=Rect(-2304.0,3872.0,-2048.0,4096.0)
set U7=Rect(-5664.0,-1440.0,-5344.0,0.0)
set I8=Rect(-5824.0,-1504.0,-5472.0,-544.0)
set O8=Rect(-5216.0,-1216.0,-4480.0,-384.0)
set A8=Rect(-5632.0,448.0,-5152.0,1856.0)
set B8=Rect(-5856.0,1440.0,-5248.0,2592.0)
set C8=Rect(-5408.0,1888.0,-4928.0,2368.0)
set D8=Rect(-5056.0,1664.0,-4064.0,2144.0)
set E8=Rect(-4320.0,1344.0,-3808.0,1952.0)
set F8=Rect(-4224.0,1440.0,-3200.0,2016.0)
set G8=Rect(-2112.0,3424.0,-1856.0,3744.0)
set H8=Rect(-2400.0,640.0,-2208.0,896.0)
set Z8=Rect(-3392.0,640.0,-3200.0,896.0)
set V8=Rect(-3744.0,-1024.0,-3232.0,384.0)
set W8=Rect(-2016.0,-5504.0,-1664.0,-4768.0)
set X8=Rect(-1760.0,-5248.0,-1312.0,-4800.0)
set Y8=Rect(896.0,-3328.0,1088.0,-3072.0)
set J8=Rect(2368.0,-3808.0,2688.0,-3360.0)
set K8=Rect(1952.0,-3744.0,2208.0,-3456.0)
set L8=Rect(-768.0,-1344.0,-480.0,-1024.0)
set M8=Rect(1152.0,-6560.0,1376.0,-6272.0)
set N8=Rect(1216.0,-6368.0,1504.0,-6176.0)
set S8=Rect(-1376.0,-6784.0,-1184.0,-6528.0)
set T8=Rect(7616.0,-6528.0,8192.0,8160.0)
set R8=Rect(7072.0,-2304.0,7264.0,-2048.0)
set P8=Rect(-7872.0,7872.0,8192.0,8192.0)
set Q8=Rect(1792.0,7776.0,2112.0,8192.0)
set U8=Rect(-2656.0,0.0,-2496.0,256.0)
set I9=Rect(-768.0,7232.0,-416.0,7424.0)
set O9=Rect(-7968.0,5472.0,-7648.0,5792.0)
set A9=Rect(1120.0,7904.0,1312.0,8160.0)
set B9=Rect(736.0,4480.0,1120.0,4800.0)
set C9=Rect(2208.0,4928.0,2400.0,5152.0)
set D9=Rect(576.0,4384.0,1120.0,4928.0)
set E9=Rect(2560.0,4160.0,2784.0,4576.0)
set F9=Rect(-5984.0,-3776.0,-5504.0,-3232.0)
set G9=Rect(576.0,4256.0,1024.0,4672.0)
set H9=Rect(544.0,4352.0,992.0,4768.0)
set Z9=Rect(704.0,2496.0,1376.0,2784.0)
set V9=Rect(-2240.0,1792.0,-1856.0,2240.0)
set W9=Rect(-1472.0,1472.0,-992.0,1728.0)
set X9=Rect(2368.0,-3200.0,2656.0,-2880.0)
set Y9=Rect(2624.0,-3584.0,2816.0,-2848.0)
set J9=Rect(2464.0,-3392.0,2656.0,-3136.0)
set K9=Rect(2784.0,-3232.0,2976.0,-2976.0)
set L9=Rect(2784.0,-3424.0,2976.0,-3168.0)
set M9=Rect(7328.0,7808.0,8192.0,8192.0)
set N9=Rect(1984.0,7584.0,3296.0,8192.0)
set S9=Rect(2240.0,7392.0,2560.0,8192.0)
set T9=Rect(-1888.0,416.0,-1696.0,576.0)
set R9=Rect(7776.0,2720.0,8192.0,3648.0)
set P9=Rect(5280.0,640.0,5664.0,1184.0)
set Q9=Rect(-3104.0,2720.0,-2624.0,3232.0)
set U9=Rect(7584.0,-7072.0,7776.0,-6880.0)
set J8=Rect(2816.0,-3488.0,3008.0,-3232.0)
set K8=Rect(1568.0,-2976.0,1760.0,-2656.0)
set X9=Rect(2368.0,-3264.0,2656.0,-2944.0)
set Y9=Rect(2624.0,-3648.0,2816.0,-2912.0)
set J9=Rect(2464.0,-3456.0,2656.0,-3200.0)
set C7=Rect(-8192.0,-8128.0,5472.0,-7648.0)
set IA=Rect(-8192.0,-3712.0,-7008.0,-2144.0)
set OA=Rect(-3360.0,-8192.0,-1472.0,-7648.0)
set BA=Rect(-2528.0,-7840.0,-1696.0,-7488.0)
set CA=Rect(-2336.0,-7584.0,-1600.0,-7456.0)
set DA=Rect(-8192.0,2016.0,-6816.0,2880.0)
set EA=Rect(6880.0,-3328.0,8000.0,-2624.0)
set FA=Rect(-7520.0,-7040.0,-7360.0,-6912.0)
set GA=Rect(-7520.0,-6912.0,-7360.0,-6784.0)
set HA=Rect(-7520.0,-6656.0,-7360.0,-6528.0)
set ZA=Rect(-7520.0,-6528.0,-7360.0,-6400.0)
set VA=Rect(-7520.0,-6784.0,-7360.0,-6656.0)
set WA=Rect(6944.0,6208.0,7104.0,6336.0)
set XA=Rect(6944.0,6080.0,7104.0,6208.0)
set YA=Rect(6944.0,5952.0,7104.0,6080.0)
set JA=Rect(6944.0,5824.0,7104.0,5952.0)
set KA=Rect(6944.0,5696.0,7104.0,5824.0)
set LA=Rect(3904.0,2976.0,4160.0,3264.0)
set MA=Rect(2336.0,5952.0,2592.0,6240.0)
set NA=Rect(6304.0,1984.0,6560.0,2272.0)
set SA=Rect(-3328.0,-6912.0,-3072.0,-6624.0)
set TA=Rect(-4384.0,-4800.0,-4128.0,-4512.0)
set RA=Rect(-6432.0,-3840.0,-6176.0,-3552.0)
set PA=Rect(-7584.0,6176.0,-6304.0,7552.0)
set QA=Rect(2240.0,-1024.0,2592.0,-416.0)
set UA=Rect(2368.0,-1120.0,2784.0,-704.0)
set IB=Rect(-1088.0,5376.0,768.0,6624.0)
set OB=Rect(1600.0,1024.0,3456.0,2432.0)
set AB=Rect(5504.0,-1056.0,7200.0,512.0)
set BB=Rect(-6944.0,-1792.0,-5248.0,-224.0)
set CB=Rect(-1536.0,-7424.0,640.0,-6048.0)
set DB=Rect(-3328.0,-7200.0,-2464.0,-6368.0)
set EB=Rect(-4288.0,-4544.0,-3424.0,-3712.0)
set FB=Rect(-6784.0,-3616.0,-5920.0,-2784.0)
set GB=Rect(1472.0,5440.0,2336.0,6272.0)
set HB=Rect(2656.0,2336.0,3520.0,3168.0)
set ZB=Rect(5984.0,1152.0,6848.0,1984.0)
set VB=Rect(-4128.0,-3712.0,-2496.0,-2272.0)
set WB=Rect(-8192.0,-8128.0,-5120.0,-5536.0)
set XB=Rect(4608.0,4352.0,8192.0,8192.0)
set YB=Rect(-8096.0,-7104.0,-8064.0,-7072.0)
set JB=Rect(-8096.0,-7104.0,-8064.0,-7072.0)
set KB=Rect(-8096.0,-7104.0,-8064.0,-7072.0)
set F9=Rect(6208.0,7488.0,8192.0,8192.0)
set LB=Rect(-2784.0,1280.0,-1952.0,2048.0)
set MB=Rect(2528.0,-3168.0,3360.0,-2464.0)
set SB=Rect(-3936.0,4480.0,-3136.0,5120.0)
set TB=Rect(3680.0,-6016.0,4416.0,-5376.0)
set RB=Rect(3424.0,-352.0,4224.0,320.0)
set PB=Rect(-4608.0,-448.0,-3872.0,192.0)
set QB=Rect(2528.0,-1376.0,2944.0,-960.0)
set p=Player(15)
set DY=CreateUnit(p,1966092378,7360.0,-4416.0,270.000)
call SetUnitColor(DY,ConvertPlayerColor(12))
set CY=CreateUnit(p,1966092378,-7296.0,4224.0,270.000)
call SetUnitColor(CY,ConvertPlayerColor(12))
set WZ=CreateUnit(p,1848657231,-7168.0,6464.0,270.000)
call SetUnitColor(WZ,ConvertPlayerColor(0))
set YZ=CreateUnit(p,1848652102,-7424.0,-6976.0,270.000)
set ZZ=CreateUnit(p,1848657231,-7360.0,6464.0,270.000)
call SetUnitColor(ZZ,ConvertPlayerColor(0))
set JZ=CreateUnit(p,1848652102,-7424.0,-6592.0,270.000)
set KZ=CreateUnit(p,1848652102,-7424.0,-6464.0,270.000)
set BX=CreateUnit(p,1848657231,-7360.0,6784.0,270.000)
call SetUnitColor(BX,ConvertPlayerColor(0))
set OX=CreateUnit(p,1848657231,-6848.0,6784.0,270.000)
call SetUnitColor(OX,ConvertPlayerColor(0))
set LZ=CreateUnit(p,1848652102,-7424.0,-6720.0,270.000)
set MZ=CreateUnit(p,1848652102,-7424.0,-6848.0,270.000)
set NZ=CreateUnit(p,1852206952,-7232.0,-7136.0,270.000)
set u=CreateUnit(p,1967339316,3200.0,-64.0,270.000)
set MH=CreateUnit(p,1848657231,-6848.0,6464.0,270.000)
call SetUnitColor(MH,ConvertPlayerColor(0))
set RW=CreateUnit(p,1848652102,7040.0,6272.0,270.000)
set PW=CreateUnit(p,1848652102,7040.0,5888.0,270.000)
set QW=CreateUnit(p,1848652102,7040.0,5760.0,270.000)
set UW=CreateUnit(p,1848652102,7040.0,6016.0,270.000)
set TW=CreateUnit(p,1848652102,7040.0,6144.0,270.000)
set IX=CreateUnit(p,1852073580,6784.0,6368.0,270.000)
set UH=CreateUnit(p,1848657231,-7360.0,7104.0,270.000)
call SetUnitColor(UH,ConvertPlayerColor(0))
set AX=CreateUnit(p,1848657231,-7168.0,7104.0,270.000)
call SetUnitColor(AX,ConvertPlayerColor(0))
set u=CreateUnit(p,1967339316,-4544.0,1152.0,270.000)
set VZ=CreateUnit(p,1848657231,-7168.0,6784.0,270.000)
call SetUnitColor(VZ,ConvertPlayerColor(0))
set AY=CreateUnit(p,1848657231,-6848.0,7104.0,270.000)
call SetUnitColor(AY,ConvertPlayerColor(0))
set HZ=CreateUnit(p,1966092592,-7296.0,4416.0,270.000)
call SetUnitColor(HZ,ConvertPlayerColor(12))
set EY=CreateUnit(p,1966092592,7360.0,-4224.0,270.000)
call SetUnitColor(EY,ConvertPlayerColor(12))
set GY=CreateUnit(p,1848657231,-6656.0,7104.0,270.000)
call SetUnitColor(GY,ConvertPlayerColor(0))
set HY=CreateUnit(p,1848657231,-6656.0,6464.0,270.000)
call SetUnitColor(HY,ConvertPlayerColor(0))
set FY=CreateUnit(p,1848657231,-6656.0,6784.0,270.000)
call SetUnitColor(FY,ConvertPlayerColor(0))
set p=Player(0)
set SZ=CreateUnit(p,1849897784,-7264.0,-6880.0,270.000)
call SetUnitColor(SZ,ConvertPlayerColor(12))
set TZ=CreateUnit(p,1848652107,-7264.0,-6688.0,270.000)
call SetUnitColor(TZ,ConvertPlayerColor(12))
set QZ=CreateUnit(p,1848651833,-6560.0,-6432.0,270.000)
call SetUnitColor(QZ,ConvertPlayerColor(12))
set CZ=CreateUnit(p,1848651864,-7072.0,-6368.0,270.000)
call SetUnitColor(CZ,ConvertPlayerColor(1))
set AZ=CreateUnit(p,1848651862,-6816.0,-6368.0,270.000)
call SetUnitColor(AZ,ConvertPlayerColor(12))
set IZ=CreateUnit(p,1848651863,-7200.0,-6432.0,270.000)
call SetUnitColor(IZ,ConvertPlayerColor(12))
set TH=CreateUnit(p,1848651826,-6688.0,-6368.0,270.000)
call SetUnitColor(TH,ConvertPlayerColor(12))
set AW=CreateUnit(p,1697657397,-6624.0,-7136.0,270.000)
set PZ=CreateUnit(p,1749236021,-6880.0,-7136.0,270.000)
call SetUnitColor(PZ,ConvertPlayerColor(0))
set LH=CreateUnit(p,1702129516,-5632.0,-6144.0,270.000)
set CV=CreateUnit(p,1697656915,-4448.0,-4960.0,270.000)
set EV=CreateUnit(p,1697656915,-5280.0,-6112.0,270.000)
set CW=CreateUnit(p,1701080930,-6400.0,-5696.0,270.000)
set DV=CreateUnit(p,1697656915,-6368.0,-4256.0,270.000)
set FV=CreateUnit(p,1697656915,-5600.0,-5728.0,270.000)
set GV=CreateUnit(p,1700884333,-6080.0,-4480.0,270.000)
set HV=CreateUnit(p,1700884325,-6656.0,-4480.0,270.000)
set VV=CreateUnit(p,1700884333,-4416.0,-5312.0,270.000)
set YV=CreateUnit(p,1700884325,-4864.0,-4992.0,270.000)
set WV=CreateUnit(p,1697656915,-3744.0,-6816.0,270.000)
set ZV=CreateUnit(p,1700884333,-4032.0,-7040.0,270.000)
set XV=CreateUnit(p,1700884325,-4032.0,-6528.0,270.000)
set LV=CreateUnit(p,1701670775,-5792.0,-5408.0,270.000)
set KV=CreateUnit(p,1701670775,-6624.0,-5088.0,270.000)
set JV=CreateUnit(p,1701670775,-5088.0,-5536.0,270.000)
set MV=CreateUnit(p,1701670775,-5344.0,-3936.0,270.000)
set NV=CreateUnit(p,1701670775,-5088.0,-4576.0,270.000)
set SV=CreateUnit(p,1701670775,-3936.0,-5344.0,270.000)
set TV=CreateUnit(p,1701670775,-4512.0,-7072.0,270.000)
set PV=CreateUnit(p,1701670775,-4896.0,-6240.0,270.000)
set QV=CreateUnit(p,1701670775,-3808.0,-5856.0,270.000)
set UV=CreateUnit(p,1701670775,-5472.0,-4704.0,270.000)
set IW=CreateUnit(p,1701670775,-4512.0,-5856.0,270.000)
set OW=CreateUnit(p,1700884343,-4544.0,-6528.0,270.000)
set BV=CreateUnit(p,1697656915,-6112.0,-1248.0,270.000)
set RZ=CreateUnit(p,1700884343,-6080.0,-5120.0,270.000)
set AV=CreateUnit(p,1697656915,-6112.0,1568.0,270.000)
set OV=CreateUnit(p,1697656915,-1504.0,-1824.0,270.000)
set IV=CreateUnit(p,1697656915,-544.0,-6688.0,270.000)
set UZ=CreateUnit(p,1697656915,4960.0,-6752.0,270.000)
set DZ=CreateUnit(p,1697656915,-3488.0,-3296.0,270.000)
set BW=CreateUnit(p,1701080930,-5248.0,-6848.0,270.000)
set BY=CreateUnit(p,1848657989,-6944.0,-6368.0,270.000)
call SetUnitColor(BY,ConvertPlayerColor(12))
set p=Player(6)
set VW=CreateUnit(p,1848651826,5920.0,5920.0,270.000)
call SetUnitColor(VW,ConvertPlayerColor(12))
set WW=CreateUnit(p,1848651863,5984.0,6432.0,270.000)
call SetUnitColor(WW,ConvertPlayerColor(12))
set XW=CreateUnit(p,1848651862,5920.0,6048.0,270.000)
call SetUnitColor(XW,ConvertPlayerColor(12))
set YW=CreateUnit(p,1848651864,5920.0,6304.0,270.000)
call SetUnitColor(YW,ConvertPlayerColor(1))
set SW=CreateUnit(p,1849897784,6496.0,6368.0,270.000)
call SetUnitColor(SW,ConvertPlayerColor(12))
set MW=CreateUnit(p,1848652107,6304.0,6368.0,270.000)
call SetUnitColor(MW,ConvertPlayerColor(12))
set CX=CreateUnit(p,1970496880,4352.0,3584.0,270.000)
set KW=CreateUnit(p,1848651833,5984.0,5792.0,270.000)
call SetUnitColor(KW,ConvertPlayerColor(12))
set LW=CreateUnit(p,1849897781,6816.0,5984.0,270.000)
call SetUnitColor(LW,ConvertPlayerColor(12))
set JW=CreateUnit(p,1966092369,6816.0,5664.0,270.000)
set FZ=CreateUnit(p,1966092365,6048.0,-2080.0,270.000)
set EZ=CreateUnit(p,1966092356,6304.0,-96.0,270.000)
set JX=CreateUnit(p,1970956647,4384.0,4256.0,270.000)
set HX=CreateUnit(p,1970172012,5184.0,4864.0,270.000)
set ZX=CreateUnit(p,1970564964,3904.0,3904.0,270.000)
set VX=CreateUnit(p,1966092365,1056.0,-96.0,270.000)
set WX=CreateUnit(p,1966092356,2528.0,1824.0,270.000)
set XX=CreateUnit(p,1966092366,3936.0,3488.0,270.000)
set YX=CreateUnit(p,1966092372,4832.0,4832.0,270.000)
set DX=CreateUnit(p,1966092372,5152.0,4512.0,270.000)
set KX=CreateUnit(p,1970956647,3168.0,4064.0,270.000)
set LX=CreateUnit(p,1970956647,5728.0,4000.0,270.000)
set ZW=CreateUnit(p,1966092366,2976.0,5792.0,270.000)
set HW=CreateUnit(p,1970496880,3392.0,5504.0,270.000)
set GW=CreateUnit(p,1970564964,3392.0,6080.0,270.000)
set FW=CreateUnit(p,1970956647,4128.0,6240.0,270.000)
set EW=CreateUnit(p,1970495856,3968.0,5888.0,270.000)
set MX=CreateUnit(p,1969385326,4992.0,5952.0,270.000)
set NX=CreateUnit(p,1970956647,2656.0,4704.0,270.000)
set SX=CreateUnit(p,1970956647,5536.0,2464.0,270.000)
set TX=CreateUnit(p,1970956647,4064.0,5280.0,270.000)
set RX=CreateUnit(p,1970956647,3488.0,4832.0,270.000)
set PX=CreateUnit(p,1970495856,6400.0,3584.0,270.000)
set QX=CreateUnit(p,1970564964,6080.0,2944.0,270.000)
set UX=CreateUnit(p,1970496880,6656.0,2880.0,270.000)
set IY=CreateUnit(p,1966092366,6368.0,2528.0,270.000)
set OY=CreateUnit(p,1970956647,5024.0,3744.0,270.000)
set DW=CreateUnit(p,1970956647,6880.0,3936.0,270.000)
set GX=CreateUnit(p,1969385326,6464.0,4608.0,270.000)
set EX=CreateUnit(p,1970956647,4640.0,2848.0,270.000)
set OZ=CreateUnit(p,1966092365,-4704.0,5920.0,270.000)
set XZ=CreateUnit(p,1966092356,32.0,5920.0,270.000)
set GZ=CreateUnit(p,1848657989,5920.0,6176.0,270.000)
call SetUnitColor(GZ,ConvertPlayerColor(12))
set p=Player(15)
set RH=CreateUnit(p,1697656900,-6005.1,5458.6,212.150)
set BZ=CreateUnit(p,1697656898,-561.7,-651.7,325.600)
set QH=CreateUnit(p,1697656897,5613.5,-6070.9,64.000)
set PH=CreateUnit(p,1697656888,-5467.9,-5891.1,307.304)
set NH=CreateUnit(p,1697656881,4901.8,4536.6,212.110)
call ConfigureNeutralVictim()
set GUI=Filter(function HZI)
set filterIssueHauntOrderAtLocBJ=Filter(function IssueHauntOrderAtLocBJFilter)
set filterEnumDestructablesInCircleBJ=Filter(function H6I)
set filterGetUnitsInRectOfPlayer=Filter(function GetUnitsInRectOfPlayerFilter)
set filterGetUnitsOfTypeIdAll=Filter(function GetUnitsOfTypeIdAllFilter)
set filterGetUnitsOfPlayerAndTypeId=Filter(function GetUnitsOfPlayerAndTypeIdFilter)
set filterMeleeTrainedUnitIsHeroBJ=Filter(function MeleeTrainedUnitIsHeroBJFilter)
set filterLivingPlayerUnitsOfTypeId=Filter(function LivingPlayerUnitsOfTypeIdFilter)
set HWI=0
loop
exitwhen HWI==16
set bj_FORCE_PLAYER[HWI]=CreateForce()
call ForceAddPlayer(bj_FORCE_PLAYER[HWI],Player(HWI))
set HWI=HWI+1
endloop
set bj_FORCE_ALL_PLAYERS=CreateForce()
call ForceEnumPlayers(bj_FORCE_ALL_PLAYERS,null)
set bj_cineModePriorSpeed=GetGameSpeed()
set bj_cineModePriorFogSetting=IsFogEnabled()
set bj_cineModePriorMaskSetting=IsFogMaskEnabled()
set HWI=0
loop
exitwhen HWI>=bj_MAX_QUEUED_TRIGGERS
set bj_queuedExecTriggers[HWI]=null
set bj_queuedExecUseConds[HWI]=false
set HWI=HWI+1
endloop
set bj_isSinglePlayer=false
set HXI=0
set HWI=0
loop
exitwhen HWI>=12
if(GetPlayerController(Player(HWI))==MAP_CONTROL_USER and GetPlayerSlotState(Player(HWI))==PLAYER_SLOT_STATE_PLAYING)then
set HXI=HXI+1
endif
set HWI=HWI+1
endloop
set bj_isSinglePlayer=(HXI==1)
set bj_rescueSound=CreateSoundFromLabel("Rescue",false,false,false,10000,10000)
set bj_questDiscoveredSound=CreateSoundFromLabel("QuestNew",false,false,false,10000,10000)
set bj_questUpdatedSound=CreateSoundFromLabel("QuestUpdate",false,false,false,10000,10000)
set bj_questCompletedSound=CreateSoundFromLabel("QuestCompleted",false,false,false,10000,10000)
set bj_questFailedSound=CreateSoundFromLabel("QuestFailed",false,false,false,10000,10000)
set bj_questHintSound=CreateSoundFromLabel("Hint",false,false,false,10000,10000)
set bj_questSecretSound=CreateSoundFromLabel("SecretFound",false,false,false,10000,10000)
set bj_questItemAcquiredSound=CreateSoundFromLabel("ItemReward",false,false,false,10000,10000)
set bj_questWarningSound=CreateSoundFromLabel("Warning",false,false,false,10000,10000)
set bj_victoryDialogSound=CreateSoundFromLabel("QuestCompleted",false,false,false,10000,10000)
set bj_defeatDialogSound=CreateSoundFromLabel("QuestFailed",false,false,false,10000,10000)
call DelayedSuspendDecayCreate()
set v=VersionGet()
if(v==VERSION_REIGN_OF_CHAOS)then
set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V0
else
set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V1
endif
call InitQueuedTriggers()
call InitRescuableBehaviorBJ()
call InitDNCSounds()
call InitMapRects()
call InitSummonableCaps()
set HBI=0
loop
set bj_stockAllowedPermanent[HBI]=false
set bj_stockAllowedCharged[HBI]=false
set bj_stockAllowedArtifact[HBI]=false
set HBI=HBI+1
exitwhen HBI>10
endloop
call SetAllItemTypeSlots(11)
call SetAllUnitTypeSlots(11)
set bj_stockUpdateTimer=CreateTimer()
call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INITIAL_DELAY,false,function HGI)
set bj_stockItemPurchased=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased,Player(15),EVENT_PLAYER_UNIT_SELL_ITEM,null)
call TriggerAddAction(bj_stockItemPurchased,function RemovePurchasedItem)
call DetectGameStarted()
set i=0
set i=0
loop
exitwhen(i>16)
set T[i]=0
set P[i]=0
set Q[i]=0
set V0[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>100)
set R[i]=false
set Z1[i]=0
set V1[i]=0
set W1[i]=0
set X1[i]=0
set J1[i]=0
set K1[i]=0
set WO[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>4)
set I0[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>2)
set A0[i]=false
set W0[i]=0
set R1[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set C0[i]=""
set E0[i]=CreateTimer()
set i=i+1
endloop
set i=0
loop
exitwhen(i>13)
set D0[i]=false
set F0[i]=CreateTimer()
set S0[i]=false
set OO[i]=0
set G3[i]=false
set i=i+1
endloop
set i=0
loop
exitwhen(i>1)
set G0[i]=0
set N2[i]=""
set T2[i]=false
set R2[i]=0
set F3[i]=false
set i=i+1
endloop
set T0=150
set FI=true
set GI=true
set HI=true
set ZI=true
set VI=true
set WI=true
set XI=true
set YI=true
set JI=true
set KI=true
set LI=true
set NI=true
set SI=3
set TI=1
set Y1=80
set i=0
loop
exitwhen(i>17)
set L1[i]=null
set i=i+1
endloop
set i=0
loop
exitwhen(i>40)
set P1[i]=0
set Q1[i]=0
set U1[i]=0
set i=i+1
endloop
set AO=CreateForce()
set BO=CreateForce()
set C2=CreateGroup()
set Y2=CreateTimer()
set Q2=CreateForce()
set I3=0.00
set A3=true
set B3=true
set i=0
loop
exitwhen(i>14)
set D3[i]=false
set i=i+1
endloop
set i=0
loop
exitwhen(i>15)
set L3[i]="Here"
set i=i+1
endloop
call HPI()
call ZMI()
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15,true)
call TriggerAddCondition(t,Condition(function ZRI))
set t=null
set AJ[0]=false
set AJ[1]=false
set AJ[2]=false
set AJ[3]=false
set AJ[4]=false
set AJ[5]=false
set AJ[6]=false
set AJ[7]=false
set AJ[8]=false
set AJ[9]=false
set AJ[10]=false
set AJ[11]=false
set AJ[12]=false
set AJ[13]=false
set AJ[14]=false
set AJ[15]=false
set AJ[16]=false
set FN=CreateRegion()
call RegionAddRect(FN,H5)
set HN=CreateRegion()
call RegionAddRect(HN,Z5)
set EN=CreateRegion()
call RegionAddRect(EN,A6)
call RegionAddRect(EN,B6)
call RegionAddRect(EN,C6)
set GN=CreateRegion()
call RegionAddRect(GN,D6)
call RegionAddRect(GN,E6)
call RegionAddRect(GN,F6)
set ZN=CreateRegion()
call RegionAddRect(ZN,G6)
call RegionAddRect(ZN,H6)
call RegionAddRect(ZN,Z6)
call RegionAddRect(ZN,V6)
call RegionAddRect(ZN,W6)
call RegionAddRect(ZN,X6)
call RegionAddRect(ZN,Y6)
call RegionAddRect(ZN,J6)
call RegionAddRect(ZN,K6)
call RegionAddRect(ZN,L6)
call RegionAddRect(ZN,M6)
call RegionAddRect(ZN,N6)
call RegionAddRect(ZN,S6)
call RegionAddRect(ZN,T6)
call RegionAddRect(ZN,R6)
call RegionAddRect(ZN,P6)
call RegionAddRect(ZN,Q6)
call RegionAddRect(ZN,U6)
call RegionAddRect(ZN,I7)
call RegionAddRect(ZN,O7)
call RegionAddRect(ZN,A7)
call RegionAddRect(ZN,B7)
call RegionAddRect(ZN,C7)
call RegionAddRect(ZN,D7)
call RegionAddRect(ZN,E7)
call RegionAddRect(ZN,F7)
call RegionAddRect(ZN,G7)
call RegionAddRect(ZN,H7)
call RegionAddRect(ZN,Z7)
call RegionAddRect(ZN,V7)
call RegionAddRect(ZN,W7)
call RegionAddRect(ZN,X7)
call RegionAddRect(ZN,Y7)
call RegionAddRect(ZN,J7)
call RegionAddRect(ZN,K7)
call RegionAddRect(ZN,L7)
call RegionAddRect(ZN,M7)
call RegionAddRect(ZN,N7)
call RegionAddRect(ZN,S7)
call RegionAddRect(ZN,T7)
call RegionAddRect(ZN,R7)
call RegionAddRect(ZN,P7)
call RegionAddRect(ZN,Q7)
call RegionAddRect(ZN,U7)
call RegionAddRect(ZN,I8)
call RegionAddRect(ZN,O8)
call RegionAddRect(ZN,A8)
call RegionAddRect(ZN,B8)
call RegionAddRect(ZN,C8)
call RegionAddRect(ZN,D8)
call RegionAddRect(ZN,E8)
call RegionAddRect(ZN,F8)
call RegionAddRect(ZN,G8)
call RegionAddRect(ZN,H8)
call RegionAddRect(ZN,Z8)
call RegionAddRect(ZN,V8)
call RegionAddRect(ZN,W8)
call RegionAddRect(ZN,X8)
call RegionAddRect(ZN,Y8)
call RegionAddRect(ZN,J8)
call RegionAddRect(ZN,K8)
call RegionAddRect(ZN,L8)
call RegionAddRect(ZN,M8)
call RegionAddRect(ZN,N8)
call RegionAddRect(ZN,S8)
call RegionAddRect(ZN,T8)
call RegionAddRect(ZN,R8)
call RegionAddRect(ZN,P8)
call RegionAddRect(ZN,Q8)
call RegionAddRect(ZN,U8)
call RegionAddRect(ZN,I9)
call RegionAddRect(ZN,O9)
call RegionAddRect(ZN,A9)
call RegionAddRect(ZN,B9)
call RegionAddRect(ZN,C9)
call RegionAddRect(ZN,D9)
call RegionAddRect(ZN,E9)
call RegionAddRect(ZN,F9)
call RegionAddRect(ZN,G9)
call RegionAddRect(ZN,H9)
call RegionAddRect(ZN,Z9)
call RegionAddRect(ZN,V9)
call RegionAddRect(ZN,W9)
call RegionAddRect(ZN,X9)
call RegionAddRect(ZN,Y9)
call RegionAddRect(ZN,J9)
call RegionAddRect(ZN,K9)
call RegionAddRect(ZN,L9)
call RegionAddRect(ZN,M9)
call RegionAddRect(ZN,N9)
call RegionAddRect(ZN,S9)
call RegionAddRect(ZN,T9)
call RegionAddRect(ZN,R9)
call RegionAddRect(ZN,P9)
call RegionAddRect(ZN,Q9)
call TWI(1110455898)
call TWI(1112560453)
call TWI(1110455889)
call TWI(1112757326)
call TWI(1112044643)
call TWI(1110458957)
call TWI(1110458962)
call TWI(1110459185)
call TWI(1111844210)
call TWI(1110454869)
call TWI(1110456133)
call TWI(1110459206)
call TWI(1110455885)
call TWI(1110456142)
call TWI(1110456403)
call TWI(1110454353)
call TWI(1110456114)
call TWI(1112891758)
call TWI(1110456629)
call TWI(1110456371)
call TWI(1110454870)
call TWI(1110454617)
call TWI(1112432994)
call TWI(1110456402)
call TWI(1110455862)
call TWI(1110455113)
call TWI(1110455859)
call TWI(1113943649)
call TWI(1113943655)
call TWI(1110455107)
call TWI(1110454348)
call TWI(1112040289)
call TWI(1113813860)
call TWI(1110456121)
call TWI(1110458961)
call TWI(1110458937)
call TWI(1114665575)
call TWI(1110456397)
call TWI(1110454855)
call TWI(1110454616)
call TWI(1110454596)
call TWI(1110456626)
call TWI(1110458705)
call TWI(1111847784)
call TWI(1110454321)
call TWI(1110454583)
call TWI(1110458693)
call TWI(1110458692)
call TWI(1110456399)
call TWI(1114010223)
call TWI(1110454839)
call TWI(1110454840)
call TWI(1110455624)
call TWI(1110458963)
call TWI(1113813609)
call TWI(1110458950)
call TWI(1110458949)
call TWI(1110456624)
call TWI(1110454328)
call TWI(1110455362)
call TWI(1110454854)
call TWI(1112896368)
call TWI(1114993524)
call TWI(1110459203)
call TWI(1111716457)
call TWI(1110455114)
call TWI(1111847784)
call TWI(1110454321)
call TWI(1110458705)
call TWI(1113943649)
call TWI(1113943655)
call TWI(1110456120)
call TWI(1113875828)
call TWI(1110454356)
call TWI(1114860655)
call TWI(1112433768)
call TWI(1110459192)
call TWI(1110456399)
call TWI(1110456150)
call TWI(1110456149)
call TWI(1110454616)
call TWI(1112437609)
call TWI(1110455089)
call TWI(1112437615)
call TWI(1110454352)
call TWI(1110454861)
call TWI(1093749828)
call TWI(1110459204)
call TWI(1093749313)
call TWI(1110455347)
call TWI(1112436833)
call TWI(1110454606)
call TWI(1112105826)
call TWI(1110455377)
call TWI(1110454339)
call TWI(1110456651)
call TWI(1110455091)
call TWI(1110456390)
call TWI(1110456389)
call TWI(1114664809)
call TWI(1110458701)
call TWI(1112437348)
call TWI(1110454344)
call TWI(1112500344)
call TWI(1110455110)
call TWI(1110454862)
call TWI(1110459703)
call TWI(1110455876)
call TWI(1110458958)
call TWI(1110456657)
call TWI(1110459465)
call TWI(1110458946)
call TWI(1110456650)
call TWI(1110458694)
call TWI(1110456386)
call TWI(1110456113)
call TWI(1110456398)
call TWI(1110454857)
call TWI(1110456401)
call TWI(1110459186)
call TWI(1110455891)
call TWI(1110454867)
call TWI(1110454871)
call TWI(1110455633)
call TWI(1110454852)
call TWI(1110458969)
call TWI(1110454864)
call TWI(1110455622)
call TWI(1110459728)
call TWI(1110459730)
call TWI(1110459732)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TMI))
set t=null
call FlushGameCache(InitGameCache("dr.x"))
set NN=InitGameCache("dr.x")
set SN[0]=1093744454
set SN[1]=1093744455
set SN[2]=1093744456
set SN[3]=1093744451
set SN[4]=1093744452
set SN[5]=1093744453
set SN[6]=1093744458
set SN[7]=1093744457
set SN[8]=1093744460
set TN[0]=1093751109
set TN[1]=1093751110
set TN[2]=1093751113
set TN[3]=1093751115
set TN[4]=1093751114
set TN[5]=1093751112
set TN[6]=1093751119
set TN[7]=1093751118
set TN[8]=1093751117
set TN[9]=1093751111
set TN[10]=1093751121
set RN[0]=1093748555
set RN[1]=1093748556
set RN[2]=1093748554
set RN[3]=1093748560
set RN[4]=1093748557
set RN[5]=1093748558
set RN[6]=1093748559
set RN[7]=1093748553
set RN[8]=1093748561
set PN[0]=1093747533
set PN[1]=1093747531
set PN[2]=1093747526
set PN[3]=1093747529
set PN[4]=1093747527
set PN[5]=1093747528
set QN=CreateTrigger()
call TriggerAddCondition(QN,Condition(function Q5I))
set UN[0]=1747990855
set OS[0]=50
set UN[1]=1747990868
set OS[1]=100
set UN[2]=1747990854
set OS[2]=150
set UN[3]=1747990856
set OS[3]=200
set UN[4]=1747990853
set OS[4]=250
set UN[5]=1747990852
set OS[5]=300
set UN[6]=1747990851
set OS[6]=350
set UN[7]=1747990850
set OS[7]=400
set UN[8]=1747990841
set OS[8]=450
set UN[9]=1747990849
set OS[9]=500
set UN[10]=1747990858
set OS[10]=550
set UN[11]=1747990859
set OS[11]=600
set UN[12]=1747990860
set OS[12]=650
set UN[13]=1747990861
set OS[13]=700
set UN[14]=1747990862
set OS[14]=750
set UN[15]=1747990863
set OS[15]=800
set UN[16]=1747990864
set OS[16]=850
set UN[17]=1747990865
set OS[17]=900
set UN[18]=1747990866
set OS[18]=950
set UN[19]=1747990867
set OS[19]=1000
set UN[20]=1747990857
set OS[20]=1050
set UN[21]=1747990874
set OS[21]=1100
set UN[22]=1747990872
set OS[22]=1150
set UN[23]=1747992881
set OS[23]=1200
set UN[24]=1747992882
set OS[24]=1250
set UN[25]=1747992886
set OS[25]=1300
set UN[26]=1747992883
set OS[26]=1350
set UN[27]=1747992884
set OS[27]=1400
set UN[28]=1747990873
set OS[28]=1450
set UN[29]=1747990870
set OS[29]=1500
set UN[30]=1747992880
set OS[30]=1550
set UN[31]=1747990869
set OS[31]=1600
set UN[32]=1747992902
set OS[32]=1650
set UN[33]=1747992900
set OS[33]=1700
set UN[34]=1747992901
set OS[34]=1750
set UN[35]=1747992899
set OS[35]=1800
set UN[36]=1747992898
set OS[36]=1850
set UN[37]=1747992897
set OS[37]=1900
set UN[38]=1747992889
set OS[38]=1950
set UN[39]=1747992903
set OS[39]=2000
set UN[40]=1747992887
set OS[40]=2050
set UN[41]=1747992911
set OS[41]=2100
set UN[42]=1747992921
set OS[42]=2150
set UN[43]=1747992904
set OS[43]=2200
set UN[44]=1747992905
set OS[44]=2250
set UN[45]=1747992906
set OS[45]=2300
set UN[46]=1747992912
set OS[46]=2350
set UN[47]=1747992913
set OS[47]=2400
set UN[48]=1747992907
set OS[48]=2450
set UN[49]=1747992914
set OS[49]=2500
set UN[50]=1747992908
set OS[50]=2550
set UN[51]=1747992915
set OS[51]=2600
set UN[52]=1747990871
set OS[52]=2650
set UN[53]=1747992909
set OS[53]=2700
set UN[54]=1747992888
set OS[54]=2750
set UN[55]=1747992916
set OS[55]=2800
set UN[56]=1747992917
set OS[56]=2850
set UN[57]=1747992910
set OS[57]=2900
set UN[58]=1747992918
set OS[58]=2950
set UN[59]=1747992919
set OS[59]=3000
set IS[0]=UN[QII(1)]
set IS[1]=UN[QII(1)]
set IS[2]=UN[QII(1)]
set IS[3]=UN[QII(1)]
set IS[4]=UN[QII(1)]
set IS[5]=UN[QII(1)]
set IS[6]=UN[QII(1)]
set IS[7]=UN[QII(1)]
set IS[8]=UN[QII(1)]
set IS[9]=UN[QII(1)]
set IS[10]=UN[QII(1)]
set IS[11]=UN[QII(1)]
set IS[12]=UN[QII(1)]
set IS[13]=UN[QII(1)]
set IS[14]=UN[QII(1)]
set ZY=InitHashtable()
set M=CreateTimer()
set DS=Rect(-7040,-7680,7040,7168)
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.00)
call SuspendTimeOfDay(false)
call SetTimeOfDayScale(0.5)
call SetSkyModel("Environment\\Sky\\FoggedSky\\FoggedSky.mdl")
call SetCreepCampFilterState(true)
set E3="Normal Mode"
call TimerStart(M,99999.00,false,null)
set W3=AddWeatherEffect(bj_mapInitialPlayableArea,1380018290)
set V3=AddWeatherEffect(bj_mapInitialPlayableArea,1397645939)
set BS=AddWeatherEffect(bj_mapInitialPlayableArea,1280470369)
set CS=AddWeatherEffect(bj_mapInitialPlayableArea,1464822903)
set CO[0]=Player(0)
set CO[1]=Player(1)
set CO[2]=Player(2)
set CO[3]=Player(3)
set CO[4]=Player(4)
set CO[5]=Player(5)
set DO[0]=Player(6)
set DO[1]=Player(7)
set DO[2]=Player(8)
set DO[3]=Player(9)
set DO[4]=Player(10)
set DO[5]=Player(11)
set EO=Player(12)
set FO=Player(15)
call SetUnitPathing(PH,false)
call SetUnitPathing(QH,false)
call SetUnitPathing(BZ,false)
call SetUnitPathing(RH,false)
call SetUnitPathing(NH,false)
call NLI(NH,true)
call NLI(RH,true)
call NLI(BZ,true)
call NLI(QH,true)
call NLI(PH,true)
set U0=GetUnitLoc(NH)
set BI=GetUnitLoc(PH)
set CI=GetUnitLoc(BZ)
set DI=GetUnitLoc(RH)
set EI=GetUnitLoc(QH)
set O2=1093678663
set A2[1]=BI
set A2[2]=DI
set A2[3]=CI
set A2[4]=EI
set A2[5]=U0
set RI=GetRectCenter(N3)
set PI=GetRectCenter(S3)
set QI=GetRectCenter(M3)
set UI=GetRectCenter(I4)
set O1=GetRectCenter(O4)
set I1=GetRectCenter(U3)
set A1=GetRectCenter(D4)
set C1=GetRectCenter(C4)
set B1=GetRectCenter(B4)
set D1=GetRectCenter(Q3)
set F1=GetRectCenter(P3)
set E1=GetRectCenter(R3)
set G1=GetRectCenter(H4)
set H1=GetRectCenter(E4)
set K2=true
set ZS=GetUnitX(NZ)
set VS=GetUnitY(NZ)
set WS=GetUnitX(PZ)
set XS=GetUnitY(PZ)
set YS=GetUnitX(TZ)
set JS=GetUnitY(TZ)
set KS=GetUnitX(SZ)
set LS=GetUnitY(SZ)
set MS=GetUnitX(AW)
set SS=GetUnitY(AW)
set TS=GetUnitX(AZ)
set PS=GetUnitY(AZ)
set QS=GetUnitX(IZ)
set US=GetUnitY(IZ)
set IT=GetUnitX(TH)
set OT=GetUnitY(TH)
set AT=GetUnitX(CZ)
set BT=GetUnitY(CZ)
set CT=GetUnitX(QZ)
set DT=GetUnitY(QZ)
set CT=GetUnitX(QZ)
set DT=GetUnitY(QZ)
set ET=GetUnitX(BY)
set FT=GetUnitY(BY)
set GT=GetUnitX(LH)
set HT=GetUnitY(LH)
set ZT=GetUnitX(AV)
set VT=GetUnitY(AV)
set WT=GetUnitX(OV)
set XT=GetUnitY(OV)
set YT=GetUnitX(UZ)
set JT=GetUnitY(UZ)
set KT=GetUnitX(BV)
set LT=GetUnitY(BV)
set MT=GetUnitX(DZ)
set ST=GetUnitY(DZ)
set TT=GetUnitX(IV)
set RT=GetUnitY(IV)
set PT=GetUnitX(DV)
set QT=GetUnitY(DV)
set UT=GetUnitX(CV)
set IR=GetUnitY(CV)
set OR=GetUnitX(WV)
set BR=GetUnitY(WV)
set CR=GetUnitX(FV)
set DR=GetUnitY(FV)
set GR=GetUnitX(EV)
set HR=GetUnitY(EV)
set ZR=GetUnitX(GV)
set WR=GetUnitY(GV)
set XR=GetUnitX(VV)
set YR=GetUnitY(VV)
set JR=GetUnitX(ZV)
set KR=GetUnitY(ZV)
set LR=GetUnitX(HV)
set SR=GetUnitY(HV)
set RR=GetUnitX(YV)
set PR=GetUnitY(YV)
set QR=GetUnitX(XV)
set UR=GetUnitY(XV)
set IP=GetUnitX(LV)
set OP=GetUnitY(LV)
set BP=GetUnitX(KV)
set DP=GetUnitY(KV)
set EP=GetUnitX(MV)
set FP=GetUnitY(MV)
set GP=GetUnitX(NV)
set ZP=GetUnitY(NV)
set VP=GetUnitX(SV)
set WP=GetUnitY(SV)
set XP=GetUnitX(JV)
set YP=GetUnitY(JV)
set JP=GetUnitX(PV)
set KP=GetUnitY(PV)
set LP=GetUnitX(QV)
set MP=GetUnitY(QV)
set TP=GetUnitX(TV)
set RP=GetUnitY(TV)
set PP=GetUnitX(UV)
set QP=GetUnitY(UV)
set UP=GetUnitX(IW)
set IQ=GetUnitY(IW)
set OQ=GetUnitX(RZ)
set AQ=GetUnitY(RZ)
set BQ=GetUnitX(OW)
set CQ=GetUnitY(OW)
set DQ=GetUnitX(CW)
set EQ=GetUnitY(CW)
set FQ=GetUnitX(BW)
set GQ=GetUnitY(BW)
call RemoveUnit(DV)
call RemoveUnit(HV)
call RemoveUnit(GV)
call RemoveUnit(CV)
call RemoveUnit(YV)
call RemoveUnit(VV)
call RemoveUnit(WV)
call RemoveUnit(XV)
call RemoveUnit(ZV)
call RemoveUnit(RZ)
call RemoveUnit(OW)
call RemoveUnit(LH)
call RemoveUnit(FV)
call RemoveUnit(EV)
call RemoveUnit(LV)
call RemoveUnit(KV)
call RemoveUnit(MV)
call RemoveUnit(NV)
call RemoveUnit(SV)
call RemoveUnit(JV)
call RemoveUnit(PV)
call RemoveUnit(QV)
call RemoveUnit(TV)
call RemoveUnit(UV)
call RemoveUnit(IW)
call RemoveUnit(QZ)
call RemoveUnit(BY)
call RemoveUnit(CZ)
call RemoveUnit(TH)
call RemoveUnit(IZ)
call RemoveUnit(AZ)
call RemoveUnit(TZ)
call RemoveUnit(SZ)
call RemoveUnit(NZ)
call RemoveUnit(PZ)
call RemoveUnit(AW)
call RemoveUnit(AV)
call RemoveUnit(OV)
call RemoveUnit(UZ)
call RemoveUnit(BV)
call RemoveUnit(DZ)
call RemoveUnit(IV)
call RemoveUnit(CW)
call RemoveUnit(BW)
set HQ=CreateUnit(CO[0],1852206952,ZS,VS,270)
set ZQ=CreateUnit(FO,1749236021,WS,XS,270)
set VQ=CreateUnit(FO,1848652107,YS,JS,270)
set WQ=CreateUnit(FO,1849897784,KS,LS,270)
set XQ=CreateUnit(FO,1697657397,MS,SS,270)
set YQ=CreateUnit(FO,1848651862,TS,PS,270)
set JQ=CreateUnit(FO,1848651863,QS,US,270)
set KQ=CreateUnit(FO,1848651826,IT,OT,270)
set LQ=CreateUnit(FO,1848651864,AT,BT,270)
set MQ=CreateUnit(FO,1848651833,CT,DT,270)
set NQ=CreateUnit(FO,1848657989,ET,FT,270)
set SQ=CreateUnit(CO[0],1702129516,GT,HT,270)
set TQ=CreateUnit(CO[0],1697656914,ZT,VT,90)
set RQ=CreateUnit(CO[0],1697656914,WT,XT,45)
set PQ=CreateUnit(CO[0],1697656914,YT,JT,0)
set QQ=CreateUnit(CO[0],1697657137,KT,LT,90)
set UQ=CreateUnit(CO[0],1697657137,MT,ST,45)
set I00=CreateUnit(CO[0],1697657137,TT,RT,0)
set II0=CreateUnit(CO[0],1697656915,PT,QT,90)
set I10=CreateUnit(CO[0],1697656915,UT,IR,45)
set IO0=CreateUnit(CO[0],1697656915,OR,BR,0)
set I20=CreateUnit(CO[0],1697657145,CR,DR,45)
set I30=CreateUnit(CO[0],1697657145,GR,HR,45)
set I40=CreateUnit(CO[0],1700884333,ZR,WR,90)
set I50=CreateUnit(CO[0],1700884333,XR,YR,45)
set I60=CreateUnit(CO[0],1700884333,JR,KR,0)
set I70=CreateUnit(CO[0],1700884325,LR,SR,90)
set I80=CreateUnit(CO[0],1700884325,RR,PR,45)
set I90=CreateUnit(CO[0],1700884325,QR,UR,0)
set IA0=CreateUnit(CO[0],1701670775,IP,OP,270)
set IB0=CreateUnit(CO[0],1701670775,BP,DP,270)
set IC0=CreateUnit(CO[0],1701670775,EP,FP,270)
set ID0=CreateUnit(CO[0],1701670775,GP,ZP,270)
set IE0=CreateUnit(CO[0],1701670775,VP,WP,270)
set IF0=CreateUnit(CO[0],1701670775,XP,YP,270)
set IG0=CreateUnit(CO[0],1701670775,JP,KP,270)
set IH0=CreateUnit(CO[0],1701670775,LP,MP,270)
set IZ0=CreateUnit(CO[0],1701670775,TP,RP,270)
set IV0=CreateUnit(CO[0],1701670775,PP,QP,270)
set IW0=CreateUnit(CO[0],1701670775,UP,IQ,270)
set IX0=CreateUnit(CO[0],1700884343,OQ,AQ,270)
set IY0=CreateUnit(CO[0],1700884343,BQ,CQ,270)
set IJ0=CreateUnit(CO[0],1701080930,DQ,EQ,270)
set IK0=CreateUnit(CO[0],1701080930,FQ,GQ,270)
call SetPlayerAbilityAvailable(FO,1098018609,false)
call SetUnitColor(ZQ,FS)
call SetUnitColor(XQ,FS)
call SetUnitColor(WQ,HS)
call SetUnitColor(VQ,HS)
call SetUnitColor(YQ,HS)
call SetUnitColor(JQ,HS)
call SetUnitColor(KQ,HS)
call SetUnitColor(LQ,HS)
call SetUnitColor(MQ,HS)
call NLI(TQ,true)
call NLI(RQ,true)
call NLI(PQ,true)
call NLI(QQ,true)
call NLI(UQ,true)
call NLI(I00,true)
call NLI(II0,true)
call NLI(I10,true)
call NLI(IO0,true)
call NLI(I20,true)
call NLI(I30,true)
call NLI(SQ,true)
call NLI(I40,true)
call NLI(I50,true)
call NLI(I60,true)
call NLI(I70,true)
call NLI(I80,true)
call NLI(I90,true)
call NLI(IX0,true)
call NLI(IY0,true)
call NLI(IJ0,true)
call NLI(IK0,true)
call NLI(IA0,true)
call NLI(IB0,true)
call NLI(IC0,true)
call NLI(ID0,true)
call NLI(IE0,true)
call NLI(IF0,true)
call NLI(IG0,true)
call NLI(IH0,true)
call NLI(IZ0,true)
call NLI(IV0,true)
call NLI(IW0,true)
set IN0=GetUnitX(IX)
set IS0=GetUnitY(IX)
set IT0=GetUnitX(LW)
set IR0=GetUnitY(LW)
set IP0=GetUnitX(MW)
set IQ0=GetUnitY(MW)
set IU0=GetUnitX(SW)
set O00=GetUnitY(SW)
set OI0=GetUnitX(JW)
set O10=GetUnitY(JW)
set OO0=GetUnitX(XW)
set O20=GetUnitY(XW)
set O30=GetUnitX(WW)
set O40=GetUnitY(WW)
set O50=GetUnitX(VW)
set O60=GetUnitY(VW)
set O70=GetUnitX(YW)
set O80=GetUnitY(YW)
set O90=GetUnitX(KW)
set OA0=GetUnitY(KW)
set OB0=GetUnitX(GZ)
set OC0=GetUnitY(GZ)
set OD0=GetUnitX(HX)
set OE0=GetUnitY(HX)
set OF0=GetUnitX(OZ)
set OG0=GetUnitY(OZ)
set OH0=GetUnitX(VX)
set OZ0=GetUnitY(VX)
set OV0=GetUnitX(FZ)
set OW0=GetUnitY(FZ)
set OX0=GetUnitX(XZ)
set OY0=GetUnitY(XZ)
set OJ0=GetUnitX(WX)
set OK0=GetUnitY(WX)
set OL0=GetUnitX(EZ)
set OM0=GetUnitY(EZ)
set ON0=GetUnitX(ZW)
set OS0=GetUnitY(ZW)
set OT0=GetUnitX(XX)
set OR0=GetUnitY(XX)
set OP0=GetUnitX(IY)
set OQ0=GetUnitY(IY)
set OU0=GetUnitX(YX)
set A00=GetUnitY(YX)
set AI0=GetUnitX(DX)
set A10=GetUnitY(DX)
set AO0=GetUnitX(HW)
set A20=GetUnitY(HW)
set A30=GetUnitX(CX)
set A40=GetUnitY(CX)
set A50=GetUnitX(UX)
set A60=GetUnitY(UX)
set A70=GetUnitX(GW)
set A80=GetUnitY(GW)
set A90=GetUnitX(ZX)
set AA0=GetUnitY(ZX)
set AB0=GetUnitX(QX)
set AC0=GetUnitY(QX)
set AD0=GetUnitX(NX)
set AE0=GetUnitY(NX)
set AF0=GetUnitX(KX)
set AG0=GetUnitY(KX)
set AH0=GetUnitX(RX)
set AZ0=GetUnitY(RX)
set AV0=GetUnitX(FW)
set AW0=GetUnitY(FW)
set AX0=GetUnitX(TX)
set AY0=GetUnitY(TX)
set AJ0=GetUnitX(JX)
set AK0=GetUnitY(JX)
set AL0=GetUnitX(LX)
set AM0=GetUnitY(LX)
set AN0=GetUnitX(SX)
set AS0=GetUnitY(SX)
set AT0=GetUnitX(OY)
set AR0=GetUnitY(OY)
set AP0=GetUnitX(DW)
set AQ0=GetUnitY(DW)
set AU0=GetUnitX(EX)
set B00=GetUnitY(EX)
set BI0=GetUnitX(EW)
set B10=GetUnitY(EW)
set BO0=GetUnitX(PX)
set B20=GetUnitY(PX)
set B30=GetUnitX(MX)
set B40=GetUnitY(MX)
set B50=GetUnitX(GX)
set B60=GetUnitY(GX)
call RemoveUnit(NX)
call RemoveUnit(KX)
call RemoveUnit(RX)
call RemoveUnit(FW)
call RemoveUnit(TX)
call RemoveUnit(JX)
call RemoveUnit(LX)
call RemoveUnit(SX)
call RemoveUnit(OY)
call RemoveUnit(DW)
call RemoveUnit(EX)
call RemoveUnit(OZ)
call RemoveUnit(XZ)
call RemoveUnit(ZW)
call RemoveUnit(VX)
call RemoveUnit(WX)
call RemoveUnit(XX)
call RemoveUnit(FZ)
call RemoveUnit(EZ)
call RemoveUnit(IY)
call RemoveUnit(YX)
call RemoveUnit(DX)
call RemoveUnit(HW)
call RemoveUnit(CX)
call RemoveUnit(UX)
call RemoveUnit(GW)
call RemoveUnit(ZX)
call RemoveUnit(QX)
call RemoveUnit(EW)
call RemoveUnit(PX)
call RemoveUnit(MX)
call RemoveUnit(GX)
call RemoveUnit(HX)
call RemoveUnit(XW)
call RemoveUnit(WW)
call RemoveUnit(VW)
call RemoveUnit(YW)
call RemoveUnit(KW)
call RemoveUnit(GZ)
call RemoveUnit(SW)
call RemoveUnit(MW)
call RemoveUnit(IX)
call RemoveUnit(LW)
call RemoveUnit(JW)
set B70=CreateUnit(DO[0],1852073580,IN0,IS0,270)
set B80=CreateUnit(FO,1849897781,IT0,IR0,270)
set B90=CreateUnit(FO,1848652107,IP0,IQ0,270)
set BA0=CreateUnit(FO,1849897784,IU0,O00,270)
set BB0=CreateUnit(FO,1966092369,OI0,O10,270)
set BC0=CreateUnit(FO,1848651862,OO0,O20,0)
set BD0=CreateUnit(FO,1848651863,O30,O40,0)
set BE0=CreateUnit(FO,1848651826,O50,O60,0)
set BF0=CreateUnit(FO,1848651864,O70,O80,0)
set BG0=CreateUnit(FO,1848651833,O90,OA0,0)
set BH0=CreateUnit(FO,1848657989,OB0,OC0,0)
set BZ0=CreateUnit(DO[0],1970172012,OD0,OE0,220)
set BV0=CreateUnit(DO[0],1966092365,OF0,OG0,270)
set BW0=CreateUnit(DO[0],1966092365,OH0,OZ0,270)
set BX0=CreateUnit(DO[0],1966092365,OV0,OW0,270)
set BY0=CreateUnit(DO[0],1966092356,OX0,OY0,270)
set BJ0=CreateUnit(DO[0],1966092356,OJ0,OK0,270)
set BK0=CreateUnit(DO[0],1966092356,OL0,OM0,270)
set BL0=CreateUnit(DO[0],1966092366,ON0,OS0,270)
set BM0=CreateUnit(DO[0],1966092366,OT0,OR0,270)
set BN0=CreateUnit(DO[0],1966092366,OP0,OQ0,270)
set BS0=CreateUnit(DO[0],1966092372,OU0,A00,270)
set BT0=CreateUnit(DO[0],1966092372,AI0,A10,270)
set BR0=CreateUnit(DO[0],1970496880,AO0,A20,270)
set BP0=CreateUnit(DO[0],1970496880,A30,A40,270)
set BQ0=CreateUnit(DO[0],1970496880,A50,A60,270)
set BU0=CreateUnit(DO[0],1970564964,A70,A80,270)
set C00=CreateUnit(DO[0],1970564964,A90,AA0,270)
set CI0=CreateUnit(DO[0],1970564964,AB0,AC0,270)
set C10=CreateUnit(DO[0],1970956647,AD0,AE0,270)
set CO0=CreateUnit(DO[0],1970956647,AF0,AG0,270)
set C20=CreateUnit(DO[0],1970956647,AH0,AZ0,270)
set C30=CreateUnit(DO[0],1970956647,AV0,AW0,270)
set C40=CreateUnit(DO[0],1970956647,AX0,AY0,270)
set C50=CreateUnit(DO[0],1970956647,AJ0,AK0,270)
set C60=CreateUnit(DO[0],1970956647,AL0,AM0,270)
set C70=CreateUnit(DO[0],1970956647,AN0,AS0,270)
set C80=CreateUnit(DO[0],1970956647,AT0,AR0,270)
set C90=CreateUnit(DO[0],1970956647,AP0,AQ0,270)
set CA0=CreateUnit(DO[0],1970956647,AU0,B00,270)
set CB0=CreateUnit(DO[0],1970495856,BI0,B10,270)
set CC0=CreateUnit(DO[0],1970495856,BO0,B20,270)
set CD0=CreateUnit(DO[0],1969385326,B30,B40,270)
set CE0=CreateUnit(DO[0],1969385326,B50,B60,270)
call SetUnitColor(B80,IL0)
call SetUnitColor(BA0,IM0)
call SetUnitColor(B90,IM0)
call SetUnitColor(BC0,IM0)
call SetUnitColor(BD0,IM0)
call SetUnitColor(BE0,IM0)
call SetUnitColor(BF0,IM0)
call SetUnitColor(BG0,IM0)
call NLI(BV0,true)
call NLI(BW0,true)
call NLI(BX0,true)
call NLI(BY0,true)
call NLI(BJ0,true)
call NLI(BK0,true)
call NLI(BL0,true)
call NLI(BM0,true)
call NLI(BN0,true)
call NLI(BS0,true)
call NLI(BT0,true)
call NLI(BZ0,true)
call NLI(BR0,true)
call NLI(BP0,true)
call NLI(BQ0,true)
call NLI(BU0,true)
call NLI(C00,true)
call NLI(CI0,true)
call NLI(CB0,true)
call NLI(CC0,true)
call NLI(CD0,true)
call NLI(CE0,true)
call NLI(C10,true)
call NLI(CO0,true)
call NLI(C20,true)
call NLI(C30,true)
call NLI(C40,true)
call NLI(C50,true)
call NLI(C60,true)
call NLI(C70,true)
call NLI(C80,true)
call NLI(C90,true)
call NLI(CA0,true)
set QDI=GetUnitX(YZ)
set QEI=GetUnitY(YZ)
set QFI=GetUnitX(MZ)
set QGI=GetUnitY(MZ)
set QHI=GetUnitX(LZ)
set QZI=GetUnitY(LZ)
set QVI=GetUnitX(JZ)
set QWI=GetUnitY(JZ)
set QXI=GetUnitX(KZ)
set QYI=GetUnitY(KZ)
set QJI=GetUnitX(RW)
set QKI=GetUnitY(RW)
set QLI=GetUnitX(TW)
set QMI=GetUnitY(TW)
set QNI=GetUnitX(UW)
set QSI=GetUnitY(UW)
set QTI=GetUnitX(PW)
set QRI=GetUnitY(PW)
set QPI=GetUnitX(QW)
set QQI=GetUnitY(QW)
set QUI=25
call RemoveUnit(YZ)
call RemoveUnit(MZ)
call RemoveUnit(LZ)
call RemoveUnit(JZ)
call RemoveUnit(KZ)
call RemoveUnit(RW)
call RemoveUnit(TW)
call RemoveUnit(UW)
call RemoveUnit(PW)
call RemoveUnit(QW)
set CF0=CreateUnit(Player(1),1852010352,QDI,QEI,270)
call UnitAddAbility(CF0,1093743665)
call ClearSelectionForPlayer(Player(1))
call SelectUnitAddForPlayer(CF0,Player(1))
if GetLocalPlayer()==Player(1)then
call SetUnitVertexColor(CF0,255,255,255,255)
else
call SetUnitVertexColor(CF0,255,255,255,QUI)
endif
set CG0=CreateUnit(Player(2),1852010352,QFI,QGI,270)
call UnitAddAbility(CG0,1093743665)
call ClearSelectionForPlayer(Player(2))
call SelectUnitAddForPlayer(CG0,Player(2))
if GetLocalPlayer()==Player(2)then
call SetUnitVertexColor(CG0,255,255,255,255)
else
call SetUnitVertexColor(CG0,255,255,255,QUI)
endif
set CH0=CreateUnit(Player(3),1852010352,QHI,QZI,270)
call UnitAddAbility(CH0,1093743665)
call ClearSelectionForPlayer(Player(3))
call SelectUnitAddForPlayer(CH0,Player(3))
if GetLocalPlayer()==Player(3)then
call SetUnitVertexColor(CH0,255,255,255,255)
else
call SetUnitVertexColor(CH0,255,255,255,QUI)
endif
set CZ0=CreateUnit(Player(4),1852010352,QVI,QWI,270)
call UnitAddAbility(CZ0,1093743665)
call ClearSelectionForPlayer(Player(4))
call SelectUnitAddForPlayer(CZ0,Player(4))
if GetLocalPlayer()==Player(4)then
call SetUnitVertexColor(CZ0,255,255,255,255)
else
call SetUnitVertexColor(CZ0,255,255,255,QUI)
endif
set CV0=CreateUnit(Player(5),1852010352,QXI,QYI,270)
call UnitAddAbility(CV0,1093743665)
call ClearSelectionForPlayer(Player(5))
call SelectUnitAddForPlayer(CV0,Player(5))
if GetLocalPlayer()==Player(5)then
call SetUnitVertexColor(CV0,255,255,255,255)
else
call SetUnitVertexColor(CV0,255,255,255,QUI)
endif
set CW0=CreateUnit(Player(7),1852010352,QJI,QKI,270)
call UnitAddAbility(CW0,1093752649)
call ClearSelectionForPlayer(Player(7))
call SelectUnitAddForPlayer(CW0,Player(7))
if GetLocalPlayer()==Player(7)then
call SetUnitVertexColor(CW0,255,255,255,255)
else
call SetUnitVertexColor(CW0,255,255,255,QUI)
endif
set CX0=CreateUnit(Player(8),1852010352,QLI,QMI,270)
call UnitAddAbility(CX0,1093752649)
call ClearSelectionForPlayer(Player(8))
call SelectUnitAddForPlayer(CX0,Player(8))
if GetLocalPlayer()==Player(8)then
call SetUnitVertexColor(CX0,255,255,255,255)
else
call SetUnitVertexColor(CX0,255,255,255,QUI)
endif
set CY0=CreateUnit(Player(9),1852010352,QNI,QSI,270)
call UnitAddAbility(CY0,1093752649)
call ClearSelectionForPlayer(Player(9))
call SelectUnitAddForPlayer(CY0,Player(9))
if GetLocalPlayer()==Player(9)then
call SetUnitVertexColor(CY0,255,255,255,255)
else
call SetUnitVertexColor(CY0,255,255,255,QUI)
endif
set CJ0=CreateUnit(Player(10),1852010352,QTI,QRI,270)
call UnitAddAbility(CJ0,1093752649)
call ClearSelectionForPlayer(Player(10))
call SelectUnitAddForPlayer(CJ0,Player(10))
if GetLocalPlayer()==Player(10)then
call SetUnitVertexColor(CJ0,255,255,255,255)
else
call SetUnitVertexColor(CJ0,255,255,255,QUI)
endif
set CK0=CreateUnit(Player(11),1852010352,QPI,QQI,270)
call UnitAddAbility(CK0,1093752649)
call ClearSelectionForPlayer(Player(11))
call SelectUnitAddForPlayer(CK0,Player(11))
if GetLocalPlayer()==Player(11)then
call SetUnitVertexColor(CK0,255,255,255,255)
else
call SetUnitVertexColor(CK0,255,255,255,QUI)
endif
set CL0[1]=CF0
set CL0[2]=CG0
set CL0[3]=CH0
set CL0[4]=CZ0
set CL0[5]=CV0
set CL0[7]=CW0
set CL0[8]=CX0
set CL0[9]=CY0
set CL0[10]=CJ0
set CL0[11]=CK0
set CM0[1]=GetUnitX(CF0)
set CM0[2]=GetUnitX(CG0)
set CM0[3]=GetUnitX(CH0)
set CM0[4]=GetUnitX(CZ0)
set CM0[5]=GetUnitX(CV0)
set CM0[7]=GetUnitX(CW0)
set CM0[8]=GetUnitX(CX0)
set CM0[9]=GetUnitX(CY0)
set CM0[10]=GetUnitX(CJ0)
set CM0[11]=GetUnitX(CK0)
set CN0[1]=GetUnitY(CF0)
set CN0[2]=GetUnitY(CG0)
set CN0[3]=GetUnitY(CH0)
set CN0[4]=GetUnitY(CZ0)
set CN0[5]=GetUnitY(CV0)
set CN0[7]=GetUnitY(CW0)
set CN0[8]=GetUnitY(CX0)
set CN0[9]=GetUnitY(CY0)
set CN0[10]=GetUnitY(CJ0)
set CN0[11]=GetUnitY(CK0)
call U8I()
call UDI()
call VVI(1702061422,"stand 4")
call VVI(1697656918,"stand 4")
call VVI(1701081721,"spell")
call VVI(1697656919,"spell")
call VVI(1969711215,"stand victory")
call VVI(1966092337,"stand victory")
call VVI(1970169187,"stand channel")
call VVI(1966092338,"stand channel")
call VEI(1848651853,0.4,1848651853)
call VEI(1697657426,0.5,1697657426)
call VEI(1697657428,1.2,1697657428)
call VEI(1697657427,0.5,1697657427)
call VEI(1697657648,0.5,1697657648)
call VEI(1848659027,1,1848659027)
set t=CreateTrigger()
set VRI=Player(15)
set UGI=GetUnitX(BX)
set UHI=GetUnitY(BX)
set UZI=GetUnitX(VZ)
set UVI=GetUnitY(VZ)
set UWI=GetUnitX(OX)
set UXI=GetUnitY(OX)
set UYI=GetUnitX(FY)
set UJI=GetUnitY(FY)
set UKI=GetUnitX(ZZ)
set ULI=GetUnitY(ZZ)
set UMI=GetUnitX(WZ)
set UNI=GetUnitY(WZ)
set USI=GetUnitX(MH)
set UTI=GetUnitY(MH)
set URI=GetUnitX(HY)
set UPI=GetUnitY(HY)
set UQI=GetUnitX(UH)
set UUI=GetUnitY(UH)
set I01=GetUnitX(AX)
set II1=GetUnitY(AX)
set I11=GetUnitX(AY)
set IO1=GetUnitY(AY)
set I21=GetUnitX(GY)
set I31=GetUnitY(GY)
call RemoveUnit(BX)
call RemoveUnit(WZ)
call RemoveUnit(VZ)
call RemoveUnit(ZZ)
call RemoveUnit(OX)
call RemoveUnit(MH)
call RemoveUnit(UH)
call RemoveUnit(AX)
call RemoveUnit(AY)
call RemoveUnit(FY)
call RemoveUnit(HY)
call RemoveUnit(GY)
set DX0=CreateUnit(VRI,1848651832,UKI,ULI,270)
set DY0=CreateUnit(VRI,1848657738,UMI,UNI,270)
set DJ0=CreateUnit(VRI,1848652100,USI,UTI,270)
set DK0=CreateUnit(VRI,1848659016,URI,UPI,270)
set DL0=CreateUnit(VRI,1848652110,UGI,UHI,270)
set DM0=CreateUnit(VRI,1848651831,UZI,UVI,270)
set DN0=CreateUnit(VRI,1848651829,UWI,UXI,270)
set DS0=CreateUnit(VRI,1848659017,UYI,UJI,270)
set DT0=CreateUnit(VRI,1848652098,UQI,UUI,270)
set DR0=CreateUnit(VRI,1848652112,I01,II1,270)
set DP0=CreateUnit(VRI,1848657739,I11,IO1,270)
set DQ0=CreateUnit(VRI,1848659018,I21,I31,270)
call SetUnitColor(DX0,ConvertPlayerColor(1))
call SetUnitColor(DY0,ConvertPlayerColor(1))
call SetUnitColor(DJ0,ConvertPlayerColor(9))
call SetUnitColor(DK0,ConvertPlayerColor(9))
call SetUnitColor(DL0,ConvertPlayerColor(6))
call SetUnitColor(DM0,ConvertPlayerColor(6))
call SetUnitColor(DN0,ConvertPlayerColor(10))
call SetUnitColor(DS0,ConvertPlayerColor(10))
call SetUnitColor(DT0,ConvertPlayerColor(0))
call SetUnitColor(DR0,ConvertPlayerColor(0))
call SetUnitColor(DP0,ConvertPlayerColor(11))
call SetUnitColor(DQ0,ConvertPlayerColor(11))
set t=null
set R2[1]=1095331188
set R2[2]=1095328865
set R2[3]=1095660653
set R2[4]=1094935400
set R2[5]=1095333995
set R2[6]=1093681995
set R2[7]=1093677367
set R2[8]=1093681720
set R2[9]=1093683266
set R2[10]=1093682227
set R2[10]=1093682246
set R2[11]=1093677655
set R2[12]=1095331954
set R2[13]=1095331948
set R2[14]=1093682767
set R2[15]=1093683255
set R2[16]=1093683254
set R2[17]=1093677656
set R2[18]=1095332727
set R2[19]=1093682008
set R2[20]=1093681718
set R2[21]=1097163124
set R2[22]=1093679180
set R2[23]=1095328633
set R2[24]=1093678426
set R2[25]=1095328363
set R2[26]=1093682265
set R2[27]=1093684314
set R2[28]=1093685065
set R2[29]=1093684056
set R2[30]=1093684055
set R2[31]=1093677622
set R2[32]=1093681972
set R2[33]=1093677362
set R2[34]=1093678667
set R2[35]=1093677652
set R2[36]=1095263841
set R2[37]=1093679446
set R2[38]=1093678425
set R2[39]=1093683513
set R2[40]=1093683265
set R2[41]=1093684021
set R2[42]=1093685337
set R2[43]=1093685582
set R2[44]=1093685844
set R2[45]=1093685840
set R2[46]=1093743191
set R2[47]=1093686081
set R2[48]=1093686327
set R2[49]=1093686328
set R2[50]=1093743681
set R2[51]=1093681733
set R2[52]=1093808472
set R2[53]=1093808471
set R2[54]=1093808470
set R2[55]=1093684560
set R2[56]=1093743428
set R2[57]=1093683801
set R2[58]=1093743959
set R2[59]=1093748303
set R2[60]=1093748292
set R2[61]=1093750618
set R2[62]=1093750095
set R2[63]=1093749071
set R2[64]=1093751096
set R2[65]=1093751361
set R2[66]=1093751126
set R2[67]=1093752645
set R2[68]=1093752642
set P2=68
set E00=E00+1
set DU0[E00]=1093683254
set E00=E00+1
set DU0[E00]=1093677362
set E00=E00+1
set DU0[E00]=1093678667
set E00=E00+1
set DU0[E00]=1093683513
set E00=E00+1
set DU0[E00]=1093683265
set E00=E00+1
set DU0[E00]=1093684021
set E00=E00+1
set DU0[E00]=1093685337
set E00=E00+1
set DU0[E00]=1093748303
set E00=E00+1
set DU0[E00]=1093685844
set E00=E00+1
set DU0[E00]=1093686081
set E00=E00+1
set DU0[E00]=1093686327
set E00=E00+1
set DU0[E00]=1093686328
set E00=E00+1
set DU0[E00]=1093743681
set E00=E00+1
set DU0[E00]=1093681733
set E00=E00+1
set DU0[E00]=1093808472
set E00=E00+1
set DU0[E00]=1093808471
set E00=E00+1
set DU0[E00]=1093808470
set E00=E00+1
set DU0[E00]=1097754673
set E00=E00+1
set DU0[E00]=1093750618
set E00=E00+1
set DU0[E00]=1093743428
set E00=E00+1
set DU0[E00]=1093677622
set E00=E00+1
set DU0[E00]=1093751096
set PF=CreateTrigger()
call TriggerRegisterTimerEventSingle(PF,0.01)
call TriggerAddAction(PF,function I81)
set t=CreateTrigger()
call TriggerRegisterPlayerEventLeave(t,CO[1])
call TriggerRegisterPlayerEventLeave(t,CO[2])
call TriggerRegisterPlayerEventLeave(t,CO[3])
call TriggerRegisterPlayerEventLeave(t,CO[4])
call TriggerRegisterPlayerEventLeave(t,CO[5])
call TriggerRegisterPlayerEventLeave(t,DO[1])
call TriggerRegisterPlayerEventLeave(t,DO[2])
call TriggerRegisterPlayerEventLeave(t,DO[3])
call TriggerRegisterPlayerEventLeave(t,DO[4])
call TriggerRegisterPlayerEventLeave(t,DO[5])
call TriggerAddAction(t,function IZ1)
if D2 then
call IB1()
set t=CreateTrigger()
if IsPlayerObserver(CS0)then
call TriggerRegisterPlayerEventLeave(t,CS0)
endif
if IsPlayerObserver(CT0)then
call TriggerRegisterPlayerEventLeave(t,CT0)
endif
call TriggerAddAction(t,function IC1)
endif
set EI0[0]=false
set EI0[1]=false
set EI0[2]=false
set EI0[3]=false
set EI0[4]=false
set EI0[5]=false
set EI0[6]=false
set EI0[7]=false
set EI0[8]=false
set EI0[9]=false
set EI0[10]=false
set EI0[11]=false
set EI0[12]=false
set EI0[13]=false
set EI0[14]=false
set EI0[15]=false
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_HERO_REVIVE_FINISH)
call TriggerAddAction(t,function O71)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function VA1))
call TriggerAddAction(t,function VW1)
set QM=t
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerAddAction(t,function VL1)
call TriggerAddCondition(t,Condition(function VK1))
set E30=t
set E40=CreateTrigger()
call TriggerRegisterTimerEvent(E40,0.875,true)
call TriggerAddCondition(E40,Condition(function VN1))
call DisableTrigger(E40)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddAction(t,function VT1)
set E50=t
call NXI(0,0,false)
call VQ1()
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.5,true)
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerAddCondition(t,Condition(function VU1))
set t=null
call YVI(1093809990)
call YVI(1093810008)
call YVI(1093809992)
call YVI(1093810006)
call YVI(1093809991)
call YVI(1093809993)
call YVI(1093809995)
call YVI(1093809994)
set QF=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(QF,CO[0],EVENT_PLAYER_UNIT_DEATH,Condition(function K6I))
call TriggerRegisterPlayerUnitEvent(QF,DO[0],EVENT_PLAYER_UNIT_DEATH,Condition(function K6I))
call TriggerRegisterPlayerUnitEvent(QF,EO,EVENT_PLAYER_UNIT_DEATH,Condition(function K6I))
call TriggerAddAction(QF,function WG1)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function WS1))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function XC1))
call TriggerAddAction(t,function XV1)
set UF=t
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Y61))
set t=null
set FI0=CreateTrigger()
call TriggerAddCondition(FI0,Condition(function YC1))
set IG=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(IG,EO,EVENT_PLAYER_UNIT_DEATH,Condition(function HRI))
call TriggerAddCondition(IG,Condition(function YH1))
call TriggerAddAction(IG,function YW1)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,CO[0],EVENT_PLAYER_UNIT_DEATH,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,DO[0],EVENT_PLAYER_UNIT_DEATH,Condition(function HRI))
call TriggerAddCondition(t,Condition(function YT1))
set t=null
set F80=F80+1
set FO0[F80]=1227900486
set F20[F80]=1227900487
set F30[F80]=0
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp"
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227895377
set F20[F80]=1227895375
set F30[F80]=1747988785
set F40[F80]=1227894849
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBootsOfSpeed.blp"
set F60[F80]=0
set FB0=F80
set F80=F80+1
set FO0[F80]=1227895379
set F20[F80]=1227895376
set F30[F80]=1747988786
set F40[F80]=1227899713
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
set F60[F80]=0
set FC0=F80
set F80=F80+1
set FO0[F80]=1227895374
set F20[F80]=1227895378
set F30[F80]=1747988787
set F40[F80]=1227899731
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBoots.blp"
set F60[F80]=0
set FD0=F80
set F80=F80+1
set FO0[F80]=1227895384
set F20[F80]=1227895385
set F30[F80]=1747988789
set F40[F80]=1227899956
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNCirclet.blp"
set F60[F80]=0
set FE0=F80
set F80=F80+1
set FO0[F80]=1227895386
set F20[F80]=1227895859
set F30[F80]=1747988790
set F40[F80]=1227899734
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBelt.blp"
set F60[F80]=0
set FF0=F80
set F80=F80+1
set FO0[F80]=1227895600
set F20[F80]=1227895860
set F30[F80]=1747988791
set F40[F80]=1227899954
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_03.blp"
set F60[F80]=0
set FG0=F80
set F80=F80+1
set FO0[F80]=1227895601
set F20[F80]=1227895861
set F30[F80]=1747988792
set F40[F80]=1227899957
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp"
set F60[F80]=0
set FH0=F80
set F80=F80+1
set FO0[F80]=1227895602
set F20[F80]=1227895862
set F30[F80]=1747988793
set F40[F80]=1227899738
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSteelMelee.blp"
set F60[F80]=0
set FZ0=F80
set F80=F80+1
set FO0[F80]=1227895603
set F20[F80]=1227895863
set F30[F80]=1747988801
set F40[F80]=1227899959
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_12.blp"
set F60[F80]=0
set FV0=F80
set F80=F80+1
set FO0[F80]=1227895604
set F20[F80]=1227895864
set F30[F80]=1747988802
set F40[F80]=1227899736
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_19.blp"
set F60[F80]=0
set FW0=F80
set F80=F80+1
set FO0[F80]=1227895605
set F20[F80]=1227895865
set F30[F80]=1747988803
set F40[F80]=1227899721
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNFrostMourne.blp"
set F60[F80]=0
set FX0=F80
set F80=F80+1
set FO0[F80]=1227895606
set F20[F80]=1227895873
set F30[F80]=1747988804
set F40[F80]=1227899720
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Bow_06.blp"
set F60[F80]=0
set FY0=F80
set F80=F80+1
set FO0[F80]=1227895607
set F20[F80]=1227895874
set F30[F80]=1747988805
set F40[F80]=1227899730
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp"
set F60[F80]=0
set FJ0=F80
set F80=F80+1
set FO0[F80]=1227895608
set F20[F80]=1227895875
set F30[F80]=1747988806
set F40[F80]=1227899722
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGauntletsOfOgrePower.blp"
set F60[F80]=0
set FK0=F80
set F80=F80+1
set FO0[F80]=1227895609
set F20[F80]=1227895876
set F30[F80]=1747988807
set F40[F80]=1227899975
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGem.blp"
set F60[F80]=0
set FL0=F80
set F80=F80+1
set FO0[F80]=1227902291
set F20[F80]=1227902290
set F30[F80]=0
set F40[F80]=1227902292
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGem.blp"
set F60[F80]=0
set FM0=F80
set F80=F80+1
set FO0[F80]=1227895618
set F20[F80]=1227895877
set F30[F80]=1747988808
set F40[F80]=1227899969
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp"
set F60[F80]=0
set FN0=F80
set F80=F80+1
set FO0[F80]=1227895619
set F20[F80]=1227895878
set F30[F80]=1747988809
set F40[F80]=1227899729
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNPeriapt1.blp"
set F60[F80]=0
set FS0=F80
set F80=F80+1
set FO0[F80]=1227895620
set F20[F80]=1227895879
set F30[F80]=1747988810
set F40[F80]=1227899733
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNNatureTouchGrow.blp"
set F60[F80]=0
set FT0=F80
set F80=F80+1
set FO0[F80]=1227895621
set F20[F80]=1227895880
set F30[F80]=1747988811
set F40[F80]=1227899703
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
set F60[F80]=14
set FR0=F80
set F80=F80+1
set FO0[F80]=1227895621
set F20[F80]=1227895881
set F30[F80]=1747988811
set F40[F80]=1227899976
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
set F60[F80]=0
set FP0=F80
set F80=F80+1
set FO0[F80]=1227895622
set F20[F80]=1227895882
set F30[F80]=1747988812
set F40[F80]=1227899725
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNMantleOfIntelligence.blp"
set F60[F80]=0
set FQ0=F80
set F80=F80+1
set FO0[F80]=1227895623
set F20[F80]=1227895883
set F30[F80]=1747988813
set F40[F80]=1227899716
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp"
set F60[F80]=0
set FU0=F80
set F80=F80+1
set FO0[F80]=1227895624
set F20[F80]=1227895884
set F30[F80]=1747988814
set F40[F80]=1227899719
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerMasterTraining.blp"
set F60[F80]=0
set G00=F80
set F80=F80+1
set FO0[F80]=1227895625
set F20[F80]=1227895885
set F30[F80]=1747988815
set F40[F80]=1227899952
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHammer.blp"
set F60[F80]=0
set GI0=F80
set F80=F80+1
set FO0[F80]=1227895626
set F20[F80]=1227895886
set F30[F80]=1747988816
set F40[F80]=1227899726
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNStaffOfNegation.blp"
set F60[F80]=0
set G10=F80
set F80=F80+1
set FO0[F80]=1227895627
set F20[F80]=1227895887
set F30[F80]=1747988817
set F40[F80]=1227899960
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerAdeptTraining.tga"
set F60[F80]=0
set GO0=F80
set F80=F80+1
set FO0[F80]=1227895628
set F20[F80]=1227895888
set F30[F80]=1747988818
set F40[F80]=1227899717
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"
set F60[F80]=0
set G20=F80
set F80=F80+1
set FO0[F80]=1227895629
set F20[F80]=1227895889
set F30[F80]=1747988819
set F40[F80]=1227899970
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate13.blp"
set F60[F80]=0
set G30=F80
set F80=F80+1
set FO0[F80]=1227895630
set F20[F80]=1227895890
set F30[F80]=1747988820
set F40[F80]=1227899724
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNUsedSoulGem.blp"
set F60[F80]=0
set G40=F80
set F80=F80+1
set FO0[F80]=1227895632
set F20[F80]=1227895891
set F30[F80]=1747988821
set F40[F80]=1227899737
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp"
set F60[F80]=0
set G50=F80
set F80=F80+1
set FO0[F80]=1227895633
set F20[F80]=1227895892
set F30[F80]=1747988822
set F40[F80]=1227899977
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp"
set F60[F80]=0
set G60=F80
set F80=F80+1
set FO0[F80]=1227895634
set F20[F80]=1227895893
set F30[F80]=1747988823
set F40[F80]=1227899735
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRingPurple.blp"
set F60[F80]=0
set G70=F80
set F80=F80+1
set FO0[F80]=1227895635
set F20[F80]=1227895894
set F30[F80]=1747988824
set F40[F80]=1227899978
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp"
set F60[F80]=0
set G80=F80
set F80=F80+1
set FO0[F80]=1227895636
set F20[F80]=1227895895
set F30[F80]=1747988825
set F40[F80]=1227899728
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp"
set F60[F80]=0
set G90=F80
set F80=F80+1
set FO0[F80]=1227895637
set F20[F80]=1227895896
set F30[F80]=1747988826
set F40[F80]=1227899715
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNStaffOfTeleportation.blp"
set F60[F80]=0
set GA0=F80
set F80=F80+1
set FO0[F80]=1227895638
set F20[F80]=1227895897
set F30[F80]=1747989040
set F40[F80]=1227899701
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp"
set F60[F80]=0
set GB0=F80
set F80=F80+1
set FO0[F80]=1227895639
set F20[F80]=1227895898
set F30[F80]=1747989041
set F40[F80]=1227899979
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp"
set F60[F80]=0
set GC0=F80
set F80=F80+1
set FO0[F80]=1227895640
set F20[F80]=1227896112
set F30[F80]=1747989042
set F40[F80]=1227899953
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNWandOfCyclone.blp"
set F60[F80]=0
set GD0=F80
set F80=F80+1
set FO0[F80]=1227895617
set F20[F80]=1227896113
set F30[F80]=1747989043
set F40[F80]=1227899961
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
set F60[F80]=0
set GE0=F80
set F80=F80+1
set FO0[F80]=1227901762
set F20[F80]=1227901761
set F30[F80]=0
set F40[F80]=1227901763
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
set F60[F80]=0
set GF0=F80
set F80=F80+1
set FO0[F80]=1227895641
set F20[F80]=1227896114
set F30[F80]=1747989044
set F40[F80]=1227899705
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp"
set F60[F80]=0
set GG0=F80
set F80=F80+1
set FO0[F80]=1227895642
set F20[F80]=1227896115
set F30[F80]=1747989045
set F40[F80]=1227899723
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSoulGem.blp"
set F60[F80]=0
set GH0=F80
set F80=F80+1
set FO0[F80]=1227895856
set F20[F80]=1227896116
set F30[F80]=1747989046
set F40[F80]=1227899980
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNPeriapt.blp"
set F60[F80]=0
set GZ0=F80
set F80=F80+1
set FO0[F80]=1227895857
set F20[F80]=1227896117
set F30[F80]=1747989047
set F40[F80]=1227899958
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSteelRanged.blp"
set F60[F80]=0
set GV0=F80
set F80=F80+1
set FO0[F80]=1227894860
set F20[F80]=1227899222
set F30[F80]=1747989058
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle0.blp"
set F60[F80]=0
set GW0=F80
set F80=F80+1
set FO0[F80]=1227896133
set F20[F80]=1227899213
set F30[F80]=0
set F40[F80]=1227899982
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle0.blp"
set F60[F80]=0
set GX0=F80
set F80=F80+1
set FO0[F80]=1227899221
set F20[F80]=1227899214
set F30[F80]=0
set F40[F80]=1227899983
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle1.blp"
set F60[F80]=0
set GY0=F80
set F80=F80+1
set FO0[F80]=1227899219
set F20[F80]=1227899215
set F30[F80]=0
set F40[F80]=1227899984
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle2.blp"
set F60[F80]=0
set GJ0=F80
set F80=F80+1
set FO0[F80]=1227899220
set F20[F80]=1227899216
set F30[F80]=0
set F40[F80]=1227899985
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle3.blp"
set F60[F80]=0
set GK0=F80
set F80=F80+1
set FO0[F80]=1227900759
set F20[F80]=1227900761
set F30[F80]=0
set F40[F80]=1227900979
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle_Illusion.blp"
set F60[F80]=0
set GT0=F80
set F80=F80+1
set FO0[F80]=1227900978
set F20[F80]=1227900760
set F30[F80]=0
set F40[F80]=1227899986
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle_Regeneration.blp"
set F60[F80]=0
set GS0=F80
set F80=F80+1
set FO0[F80]=1227900758
set F20[F80]=1227900977
set F30[F80]=0
set F40[F80]=1227900980
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle_Haste.blp"
set F60[F80]=0
set GN0=F80
set F80=F80+1
set FO0[F80]=1227899218
set F20[F80]=1227900976
set F30[F80]=0
set F40[F80]=1227900982
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle_DoubleDamage.blp"
set F60[F80]=0
set GM0=F80
set F80=F80+1
set FO0[F80]=1227899217
set F20[F80]=1227900762
set F30[F80]=0
set F40[F80]=1227900981
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBottle_Invisibility.blp"
set F60[F80]=0
set GL0=F80
set F80=F80+1
set FO0[F80]=1227900740
set F20[F80]=1227900739
set F30[F80]=1747990324
set F40[F80]=1227900741
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNWand.blp"
set F60[F80]=17
set GR0=F80
set F80=F80+1
set FO0[F80]=1227900995
set F20[F80]=1227900994
set F30[F80]=0
set F40[F80]=1227900993
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNStarWand.blp"
set F60[F80]=17
set VP0=F80
set F80=F80+1
set FO0[F80]=1227901012
set F20[F80]=1227901010
set F30[F80]=1747990359
set F40[F80]=1227901014
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
set F60[F80]=5
set GP0=F80
set F80=F80+1
set FO0[F80]=1227901013
set F20[F80]=1227901008
set F30[F80]=0
set F40[F80]=1227901015
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
set F60[F80]=5
set GQ0=F80
set F80=F80+1
set FO0[F80]=1227902516
set F20[F80]=1227902515
set F30[F80]=0
set F40[F80]=1227902517
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNPoisonBlade.blp"
set F60[F80]=30
set HI0=F80
set F80=F80+1
set FO0[F80]=1227902519
set F20[F80]=1227902518
set F30[F80]=0
set F40[F80]=1227902520
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNPoisonBlade.blp"
set F60[F80]=30
set H10=F80
set F80=F80+1
set FO0[F80]=1227901495
set F20[F80]=1227901494
set F30[F80]=1747990579
set F40[F80]=1227901496
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAmulet.blp"
set F60[F80]=0
set GU0=F80
set F80=F80+1
set FO0[F80]=1227901514
set F20[F80]=1227901513
set F30[F80]=1747990583
set F40[F80]=1227901515
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGreenStaff.blp"
set F60[F80]=30
set W10=F80
set F80=F80+1
set FO0[F80]=1227902273
set F20[F80]=1227902265
set F30[F80]=1747993421
set F40[F80]=1227902274
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
set F60[F80]=0
set F90=F80
set F80=F80+1
set FO0[F80]=1227902276
set F20[F80]=1227902277
set F30[F80]=0
set F40[F80]=1227902275
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
set F60[F80]=0
set FA0=F80
set F80=F80+1
set FO0[F80]=1227896119
set F20[F80]=1227896131
set F30[F80]=1747989057
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAncientOfTheEarth.blp"
set F60[F80]=0
set H60=F80
set F80=F80+1
set FO0[F80]=1227895858
set F20[F80]=1227896132
set F30[F80]=1747989048
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNLesserClarityPotion.blp"
set F60[F80]=0
set H30=F80
set F80=F80+1
set FO0[F80]=1227901007
set F20[F80]=1227901006
set F30[F80]=1747990358
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNVialFull.blp"
set F60[F80]=0
set H40=F80
set F80=F80+1
set FO0[F80]=1227896118
set F20[F80]=1227896134
set F30[F80]=1747989049
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHealingSalve.blp"
set F60[F80]=0
set H50=F80
set F80=F80+1
set FO0[F80]=1227896120
set F20[F80]=1227896135
set F30[F80]=1747989059
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSentryWard.blp"
set F60[F80]=0
set H70=F80
set F80=F80+1
set FO0[F80]=1227896121
set F20[F80]=1227896136
set F30[F80]=1747989060
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBlueSentryWard.blp"
set F60[F80]=0
set H80=F80
set F80=F80+1
set FO0[F80]=1227896129
set F20[F80]=1227896137
set F30[F80]=1747989061
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"
set F60[F80]=0
set H90=F80
set F80=F80+1
set FO0[F80]=1227896130
set F20[F80]=1227896138
set F30[F80]=1747989062
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNCritterChicken.blp"
set F60[F80]=0
set HA0=F80
set F80=F80+1
set FO0[F80]=1227899440
set F20[F80]=1227899441
set F30[F80]=0
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNCheese.blp"
set F60[F80]=0
set HB0=F80
set F80=F80+1
set FO0[F80]=1227900743
set F20[F80]=1227900742
set F30[F80]=1747990325
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNPotionOfDivinity.blp"
set F60[F80]=30
set HC0=F80
set F80=F80+1
set FO0[F80]=1227900745
set F20[F80]=1227900744
set F30[F80]=1747990326
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNDustOfAppearance.blp"
set F60[F80]=60
set HD0=F80
set F80=F80+1
set FO0[F80]=1227901780
set F20[F80]=1227901779
set F30[F80]=1747993145
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNWandOfManaSteal.blp"
set F60[F80]=0
set HE0=F80
set F80=F80+1
set FO0[F80]=1227902534
set F20[F80]=1227902535
set F30[F80]=1747993651
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSmokePotion.blp"
set F60[F80]=90
set HF0=F80
set F80=F80+1
set FO0[F80]=1227896369
set F20[F80]=1227896370
set F30[F80]=0
set F40[F80]=1227895114
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrbOfFire.blp"
set F60[F80]=0
set HG0=F80
set F80=F80+1
set FO0[F80]=1227896372
set F20[F80]=1227896371
set F30[F80]=0
set F40[F80]=1227895115
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_17.blp"
set F60[F80]=0
set HH0=F80
set F80=F80+1
set FO0[F80]=1227896373
set F20[F80]=1227896374
set F30[F80]=0
set F40[F80]=1227895116
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNThoriumArmor.blp"
set F60[F80]=25
set HZ0=F80
set F80=F80+1
set FO0[F80]=1227896376
set F20[F80]=1227896375
set F30[F80]=0
set F40[F80]=1227895117
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga"
set F60[F80]=0
set HV0=F80
set F80=F80+1
set FO0[F80]=1227896377
set F20[F80]=1227896385
set F30[F80]=0
set F40[F80]=1227899702
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga"
set F60[F80]=0
set HW0=F80
set F80=F80+1
set FO0[F80]=1227896387
set F20[F80]=1227896386
set F30[F80]=0
set F40[F80]=1227895120
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAbility_Rogue_Sprint.blp"
set F60[F80]=60
set HX0=F80
set F80=F80+1
set FO0[F80]=1227895631
set F20[F80]=1227895380
set F30[F80]=0
set F40[F80]=1227895122
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNWirtsLegGreen.blp"
set F60[F80]=0
set HY0=F80
set F80=F80+1
set FO0[F80]=1227895381
set F20[F80]=1227896153
set F30[F80]=0
set F40[F80]=1227895121
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNWirtsLeg.blp"
set F60[F80]=0
set HJ0=F80
set F80=F80+1
set FO0[F80]=1227896368
set F20[F80]=1227896154
set F30[F80]=0
set F40[F80]=1227895123
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNWirtsLegBlue.blp"
set F60[F80]=0
set HK0=F80
set F80=F80+1
set FO0[F80]=1227896389
set F20[F80]=1227896388
set F30[F80]=0
set F40[F80]=1227895124
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP"
set F60[F80]=100
set HL0=F80
set F80=F80+1
set FO0[F80]=1227902543
set F20[F80]=1227902542
set F30[F80]=0
set F40[F80]=1227902544
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP"
set F60[F80]=100
set HM0=F80
set F80=F80+1
set FO0[F80]=1227896391
set F20[F80]=1227896390
set F30[F80]=0
set F40[F80]=1227895125
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Mace_10.blp"
set F60[F80]=0
set HN0=F80
set F80=F80+1
set FO0[F80]=1227896393
set F20[F80]=1227896392
set F30[F80]=0
set F40[F80]=1227895126
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRunedBracers.blp"
set F60[F80]=0
set HS0=F80
set F80=F80+1
set FO0[F80]=1227896395
set F20[F80]=1227896394
set F30[F80]=0
set F40[F80]=1227895127
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"
set F60[F80]=0
set HT0=F80
set F80=F80+1
set FO0[F80]=1227896397
set F20[F80]=1227896396
set F30[F80]=0
set F40[F80]=1227895128
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNTalisman.tga"
set F60[F80]=0
set HR0=F80
set F80=F80+1
set FO0[F80]=1227896902
set F20[F80]=1227896903
set F30[F80]=0
set F40[F80]=1227895129
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_10.blp"
set F60[F80]=0
set HP0=F80
set F80=F80+1
set FO0[F80]=1227896905
set F20[F80]=1227896904
set F30[F80]=0
set F40[F80]=1227895130
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNJapaneseSword.BLP"
set F60[F80]=0
set HQ0=F80
set F80=F80+1
set FO0[F80]=1227896906
set F20[F80]=1227896907
set F30[F80]=0
set F40[F80]=1227895344
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp"
set F60[F80]=0
set HU0=F80
set F80=F80+1
set FO0[F80]=1227896909
set F20[F80]=1227896908
set F30[F80]=0
set F40[F80]=1227899704
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp"
set F60[F80]=0
set Z00=F80
set F80=F80+1
set FO0[F80]=1227896910
set F20[F80]=1227896911
set F30[F80]=0
set F40[F80]=1227895345
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate06.blp"
set F60[F80]=22
set ZI0=F80
set F80=F80+1
set FO0[F80]=1227896913
set F20[F80]=1227896912
set F30[F80]=0
set F40[F80]=1227895346
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNStormHammer.blp"
set F60[F80]=0
set Z10=F80
set F80=F80+1
set FO0[F80]=1227896915
set F20[F80]=1227896914
set F30[F80]=0
set F40[F80]=1227895347
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp"
set F60[F80]=12
set ZO0=F80
set F80=F80+1
set FO0[F80]=1227901506
set F20[F80]=1227901497
set F30[F80]=0
set F40[F80]=1227901508
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNDiffusal2.blp"
set F60[F80]=12
set Z20=F80
set F80=F80+1
set FO0[F80]=1227900247
set F20[F80]=1227900246
set F30[F80]=0
set F40[F80]=1227900248
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp"
set F60[F80]=0
set Z30=F80
set F80=F80+1
set FO0[F80]=1227901507
set F20[F80]=1227901505
set F30[F80]=0
set F40[F80]=1227901509
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNDiffusal2.blp"
set F60[F80]=0
set Z40=F80
set F80=F80+1
set FO0[F80]=1227896917
set F20[F80]=1227896916
set F30[F80]=0
set F40[F80]=1227895348
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp"
set F60[F80]=300
set Z50=F80
set F80=F80+1
set FO0[F80]=1227896919
set F20[F80]=1227896918
set F30[F80]=0
set F40[F80]=1227899727
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp"
set F60[F80]=0
set Z60=F80
set F80=F80+1
set FO0[F80]=1227896920
set F20[F80]=1227896921
set F30[F80]=0
set F40[F80]=1227895349
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHelmOfValor.blp"
set F60[F80]=22
set Z70=F80
set F80=F80+1
set FO0[F80]=1227897136
set F20[F80]=1227896922
set F30[F80]=0
set F40[F80]=1227895350
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNStaffofpurification.blp"
set F60[F80]=30
set Z80=F80
set F80=F80+1
set FO0[F80]=1227897138
set F20[F80]=1227897137
set F30[F80]=0
set F40[F80]=1227895351
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNPhilosophersStone.blp"
set F60[F80]=0
set Z90=F80
set F80=F80+1
set FO0[F80]=1227897140
set F20[F80]=1227897139
set F30[F80]=0
set F40[F80]=1227895352
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSpellShieldAmulet.blp"
set F60[F80]=45
set ZA0=F80
set F80=F80+1
set FO0[F80]=1227897142
set F20[F80]=1227897141
set F30[F80]=0
set F40[F80]=1227895353
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSpell_Holy_BlessingOfStrength.blp"
set F60[F80]=0
set ZB0=F80
set F80=F80+1
set FO0[F80]=1227897144
set F20[F80]=1227897143
set F30[F80]=0
set F40[F80]=1227895361
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAbility_Gouge.blp"
set F60[F80]=0
set ZC0=F80
set F80=F80+1
set FO0[F80]=1227897153
set F20[F80]=1227897145
set F30[F80]=0
set F40[F80]=1227895362
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_06.blp"
set F60[F80]=0
set ZD0=F80
set F80=F80+1
set FO0[F80]=1227897154
set F20[F80]=1227897155
set F30[F80]=0
set F40[F80]=1227895363
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNThoriumMelee.blp"
set F60[F80]=0
set ZE0=F80
set F80=F80+1
set FO0[F80]=1227900722
set F20[F80]=1227900506
set F30[F80]=0
set F40[F80]=1227900728
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set F60[F80]=80
set ZF0=F80
set F80=F80+1
set FO0[F80]=1227900726
set F20[F80]=1227900720
set F30[F80]=0
set F40[F80]=1227900729
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set F60[F80]=75
set ZG0=F80
set F80=F80+1
set FO0[F80]=1227897157
set F20[F80]=1227900505
set F30[F80]=0
set F40[F80]=1227900727
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set F60[F80]=70
set ZH0=F80
set F80=F80+1
set FO0[F80]=1227900725
set F20[F80]=1227900499
set F30[F80]=0
set F40[F80]=1227895364
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set F60[F80]=65
set ZZ0=F80
set F80=F80+1
set FO0[F80]=1227900723
set F20[F80]=1227897156
set F30[F80]=0
set F40[F80]=1227900738
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set F60[F80]=60
set ZV0=F80
set F80=F80+1
set FO0[F80]=1227900724
set F20[F80]=1227900721
set F30[F80]=0
set F40[F80]=1227900737
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set F60[F80]=55
set ZW0=F80
set F80=F80+1
set FO0[F80]=1227899224
set F20[F80]=1227899223
set F30[F80]=0
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNArcaniteArmor.blp"
set F60[F80]=0
set ZX0=F80
set F80=F80+1
set FO0[F80]=1227897159
set F20[F80]=1227897158
set F30[F80]=0
set F40[F80]=1227895365
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp"
set F60[F80]=35
set ZY0=F80
set F80=F80+1
set FO0[F80]=1227902294
set F20[F80]=1227902293
set F30[F80]=0
set F40[F80]=1227902295
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp"
set F60[F80]=50
set ZJ0=F80
set F80=F80+1
set FO0[F80]=1227897161
set F20[F80]=1227897160
set F30[F80]=0
set F40[F80]=1227895366
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNLothars.BLP"
set F60[F80]=22
set ZK0=F80
set F80=F80+1
set FO0[F80]=1227897163
set F20[F80]=1227897165
set F30[F80]=0
set F40[F80]=1227895111
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set F60[F80]=40
set ZL0=F80
set F80=F80+1
set FO0[F80]=1227897162
set F20[F80]=1227897168
set F30[F80]=0
set F40[F80]=1227895367
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set F60[F80]=36
set ZM0=F80
set F80=F80+1
set FO0[F80]=1227897169
set F20[F80]=1227897166
set F30[F80]=0
set F40[F80]=1227899971
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set F60[F80]=32
set ZN0=F80
set F80=F80+1
set FO0[F80]=1227897171
set F20[F80]=1227897167
set F30[F80]=0
set F40[F80]=1227899972
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set F60[F80]=28
set ZS0=F80
set F80=F80+1
set FO0[F80]=1227897170
set F20[F80]=1227897164
set F30[F80]=0
set F40[F80]=1227899955
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set F60[F80]=24
set ZT0=F80
set F80=F80+1
set FO0[F80]=1227897173
set F20[F80]=1227897172
set F30[F80]=0
set F40[F80]=1227895368
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNNecromancerAdept.blp"
set F60[F80]=90
set ZR0=F80
set F80=F80+1
set FO0[F80]=1227897174
set F20[F80]=1227897176
set F30[F80]=0
set F40[F80]=1227895369
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBookOfTheDead.blp"
set F60[F80]=90
set ZP0=F80
set F80=F80+1
set FO0[F80]=1227897175
set F20[F80]=1227897177
set F30[F80]=0
set F40[F80]=1227895370
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp"
set F60[F80]=90
set ZQ0=F80
set F80=F80+1
set FO0[F80]=1227899184
set F20[F80]=1227897178
set F30[F80]=0
set F40[F80]=1227899471
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp"
set F60[F80]=0
set ZU0=F80
set F80=F80+1
set FO0[F80]=1227901003
set F20[F80]=1227901002
set F30[F80]=0
set F40[F80]=1227901004
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp"
set F60[F80]=0
set V00=F80
set F80=F80+1
set FO0[F80]=1227899186
set F20[F80]=1227899185
set F30[F80]=0
set F40[F80]=1227899472
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp"
set F60[F80]=0
set VI0=F80
set F80=F80+1
set FO0[F80]=1227902025
set F20[F80]=1227902026
set F30[F80]=0
set F40[F80]=1227902027
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp"
set F60[F80]=0
set V10=F80
set F80=F80+1
set FO0[F80]=1227899188
set F20[F80]=1227899187
set F30[F80]=0
set F40[F80]=1227899473
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Crossbow_10.blp"
set F60[F80]=0
set VO0=F80
set F80=F80+1
set FO0[F80]=1227899190
set F20[F80]=1227899189
set F30[F80]=0
set F40[F80]=1227899474
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10.blp"
set F60[F80]=0
set V20=F80
set F80=F80+1
set FO0[F80]=1227901752
set F20[F80]=1227901751
set F30[F80]=0
set F40[F80]=1227901753
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10.blp"
set F60[F80]=0
set V30=F80
set F80=F80+1
set FO0[F80]=1227899191
set F20[F80]=1227899192
set F30[F80]=0
set F40[F80]=1227899475
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNTransmute.blp"
set F60[F80]=0
set V40=F80
set F80=F80+1
set FO0[F80]=1227901777
set F20[F80]=1227901776
set F30[F80]=0
set F40[F80]=1227901778
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNTransmute.blp"
set F60[F80]=0
set V50=F80
set F80=F80+1
set FO0[F80]=1227899201
set F20[F80]=1227899193
set F30[F80]=0
set F40[F80]=1227899476
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp"
set F60[F80]=0
set V60=F80
set F80=F80+1
set FO0[F80]=1227899201
set F20[F80]=1227901772
set F40[F80]=1227901773
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp"
set F60[F80]=0
set V70=F80
set F80=F80+1
set FO0[F80]=1227899203
set F20[F80]=1227899202
set F30[F80]=0
set F40[F80]=1227899477
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHornOfDoom.blp"
set F60[F80]=35
set V80=F80
set F80=F80+1
set FO0[F80]=1227899204
set F20[F80]=1227899205
set F30[F80]=0
set F40[F80]=1227899478
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNIceShard.blp"
set F60[F80]=0
set V90=F80
set F80=F80+1
set FO0[F80]=1227899207
set F20[F80]=1227899206
set F30[F80]=0
set F40[F80]=1227899732
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNIceShard.blp"
set F60[F80]=0
set VA0=F80
set F80=F80+1
set FO0[F80]=1227899208
set F20[F80]=1227899209
set F30[F80]=0
set F40[F80]=1227899479
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_04.blp"
set F60[F80]=0
set VB0=F80
set F80=F80+1
set FO0[F80]=1227899448
set F20[F80]=1227899225
set F30[F80]=0
set F40[F80]=1227894850
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XS0=F80
set F80=F80+1
set FO0[F80]=1227899211
set F20[F80]=1227899210
set F30[F80]=0
set F40[F80]=1227899480
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHeartOfSearinox.blp"
set F60[F80]=210
set VC0=F80
set F80=F80+1
set FO0[F80]=1227896651
set F20[F80]=1227899212
set F30[F80]=0
set F40[F80]=1227899481
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_09.blp"
set F60[F80]=35
set VD0=F80
set F80=F80+1
set FO0[F80]=1227899458
set F20[F80]=1227899457
set F30[F80]=0
set F40[F80]=1227899482
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp"
set F60[F80]=0
set VE0=F80
set F80=F80+1
set FO0[F80]=1227902021
set F20[F80]=1227902019
set F30[F80]=0
set F40[F80]=1227902020
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp"
set F60[F80]=0
set VF0=F80
set F80=F80+1
set FO0[F80]=1227899459
set F20[F80]=1227899460
set F30[F80]=0
set F40[F80]=1227894851
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNArcaneRing.blp"
set F60[F80]=33
set VG0=F80
set F80=F80+1
set FO0[F80]=1227899462
set F20[F80]=1227899461
set F40[F80]=1227899696
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNThunderMallet.blp"
set F60[F80]=35
set VH0=F80
set F80=F80+1
set FO0[F80]=1227895092
set F20[F80]=1227895108
set F30[F80]=0
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRavenForm.blp"
set F60[F80]=0
set VZ0=F80
set F80=F80+1
set FO0[F80]=1227899464
set F20[F80]=1227899463
set F30[F80]=0
set F40[F80]=1227899697
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNCloakOfFlames.blp"
set F60[F80]=0
set VV0=F80
set F80=F80+1
set FO0[F80]=1227899465
set F20[F80]=1227899466
set F30[F80]=0
set F40[F80]=1227899698
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_14.blp"
set F60[F80]=0
set VW0=F80
set F80=F80+1
set FO0[F80]=1227899468
set F20[F80]=1227899467
set F30[F80]=0
set F40[F80]=1227899699
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Gem_Bloodstone_02.blp"
set F60[F80]=0
set VX0=F80
set F80=F80+1
set FO0[F80]=1227899470
set F20[F80]=1227899469
set F30[F80]=0
set F40[F80]=1227899700
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHoodOfCunning.blp"
set F60[F80]=0
set VY0=F80
set F80=F80+1
set FO0[F80]=1227894867
set F20[F80]=1227894861
set F30[F80]=0
set F40[F80]=1227895107
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyStrength.blp"
set F60[F80]=0
set VJ0=F80
set F80=F80+1
set FO0[F80]=1227894868
set F20[F80]=1227894865
set F30[F80]=0
set F40[F80]=1227895109
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNUnholyStrength.blp"
set F60[F80]=0
set VK0=F80
set F80=F80+1
set FO0[F80]=1227894870
set F20[F80]=1227894862
set F30[F80]=0
set F40[F80]=1227895110
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyStrength.blp"
set F60[F80]=0
set VL0=F80
set F80=F80+1
set FO0[F80]=1227894871
set F20[F80]=1227894866
set F30[F80]=0
set F40[F80]=1227899973
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNUnholyStrength.blp"
set F60[F80]=0
set VM0=F80
set F80=F80+1
set FO0[F80]=1227894872
set F20[F80]=1227894874
set F30[F80]=0
set F40[F80]=1227899718
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAdvancedMoonArmor.blp"
set F60[F80]=30
set VN0=F80
set F80=F80+1
set FO0[F80]=1227894873
set F20[F80]=1227895088
set F30[F80]=0
set F40[F80]=1227899974
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAdvancedMoonArmor.blp"
set F60[F80]=0
set VS0=F80
set F80=F80+1
set FO0[F80]=1227895091
set F20[F80]=1227895090
set F30[F80]=0
set F40[F80]=1227899714
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNStaffOfSilence.blp"
set F60[F80]=18
set VT0=F80
set F80=F80+1
set FO0[F80]=1227900747
set F20[F80]=1227900746
set F30[F80]=0
set F40[F80]=1227900748
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNPhaseBoots.blp"
set F60[F80]=8
set VR0=F80
set F80=F80+1
set FO0[F80]=1227900999
set F20[F80]=1227901001
set F30[F80]=0
set F40[F80]=1227901000
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNForceStaff.blp"
set F60[F80]=20
set VQ0=F80
set F80=F80+1
set FO0[F80]=1227901232
set F20[F80]=1227901750
set F30[F80]=0
set F40[F80]=1227901234
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNPipeOfInsight.blp"
set F60[F80]=25
set VU0=F80
set F80=F80+1
set FO0[F80]=1227901511
set F20[F80]=1227901510
set F30[F80]=0
set F40[F80]=1227901512
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp"
set F60[F80]=12
set W00=F80
set F80=F80+1
set FO0[F80]=1227901764
set F20[F80]=1227901766
set F30[F80]=0
set F40[F80]=1227901765
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp"
set F60[F80]=12
set WI0=F80
set F80=F80+1
set FO0[F80]=1227901784
set F20[F80]=1227901785
set F30[F80]=0
set F40[F80]=1227901786
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNUrnOfKelThuzad.blp"
set F60[F80]=8
set WO0=F80
set F80=F80+1
set FO0[F80]=1227902023
set F20[F80]=1227902022
set F30[F80]=0
set F40[F80]=1227902024
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNUrnOfKelThuzad.blp"
set F60[F80]=0
set W20=F80
set F80=F80+1
set FO0[F80]=1227902032
set F20[F80]=1227902028
set F30[F80]=0
set F40[F80]=1227902033
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSoulRing.blp"
set F60[F80]=25
set W30=F80
set F80=F80+1
set FO0[F80]=1227902034
set F20[F80]=1227902036
set F30[F80]=0
set F40[F80]=1227902035
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGhostBlade.blp"
set F60[F80]=30
set H00=F80
set F80=F80+1
set FO0[F80]=1227902282
set F20[F80]=1227902281
set F30[F80]=0
set F40[F80]=1227902283
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNArcaneBoots.blp"
set F60[F80]=45
set W40=F80
set F80=F80+1
set FO0[F80]=1227902513
set F20[F80]=1227902512
set F30[F80]=0
set F40[F80]=1227902514
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNMedalionOfCourage.blp"
set F60[F80]=7
set W50=F80
set F80=F80+1
set FO0[F80]=1227902532
set F20[F80]=1227902533
set F30[F80]=0
set F40[F80]=1227902531
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNJanggo.blp"
set F60[F80]=30
set HO0=F80
set F80=F80+1
set FO0[F80]=1227902540
set F20[F80]=1227902539
set F30[F80]=0
set F40[F80]=1227902541
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNJanggo.blp"
set F60[F80]=0
set H20=F80
set F80=F80+1
set FO0[F80]=1227902770
set F20[F80]=1227902771
set F30[F80]=0
set F40[F80]=1227902772
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBoneChimes.blp"
set F60[F80]=30
set W60=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989063
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747990582
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896140
set F20[F80]=1227896146
set F30[F80]=1747989064
set F40[F80]=1227899987
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set W70=F80
set F80=F80+1
set FO0[F80]=1227896141
set F20[F80]=1227896147
set F30[F80]=1747989065
set F40[F80]=1227899988
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set W80=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989066
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896143
set F20[F80]=1227896148
set F30[F80]=1747989067
set F40[F80]=1227899989
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set W90=F80
set F80=F80+1
set F30[F80]=1747988788
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WA0=F80
set F80=F80+1
set FO0[F80]=1227896144
set F20[F80]=1227896149
set F30[F80]=1747989068
set F40[F80]=1227899991
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WB0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989069
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896139
set F20[F80]=1227896150
set F30[F80]=1747989070
set F40[F80]=1227899992
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WC0=F80
set F80=F80+1
set FO0[F80]=1227896142
set F20[F80]=1227896151
set F30[F80]=1747989071
set F40[F80]=1227899993
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WD0=F80
set F80=F80+1
set FO0[F80]=1227896145
set F20[F80]=1227896152
set F30[F80]=1747989072
set F40[F80]=1227899994
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WE0=F80
set F80=F80+1
set FO0[F80]=1227896398
set F20[F80]=1227896399
set F30[F80]=1747989073
set F40[F80]=1227900208
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WF0=F80
set F80=F80+1
set FO0[F80]=1227896401
set F20[F80]=1227896400
set F30[F80]=1747989074
set F40[F80]=1227900209
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WG0=F80
set F80=F80+1
set FO0[F80]=1227896402
set F20[F80]=1227896403
set F30[F80]=1747989075
set F40[F80]=1227900210
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WH0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989076
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896407
set F20[F80]=1227896406
set F30[F80]=1747989077
set F40[F80]=1227900212
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WZ0=F80
set F80=F80+1
set FO0[F80]=1227896408
set F20[F80]=1227896409
set F30[F80]=1747989078
set F40[F80]=1227900213
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WV0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989079
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896624
set F20[F80]=1227896410
set F30[F80]=1747989080
set F40[F80]=1227900214
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WW0=F80
set F80=F80+1
set FO0[F80]=1227896625
set F20[F80]=1227896626
set F30[F80]=1747989081
set F40[F80]=1227900215
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WX0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989082
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896628
set F20[F80]=1227896627
set F30[F80]=1747989296
set F40[F80]=1227900216
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WY0=F80
set F80=F80+1
set F30[F80]=1747989297
set F50[F80]=""
set F60[F80]=0
set WJ0=F80
set F80=F80+1
set FO0[F80]=1227896630
set F20[F80]=1227896662
set F30[F80]=1747989298
set F40[F80]=1227900225
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WK0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989299
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896631
set F20[F80]=1227896663
set F30[F80]=1747989300
set F40[F80]=1227900226
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WL0=F80
set F80=F80+1
set FO0[F80]=1227896632
set F20[F80]=1227896664
set F30[F80]=1747989301
set F40[F80]=1227900227
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WM0=F80
set F80=F80+1
set FO0[F80]=1227896633
set F20[F80]=1227896665
set F30[F80]=1747989302
set F40[F80]=1227900228
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WN0=F80
set F80=F80+1
set FO0[F80]=1227896641
set F20[F80]=1227896666
set F30[F80]=1747989303
set F40[F80]=1227900229
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WS0=F80
set F80=F80+1
set FO0[F80]=1227896642
set F20[F80]=1227896880
set F30[F80]=1747989304
set F40[F80]=1227900230
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WT0=F80
set F80=F80+1
set FO0[F80]=1227896643
set F20[F80]=1227896881
set F30[F80]=1747989305
set F40[F80]=1227900231
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WR0=F80
set F80=F80+1
set FO0[F80]=1227896644
set F20[F80]=1227896882
set F30[F80]=1747989313
set F40[F80]=1227900232
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WP0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989315
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896645
set F20[F80]=1227896883
set F30[F80]=1747989316
set F40[F80]=1227900233
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WQ0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989317
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896647
set F20[F80]=1227896646
set F30[F80]=1747989318
set F40[F80]=1227900234
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set WU0=F80
set F80=F80+1
set FO0[F80]=1227896648
set F20[F80]=1227896884
set F30[F80]=1747989319
set F40[F80]=1227900235
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X00=F80
set F80=F80+1
set FO0[F80]=1227896655
set F20[F80]=1227896885
set F30[F80]=1747989320
set F40[F80]=1227900236
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XI0=F80
set F80=F80+1
set F30[F80]=1747989321
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X10=F80
set F80=F80+1
set F30[F80]=1747989322
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XO0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989323
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XC0=F80
set F80=F80+1
set FO0[F80]=1227896650
set F20[F80]=1227896888
set F30[F80]=1747989324
set F40[F80]=1227900239
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X20=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989325
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989326
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896653
set F20[F80]=1227896889
set F30[F80]=1747989327
set F40[F80]=1227900240
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X30=F80
set F80=F80+1
set FO0[F80]=1227896656
set F20[F80]=1227896897
set F30[F80]=1747989329
set F40[F80]=1227900241
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X40=F80
set F80=F80+1
set FO0[F80]=1227896657
set F20[F80]=1227896898
set F30[F80]=1747989330
set F40[F80]=1227900242
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X50=F80
set F80=F80+1
set FO0[F80]=1227896658
set F20[F80]=1227896899
set F30[F80]=1747989331
set F40[F80]=1227900243
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X60=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989332
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989333
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227896659
set F20[F80]=1227896900
set F30[F80]=1747989334
set F40[F80]=1227900244
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X70=F80
set F80=F80+1
set FO0[F80]=1227896660
set F20[F80]=1227896901
set F30[F80]=1747989335
set F40[F80]=1227900245
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X80=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747989336
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=1747990329
set F50[F80]=""
set F60[F80]=0
set F80=F80+1
set FO0[F80]=1227900984
set F20[F80]=1227900983
set F30[F80]=1747990355
set F40[F80]=1227900985
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set X90=F80
set F80=F80+1
set FO0[F80]=1227900996
set F20[F80]=1227900998
set F30[F80]=1747990356
set F40[F80]=1227900997
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XA0=F80
set F80=F80+1
set FO0[F80]=1227901016
set F20[F80]=1227901018
set F30[F80]=1747990360
set F40[F80]=1227901017
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XB0=F80
set F80=F80+1
set FO0[F80]=1227896652
set F20[F80]=1227901774
set F30[F80]=1747989328
set F40[F80]=1227901775
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XD0=F80
set F80=F80+1
set FO0[F80]=1227901783
set F20[F80]=1227901782
set F30[F80]=1747993153
set F40[F80]=1227901781
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XE0=F80
set F80=F80+1
set FO0[F80]=1227902029
set F20[F80]=1227902030
set F30[F80]=1747993169
set F40[F80]=1227902031
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XF0=F80
set F80=F80+1
set FO0[F80]=0
set F20[F80]=0
set F30[F80]=0
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XG0=F80
set F80=F80+1
set FO0[F80]=1227902521
set F20[F80]=1227902529
set F30[F80]=1747993649
set F40[F80]=1227902530
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XH0=F80
set F80=F80+1
set FO0[F80]=1227902536
set F20[F80]=1227902537
set F30[F80]=1747993433
set F40[F80]=1227902538
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XZ0=F80
set F80=F80+1
set FO0[F80]=1227902773
set F20[F80]=1227902774
set F30[F80]=1747993668
set F40[F80]=1227902775
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set F60[F80]=0
set XV0=F80
set KV0=CreateRegion()
call RegionAddRect(KV0,WB)
call RegionAddRect(KV0,XB)
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function J21))
set XW0=t
set t=null
set XN0=XN0+1
set XX0[XN0]=G60
set XY0[XN0]=GZ0
set XM0[XN0]=HG0
set XN0=XN0+1
set XX0[XN0]=G80
set XY0[XN0]=FT0
set XJ0[XN0]=W70
set XM0[XN0]=HH0
set XN0=XN0+1
set XX0[XN0]=FV0
set XY0[XN0]=FT0
set XJ0[XN0]=W80
set XM0[XN0]=HZ0
set XN0=XN0+1
set XX0[XN0]=G70
set XY0[XN0]=GC0
set XM0[XN0]=HV0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=W90
set XM0[XN0]=HX0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=FD0
set XJ0[XN0]=FC0
set XM0[XN0]=HY0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=FF0
set XJ0[XN0]=FC0
set XM0[XN0]=HJ0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=G90
set XJ0[XN0]=FC0
set XM0[XN0]=HK0
set XN0=XN0+1
set XX0[XN0]=FC0
set XY0[XN0]=WB0
set XM0[XN0]=HL0
set XN0=XN0+1
set XX0[XN0]=G50
set XY0[XN0]=G90
set XJ0[XN0]=GC0
set XM0[XN0]=HN0
set XN0=XN0+1
set XX0[XN0]=FE0
set XY0[XN0]=FK0
set XJ0[XN0]=WC0
set XM0[XN0]=HS0
set XN0=XN0+1
set XX0[XN0]=FE0
set XY0[XN0]=GB0
set XJ0[XN0]=WD0
set XM0[XN0]=HT0
set XN0=XN0+1
set XX0[XN0]=FE0
set XY0[XN0]=FQ0
set XJ0[XN0]=WE0
set XM0[XN0]=HR0
set XN0=XN0+1
set XX0[XN0]=FG0
set XY0[XN0]=FD0
set XJ0[XN0]=WF0
set XM0[XN0]=HP0
set XN0=XN0+1
set XX0[XN0]=GO0
set XY0[XN0]=FF0
set XJ0[XN0]=WG0
set XM0[XN0]=HQ0
set XN0=XN0+1
set XX0[XN0]=GV0
set XY0[XN0]=FF0
set XJ0[XN0]=WH0
set XM0[XN0]=HU0
set XN0=XN0+1
set XX0[XN0]=FZ0
set XY0[XN0]=FV0
set XJ0[XN0]=G90
set XM0[XN0]=ZI0
set XN0=XN0+1
set XX0[XN0]=GI0
set XY0[XN0]=FC0
set XJ0[XN0]=WZ0
set XM0[XN0]=Z10
set XN0=XN0+1
set XX0[XN0]=FG0
set XY0[XN0]=FG0
set XJ0[XN0]=G90
set XK0[XN0]=WV0
set XM0[XN0]=ZO0
set XN0=XN0+1
set XX0[XN0]=ZO0
set XY0[XN0]=WV0
set XM0[XN0]=Z20
set XN0=XN0+1
set XX0[XN0]=Z30
set XY0[XN0]=WV0
set XM0[XN0]=Z20
set XN0=XN0+1
set XX0[XN0]=FN0
set XY0[XN0]=FU0
set XM0[XN0]=Z50
set XN0=XN0+1
set XX0[XN0]=FU0
set XY0[XN0]=WW0
set XM0[XN0]=Z70
set XN0=XN0+1
set XX0[XN0]=GC0
set XY0[XN0]=GD0
set XJ0[XN0]=GZ0
set XK0[XN0]=WX0
set XM0[XN0]=Z80
set XN0=XN0+1
set XX0[XN0]=G40
set XY0[XN0]=FJ0
set XJ0[XN0]=GH0
set XM0[XN0]=Z90
set XN0=XN0+1
set XX0[XN0]=HH0
set XY0[XN0]=HZ0
set XJ0[XN0]=WY0
set XM0[XN0]=ZA0
set XN0=XN0+1
set XX0[XN0]=HQ0
set XY0[XN0]=HP0
set XM0[XN0]=ZB0
set XN0=XN0+1
set XX0[XN0]=GI0
set XY0[XN0]=GI0
set XJ0[XN0]=WK0
set XM0[XN0]=ZC0
set XN0=XN0+1
set XX0[XN0]=HG0
set XY0[XN0]=FZ0
set XJ0[XN0]=FW0
set XM0[XN0]=ZD0
set XN0=XN0+1
set XX0[XN0]=FH0
set XY0[XN0]=FZ0
set XJ0[XN0]=WL0
set XM0[XN0]=ZE0
set XN0=XN0+1
set XX0[XN0]=GI0
set XY0[XN0]=GO0
set XJ0[XN0]=WM0
set XM0[XN0]=ZF0
set XN0=XN0+1
set XX0[XN0]=HP0
set XY0[XN0]=GG0
set XJ0[XN0]=WN0
set XM0[XN0]=ZJ0
set XN0=XN0+1
set XX0[XN0]=G50
set XY0[XN0]=FW0
set XJ0[XN0]=WS0
set XM0[XN0]=ZK0
set XN0=XN0+1
set XX0[XN0]=GD0
set XY0[XN0]=HR0
set XJ0[XN0]=WT0
set XM0[XN0]=ZL0
set XN0=XN0+1
set XX0[XN0]=ZL0
set XY0[XN0]=WT0
set XM0[XN0]=ZM0
set XN0=XN0+1
set XX0[XN0]=ZM0
set XY0[XN0]=WT0
set XM0[XN0]=ZN0
set XN0=XN0+1
set XX0[XN0]=ZN0
set XY0[XN0]=WT0
set XM0[XN0]=ZS0
set XN0=XN0+1
set XX0[XN0]=ZS0
set XY0[XN0]=WT0
set XM0[XN0]=ZT0
set XN0=XN0+1
set XX0[XN0]=GD0
set XY0[XN0]=FF0
set XJ0[XN0]=WR0
set XM0[XN0]=ZR0
set XN0=XN0+1
set XX0[XN0]=ZR0
set XY0[XN0]=WR0
set XM0[XN0]=ZP0
set XN0=XN0+1
set XX0[XN0]=ZP0
set XY0[XN0]=WR0
set XM0[XN0]=ZQ0
set XN0=XN0+1
set XX0[XN0]=GG0
set XY0[XN0]=HG0
set XK0[XN0]=WP0
set XM0[XN0]=ZU0
set XN0=XN0+1
set XX0[XN0]=FX0
set XY0[XN0]=GA0
set XM0[XN0]=VI0
set XN0=XN0+1
set XX0[XN0]=ZE0
set XY0[XN0]=FX0
set XJ0[XN0]=WQ0
set XM0[XN0]=VO0
set XN0=XN0+1
set XX0[XN0]=FX0
set XY0[XN0]=GV0
set XJ0[XN0]=GV0
set XM0[XN0]=V20
set XN0=XN0+1
set XX0[XN0]=GA0
set XY0[XN0]=WU0
set XM0[XN0]=V40
set XN0=XN0+1
set XX0[XN0]=G00
set XY0[XN0]=GH0
set XJ0[XN0]=X00
set XM0[XN0]=V60
set XN0=XN0+1
set XX0[XN0]=G00
set XY0[XN0]=Z50
set XJ0[XN0]=XI0
set XM0[XN0]=V80
set XN0=XN0+1
set XX0[XN0]=G00
set XY0[XN0]=Z60
set XJ0[XN0]=XI0
set XM0[XN0]=V80
set XN0=XN0+1
set XX0[XN0]=GG0
set XY0[XN0]=GG0
set XJ0[XN0]=G40
set XK0[XN0]=F90
set XM0[XN0]=V90
set XN0=XN0+1
set XX0[XN0]=GG0
set XY0[XN0]=GG0
set XJ0[XN0]=G40
set XK0[XN0]=FA0
set XM0[XN0]=V90
set XN0=XN0+1
set XX0[XN0]=FY0
set XY0[XN0]=G50
set XJ0[XN0]=GU0
set XM0[XN0]=VB0
set XN0=XN0+1
set XX0[XN0]=GC0
set XY0[XN0]=FV0
set XJ0[XN0]=XZ0
set XM0[XN0]=W50
set XN0=XN0+1
set XX0[XN0]=G40
set XY0[XN0]=GO0
set XJ0[XN0]=FG0
set XK0[XN0]=GD0
set XM0[XN0]=XS0
set XN0=XN0+1
set XX0[XN0]=HG0
set XY0[XN0]=HN0
set XJ0[XN0]=X20
set XM0[XN0]=VC0
set XN0=XN0+1
set XX0[XN0]=GG0
set XY0[XN0]=G10
set XJ0[XN0]=GZ0
set XM0[XN0]=VD0
set XN0=XN0+1
set XX0[XN0]=GH0
set XY0[XN0]=G60
set XJ0[XN0]=GE0
set XM0[XN0]=VE0
set XN0=XN0+1
set XX0[XN0]=GH0
set XY0[XN0]=G60
set XJ0[XN0]=GF0
set XM0[XN0]=VE0
set XN0=XN0+1
set XX0[XN0]=FJ0
set XY0[XN0]=G70
set XJ0[XN0]=X30
set XM0[XN0]=VG0
set XN0=XN0+1
set XX0[XN0]=FS0
set XY0[XN0]=Z10
set XJ0[XN0]=XD0
set XM0[XN0]=VH0
set XN0=XN0+1
set XX0[XN0]=HA0
set XJ0[XN0]=X40
set XM0[XN0]=VZ0
set XN0=XN0+1
set XX0[XN0]=G80
set XY0[XN0]=HV0
set XJ0[XN0]=FU0
set XK0[XN0]=X50
set XM0[XN0]=VV0
set XN0=XN0+1
set XX0[XN0]=G80
set XY0[XN0]=HW0
set XJ0[XN0]=FU0
set XK0[XN0]=X50
set XM0[XN0]=VV0
set XN0=XN0+1
set XX0[XN0]=FS0
set XY0[XN0]=G30
set XJ0[XN0]=FV0
set XK0[XN0]=X60
set XM0[XN0]=VW0
set XN0=XN0+1
set XX0[XN0]=Z90
set XY0[XN0]=HG0
set XM0[XN0]=VX0
set XN0=XN0+1
set XX0[XN0]=G80
set XY0[XN0]=G80
set XJ0[XN0]=G60
set XK0[XN0]=G20
set XM0[XN0]=VY0
set XN0=XN0+1
set XX0[XN0]=FC0
set XY0[XN0]=FN0
set XJ0[XN0]=FH0
set XK0[XN0]=X70
set XM0[XN0]=VM0
set XN0=XN0+1
set XX0[XN0]=G10
set XY0[XN0]=G30
set XJ0[XN0]=X80
set XM0[XN0]=VN0
set XN0=XN0+1
set XX0[XN0]=HN0
set XY0[XN0]=HN0
set XJ0[XN0]=HN0
set XM0[XN0]=VT0
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=FH0
set XJ0[XN0]=FH0
set XM0[XN0]=VR0
set XN0=XN0+1
set XX0[XN0]=GR0
set XY0[XN0]=FT0
set XJ0[XN0]=FT0
set XK0[XN0]=FT0
set XL0[XN0]=X90
set XM0[XN0]=VP0
set XN0=XN0+1
set XX0[XN0]=G50
set XY0[XN0]=GD0
set XJ0[XN0]=XA0
set XM0[XN0]=VQ0
set XN0=XN0+1
set XX0[XN0]=VY0
set XY0[XN0]=HH0
set XJ0[XN0]=XB0
set XM0[XN0]=VU0
set XN0=XN0+1
set XX0[XN0]=GE0
set XY0[XN0]=GB0
set XJ0[XN0]=GB0
set XM0[XN0]=W00
set XN0=XN0+1
set XX0[XN0]=GF0
set XY0[XN0]=GB0
set XJ0[XN0]=GB0
set XM0[XN0]=W00
set XN0=XN0+1
set XX0[XN0]=GC0
set XY0[XN0]=FK0
set XJ0[XN0]=FK0
set XK0[XN0]=XE0
set XM0[XN0]=WO0
set XN0=XN0+1
set XX0[XN0]=GC0
set XY0[XN0]=G80
set XJ0[XN0]=XF0
set XM0[XN0]=W30
set XN0=XN0+1
set XX0[XN0]=FY0
set XY0[XN0]=W10
set XM0[XN0]=H00
set XN0=XN0+1
set XX0[XN0]=FB0
set XY0[XN0]=FJ0
set XM0[XN0]=W40
set XN0=XN0+1
set XX0[XN0]=G90
set XY0[XN0]=HS0
set XJ0[XN0]=XH0
set XM0[XN0]=HO0
set XN0=XN0+1
set XX0[XN0]=HO0
set XY0[XN0]=XH0
set XM0[XN0]=HO0
set XN0=XN0+1
set XX0[XN0]=H20
set XY0[XN0]=XH0
set XM0[XN0]=HO0
set XN0=XN0+1
set XX0[XN0]=FN0
set XY0[XN0]=G90
set XJ0[XN0]=G90
set XK0[XN0]=XV0
set XM0[XN0]=W60
set F80=F80+1
set FO0[F80]=1227899226
set F20[F80]=1227895089
set F30[F80]=0
set F40[F80]=1227900249
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XT0=F80
set F80=F80+1
set FO0[F80]=1227894854
set F20[F80]=1227894852
set F30[F80]=0
set F40[F80]=1227900250
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XR0=F80
set F80=F80+1
set FO0[F80]=1227895096
set F20[F80]=1227894841
set F30[F80]=0
set F40[F80]=1227900464
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XP0=F80
set F80=F80+1
set FO0[F80]=1227895097
set F20[F80]=1227894837
set F30[F80]=0
set F40[F80]=1227900470
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XQ0=F80
set F80=F80+1
set FO0[F80]=1227895105
set F20[F80]=1227894855
set F30[F80]=0
set F40[F80]=1227900465
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set XU0=F80
set F80=F80+1
set FO0[F80]=1227895106
set F20[F80]=1227894836
set F30[F80]=0
set F40[F80]=1227900466
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y00=F80
set F80=F80+1
set FO0[F80]=1227895112
set F20[F80]=1227894835
set F30[F80]=0
set F40[F80]=1227900467
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YI0=F80
set F80=F80+1
set FO0[F80]=1227895113
set F20[F80]=1227894834
set F30[F80]=0
set F40[F80]=1227900469
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y10=F80
set F80=F80+1
set FO0[F80]=1227895371
set F20[F80]=1227894833
set F30[F80]=0
set F40[F80]=1227900468
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YO0=F80
set F80=F80+1
set FO0[F80]=1227895372
set F20[F80]=1227894857
set F30[F80]=0
set F40[F80]=1227900485
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y20=F80
set F80=F80+1
set FO0[F80]=1227899442
set F20[F80]=1227894856
set F30[F80]=0
set F40[F80]=1227900473
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y40=F80
set F80=F80+1
set FO0[F80]=1227899443
set F20[F80]=1227894864
set F30[F80]=0
set F40[F80]=1227900481
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y50=F80
set F80=F80+1
set FO0[F80]=1227899444
set F20[F80]=1227894869
set F30[F80]=0
set F40[F80]=1227900471
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y60=F80
set F80=F80+1
set FO0[F80]=1227899447
set F20[F80]=1227894832
set F30[F80]=0
set F40[F80]=1227900484
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y70=F80
set F80=F80+1
set FO0[F80]=1227899446
set F20[F80]=1227895094
set F30[F80]=0
set F40[F80]=1227900483
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y80=F80
set F80=F80+1
set FO0[F80]=1227899445
set F20[F80]=1227895095
set F30[F80]=0
set F40[F80]=1227900482
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y90=F80
set F80=F80+1
set FO0[F80]=1227899449
set F20[F80]=1227894863
set F30[F80]=0
set F40[F80]=1227900472
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YA0=F80
set F80=F80+1
set FO0[F80]=1227901493
set F20[F80]=1227901268
set F30[F80]=0
set F40[F80]=1227901258
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YB0=F80
set F80=F80+1
set FO0[F80]=1227901270
set F20[F80]=1227901269
set F30[F80]=0
set F40[F80]=1227901241
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YC0=F80
set F80=F80+1
set FO0[F80]=1227901271
set F20[F80]=1227901267
set F30[F80]=0
set F40[F80]=1227901257
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YD0=F80
set F80=F80+1
set FO0[F80]=1227901272
set F20[F80]=1227901266
set F30[F80]=0
set F40[F80]=1227901249
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YE0=F80
set F80=F80+1
set FO0[F80]=1227901273
set F20[F80]=1227901265
set F30[F80]=0
set F40[F80]=1227901256
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YF0=F80
set F80=F80+1
set FO0[F80]=1227901274
set F20[F80]=1227901259
set F30[F80]=0
set F40[F80]=1227901255
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YG0=F80
set F80=F80+1
set FO0[F80]=1227901488
set F20[F80]=1227901260
set F30[F80]=0
set F40[F80]=1227901254
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YH0=F80
set F80=F80+1
set FO0[F80]=1227901489
set F20[F80]=1227901261
set F30[F80]=0
set F40[F80]=1227901253
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YZ0=F80
set F80=F80+1
set FO0[F80]=1227901490
set F20[F80]=1227901264
set F30[F80]=0
set F40[F80]=1227901252
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YV0=F80
set F80=F80+1
set FO0[F80]=1227901491
set F20[F80]=1227901263
set F30[F80]=0
set F40[F80]=1227901251
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YW0=F80
set F80=F80+1
set FO0[F80]=1227901492
set F20[F80]=1227901262
set F30[F80]=0
set F40[F80]=1227901250
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YX0=F80
set F80=F80+1
set FO0[F80]=1227901238
set F20[F80]=1227901239
set F30[F80]=0
set F40[F80]=1227901240
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YY0=F80
set F80=F80+1
set FO0[F80]=1227901530
set F20[F80]=1227901523
set F30[F80]=0
set F40[F80]=1227901522
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YJ0=F80
set F80=F80+1
set FO0[F80]=1227901744
set F20[F80]=1227901524
set F30[F80]=0
set F40[F80]=1227901516
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YK0=F80
set F80=F80+1
set FO0[F80]=1227901745
set F20[F80]=1227901525
set F30[F80]=0
set F40[F80]=1227901517
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YL0=F80
set F80=F80+1
set FO0[F80]=1227901746
set F20[F80]=1227901527
set F30[F80]=0
set F40[F80]=1227901518
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YM0=F80
set F80=F80+1
set FO0[F80]=1227901747
set F20[F80]=1227901526
set F30[F80]=0
set F40[F80]=1227901521
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YN0=F80
set F80=F80+1
set FO0[F80]=1227901748
set F20[F80]=1227901529
set F30[F80]=0
set F40[F80]=1227901520
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YS0=F80
set F80=F80+1
set FO0[F80]=1227901749
set F20[F80]=1227901528
set F30[F80]=0
set F40[F80]=1227901519
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YT0=F80
set F80=F80+1
set FO0[F80]=1227901769
set F20[F80]=1227901768
set F30[F80]=0
set F40[F80]=1227901770
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YR0=F80
set F80=F80+1
set FO0[F80]=1227902004
set F20[F80]=1227902005
set F30[F80]=0
set F40[F80]=1227902008
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set Y30=F80
set F80=F80+1
set FO0[F80]=1227902003
set F20[F80]=1227902000
set F30[F80]=0
set F40[F80]=1227902009
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YP0=F80
set F80=F80+1
set FO0[F80]=1227902002
set F20[F80]=1227902007
set F30[F80]=0
set F40[F80]=1227902017
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YQ0=F80
set F80=F80+1
set FO0[F80]=1227902037
set F20[F80]=1227902038
set F30[F80]=0
set F40[F80]=1227902039
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set YU0=F80
set F80=F80+1
set FO0[F80]=1227902257
set F20[F80]=1227902256
set F30[F80]=0
set F40[F80]=1227902258
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J00=F80
set F80=F80+1
set FO0[F80]=1227902261
set F20[F80]=1227902260
set F30[F80]=0
set F40[F80]=1227902259
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set JI0=F80
set F80=F80+1
set FO0[F80]=1227902262
set F20[F80]=1227902263
set F30[F80]=0
set F40[F80]=1227902264
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J10=F80
set F80=F80+1
set FO0[F80]=1227902278
set F20[F80]=1227902279
set F30[F80]=0
set F40[F80]=1227902280
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set JO0=F80
set F80=F80+1
set FO0[F80]=1227902285
set F20[F80]=1227902284
set F30[F80]=0
set F40[F80]=1227902286
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J20=F80
set F80=F80+1
set FO0[F80]=1227902287
set F20[F80]=1227902288
set F30[F80]=0
set F40[F80]=1227902289
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J30=F80
set F80=F80+1
set FO0[F80]=1227902545
set F20[F80]=1227902546
set F30[F80]=0
set F40[F80]=1227902547
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J40=F80
set F80=F80+1
set FO0[F80]=1227902548
set F20[F80]=1227902549
set F30[F80]=0
set F40[F80]=1227902550
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J50=F80
set F80=F80+1
set FO0[F80]=1227902551
set F20[F80]=1227902552
set F30[F80]=0
set F40[F80]=1227902553
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J60=F80
set F80=F80+1
set FO0[F80]=1227902554
set F20[F80]=1227902768
set F30[F80]=0
set F40[F80]=1227902769
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set F60[F80]=60
set J70=F80
set F80=F80+1
set FO0[F80]=1227895617
set F20[F80]=1227896113
set F30[F80]=1747990603
set F40[F80]=1227899961
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
set F60[F80]=0
set F70[F80]=GE0
set F80=F80+1
set FO0[F80]=1227895641
set F20[F80]=1227896114
set F30[F80]=1747990616
set F40[F80]=1227899705
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp"
set F60[F80]=0
set F70[F80]=GG0
set F80=F80+1
set FO0[F80]=1227895379
set F20[F80]=1227895376
set F30[F80]=1747990611
set F40[F80]=1227899713
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
set F60[F80]=0
set F70[F80]=FC0
set F80=F80+1
set FO0[F80]=1227895374
set F20[F80]=1227895378
set F30[F80]=1747990608
set F40[F80]=1227899731
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBoots.blp"
set F60[F80]=0
set F70[F80]=FD0
set F80=F80+1
set FO0[F80]=1227895386
set F20[F80]=1227895859
set F30[F80]=1747990609
set F40[F80]=1227899734
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNBelt.blp"
set F60[F80]=0
set F70[F80]=FF0
set F80=F80+1
set FO0[F80]=1227895601
set F20[F80]=1227895861
set F30[F80]=1747990612
set F40[F80]=1227899957
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp"
set F60[F80]=0
set F70[F80]=FH0
set F80=F80+1
set FO0[F80]=1227895618
set F20[F80]=1227895877
set F30[F80]=1747990606
set F40[F80]=1227899969
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp"
set F60[F80]=0
set F70[F80]=FN0
set F80=F80+1
set FO0[F80]=1227895621
set F20[F80]=1227895880
set F30[F80]=1747990615
set F40[F80]=1227899703
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
set F60[F80]=18
set F70[F80]=FR0
set F80=F80+1
set FO0[F80]=1227895623
set F20[F80]=1227895883
set F30[F80]=1747990607
set F40[F80]=1227899716
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp"
set F60[F80]=0
set F70[F80]=FU0
set F80=F80+1
set FO0[F80]=1227895632
set F20[F80]=1227895891
set F30[F80]=1747990613
set F40[F80]=1227899737
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp"
set F60[F80]=0
set F70[F80]=G50
set F80=F80+1
set FO0[F80]=1227895633
set F20[F80]=1227895892
set F30[F80]=1747990599
set F40[F80]=1227899977
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp"
set F60[F80]=0
set F70[F80]=G60
set F80=F80+1
set FO0[F80]=1227895635
set F20[F80]=1227895894
set F30[F80]=1747990604
set F40[F80]=1227899978
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp"
set F60[F80]=0
set F70[F80]=G80
set F80=F80+1
set FO0[F80]=1227895636
set F20[F80]=1227895895
set F30[F80]=1747990610
set F40[F80]=1227899728
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp"
set F60[F80]=0
set F70[F80]=G90
set F80=F80+1
set FO0[F80]=1227895638
set F20[F80]=1227895897
set F30[F80]=1747990597
set F40[F80]=1227899701
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp"
set F60[F80]=0
set F70[F80]=GB0
set F80=F80+1
set FO0[F80]=1227895639
set F20[F80]=1227895898
set F30[F80]=1747990602
set F40[F80]=1227899979
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp"
set F60[F80]=0
set F70[F80]=GC0
set F80=F80+1
set FO0[F80]=1227900740
set F20[F80]=1227900739
set F30[F80]=1747990601
set F40[F80]=1227900741
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNWand.blp"
set F60[F80]=0
set F70[F80]=GR0
set F80=F80+1
set FO0[F80]=1227901012
set F20[F80]=1227901010
set F30[F80]=1747990598
set F40[F80]=1227901015
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
set F60[F80]=0
set F70[F80]=GP0
set F80=F80+1
set FO0[F80]=1227901495
set F20[F80]=1227901494
set F30[F80]=1747990614
set F40[F80]=1227901496
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNAmulet.blp"
set F60[F80]=0
set F70[F80]=GU0
set F80=F80+1
set FO0[F80]=1227895628
set F20[F80]=1227895888
set F30[F80]=1747990605
set F40[F80]=1227899717
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"
set F60[F80]=0
set F70[F80]=G20
set F80=F80+1
set FO0[F80]=1227896129
set F20[F80]=1227896137
set F30[F80]=1747990600
set F40[F80]=0
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"
set F60[F80]=0
set F70[F80]=H90
set F80=F80+1
set FO0[F80]=1227895607
set F20[F80]=1227895874
set F30[F80]=1747990835
set F40[F80]=1227899730
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp"
set F60[F80]=0
set F70[F80]=FJ0
set F80=F80+1
set FO0[F80]=1227895377
set F20[F80]=1227895375
set F30[F80]=1747993167
set F40[F80]=1227894849
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"
set F60[F80]=0
set F70[F80]=FB0
set F80=F80+1
set FO0[F80]=1227902273
set F20[F80]=1227902265
set F30[F80]=1747993422
set F40[F80]=1227902274
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
set F60[F80]=0
set F70[F80]=F90
set F80=F80+1
set FO0[F80]=1227895603
set F20[F80]=1227895863
set F30[F80]=1747993648
set F40[F80]=1227899959
set F50[F80]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
set F60[F80]=0
set F70[F80]=FV0
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELL)
call TriggerAddCondition(t,Condition(function LV1))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call K7I(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call K7I(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
call TriggerAddCondition(t,Condition(function M91))
set JX0=t
set t=null
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function MB1))
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call K7I(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call K7I(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
call TriggerAddCondition(t,Condition(function ML1))
set JP0=t
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(t,Condition(function MT1))
set JQ0=t
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function MN1))
set t=null
set t=CreateTrigger()
call K9I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function N11))
set t=null
set t=CreateTrigger()
call K9I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call K9I(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function N41))
set K10=t
set t=null
set t=CreateTrigger()
set t=CreateTrigger()
call K9I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function NB1)
call TriggerAddCondition(t,Condition(function N71))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function NF1))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddAction(t,function NJ1)
call TriggerAddCondition(t,Condition(function NV1))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.33,true)
call TriggerAddCondition(t,Condition(function S41))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.75,true)
call TriggerAddCondition(t,Condition(function S91))
set t=null
call SetPlayerAbilityAvailable(CO[1],1093744436,false)
call SetPlayerAbilityAvailable(CO[2],1093744436,false)
call SetPlayerAbilityAvailable(CO[3],1093744436,false)
call SetPlayerAbilityAvailable(CO[4],1093744436,false)
call SetPlayerAbilityAvailable(CO[5],1093744436,false)
call SetPlayerAbilityAvailable(DO[1],1093744436,false)
call SetPlayerAbilityAvailable(DO[2],1093744436,false)
call SetPlayerAbilityAvailable(DO[3],1093744436,false)
call SetPlayerAbilityAvailable(DO[4],1093744436,false)
call SetPlayerAbilityAvailable(DO[5],1093744436,false)
set t=CreateTrigger()
call K9I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function T11))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function T31))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function T21))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call K7I(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function T61))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function TA1))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.5,true)
call TriggerAddCondition(t,Condition(function TV1))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function PI1))
set t=null
call IAO()
call SetAltMinimapIcon("war3mapImported\\black.blp")
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function O5O))
call SetPlayerAbilityAvailable(CO[1],1093752406,false)
call SetPlayerAbilityAvailable(CO[2],1093752406,false)
call SetPlayerAbilityAvailable(CO[3],1093752406,false)
call SetPlayerAbilityAvailable(CO[4],1093752406,false)
call SetPlayerAbilityAvailable(CO[5],1093752406,false)
call SetPlayerAbilityAvailable(DO[1],1093752406,false)
call SetPlayerAbilityAvailable(DO[2],1093752406,false)
call SetPlayerAbilityAvailable(DO[3],1093752406,false)
call SetPlayerAbilityAvailable(DO[4],1093752406,false)
call SetPlayerAbilityAvailable(DO[5],1093752406,false)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(t,Condition(function OJO))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function OMO)
call TriggerAddCondition(t,Condition(function OLO))
set YV1=GetRectCenter(Q4)
set N0=CreateUnitAtLoc(Player(12),1848651852,YV1,bj_UNIT_FACING)
call SetUnitAcquireRange(N0,150)
call Y91(N0)
call RemoveLocation(YV1)
call UnitAddItem(N0,CreateItem(F20[ZX0],0,0))
call UnitAddAbility(N0,1093743666)
set YV1=GetRectCenter(Z4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(V4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(W4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(X4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(Y4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(J4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(K4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(L4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(M4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(N4)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(W5)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set YV1=GetRectCenter(Y5)
call RemoveUnit(CreateUnitAtLoc(EO,1966092337,YV1,0))
call RemoveLocation(YV1)
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,QH,300,Condition(function K6I))
call TriggerRegisterUnitInRange(t,BZ,300,Condition(function K6I))
call TriggerRegisterUnitInRange(t,RH,300,Condition(function K6I))
call TriggerAddCondition(t,Condition(function OTO))
set t=null
set OG=CreateTrigger()
call TriggerAddAction(OG,function OPO)
set AG=CreateTrigger()
call TriggerAddAction(AG,function OUO)
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,D4)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,Q3)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,TA)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
call TriggerAddCondition(t,Condition(function AIO))
set t=null
set AOO=null
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,I4)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,N3)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,LA)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
call TriggerAddCondition(t,Condition(function A2O))
set t=null
set AOO=null
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,C4)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,P3)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,RA)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
call TriggerAddCondition(t,Condition(function A4O))
set t=null
set AOO=null
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,O4)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,S3)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,MA)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
call TriggerAddCondition(t,Condition(function A6O))
set t=null
set AOO=null
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,R3)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,B4)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,SA)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
call TriggerAddCondition(t,Condition(function A8O))
set t=null
set AOO=null
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,U3)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,M3)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
set AOO=CreateRegion()
call RegionAddRect(AOO,NA)
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
call TriggerAddCondition(t,Condition(function AAO))
set t=null
set AOO=null
set BG=CreateTrigger()
call TriggerAddAction(BG,function AJO)
set CG=CreateTrigger()
call TriggerRegisterUnitEvent(CG,I70,EVENT_UNIT_DEATH)
call TriggerAddAction(CG,function AMO)
set DG=CreateTrigger()
call TriggerRegisterUnitEvent(DG,I80,EVENT_UNIT_DEATH)
call TriggerAddAction(DG,function ASO)
set EG=CreateTrigger()
call TriggerRegisterUnitEvent(EG,I90,EVENT_UNIT_DEATH)
call TriggerAddAction(EG,function ARO)
set FG=CreateTrigger()
call TriggerRegisterUnitEvent(FG,I40,EVENT_UNIT_DEATH)
call TriggerAddAction(FG,function AQO)
set GG=CreateTrigger()
call TriggerRegisterUnitEvent(GG,I50,EVENT_UNIT_DEATH)
call TriggerAddAction(GG,function B0O)
set HG=CreateTrigger()
call TriggerRegisterUnitEvent(HG,I60,EVENT_UNIT_DEATH)
call TriggerAddAction(HG,function B1O)
set ZG=CreateTrigger()
call TriggerRegisterUnitEvent(ZG,BU0,EVENT_UNIT_DEATH)
call TriggerAddAction(ZG,function B2O)
set VG=CreateTrigger()
call TriggerRegisterUnitEvent(VG,C00,EVENT_UNIT_DEATH)
call TriggerAddAction(VG,function B4O)
set WG=CreateTrigger()
call TriggerRegisterUnitEvent(WG,CI0,EVENT_UNIT_DEATH)
call TriggerAddAction(WG,function B6O)
set XG=CreateTrigger()
call TriggerRegisterUnitEvent(XG,BR0,EVENT_UNIT_DEATH)
call TriggerAddAction(XG,function B8O)
set YG=CreateTrigger()
call TriggerRegisterUnitEvent(YG,BP0,EVENT_UNIT_DEATH)
call TriggerAddAction(YG,function BAO)
set JG=CreateTrigger()
call TriggerRegisterUnitEvent(JG,BQ0,EVENT_UNIT_DEATH)
call TriggerAddAction(JG,function BCO)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,SQ,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function BEO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BZ0,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function BGO))
set t=null
set KG=CreateTrigger()
call K7I(KG,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(KG,Condition(function BZO))
call TriggerAddAction(KG,function BVO)
set LG=CreateTrigger()
call K7I(LG,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(LG,Condition(function BXO))
call TriggerAddAction(LG,function BYO)
set MG=CreateTrigger()
call TriggerAddAction(MG,function BKO)
set NG=CreateTrigger()
call TriggerRegisterTimerEventSingle(NG,75.00)
call TriggerAddAction(NG,function BMO)
set SG=CreateTrigger()
call TriggerAddCondition(SG,Condition(function CMO))
set TG=CreateTrigger()
call TriggerAddAction(TG,function CSO)
set RG=CreateTrigger()
call TriggerAddAction(RG,function CUO)
set PG=CreateTrigger()
call K7I(PG,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(PG,Condition(function DIO))
call TriggerAddAction(PG,function D1O)
set QG=CreateTrigger()
call K7I(QG,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(QG,Condition(function D2O))
call TriggerAddAction(QG,function D3O)
set UG=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(UG,1.00)
call TriggerAddAction(UG,function D8O)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SELECTED)
call TriggerAddCondition(t,Condition(function F6O))
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DESELECTED)
call TriggerAddCondition(t,Condition(function F5O))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FAO))
set t=null
if GetRandomInt(0,10)<11 then
set t=CreateTrigger()
set d=GetRandomReal(60,90)
call TriggerRegisterTimerEvent(t,d,false)
set t=null
endif
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,QQ,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,QQ,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FQO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,UQ,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,UQ,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FUO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I00,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I00,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G0O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,II0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,II0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function GIO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I10,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I10,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G1O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,IO0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,IO0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function GOO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I20,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I20,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G2O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I30,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I30,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G3O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I40,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I40,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G4O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I50,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I50,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G5O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I60,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I60,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G6O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I70,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I70,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G7O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I80,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I80,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G8O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,I90,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,I90,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G9O))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BY0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BY0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FZO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BJ0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BJ0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FVO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BK0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BK0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FWO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BL0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BL0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FXO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BM0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BM0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FYO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BN0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BN0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FJO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BS0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BS0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FKO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BT0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BT0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FLO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BR0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BR0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FMO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BP0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BP0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FNO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BQ0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BQ0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FSO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,BU0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,BU0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FTO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,C00,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,C00,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FRO))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,CI0,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,CI0,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FPO))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function FFO))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,5,true)
call TriggerAddCondition(t,Condition(function GVO))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,4,true)
call TriggerAddCondition(t,Condition(function GSO))
set t=null
set NB0=ZJI()
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,AOO,Condition(function HRI))
call TriggerAddCondition(t,Condition(function GUO))
set t=null
set AOO=null
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function HIO))
call TriggerRegisterTimerEvent(t,5,true)
set t=null
call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_VISIBLE,-4550,1250,300,true,true))
call DestroyFogModifier(CreateFogModifierRadius(DO[0],FOG_OF_WAR_VISIBLE,-4550,1250,300,true,true))
call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_VISIBLE,3200,1,300,true,true))
call DestroyFogModifier(CreateFogModifierRadius(DO[0],FOG_OF_WAR_VISIBLE,3200,1,300,true,true))
call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_VISIBLE,-7292,4186,450,true,true))
call DestroyFogModifier(CreateFogModifierRadius(DO[0],FOG_OF_WAR_VISIBLE,-7292,4186,450,true,true))
call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_VISIBLE,7348,-4334,450,true,true))
call DestroyFogModifier(CreateFogModifierRadius(DO[0],FOG_OF_WAR_VISIBLE,7348,-4334,450,true,true))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,3.5,true)
call TriggerAddCondition(t,Condition(function HBO))
set t=null
set JK=CreateTrigger()
call TriggerRegisterUnitEvent(JK,BZ0,EVENT_UNIT_DEATH)
call TriggerAddAction(JK,function HWO)
set KK=CreateTrigger()
call TriggerRegisterUnitEvent(KK,SQ,EVENT_UNIT_DEATH)
call TriggerAddAction(KK,function HZO)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function HKO))
set t=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function HMO)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HRO))
set t=null
set NY0=CreateTrigger()
call TriggerAddAction(NY0,function ZIO)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,EO,EVENT_PLAYER_UNIT_ATTACKED,Condition(function HRI))
call TriggerAddCondition(t,Condition(function ZOO))
set t=null
set NJ0=CreateRegion()
call RegionAddRect(NJ0,N5)
call RegionAddRect(NJ0,S5)
call RegionAddRect(NJ0,T5)
call RegionAddRect(NJ0,R5)
call RegionAddRect(NJ0,P5)
call RegionAddRect(NJ0,Q5)
call RegionAddRect(NJ0,U5)
call RegionAddRect(NJ0,I6)
call RegionAddRect(NJ0,O6)
set IH=CreateTrigger()
call TriggerRegisterEnterRectSimple(IH,bj_mapInitialPlayableArea)
call TriggerAddCondition(IH,Condition(function Z3O))
call TriggerAddAction(IH,function Z4O)
set OH=CreateTrigger()
call K7I(OH,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(OH,Condition(function Z6O))
call TriggerAddAction(OH,function Z9O)
set BH=CreateTrigger()
call K7I(BH,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(BH,Condition(function ZBO))
call TriggerAddAction(BH,function ZEO)
if(bj_isSinglePlayer and ZGO())then
call VAO()
endif
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,XO,"-wtf",true)
call TriggerAddAction(t,function VFO)
call TriggerAddCondition(t,Condition(function VCO))
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,CO[1],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,CO[2],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,CO[3],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,CO[4],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,CO[5],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,DO[1],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,DO[2],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,DO[3],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,DO[4],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerRegisterPlayerUnitEvent(t,DO[5],EVENT_PLAYER_HERO_LEVEL,Condition(function HRI))
call TriggerAddCondition(t,Condition(function VZO))
set t=null
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,XO,"-test",true)
call TriggerAddCondition(t,Condition(function VXO))
set t=null
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,GetWorldBounds())
call TriggerRegisterEnterRegion(t,AOO,Condition(function K6I))
call TriggerAddCondition(t,Condition(function W9O))
set t=null
set AOO=null
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,QH,300,Condition(function K6I))
call TriggerRegisterUnitInRange(t,BZ,300,Condition(function K6I))
call TriggerRegisterUnitInRange(t,RH,300,Condition(function K6I))
call TriggerAddCondition(t,Condition(function WBO))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,25,false)
call TriggerAddAction(t,function WFO)
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function WJO))
set t=null
set LK=CreateRegion()
call RegionAddRect(LK,G4)
call RegionAddRect(LK,F4)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,25,false)
call TriggerAddAction(t,function WPO)
set t=null
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,CO[1],"-",false)
call TriggerRegisterPlayerChatEvent(t,CO[2],"-",false)
call TriggerRegisterPlayerChatEvent(t,CO[3],"-",false)
call TriggerRegisterPlayerChatEvent(t,CO[4],"-",false)
call TriggerRegisterPlayerChatEvent(t,CO[5],"-",false)
call TriggerRegisterPlayerChatEvent(t,DO[1],"-",false)
call TriggerRegisterPlayerChatEvent(t,DO[2],"-",false)
call TriggerRegisterPlayerChatEvent(t,DO[3],"-",false)
call TriggerRegisterPlayerChatEvent(t,DO[4],"-",false)
call TriggerRegisterPlayerChatEvent(t,DO[5],"-",false)
call TriggerAddAction(t,function WUO)
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(t,Condition(function KGO))
call TriggerAddAction(t,function KWO)
set UL[0]=false
set UL[1]=false
set UL[2]=false
set UL[3]=false
set UL[4]=false
set UL[5]=false
set UL[6]=false
set UL[7]=false
set UL[8]=false
set UL[9]=false
set UL[10]=false
set UL[11]=false
set UL[12]=false
set UL[13]=false
set UL[14]=false
set UL[15]=false
set UL[16]=false
set S00[0]=false
set S00[1]=false
set S00[2]=false
set S00[3]=false
set S00[4]=false
set S00[5]=false
set S00[6]=false
set S00[7]=false
set S00[8]=false
set S00[9]=false
set S00[10]=false
set S00[11]=false
set S00[12]=false
set S00[13]=false
set S00[14]=false
set S00[15]=false
set S00[16]=false
set SI0[0]=true
set SI0[1]=true
set SI0[2]=true
set SI0[3]=true
set SI0[4]=true
set SI0[5]=true
set SI0[6]=true
set SI0[7]=true
set SI0[8]=true
set SI0[9]=true
set SI0[10]=true
set SI0[11]=true
set SI0[12]=true
set SI0[13]=true
set SI0[14]=true
set SI0[15]=true
set SI0[16]=true
set S10[0]=false
set S10[1]=false
set S10[2]=false
set S10[3]=false
set S10[4]=false
set S10[5]=false
set S10[6]=false
set S10[7]=false
set S10[8]=false
set S10[9]=false
set S10[10]=false
set S10[11]=false
set S10[12]=false
set S10[13]=false
set S10[14]=false
set S10[15]=false
set S10[16]=false
set S40[0]=false
set S40[1]=false
set S40[2]=false
set S40[3]=false
set S40[4]=false
set S40[5]=false
set S40[6]=false
set S40[7]=false
set S40[8]=false
set S40[9]=false
set S40[10]=false
set S40[11]=false
set S40[12]=false
set S40[13]=false
set S40[14]=false
set S40[15]=false
set S40[16]=false
set S40[GetPlayerId(CO[1])]=true
set S40[GetPlayerId(CO[2])]=true
set S40[GetPlayerId(CO[3])]=true
set S40[GetPlayerId(CO[4])]=true
set S40[GetPlayerId(CO[5])]=true
set S40[GetPlayerId(DO[1])]=true
set S40[GetPlayerId(DO[2])]=true
set S40[GetPlayerId(DO[3])]=true
set S40[GetPlayerId(DO[4])]=true
set S40[GetPlayerId(DO[5])]=true
call LAO()
set PL[0]=true
set PL[1]=true
set PL[2]=true
set PL[3]=true
set PL[4]=true
set PL[5]=true
set PL[6]=true
set PL[7]=true
set PL[8]=true
set PL[9]=true
set PL[10]=true
set PL[11]=true
set PL[12]=true
set PL[13]=true
set PL[14]=true
set PL[15]=true
set SA0[0]=false
set SA0[1]=false
set SA0[2]=false
set SA0[3]=false
set SA0[4]=false
set SA0[5]=false
set SA0[6]=false
set SA0[7]=false
set SA0[8]=false
set SA0[9]=false
set SA0[10]=false
set SA0[11]=false
set SA0[12]=false
set SA0[13]=false
set SA0[14]=false
set QL[GetPlayerId(CO[1])]=false
set QL[GetPlayerId(CO[2])]=false
set QL[GetPlayerId(CO[3])]=false
set QL[GetPlayerId(CO[4])]=false
set QL[GetPlayerId(CO[5])]=false
set QL[GetPlayerId(DO[1])]=false
set QL[GetPlayerId(DO[2])]=false
set QL[GetPlayerId(DO[3])]=false
set QL[GetPlayerId(DO[4])]=false
set QL[GetPlayerId(DO[5])]=false
set SB0[GetPlayerId(CO[1])]=false
set SB0[GetPlayerId(CO[2])]=false
set SB0[GetPlayerId(CO[3])]=false
set SB0[GetPlayerId(CO[4])]=false
set SB0[GetPlayerId(CO[5])]=false
set SB0[GetPlayerId(DO[1])]=false
set SB0[GetPlayerId(DO[2])]=false
set SB0[GetPlayerId(DO[3])]=false
set SB0[GetPlayerId(DO[4])]=false
set SB0[GetPlayerId(DO[5])]=false
set t=CreateTrigger()
call K9I(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call K9I(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call K9I(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(t,Condition(function LNO))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,5,true)
call TriggerAddCondition(t,Condition(function LMO))
set SD0[GetPlayerId(CO[1])]=false
set SD0[GetPlayerId(CO[2])]=false
set SD0[GetPlayerId(CO[3])]=false
set SD0[GetPlayerId(CO[4])]=false
set SD0[GetPlayerId(CO[5])]=false
set SD0[GetPlayerId(DO[1])]=false
set SD0[GetPlayerId(DO[2])]=false
set SD0[GetPlayerId(DO[3])]=false
set SD0[GetPlayerId(DO[4])]=false
set SD0[GetPlayerId(DO[5])]=false
set t=null
set IM[GetPlayerId(CO[1])]=false
set IM[GetPlayerId(CO[2])]=false
set IM[GetPlayerId(CO[3])]=false
set IM[GetPlayerId(CO[4])]=false
set IM[GetPlayerId(CO[5])]=false
set IM[GetPlayerId(DO[1])]=false
set IM[GetPlayerId(DO[2])]=false
set IM[GetPlayerId(DO[3])]=false
set IM[GetPlayerId(DO[4])]=false
set IM[GetPlayerId(DO[5])]=false
set SF0=SF0+1
set SE0[SF0]=QC
set SF0=SF0+1
set SE0[SF0]=UC
set SF0=SF0+1
set SE0[SF0]=OD
set SF0=SF0+1
set SE0[SF0]=XC
set SF0=SF0+1
set SE0[SF0]=YC
set SF0=SF0+1
set SE0[SF0]=JC
set SF0=SF0+1
set SE0[SF0]=BD
set SF0=SF0+1
set SE0[SF0]=DD
set SF0=SF0+1
set SE0[SF0]=ED
set SF0=SF0+1
set SE0[SF0]=IE
set SF0=SF0+1
set SE0[SF0]=OE
set SF0=SF0+1
set SE0[SF0]=AE
set SF0=SF0+1
set SE0[SF0]=FD
set SF0=SF0+1
set SE0[SF0]=GD
set SF0=SF0+1
set SE0[SF0]=HD
set SF0=SF0+1
set SE0[SF0]=ZD
set SF0=SF0+1
set SE0[SF0]=VD
set SF0=SF0+1
set SE0[SF0]=EF
set SF0=SF0+1
set SE0[SF0]=FF
set SF0=SF0+1
set SE0[SF0]=GF
set SF0=SF0+1
set SE0[SF0]=HF
set SF0=SF0+1
set SE0[SF0]=SG0
set SH0[0]=false
set SH0[1]=false
set SH0[2]=false
set SH0[3]=false
set SH0[4]=false
set SH0[5]=false
set SH0[6]=false
set SH0[7]=false
set SH0[8]=false
set SH0[9]=false
set SH0[10]=false
set SH0[11]=false
set SH0[12]=false
set SH0[13]=false
set SH0[14]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed1.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed2.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed3.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed4.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed5.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed6.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed1.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed2.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed3.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed4.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed5.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed6.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed7.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed1.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed2.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed3.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed4.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed5.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed6.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed1.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed2.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed3.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed4.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed5.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\Rifleman\\RiflemanPissed1.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\Rifleman\\RiflemanPissed2.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\Rifleman\\RiflemanPissed3.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\Rifleman\\RiflemanPissed4.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\Rifleman\\RiflemanPissed5.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\Rifleman\\RiflemanPissed6.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\Rifleman\\RiflemanPissed7.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Human\\Rifleman\\RiflemanPissed8.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed1.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed2.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed3.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed4.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed5.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed6.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed7.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed8.wav"
set SY0[SJ0]=false
set SJ0=SJ0+1
set SX0[SJ0]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed9.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\Ogre\\OgrePissed1.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\Ogre\\OgrePissed2.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\Ogre\\OgrePissed3.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\Ogre\\OgrePissed4.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\Ogre\\OgrePissed5.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed1.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed2.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed3.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed4.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed5.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed6.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed7.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed2.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed3.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed4.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed1.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed2.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed3.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed4.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed5.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed6.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed7.wav"
set SY0[SJ0]=false
set SX0[SJ0]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed8.wav"
set SY0[SJ0]=false
set SL0[0]=false
set SL0[1]=false
set SL0[2]=false
set SL0[3]=false
set SL0[4]=false
set SL0[5]=false
set SL0[6]=false
set SL0[7]=false
set SL0[8]=false
set SL0[9]=false
set SL0[10]=false
set SL0[11]=false
set SL0[12]=false
set SL0[13]=false
set t=CreateTrigger()
set V0I=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function NEO))
call SaveReal(ZY,(V0I),(149),((0)*1.0))
call SaveReal(ZY,(V0I),(150),((0)*1.0))
call SaveReal(ZY,(V0I),(151),((160)*1.0))
set HL[0]=false
set HL[1]=false
set HL[2]=false
set HL[3]=false
set HL[4]=false
set HL[5]=false
set HL[6]=false
set HL[7]=false
set HL[8]=false
set HL[9]=false
set HL[10]=false
set HL[11]=false
set HL[12]=false
set t=null
set t=CreateTrigger()
call TriggerAddAction(t,function T3O)
call TriggerAddCondition(t,Condition(function NZO))
set ST0=t
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.01,false)
call TriggerAddCondition(t,Condition(function T4O))
set t=null
if D2 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function O42))
endif
set t=null
set CH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(CH,E0[1])
call TriggerAddAction(CH,function OL2)
set DH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(DH,E0[2])
call TriggerAddAction(DH,function ON2)
set EH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(EH,E0[3])
call TriggerAddAction(EH,function OT2)
set FH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(FH,E0[4])
call TriggerAddAction(FH,function OP2)
set GH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(GH,E0[5])
call TriggerAddAction(GH,function OU2)
set HH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(HH,E0[7])
call TriggerAddAction(HH,function AI2)
set ZH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(ZH,E0[8])
call TriggerAddAction(ZH,function AO2)
set VH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(VH,E0[9])
call TriggerAddAction(VH,function A32)
set WH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(WH,E0[10])
call TriggerAddAction(WH,function A52)
set XH=CreateTrigger()
call TriggerRegisterTimerExpireEvent(XH,E0[11])
call TriggerAddAction(XH,function A72)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,14,false)
call TriggerAddCondition(t,Condition(function AB2))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15,false)
call TriggerAddCondition(t,Condition(function AA2))
set YH=CreateTrigger()
call TriggerRegisterTimerEventSingle(YH,65.00)
call TriggerAddAction(YH,function AD2)
set JH=CreateTrigger()
call TriggerRegisterTimerEventSingle(JH,90.00)
call TriggerAddAction(JH,function AF2)
set KH=CreateTrigger()
call TriggerRegisterTimerEventSingle(KH,120.00)
call TriggerAddAction(KH,function AH2)
set t=CreateTrigger()
set AOO=CreateRegion()
call RegionAddRect(AOO,GetWorldBounds())
call TriggerRegisterEnterRegion(t,AOO,Condition(function HRI))
call TriggerAddCondition(t,Condition(function KG3))
set CVI[1]=1093686867
set CVI[2]=1093686859
set CVI[3]=1093686865
set CVI[4]=1093687372
set CVI[5]=1093686861
set CVI[6]=1093686862
set CVI[7]=1093686863
set CVI[8]=1093686864
set CVI[9]=1093686855
set CVI[10]=1093686874
set t=null
set AOO=null
set t=CreateTrigger()
call K7I(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FZ3))
call TriggerAddAction(t,function FV3)
endfunction
function config takes nothing returns nothing
call SetMapName("TRIGSTR_50000")
call SetMapDescription("TRIGSTR_50001")
call SetPlayers(10)
call SetTeams(10)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0,-6990.0,6840.0)
call DefineStartLocation(1,-6990.0,6840.0)
call DefineStartLocation(2,-6990.0,6840.0)
call DefineStartLocation(3,-6990.0,6840.0)
call DefineStartLocation(4,-6990.0,6840.0)
call DefineStartLocation(5,-6990.0,6840.0)
call DefineStartLocation(6,-6990.0,6840.0)
call DefineStartLocation(7,-6990.0,6840.0)
call DefineStartLocation(8,-6990.0,6840.0)
call DefineStartLocation(9,-6990.0,6840.0)
call SetPlayerStartLocation(Player(1),0)
call ForcePlayerStartLocation(Player(1),0)
call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(1),false)
call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),1)
call ForcePlayerStartLocation(Player(2),1)
call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(2),false)
call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),2)
call ForcePlayerStartLocation(Player(3),2)
call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(3),false)
call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),3)
call ForcePlayerStartLocation(Player(4),3)
call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(4),false)
call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),4)
call ForcePlayerStartLocation(Player(5),4)
call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(5),false)
call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7),5)
call ForcePlayerStartLocation(Player(7),5)
call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(7),false)
call SetPlayerController(Player(7),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8),6)
call ForcePlayerStartLocation(Player(8),6)
call SetPlayerColor(Player(8),ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(8),false)
call SetPlayerController(Player(8),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(9),7)
call ForcePlayerStartLocation(Player(9),7)
call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(9),false)
call SetPlayerController(Player(9),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(10),8)
call ForcePlayerStartLocation(Player(10),8)
call SetPlayerColor(Player(10),ConvertPlayerColor(10))
call SetPlayerRacePreference(Player(10),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(10),false)
call SetPlayerController(Player(10),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(11),9)
call ForcePlayerStartLocation(Player(11),9)
call SetPlayerColor(Player(11),ConvertPlayerColor(11))
call SetPlayerRacePreference(Player(11),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(11),false)
call SetPlayerController(Player(11),MAP_CONTROL_USER)
call InitCustomTeams()
call SetPlayerAlliance(Player(15),Player(1),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(2),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(3),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(4),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(5),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(7),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(8),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(9),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(10),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player(15),Player(11),ConvertAllianceType(6),true)
call SetStartLocPrioCount(0,9)
call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1,9)
call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2,9)
call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3,9)
call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4,9)
call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5,9)
call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(6,9)
call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(7,9)
call SetStartLocPrio(7,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,6,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(8,9)
call SetStartLocPrio(8,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,6,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,7,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(9,9)
call SetStartLocPrio(9,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,6,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,7,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,8,8,MAP_LOC_PRIO_HIGH)
endfunction